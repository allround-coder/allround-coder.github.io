{"pageProps":{"post":{"title":"로컬호스트에서 HTTPS를 실행하는 방법 단계별 안내","description":"","date":"2024-06-20 07:36","slug":"2024-06-20-HowtoRunHTTPSonLocalhostAStep-by-StepGuide","content":"\n\n로컬호스트에서 HTTPS를 실행하는 것은 안전한 웹 애플리케이션을 개발하고 테스트하는 데 필수적입니다.\n보안 소켓 계층(SSL) 또는 전송 계층 보안(TLS)은 인터넷을 통해 안전한 통신을 제공하는 방법을 제공합니다. 로컬호스트에서 HTTPS 서버를 실행하면 제품 서버에 배포될 때 웹 애플리케이션이 작동할 안전한 환경을 시뮬레이션할 수 있습니다.\n\n![이미지](/assets/img/2024-06-20-HowtoRunHTTPSonLocalhostAStep-by-StepGuide_0.png)\n\n이 안내서에서는 자체 서명된 인증서 및 Node.js 서버를 사용하여 로컬 머신에서 HTTPS를 설정하는 과정을 안내하겠습니다.\n\n#  준비 사항\n\n<div class=\"content-ad\"></div>\n\n시작하기 전에 다음 사전 요구 사항을 준비해 주세요:\n\n- Node.js 및 npm: 시스템에 Node.js 및 npm이 설치되어 있는지 확인하세요. 이것들은 nodejs.org에서 다운로드할 수 있습니다.\n- HTTPS의 기본 지식\n\n# 단계 1: 자체 서명 루트 인증서 생성\n\n첫 번째 단계는 자체 서명 루트 인증서를 생성하는 것입니다. 해당 인증서를 컴퓨터에 설치하고 서버에서 사용할 다른 인증서를 서명할 것입니다. 루트 인증서를 설치하면 해당 루트 인증서로 서명된 다른 인증서를 신뢰하는 것을 의미합니다.\n\n<div class=\"content-ad\"></div>\n\n- 터미널이나 명령 프롬프트를 열고 인증서를 저장할 디렉토리로 이동하세요.\n- 다음 명령을 실행하여 루트 인증서용 개인 키를 생성하세요:\n\n```js\nopenssl genrsa -out root.key 2048\n```\n\n3. 이제 해당 개인 키를 사용하여 자체 서명된 루트 인증서를 생성하세요:\n\n```js\nopenssl req -x509 -new -nodes -key root.key -sha256 -days 365 -out root.crt\n```\n\n<div class=\"content-ad\"></div>\n\n4. macOS를 사용 중이라면, root.crt 파일을 두 번 클릭하여 시스템의 신뢰할 수 있는 인증서에 루트 인증서를 추가할 수 있습니다. Keychain Access 애플리케이션이 열릴 것입니다. \"System\" 키체인을 선택한 후, \"추가\"를 클릭하여 root.crt 파일을 찾아 선택하고 다시 \"추가\"를 클릭합니다. 인증서가 신뢰할 수 있는 것으로 표시되었는지 확인해주세요.\n\n이러한 단계를 거친 후, 우리는 자체 서명 루트 인증서를 만들어 신뢰할 수 있는 저장소에 추가했습니다.\n\n# 단계 2: 서버 인증서 생성\n\n다음으로, 로컬호스트를 위한 서버 인증서를 만들 것입니다. 이 인증서를 사용하면 로컬 서버가 안전한 연결을 설정할 수 있습니다. 서버의 인증서를 루트 인증서로 서명하여 컴퓨터가 서버의 신뢰성을 보장할 수 있도록 할 것입니다.\n\n<div class=\"content-ad\"></div>\n\n- 서버용 개인 키 생성:\n\n```js\nopenssl genrsa -out server.key 2048\n```\n\n2. 서버용 개인 키를 사용하여 인증서 서명 요청 (CSR) 생성:\n\n```js\nopenssl req -new -key server.key -out server.csr\n```\n\n<div class=\"content-ad\"></div>\n\n3. 이 명령은 공통 이름 (CN) 및 조직 세부 정보와 같은 CSR에 대한 일부 정보를 제공하도록 요구합니다. 공통 이름을 서버와 연결된 호스트명 또는 도메인 이름 (예: localhost)으로 설정해야 합니다.\n\n4. 루트 인증서로 CSR에 서명하여 서버 인증서를 만듭니다:\n\n```js\nopenssl x509 -req -in server.csr -CA root.crt -CAkey root.key -CAcreateserial -out server.crt -days 365 -sha256\n```\n\n5. 이 명령은 루트 인증서와 개인 키를 사용하여 CSR에 서명하고, 365일 동안 유효한 새로운 서버 인증서인 server.crt를 생성합니다.\n\n<div class=\"content-ad\"></div>\n\n이러한 단계를 거치면 서버에서 사용할 인증서를 만들고 PC가 신뢰하는 인증서로 설정합니다.\n\n# 단계 3: Node.js 서버 생성\n\n이제 서버 인증서를 준비했으니, HTTPS로 콘텐츠를 제공하기 위한 간단한 Node.js 서버를 만들어봅시다. 이 예시에선 Node.js와 Express 프레임워크를 사용하지만, 다른 언어와 프레임워크에 이 단계를 적용할 수도 있습니다.\n\n- server.js 라는 파일을 생성하고 다음 코드를 추가하세요:\n\n<div class=\"content-ad\"></div>\n\n```js\n// server.js\nconst app = require('express')();\nconst https = require('https');\nconst fs = require('fs');\n\nconst options = {\n    key: fs.readFileSync('~/certs/practice/server.key'), // 귀하의 키 경로로 대체하세요\n    cert: fs.readFileSync('~/certs/practice/server.crt'), // 귀하의 인증서 경로로 대체하세요\n}\n\nhttps.createServer(options, (req, res) => {\n  res.writeHead(200);\n  res.end('Hello, HTTPS World!');\n}).listen(443, () => {\n  console.log('서버가 443 포트에서 실행 중입니다');\n});node\n```\n\n2. 파일을 저장한 후 터미널에서 아래 명령어를 실행하여 서버를 시작하세요:\n\n```js\nnode server.js\n```\n\n3. HTTPS 서버가 443 포트에서 실행 중이며, https://localhost 에서 액세스할 수 있습니다\n\n\n<div class=\"content-ad\"></div>\n\n# 단계 4: 루트 인증서 신뢰 (macOS 전용)\n\n만약 macOS를 사용 중이라면, 루트 인증서를 신뢰하기 위해 다음 추가 단계를 따라주세요:\n\n- Keychain Access 애플리케이션을 엽니다.\n- 왼쪽 사이드바에서 \"시스템\" 키체인을 선택합니다.\n- \"파일\"을 클릭한 후 \"항목 가져오기\"를 선택하고 root.crt 파일을 선택합니다.\n- 가져온 인증서를 더블 클릭하고 \"신뢰\" 섹션을 확장한 후 \"이 인증서 사용 시\"를 \"항상 신뢰함\"으로 설정합니다.\n\n# 단계 5: 최종 스크립트 (옵션)\n\n<div class=\"content-ad\"></div>\n\n인증서 생성 및 서버 설정을 자동화하려면 다음 스크립트를 사용할 수 있어요:\n\n```js\necho \"루트 서버 생성 중\"\nopenssl genrsa -out root.key 2048\nopenssl req -x509 -new -nodes -key root.key -sha256 -days 365 -out root.crt\n\necho \"서버 인증서 생성 중\"\nopenssl genrsa -out server.key 2048\nopenssl req -new -key server.key -out server.csr\nopenssl x509 -req -in server.csr -CA root.crt -CAkey root.key -CAcreateserial -out server.crt -days 365 -sha256\n\necho \"서버 파일 생성 중\"\ntouch server.js\necho \"\n// server.js\nconst app = require('express')();\nconst https = require('https');\nconst fs = require('fs');\n\nconst options = {\n    key: fs.readFileSync('/Users/akshitdev/certs/practice/server.key'),\n    cert: fs.readFileSync('/Users/akshitdev/certs/practice/server.crt'),\n}\n\nhttps.createServer(options, (req, res) => {\n  res.writeHead(200);\n  res.end('Hello, HTTPS World!');\n}).listen(443, () => {\n  console.log('서버가 포트 443에서 실행 중입니다');\n});\n\" >> server.js\n\necho \"서버를 루트에 추가 중\"\nsudo security add-trusted-cert -d -r trustRoot -k \"/Library/Keychains/System.keychain\" <인증서_파일_경로>\n\necho \"서버 실행 중\"\nnode server.js\n```\n\n이 스크립트를 사용하면 인증서 생성 및 서버 설정 과정을 자동화할 수 있어요.\n\n끝났어요! 셀프 사이닝된 인증서를 사용하여 로컬호스트에서 HTTPS를 성공적으로 구성했어요.","ogImage":{"url":"/assets/img/2024-06-20-HowtoRunHTTPSonLocalhostAStep-by-StepGuide_0.png"},"coverImage":"/assets/img/2024-06-20-HowtoRunHTTPSonLocalhostAStep-by-StepGuide_0.png","tag":["Tech"],"readingTime":5},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>로컬호스트에서 HTTPS를 실행하는 것은 안전한 웹 애플리케이션을 개발하고 테스트하는 데 필수적입니다.\n보안 소켓 계층(SSL) 또는 전송 계층 보안(TLS)은 인터넷을 통해 안전한 통신을 제공하는 방법을 제공합니다. 로컬호스트에서 HTTPS 서버를 실행하면 제품 서버에 배포될 때 웹 애플리케이션이 작동할 안전한 환경을 시뮬레이션할 수 있습니다.</p>\n<p><img src=\"/assets/img/2024-06-20-HowtoRunHTTPSonLocalhostAStep-by-StepGuide_0.png\" alt=\"이미지\"></p>\n<p>이 안내서에서는 자체 서명된 인증서 및 Node.js 서버를 사용하여 로컬 머신에서 HTTPS를 설정하는 과정을 안내하겠습니다.</p>\n<h1>준비 사항</h1>\n<div class=\"content-ad\"></div>\n<p>시작하기 전에 다음 사전 요구 사항을 준비해 주세요:</p>\n<ul>\n<li>Node.js 및 npm: 시스템에 Node.js 및 npm이 설치되어 있는지 확인하세요. 이것들은 nodejs.org에서 다운로드할 수 있습니다.</li>\n<li>HTTPS의 기본 지식</li>\n</ul>\n<h1>단계 1: 자체 서명 루트 인증서 생성</h1>\n<p>첫 번째 단계는 자체 서명 루트 인증서를 생성하는 것입니다. 해당 인증서를 컴퓨터에 설치하고 서버에서 사용할 다른 인증서를 서명할 것입니다. 루트 인증서를 설치하면 해당 루트 인증서로 서명된 다른 인증서를 신뢰하는 것을 의미합니다.</p>\n<div class=\"content-ad\"></div>\n<ul>\n<li>터미널이나 명령 프롬프트를 열고 인증서를 저장할 디렉토리로 이동하세요.</li>\n<li>다음 명령을 실행하여 루트 인증서용 개인 키를 생성하세요:</li>\n</ul>\n<pre><code class=\"hljs language-js\">openssl genrsa -out root.<span class=\"hljs-property\">key</span> <span class=\"hljs-number\">2048</span>\n</code></pre>\n<ol start=\"3\">\n<li>이제 해당 개인 키를 사용하여 자체 서명된 루트 인증서를 생성하세요:</li>\n</ol>\n<pre><code class=\"hljs language-js\">openssl req -x509 -<span class=\"hljs-keyword\">new</span> -nodes -key root.<span class=\"hljs-property\">key</span> -sha256 -days <span class=\"hljs-number\">365</span> -out root.<span class=\"hljs-property\">crt</span>\n</code></pre>\n<div class=\"content-ad\"></div>\n<ol start=\"4\">\n<li>macOS를 사용 중이라면, root.crt 파일을 두 번 클릭하여 시스템의 신뢰할 수 있는 인증서에 루트 인증서를 추가할 수 있습니다. Keychain Access 애플리케이션이 열릴 것입니다. \"System\" 키체인을 선택한 후, \"추가\"를 클릭하여 root.crt 파일을 찾아 선택하고 다시 \"추가\"를 클릭합니다. 인증서가 신뢰할 수 있는 것으로 표시되었는지 확인해주세요.</li>\n</ol>\n<p>이러한 단계를 거친 후, 우리는 자체 서명 루트 인증서를 만들어 신뢰할 수 있는 저장소에 추가했습니다.</p>\n<h1>단계 2: 서버 인증서 생성</h1>\n<p>다음으로, 로컬호스트를 위한 서버 인증서를 만들 것입니다. 이 인증서를 사용하면 로컬 서버가 안전한 연결을 설정할 수 있습니다. 서버의 인증서를 루트 인증서로 서명하여 컴퓨터가 서버의 신뢰성을 보장할 수 있도록 할 것입니다.</p>\n<div class=\"content-ad\"></div>\n<ul>\n<li>서버용 개인 키 생성:</li>\n</ul>\n<pre><code class=\"hljs language-js\">openssl genrsa -out server.<span class=\"hljs-property\">key</span> <span class=\"hljs-number\">2048</span>\n</code></pre>\n<ol start=\"2\">\n<li>서버용 개인 키를 사용하여 인증서 서명 요청 (CSR) 생성:</li>\n</ol>\n<pre><code class=\"hljs language-js\">openssl req -<span class=\"hljs-keyword\">new</span> -key server.<span class=\"hljs-property\">key</span> -out server.<span class=\"hljs-property\">csr</span>\n</code></pre>\n<div class=\"content-ad\"></div>\n<ol start=\"3\">\n<li>\n<p>이 명령은 공통 이름 (CN) 및 조직 세부 정보와 같은 CSR에 대한 일부 정보를 제공하도록 요구합니다. 공통 이름을 서버와 연결된 호스트명 또는 도메인 이름 (예: localhost)으로 설정해야 합니다.</p>\n</li>\n<li>\n<p>루트 인증서로 CSR에 서명하여 서버 인증서를 만듭니다:</p>\n</li>\n</ol>\n<pre><code class=\"hljs language-js\">openssl x509 -req -<span class=\"hljs-keyword\">in</span> server.<span class=\"hljs-property\">csr</span> -<span class=\"hljs-variable constant_\">CA</span> root.<span class=\"hljs-property\">crt</span> -<span class=\"hljs-title class_\">CAkey</span> root.<span class=\"hljs-property\">key</span> -<span class=\"hljs-title class_\">CAcreateserial</span> -out server.<span class=\"hljs-property\">crt</span> -days <span class=\"hljs-number\">365</span> -sha256\n</code></pre>\n<ol start=\"5\">\n<li>이 명령은 루트 인증서와 개인 키를 사용하여 CSR에 서명하고, 365일 동안 유효한 새로운 서버 인증서인 server.crt를 생성합니다.</li>\n</ol>\n<div class=\"content-ad\"></div>\n<p>이러한 단계를 거치면 서버에서 사용할 인증서를 만들고 PC가 신뢰하는 인증서로 설정합니다.</p>\n<h1>단계 3: Node.js 서버 생성</h1>\n<p>이제 서버 인증서를 준비했으니, HTTPS로 콘텐츠를 제공하기 위한 간단한 Node.js 서버를 만들어봅시다. 이 예시에선 Node.js와 Express 프레임워크를 사용하지만, 다른 언어와 프레임워크에 이 단계를 적용할 수도 있습니다.</p>\n<ul>\n<li>server.js 라는 파일을 생성하고 다음 코드를 추가하세요:</li>\n</ul>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server.js</span>\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'express'</span>)();\n<span class=\"hljs-keyword\">const</span> https = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'https'</span>);\n<span class=\"hljs-keyword\">const</span> fs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'fs'</span>);\n\n<span class=\"hljs-keyword\">const</span> options = {\n    <span class=\"hljs-attr\">key</span>: fs.<span class=\"hljs-title function_\">readFileSync</span>(<span class=\"hljs-string\">'~/certs/practice/server.key'</span>), <span class=\"hljs-comment\">// 귀하의 키 경로로 대체하세요</span>\n    <span class=\"hljs-attr\">cert</span>: fs.<span class=\"hljs-title function_\">readFileSync</span>(<span class=\"hljs-string\">'~/certs/practice/server.crt'</span>), <span class=\"hljs-comment\">// 귀하의 인증서 경로로 대체하세요</span>\n}\n\nhttps.<span class=\"hljs-title function_\">createServer</span>(options, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =></span> {\n  res.<span class=\"hljs-title function_\">writeHead</span>(<span class=\"hljs-number\">200</span>);\n  res.<span class=\"hljs-title function_\">end</span>(<span class=\"hljs-string\">'Hello, HTTPS World!'</span>);\n}).<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-number\">443</span>, <span class=\"hljs-function\">() =></span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'서버가 443 포트에서 실행 중입니다'</span>);\n});node\n</code></pre>\n<ol start=\"2\">\n<li>파일을 저장한 후 터미널에서 아래 명령어를 실행하여 서버를 시작하세요:</li>\n</ol>\n<pre><code class=\"hljs language-js\">node server.<span class=\"hljs-property\">js</span>\n</code></pre>\n<ol start=\"3\">\n<li>HTTPS 서버가 443 포트에서 실행 중이며, <a href=\"https://localhost\" rel=\"nofollow\" target=\"_blank\">https://localhost</a> 에서 액세스할 수 있습니다</li>\n</ol>\n<div class=\"content-ad\"></div>\n<h1>단계 4: 루트 인증서 신뢰 (macOS 전용)</h1>\n<p>만약 macOS를 사용 중이라면, 루트 인증서를 신뢰하기 위해 다음 추가 단계를 따라주세요:</p>\n<ul>\n<li>Keychain Access 애플리케이션을 엽니다.</li>\n<li>왼쪽 사이드바에서 \"시스템\" 키체인을 선택합니다.</li>\n<li>\"파일\"을 클릭한 후 \"항목 가져오기\"를 선택하고 root.crt 파일을 선택합니다.</li>\n<li>가져온 인증서를 더블 클릭하고 \"신뢰\" 섹션을 확장한 후 \"이 인증서 사용 시\"를 \"항상 신뢰함\"으로 설정합니다.</li>\n</ul>\n<h1>단계 5: 최종 스크립트 (옵션)</h1>\n<div class=\"content-ad\"></div>\n<p>인증서 생성 및 서버 설정을 자동화하려면 다음 스크립트를 사용할 수 있어요:</p>\n<pre><code class=\"hljs language-js\">echo <span class=\"hljs-string\">\"루트 서버 생성 중\"</span>\nopenssl genrsa -out root.<span class=\"hljs-property\">key</span> <span class=\"hljs-number\">2048</span>\nopenssl req -x509 -<span class=\"hljs-keyword\">new</span> -nodes -key root.<span class=\"hljs-property\">key</span> -sha256 -days <span class=\"hljs-number\">365</span> -out root.<span class=\"hljs-property\">crt</span>\n\necho <span class=\"hljs-string\">\"서버 인증서 생성 중\"</span>\nopenssl genrsa -out server.<span class=\"hljs-property\">key</span> <span class=\"hljs-number\">2048</span>\nopenssl req -<span class=\"hljs-keyword\">new</span> -key server.<span class=\"hljs-property\">key</span> -out server.<span class=\"hljs-property\">csr</span>\nopenssl x509 -req -<span class=\"hljs-keyword\">in</span> server.<span class=\"hljs-property\">csr</span> -<span class=\"hljs-variable constant_\">CA</span> root.<span class=\"hljs-property\">crt</span> -<span class=\"hljs-title class_\">CAkey</span> root.<span class=\"hljs-property\">key</span> -<span class=\"hljs-title class_\">CAcreateserial</span> -out server.<span class=\"hljs-property\">crt</span> -days <span class=\"hljs-number\">365</span> -sha256\n\necho <span class=\"hljs-string\">\"서버 파일 생성 중\"</span>\ntouch server.<span class=\"hljs-property\">js</span>\necho <span class=\"hljs-string\">\"\n// server.js\nconst app = require('express')();\nconst https = require('https');\nconst fs = require('fs');\n\nconst options = {\n    key: fs.readFileSync('/Users/akshitdev/certs/practice/server.key'),\n    cert: fs.readFileSync('/Users/akshitdev/certs/practice/server.crt'),\n}\n\nhttps.createServer(options, (req, res) => {\n  res.writeHead(200);\n  res.end('Hello, HTTPS World!');\n}).listen(443, () => {\n  console.log('서버가 포트 443에서 실행 중입니다');\n});\n\"</span> >> server.<span class=\"hljs-property\">js</span>\n\necho <span class=\"hljs-string\">\"서버를 루트에 추가 중\"</span>\nsudo security add-trusted-cert -d -r trustRoot -k <span class=\"hljs-string\">\"/Library/Keychains/System.keychain\"</span> &#x3C;인증서_파일_경로>\n\necho <span class=\"hljs-string\">\"서버 실행 중\"</span>\nnode server.<span class=\"hljs-property\">js</span>\n</code></pre>\n<p>이 스크립트를 사용하면 인증서 생성 및 서버 설정 과정을 자동화할 수 있어요.</p>\n<p>끝났어요! 셀프 사이닝된 인증서를 사용하여 로컬호스트에서 HTTPS를 성공적으로 구성했어요.</p>\n</body>\n</html>\n"},"__N_SSG":true}