{"pageProps":{"post":{"title":"JavaScript 스크립트에 데이터를 전달하고 스크립트 내에서 검증하는 방법","description":"","date":"2024-06-22 03:56","slug":"2024-06-22-HowtopassdatatoaJavaScriptscriptandvalidateitwithinthescript","content":"\n\n웹 브라우저에서 실행되는 JavaScript 코드를 삽입하기 위해 `script` 태그를 사용합니다. 경우에 따라, 스크립트가 초기화되고 실행될 때 외부 데이터를 전달해야 할 때가 있습니다. 이렇게 데이터를 전달하고 스크립트 내에서 유효성을 검증하는 방법을 알아보겠습니다.\n\n## A/B 테스트 예제\n\n어플리케이션 내에서 두 기능이 연관된 플로우 중 하나를 활성화하는 역할을 하는 ab-testing.js 스크립트가 있다고 상상해보세요. 어떤 기능을 보여줄지를 결정하는 데이터- 어트리뷰트가 예상됩니다. 예를 들면:\n\n```js\n<script src=\"./ab-testing.js\" data-variant=\"a\"></script>\n```\n\n<div class=\"content-ad\"></div>\n\n이제는 스크립트를 사용하는 모든 클라이언트가 데이터-variant를 정확히 'a' 또는 'b'로 전달해야 합니다.\n\n따라서 스크립트의 진입점에서 그것을 검증할 수 있습니다.\n\n```js\nfunction getFeatureVariantOrThrow() {\n  const script = document.currentScript\n  const variant = script?.getAttribute(\"data-variant\")\n\n  if (!variant) {\n    throw new Error(\"스크립트 태그에 데이터-variant 속성을 전달해주세요\")\n  }\n\n  if ([\"a\", \"b\"].includes(variant)) {\n    return variant\n  }\n\n  throw new Error(\n    'data-variant에 대한 잘못된 값입니다. \"a\" 또는 \"b\" 중 하나를 전달해주세요'\n  )\n}\n\nconst variant = getFeatureVariantOrThrow()\n```\n\n이렇게 하면 당신의 스크립트를 사용하는 애플리케이션은 정확한 데이터-variant를 제공해야 합니다. 그렇지 않으면 브라우저 콘솔에 오류가 표시됩니다:\n\n<div class=\"content-ad\"></div>\n\n<img src=\"/assets/img/2024-06-22-HowtopassdatatoaJavaScriptscriptandvalidateitwithinthescript_0.png\" />\n\n## 요약\n\n이 짧은 글에서는 데이터 속성을 스크립트로 전달하고 스크립트 내에서 유효성을 검사하는 매우 구체적인 사용 사례에 대해 논의했습니다.\n\n더 많은 내용을 보려면 팔로우하세요:\n\n<div class=\"content-ad\"></div>\n\n- LinkedIn\n- GitHub\n\n더 많은 풀스택 엔지니어링 콘텐츠를 보고 싶으시면 좋아요와 팔로우를 해주세요!","ogImage":{"url":"/assets/img/2024-06-22-HowtopassdatatoaJavaScriptscriptandvalidateitwithinthescript_0.png"},"coverImage":"/assets/img/2024-06-22-HowtopassdatatoaJavaScriptscriptandvalidateitwithinthescript_0.png","tag":["Tech"],"readingTime":2},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>웹 브라우저에서 실행되는 JavaScript 코드를 삽입하기 위해 <code>script</code> 태그를 사용합니다. 경우에 따라, 스크립트가 초기화되고 실행될 때 외부 데이터를 전달해야 할 때가 있습니다. 이렇게 데이터를 전달하고 스크립트 내에서 유효성을 검증하는 방법을 알아보겠습니다.</p>\n<h2>A/B 테스트 예제</h2>\n<p>어플리케이션 내에서 두 기능이 연관된 플로우 중 하나를 활성화하는 역할을 하는 ab-testing.js 스크립트가 있다고 상상해보세요. 어떤 기능을 보여줄지를 결정하는 데이터- 어트리뷰트가 예상됩니다. 예를 들면:</p>\n<pre><code class=\"hljs language-js\">&#x3C;script src=<span class=\"hljs-string\">\"./ab-testing.js\"</span> data-variant=<span class=\"hljs-string\">\"a\"</span>>&#x3C;/script>\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>이제는 스크립트를 사용하는 모든 클라이언트가 데이터-variant를 정확히 'a' 또는 'b'로 전달해야 합니다.</p>\n<p>따라서 스크립트의 진입점에서 그것을 검증할 수 있습니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getFeatureVariantOrThrow</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> script = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">currentScript</span>\n  <span class=\"hljs-keyword\">const</span> variant = script?.<span class=\"hljs-title function_\">getAttribute</span>(<span class=\"hljs-string\">\"data-variant\"</span>)\n\n  <span class=\"hljs-keyword\">if</span> (!variant) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">\"스크립트 태그에 데이터-variant 속성을 전달해주세요\"</span>)\n  }\n\n  <span class=\"hljs-keyword\">if</span> ([<span class=\"hljs-string\">\"a\"</span>, <span class=\"hljs-string\">\"b\"</span>].<span class=\"hljs-title function_\">includes</span>(variant)) {\n    <span class=\"hljs-keyword\">return</span> variant\n  }\n\n  <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(\n    <span class=\"hljs-string\">'data-variant에 대한 잘못된 값입니다. \"a\" 또는 \"b\" 중 하나를 전달해주세요'</span>\n  )\n}\n\n<span class=\"hljs-keyword\">const</span> variant = <span class=\"hljs-title function_\">getFeatureVariantOrThrow</span>()\n</code></pre>\n<p>이렇게 하면 당신의 스크립트를 사용하는 애플리케이션은 정확한 데이터-variant를 제공해야 합니다. 그렇지 않으면 브라우저 콘솔에 오류가 표시됩니다:</p>\n<div class=\"content-ad\"></div>\n<img src=\"/assets/img/2024-06-22-HowtopassdatatoaJavaScriptscriptandvalidateitwithinthescript_0.png\">\n<h2>요약</h2>\n<p>이 짧은 글에서는 데이터 속성을 스크립트로 전달하고 스크립트 내에서 유효성을 검사하는 매우 구체적인 사용 사례에 대해 논의했습니다.</p>\n<p>더 많은 내용을 보려면 팔로우하세요:</p>\n<div class=\"content-ad\"></div>\n<ul>\n<li>LinkedIn</li>\n<li>GitHub</li>\n</ul>\n<p>더 많은 풀스택 엔지니어링 콘텐츠를 보고 싶으시면 좋아요와 팔로우를 해주세요!</p>\n</body>\n</html>\n"},"__N_SSG":true}