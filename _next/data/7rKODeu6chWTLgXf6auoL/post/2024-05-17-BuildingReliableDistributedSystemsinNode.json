{"pageProps":{"post":{"title":"Nodeì—ì„œ ì•ˆì •ì ì¸ ë¶„ì‚° ì‹œìŠ¤í…œ êµ¬ì¶•í•˜ëŠ” ë°©ë²•","description":"","date":"2024-05-17 20:34","slug":"2024-05-17-BuildingReliableDistributedSystemsinNode","content":"\n\nì´ ê²Œì‹œë¬¼ì€ Stripe, Netflix, Coinbase, Snap ë° ê¸°íƒ€ ë§ì€ íšŒì‚¬ë“¤ì´ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë‹¤ì–‘í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” durable execution ê°œë…ì„ ì†Œê°œí•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Temporalì˜ TypeScript/JavaScript SDKë¥¼ ì‚¬ìš©í•˜ì—¬ durable ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì–¼ë§ˆë‚˜ ê°„ë‹¨í•œì§€ ë³´ì—¬ì¤ë‹ˆë‹¤.\n\n# ë¶„ì‚° ì‹œìŠ¤í…œ\n\níŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë’·ë°›ì¹¨ëœ ìš”ì²­-ì‘ë‹µ ë‹¨ì¼ì²´ë¥¼ êµ¬ì¶•í•  ë•Œ, ìš°ë¦¬ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì— ëŒ€í•œ ë§ì€ ê³ ë ¤ ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¨ìˆœí•œ ì‹¤íŒ¨ ëª¨ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©° ì‰½ê²Œ ì •í™•í•œ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n- í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ë„ë‹¬í•  ìˆ˜ ì—†ëŠ” ê²½ìš° í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.\n- í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ë„ë‹¬í•˜ì§€ë§Œ ì„œë²„ê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ë„ë‹¬í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš° ì„œë²„ëŠ” ì˜¤ë¥˜ë¡œ ì‘ë‹µí•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.\n- ì„œë²„ê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ë„ë‹¬í•˜ì§€ë§Œ íŠ¸ëœì­ì…˜ì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš° ì„œë²„ëŠ” ì˜¤ë¥˜ë¡œ ì‘ë‹µí•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.\n- íŠ¸ëœì­ì…˜ì´ ì„±ê³µí•˜ì§€ë§Œ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µí•˜ê¸° ì „ì— ì¢…ë£Œëœ ê²½ìš° í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ê°€ ë‹¤ì‹œ ì¼œì§ˆ ë•Œê¹Œì§€ ë‹¤ì‹œ ì‹œë„í•˜ê³ , íŠ¸ëœì­ì…˜ì€ ë‘ ë²ˆì§¸ë¡œ ì‹¤íŒ¨í•©ë‹ˆë‹¤(íŠ¸ëœì­ì…˜ì´ ì´ë¯¸ ì ìš©ë˜ì—ˆëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” idempotency tokenê³¼ ê°™ì€ í™•ì¸ì´ ìˆìŒì„ ê°€ì •), ê·¸ë¦¬ê³  ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ì—…ì´ ì´ë¯¸ ìˆ˜í–‰ë˜ì—ˆìŒì„ ë³´ê³ í•©ë‹ˆë‹¤.\n\n<div class=\"content-ad\"></div>\n\ní•œ ë²ˆì— ë‘ ë²ˆì§¸ ìœ„ì¹˜ë¥¼ ì¶”ê°€í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ë‚˜ ì™¸ë¶€ APIì™€ ê°™ì€ ì¼ì€ ì¥ì• ë¥¼ ì²˜ë¦¬í•˜ê³  ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒ(ëª¨ë“  ë°ì´í„° ì €ì¥ì†Œ ê°„ì˜ ì •í™•ì„±)ì´ í›¨ì”¬ ë” ë³µì¡í•´ì§‘ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì„œë²„ê°€ ì‹ ìš© ì¹´ë“œë¥¼ ì²­êµ¬í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ì²˜ëŸ¼, ë‹¨ìˆœí•œ ì½”ë“œë¥¼ ë” ì´ìƒ ì‘ì„±í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.\n\n```js\nfunction handleRequest() {\n  paymentAPI.chargeCard()\n  database.insertOrder()\n  return 200\n}\n```\n\nì¹´ë“œ ì²­êµ¬(ì²« ë²ˆì§¸ ë‹¨ê³„)ëŠ” ì„±ê³µí–ˆì§€ë§Œ ë°ì´í„°ë² ì´ìŠ¤ì— ì£¼ë¬¸ ì¶”ê°€(ë‘ ë²ˆì§¸ ë‹¨ê³„)ê°€ ì‹¤íŒ¨í•  ê²½ìš° ì‹œìŠ¤í…œì€ ì¼ê´€ì„± ì—†ëŠ” ìƒíƒœì— ë†“ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ë‘ ë²ˆì§¸ ë‹¨ê³„ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë„ë‹¬í•  ë•Œê¹Œì§€ ë‹¤ì‹œ ì‹œë„í•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤íŒ¨í•  ìˆ˜ë„ ìˆìœ¼ë©°, ì´ ê²½ìš° ìš°ë¦¬ëŠ” ì²« ë²ˆì§¸ ë‹¨ê³„ê°€ ë°œìƒí•œ ì‚¬ì‹¤ì„ ì „í˜€ ì•Œ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ì„¸ ê°€ì§€ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤:\n\n- ì£¼ë¬¸ ì„¸ë¶€ ì •ë³´ë¥¼ ìœ ì§€\n- ì™„ë£Œí•œ í”„ë¡œê·¸ë¨ ë‹¨ê³„ë¥¼ ìœ ì§€\n- ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë¯¸ì™„ë£Œ ì£¼ë¬¸ì„ í™•ì¸í•˜ê³  ë‹¤ìŒ ë‹¨ê³„ë¡œ ê³„ì† ì§„í–‰í•˜ëŠ” ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰\n\n<div class=\"content-ad\"></div>\n\nê·¸, ê·¸ë¦¬ê³  ì¬ì‹œë„ ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ê° ë‹¨ê³„ì— ì‹œê°„ ì œí•œì„ ì¶”ê°€í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë§ì€ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•˜ê³ , íŠ¹ì • ê°€ì¥ìë¦¬ ê²½ìš°ë‚˜ ì‹¤íŒ¨ ëª¨ë“œë¥¼ ë†“ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì „ì²´ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ë¥¼ ë³´ë ¤ë©´ í´ë¦­í•˜ì„¸ìš”. ìš°ë¦¬ê°€ ëª¨ë“  ê·¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë””ë²„ê·¸í•  í•„ìš” ì—†ì´ ì¢€ ë” ë¹ ë¥´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤ì„ êµ¬ì¶•í•  ìˆ˜ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤. ê·¸ê±¸ í•  í•„ìš” ì—†ë‹¤ëŠ” ê±´ ìš°ë¦¬ê°€ ë‚´êµ¬ì„± ì‹¤í–‰ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\n# ë‚´êµ¬ì„± ì‹¤í–‰\n\në‚´êµ¬ì„± ì‹¤í–‰ ì‹œìŠ¤í…œì€ ìš°ë¦¬ì˜ ì½”ë“œë¥¼ ê° ë‹¨ê³„ë¥¼ ì§€ì†ì‹œí‚¤ëŠ” ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë‚˜ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ì–´ë„ ì½”ë“œëŠ” í˜¸ì¶œ ìŠ¤íƒê³¼ ë¡œì»¬ ë³€ìˆ˜ë¥¼ í¬í•¨í•œ ëª¨ë“  ìƒíƒœë¥¼ ìœ ì§€í•œ ì±„ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ì„œ ìë™ìœ¼ë¡œ ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤.\n\në‚´êµ¬ì„± ì‹¤í–‰ì€ í•˜ë“œì›¨ì–´ê°€ ì–¼ë§ˆë‚˜ ì‹ ë¢°í• ì§€ë‚˜ í•˜ë¥˜ ì„œë¹„ìŠ¤ê°€ ì–¼ë§ˆë‚˜ ì˜¤ë«ë™ì•ˆ ì˜¤í”„ë¼ì¸ì¸ì§€ì— ìƒê´€ì—†ì´ ì½”ë“œê°€ ì™„ë£Œë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ì¬ì‹œë„ì™€ íƒ€ì„ì•„ì›ƒì€ ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ë©°, ì½”ë“œê°€ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šì„ ë•Œ(ì˜ˆë¥¼ ë“¤ì–´ sleep('1 month') ë¬¸ì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ) ìì›ì´ í•´ì œë©ë‹ˆë‹¤.\n\n<div class=\"content-ad\"></div>\n\në‚´êµ¬ì„± ìˆëŠ” ì‹¤í–‰ì€ ì´ë²¤íŠ¸ ì£¼ë„ ì•„í‚¤í…ì²˜, ì‘ì—… ëŒ€ê¸°ì—´, ì‚¬ê°€, íšŒë¡œ ì°¨ë‹¨ê¸° ë° íŠ¸ëœì­ì…˜ ì•„ì›ƒë°•ìŠ¤ì™€ ê°™ì€ ë¶„ì‚° ì‹œìŠ¤í…œ íŒ¨í„´ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ì§€ ì•Šê±°ë‚˜ ë¶ˆí•„ìš”í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤. ì´ê²ƒì€ ë” ë†’ì€ ì¶”ìƒí™” ìˆ˜ì¤€ì—ì„œ í”„ë¡œê·¸ë˜ë°í•˜ëŠ” ê²ƒìœ¼ë¡œ, ì„œë²„ ì¶©ëŒì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œì™€ ê°™ì€ ì¼ì‹œì ì¸ ì‹¤íŒ¨ì— ëŒ€í•´ ê±±ì •í•  í•„ìš”ê°€ ì—†ëŠ” ê³³ì…ë‹ˆë‹¤. ì´ê²ƒì€ ë‹¤ìŒê³¼ ê°™ì€ ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ì—½ë‹ˆë‹¤:\n\n- ë¡œì»¬ ë³€ìˆ˜ì— ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ê²ƒì´ ë°ì´í„°ë² ì´ìŠ¤ë³´ë‹¤ ë‚«ìŠµë‹ˆë‹¤. ë¡œì»¬ ë³€ìˆ˜ëŠ” ìë™ìœ¼ë¡œ ì €ì¥ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n- í•œ ë‹¬ ë™ì•ˆ ì ìëŠ” ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¬ì—ë„ ì ìë˜ í”„ë¡œì„¸ìŠ¤ê°€ ì—¬ì „íˆ ì¡´ì¬í•  í•„ìš”ê°€ ì—†ê³ , ë¦¬ì†ŒìŠ¤ê°€ ì§€ì†ë˜ëŠ” ë™ì•ˆ ì‚¬ìš©ë˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.\n- ì˜ì›íˆ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜, ê·¸ë¦¬ê³  ì´ëŸ¬í•œ í•¨ìˆ˜ì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” (ëª…ë ¹ì„ ë³´ë‚´ê±°ë‚˜ ë°ì´í„°ë¥¼ ì¿¼ë¦¬í•˜ëŠ”) ê¸°ëŠ¥ë“¤.\n\në‚´êµ¬ì„± ìˆëŠ” ì‹¤í–‰ ì‹œìŠ¤í…œì˜ ëª‡ ê°€ì§€ ì˜ˆëŠ” Azure ë‚´êµ¬ì„± í•¨ìˆ˜, Amazon SWF, Uber Cadence, Infinitic, ê·¸ë¦¬ê³  Temporal(ë‚´ê°€ ì¼í•˜ëŠ” ê³³)ì…ë‹ˆë‹¤. ì™„ë²½íˆ ê°ê´€ì ì´ì§€ ëª»í•  ë¦¬ìŠ¤í¬ë¥¼ ê°ìˆ˜í•˜ë”ë¼ë„, ë‚˜ëŠ” Temporalì´ ì´ëŸ¬í•œ ì˜µì…˜ ì¤‘ì—ì„œ ìµœê³ ë¼ê³  ìƒê°í•©ë‹ˆë‹¤ ğŸ˜Š.\n\n# ë‚´êµ¬ì„± ìˆëŠ” JavaScript\n\n<div class=\"content-ad\"></div>\n\nì´ì œ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œì˜ ì¼ê´€ì„±ê³¼ ë‚´êµ¬ ì‹¤í–‰ì´ ë¬´ì—‡ì¸ì§€ ì‚´í´ë³´ì•˜ìœ¼ë‹ˆ, ì‹¤ì œ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ë‚´ê°€ ë§Œë“  ì´ ìŒì‹ ì£¼ë¬¸ ì•±ì€ ë‚´êµ¬ì„± ìˆëŠ” ì½”ë“œê°€ ì–´ë–»ê²Œ ìƒê²¼ê³  ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ”ì§€ ë³´ì—¬ì¤ë‹ˆë‹¤:\n\ntemporal.menu\n\n![Building Reliable Distributed Systems in Node](/assets/img/2024-05-17-BuildingReliableDistributedSystemsinNode_0.png)\n\nì´ ì•±ì€ ë„¤ ê°€ì§€ ì£¼ìš” ê¸°ëŠ¥ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤:\n\n<div class=\"content-ad\"></div>\n\n- ì£¼ë¬¸ ìƒì„± ë° ê³ ê°ì—ê²Œ ì²­êµ¬\n- ì£¼ë¬¸ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°\n- ì£¼ë¬¸ ìˆ˜ë ¹ ì²˜ë¦¬\n- ì£¼ë¬¸ ë°°ë‹¬ ì²˜ë¦¬\n\n![ì´ë¯¸ì§€](https://miro.medium.com/v2/resize:fit:1400/1*5Ivi74IEaDxDo182J91nSA.gif)\n\në©”ë‰´ì—ì„œ í’ˆëª©ì„ ì£¼ë¬¸í•˜ë©´ ë°°ì†¡ ê¸°ì‚¬ ì‚¬ì´íŠ¸(drive.temporal.menu)ì— ë‚˜íƒ€ë‚˜ë©°, ìš´ì „ìëŠ” ì£¼ë¬¸ì„ ìˆ˜ë ¹ ì²˜ë¦¬í•˜ê³  ë°°ë‹¬ëœ ê²ƒìœ¼ë¡œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nëª¨ë“  ì´ ê¸°ëŠ¥ì€ ë‚´êµ¬ì„±ì´ ìˆëŠ” JavaScript ë˜ëŠ” TypeScriptì˜ ë‹¨ì¼ ê¸°ëŠ¥ì—ì„œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €í¬ëŠ” TypeScriptë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤ - TypeScriptë¥¼ ê¶Œì¥í•˜ë©° ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì´ë¦„ì€ TypeScript SDKì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ npmì—ëŠ” JavaScript í˜•ì‹ìœ¼ë¡œ ê²Œì‹œë˜ì–´ ìˆìœ¼ë©° ëª¨ë“  Node.js í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<div class=\"content-ad\"></div>\n\n# ì£¼ë¬¸ ìƒì„±í•˜ê¸°\n\nì´ ì•±ì˜ ì½”ë“œë¥¼ ì‚´í´ë´…ì‹œë‹¤. ëª‡ ê°€ì§€ API ê²½ë¡œë¥¼ ì‚´í´ë³´ê² ì§€ë§Œ ëŒ€ë¶€ë¶„ì€ orderë¼ëŠ” ë‹¨ì¼ ë‚´êµ¬ì„± í•¨ìˆ˜ì˜ ê° ë¶€ë¶„ì„ ê²€í† í•  ê²ë‹ˆë‹¤. ì•±ì„ ì‹¤í–‰í•˜ê±°ë‚˜ ì½”ë“œë¥¼ ë³´ë ¤ë©´ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì„¤ì •í•˜ë ¤ë©´ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:\n\n```js\nnpx @temporalio/create@latest --sample food-delivery\n```\n\nì‚¬ìš©ìê°€ ì£¼ë¬¸ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ React í”„ë¡ íŠ¸ì—”ë“œê°€ tRPC ë°±ì—”ë“œì—ì„œ ì •ì˜ëœ createOrder ë®¤í…Œì´ì…˜ì„ í˜¸ì¶œí•©ë‹ˆë‹¤. createOrder API ê²½ë¡œ í•¸ë“¤ëŸ¬ëŠ” ë‚´êµ¬ì„± ì£¼ë¬¸ í•¨ìˆ˜ë¥¼ ì‹œì‘í•˜ì—¬ ì£¼ë¬¸ì„ ìƒì„±í•©ë‹ˆë‹¤. ë‚´êµ¬ì„± í•¨ìˆ˜ì¸ Workflowsì€ @temporalio/clientì˜ Client ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œì‘ëœë‹¤. ì´ëŠ” tRPC ì»¨í…ìŠ¤íŠ¸ì— ctx.temporalë¡œ ì¶”ê°€ë˜ì—ˆìœ¼ë©°, ê²½ë¡œ í•¸ë“¤ëŸ¬ëŠ” ìœ íš¨ì„±ì´ ê²€ì¦ëœ ì…ë ¥(ì œí’ˆ ID ë²ˆí˜¸ ë° ì£¼ë¬¸ ID ë¬¸ìì—´ì„ í¬í•¨í•œ ê°ì²´)ì„ ë°›ì•„ë“¤ì´ë©°, ctx.temporal.workflow.startë¥¼ í˜¸ì¶œí•˜ì—¬ ì£¼ë¬¸ Workflowsì„ ì‹œì‘í•©ë‹ˆë‹¤. ì…ë ¥.productIdë¥¼ ì¸ìˆ˜ë¡œ ì œê³µí•©ë‹ˆë‹¤:\n\n<div class=\"content-ad\"></div>\n\n```typescript\napps/menu/pages/api/[trpc].ts\n\nimport { initTRPC } from '@trpc/server'\nimport { z } from 'zod'\nimport { taskQueue } from 'common'\nimport { Context } from 'common/trpc-context'\nimport { order } from 'workflows'\n\nconst t = initTRPC.context<Context>().create()\n\nexport const appRouter = t.router({\n  createOrder: t.procedure\n    .input(z.object({ productId: z.number(), orderId: z.string() }))\n    .mutation(async ({ input, ctx }) => {\n      await ctx.temporal.workflow.start(order, {\n        workflowId: input.orderId,\n        args: [input.productId],\n        taskQueue,\n      })\n      return 'Order received and persisted!'\n    }),\n```\n\nThe order function starts out validating the input, setting up the initial state, and charging the customer:\n\npackages/workflows/order.ts\n\n\n<div class=\"content-ad\"></div>\n\n```js\ntype OrderState = 'Charging card' | 'Paid' | 'Picked up' | 'Delivered' | 'Refunding'\n\nexport async function order(productId: number): Promise<void> {\n  const product = getProductById(productId)\n  if (!product) {\n    throw ApplicationFailure.create({ message: `Product ${productId} not found` })\n  }\n  let state: OrderState = 'Charging card'\n  let deliveredAt: Date\n  try {\n    await chargeCustomer(product)\n  } catch (err) {\n    const message = `Failed to charge customer for ${product.name}. Error: ${errorMessage(err)}`\n    await sendPushNotification(message)\n    throw ApplicationFailure.create({ message })\n  }\n  state = 'Paid'\n```\n\nì–´ë–¤ ê¸°ëŠ¥ì´ ì‹¤íŒ¨í•  ìˆ˜ìˆëŠ” í•¨ìˆ˜ëŠ” ìë™ìœ¼ë¡œ ì¬ì‹œë„ë©ë‹ˆë‹¤. ì´ ê²½ìš° chargeCustomer ë° sendPushNotificationì€ ë‘ ì„œë¹„ìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ë©°, í˜„ì¬ ê°€ë™ ì¤‘ì´ê±°ë‚˜ \"ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ\"ê³¼ ê°™ì€ ì¼ì‹œì  ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Temporalì€ ì´ëŸ¬í•œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìë™ìœ¼ë¡œ ì¬ì‹œë„í•©ë‹ˆë‹¤ (ê¸°ë³¸ì ìœ¼ë¡œ ì œê³± ë°±ì˜¤í”„ ë°©ì‹ìœ¼ë¡œ ë¬´ì œí•œìœ¼ë¡œ, ê·¸ëŸ¬ë‚˜ ì´ê²ƒì€ êµ¬ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤). í•¨ìˆ˜ëŠ” \"ì¹´ë“œ ê±°ì ˆ\"ê³¼ ê°™ì€ ì¬ì‹œë„í•  ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ë„ throwí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ì¬ì‹œë„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹ , ì—ëŸ¬ê°€ chargeCustomer(product)ì—ì„œ throwë˜ê³  catch ë¸”ë¡ì—ì„œ ìºì¹˜ë©ë‹ˆë‹¤. ê³ ê°ì€ ê²°ì œ ë°©ë²•ì´ ì‹¤íŒ¨í–ˆë‹¤ëŠ” ì•Œë¦¼ì„ ë°›ìœ¼ë©°, ìš°ë¦¬ëŠ” ì£¼ë¬¸ Workflowë¥¼ ì‹¤íŒ¨ì‹œí‚¤ê¸° ìœ„í•´ ApplicationFailureë¥¼ throwí•©ë‹ˆë‹¤.\n\n# ì£¼ë¬¸ ìƒíƒœ í™•ì¸\n\në‹¤ìŒ ì½”ë“œ ë¶€ë¶„ì€ ì•½ê°„ì˜ ë°±ê·¸ë¼ìš´ë“œ ì§€ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤. ì¼ë°˜ í•¨ìˆ˜ëŠ” ì˜¤ë˜ ì‹¤í–‰í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ì¼ì´ ë°œìƒí•  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” ë™ì•ˆ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¨ì§€í•˜ê³ , ì–¸ì  ê°€ëŠ” ìƒˆ ì½”ë“œë¥¼ ë°°í¬í•˜ê³  ì´ì „ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ë©´ ì¢…ë£Œë  ê²ƒì…ë‹ˆë‹¤. ë‚´êµ¬ì„± í•¨ìˆ˜ëŠ” ë‘ ê°€ì§€ ì´ìœ ë¡œ ì„ì˜ì˜ ê¸¸ì´ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n<div class=\"content-ad\"></div>\n\n- ì–´ë–¤ ê²ƒì„ ê¸°ë‹¤ë¦¬ê³  ìˆì„ ë•Œì—ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì°¨ì§€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n- ê·¸ë“¤ì„ ì‹¤í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ì–´ë„ ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ì„ ê³„ì†í•  ê²ƒì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\në”°ë¼ì„œ ì¼ë¶€ ì˜êµ¬ í•¨ìˆ˜ëŠ” ëˆì„ ì´ì²´í•˜ëŠ” í•¨ìˆ˜ì²˜ëŸ¼ ì§§ì€ ì‹œê°„ ìš´ì˜ë˜ì§€ë§Œ, ì–´ë–¤ ê²ƒì€ ì£¼ë¬¸ì´ ì™„ë£Œë  ë•Œ ëë‚˜ëŠ” ì£¼ë¬¸ í•¨ìˆ˜ì™€ ê³ ê°ì˜ í‰ìƒì„ ì§€ì†í•˜ëŠ” ê³ ê° í•¨ìˆ˜ì™€ ê°™ì´ ê¸¸ê²Œ ìš´ì˜ë©ë‹ˆë‹¤.\n\nê¸´ ì‹œê°„ ë™ì•ˆ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ì™€ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ìœ ìš©í•©ë‹ˆë‹¤. Temporalì€ í•¨ìˆ˜ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ì‹ í˜¸(Signals)ì™€ í•¨ìˆ˜ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬(Queries)ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë“œë¼ì´ë²„ ì‚¬ì´íŠ¸ëŠ” ì´ API ê²½ë¡œë¥¼ í†µí•´ ì£¼ë¬¸ í•¨ìˆ˜ì— ì¿¼ë¦¬ë¥¼ ë³´ë‚´ì–´ ê° ì£¼ë¬¸ì˜ ìƒíƒœë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤:\n\napps/menu/pages/api/[trpc].ts\n\n<div class=\"content-ad\"></div>\n\n```js\ngetOrderStatus: t.procedure\n  .input(z.string())\n  .query(({ input: orderId, ctx }) => ctx.temporal.workflow.getHandle(orderId).query(getStatusQuery)),\n```\n\níŠ¹ì • ì£¼ë¬¸ í•¨ìˆ˜(Workflow Executionì´ë¼ê³ ë„ í•¨)ì˜ í•¸ë“¤ì„ ê°€ì ¸ì™€ getStatusQueryë¥¼ ë³´ë‚´ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. getStatusQueryëŠ” ì£¼ë¬¸ íŒŒì¼ì— ì •ì˜ë˜ì–´ ìˆìœ¼ë©° ì£¼ë¬¸ í•¨ìˆ˜ì—ì„œ ì²˜ë¦¬ë©ë‹ˆë‹¤:\n\npackages/workflows/order.ts\n\n```js\nimport { defineQuery, setHandler } from '@temporalio/workflow'\n\nexport const getStatusQuery = defineQuery<OrderStatus>('getStatus')\n\nexport async function order(productId: number): Promise<void> {\n  let state: OrderState = 'Charging card'\n  let deliveredAt: Date\n  //â€¦\n  setHandler(getStatusQuery, () => {\n    return { state, deliveredAt, productId }\n  })\n```\n\n<div class=\"content-ad\"></div>\n\ngetStatusQueryë¥¼ ì „ë‹¬í•˜ëŠ” order í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´, setHandlerì— ì „ë‹¬ëœ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì–´ ë¡œì»¬ ë³€ìˆ˜ì˜ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤. chargeCustomer í˜¸ì¶œì´ ì„±ê³µí•˜ë©´ ìƒíƒœê°€ 'ì§€ë¶ˆ ì™„ë£Œ'ë¡œ ë³€ê²½ë˜ê³ , getStatusQueryë¥¼ ê³„ì† í´ë§í•˜ë˜ ë“œë¼ì´ë²„ ì‚¬ì´íŠ¸ê°€ ì—…ë°ì´íŠ¸ëœ ìƒíƒœë¥¼ ë°›ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  'Pick up' ë²„íŠ¼ì„ í‘œì‹œí•©ë‹ˆë‹¤.\n\n# ì£¼ë¬¸ í”½ì—…í•˜ê¸°\n\në“œë¼ì´ë²„ê°€ ì£¼ë¬¸ì„ í”½ì—…ìœ¼ë¡œ í‘œì‹œí•˜ê¸° ìœ„í•´ ë²„íŠ¼ì„ íƒ­í•˜ë©´, ì‚¬ì´íŠ¸ëŠ” API ì„œë²„ì— pickUp ë³€ê²½ì„ ë³´ë‚´ê³ , ì´ëŠ” order í•¨ìˆ˜ì— pickedUpSignalì„ ë³´ëƒ…ë‹ˆë‹¤:\n\napps/driver/pages/api/[trpc].ts\n\n<div class=\"content-ad\"></div>\n\n```js\npickUp: t.procedure\n  .input(z.string())\n  .mutation(async ({ input: orderId, ctx }) => \n    ctx.temporal.workflow.getHandle(orderId).signal(pickedUpSignal)\n  ),\n```\n\nì‹ ì²­ í•¨ìˆ˜ëŠ” ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬ ì‹œê·¸ë„ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤:\n\npackages/workflows/order.ts\n\n```js\nexport const pickedUpSignal = defineSignal('pickedUp')\n\nexport async function order(productId: number): Promise<void> {\n  // â€¦\n  setHandler(pickedUpSignal, () => {\n    if (state === 'Paid') {\n      state = 'Picked up'\n    }\n  })\n```  \n\n<div class=\"content-ad\"></div>\n\ní•¨ìˆ˜ì˜ í•˜ë‹¨ì—ì„œëŠ” ê³ ê°ì— ì²­êµ¬ëœ í›„ì— í”½ì—…ì´ ë°œìƒí•  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì™”ë‹¤:\n\npackages/workflows/order.ts\n\n```js\nimport { condition } from '@temporalio/workflow'\n\nexport async function order(productId: number): Promise<void> {\n  // ...\n  try {\n    await chargeCustomer(product)\n  } catch (err) {\n    // ...\n  }\n  state = 'Paid'\n  const notPickedUpInTime = !(await condition(() => state === 'Picked up', '1 min'))\n  if (notPickedUpInTime) {\n    state = 'Refunding'\n    await refundAndNotify(\n      product,\n      'âš ï¸ No drivers were available to pick up your order. Your payment has been refunded.'\n    )\n    throw ApplicationFailure.create({ message: 'Not picked up in time' })\n  }\n```\n\n`await condition(() => state === 'Picked up', '1 min')` í•¨ìˆ˜ëŠ” ìƒíƒœ ë³€í™”ë¥¼ 'Picked up'ìœ¼ë¡œ ë³€ê²½í•  ë•Œê¹Œì§€ 1ë¶„ ë™ì•ˆ ëŒ€ê¸°í•©ë‹ˆë‹¤. 1ë¶„ì´ ì§€ë‚˜ë„ ìƒíƒœê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ falseë¥¼ ë°˜í™˜í•˜ê³  ê³ ê°ì—ê²Œ í™˜ë¶ˆì„ í•©ë‹ˆë‹¤. (ìš°ë¦¬ëŠ” ìš”ë¦¬ì‚¬ì™€ ë°°ì†¡ ê¸°ì‚¬ì˜ ì†ë„ì— ì—„ê²©í•œ ê¸°ì¤€ì„ ê°€ì§€ê³  ìˆê±°ë‚˜, ë°ëª¨ ì•±ì˜ ì‚¬ìš©ìê°€ ëª¨ë“  ì‹¤íŒ¨ ëª¨ë“œë¥¼ ë³¼ ìˆ˜ ìˆê¸°ë¥¼ ì›í•˜ëŠ” ê²ƒ ê°™ì•„ìš” ğŸ˜„.)\n\n<div class=\"content-ad\"></div>\n\n# ë°°ì†¡\n\në§ˆì°¬ê°€ì§€ë¡œ \"ë°°ì†¡\" ë²„íŠ¼ìœ¼ë¡œ ì „ì†¡ëœ deliveredSignalì´ ìˆìŠµë‹ˆë‹¤. í”½ì—… í›„ 1ë¶„ ì´ë‚´ì— ìš´ì „ìê°€ ë°°ì†¡ì„ ì™„ë£Œí•˜ì§€ ì•Šìœ¼ë©´ ê³ ê°ì—ê²Œ í™˜ë¶ˆì´ ì´ë¤„ì§‘ë‹ˆë‹¤.\n\npackages/workflows/order.ts\n\n```js\nexport const deliveredSignal = defineSignal('delivered')\n\nexport async function order(productId: number): Promise<void> {\n  setHandler(deliveredSignal, () => {\n    if (state === 'Picked up') {\n      state = 'Delivered'\n      deliveredAt = new Date()\n    }\n  })\n  // â€¦\n  await sendPushNotification('ğŸš— ì£¼ë¬¸ í”½ì—…ë¨')\n  const notDeliveredInTime = !(await condition(() => state === 'Delivered', '1 min'))\n  if (notDeliveredInTime) {\n    state = 'Refunding'\n    await refundAndNotify(product, 'âš ï¸ ìš´ì „ìê°€ ì£¼ë¬¸ì„ ë°°ë‹¬í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ê²°ì œê°€ í™˜ë¶ˆë˜ì—ˆìŠµë‹ˆë‹¤.')\n    throw ApplicationFailure.create({ message: 'ì œì‹œê°„ ë°°ì†¡ë˜ì§€ ì•ŠìŒ' })\n  }\n  await sendPushNotification('âœ… ì£¼ë¬¸ì´ ë°°ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤!')\n```\n\n<div class=\"content-ad\"></div>\n\në°°ì†¡ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ ê³ ê°ì´ ì‹ì‚¬ë¥¼ í•˜ëŠ” ë° í•œ ë¶„ì„ ê¸°ë‹¤ë¦¬ê³ , ê·¸ë“¤ì—ê²Œ ê²½í—˜ì„ í‰ê°€í•˜ë„ë¡ ìš”ì²­í•©ë‹ˆë‹¤.\n\n```js\n  await sleep('1 min') // ì´ê²ƒì€ ëª‡ ì‹œê°„ ë˜ëŠ” ì‹¬ì§€ì–´ ëª‡ ë‹¬ì´ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤\n  await sendPushNotification(`âœï¸ ì‹ì‚¬ë¥¼ í‰ê°€í•´ì£¼ì„¸ìš”. ${product.name.toLowerCase()}ëŠ” ì–´ë– ì…¨ë‚˜ìš”?`)\n}\n```\n\nìµœì¢… í‘¸ì‹œ ì•Œë¦¼ ì´í›„, ì£¼ë¬¸ í•¨ìˆ˜ ì‹¤í–‰ì´ ì¢…ë£Œë˜ê³  Workflow Executionì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë©ë‹ˆë‹¤. í•¨ìˆ˜ê°€ ì™„ë£Œë˜ì—ˆë”ë¼ë„ Temporalì´ í•¨ìˆ˜ì˜ ìµœì¢… ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì—¬ì „íˆ ì¿¼ë¦¬ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ë¬¸ì´ ë°°ë‹¬ëœ í›„ 1ë¶„ ë’¤ í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹˜ë©´ ì—¬ì „íˆ getStatusQueryê°€ ì‘ë™í•˜ê³  \"ë°°ì†¡ë¨\"ì´ ìƒíƒœë¡œ í‘œì‹œë©ë‹ˆë‹¤:\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-17-BuildingReliableDistributedSystemsinNode_1.png)\n\n\n<div class=\"content-ad\"></div>\n\n# ìš”ì•½\n\në‹¨ì¼ ë‚´êµ¬ì„± í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ë‹¨ê³„ ì£¼ë¬¸ íë¦„ì„ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë„¤íŠ¸ì›Œí¬, ë°ì´í„° ì €ì¥ì†Œ ë˜ëŠ” í•˜ìœ„ ì„œë¹„ìŠ¤ì™€ ê´€ë ¨ëœ ì¼ì‹œì  ë¬¸ì œë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•  ê²½ìš°ì—ë„ ì™„ë£Œê°€ ë³´ì¥ë©ë‹ˆë‹¤:\n\n- ë„¤íŠ¸ì›Œí¬, ë°ì´í„° ì €ì¥ì†Œ ë˜ëŠ” í•˜ìœ„ ì„œë¹„ìŠ¤ì™€ ê´€ë ¨ëœ ì¼ì‹œì  ë¬¸ì œ\n- í•¨ìˆ˜ ì‹¤í–‰ ì¤‘ ë¬¸ì œ ë°œìƒ\n- ê¸°ë°˜ì´ ë˜ëŠ” Temporal ì„œë¹„ìŠ¤ ë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë‹¤ìš´\n\nì´ë¥¼ í†µí•´ ë¶„ì‚° ì‹œìŠ¤í…œì— ëŒ€í•œ ì—¬ëŸ¬ ë¬¸ì œì ì„ í•´ê²°í•  ìˆ˜ ìˆì—ˆìœ¼ë©°:\n\n<div class=\"content-ad\"></div>\n\n- ë¡œì»¬ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ëŒ€ì‹ ì— í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ì£¼ë¬¸ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë ¤ ì£¼ë¬¸ì„ ì·¨ì†Œí•˜ê±°ë‚˜ chargeCustomerì™€ ê°™ì€ ì¼ì‹œì  í•¨ìˆ˜ë¥¼ ì¬ì‹œë„í•˜ê³  ì‹œê°„ ì´ˆê³¼í•˜ëŠ” ë‚´ì¥ ê¸°ëŠ¥ì„ ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ì— íƒ€ì´ë¨¸ë¥¼ ì„¤ì •í•  í•„ìš”ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.\n- ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ê¸° ìœ„í•´ ì›Œì»¤ê°€ ì¡°ì‚¬í•˜ëŠ” ì‘ì—… ëŒ€ê¸°ì—´ì„ ì„¤ì •í•  í•„ìš”ê°€ ì—†ì—ˆìœ¼ë©°, ì‹¤íŒ¨í•œ í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ ì¤‘ë‹¨ëœ ë¯¸ì™„ë£Œ ì‘ì—…ì„ ì§„í–‰í•˜ê±°ë‚˜ ì„ íƒí•˜ê¸° ìœ„í•´ì„œë„ í•„ìš”í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\n\në‹¤ìŒ ê¸€ì—ì„œëŠ” ë°°ì†¡ ì•±ì˜ ì½”ë“œë¥¼ ë” ì‚´í´ë³´ê³  Temporalì´ ìš°ë¦¬ì—ê²Œ ë‚´êµ¬ì„± ì‹¤í–‰ì„ ì œê³µí•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê¸€ì´ ì˜¬ë¼ì˜¤ë©´ ì•Œë¦¼ì„ ë°›ìœ¼ë ¤ë©´ Twitter ë˜ëŠ” LinkedInì—ì„œ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”.\n\nì§ˆë¬¸ì´ ìˆìœ¼ë©´ ì–¸ì œë“ ì§€ ë„ì™€ë“œë¦´ê²Œìš”! Temporalì˜ ë¯¸ì…˜ì´ ê°œë°œìë¥¼ ë•ëŠ” ë°ì— ìˆê³ , ê°œì¸ì ìœ¼ë¡œ ê·¸ê²ƒì—ì„œ ê¸°ì¨ì„ ëŠë‚ë‹ˆë‹¤ ğŸ¤—. íŠ¸ìœ„í„°ì—ì„œëŠ” @lorendsrë¡œ, temporal-typescript íƒœê·¸ê°€ ë‹¬ë¦° StackOverflow ì§ˆë¬¸ì—ëŠ” ë‹µë³€(ê·¸ë¦¬ê³  ì¢‹ì•„ìš” ğŸ˜„)ì„ ë‹¬ë©°, ì»¤ë®¤ë‹ˆí‹° Slackì—ëŠ” @Lorenìœ¼ë¡œ í™œë™í•˜ê³  ìˆìŠµë‹ˆë‹¤ ğŸ’ƒ.\n\n# ë” ë°°ìš°ê¸°\n\n<div class=\"content-ad\"></div>\n\në” ì•Œì•„ë³´ë ¤ë©´ ë‹¤ìŒ ìë£Œë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤:\n\n- ì˜ìƒ: Temporal ì†Œê°œ ë° TypeScript SDK ì‚¬ìš©í•˜ê¸°\n- ëª‡ ê°€ì§€ ì¼ë°˜ì ì¸ ì‚¬ìš© ì‚¬ë¡€\n- TypeScript SDK ë¬¸ì„œ: t.mp/ts\n- TypeScript API ì°¸ì¡°: t.mp/ts-api\n- TypeScript íŠœí† ë¦¬ì–¼\n\në” ë§ì€ TypeScript SDKì— ê´€í•œ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸:\n\n- Node.js ì‘ì—… íë¡œì„œ Temporal ì‚¬ìš©í•˜ê¸°\n- ì¥ê¸° ì›Œí¬í”Œë¡œë¥¼ í†µí•´ API ìš”ì²­ ìºì‹±í•˜ê¸°\n- ì›Œí¬í”Œë¡œì— ëŒ€í•œ REST APIë¥¼ ìƒì„±í•˜ëŠ” Express ë¯¸ë“¤ì›¨ì–´\n- TS SDK 1.0.0 ë¦´ë¦¬ìŠ¤\n- Workflow ê²°ì •ë¡ ì„ ê°•ì œí•˜ê¸° ìœ„í•´ V8 ë…ë¦½ì²´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•\n\n<div class=\"content-ad\"></div>\n\nğŸ’¬ í•˜ì»¤ ë‰´ìŠ¤, ë ˆë”§, íŠ¸ìœ„í„°, ë˜ëŠ” ë§í¬ë“œì¸ì—ì„œ í† ë¡ í•´ë³´ì„¸ìš”. \n\nì´ ê²Œì‹œë¬¼ ì´ˆì•ˆì„ ì½ì–´ì¤€ ì œì‹œì¹´ ì›¨ìŠ¤íŠ¸, ë¸Œë¼ì´ì–¸ í˜¸ê±´, ì• ë°€ë¦¬ì•„ ë§ê³ , ê·¸ë¦¬ê³  ì§ ì›Œì»¤ì—ê²Œ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.","ogImage":{"url":"/assets/img/2024-05-17-BuildingReliableDistributedSystemsinNode_0.png"},"coverImage":"/assets/img/2024-05-17-BuildingReliableDistributedSystemsinNode_0.png","tag":["Tech"],"readingTime":12},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h1: \"h1\",\n    ul: \"ul\",\n    li: \"li\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    img: \"img\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"ì´ ê²Œì‹œë¬¼ì€ Stripe, Netflix, Coinbase, Snap ë° ê¸°íƒ€ ë§ì€ íšŒì‚¬ë“¤ì´ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œ ë‹¤ì–‘í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” durable execution ê°œë…ì„ ì†Œê°œí•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  Temporalì˜ TypeScript/JavaScript SDKë¥¼ ì‚¬ìš©í•˜ì—¬ durable ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì–¼ë§ˆë‚˜ ê°„ë‹¨í•œì§€ ë³´ì—¬ì¤ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ë¶„ì‚° ì‹œìŠ¤í…œ\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"íŠ¸ëœì­ì…˜ì„ ì§€ì›í•˜ëŠ” ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë’·ë°›ì¹¨ëœ ìš”ì²­-ì‘ë‹µ ë‹¨ì¼ì²´ë¥¼ êµ¬ì¶•í•  ë•Œ, ìš°ë¦¬ëŠ” ë¶„ì‚° ì‹œìŠ¤í…œì— ëŒ€í•œ ë§ì€ ê³ ë ¤ ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤. ë‹¨ìˆœí•œ ì‹¤íŒ¨ ëª¨ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©° ì‰½ê²Œ ì •í™•í•œ ìƒíƒœë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ë„ë‹¬í•  ìˆ˜ ì—†ëŠ” ê²½ìš° í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ë„ë‹¬í•˜ì§€ë§Œ ì„œë²„ê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ë„ë‹¬í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš° ì„œë²„ëŠ” ì˜¤ë¥˜ë¡œ ì‘ë‹µí•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ì„œë²„ê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ë„ë‹¬í•˜ì§€ë§Œ íŠ¸ëœì­ì…˜ì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš° ì„œë²„ëŠ” ì˜¤ë¥˜ë¡œ ì‘ë‹µí•˜ê³  í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"íŠ¸ëœì­ì…˜ì´ ì„±ê³µí•˜ì§€ë§Œ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µí•˜ê¸° ì „ì— ì¢…ë£Œëœ ê²½ìš° í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ê°€ ë‹¤ì‹œ ì¼œì§ˆ ë•Œê¹Œì§€ ë‹¤ì‹œ ì‹œë„í•˜ê³ , íŠ¸ëœì­ì…˜ì€ ë‘ ë²ˆì§¸ë¡œ ì‹¤íŒ¨í•©ë‹ˆë‹¤(íŠ¸ëœì­ì…˜ì´ ì´ë¯¸ ì ìš©ë˜ì—ˆëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” idempotency tokenê³¼ ê°™ì€ í™•ì¸ì´ ìˆìŒì„ ê°€ì •), ê·¸ë¦¬ê³  ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ì—…ì´ ì´ë¯¸ ìˆ˜í–‰ë˜ì—ˆìŒì„ ë³´ê³ í•©ë‹ˆë‹¤.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"í•œ ë²ˆì— ë‘ ë²ˆì§¸ ìœ„ì¹˜ë¥¼ ì¶”ê°€í•˜ë©´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ë‚˜ ì™¸ë¶€ APIì™€ ê°™ì€ ì¼ì€ ì¥ì• ë¥¼ ì²˜ë¦¬í•˜ê³  ì¼ê´€ì„±ì„ ìœ ì§€í•˜ëŠ” ê²ƒ(ëª¨ë“  ë°ì´í„° ì €ì¥ì†Œ ê°„ì˜ ì •í™•ì„±)ì´ í›¨ì”¬ ë” ë³µì¡í•´ì§‘ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì„œë²„ê°€ ì‹ ìš© ì¹´ë“œë¥¼ ì²­êµ¬í•˜ê³  ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•˜ëŠ” ê²½ìš°ì²˜ëŸ¼, ë‹¨ìˆœí•œ ì½”ë“œë¥¼ ë” ì´ìƒ ì‘ì„±í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"handleRequest\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n  paymentAPI.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"chargeCard\"\n        }), \"()\\n  database.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"insertOrder\"\n        }), \"()\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"200\"\n        }), \"\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì¹´ë“œ ì²­êµ¬(ì²« ë²ˆì§¸ ë‹¨ê³„)ëŠ” ì„±ê³µí–ˆì§€ë§Œ ë°ì´í„°ë² ì´ìŠ¤ì— ì£¼ë¬¸ ì¶”ê°€(ë‘ ë²ˆì§¸ ë‹¨ê³„)ê°€ ì‹¤íŒ¨í•  ê²½ìš° ì‹œìŠ¤í…œì€ ì¼ê´€ì„± ì—†ëŠ” ìƒíƒœì— ë†“ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ë‘ ë²ˆì§¸ ë‹¨ê³„ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ë„ë‹¬í•  ë•Œê¹Œì§€ ë‹¤ì‹œ ì‹œë„í•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤íŒ¨í•  ìˆ˜ë„ ìˆìœ¼ë©°, ì´ ê²½ìš° ìš°ë¦¬ëŠ” ì²« ë²ˆì§¸ ë‹¨ê³„ê°€ ë°œìƒí•œ ì‚¬ì‹¤ì„ ì „í˜€ ì•Œ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤. ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ì„¸ ê°€ì§€ë¥¼ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ì£¼ë¬¸ ì„¸ë¶€ ì •ë³´ë¥¼ ìœ ì§€\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ì™„ë£Œí•œ í”„ë¡œê·¸ë¨ ë‹¨ê³„ë¥¼ ìœ ì§€\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë¯¸ì™„ë£Œ ì£¼ë¬¸ì„ í™•ì¸í•˜ê³  ë‹¤ìŒ ë‹¨ê³„ë¡œ ê³„ì† ì§„í–‰í•˜ëŠ” ì›Œì»¤ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ê·¸, ê·¸ë¦¬ê³  ì¬ì‹œë„ ìƒíƒœë¥¼ ìœ ì§€í•˜ê³  ê° ë‹¨ê³„ì— ì‹œê°„ ì œí•œì„ ì¶”ê°€í•˜ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë§ì€ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•˜ê³ , íŠ¹ì • ê°€ì¥ìë¦¬ ê²½ìš°ë‚˜ ì‹¤íŒ¨ ëª¨ë“œë¥¼ ë†“ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ ì „ì²´ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ë¥¼ ë³´ë ¤ë©´ í´ë¦­í•˜ì„¸ìš”. ìš°ë¦¬ê°€ ëª¨ë“  ê·¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  ë””ë²„ê·¸í•  í•„ìš” ì—†ì´ ì¢€ ë” ë¹ ë¥´ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤ì„ êµ¬ì¶•í•  ìˆ˜ ìˆì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤. ê·¸ê±¸ í•  í•„ìš” ì—†ë‹¤ëŠ” ê±´ ìš°ë¦¬ê°€ ë‚´êµ¬ì„± ì‹¤í–‰ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ë‚´êµ¬ì„± ì‹¤í–‰\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë‚´êµ¬ì„± ì‹¤í–‰ ì‹œìŠ¤í…œì€ ìš°ë¦¬ì˜ ì½”ë“œë¥¼ ê° ë‹¨ê³„ë¥¼ ì§€ì†ì‹œí‚¤ëŠ” ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë‚˜ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ì–´ë„ ì½”ë“œëŠ” í˜¸ì¶œ ìŠ¤íƒê³¼ ë¡œì»¬ ë³€ìˆ˜ë¥¼ í¬í•¨í•œ ëª¨ë“  ìƒíƒœë¥¼ ìœ ì§€í•œ ì±„ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ì„œ ìë™ìœ¼ë¡œ ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë‚´êµ¬ì„± ì‹¤í–‰ì€ í•˜ë“œì›¨ì–´ê°€ ì–¼ë§ˆë‚˜ ì‹ ë¢°í• ì§€ë‚˜ í•˜ë¥˜ ì„œë¹„ìŠ¤ê°€ ì–¼ë§ˆë‚˜ ì˜¤ë«ë™ì•ˆ ì˜¤í”„ë¼ì¸ì¸ì§€ì— ìƒê´€ì—†ì´ ì½”ë“œê°€ ì™„ë£Œë˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ì¬ì‹œë„ì™€ íƒ€ì„ì•„ì›ƒì€ ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ë©°, ì½”ë“œê°€ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šì„ ë•Œ(ì˜ˆë¥¼ ë“¤ì–´ sleep('1 month') ë¬¸ì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ) ìì›ì´ í•´ì œë©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë‚´êµ¬ì„± ìˆëŠ” ì‹¤í–‰ì€ ì´ë²¤íŠ¸ ì£¼ë„ ì•„í‚¤í…ì²˜, ì‘ì—… ëŒ€ê¸°ì—´, ì‚¬ê°€, íšŒë¡œ ì°¨ë‹¨ê¸° ë° íŠ¸ëœì­ì…˜ ì•„ì›ƒë°•ìŠ¤ì™€ ê°™ì€ ë¶„ì‚° ì‹œìŠ¤í…œ íŒ¨í„´ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ì§€ ì•Šê±°ë‚˜ ë¶ˆí•„ìš”í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤. ì´ê²ƒì€ ë” ë†’ì€ ì¶”ìƒí™” ìˆ˜ì¤€ì—ì„œ í”„ë¡œê·¸ë˜ë°í•˜ëŠ” ê²ƒìœ¼ë¡œ, ì„œë²„ ì¶©ëŒì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œì™€ ê°™ì€ ì¼ì‹œì ì¸ ì‹¤íŒ¨ì— ëŒ€í•´ ê±±ì •í•  í•„ìš”ê°€ ì—†ëŠ” ê³³ì…ë‹ˆë‹¤. ì´ê²ƒì€ ë‹¤ìŒê³¼ ê°™ì€ ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ì—½ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ë¡œì»¬ ë³€ìˆ˜ì— ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ê²ƒì´ ë°ì´í„°ë² ì´ìŠ¤ë³´ë‹¤ ë‚«ìŠµë‹ˆë‹¤. ë¡œì»¬ ë³€ìˆ˜ëŠ” ìë™ìœ¼ë¡œ ì €ì¥ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"í•œ ë‹¬ ë™ì•ˆ ì ìëŠ” ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ë‹¬ì—ë„ ì ìë˜ í”„ë¡œì„¸ìŠ¤ê°€ ì—¬ì „íˆ ì¡´ì¬í•  í•„ìš”ê°€ ì—†ê³ , ë¦¬ì†ŒìŠ¤ê°€ ì§€ì†ë˜ëŠ” ë™ì•ˆ ì‚¬ìš©ë˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ì˜ì›íˆ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜, ê·¸ë¦¬ê³  ì´ëŸ¬í•œ í•¨ìˆ˜ì™€ ìƒí˜¸ì‘ìš©í•  ìˆ˜ ìˆëŠ” (ëª…ë ¹ì„ ë³´ë‚´ê±°ë‚˜ ë°ì´í„°ë¥¼ ì¿¼ë¦¬í•˜ëŠ”) ê¸°ëŠ¥ë“¤.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë‚´êµ¬ì„± ìˆëŠ” ì‹¤í–‰ ì‹œìŠ¤í…œì˜ ëª‡ ê°€ì§€ ì˜ˆëŠ” Azure ë‚´êµ¬ì„± í•¨ìˆ˜, Amazon SWF, Uber Cadence, Infinitic, ê·¸ë¦¬ê³  Temporal(ë‚´ê°€ ì¼í•˜ëŠ” ê³³)ì…ë‹ˆë‹¤. ì™„ë²½íˆ ê°ê´€ì ì´ì§€ ëª»í•  ë¦¬ìŠ¤í¬ë¥¼ ê°ìˆ˜í•˜ë”ë¼ë„, ë‚˜ëŠ” Temporalì´ ì´ëŸ¬í•œ ì˜µì…˜ ì¤‘ì—ì„œ ìµœê³ ë¼ê³  ìƒê°í•©ë‹ˆë‹¤ ğŸ˜Š.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ë‚´êµ¬ì„± ìˆëŠ” JavaScript\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ì œ ë¶„ì‚° ì‹œìŠ¤í…œì—ì„œì˜ ì¼ê´€ì„±ê³¼ ë‚´êµ¬ ì‹¤í–‰ì´ ë¬´ì—‡ì¸ì§€ ì‚´í´ë³´ì•˜ìœ¼ë‹ˆ, ì‹¤ì œ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ë‚´ê°€ ë§Œë“  ì´ ìŒì‹ ì£¼ë¬¸ ì•±ì€ ë‚´êµ¬ì„± ìˆëŠ” ì½”ë“œê°€ ì–´ë–»ê²Œ ìƒê²¼ê³  ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ”ì§€ ë³´ì—¬ì¤ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"temporal.menu\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-17-BuildingReliableDistributedSystemsinNode_0.png\",\n        alt: \"Building Reliable Distributed Systems in Node\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ ì•±ì€ ë„¤ ê°€ì§€ ì£¼ìš” ê¸°ëŠ¥ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ì£¼ë¬¸ ìƒì„± ë° ê³ ê°ì—ê²Œ ì²­êµ¬\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ì£¼ë¬¸ ìƒíƒœ ê°€ì ¸ì˜¤ê¸°\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ì£¼ë¬¸ ìˆ˜ë ¹ ì²˜ë¦¬\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ì£¼ë¬¸ ë°°ë‹¬ ì²˜ë¦¬\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://miro.medium.com/v2/resize:fit:1400/1*5Ivi74IEaDxDo182J91nSA.gif\",\n        alt: \"ì´ë¯¸ì§€\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë©”ë‰´ì—ì„œ í’ˆëª©ì„ ì£¼ë¬¸í•˜ë©´ ë°°ì†¡ ê¸°ì‚¬ ì‚¬ì´íŠ¸(drive.temporal.menu)ì— ë‚˜íƒ€ë‚˜ë©°, ìš´ì „ìëŠ” ì£¼ë¬¸ì„ ìˆ˜ë ¹ ì²˜ë¦¬í•˜ê³  ë°°ë‹¬ëœ ê²ƒìœ¼ë¡œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ëª¨ë“  ì´ ê¸°ëŠ¥ì€ ë‚´êµ¬ì„±ì´ ìˆëŠ” JavaScript ë˜ëŠ” TypeScriptì˜ ë‹¨ì¼ ê¸°ëŠ¥ì—ì„œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì €í¬ëŠ” TypeScriptë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤ - TypeScriptë¥¼ ê¶Œì¥í•˜ë©° ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì´ë¦„ì€ TypeScript SDKì…ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ npmì—ëŠ” JavaScript í˜•ì‹ìœ¼ë¡œ ê²Œì‹œë˜ì–´ ìˆìœ¼ë©° ëª¨ë“  Node.js í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ì£¼ë¬¸ ìƒì„±í•˜ê¸°\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ ì•±ì˜ ì½”ë“œë¥¼ ì‚´í´ë´…ì‹œë‹¤. ëª‡ ê°€ì§€ API ê²½ë¡œë¥¼ ì‚´í´ë³´ê² ì§€ë§Œ ëŒ€ë¶€ë¶„ì€ orderë¼ëŠ” ë‹¨ì¼ ë‚´êµ¬ì„± í•¨ìˆ˜ì˜ ê° ë¶€ë¶„ì„ ê²€í† í•  ê²ë‹ˆë‹¤. ì•±ì„ ì‹¤í–‰í•˜ê±°ë‚˜ ì½”ë“œë¥¼ ë³´ë ¤ë©´ í”„ë¡œì íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì„¤ì •í•˜ë ¤ë©´ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"npx @temporalio/create@latest --sample food-delivery\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì‚¬ìš©ìê°€ ì£¼ë¬¸ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ React í”„ë¡ íŠ¸ì—”ë“œê°€ tRPC ë°±ì—”ë“œì—ì„œ ì •ì˜ëœ createOrder ë®¤í…Œì´ì…˜ì„ í˜¸ì¶œí•©ë‹ˆë‹¤. createOrder API ê²½ë¡œ í•¸ë“¤ëŸ¬ëŠ” ë‚´êµ¬ì„± ì£¼ë¬¸ í•¨ìˆ˜ë¥¼ ì‹œì‘í•˜ì—¬ ì£¼ë¬¸ì„ ìƒì„±í•©ë‹ˆë‹¤. ë‚´êµ¬ì„± í•¨ìˆ˜ì¸ Workflowsì€ @temporalio/clientì˜ Client ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹œì‘ëœë‹¤. ì´ëŠ” tRPC ì»¨í…ìŠ¤íŠ¸ì— ctx.temporalë¡œ ì¶”ê°€ë˜ì—ˆìœ¼ë©°, ê²½ë¡œ í•¸ë“¤ëŸ¬ëŠ” ìœ íš¨ì„±ì´ ê²€ì¦ëœ ì…ë ¥(ì œí’ˆ ID ë²ˆí˜¸ ë° ì£¼ë¬¸ ID ë¬¸ìì—´ì„ í¬í•¨í•œ ê°ì²´)ì„ ë°›ì•„ë“¤ì´ë©°, ctx.temporal.workflow.startë¥¼ í˜¸ì¶œí•˜ì—¬ ì£¼ë¬¸ Workflowsì„ ì‹œì‘í•©ë‹ˆë‹¤. ì…ë ¥.productIdë¥¼ ì¸ìˆ˜ë¡œ ì œê³µí•©ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [\"apps/menu/pages/api/[trpc].\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"ts\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { initTRPC } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@trpc/server'\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { z } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'zod'\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { taskQueue } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'common'\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Context\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'common/trpc-context'\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { order } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'workflows'\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" t = initTRPC.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"context\"\n        }), \"<\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Context\"\n        }), \">().\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"create\"\n        }), \"()\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" appRouter = t.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"router\"\n        }), \"({\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"createOrder\"\n        }), \": t.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"procedure\"\n        }), \"\\n    .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"input\"\n        }), \"(z.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"object\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"productId\"\n        }), \": z.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"number\"\n        }), \"(), \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"orderId\"\n        }), \": z.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"string\"\n        }), \"() }))\\n    .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"mutation\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" ({ input, ctx }) => {\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" ctx.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"temporal\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"workflow\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"start\"\n        }), \"(order, {\\n        \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"workflowId\"\n        }), \": input.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"orderId\"\n        }), \",\\n        \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"args\"\n        }), \": [input.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"productId\"\n        }), \"],\\n        taskQueue,\\n      })\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Order received and persisted!'\"\n        }), \"\\n    }),\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The order function starts out validating the input, setting up the initial state, and charging the customer:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"packages/workflows/order.ts\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"type \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"OrderState\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Charging card'\"\n        }), \" | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Paid'\"\n        }), \" | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Picked up'\"\n        }), \" | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Delivered'\"\n        }), \" | \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Refunding'\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"order\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"productId: number\"\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Promise\"\n        }), \"<\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \"> {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" product = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getProductById\"\n        }), \"(productId)\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (!product) {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"throw\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApplicationFailure\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"create\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"message\"\n        }), \": \", _jsxs(_components.span, {\n          className: \"hljs-string\",\n          children: [\"`Product \", _jsx(_components.span, {\n            className: \"hljs-subst\",\n            children: \"${productId}\"\n          }), \" not found`\"]\n        }), \" })\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"let\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"state\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"OrderState\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Charging card'\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"let\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"deliveredAt\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Date\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"try\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"chargeCustomer\"\n        }), \"(product)\\n  } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"catch\"\n        }), \" (err) {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" message = \", _jsxs(_components.span, {\n          className: \"hljs-string\",\n          children: [\"`Failed to charge customer for \", _jsx(_components.span, {\n            className: \"hljs-subst\",\n            children: \"${product.name}\"\n          }), \". Error: \", _jsx(_components.span, {\n            className: \"hljs-subst\",\n            children: \"${errorMessage(err)}\"\n          }), \"`\"]\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"sendPushNotification\"\n        }), \"(message)\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"throw\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApplicationFailure\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"create\"\n        }), \"({ message })\\n  }\\n  state = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Paid'\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì–´ë–¤ ê¸°ëŠ¥ì´ ì‹¤íŒ¨í•  ìˆ˜ìˆëŠ” í•¨ìˆ˜ëŠ” ìë™ìœ¼ë¡œ ì¬ì‹œë„ë©ë‹ˆë‹¤. ì´ ê²½ìš° chargeCustomer ë° sendPushNotificationì€ ë‘ ì„œë¹„ìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ë©°, í˜„ì¬ ê°€ë™ ì¤‘ì´ê±°ë‚˜ \\\"ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ\\\"ê³¼ ê°™ì€ ì¼ì‹œì  ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Temporalì€ ì´ëŸ¬í•œ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ìë™ìœ¼ë¡œ ì¬ì‹œë„í•©ë‹ˆë‹¤ (ê¸°ë³¸ì ìœ¼ë¡œ ì œê³± ë°±ì˜¤í”„ ë°©ì‹ìœ¼ë¡œ ë¬´ì œí•œìœ¼ë¡œ, ê·¸ëŸ¬ë‚˜ ì´ê²ƒì€ êµ¬ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤). í•¨ìˆ˜ëŠ” \\\"ì¹´ë“œ ê±°ì ˆ\\\"ê³¼ ê°™ì€ ì¬ì‹œë„í•  ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ë„ throwí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ì¬ì‹œë„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹ , ì—ëŸ¬ê°€ chargeCustomer(product)ì—ì„œ throwë˜ê³  catch ë¸”ë¡ì—ì„œ ìºì¹˜ë©ë‹ˆë‹¤. ê³ ê°ì€ ê²°ì œ ë°©ë²•ì´ ì‹¤íŒ¨í–ˆë‹¤ëŠ” ì•Œë¦¼ì„ ë°›ìœ¼ë©°, ìš°ë¦¬ëŠ” ì£¼ë¬¸ Workflowë¥¼ ì‹¤íŒ¨ì‹œí‚¤ê¸° ìœ„í•´ ApplicationFailureë¥¼ throwí•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ì£¼ë¬¸ ìƒíƒœ í™•ì¸\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë‹¤ìŒ ì½”ë“œ ë¶€ë¶„ì€ ì•½ê°„ì˜ ë°±ê·¸ë¼ìš´ë“œ ì§€ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤. ì¼ë°˜ í•¨ìˆ˜ëŠ” ì˜¤ë˜ ì‹¤í–‰í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, ì¼ì´ ë°œìƒí•  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ëŠ” ë™ì•ˆ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¨ì§€í•˜ê³ , ì–¸ì  ê°€ëŠ” ìƒˆ ì½”ë“œë¥¼ ë°°í¬í•˜ê³  ì´ì „ ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ë©´ ì¢…ë£Œë  ê²ƒì…ë‹ˆë‹¤. ë‚´êµ¬ì„± í•¨ìˆ˜ëŠ” ë‘ ê°€ì§€ ì´ìœ ë¡œ ì„ì˜ì˜ ê¸¸ì´ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ì–´ë–¤ ê²ƒì„ ê¸°ë‹¤ë¦¬ê³  ìˆì„ ë•Œì—ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì°¨ì§€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ê·¸ë“¤ì„ ì‹¤í–‰í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ì–´ë„ ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ì„ ê³„ì†í•  ê²ƒì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë”°ë¼ì„œ ì¼ë¶€ ì˜êµ¬ í•¨ìˆ˜ëŠ” ëˆì„ ì´ì²´í•˜ëŠ” í•¨ìˆ˜ì²˜ëŸ¼ ì§§ì€ ì‹œê°„ ìš´ì˜ë˜ì§€ë§Œ, ì–´ë–¤ ê²ƒì€ ì£¼ë¬¸ì´ ì™„ë£Œë  ë•Œ ëë‚˜ëŠ” ì£¼ë¬¸ í•¨ìˆ˜ì™€ ê³ ê°ì˜ í‰ìƒì„ ì§€ì†í•˜ëŠ” ê³ ê° í•¨ìˆ˜ì™€ ê°™ì´ ê¸¸ê²Œ ìš´ì˜ë©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ê¸´ ì‹œê°„ ë™ì•ˆ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ì™€ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ìœ ìš©í•©ë‹ˆë‹¤. Temporalì€ í•¨ìˆ˜ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ì‹ í˜¸(Signals)ì™€ í•¨ìˆ˜ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬(Queries)ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë“œë¼ì´ë²„ ì‚¬ì´íŠ¸ëŠ” ì´ API ê²½ë¡œë¥¼ í†µí•´ ì£¼ë¬¸ í•¨ìˆ˜ì— ì¿¼ë¦¬ë¥¼ ë³´ë‚´ì–´ ê° ì£¼ë¬¸ì˜ ìƒíƒœë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"apps/menu/pages/api/[trpc].ts\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"getOrderStatus\"\n        }), \": t.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"procedure\"\n        }), \"\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"input\"\n        }), \"(z.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"string\"\n        }), \"())\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"query\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [\"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"{ input: orderId, ctx }\"\n          }), \") =>\"]\n        }), \" ctx.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"temporal\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"workflow\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getHandle\"\n        }), \"(orderId).\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"query\"\n        }), \"(getStatusQuery)),\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"íŠ¹ì • ì£¼ë¬¸ í•¨ìˆ˜(Workflow Executionì´ë¼ê³ ë„ í•¨)ì˜ í•¸ë“¤ì„ ê°€ì ¸ì™€ getStatusQueryë¥¼ ë³´ë‚´ê³  ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. getStatusQueryëŠ” ì£¼ë¬¸ íŒŒì¼ì— ì •ì˜ë˜ì–´ ìˆìœ¼ë©° ì£¼ë¬¸ í•¨ìˆ˜ì—ì„œ ì²˜ë¦¬ë©ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"packages/workflows/order.ts\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { defineQuery, setHandler } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@temporalio/workflow'\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" getStatusQuery = defineQuery<\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"OrderStatus\"\n        }), \">(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'getStatus'\"\n        }), \")\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"order\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"productId: number\"\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Promise\"\n        }), \"<\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \"> {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"let\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"state\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"OrderState\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Charging card'\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"let\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"deliveredAt\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Date\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//â€¦\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setHandler\"\n        }), \"(getStatusQuery, \", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" { state, deliveredAt, productId }\\n  })\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"getStatusQueryë¥¼ ì „ë‹¬í•˜ëŠ” order í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´, setHandlerì— ì „ë‹¬ëœ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì–´ ë¡œì»¬ ë³€ìˆ˜ì˜ ê°’ì„ ë°˜í™˜í•©ë‹ˆë‹¤. chargeCustomer í˜¸ì¶œì´ ì„±ê³µí•˜ë©´ ìƒíƒœê°€ 'ì§€ë¶ˆ ì™„ë£Œ'ë¡œ ë³€ê²½ë˜ê³ , getStatusQueryë¥¼ ê³„ì† í´ë§í•˜ë˜ ë“œë¼ì´ë²„ ì‚¬ì´íŠ¸ê°€ ì—…ë°ì´íŠ¸ëœ ìƒíƒœë¥¼ ë°›ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  'Pick up' ë²„íŠ¼ì„ í‘œì‹œí•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ì£¼ë¬¸ í”½ì—…í•˜ê¸°\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë“œë¼ì´ë²„ê°€ ì£¼ë¬¸ì„ í”½ì—…ìœ¼ë¡œ í‘œì‹œí•˜ê¸° ìœ„í•´ ë²„íŠ¼ì„ íƒ­í•˜ë©´, ì‚¬ì´íŠ¸ëŠ” API ì„œë²„ì— pickUp ë³€ê²½ì„ ë³´ë‚´ê³ , ì´ëŠ” order í•¨ìˆ˜ì— pickedUpSignalì„ ë³´ëƒ…ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"apps/driver/pages/api/[trpc].ts\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"pickUp\"\n        }), \": t.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"procedure\"\n        }), \"\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"input\"\n        }), \"(z.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"string\"\n        }), \"())\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"mutation\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" ({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"input\"\n        }), \": orderId, ctx }) => \\n    ctx.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"temporal\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"workflow\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getHandle\"\n        }), \"(orderId).\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"signal\"\n        }), \"(pickedUpSignal)\\n  ),\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì‹ ì²­ í•¨ìˆ˜ëŠ” ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì—¬ ì‹œê·¸ë„ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"packages/workflows/order.ts\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" pickedUpSignal = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"defineSignal\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'pickedUp'\"\n        }), \")\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"order\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"productId: number\"\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Promise\"\n        }), \"<\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \"> {\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// â€¦\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setHandler\"\n        }), \"(pickedUpSignal, \", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (state === \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Paid'\"\n        }), \") {\\n      state = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Picked up'\"\n        }), \"\\n    }\\n  })\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"í•¨ìˆ˜ì˜ í•˜ë‹¨ì—ì„œëŠ” ê³ ê°ì— ì²­êµ¬ëœ í›„ì— í”½ì—…ì´ ë°œìƒí•  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì™”ë‹¤:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"packages/workflows/order.ts\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { condition } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@temporalio/workflow'\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"order\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"productId: number\"\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Promise\"\n        }), \"<\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \"> {\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// ...\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"try\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"chargeCustomer\"\n        }), \"(product)\\n  } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"catch\"\n        }), \" (err) {\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// ...\"\n        }), \"\\n  }\\n  state = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Paid'\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" notPickedUpInTime = !(\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"condition\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" state === \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Picked up'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'1 min'\"\n        }), \"))\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (notPickedUpInTime) {\\n    state = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Refunding'\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"refundAndNotify\"\n        }), \"(\\n      product,\\n      \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'âš ï¸ No drivers were available to pick up your order. Your payment has been refunded.'\"\n        }), \"\\n    )\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"throw\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApplicationFailure\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"create\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"message\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Not picked up in time'\"\n        }), \" })\\n  }\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"await condition(() => state === 'Picked up', '1 min')\"\n      }), \" í•¨ìˆ˜ëŠ” ìƒíƒœ ë³€í™”ë¥¼ 'Picked up'ìœ¼ë¡œ ë³€ê²½í•  ë•Œê¹Œì§€ 1ë¶„ ë™ì•ˆ ëŒ€ê¸°í•©ë‹ˆë‹¤. 1ë¶„ì´ ì§€ë‚˜ë„ ìƒíƒœê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ falseë¥¼ ë°˜í™˜í•˜ê³  ê³ ê°ì—ê²Œ í™˜ë¶ˆì„ í•©ë‹ˆë‹¤. (ìš°ë¦¬ëŠ” ìš”ë¦¬ì‚¬ì™€ ë°°ì†¡ ê¸°ì‚¬ì˜ ì†ë„ì— ì—„ê²©í•œ ê¸°ì¤€ì„ ê°€ì§€ê³  ìˆê±°ë‚˜, ë°ëª¨ ì•±ì˜ ì‚¬ìš©ìê°€ ëª¨ë“  ì‹¤íŒ¨ ëª¨ë“œë¥¼ ë³¼ ìˆ˜ ìˆê¸°ë¥¼ ì›í•˜ëŠ” ê²ƒ ê°™ì•„ìš” ğŸ˜„.)\"]\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ë°°ì†¡\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë§ˆì°¬ê°€ì§€ë¡œ \\\"ë°°ì†¡\\\" ë²„íŠ¼ìœ¼ë¡œ ì „ì†¡ëœ deliveredSignalì´ ìˆìŠµë‹ˆë‹¤. í”½ì—… í›„ 1ë¶„ ì´ë‚´ì— ìš´ì „ìê°€ ë°°ì†¡ì„ ì™„ë£Œí•˜ì§€ ì•Šìœ¼ë©´ ê³ ê°ì—ê²Œ í™˜ë¶ˆì´ ì´ë¤„ì§‘ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"packages/workflows/order.ts\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" deliveredSignal = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"defineSignal\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'delivered'\"\n        }), \")\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"order\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"productId: number\"\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Promise\"\n        }), \"<\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \"> {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setHandler\"\n        }), \"(deliveredSignal, \", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (state === \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Picked up'\"\n        }), \") {\\n      state = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Delivered'\"\n        }), \"\\n      deliveredAt = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Date\"\n        }), \"()\\n    }\\n  })\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// â€¦\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"sendPushNotification\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'ğŸš— ì£¼ë¬¸ í”½ì—…ë¨'\"\n        }), \")\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" notDeliveredInTime = !(\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"condition\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" state === \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Delivered'\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'1 min'\"\n        }), \"))\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (notDeliveredInTime) {\\n    state = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Refunding'\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"refundAndNotify\"\n        }), \"(product, \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'âš ï¸ ìš´ì „ìê°€ ì£¼ë¬¸ì„ ë°°ë‹¬í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ê²°ì œê°€ í™˜ë¶ˆë˜ì—ˆìŠµë‹ˆë‹¤.'\"\n        }), \")\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"throw\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApplicationFailure\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"create\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"message\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'ì œì‹œê°„ ë°°ì†¡ë˜ì§€ ì•ŠìŒ'\"\n        }), \" })\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"sendPushNotification\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'âœ… ì£¼ë¬¸ì´ ë°°ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤!'\"\n        }), \")\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë°°ì†¡ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ ê³ ê°ì´ ì‹ì‚¬ë¥¼ í•˜ëŠ” ë° í•œ ë¶„ì„ ê¸°ë‹¤ë¦¬ê³ , ê·¸ë“¤ì—ê²Œ ê²½í—˜ì„ í‰ê°€í•˜ë„ë¡ ìš”ì²­í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"sleep\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'1 min'\"\n        }), \") \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// ì´ê²ƒì€ ëª‡ ì‹œê°„ ë˜ëŠ” ì‹¬ì§€ì–´ ëª‡ ë‹¬ì´ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"sendPushNotification\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-string\",\n          children: [\"`âœï¸ ì‹ì‚¬ë¥¼ í‰ê°€í•´ì£¼ì„¸ìš”. \", _jsx(_components.span, {\n            className: \"hljs-subst\",\n            children: \"${product.name.toLowerCase()}\"\n          }), \"ëŠ” ì–´ë– ì…¨ë‚˜ìš”?`\"]\n        }), \")\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ìµœì¢… í‘¸ì‹œ ì•Œë¦¼ ì´í›„, ì£¼ë¬¸ í•¨ìˆ˜ ì‹¤í–‰ì´ ì¢…ë£Œë˜ê³  Workflow Executionì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë©ë‹ˆë‹¤. í•¨ìˆ˜ê°€ ì™„ë£Œë˜ì—ˆë”ë¼ë„ Temporalì´ í•¨ìˆ˜ì˜ ìµœì¢… ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì—¬ì „íˆ ì¿¼ë¦¬ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ë¬¸ì´ ë°°ë‹¬ëœ í›„ 1ë¶„ ë’¤ í˜ì´ì§€ë¥¼ ìƒˆë¡œ ê³ ì¹˜ë©´ ì—¬ì „íˆ getStatusQueryê°€ ì‘ë™í•˜ê³  \\\"ë°°ì†¡ë¨\\\"ì´ ìƒíƒœë¡œ í‘œì‹œë©ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-17-BuildingReliableDistributedSystemsinNode_1.png\",\n        alt: \"ì´ë¯¸ì§€\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ìš”ì•½\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë‹¨ì¼ ë‚´êµ¬ì„± í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ë‹¨ê³„ ì£¼ë¬¸ íë¦„ì„ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ í•¨ìˆ˜ëŠ” ë„¤íŠ¸ì›Œí¬, ë°ì´í„° ì €ì¥ì†Œ ë˜ëŠ” í•˜ìœ„ ì„œë¹„ìŠ¤ì™€ ê´€ë ¨ëœ ì¼ì‹œì  ë¬¸ì œë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•  ê²½ìš°ì—ë„ ì™„ë£Œê°€ ë³´ì¥ë©ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ë„¤íŠ¸ì›Œí¬, ë°ì´í„° ì €ì¥ì†Œ ë˜ëŠ” í•˜ìœ„ ì„œë¹„ìŠ¤ì™€ ê´€ë ¨ëœ ì¼ì‹œì  ë¬¸ì œ\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"í•¨ìˆ˜ ì‹¤í–‰ ì¤‘ ë¬¸ì œ ë°œìƒ\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ê¸°ë°˜ì´ ë˜ëŠ” Temporal ì„œë¹„ìŠ¤ ë˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ë‹¤ìš´\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ë¥¼ í†µí•´ ë¶„ì‚° ì‹œìŠ¤í…œì— ëŒ€í•œ ì—¬ëŸ¬ ë¬¸ì œì ì„ í•´ê²°í•  ìˆ˜ ìˆì—ˆìœ¼ë©°:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ë¡œì»¬ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ëŠ” ëŒ€ì‹ ì— í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ì£¼ë¬¸ì´ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë ¤ ì£¼ë¬¸ì„ ì·¨ì†Œí•˜ê±°ë‚˜ chargeCustomerì™€ ê°™ì€ ì¼ì‹œì  í•¨ìˆ˜ë¥¼ ì¬ì‹œë„í•˜ê³  ì‹œê°„ ì´ˆê³¼í•˜ëŠ” ë‚´ì¥ ê¸°ëŠ¥ì„ ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ì— íƒ€ì´ë¨¸ë¥¼ ì„¤ì •í•  í•„ìš”ê°€ ì—†ì—ˆìŠµë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•˜ê¸° ìœ„í•´ ì›Œì»¤ê°€ ì¡°ì‚¬í•˜ëŠ” ì‘ì—… ëŒ€ê¸°ì—´ì„ ì„¤ì •í•  í•„ìš”ê°€ ì—†ì—ˆìœ¼ë©°, ì‹¤íŒ¨í•œ í”„ë¡œì„¸ìŠ¤ì— ì˜í•´ ì¤‘ë‹¨ëœ ë¯¸ì™„ë£Œ ì‘ì—…ì„ ì§„í–‰í•˜ê±°ë‚˜ ì„ íƒí•˜ê¸° ìœ„í•´ì„œë„ í•„ìš”í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë‹¤ìŒ ê¸€ì—ì„œëŠ” ë°°ì†¡ ì•±ì˜ ì½”ë“œë¥¼ ë” ì‚´í´ë³´ê³  Temporalì´ ìš°ë¦¬ì—ê²Œ ë‚´êµ¬ì„± ì‹¤í–‰ì„ ì œê³µí•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê¸€ì´ ì˜¬ë¼ì˜¤ë©´ ì•Œë¦¼ì„ ë°›ìœ¼ë ¤ë©´ Twitter ë˜ëŠ” LinkedInì—ì„œ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì§ˆë¬¸ì´ ìˆìœ¼ë©´ ì–¸ì œë“ ì§€ ë„ì™€ë“œë¦´ê²Œìš”! Temporalì˜ ë¯¸ì…˜ì´ ê°œë°œìë¥¼ ë•ëŠ” ë°ì— ìˆê³ , ê°œì¸ì ìœ¼ë¡œ ê·¸ê²ƒì—ì„œ ê¸°ì¨ì„ ëŠë‚ë‹ˆë‹¤ ğŸ¤—. íŠ¸ìœ„í„°ì—ì„œëŠ” @lorendsrë¡œ, temporal-typescript íƒœê·¸ê°€ ë‹¬ë¦° StackOverflow ì§ˆë¬¸ì—ëŠ” ë‹µë³€(ê·¸ë¦¬ê³  ì¢‹ì•„ìš” ğŸ˜„)ì„ ë‹¬ë©°, ì»¤ë®¤ë‹ˆí‹° Slackì—ëŠ” @Lorenìœ¼ë¡œ í™œë™í•˜ê³  ìˆìŠµë‹ˆë‹¤ ğŸ’ƒ.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ë” ë°°ìš°ê¸°\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë” ì•Œì•„ë³´ë ¤ë©´ ë‹¤ìŒ ìë£Œë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"ì˜ìƒ: Temporal ì†Œê°œ ë° TypeScript SDK ì‚¬ìš©í•˜ê¸°\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ëª‡ ê°€ì§€ ì¼ë°˜ì ì¸ ì‚¬ìš© ì‚¬ë¡€\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"TypeScript SDK ë¬¸ì„œ: t.mp/ts\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"TypeScript API ì°¸ì¡°: t.mp/ts-api\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"TypeScript íŠœí† ë¦¬ì–¼\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë” ë§ì€ TypeScript SDKì— ê´€í•œ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Node.js ì‘ì—… íë¡œì„œ Temporal ì‚¬ìš©í•˜ê¸°\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ì¥ê¸° ì›Œí¬í”Œë¡œë¥¼ í†µí•´ API ìš”ì²­ ìºì‹±í•˜ê¸°\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ì›Œí¬í”Œë¡œì— ëŒ€í•œ REST APIë¥¼ ìƒì„±í•˜ëŠ” Express ë¯¸ë“¤ì›¨ì–´\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"TS SDK 1.0.0 ë¦´ë¦¬ìŠ¤\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Workflow ê²°ì •ë¡ ì„ ê°•ì œí•˜ê¸° ìœ„í•´ V8 ë…ë¦½ì²´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ğŸ’¬ í•˜ì»¤ ë‰´ìŠ¤, ë ˆë”§, íŠ¸ìœ„í„°, ë˜ëŠ” ë§í¬ë“œì¸ì—ì„œ í† ë¡ í•´ë³´ì„¸ìš”.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ ê²Œì‹œë¬¼ ì´ˆì•ˆì„ ì½ì–´ì¤€ ì œì‹œì¹´ ì›¨ìŠ¤íŠ¸, ë¸Œë¼ì´ì–¸ í˜¸ê±´, ì• ë°€ë¦¬ì•„ ë§ê³ , ê·¸ë¦¬ê³  ì§ ì›Œì»¤ì—ê²Œ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true}