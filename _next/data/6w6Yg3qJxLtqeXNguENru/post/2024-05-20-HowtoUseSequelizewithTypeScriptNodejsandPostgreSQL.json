{"pageProps":{"post":{"title":"TypeScript, Nodejs, ê·¸ë¦¬ê³  PostgreSQLê³¼ í•¨ê»˜ Sequelizeë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•","description":"","date":"2024-05-20 22:18","slug":"2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL","content":"\n\nì‹œì‘ ê°€ì´ë“œ: TypeScriptë¡œ Sequelize êµ¬ì„±í•˜ê¸° \n\nëª¨ë¸, ì—°ê²° ë° ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ì—¬ Sequelizeë¥¼ TypeScriptì™€ í•¨ê»˜ ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n# ì†Œê°œ\n\nì´ ê¸€ì—ì„œëŠ” Sequelizeë¥¼ ì„¤ì •í•˜ì—¬ TypeScript Node.js ë° Expressë¥¼ ì—°ë™í•˜ì—¬ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê³ , ê·¸ í›„ì— ì¡°íšŒìš© ìƒ˜í”Œ ëª¨ë¸ì„ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.\n\nTypeScript, Node.js, Express.js ë° PostgreSQLì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ê²¬ê³ í•œ ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ ê°•ë ¥í•œ ì¡°í•©ì„ ì œê³µí•©ë‹ˆë‹¤. Node.jsë¥¼ ìœ„í•œ ì¸ê¸° ìˆëŠ” ORMì¸ Sequelizeì™€ TypeScriptì˜ ì •ì  ìœ í˜• ì§€ì • ê·¸ë¦¬ê³  PostgreSQLì˜ ì‹ ë¢°ì„±ì„ í™œìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ ë°ì´í„° ê´€ë¦¬ì™€ í™•ì¥ ê°€ëŠ¥ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ í†µí•©ì€ ë°ì´í„°ì˜ ëª¨ë¸ë§, ì¿¼ë¦¬, ê·¸ë¦¬ê³  ì¡°ì‘ì„ ì›í™œí•˜ê²Œ í•˜ë©° ê°œë°œ ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ë©´ì„œ ì½”ë“œ ë¬´ê²°ì„±ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\n\n<div class=\"content-ad\"></div>\n\nìƒˆë¡œìš´ ì‹¤ì‹œê°„ Node.js ì•±ì´ë‚˜ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ë•Œ ê°€ì¥ ë¨¼ì € ê³ ë ¤í•´ì•¼ í•  ê²ƒì€ ì–´ë””ì„œ ì‹œì‘í•´ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ í”„ë ˆì„ì›Œí¬ë‚˜ ORMì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ê²ƒì´ ì„±ëŠ¥ì— ì–´ë–»ê²Œ ì˜í–¥ì„ ë¯¸ì¹ ì§€ ì…ë‹ˆë‹¤. ë˜í•œ, SQL ë˜ëŠ” NoSQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì— ë”°ë¼ ì´ ì§ˆë¬¸ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ì‚¬ì „ ì¤€ë¹„\n\nì´ ê¸€ì—ì„œëŠ” TypeScriptì™€ Expressë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ ë§Œë“¤ì–´ ë†“ì€ Node.js ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\n\nìš°ë¦¬ëŠ” sequelize, pg, pg-hstoreì´ npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì •í•  ê²ƒì´ê³ , Jestë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\n\n<div class=\"content-ad\"></div>\n\n```js\n// ì• í”Œë¦¬ì¼€ì´ì…˜ ë³µì œí•˜ê¸°\ngit clone https://github.com/santoshshinde2012/node-boilerplate.git\n\n// ìƒˆ ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½\ncd node-boilerplate\n\n// ëª¨ë“  ëª¨ë“ˆ ì„¤ì¹˜\nnpm install\n\n// ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘\nnpm start\n```\n\n# ë‹¨ê³„ 1: PostgreSQL ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±\n\nì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ í´ë” docker/postgresqlì— Dockerfile.postgis íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.\n\n```js\nFROM postgres:latest\n\n# PostGIS í™•ì¥ ê¸°ëŠ¥ ì„¤ì¹˜\nRUN apt-get update \\\n    && apt-get install -y postgis postgresql-12-postgis-3 \\\n    && apt-get clean \\\n    && rm -rf /var/lib/apt/lists/*\n\n# ì´ˆê¸° ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ init.sqlì— ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤\nCOPY init.sql /docker-entrypoint-initdb.d/\n\n# PostGIS í™•ì¥ ê¸°ëŠ¥ í™œì„±í™”\nRUN echo \"CREATE EXTENSION IF NOT EXISTS postgis;\" >> /docker-entrypoint-initdb.d/init.sql\n```\n\n<div class=\"content-ad\"></div>\n\në„ì»¤ Compose íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”. docker/postgresql í´ë”ì— ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\n\n```js\n# PostgreSQLì„ ìœ„í•œ docker-compose.yml\n\nversion: '3.8'\n\nservices:\n  db:\n    build:\n      context: .\n      dockerfile: Dockerfile.postgis  # ì»¤ìŠ¤í…€ Dockerfile ì‚¬ìš©\n    restart: always\n    environment:\n      POSTGRES_USER: user1\n      POSTGRES_PASSWORD: user1@123\n      POSTGRES_DB: database\n    healthcheck:\n      # ì´ ëª…ë ¹ì–´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¤€ë¹„ë˜ì–´ ìˆëŠ”ì§€ ì†ŒìŠ¤ db ì„œë²„ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.\n      test: [ \"CMD-SHELL\", \"pg_isready\" ]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - postgres_data_v:/var/lib/postgresql/data\nvolumes:\n  postgres_data_v:\n```\n\npackage.json ì•ˆì— Docker Compose íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.\n\n```js\n\"db:up\": \"docker-compose -f docker/postgresql/docker-compose.yml up\",\n\"db:down\": \"docker-compose -f docker/postgresql/docker-compose.yml down\"\n```\n\n<div class=\"content-ad\"></div>\n\nPostgresqlì„ ì‹¤í–‰í•˜ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì„¸ìš”: npm run db:up.\n\n![image](/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png)\n\n# ë‹¨ê³„ 2: Sequelizeì˜ ì„¤ì¹˜ ë° êµ¬ì„±\n\nSequelizeëŠ” npm (ë˜ëŠ” yarn)ì„ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<div class=\"content-ad\"></div>\n\n```js\nnpm install --save sequelize\nnpm install --save pg pg-hstore # Postgres\n```\n\nì‘ì—…ì„ ë§ˆì¹˜ë©´ ì½”ë“œë¥¼ ë°°ì¹˜í•  í´ë” êµ¬ì¡°ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì½”ë“œê°€ ê¹¨ë—í•˜ê³  ê°€ë…ì„± ìˆê²Œ ìœ ì§€ë˜ë„ë¡ í•˜ê¸° ìœ„í•´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ í´ë”ë¡œ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ë¶€ë¶„ì€ database í´ë” ì•„ë˜ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\n<img src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_1.png\" />\n\nsrc/database/config í´ë”ì˜ index.ts íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ê³ , .env npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. í™˜ê²½ì— ë”°ë¥¸ ë¡œì§ì€ í•„ìš”ì— ë”°ë¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n<div class=\"content-ad\"></div>\n\n```js\nimport path from 'path';\nimport dotenv from 'dotenv';\n\ndotenv.config({\n    path: path.join(__dirname, '../../.env'),\n});\n\níƒ€ì… DbConnection = {\n    í˜¸ìŠ¤íŠ¸: ë¬¸ìì—´;\n    í¬íŠ¸: ìˆ«ì;\n    ì‚¬ìš©ì: ë¬¸ìì—´;\n    ë¹„ë°€ë²ˆí˜¸: ë¬¸ìì—´;\n    ë°ì´í„°ë² ì´ìŠ¤: ë¬¸ìì—´;\n    dbLogging: ë¶€ìš¸;\n};\n\nconst connection: DbConnection = {\n    í˜¸ìŠ¤íŠ¸: process.env.DB_HOST,\n    í¬íŠ¸: Number(process.env.DB_PORT),\n    ì‚¬ìš©ì: process.env.DB_USER,\n    ë¹„ë°€ë²ˆí˜¸: process.env.DB_PASSWORD,\n    ë°ì´í„°ë² ì´ìŠ¤: process.env.DB_NAME,\n    dbLogging:\n        process.env.NODE_ENV === 'development' || process.env.LOG === 'true',\n};\n\nexport default connection;\n```\n\nsrc/database í´ë”ì— index.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelize ì—°ê²°ì„ ë§Œë“­ë‹ˆë‹¤.\n\n```js\nimport { Dialect, Sequelize } from 'sequelize';\nimport connection from './config';\n\nconst { database, user, password, host, dbLogging } = connection;\n\nconst sequelizeConnection = new Sequelize(database, user, password, {\n    host,\n    logging: dbLogging,\n    dialect: 'postgres' as Dialect,\n});\n\nexport default sequelizeConnection;\n```\n\nsrc/App.ts ë˜ëŠ” ì„œë²„ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ì§„ì… íŒŒì¼ì— assertDatabaseConnection ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸ì„í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.\n\n\n<div class=\"content-ad\"></div>\n\n```js\nê°œì¸ async assertDatabaseConnection(): Promise<void> {\n    try {\n     await database.authenticate();\n     await database.sync();\n     logger.info('ì—°ê²°ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');\n    } catch (error) {\n logger.error('ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', error);\n    }\n}\n```\n\n# ë‹¨ê³„ 3: Sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸”(ëª¨ë¸) ìƒì„±\n\nsrc/database/models í´ë”ì— ëª¨ë¸ì„ ì •ì˜í•˜ì„¸ìš”; ì—¬ê¸°ì„œëŠ” ìƒ˜í”Œ ëª¨ë¸ì¸ Enquiry.tsë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤.\n\n```js\nimport { DataTypes, Model, Optional, UUIDV4 } from 'sequelize';\nimport sequelize from '../index';\n\ninterface EnquiryAttributes {\n id: string;\n name: string;\n subject: string;\n body: string;\n email: string;\n country: string;\n}\n\ninterface EnquiryCreationAttributes\n extends Optional<EnquiryAttributes, 'id'> {}\n\nclass Enquiry\n extends Model<EnquiryAttributes, EnquiryCreationAttributes>\n implements EnquiryAttributes\n{\n public id!: string;\n public name!: string;\n public country!: string;\n public subject!: string;\n public body!: string;\n public email!: string;\n\n public readonly createdAt!: Date;\n public readonly updatedAt!: Date;\n}\n\nEnquiry.init(\n {\n  id: {\n   type: DataTypes.UUID,\n   defaultValue: UUIDV4,\n   primaryKey: true,\n  },\n  name: {\n   type: DataTypes.STRING(100),\n   allowNull: false,\n  },\n  country: {\n   type: DataTypes.STRING(100),\n   allowNull: false,\n  },\n  subject: {\n   type: DataTypes.STRING(200),\n   allowNull: false,\n  },\n  email: {\n   type: DataTypes.STRING(100),\n   allowNull: false,\n  },\n  body: {\n   type: DataTypes.STRING(400),\n   allowNull: false,\n  }\n },\n {\n  sequelize,\n  modelName: 'Enquiry',\n  tableName: 'Enquiry',\n  timestamps: true,\n },\n);\n\nexport { Enquiry, EnquiryAttributes, EnquiryCreationAttributes };\n```\n\n<div class=\"content-ad\"></div>\n\n```js\nimport { ë°ì´í„° ìœ í˜•, ëª¨ë¸, ì„ íƒì , UUIDV4 } from 'sequelize';\nimport sequelize from '../index';\n\nì¸í„°í˜ì´ìŠ¤ ì¡°íšŒ ì†ì„± {\n id: string;\n ì´ë¦„: string;\n ì£¼ì œ: string;\n ë³¸ë¬¸: string;\n ì´ë©”ì¼: string;\n êµ­ê°€: string;\n}\n\nì¸í„°í˜ì´ìŠ¤ EnquiryCreationAttributes ì— ì´ì–´, EnquiryAttributesì˜ ì„ íƒì  í•´ì œ {}\n\ní´ë˜ìŠ¤ Enquiryì€ Model<EnquiryAttributes, EnquiryCreationAttributes>ë¥¼ í™•ì¥í•˜ë©° EnquiryAttributesë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤ {\n ê³µê³µ id!: string;\n ê³µê³µ ì´ë¦„!: string;\n ê³µê³µ êµ­ê°€!: string;\n ê³µê³µ ì£¼ì œ!: string;\n ê³µê³µ ëª¸í†µ!: string;\n ê³µê³µ ì´ë©”ì¼!: string;\n\n ê³µê³µ readonly createdAt!: Date;\n ê³µê³µ readonly updatedAt!: Date;\n}\n\nEnquiry.init(\n {\n  ì•„ì´ë””: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.UUID,\n   ê¸°ë³¸ê°’: UUIDV4,\n   ê¸°ë³¸ í‚¤: ì°¸,\n  },\n  ì´ë¦„: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(100),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  êµ­ê°€: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(100),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ì£¼ì œ: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(200),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ì´ë©”ì¼: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(100),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ëª¸í†µ: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(400),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  }\n },\n {\n  ì‹œí€„ë¼ì´ì¦ˆ,\n  ëª¨ë¸ ì´ë¦„: 'ì¡°íšŒ',\n  í…Œì´ë¸” ì´ë¦„: 'ì¡°íšŒ',\n  íƒ€ì„ ìŠ¤íƒ¬í”„: ì°¸,\n },\n);\n\nìˆ˜ì¶œ { ì¡°íšŒ, EnquiryAttributes, EnquiryCreationAttributes };\n```\n\n<img src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_2.png\" />\n\n# ë‹¨ê³„ 4: êµ¬ì„± ìš”ì†Œì—ì„œ ì„œë¹„ìŠ¤ ë° ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ì •\n\n- êµ¬ì„± ìš”ì†Œ êµ¬ì„± ìš”ì†ŒëŠ” ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤: ì»¨íŠ¸ë¡¤ëŸ¬ ë° ì„œë¹„ìŠ¤ ì„œë¹„ìŠ¤ëŠ” í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ê³¼ í†µì‹ í•˜ëŠ” ë° ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.\n- ë¼ìš°íŠ¸ â€” ì»¨íŠ¸ë¡¤ëŸ¬ ë° í•´ë‹¹ ë ˆìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸ì˜ ë“±ë¡ ë°©ë²•ì„ ë“±ë¡í•©ë‹ˆë‹¤.\n- ê³µí†µ ì„œë¹„ìŠ¤ â€”ì´ ì„œë¹„ìŠ¤ëŠ” ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ ê°„ì˜ ì¼ë°˜ ì‘ì—… ìˆ˜í–‰ì— ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.\n- ì´ë¥¼ êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì— ì£¼ì…í•˜ê³  êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í•´ë‹¹ ë©”ì„œë“œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n<div class=\"content-ad\"></div>\n\n```js\n// src/components/enquiry/EnquiryService.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ëœ ëª¨ë¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n\nimport {\n Enquiry,\n EnquiryAttributes,\n EnquiryCreationAttributes,\n} from '../../database/models/Enquiry';\nimport logger from '../../lib/logger';\nimport ApiError from '../../abstractions/ApiError';\nimport { StatusCodes } from 'http-status-codes';\n\nexport class EnquiryService {\n\n async getAll(): Promise<EnquiryAttributes[]> {\n  try {\n   const enquiries = await Enquiry.findAll();\n   return enquiries;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async getById(id: string | number): Promise<EnquiryAttributes> {\n  try {\n   const enquiry = await Enquiry.findByPk(id);\n   if (!enquiry) {\n    throw new ApiError('Enquiry not found', StatusCodes.NOT_FOUND);\n   }\n   return enquiry;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async update(\n  id: string | number,\n  payload: Partial<EnquiryCreationAttributes>,\n ): Promise<EnquiryAttributes> {\n  try {\n   const enquiry = await Enquiry.findByPk(id);\n   if (!enquiry) {\n    throw new ApiError(\n     'Enquiry not found',\n     StatusCodes.NOT_FOUND,\n    );\n   }\n   const updatedEnquiry = await enquiry.update(payload);\n   return updatedEnquiry;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async create(\n  payload: EnquiryCreationAttributes,\n ): Promise<EnquiryAttributes> {\n  try {\n   const enquiry = await Enquiry.create(payload);\n   return enquiry;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async delete(id: string | number): Promise<boolean> {\n  try {\n   const deletedEnquiryCount = await Enquiry.destroy({\n    where: { id },\n   });\n\n   return !!deletedEnquiryCount;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n}\n```\n\n```js\n// src/components/enquiry/EnquiryController.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ REST APIì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë¶€ë¶„ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n\nimport { NextFunction, Request, Response, Router } from 'express';\nimport { ReasonPhrases, StatusCodes } from 'http-status-codes';\nimport BaseApi from '../BaseApi';\nimport { EnquiryService } from './EnquiryService';\nimport { EnquiryAttributes } from '../../database/models/Enquiry';\nimport ApiError from '../../abstractions/ApiError';\n\n/**\n * Enquiry controller\n */\nexport default class EnquiryController extends BaseApi {\n private enquiry: EnquiryService;\n public basePath: string = 'enquiries';\n\n constructor() {\n  super();\n  this.enquiry = new EnquiryService();\n }\n\n /**\n  *\n  */\n public routes(): RouteDefinition[] {\n  return [\n   { path: '/', method: 'get', handler: this.getEnquiries.bind(this) },\n   { path: '/:id', method: 'get', handler: this.getEnquiry.bind(this) },\n   { path: '/', method: 'post', handler: this.createEnquiry.bind(this) },\n   { path: '/:id', method: 'put', handler: this.updateEnquiry.bind(this) },\n   { path: '/:id', method: 'delete', handler: this.delete.bind(this) }\n  ];\n }\n\n /**\n  *\n  * @param req\n  * @param res\n  * @param next\n  */\n public async getEnquiries(\n  req: Request,\n  res: Response,\n  next: NextFunction,\n ): Promise<void> {\n  try {\n   const enquiries: EnquiryAttributes[] =\n    await this.enquiry.getAll();\n   res.locals.data = enquiries;\n   // call base class method\n   this.send(res);\n  } catch (err) {\n   next(err);\n  }\n }\n\n // ì´í•˜ ìƒëµ\n}\n```\n\n<div class=\"content-ad\"></div>\n\n# ë‹¨ê³„ 5: êµ¬ì„± ìš”ì†Œë¥¼ ìœ„í•œ REST API ìƒì„±\n\në¬¸ì˜: ë¬¸ì˜ëŠ” ì†ì„± ì§‘í•©ì„ ê°€ì§„ ì£¼ìš” ì—”í„°í‹°ì…ë‹ˆë‹¤.\n\n- GET /v1/enquiries ëª¨ë“  ë¬¸ì˜ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\n- POST /v1/enquiries ìƒˆë¡œìš´ ë¬¸ì˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n- GET /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\n- PUT /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\n- DELETE /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.\n\nìš°ë¦¬ëŠ” ì´ì „ì— ì •ì˜í•œ ê²½ë¡œë¥¼ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ src/routes.tsì— í•­ëª©ì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n<div class=\"content-ad\"></div>\n\nì•„ë˜ ë§í¬ì—ì„œ ì „ì²´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆë³´ìë¥¼ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ëœ ì´ ì €ì¥ì†ŒëŠ” ë°±ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ë° íŠ¼íŠ¼í•œ ì¶œë°œì ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ í¬í•¨ëœ ì˜ ì •ë¦¬ëœ ì½”ë“œë² ì´ìŠ¤ë¡œ ê¹Šê²Œ íŒŒê³ ë“¤ë©° í•™ìŠµí•˜ê³  ë¬¸ì œ í•´ê²°ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²Œë‹¤ê°€ GitHub Actions ì›Œí¬í”Œë¡œê°€ í†µí•©ë˜ì–´ ìˆì–´ í…ŒìŠ¤íŠ¸ì™€ ë°°í¬ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•™ìŠµì„ ì‹œì‘í•˜ê±°ë‚˜ ì²« ë²ˆì§¸ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ë ¤ëŠ” ê²½ìš°ì—ë„ ìœ ìš©í•©ë‹ˆë‹¤.\n\nì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì´ ë¸”ë¡œê·¸ê°€ í•™ìŠµì— ê°€ì¹˜ê°€ ìˆë‹¤ê³  ìƒê°ë˜ë©´ ì˜ê²¬ì„ ê³µìœ í•˜ê³  í´ë©(clap)ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.\n\n<div class=\"content-ad\"></div>\n\n# ì¹œì ˆí•œ ì–¸ì–´ë¡œ ğŸš€\n\nIn Plain English ì»¤ë®¤ë‹ˆí‹°ì— ì°¸ì—¬í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:\n\n- ì‘ê°€ë¥¼ clapsí•˜ê³  íŒ”ë¡œìš° í•´ì£¼ì„¸ìš” ğŸ‘ï¸\n- íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°\n- ë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: Stackademic | CoFeed | Venture | Cubed\n- PlainEnglish.ioì—ì„œ ë” ë§ì€ ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”","ogImage":{"url":"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png"},"coverImage":"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png","tag":["Tech"],"readingTime":12},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>ì‹œì‘ ê°€ì´ë“œ: TypeScriptë¡œ Sequelize êµ¬ì„±í•˜ê¸°</p>\n<p>ëª¨ë¸, ì—°ê²° ë° ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ì—¬ Sequelizeë¥¼ TypeScriptì™€ í•¨ê»˜ ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<h1>ì†Œê°œ</h1>\n<p>ì´ ê¸€ì—ì„œëŠ” Sequelizeë¥¼ ì„¤ì •í•˜ì—¬ TypeScript Node.js ë° Expressë¥¼ ì—°ë™í•˜ì—¬ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê³ , ê·¸ í›„ì— ì¡°íšŒìš© ìƒ˜í”Œ ëª¨ë¸ì„ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<p>TypeScript, Node.js, Express.js ë° PostgreSQLì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ê²¬ê³ í•œ ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ ê°•ë ¥í•œ ì¡°í•©ì„ ì œê³µí•©ë‹ˆë‹¤. Node.jsë¥¼ ìœ„í•œ ì¸ê¸° ìˆëŠ” ORMì¸ Sequelizeì™€ TypeScriptì˜ ì •ì  ìœ í˜• ì§€ì • ê·¸ë¦¬ê³  PostgreSQLì˜ ì‹ ë¢°ì„±ì„ í™œìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ ë°ì´í„° ê´€ë¦¬ì™€ í™•ì¥ ê°€ëŠ¥ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ í†µí•©ì€ ë°ì´í„°ì˜ ëª¨ë¸ë§, ì¿¼ë¦¬, ê·¸ë¦¬ê³  ì¡°ì‘ì„ ì›í™œí•˜ê²Œ í•˜ë©° ê°œë°œ ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ë©´ì„œ ì½”ë“œ ë¬´ê²°ì„±ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.</p>\n<p>ìƒˆë¡œìš´ ì‹¤ì‹œê°„ Node.js ì•±ì´ë‚˜ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ë•Œ ê°€ì¥ ë¨¼ì € ê³ ë ¤í•´ì•¼ í•  ê²ƒì€ ì–´ë””ì„œ ì‹œì‘í•´ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ í”„ë ˆì„ì›Œí¬ë‚˜ ORMì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ê²ƒì´ ì„±ëŠ¥ì— ì–´ë–»ê²Œ ì˜í–¥ì„ ë¯¸ì¹ ì§€ ì…ë‹ˆë‹¤. ë˜í•œ, SQL ë˜ëŠ” NoSQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì— ë”°ë¼ ì´ ì§ˆë¬¸ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h1>ì‚¬ì „ ì¤€ë¹„</h1>\n<p>ì´ ê¸€ì—ì„œëŠ” TypeScriptì™€ Expressë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ ë§Œë“¤ì–´ ë†“ì€ Node.js ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<p>ìš°ë¦¬ëŠ” sequelize, pg, pg-hstoreì´ npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì •í•  ê²ƒì´ê³ , Jestë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// ì• í”Œë¦¬ì¼€ì´ì…˜ ë³µì œí•˜ê¸°</span>\ngit clone <span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//github.com/santoshshinde2012/node-boilerplate.git</span>\n\n<span class=\"hljs-comment\">// ìƒˆ ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½</span>\ncd node-boilerplate\n\n<span class=\"hljs-comment\">// ëª¨ë“  ëª¨ë“ˆ ì„¤ì¹˜</span>\nnpm install\n\n<span class=\"hljs-comment\">// ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘</span>\nnpm start\n</code></pre>\n<h1>ë‹¨ê³„ 1: PostgreSQL ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±</h1>\n<p>ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ í´ë” docker/postgresqlì— Dockerfile.postgis íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable constant_\">FROM</span> <span class=\"hljs-attr\">postgres</span>:latest\n\n# <span class=\"hljs-title class_\">PostGIS</span> í™•ì¥ ê¸°ëŠ¥ ì„¤ì¹˜\n<span class=\"hljs-variable constant_\">RUN</span> apt-get update \\\n    &#x26;&#x26; apt-get install -y postgis postgresql-<span class=\"hljs-number\">12</span>-postgis-<span class=\"hljs-number\">3</span> \\\n    &#x26;&#x26; apt-get clean \\\n    &#x26;&#x26; rm -rf /<span class=\"hljs-keyword\">var</span>/lib/apt/lists<span class=\"hljs-comment\">/*\n\n# ì´ˆê¸° ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ init.sqlì— ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤\nCOPY init.sql /docker-entrypoint-initdb.d/\n\n# PostGIS í™•ì¥ ê¸°ëŠ¥ í™œì„±í™”\nRUN echo \"CREATE EXTENSION IF NOT EXISTS postgis;\" >> /docker-entrypoint-initdb.d/init.sql\n</span></code></pre>\n<p>ë„ì»¤ Compose íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”. docker/postgresql í´ë”ì— ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.</p>\n<pre><code class=\"hljs language-js\"># <span class=\"hljs-title class_\">PostgreSQL</span>ì„ ìœ„í•œ docker-compose.<span class=\"hljs-property\">yml</span>\n\n<span class=\"hljs-attr\">version</span>: <span class=\"hljs-string\">'3.8'</span>\n\n<span class=\"hljs-attr\">services</span>:\n  <span class=\"hljs-attr\">db</span>:\n    <span class=\"hljs-attr\">build</span>:\n      <span class=\"hljs-attr\">context</span>: .\n      <span class=\"hljs-attr\">dockerfile</span>: <span class=\"hljs-title class_\">Dockerfile</span>.<span class=\"hljs-property\">postgis</span>  # ì»¤ìŠ¤í…€ <span class=\"hljs-title class_\">Dockerfile</span> ì‚¬ìš©\n    <span class=\"hljs-attr\">restart</span>: always\n    <span class=\"hljs-attr\">environment</span>:\n      <span class=\"hljs-attr\">POSTGRES_USER</span>: user1\n      <span class=\"hljs-attr\">POSTGRES_PASSWORD</span>: user1@<span class=\"hljs-number\">123</span>\n      <span class=\"hljs-attr\">POSTGRES_DB</span>: database\n    <span class=\"hljs-attr\">healthcheck</span>:\n      # ì´ ëª…ë ¹ì–´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¤€ë¹„ë˜ì–´ ìˆëŠ”ì§€ ì†ŒìŠ¤ db ì„œë²„ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.\n      <span class=\"hljs-attr\">test</span>: [ <span class=\"hljs-string\">\"CMD-SHELL\"</span>, <span class=\"hljs-string\">\"pg_isready\"</span> ]\n      <span class=\"hljs-attr\">interval</span>: 5s\n      <span class=\"hljs-attr\">timeout</span>: 5s\n      <span class=\"hljs-attr\">retries</span>: <span class=\"hljs-number\">5</span>\n    <span class=\"hljs-attr\">ports</span>:\n      - <span class=\"hljs-string\">\"5432:5432\"</span>\n    <span class=\"hljs-attr\">volumes</span>:\n      - <span class=\"hljs-attr\">postgres_data_v</span>:<span class=\"hljs-regexp\">/var/</span>lib/postgresql/data\n<span class=\"hljs-attr\">volumes</span>:\n  <span class=\"hljs-attr\">postgres_data_v</span>:\n</code></pre>\n<p>package.json ì•ˆì— Docker Compose íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-string\">\"db:up\"</span>: <span class=\"hljs-string\">\"docker-compose -f docker/postgresql/docker-compose.yml up\"</span>,\n<span class=\"hljs-string\">\"db:down\"</span>: <span class=\"hljs-string\">\"docker-compose -f docker/postgresql/docker-compose.yml down\"</span>\n</code></pre>\n<p>Postgresqlì„ ì‹¤í–‰í•˜ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì„¸ìš”: npm run db:up.</p>\n<p><img src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png\" alt=\"image\"></p>\n<h1>ë‹¨ê³„ 2: Sequelizeì˜ ì„¤ì¹˜ ë° êµ¬ì„±</h1>\n<p>SequelizeëŠ” npm (ë˜ëŠ” yarn)ì„ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\">npm install --save sequelize\nnpm install --save pg pg-hstore # <span class=\"hljs-title class_\">Postgres</span>\n</code></pre>\n<p>ì‘ì—…ì„ ë§ˆì¹˜ë©´ ì½”ë“œë¥¼ ë°°ì¹˜í•  í´ë” êµ¬ì¡°ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì½”ë“œê°€ ê¹¨ë—í•˜ê³  ê°€ë…ì„± ìˆê²Œ ìœ ì§€ë˜ë„ë¡ í•˜ê¸° ìœ„í•´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ í´ë”ë¡œ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ë¶€ë¶„ì€ database í´ë” ì•„ë˜ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>src/database/config í´ë”ì˜ index.ts íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ê³ , .env npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. í™˜ê²½ì— ë”°ë¥¸ ë¡œì§ì€ í•„ìš”ì— ë”°ë¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> path <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'path'</span>;\n<span class=\"hljs-keyword\">import</span> dotenv <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'dotenv'</span>;\n\ndotenv.<span class=\"hljs-title function_\">config</span>({\n    <span class=\"hljs-attr\">path</span>: path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">'../../.env'</span>),\n});\n\níƒ€ì… <span class=\"hljs-title class_\">DbConnection</span> = {\n    í˜¸ìŠ¤íŠ¸: ë¬¸ìì—´;\n    í¬íŠ¸: ìˆ«ì;\n    ì‚¬ìš©ì: ë¬¸ìì—´;\n    ë¹„ë°€ë²ˆí˜¸: ë¬¸ìì—´;\n    ë°ì´í„°ë² ì´ìŠ¤: ë¬¸ìì—´;\n    <span class=\"hljs-attr\">dbLogging</span>: ë¶€ìš¸;\n};\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">connection</span>: <span class=\"hljs-title class_\">DbConnection</span> = {\n    í˜¸ìŠ¤íŠ¸: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_HOST</span>,\n    í¬íŠ¸: <span class=\"hljs-title class_\">Number</span>(process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_PORT</span>),\n    ì‚¬ìš©ì: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_USER</span>,\n    ë¹„ë°€ë²ˆí˜¸: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_PASSWORD</span>,\n    ë°ì´í„°ë² ì´ìŠ¤: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_NAME</span>,\n    <span class=\"hljs-attr\">dbLogging</span>:\n        process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> === <span class=\"hljs-string\">'development'</span> || process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">LOG</span> === <span class=\"hljs-string\">'true'</span>,\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> connection;\n</code></pre>\n<p>src/database í´ë”ì— index.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelize ì—°ê²°ì„ ë§Œë“­ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Dialect</span>, <span class=\"hljs-title class_\">Sequelize</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'sequelize'</span>;\n<span class=\"hljs-keyword\">import</span> connection <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./config'</span>;\n\n<span class=\"hljs-keyword\">const</span> { database, user, password, host, dbLogging } = connection;\n\n<span class=\"hljs-keyword\">const</span> sequelizeConnection = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Sequelize</span>(database, user, password, {\n    host,\n    <span class=\"hljs-attr\">logging</span>: dbLogging,\n    <span class=\"hljs-attr\">dialect</span>: <span class=\"hljs-string\">'postgres'</span> <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title class_\">Dialect</span>,\n});\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> sequelizeConnection;\n</code></pre>\n<p>src/App.ts ë˜ëŠ” ì„œë²„ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ì§„ì… íŒŒì¼ì— assertDatabaseConnection ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸ì„í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.</p>\n<pre><code class=\"hljs language-js\">ê°œì¸ <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">assertDatabaseConnection</span>(): <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-keyword\">void</span>> {\n    <span class=\"hljs-keyword\">try</span> {\n     <span class=\"hljs-keyword\">await</span> database.<span class=\"hljs-title function_\">authenticate</span>();\n     <span class=\"hljs-keyword\">await</span> database.<span class=\"hljs-title function_\">sync</span>();\n     logger.<span class=\"hljs-title function_\">info</span>(<span class=\"hljs-string\">'ì—°ê²°ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.'</span>);\n    } <span class=\"hljs-keyword\">catch</span> (error) {\n logger.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">'ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤:'</span>, error);\n    }\n}\n</code></pre>\n<h1>ë‹¨ê³„ 3: Sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸”(ëª¨ë¸) ìƒì„±</h1>\n<p>src/database/models í´ë”ì— ëª¨ë¸ì„ ì •ì˜í•˜ì„¸ìš”; ì—¬ê¸°ì„œëŠ” ìƒ˜í”Œ ëª¨ë¸ì¸ Enquiry.tsë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">DataTypes</span>, <span class=\"hljs-title class_\">Model</span>, <span class=\"hljs-title class_\">Optional</span>, <span class=\"hljs-title class_\">UUIDV4</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'sequelize'</span>;\n<span class=\"hljs-keyword\">import</span> sequelize <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../index'</span>;\n\ninterface <span class=\"hljs-title class_\">EnquiryAttributes</span> {\n <span class=\"hljs-attr\">id</span>: string;\n <span class=\"hljs-attr\">name</span>: string;\n <span class=\"hljs-attr\">subject</span>: string;\n <span class=\"hljs-attr\">body</span>: string;\n <span class=\"hljs-attr\">email</span>: string;\n <span class=\"hljs-attr\">country</span>: string;\n}\n\ninterface <span class=\"hljs-title class_\">EnquiryCreationAttributes</span>\n <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">Optional</span>&#x3C;<span class=\"hljs-title class_\">EnquiryAttributes</span>, <span class=\"hljs-string\">'id'</span>> {}\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Enquiry</span>\n <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">Model</span>&#x3C;<span class=\"hljs-title class_\">EnquiryAttributes</span>, <span class=\"hljs-title class_\">EnquiryCreationAttributes</span>>\n implements <span class=\"hljs-title class_\">EnquiryAttributes</span>\n{\n public id!: string;\n public name!: string;\n public country!: string;\n public subject!: string;\n public body!: string;\n public email!: string;\n\n public readonly createdAt!: <span class=\"hljs-title class_\">Date</span>;\n public readonly updatedAt!: <span class=\"hljs-title class_\">Date</span>;\n}\n\n<span class=\"hljs-title class_\">Enquiry</span>.<span class=\"hljs-title function_\">init</span>(\n {\n  <span class=\"hljs-attr\">id</span>: {\n   <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">DataTypes</span>.<span class=\"hljs-property\">UUID</span>,\n   <span class=\"hljs-attr\">defaultValue</span>: <span class=\"hljs-title class_\">UUIDV4</span>,\n   <span class=\"hljs-attr\">primaryKey</span>: <span class=\"hljs-literal\">true</span>,\n  },\n  <span class=\"hljs-attr\">name</span>: {\n   <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">DataTypes</span>.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">100</span>),\n   <span class=\"hljs-attr\">allowNull</span>: <span class=\"hljs-literal\">false</span>,\n  },\n  <span class=\"hljs-attr\">country</span>: {\n   <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">DataTypes</span>.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">100</span>),\n   <span class=\"hljs-attr\">allowNull</span>: <span class=\"hljs-literal\">false</span>,\n  },\n  <span class=\"hljs-attr\">subject</span>: {\n   <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">DataTypes</span>.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">200</span>),\n   <span class=\"hljs-attr\">allowNull</span>: <span class=\"hljs-literal\">false</span>,\n  },\n  <span class=\"hljs-attr\">email</span>: {\n   <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">DataTypes</span>.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">100</span>),\n   <span class=\"hljs-attr\">allowNull</span>: <span class=\"hljs-literal\">false</span>,\n  },\n  <span class=\"hljs-attr\">body</span>: {\n   <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">DataTypes</span>.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">400</span>),\n   <span class=\"hljs-attr\">allowNull</span>: <span class=\"hljs-literal\">false</span>,\n  }\n },\n {\n  sequelize,\n  <span class=\"hljs-attr\">modelName</span>: <span class=\"hljs-string\">'Enquiry'</span>,\n  <span class=\"hljs-attr\">tableName</span>: <span class=\"hljs-string\">'Enquiry'</span>,\n  <span class=\"hljs-attr\">timestamps</span>: <span class=\"hljs-literal\">true</span>,\n },\n);\n\n<span class=\"hljs-keyword\">export</span> { <span class=\"hljs-title class_\">Enquiry</span>, <span class=\"hljs-title class_\">EnquiryAttributes</span>, <span class=\"hljs-title class_\">EnquiryCreationAttributes</span> };\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { ë°ì´í„° ìœ í˜•, ëª¨ë¸, ì„ íƒì , <span class=\"hljs-title class_\">UUIDV4</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'sequelize'</span>;\n<span class=\"hljs-keyword\">import</span> sequelize <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../index'</span>;\n\nì¸í„°í˜ì´ìŠ¤ ì¡°íšŒ ì†ì„± {\n <span class=\"hljs-attr\">id</span>: string;\n ì´ë¦„: string;\n ì£¼ì œ: string;\n ë³¸ë¬¸: string;\n ì´ë©”ì¼: string;\n êµ­ê°€: string;\n}\n\nì¸í„°í˜ì´ìŠ¤ <span class=\"hljs-title class_\">EnquiryCreationAttributes</span> ì— ì´ì–´, <span class=\"hljs-title class_\">EnquiryAttributes</span>ì˜ ì„ íƒì  í•´ì œ {}\n\ní´ë˜ìŠ¤ <span class=\"hljs-title class_\">Enquiry</span>ì€ <span class=\"hljs-title class_\">Model</span>&#x3C;<span class=\"hljs-title class_\">EnquiryAttributes</span>, <span class=\"hljs-title class_\">EnquiryCreationAttributes</span>>ë¥¼ í™•ì¥í•˜ë©° <span class=\"hljs-title class_\">EnquiryAttributes</span>ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤ {\n ê³µê³µ id!: string;\n ê³µê³µ ì´ë¦„!: string;\n ê³µê³µ êµ­ê°€!: string;\n ê³µê³µ ì£¼ì œ!: string;\n ê³µê³µ ëª¸í†µ!: string;\n ê³µê³µ ì´ë©”ì¼!: string;\n\n ê³µê³µ readonly createdAt!: <span class=\"hljs-title class_\">Date</span>;\n ê³µê³µ readonly updatedAt!: <span class=\"hljs-title class_\">Date</span>;\n}\n\n<span class=\"hljs-title class_\">Enquiry</span>.<span class=\"hljs-title function_\">init</span>(\n {\n  ì•„ì´ë””: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class=\"hljs-property\">UUID</span>,\n   ê¸°ë³¸ê°’: <span class=\"hljs-title class_\">UUIDV4</span>,\n   ê¸°ë³¸ í‚¤: ì°¸,\n  },\n  ì´ë¦„: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">100</span>),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  êµ­ê°€: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">100</span>),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ì£¼ì œ: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">200</span>),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ì´ë©”ì¼: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">100</span>),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ëª¸í†µ: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class=\"hljs-title function_\">STRING</span>(<span class=\"hljs-number\">400</span>),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  }\n },\n {\n  ì‹œí€„ë¼ì´ì¦ˆ,\n  ëª¨ë¸ ì´ë¦„: <span class=\"hljs-string\">'ì¡°íšŒ'</span>,\n  í…Œì´ë¸” ì´ë¦„: <span class=\"hljs-string\">'ì¡°íšŒ'</span>,\n  íƒ€ì„ ìŠ¤íƒ¬í”„: ì°¸,\n },\n);\n\nìˆ˜ì¶œ { ì¡°íšŒ, <span class=\"hljs-title class_\">EnquiryAttributes</span>, <span class=\"hljs-title class_\">EnquiryCreationAttributes</span> };\n</code></pre>\n<h1>ë‹¨ê³„ 4: êµ¬ì„± ìš”ì†Œì—ì„œ ì„œë¹„ìŠ¤ ë° ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ì •</h1>\n<ul>\n<li>êµ¬ì„± ìš”ì†Œ êµ¬ì„± ìš”ì†ŒëŠ” ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤: ì»¨íŠ¸ë¡¤ëŸ¬ ë° ì„œë¹„ìŠ¤ ì„œë¹„ìŠ¤ëŠ” í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ê³¼ í†µì‹ í•˜ëŠ” ë° ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.</li>\n<li>ë¼ìš°íŠ¸ â€” ì»¨íŠ¸ë¡¤ëŸ¬ ë° í•´ë‹¹ ë ˆìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸ì˜ ë“±ë¡ ë°©ë²•ì„ ë“±ë¡í•©ë‹ˆë‹¤.</li>\n<li>ê³µí†µ ì„œë¹„ìŠ¤ â€”ì´ ì„œë¹„ìŠ¤ëŠ” ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ ê°„ì˜ ì¼ë°˜ ì‘ì—… ìˆ˜í–‰ì— ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.</li>\n<li>ì´ë¥¼ êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì— ì£¼ì…í•˜ê³  êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í•´ë‹¹ ë©”ì„œë“œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// src/components/enquiry/EnquiryService.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ëœ ëª¨ë¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</span>\n\n<span class=\"hljs-keyword\">import</span> {\n <span class=\"hljs-title class_\">Enquiry</span>,\n <span class=\"hljs-title class_\">EnquiryAttributes</span>,\n <span class=\"hljs-title class_\">EnquiryCreationAttributes</span>,\n} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../../database/models/Enquiry'</span>;\n<span class=\"hljs-keyword\">import</span> logger <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../../lib/logger'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">ApiError</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../../abstractions/ApiError'</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">StatusCodes</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'http-status-codes'</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">EnquiryService</span> {\n\n <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">getAll</span>(): <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-title class_\">EnquiryAttributes</span>[]> {\n  <span class=\"hljs-keyword\">try</span> {\n   <span class=\"hljs-keyword\">const</span> enquiries = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">Enquiry</span>.<span class=\"hljs-title function_\">findAll</span>();\n   <span class=\"hljs-keyword\">return</span> enquiries;\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n   logger.<span class=\"hljs-title function_\">error</span>(error);\n   <span class=\"hljs-keyword\">throw</span> error;\n  }\n }\n\n <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">getById</span>(<span class=\"hljs-attr\">id</span>: string | number): <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-title class_\">EnquiryAttributes</span>> {\n  <span class=\"hljs-keyword\">try</span> {\n   <span class=\"hljs-keyword\">const</span> enquiry = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">Enquiry</span>.<span class=\"hljs-title function_\">findByPk</span>(id);\n   <span class=\"hljs-keyword\">if</span> (!enquiry) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ApiError</span>(<span class=\"hljs-string\">'Enquiry not found'</span>, <span class=\"hljs-title class_\">StatusCodes</span>.<span class=\"hljs-property\">NOT_FOUND</span>);\n   }\n   <span class=\"hljs-keyword\">return</span> enquiry;\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n   logger.<span class=\"hljs-title function_\">error</span>(error);\n   <span class=\"hljs-keyword\">throw</span> error;\n  }\n }\n\n <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">update</span>(\n  <span class=\"hljs-attr\">id</span>: string | number,\n  <span class=\"hljs-attr\">payload</span>: <span class=\"hljs-title class_\">Partial</span>&#x3C;<span class=\"hljs-title class_\">EnquiryCreationAttributes</span>>,\n ): <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-title class_\">EnquiryAttributes</span>> {\n  <span class=\"hljs-keyword\">try</span> {\n   <span class=\"hljs-keyword\">const</span> enquiry = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">Enquiry</span>.<span class=\"hljs-title function_\">findByPk</span>(id);\n   <span class=\"hljs-keyword\">if</span> (!enquiry) {\n    <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ApiError</span>(\n     <span class=\"hljs-string\">'Enquiry not found'</span>,\n     <span class=\"hljs-title class_\">StatusCodes</span>.<span class=\"hljs-property\">NOT_FOUND</span>,\n    );\n   }\n   <span class=\"hljs-keyword\">const</span> updatedEnquiry = <span class=\"hljs-keyword\">await</span> enquiry.<span class=\"hljs-title function_\">update</span>(payload);\n   <span class=\"hljs-keyword\">return</span> updatedEnquiry;\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n   logger.<span class=\"hljs-title function_\">error</span>(error);\n   <span class=\"hljs-keyword\">throw</span> error;\n  }\n }\n\n <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">create</span>(\n  <span class=\"hljs-attr\">payload</span>: <span class=\"hljs-title class_\">EnquiryCreationAttributes</span>,\n ): <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-title class_\">EnquiryAttributes</span>> {\n  <span class=\"hljs-keyword\">try</span> {\n   <span class=\"hljs-keyword\">const</span> enquiry = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">Enquiry</span>.<span class=\"hljs-title function_\">create</span>(payload);\n   <span class=\"hljs-keyword\">return</span> enquiry;\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n   logger.<span class=\"hljs-title function_\">error</span>(error);\n   <span class=\"hljs-keyword\">throw</span> error;\n  }\n }\n\n <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">delete</span>(<span class=\"hljs-attr\">id</span>: string | number): <span class=\"hljs-title class_\">Promise</span>&#x3C;boolean> {\n  <span class=\"hljs-keyword\">try</span> {\n   <span class=\"hljs-keyword\">const</span> deletedEnquiryCount = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">Enquiry</span>.<span class=\"hljs-title function_\">destroy</span>({\n    <span class=\"hljs-attr\">where</span>: { id },\n   });\n\n   <span class=\"hljs-keyword\">return</span> !!deletedEnquiryCount;\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n   logger.<span class=\"hljs-title function_\">error</span>(error);\n   <span class=\"hljs-keyword\">throw</span> error;\n  }\n }\n}\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// src/components/enquiry/EnquiryController.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ REST APIì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë¶€ë¶„ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</span>\n\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">NextFunction</span>, <span class=\"hljs-title class_\">Request</span>, <span class=\"hljs-title class_\">Response</span>, <span class=\"hljs-title class_\">Router</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'express'</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">ReasonPhrases</span>, <span class=\"hljs-title class_\">StatusCodes</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'http-status-codes'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">BaseApi</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../BaseApi'</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">EnquiryService</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./EnquiryService'</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">EnquiryAttributes</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../../database/models/Enquiry'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">ApiError</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../../abstractions/ApiError'</span>;\n\n<span class=\"hljs-comment\">/**\n * Enquiry controller\n */</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">EnquiryController</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">BaseApi</span> {\n private <span class=\"hljs-attr\">enquiry</span>: <span class=\"hljs-title class_\">EnquiryService</span>;\n public <span class=\"hljs-attr\">basePath</span>: string = <span class=\"hljs-string\">'enquiries'</span>;\n\n <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-variable language_\">super</span>();\n  <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">enquiry</span> = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">EnquiryService</span>();\n }\n\n <span class=\"hljs-comment\">/**\n  *\n  */</span>\n public <span class=\"hljs-title function_\">routes</span>(): <span class=\"hljs-title class_\">RouteDefinition</span>[] {\n  <span class=\"hljs-keyword\">return</span> [\n   { <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">'/'</span>, <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">'get'</span>, <span class=\"hljs-attr\">handler</span>: <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">getEnquiries</span>.<span class=\"hljs-title function_\">bind</span>(<span class=\"hljs-variable language_\">this</span>) },\n   { <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">'/:id'</span>, <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">'get'</span>, <span class=\"hljs-attr\">handler</span>: <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">getEnquiry</span>.<span class=\"hljs-title function_\">bind</span>(<span class=\"hljs-variable language_\">this</span>) },\n   { <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">'/'</span>, <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">'post'</span>, <span class=\"hljs-attr\">handler</span>: <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">createEnquiry</span>.<span class=\"hljs-title function_\">bind</span>(<span class=\"hljs-variable language_\">this</span>) },\n   { <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">'/:id'</span>, <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">'put'</span>, <span class=\"hljs-attr\">handler</span>: <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">updateEnquiry</span>.<span class=\"hljs-title function_\">bind</span>(<span class=\"hljs-variable language_\">this</span>) },\n   { <span class=\"hljs-attr\">path</span>: <span class=\"hljs-string\">'/:id'</span>, <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">'delete'</span>, <span class=\"hljs-attr\">handler</span>: <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">delete</span>.<span class=\"hljs-title function_\">bind</span>(<span class=\"hljs-variable language_\">this</span>) }\n  ];\n }\n\n <span class=\"hljs-comment\">/**\n  *\n  * <span class=\"hljs-doctag\">@param</span> <span class=\"hljs-variable\">req</span>\n  * <span class=\"hljs-doctag\">@param</span> <span class=\"hljs-variable\">res</span>\n  * <span class=\"hljs-doctag\">@param</span> <span class=\"hljs-variable\">next</span>\n  */</span>\n public <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">getEnquiries</span>(\n  <span class=\"hljs-attr\">req</span>: <span class=\"hljs-title class_\">Request</span>,\n  <span class=\"hljs-attr\">res</span>: <span class=\"hljs-title class_\">Response</span>,\n  <span class=\"hljs-attr\">next</span>: <span class=\"hljs-title class_\">NextFunction</span>,\n ): <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-keyword\">void</span>> {\n  <span class=\"hljs-keyword\">try</span> {\n   <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">enquiries</span>: <span class=\"hljs-title class_\">EnquiryAttributes</span>[] =\n    <span class=\"hljs-keyword\">await</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">enquiry</span>.<span class=\"hljs-title function_\">getAll</span>();\n   res.<span class=\"hljs-property\">locals</span>.<span class=\"hljs-property\">data</span> = enquiries;\n   <span class=\"hljs-comment\">// call base class method</span>\n   <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">send</span>(res);\n  } <span class=\"hljs-keyword\">catch</span> (err) {\n   <span class=\"hljs-title function_\">next</span>(err);\n  }\n }\n\n <span class=\"hljs-comment\">// ì´í•˜ ìƒëµ</span>\n}\n</code></pre>\n<h1>ë‹¨ê³„ 5: êµ¬ì„± ìš”ì†Œë¥¼ ìœ„í•œ REST API ìƒì„±</h1>\n<p>ë¬¸ì˜: ë¬¸ì˜ëŠ” ì†ì„± ì§‘í•©ì„ ê°€ì§„ ì£¼ìš” ì—”í„°í‹°ì…ë‹ˆë‹¤.</p>\n<ul>\n<li>GET /v1/enquiries ëª¨ë“  ë¬¸ì˜ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.</li>\n<li>POST /v1/enquiries ìƒˆë¡œìš´ ë¬¸ì˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</li>\n<li>GET /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.</li>\n<li>PUT /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.</li>\n<li>DELETE /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.</li>\n</ul>\n<p>ìš°ë¦¬ëŠ” ì´ì „ì— ì •ì˜í•œ ê²½ë¡œë¥¼ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ src/routes.tsì— í•­ëª©ì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ì•„ë˜ ë§í¬ì—ì„œ ì „ì²´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆë³´ìë¥¼ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ëœ ì´ ì €ì¥ì†ŒëŠ” ë°±ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ë° íŠ¼íŠ¼í•œ ì¶œë°œì ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ í¬í•¨ëœ ì˜ ì •ë¦¬ëœ ì½”ë“œë² ì´ìŠ¤ë¡œ ê¹Šê²Œ íŒŒê³ ë“¤ë©° í•™ìŠµí•˜ê³  ë¬¸ì œ í•´ê²°ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²Œë‹¤ê°€ GitHub Actions ì›Œí¬í”Œë¡œê°€ í†µí•©ë˜ì–´ ìˆì–´ í…ŒìŠ¤íŠ¸ì™€ ë°°í¬ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•™ìŠµì„ ì‹œì‘í•˜ê±°ë‚˜ ì²« ë²ˆì§¸ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ë ¤ëŠ” ê²½ìš°ì—ë„ ìœ ìš©í•©ë‹ˆë‹¤.</p>\n<p>ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì´ ë¸”ë¡œê·¸ê°€ í•™ìŠµì— ê°€ì¹˜ê°€ ìˆë‹¤ê³  ìƒê°ë˜ë©´ ì˜ê²¬ì„ ê³µìœ í•˜ê³  í´ë©(clap)ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>\n<h1>ì¹œì ˆí•œ ì–¸ì–´ë¡œ ğŸš€</h1>\n<p>In Plain English ì»¤ë®¤ë‹ˆí‹°ì— ì°¸ì—¬í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:</p>\n<ul>\n<li>ì‘ê°€ë¥¼ clapsí•˜ê³  íŒ”ë¡œìš° í•´ì£¼ì„¸ìš” ğŸ‘ï¸</li>\n<li>íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°</li>\n<li>ë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: Stackademic | CoFeed | Venture | Cubed</li>\n<li>PlainEnglish.ioì—ì„œ ë” ë§ì€ ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”</li>\n</ul>\n</body>\n</html>\n"},"__N_SSG":true}