{"pageProps":{"post":{"title":"ë‹¨ìˆœí•œ í’€ ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ë³´ì pnpm, React, Express ë° Dockerë¥¼ ì‚¬ìš©í•œ ëª¨ë…¸ ë ˆí¬","description":"","date":"2024-05-12 23:21","slug":"2024-05-12-Creatingasimplefull-stackapplicationwithmonorepousingpnpmReactExpressandDocker","content":"\n\nëª¨ë…¸ ë ˆí¬ëŠ” ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ë³´ê´€í•˜ëŠ” ë²„ì „ ê´€ë¦¬ ì½”ë“œ ì €ì¥ì†Œì…ë‹ˆë‹¤. ì´ëŸ¬í•œ í”„ë¡œì íŠ¸ë“¤ì€ ì„œë¡œ ê´€ë ¨ì´ ìˆì„ ìˆ˜ ìˆì§€ë§Œ ì¢…ì¢… ë…¼ë¦¬ì ìœ¼ë¡œ ë…ë¦½ì ì´ë©° ë‹¤ë¥¸ íŒ€ì— ì˜í•´ ìš´ì˜ë©ë‹ˆë‹¤. ì¼ë¶€ íšŒì‚¬ëŠ” ëª¨ë“  ì½”ë“œë¥¼ ëª¨ë“  ì‚¬ëŒ ì‚¬ì´ì—ì„œ ê³µìœ ë˜ëŠ” ë‹¨ì¼ ì €ì¥ì†Œì— í˜¸ìŠ¤íŒ…í•©ë‹ˆë‹¤. ëª¨ë…¸ ë ˆí¬ëŠ” ê±°ëŒ€í•œ í¬ê¸°ì— ë„ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì €ëŠ” ì´ëŸ¬í•œ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ì „ëµì„ ë§¤ìš° ë§¤ë ¥ì ìœ¼ë¡œ ìƒê°í–ˆìŠµë‹ˆë‹¤. íŒ€ ê°„ì˜ ì¥ë²½ê³¼ ì¹¸ë§‰ì´ë¥¼ ì œê±°í•˜ì—¬ í•¨ê»˜ ì˜ ì‘ë™í•˜ëŠ” ì¼ë ¨ì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ì„¤ê³„í•˜ê³  ìœ ì§€í•˜ëŠ” ê²ƒì´ ë” ì‰¬ì›Œì§‘ë‹ˆë‹¤.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-12-Creatingasimplefull-stackapplicationwithmonorepousingpnpmReactExpressandDocker_0.png)\n\nì‹œì‘í•˜ê¸° ì „ì— ì—¬ê¸°ì„œ ë‹¤ë£° ë‚´ìš©ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì´í•´ë¥¼ ê°–ê² ìŠµë‹ˆë‹¤.\n\n\n\n- í‘œì¤€ í”„ë¡œì íŠ¸ì—ì„œëŠ” í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì™¸ë¶€ ì¢…ì†ì„±ì— ì˜ì¡´í•©ë‹ˆë‹¤.\n- ì´ëŸ¬í•œ ì¢…ì†ì„±ì€ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ê°€ ì´ë¥¼ í•„ìš”ë¡œ í•  ê²½ìš° ì—¬ëŸ¬ ë³µì‚¬ë³¸ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ì—¬ëŸ¬ íŒ¨í‚¤ì§€ê°€ ì„œë¡œ ë³´ì™„í•˜ëŠ” ê²½ìš° ì¶”ìƒí™”ê°€ ìµœì„ ì˜ ì ‘ê·¼ ë°©ì‹ì´ ì•„ë‹ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- í•œ ë²ˆì— ì—¬ëŸ¬ ì•±ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì´í•´ê´€ê³„ìë“¤ì—ê²Œ ë³´ì—¬ì£¼ëŠ” ì¦ê±°ì›€ì…ë‹ˆë‹¤.\n\nì´ ë¬¸ì„œì—ì„œëŠ” pnpm ì›Œí¬ìŠ¤í˜ì´ìŠ¤, í”„ë¡ íŠ¸ì—”ë“œì—ì„œ React, ë°±ì—”ë“œì—ì„œ ExpressJSë¥¼ ì‚¬ìš©í•˜ì—¬ í’€ ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ê²ƒì…ë‹ˆë‹¤:\n\n- pnpm ì›Œí¬ìŠ¤í˜ì´ìŠ¤: ì´ í”„ë¡œì íŠ¸ë¥¼ ì£¼ê´€í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì—ì„œ í•„ìš”í•œ ì¼ë°˜ì ì¸ ë„êµ¬ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.\n- í´ë¼ì´ì–¸íŠ¸: React ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ëª¨ë“  í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.\n- ì„œë²„: API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë…¸ì¶œí•˜ëŠ” ExpressJS ì„œë²„ê°€ ìˆìŠµë‹ˆë‹¤.\n\nì „ì œ ì¡°ê±´:\n\n\n\n- NodeJS: Node.js ì„¤ì¹˜ ë°©ë²•\n- pnpm: pnpm ì„¤ì¹˜ ë°©ë²•\n\n## pnpm ì›Œí¬ìŠ¤í˜ì´ìŠ¤\n\n- ë£¨íŠ¸ í´ë”ì— pnpm ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ìƒì„±í•˜ê¸°\n\n```js\npnpm init\n```\n\n\n\n- íŒ¨í‚¤ì§€ë¼ëŠ” í´ë”ë¥¼ ë§Œë“œì„¸ìš”. ì—¬ê¸°ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ë“¤ì–´ê°ˆ ê±°ì—ìš”.\n\n```js\nmkdir packages\n```\n\n- pnpm-workspace.yaml íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”. ì´ë¥¼ í†µí•´ pnpmì´ ì œ íŒ¨í‚¤ì§€ í´ë”ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.\n\n```js\ntouch pnpm-workspace.yaml\n```\n\n\n\n- ìš°ë¦¬ëŠ” pnpmì—ê²Œ ë‚´ íŒ¨í‚¤ì§€ê°€ ì§ì¥ì˜ ì¼ë¶€ì„ì„ ì•Œë ¤ì¤„ ê±°ì—ìš”.\n\n```js\n//pnpm-workspace.yaml\npackages:\n  - 'packages/*'\n```\n\n- ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— docker-compose.yml íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ë‚˜ì¤‘ì— ì´ì— ëŒ€í•´ ì´ì•¼ê¸°í•  ê±°ì—ìš”\n\n```js\ntouch docker-compose.yml\n```\n\n\n\n## í´ë¼ì´ì–¸íŠ¸\n\n- ìš°ë¦¬ëŠ” Viteë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì´ë¦„ì€ clientë¡œ ì§€ì •í•˜ì„¸ìš”. ì´ ì´ë¦„ì€ pnpmì´ ì´ íŒ¨í‚¤ì§€ë¥¼ ê°ì§€í•˜ëŠ” ë°©ë²•ì´ê¸° ë•Œë¬¸ì— ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n```js\n pnpm create vite\n```\n\n- í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ ëª¨ë“  ì¢…ì†ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. pnpmì´ ë£¨íŠ¸ì— node_modules í´ë”ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì— ì£¼ëª©í•˜ì„¸ìš”. ë©‹ì§€ì£ !\n\n\n\n```js\ncd client\npnpm install\npnpm run dev\n```\n\n- í´ë¼ì´ì–¸íŠ¸ìš© ë„ì»¤ íŒŒì¼\n\n```js\ntouch Dockerfile\n```\n\n## ì„œë²„\n```\n\n\n\n- ì—¬ê¸°ì— ìµìŠ¤í”„ë ˆìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì •í•  ê±°ì—ìš”. ê·¸ë¥¼ ìœ„í•´ íŒ¨í‚¤ì§€ í´ë”ë¡œ ì´ë™í•˜ì—¬ ì„œë²„ í´ë”ë¥¼ ë§Œë“¤ì–´ì•¼ í•´ìš”.\n\n```js\nmkdir server\ncd server\n```\n\n- ì„œë²„ í´ë” ì•ˆì— ìƒˆë¡œìš´ npm íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•  ê±°ì—ìš”.\n\n```js\nnpm init\n```\n\n\n\n- ê·¸ë¦¬ê³  Express í”„ë ˆì„ì›Œí¬ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”.\n\n```js\nnpm install express\n```\n\n- ì„œë²„ìš© ë„ì»¤ íŒŒì¼ë„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.\n\n```js\ntouch Dockerfile\n```\n\n\n\n- ë©‹ì ¸ìš”, ìš°ë¦¬ ì ˆë°˜ ì´ìƒì„ ì´ë¯¸ ì§€ë‚¬ì–´ìš”! ê·¸ë¦¬ê³  ì´ë¯¸ í’€ ìŠ¤íƒ ì•±ì„ ë§Œë“¤ì—ˆë‹¤ë‹ˆ ì¶•í•˜í•´ìš”(ì¡°ê¸ˆ ë” ì—°ê²°ì´ í•„ìš”í•˜ì§€ë§Œ, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ) :)\n\nì—°ê²°ì´ ì–¼ë§ˆë‚˜ ì˜ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë´ìš”!\n\n## ì„œë²„ + í´ë¼ì´ì–¸íŠ¸\n\n- ì„œë²„ì— index.js íŒŒì¼ì„ ë§Œë“¤ì–´, ì˜ ì§„í–‰ ì¤‘ì´ë¼ê³  ë§í•˜ê³  http://localhost:3000ì—ì„œ ì œê³µí•  ëª©ë¡ì´ ìˆì–´ìš”\n\n\n\n```js\ntouch index.js\n```\n\n```js\n// server/index.js\nconst express = require(\"express\");\nconst app = express();\nconst PORT = 3000;\n\napp.get(\"/\", (req, res) => {\n  res.json([\n    { name: \"John\", age: 25 },\n    { name: \"Jane\", age: 30 },\n    { name: \"Bob\", age: 35 },\n  ]);\n});\n\napp.listen(PORT, () => {\n  console.log(`I am doing great and serving at ${PORT}`);\n});\n```\n\n- íŒ¨í‚¤ì§€.jsonì—ì„œ ì„œë²„ë¥¼ ì‹œì‘í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.\n\n```js\n\"scripts\": {\n    \"dev\": \"node index.js\",\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n},\n```\n\n\n\n- ê·¸ë¦¬ê³  ë¬¼ë¡  ì‹¤í–‰í•´ ì£¼ì„¸ìš”\n\n```js\npnpm run dev\n```\n\n- ì´ì œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì´ ëª©ë¡ì„ ë°›ìŠµë‹ˆë‹¤. ViteëŠ” ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ http://localhost:3000ì„ ìì²´ URLì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·€ì°®ì€ CORS ì˜¤ë¥˜ë„ ì—†ì–´ìš” :) ì´ ì½”ë“œë¥¼ vite.config.tsì— ì¶”ê°€í•´ ë³´ì„¸ìš”.\n\n```js\nimport { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n  server: {\n    port: 8080,\n    strictPort: true,\n    host: true,\n    origin: \"http://0.0.0.0:8080\",\n    proxy: {\n      \"/api\": {\n        target: \"http://localhost:3000\",\n        changeOrigin: true,\n        rewrite: (path: string) => path.replace(/^\\/api/, \"\"),\n      },\n    },\n  },\n});\n```\n\n\n\n- vite.config.ts íŒŒì¼ì—ì„œëŠ” íŠ¹ë³„í•œ ê²ƒì´ ì—†ì–´ìš”. localhostì™€ ë„¤íŠ¸ì›Œí¬ì˜ 8080 í¬íŠ¸ì—ì„œ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë°±ì—”ë“œ APIì¸ http://localhost:3000ì„ /apië¥¼ í˜¸ì¶œí•˜ì—¬ í”„ë¡ì‹œí•©ë‹ˆë‹¤.\n- ì´ì œ App.ts íŒŒì¼ì—ì„œëŠ” /apië¥¼ í˜¸ì¶œí•˜ì—¬ http://localhost:3000ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\n\n```js\nimport { useEffect, useState } from \"react\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const [data, setData] = useState<any>(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await fetch(\"/api\");\n      const data = await response.json();\n      console.log(data);\n      setData(data);\n    };\n    fetchData();\n  }, []);\n\n  return <>{data && <pre>{JSON.stringify(data, null, 2)}</pre>}</>;\n}\n\nexport default App;\n```\n\n- ëª©ë¡ì„ ë³´ë ¤ë©´ í”„ë¡ íŠ¸ì•±ì„ ì‹œì‘í•´ì£¼ì„¸ìš”.\n\n```js\npnpm run dev\n```\n\n\n\nì´ì œ ì´ ì•±ì€ í’€ ìŠ¤íƒ ì•±ì…ë‹ˆë‹¤! ê·¸ëŸ¬ë‚˜ pnpmì—ì„œ ê°œë°œ ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê³  ì´ì „ì— ë§Œë“¤ì—ˆë˜ Docker íŒŒì¼ì„ ì‚¬ìš©í•´ ë´…ì‹œë‹¤.\n\nê°œì„  ì‚¬í•­\n\n- ì´ì œ ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ë³„ë„ë¡œ ì‹œì‘í•´ì•¼ í•˜ë¯€ë¡œ, ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë£¨íŠ¸ì— ì´ë¥¼ ì¶”ê°€í•˜ì—¬ ë‹¨ì¼ ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•©ì‹œë‹¤. package.jsonì— ë‹¤ìŒì„ ì¶”ê°€í•˜ì—¬ pnpm run appì„ í†µí•´ ëª¨ë‘ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤!\n\n```js\n\"scripts\": {\n    \"client\": \"pnpm --filter \\\"client\\\" run dev\",\n    \"server\": \"pnpm --filter \\\"server\\\" run dev\",\n    \"app\": \"pnpm run client & pnpm run server\"\n},\n```\n\n\n\n- í´ë¼ì´ì–¸íŠ¸ìš© Dockerfile\n\n```js\nFROM node:latest\n\n# ì»¨í…Œì´ë„ˆ ë‚´ì˜ ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •\nWORKDIR /app/client\n\n# í´ë¼ì´ì–¸íŠ¸ package.json ë³µì‚¬\nCOPY package.json .\n\n# ì˜ì¡´ì„± ì„¤ì¹˜ \nRUN npm install\n\n# ì½”ë“œë¥¼ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ëª¨ë‘ ë³µì‚¬\nCOPY .\n\nEXPOSE 8080\n\nCMD [\"npm\",\"run\", \"dev\"]\n```\n\n- ì„œë²„ìš© Dockerfile\n\n```js\nFROM node:latest\n\n# ì»¨í…Œì´ë„ˆ ë‚´ì˜ ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •\nWORKDIR /app/server\n\n# ì„œë²„ package.json ë³µì‚¬\nCOPY package.json .\n\n# ì˜ì¡´ì„± ì„¤ì¹˜\nRUN npm install\n\n# ì½”ë“œë¥¼ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ëª¨ë‘ ë³µì‚¬\nCOPY .\n\nEXPOSE 3000\n\nCMD [\"npm\",\"run\", \"dev\"]\n```\n\n\n\n- ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ë¡œ ì´ë™í•˜ê¸° ì „ì—, í´ë¼ì´ì–¸íŠ¸ í´ë”ì˜ vite.config.ts íŒŒì¼ì—ì„œ ì•½ê°„ì˜ ì¡°ì •ì„ í•´ë³´ê² ì–´ìš”. ì´ ì¡°ì • ë‚´ìš©ì€ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ ë•Œ 'server_c'ë¼ëŠ” ì´ë¦„ì˜ ì„œë²„ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ê¸°ë³¸ì ìœ¼ë¡œ ë¡œì»¬í˜¸ìŠ¤íŠ¸ê°€ ì•„ë‹Œ http://server_c:3000ì„ íƒ€ê²Ÿí•˜ë„ë¡ í”„ë¡ íŠ¸ì—”ë“œì— ì•Œë ¤ì£¼ëŠ” ê²ƒì´ì—ìš”.\n\n```js\nexport default defineConfig({\n  plugins: [react()],\n  server: {\n    port: 8080,\n    strictPort: true,\n    host: true,\n    origin: \"http://0.0.0.0:8080\",\n    proxy: {\n      \"/api\": {\n        target:\n          process.env.NODE_ENV === \"docker\"\n            ? \"http://server_c:3000\"\n            : \"http://localhost:3000\",\n        changeOrigin: true,\n        rewrite: (path: string) => path.replace(/^\\/api/, \"\"),\n      },\n    },\n  },\n});\n```\n\n- ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜í•œ ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë‘ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤. vite.config.ts íŒŒì¼ì—ì„œ ì œê³µí•˜ëŠ” NODE_ENV=docker í™˜ê²½ì„ ì£¼ì˜í•´ì£¼ì„¸ìš”.\n\n```yaml\nservices:\n  client:\n    build: ./packages/client\n    container_name: client_c\n    ports:\n      - \"8080:8080\"\n    environment:\n      - NODE_ENV=docker\n\n  server:\n    build: ./packages/server\n    container_name: server_c\n    ports:\n      - \"3000:3000\"\n```\n\n\n\nì—¬ê¸°ì„œ ì¬ë°ŒëŠ” ë§ˆí¬ë‹¤ìš´ í‘œ í˜•ì‹ì„ ì‚¬ìš©í•œ ì½”ë“œê°€ ìˆì–´ìš”. ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  ë„ì»¤ í™˜ê²½ì—ì„œ ì•±ì„ ì‹œì‘í•˜ë ¤ë©´ docker-compose íŒŒì¼ì„ ì‹¤í–‰í•´ë³´ì„¸ìš”!\n\n```js\ndocker-compose up\n```\n\në” ë§ì€ ì½”ë“œë“¤ì€ ì—¬ê¸°ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”. ê³„ì† ë°°ìš°ê³  ìˆì–´ìš”.\n\n# Stackademic ğŸ“\n\n\n\nëê¹Œì§€ ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ë– ë‚˜ì‹œê¸° ì „ì—:\n\n- ê¸€ì„ ì¶”ì²œí•˜ê³  ì‘ê°€ë¥¼ íŒ”ë¡œìš°í•´ ì£¼ì‹œëŠ” ê²ƒì„ ê³ ë ¤í•´ì£¼ì„¸ìš”! ğŸ‘\n- ìš°ë¦¬ë¥¼ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”: X | LinkedIn | YouTube | Discord\n- ë‹¤ë¥¸ í”Œë«í¼ë„ ë°©ë¬¸í•´ë³´ì„¸ìš”: In Plain English | CoFeed | Venture | Cubed\n- ì•Œê³ ë¦¬ì¦˜ ì½˜í…ì¸ ì™€ ì‹¸ìš°ëŠ” ë¸”ë¡œê¹… í”Œë«í¼ì— ì§€ì¹˜ì…¨ë‚˜ìš”? Differë¥¼ ì‹œë„í•´ë³´ì„¸ìš”\n- Stackademic.comì—ì„œ ë” ë§ì€ ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”","ogImage":{"url":"/assets/img/2024-05-12-Creatingasimplefull-stackapplicationwithmonorepousingpnpmReactExpressandDocker_0.png"},"coverImage":"/assets/img/2024-05-12-Creatingasimplefull-stackapplicationwithmonorepousingpnpmReactExpressandDocker_0.png","tag":["Tech"],"readingTime":7},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>ëª¨ë…¸ ë ˆí¬ëŠ” ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ë³´ê´€í•˜ëŠ” ë²„ì „ ê´€ë¦¬ ì½”ë“œ ì €ì¥ì†Œì…ë‹ˆë‹¤. ì´ëŸ¬í•œ í”„ë¡œì íŠ¸ë“¤ì€ ì„œë¡œ ê´€ë ¨ì´ ìˆì„ ìˆ˜ ìˆì§€ë§Œ ì¢…ì¢… ë…¼ë¦¬ì ìœ¼ë¡œ ë…ë¦½ì ì´ë©° ë‹¤ë¥¸ íŒ€ì— ì˜í•´ ìš´ì˜ë©ë‹ˆë‹¤. ì¼ë¶€ íšŒì‚¬ëŠ” ëª¨ë“  ì½”ë“œë¥¼ ëª¨ë“  ì‚¬ëŒ ì‚¬ì´ì—ì„œ ê³µìœ ë˜ëŠ” ë‹¨ì¼ ì €ì¥ì†Œì— í˜¸ìŠ¤íŒ…í•©ë‹ˆë‹¤. ëª¨ë…¸ ë ˆí¬ëŠ” ê±°ëŒ€í•œ í¬ê¸°ì— ë„ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì €ëŠ” ì´ëŸ¬í•œ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ì „ëµì„ ë§¤ìš° ë§¤ë ¥ì ìœ¼ë¡œ ìƒê°í–ˆìŠµë‹ˆë‹¤. íŒ€ ê°„ì˜ ì¥ë²½ê³¼ ì¹¸ë§‰ì´ë¥¼ ì œê±°í•˜ì—¬ í•¨ê»˜ ì˜ ì‘ë™í•˜ëŠ” ì¼ë ¨ì˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ì„¤ê³„í•˜ê³  ìœ ì§€í•˜ëŠ” ê²ƒì´ ë” ì‰¬ì›Œì§‘ë‹ˆë‹¤.</p>\n<p><img src=\"/assets/img/2024-05-12-Creatingasimplefull-stackapplicationwithmonorepousingpnpmReactExpressandDocker_0.png\" alt=\"ì´ë¯¸ì§€\"></p>\n<p>ì‹œì‘í•˜ê¸° ì „ì— ì—¬ê¸°ì„œ ë‹¤ë£° ë‚´ìš©ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì´í•´ë¥¼ ê°–ê² ìŠµë‹ˆë‹¤.</p>\n<ul>\n<li>í‘œì¤€ í”„ë¡œì íŠ¸ì—ì„œëŠ” í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ì‚¬ìš©ë˜ëŠ” ì™¸ë¶€ ì¢…ì†ì„±ì— ì˜ì¡´í•©ë‹ˆë‹¤.</li>\n<li>ì´ëŸ¬í•œ ì¢…ì†ì„±ì€ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ê°€ ì´ë¥¼ í•„ìš”ë¡œ í•  ê²½ìš° ì—¬ëŸ¬ ë³µì‚¬ë³¸ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>ì—¬ëŸ¬ íŒ¨í‚¤ì§€ê°€ ì„œë¡œ ë³´ì™„í•˜ëŠ” ê²½ìš° ì¶”ìƒí™”ê°€ ìµœì„ ì˜ ì ‘ê·¼ ë°©ì‹ì´ ì•„ë‹ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>í•œ ë²ˆì— ì—¬ëŸ¬ ì•±ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì´í•´ê´€ê³„ìë“¤ì—ê²Œ ë³´ì—¬ì£¼ëŠ” ì¦ê±°ì›€ì…ë‹ˆë‹¤.</li>\n</ul>\n<p>ì´ ë¬¸ì„œì—ì„œëŠ” pnpm ì›Œí¬ìŠ¤í˜ì´ìŠ¤, í”„ë¡ íŠ¸ì—”ë“œì—ì„œ React, ë°±ì—”ë“œì—ì„œ ExpressJSë¥¼ ì‚¬ìš©í•˜ì—¬ í’€ ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•  ê²ƒì…ë‹ˆë‹¤:</p>\n<ul>\n<li>pnpm ì›Œí¬ìŠ¤í˜ì´ìŠ¤: ì´ í”„ë¡œì íŠ¸ë¥¼ ì£¼ê´€í•˜ê³  í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì—ì„œ í•„ìš”í•œ ì¼ë°˜ì ì¸ ë„êµ¬ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.</li>\n<li>í´ë¼ì´ì–¸íŠ¸: React ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ëª¨ë“  í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œë¥¼ í¬í•¨í•©ë‹ˆë‹¤.</li>\n<li>ì„œë²„: API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë…¸ì¶œí•˜ëŠ” ExpressJS ì„œë²„ê°€ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<p>ì „ì œ ì¡°ê±´:</p>\n<ul>\n<li>NodeJS: Node.js ì„¤ì¹˜ ë°©ë²•</li>\n<li>pnpm: pnpm ì„¤ì¹˜ ë°©ë²•</li>\n</ul>\n<h2>pnpm ì›Œí¬ìŠ¤í˜ì´ìŠ¤</h2>\n<ul>\n<li>ë£¨íŠ¸ í´ë”ì— pnpm ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ìƒì„±í•˜ê¸°</li>\n</ul>\n<pre><code class=\"hljs language-js\">pnpm init\n</code></pre>\n<ul>\n<li>íŒ¨í‚¤ì§€ë¼ëŠ” í´ë”ë¥¼ ë§Œë“œì„¸ìš”. ì—¬ê¸°ì—ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ë“¤ì–´ê°ˆ ê±°ì—ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\">mkdir packages\n</code></pre>\n<ul>\n<li>pnpm-workspace.yaml íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”. ì´ë¥¼ í†µí•´ pnpmì´ ì œ íŒ¨í‚¤ì§€ í´ë”ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\">touch pnpm-workspace.<span class=\"hljs-property\">yaml</span>\n</code></pre>\n<ul>\n<li>ìš°ë¦¬ëŠ” pnpmì—ê²Œ ë‚´ íŒ¨í‚¤ì§€ê°€ ì§ì¥ì˜ ì¼ë¶€ì„ì„ ì•Œë ¤ì¤„ ê±°ì—ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">//pnpm-workspace.yaml</span>\n<span class=\"hljs-attr\">packages</span>:\n  - <span class=\"hljs-string\">'packages/*'</span>\n</code></pre>\n<ul>\n<li>ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— docker-compose.yml íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ë‚˜ì¤‘ì— ì´ì— ëŒ€í•´ ì´ì•¼ê¸°í•  ê±°ì—ìš”</li>\n</ul>\n<pre><code class=\"hljs language-js\">touch docker-compose.<span class=\"hljs-property\">yml</span>\n</code></pre>\n<h2>í´ë¼ì´ì–¸íŠ¸</h2>\n<ul>\n<li>ìš°ë¦¬ëŠ” Viteë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤. í”„ë¡œì íŠ¸ ì´ë¦„ì€ clientë¡œ ì§€ì •í•˜ì„¸ìš”. ì´ ì´ë¦„ì€ pnpmì´ ì´ íŒ¨í‚¤ì§€ë¥¼ ê°ì§€í•˜ëŠ” ë°©ë²•ì´ê¸° ë•Œë¬¸ì— ì¤‘ìš”í•©ë‹ˆë‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-js\"> pnpm create vite\n</code></pre>\n<ul>\n<li>í´ë¼ì´ì–¸íŠ¸ë¥¼ ìœ„í•œ ëª¨ë“  ì¢…ì†ì„±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. pnpmì´ ë£¨íŠ¸ì— node_modules í´ë”ë¥¼ ê°€ì§€ê³  ìˆë‹¤ëŠ” ê²ƒì— ì£¼ëª©í•˜ì„¸ìš”. ë©‹ì§€ì£ !</li>\n</ul>\n<pre><code class=\"hljs language-js\">cd client\npnpm install\npnpm run dev\n</code></pre>\n<ul>\n<li>í´ë¼ì´ì–¸íŠ¸ìš© ë„ì»¤ íŒŒì¼</li>\n</ul>\n<pre><code class=\"hljs language-js\">touch <span class=\"hljs-title class_\">Dockerfile</span>\n</code></pre>\n<h2>ì„œë²„</h2>\n<pre><code>\n\n\n- ì—¬ê¸°ì— ìµìŠ¤í”„ë ˆìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì •í•  ê±°ì—ìš”. ê·¸ë¥¼ ìœ„í•´ íŒ¨í‚¤ì§€ í´ë”ë¡œ ì´ë™í•˜ì—¬ ì„œë²„ í´ë”ë¥¼ ë§Œë“¤ì–´ì•¼ í•´ìš”.\n\n```js\nmkdir server\ncd server\n</code></pre>\n<ul>\n<li>ì„œë²„ í´ë” ì•ˆì— ìƒˆë¡œìš´ npm íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•  ê±°ì—ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\">npm init\n</code></pre>\n<ul>\n<li>ê·¸ë¦¬ê³  Express í”„ë ˆì„ì›Œí¬ë¥¼ ì„¤ì¹˜í•˜ì„¸ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\">npm install express\n</code></pre>\n<ul>\n<li>ì„œë²„ìš© ë„ì»¤ íŒŒì¼ë„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\">touch <span class=\"hljs-title class_\">Dockerfile</span>\n</code></pre>\n<ul>\n<li>ë©‹ì ¸ìš”, ìš°ë¦¬ ì ˆë°˜ ì´ìƒì„ ì´ë¯¸ ì§€ë‚¬ì–´ìš”! ê·¸ë¦¬ê³  ì´ë¯¸ í’€ ìŠ¤íƒ ì•±ì„ ë§Œë“¤ì—ˆë‹¤ë‹ˆ ì¶•í•˜í•´ìš”(ì¡°ê¸ˆ ë” ì—°ê²°ì´ í•„ìš”í•˜ì§€ë§Œ, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ) :)</li>\n</ul>\n<p>ì—°ê²°ì´ ì–¼ë§ˆë‚˜ ì˜ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë´ìš”!</p>\n<h2>ì„œë²„ + í´ë¼ì´ì–¸íŠ¸</h2>\n<ul>\n<li>ì„œë²„ì— index.js íŒŒì¼ì„ ë§Œë“¤ì–´, ì˜ ì§„í–‰ ì¤‘ì´ë¼ê³  ë§í•˜ê³  <a href=\"http://localhost:3000%EC%97%90%EC%84%9C\" rel=\"nofollow\" target=\"_blank\">http://localhost:3000ì—ì„œ</a> ì œê³µí•  ëª©ë¡ì´ ìˆì–´ìš”</li>\n</ul>\n<pre><code class=\"hljs language-js\">touch index.<span class=\"hljs-property\">js</span>\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/index.js</span>\n<span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">\"express\"</span>);\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">PORT</span> = <span class=\"hljs-number\">3000</span>;\n\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">\"/\"</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =></span> {\n  res.<span class=\"hljs-title function_\">json</span>([\n    { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">\"John\"</span>, <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">25</span> },\n    { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">\"Jane\"</span>, <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">30</span> },\n    { <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">\"Bob\"</span>, <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">35</span> },\n  ]);\n});\n\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-variable constant_\">PORT</span>, <span class=\"hljs-function\">() =></span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`I am doing great and serving at <span class=\"hljs-subst\">${PORT}</span>`</span>);\n});\n</code></pre>\n<ul>\n<li>íŒ¨í‚¤ì§€.jsonì—ì„œ ì„œë²„ë¥¼ ì‹œì‘í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-string\">\"scripts\"</span>: {\n    <span class=\"hljs-string\">\"dev\"</span>: <span class=\"hljs-string\">\"node index.js\"</span>,\n    <span class=\"hljs-string\">\"test\"</span>: <span class=\"hljs-string\">\"echo \\\"Error: no test specified\\\" &#x26;&#x26; exit 1\"</span>\n},\n</code></pre>\n<ul>\n<li>ê·¸ë¦¬ê³  ë¬¼ë¡  ì‹¤í–‰í•´ ì£¼ì„¸ìš”</li>\n</ul>\n<pre><code class=\"hljs language-js\">pnpm run dev\n</code></pre>\n<ul>\n<li>ì´ì œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì´ ëª©ë¡ì„ ë°›ìŠµë‹ˆë‹¤. ViteëŠ” ì´ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ <a href=\"http://localhost:3000%EC%9D%84\" rel=\"nofollow\" target=\"_blank\">http://localhost:3000ì„</a> ìì²´ URLì²˜ëŸ¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·€ì°®ì€ CORS ì˜¤ë¥˜ë„ ì—†ì–´ìš” :) ì´ ì½”ë“œë¥¼ vite.config.tsì— ì¶”ê°€í•´ ë³´ì„¸ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { defineConfig } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"vite\"</span>;\n<span class=\"hljs-keyword\">import</span> react <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"@vitejs/plugin-react\"</span>;\n\n<span class=\"hljs-comment\">// https://vitejs.dev/config/</span>\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">defineConfig</span>({\n  <span class=\"hljs-attr\">plugins</span>: [<span class=\"hljs-title function_\">react</span>()],\n  <span class=\"hljs-attr\">server</span>: {\n    <span class=\"hljs-attr\">port</span>: <span class=\"hljs-number\">8080</span>,\n    <span class=\"hljs-attr\">strictPort</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-attr\">host</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-string\">\"http://0.0.0.0:8080\"</span>,\n    <span class=\"hljs-attr\">proxy</span>: {\n      <span class=\"hljs-string\">\"/api\"</span>: {\n        <span class=\"hljs-attr\">target</span>: <span class=\"hljs-string\">\"http://localhost:3000\"</span>,\n        <span class=\"hljs-attr\">changeOrigin</span>: <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-attr\">rewrite</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">path: string</span>) =></span> path.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/^\\/api/</span>, <span class=\"hljs-string\">\"\"</span>),\n      },\n    },\n  },\n});\n</code></pre>\n<ul>\n<li>vite.config.ts íŒŒì¼ì—ì„œëŠ” íŠ¹ë³„í•œ ê²ƒì´ ì—†ì–´ìš”. localhostì™€ ë„¤íŠ¸ì›Œí¬ì˜ 8080 í¬íŠ¸ì—ì„œ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë°±ì—”ë“œ APIì¸ <a href=\"http://localhost:3000%EC%9D%84\" rel=\"nofollow\" target=\"_blank\">http://localhost:3000ì„</a> /apië¥¼ í˜¸ì¶œí•˜ì—¬ í”„ë¡ì‹œí•©ë‹ˆë‹¤.</li>\n<li>ì´ì œ App.ts íŒŒì¼ì—ì„œëŠ” /apië¥¼ í˜¸ì¶œí•˜ì—¬ <a href=\"http://localhost:3000%EC%97%90%EC%84%9C\" rel=\"nofollow\" target=\"_blank\">http://localhost:3000ì—ì„œ</a> ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { useEffect, useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">\"./App.css\"</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [data, setData] = useState&#x3C;any>(<span class=\"hljs-literal\">null</span>);\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">fetchData</span> = <span class=\"hljs-keyword\">async</span> (<span class=\"hljs-params\"></span>) => {\n      <span class=\"hljs-keyword\">const</span> response = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">\"/api\"</span>);\n      <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> response.<span class=\"hljs-title function_\">json</span>();\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(data);\n      <span class=\"hljs-title function_\">setData</span>(data);\n    };\n    <span class=\"hljs-title function_\">fetchData</span>();\n  }, []);\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;></span>{data &#x26;&#x26; <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">pre</span>></span>{JSON.stringify(data, null, 2)}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">pre</span>></span>}<span class=\"hljs-tag\">&#x3C;/></span></span>;\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">App</span>;\n</code></pre>\n<ul>\n<li>ëª©ë¡ì„ ë³´ë ¤ë©´ í”„ë¡ íŠ¸ì•±ì„ ì‹œì‘í•´ì£¼ì„¸ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\">pnpm run dev\n</code></pre>\n<p>ì´ì œ ì´ ì•±ì€ í’€ ìŠ¤íƒ ì•±ì…ë‹ˆë‹¤! ê·¸ëŸ¬ë‚˜ pnpmì—ì„œ ê°œë°œ ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê³  ì´ì „ì— ë§Œë“¤ì—ˆë˜ Docker íŒŒì¼ì„ ì‚¬ìš©í•´ ë´…ì‹œë‹¤.</p>\n<p>ê°œì„  ì‚¬í•­</p>\n<ul>\n<li>ì´ì œ ë°±ì—”ë“œì™€ í”„ë¡ íŠ¸ì—”ë“œë¥¼ ë³„ë„ë¡œ ì‹œì‘í•´ì•¼ í•˜ë¯€ë¡œ, ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ë£¨íŠ¸ì— ì´ë¥¼ ì¶”ê°€í•˜ì—¬ ë‹¨ì¼ ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•©ì‹œë‹¤. package.jsonì— ë‹¤ìŒì„ ì¶”ê°€í•˜ì—¬ pnpm run appì„ í†µí•´ ëª¨ë‘ ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤!</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-string\">\"scripts\"</span>: {\n    <span class=\"hljs-string\">\"client\"</span>: <span class=\"hljs-string\">\"pnpm --filter \\\"client\\\" run dev\"</span>,\n    <span class=\"hljs-string\">\"server\"</span>: <span class=\"hljs-string\">\"pnpm --filter \\\"server\\\" run dev\"</span>,\n    <span class=\"hljs-string\">\"app\"</span>: <span class=\"hljs-string\">\"pnpm run client &#x26; pnpm run server\"</span>\n},\n</code></pre>\n<ul>\n<li>í´ë¼ì´ì–¸íŠ¸ìš© Dockerfile</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable constant_\">FROM</span> <span class=\"hljs-attr\">node</span>:latest\n\n# ì»¨í…Œì´ë„ˆ ë‚´ì˜ ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •\n<span class=\"hljs-variable constant_\">WORKDIR</span> /app/client\n\n# í´ë¼ì´ì–¸íŠ¸ package.<span class=\"hljs-property\">json</span> ë³µì‚¬\n<span class=\"hljs-variable constant_\">COPY</span> package.<span class=\"hljs-property\">json</span> .\n\n# ì˜ì¡´ì„± ì„¤ì¹˜ \n<span class=\"hljs-variable constant_\">RUN</span> npm install\n\n# ì½”ë“œë¥¼ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ëª¨ë‘ ë³µì‚¬\n<span class=\"hljs-variable constant_\">COPY</span> .\n\n<span class=\"hljs-variable constant_\">EXPOSE</span> <span class=\"hljs-number\">8080</span>\n\n<span class=\"hljs-variable constant_\">CMD</span> [<span class=\"hljs-string\">\"npm\"</span>,<span class=\"hljs-string\">\"run\"</span>, <span class=\"hljs-string\">\"dev\"</span>]\n</code></pre>\n<ul>\n<li>ì„œë²„ìš© Dockerfile</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable constant_\">FROM</span> <span class=\"hljs-attr\">node</span>:latest\n\n# ì»¨í…Œì´ë„ˆ ë‚´ì˜ ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •\n<span class=\"hljs-variable constant_\">WORKDIR</span> /app/server\n\n# ì„œë²„ package.<span class=\"hljs-property\">json</span> ë³µì‚¬\n<span class=\"hljs-variable constant_\">COPY</span> package.<span class=\"hljs-property\">json</span> .\n\n# ì˜ì¡´ì„± ì„¤ì¹˜\n<span class=\"hljs-variable constant_\">RUN</span> npm install\n\n# ì½”ë“œë¥¼ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ëª¨ë‘ ë³µì‚¬\n<span class=\"hljs-variable constant_\">COPY</span> .\n\n<span class=\"hljs-variable constant_\">EXPOSE</span> <span class=\"hljs-number\">3000</span>\n\n<span class=\"hljs-variable constant_\">CMD</span> [<span class=\"hljs-string\">\"npm\"</span>,<span class=\"hljs-string\">\"run\"</span>, <span class=\"hljs-string\">\"dev\"</span>]\n</code></pre>\n<ul>\n<li>ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ë¡œ ì´ë™í•˜ê¸° ì „ì—, í´ë¼ì´ì–¸íŠ¸ í´ë”ì˜ vite.config.ts íŒŒì¼ì—ì„œ ì•½ê°„ì˜ ì¡°ì •ì„ í•´ë³´ê² ì–´ìš”. ì´ ì¡°ì • ë‚´ìš©ì€ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ ë•Œ 'server_c'ë¼ëŠ” ì´ë¦„ì˜ ì„œë²„ ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ê¸°ë³¸ì ìœ¼ë¡œ ë¡œì»¬í˜¸ìŠ¤íŠ¸ê°€ ì•„ë‹Œ http://server_c:3000ì„ íƒ€ê²Ÿí•˜ë„ë¡ í”„ë¡ íŠ¸ì—”ë“œì— ì•Œë ¤ì£¼ëŠ” ê²ƒì´ì—ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">defineConfig</span>({\n  <span class=\"hljs-attr\">plugins</span>: [<span class=\"hljs-title function_\">react</span>()],\n  <span class=\"hljs-attr\">server</span>: {\n    <span class=\"hljs-attr\">port</span>: <span class=\"hljs-number\">8080</span>,\n    <span class=\"hljs-attr\">strictPort</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-attr\">host</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-string\">\"http://0.0.0.0:8080\"</span>,\n    <span class=\"hljs-attr\">proxy</span>: {\n      <span class=\"hljs-string\">\"/api\"</span>: {\n        <span class=\"hljs-attr\">target</span>:\n          process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">NODE_ENV</span> === <span class=\"hljs-string\">\"docker\"</span>\n            ? <span class=\"hljs-string\">\"http://server_c:3000\"</span>\n            : <span class=\"hljs-string\">\"http://localhost:3000\"</span>,\n        <span class=\"hljs-attr\">changeOrigin</span>: <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-attr\">rewrite</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">path: string</span>) =></span> path.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/^\\/api/</span>, <span class=\"hljs-string\">\"\"</span>),\n      },\n    },\n  },\n});\n</code></pre>\n<ul>\n<li>ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜í•œ ë„ì»¤ ì»´í¬ì¦ˆ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ë‘ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤. vite.config.ts íŒŒì¼ì—ì„œ ì œê³µí•˜ëŠ” NODE_ENV=docker í™˜ê²½ì„ ì£¼ì˜í•´ì£¼ì„¸ìš”.</li>\n</ul>\n<pre><code class=\"hljs language-yaml\"><span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">client:</span>\n    <span class=\"hljs-attr\">build:</span> <span class=\"hljs-string\">./packages/client</span>\n    <span class=\"hljs-attr\">container_name:</span> <span class=\"hljs-string\">client_c</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">\"8080:8080\"</span>\n    <span class=\"hljs-attr\">environment:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">NODE_ENV=docker</span>\n\n  <span class=\"hljs-attr\">server:</span>\n    <span class=\"hljs-attr\">build:</span> <span class=\"hljs-string\">./packages/server</span>\n    <span class=\"hljs-attr\">container_name:</span> <span class=\"hljs-string\">server_c</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">\"3000:3000\"</span>\n</code></pre>\n<p>ì—¬ê¸°ì„œ ì¬ë°ŒëŠ” ë§ˆí¬ë‹¤ìš´ í‘œ í˜•ì‹ì„ ì‚¬ìš©í•œ ì½”ë“œê°€ ìˆì–´ìš”. ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•˜ê³  ë„ì»¤ í™˜ê²½ì—ì„œ ì•±ì„ ì‹œì‘í•˜ë ¤ë©´ docker-compose íŒŒì¼ì„ ì‹¤í–‰í•´ë³´ì„¸ìš”!</p>\n<pre><code class=\"hljs language-js\">docker-compose up\n</code></pre>\n<p>ë” ë§ì€ ì½”ë“œë“¤ì€ ì—¬ê¸°ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”. ê³„ì† ë°°ìš°ê³  ìˆì–´ìš”.</p>\n<h1>Stackademic ğŸ“</h1>\n<p>ëê¹Œì§€ ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ë– ë‚˜ì‹œê¸° ì „ì—:</p>\n<ul>\n<li>ê¸€ì„ ì¶”ì²œí•˜ê³  ì‘ê°€ë¥¼ íŒ”ë¡œìš°í•´ ì£¼ì‹œëŠ” ê²ƒì„ ê³ ë ¤í•´ì£¼ì„¸ìš”! ğŸ‘</li>\n<li>ìš°ë¦¬ë¥¼ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”: X | LinkedIn | YouTube | Discord</li>\n<li>ë‹¤ë¥¸ í”Œë«í¼ë„ ë°©ë¬¸í•´ë³´ì„¸ìš”: In Plain English | CoFeed | Venture | Cubed</li>\n<li>ì•Œê³ ë¦¬ì¦˜ ì½˜í…ì¸ ì™€ ì‹¸ìš°ëŠ” ë¸”ë¡œê¹… í”Œë«í¼ì— ì§€ì¹˜ì…¨ë‚˜ìš”? Differë¥¼ ì‹œë„í•´ë³´ì„¸ìš”</li>\n<li>Stackademic.comì—ì„œ ë” ë§ì€ ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”</li>\n</ul>\n</body>\n</html>\n"},"__N_SSG":true}