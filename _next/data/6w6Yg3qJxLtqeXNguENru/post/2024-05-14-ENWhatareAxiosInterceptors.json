{"pageProps":{"post":{"title":"ν•κµ­μ–΄ Axios μΈν„°μ…‰ν„°λ€ λ¬΄μ—‡μΈκ°€μ”","description":"","date":"2024-05-14 12:08","slug":"2024-05-14-ENWhatareAxiosInterceptors","content":"\n\n![Axios Interceptors](/assets/img/2024-05-14-ENWhatareAxiosInterceptors_0.png)\n\nμΈν„°μ…‰ν„°λ€ λ¬΄μ—‡μΈκ°€μ”?\nμΈν„°μ…‰ν„°λ” ν”„λ΅κ·Έλ¨μ κΈ°λ¥μ„ ν™•μ¥ν•κ±°λ‚ μμ •ν•λ” λ° μ‚¬μ©λλ” λ””μμΈ ν¨ν„΄μ…λ‹λ‹¤. Axiosμ—μ„ μΈν„°μ…‰ν„°λ” HTTP μ”μ²­κ³Ό μ‘λ‹µμ„ μ²λ¦¬ν•λ” λ° μ‚¬μ©λλ” νΉλ³„ν• ν•¨μμ…λ‹λ‹¤. μ”μ²­ μΈν„°μ…‰ν„°λ¥Ό μ‚¬μ©ν•λ©΄ μ”μ²­μ„ λ³΄λ‚΄κΈ° μ „μ— μ‘μ—…μ„ μν–‰ν•  μ μκ³ , μ‘λ‹µ μΈν„°μ…‰ν„°λ” μ„λ²„μ—μ„ λ°ν™λ μ‘λ‹µμ— μ‘μ—…μ„ μν–‰ν•  μ μμµλ‹λ‹¤.\n\nAxios μΈν„°μ…‰ν„°λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” μ΄μ λ” λ¬΄μ—‡μΈκ°€μ”?\n\n- μ¬μ‚¬μ©μ„±κ³Ό λ¨λ“μ„±.\n- μ¤λ¥ μ²λ¦¬ μ©μ΄μ„±.\n- λ³΄μ• μ μ–΄ λ° μΈκ°€ μ ν¨μ„± κ²€μ‚¬ ν”„λ΅μ„Έμ¤ μ©μ΄μ„±.\n- λ„¤νΈμ›ν¬ λ¬Έμ  μ²λ¦¬.\n- μ‚¬μ© νΈμμ„±κ³Ό μ μ—°μ„±.\n- μ„±λ¥ λ° μµμ ν™”.\n\n\n\nAxios Interceptorsμ μ‚¬μ©λ²•\nκ°„λ‹¨ν• μ‚¬μ©λ²•μ„ κ°€μ§€κ³  μκ³  Axios λ‚΄μ—μ„ μ¶”κ°€ μ„¤μ •μ΄ ν•„μ”ν•μ§€ μ•μ•„ μ¥μ μ„ μ κ³µν•©λ‹λ‹¤.\n\n```js\nconst axiosInstance = axios.create({\n  baseURL: 'https://api.example.com',\n  headers: {\n    'Content-Type': 'application/json',\n    'Authorization': null\n  }\n});\n\naxiosInstance.interceptors.request.use(\n  function (config) {\n    // μ”μ²­μ„ λ³΄λ‚΄κΈ° μ „ μν–‰ν•  μ‘μ—…\n    console.log('μ”μ²­μ„ λ³΄λƒ…λ‹λ‹¤:', config);\n    \n    // μλ¥Ό λ“¤μ–΄, κ° μ”μ²­μ— μ„Έμ… μ‹λ³„μλ¥Ό μ¶”κ°€ν•  μ μμµλ‹λ‹¤.\n    const accessToken = localStorage.getItem('accessToken');\n    if (accessToken) {\n      config.headers.Authorization = `Bearer ${accessToken}`;\n    }\n\n    return config;\n  }, \n  function (error) {\n    // μ”μ²­ μ¤λ¥ λ°μƒ μ‹ μν–‰ν•  μ‘μ—…\n    console.error('μ”μ²­ μ¤λ¥:', error);\n    return Promise.reject(error);\n  }\n);\n\naxiosInstance.interceptors.response.use(\n  function (response) {\n    // μ‘λ‹µμ΄ μ„±κ³µν–μ„ λ• μν–‰ν•  μ‘μ—…\n    console.log('μ‘λ‹µ:', response.data);\n    return response;\n  },\n  function (error) {\n    // μ‘λ‹µ μ¤λ¥ λ°μƒ μ‹ μν–‰ν•  μ‘μ—…\n    console.error('μ‘λ‹µ μ¤λ¥:', error);\n    \n    // μλ¥Ό λ“¤μ–΄, 401 (Unauthorized) μ¤λ¥ λ°μƒ μ‹ μ„Έμ…μ΄ λ§λ£λ κ²ƒμΌλ΅ κ°€μ •ν•  μ μμµλ‹λ‹¤.\n    if (error.response.status === 401) {\n      // μ„Έμ… μƒλ΅ κ³ μΉ¨μ΄λ‚ λ΅κ·ΈμΈ νμ΄μ§€λ΅ λ¦¬λ‹¤μ΄λ ‰νΈν•λ” λ“±μ μ‘μ—… μν–‰ κ°€λ¥\n      console.log('μ„Έμ…μ΄ λ§λ£λμ—μµλ‹λ‹¤. λ¦¬λ‹¤μ΄λ ‰νΈ μ¤‘...');\n      // μλ¥Ό λ“¤μ–΄, μ‚¬μ©μλ¥Ό λ΅κ·ΈμΈ νμ΄μ§€λ΅ λ¦¬λ‹¤μ΄λ ‰νΈ:\n    }\n    return Promise.reject(error);\n  }\n);\n\n// μμ‹ μ”μ²­\n\naxiosInstance.get('/data')\n  .then(response => {\n    console.log('μ‘λ‹µ:', response.data);\n  })\n  .catch(error => {\n    console.error('μ¤λ¥:', error);\n  });\n\naxiosInstance.post('/post-data', {\n  // μ „μ†΅ν•  λ°μ΄ν„°\n  firstName: 'John',\n  lastName: 'Doe'\n})\n.then(response => {\n  console.log('μ‘λ‹µ:', response.data);\n})\n.catch(error => {\n  console.error('μ¤λ¥:', error);\n});\n```\n\nπ€π€ μ΄ μμ‹μ²λΌ λ“¤μ–΄μ¤λ” μ¤λ¥λ¥Ό μ΅μ•„ μ‚¬μ©μμ—κ² λ°ν™ν•κ±°λ‚ νμ΄μ§€ κ°„μ— λ¦¬λ‹¤μ΄λ ‰νΈν•  μ μμµλ‹λ‹¤.\nμ½μ†”μ—μ„ κ° μ”μ²­μ μ¤λ¥μ™€ λ³Έλ¬Έμ„ μ‰½κ² λ³΄κ³  μ΅°μΉν•  μ μμµλ‹λ‹¤.\n\n<img src=\"/assets/img/2024-05-14-ENWhatareAxiosInterceptors_1.png\" />\n\n\n\n### μ΄μ „ κ²μ‹λ¬Ό","ogImage":{"url":"/assets/img/2024-05-14-ENWhatareAxiosInterceptors_0.png"},"coverImage":"/assets/img/2024-05-14-ENWhatareAxiosInterceptors_0.png","tag":["Tech"],"readingTime":3},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p><img src=\"/assets/img/2024-05-14-ENWhatareAxiosInterceptors_0.png\" alt=\"Axios Interceptors\"></p>\n<p>μΈν„°μ…‰ν„°λ€ λ¬΄μ—‡μΈκ°€μ”?\nμΈν„°μ…‰ν„°λ” ν”„λ΅κ·Έλ¨μ κΈ°λ¥μ„ ν™•μ¥ν•κ±°λ‚ μμ •ν•λ” λ° μ‚¬μ©λλ” λ””μμΈ ν¨ν„΄μ…λ‹λ‹¤. Axiosμ—μ„ μΈν„°μ…‰ν„°λ” HTTP μ”μ²­κ³Ό μ‘λ‹µμ„ μ²λ¦¬ν•λ” λ° μ‚¬μ©λλ” νΉλ³„ν• ν•¨μμ…λ‹λ‹¤. μ”μ²­ μΈν„°μ…‰ν„°λ¥Ό μ‚¬μ©ν•λ©΄ μ”μ²­μ„ λ³΄λ‚΄κΈ° μ „μ— μ‘μ—…μ„ μν–‰ν•  μ μκ³ , μ‘λ‹µ μΈν„°μ…‰ν„°λ” μ„λ²„μ—μ„ λ°ν™λ μ‘λ‹µμ— μ‘μ—…μ„ μν–‰ν•  μ μμµλ‹λ‹¤.</p>\n<p>Axios μΈν„°μ…‰ν„°λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” μ΄μ λ” λ¬΄μ—‡μΈκ°€μ”?</p>\n<ul>\n<li>μ¬μ‚¬μ©μ„±κ³Ό λ¨λ“μ„±.</li>\n<li>μ¤λ¥ μ²λ¦¬ μ©μ΄μ„±.</li>\n<li>λ³΄μ• μ μ–΄ λ° μΈκ°€ μ ν¨μ„± κ²€μ‚¬ ν”„λ΅μ„Έμ¤ μ©μ΄μ„±.</li>\n<li>λ„¤νΈμ›ν¬ λ¬Έμ  μ²λ¦¬.</li>\n<li>μ‚¬μ© νΈμμ„±κ³Ό μ μ—°μ„±.</li>\n<li>μ„±λ¥ λ° μµμ ν™”.</li>\n</ul>\n<p>Axios Interceptorsμ μ‚¬μ©λ²•\nκ°„λ‹¨ν• μ‚¬μ©λ²•μ„ κ°€μ§€κ³  μκ³  Axios λ‚΄μ—μ„ μ¶”κ°€ μ„¤μ •μ΄ ν•„μ”ν•μ§€ μ•μ•„ μ¥μ μ„ μ κ³µν•©λ‹λ‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> axiosInstance = axios.<span class=\"hljs-title function_\">create</span>({\n  <span class=\"hljs-attr\">baseURL</span>: <span class=\"hljs-string\">'https://api.example.com'</span>,\n  <span class=\"hljs-attr\">headers</span>: {\n    <span class=\"hljs-string\">'Content-Type'</span>: <span class=\"hljs-string\">'application/json'</span>,\n    <span class=\"hljs-string\">'Authorization'</span>: <span class=\"hljs-literal\">null</span>\n  }\n});\n\naxiosInstance.<span class=\"hljs-property\">interceptors</span>.<span class=\"hljs-property\">request</span>.<span class=\"hljs-title function_\">use</span>(\n  <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">config</span>) {\n    <span class=\"hljs-comment\">// μ”μ²­μ„ λ³΄λ‚΄κΈ° μ „ μν–‰ν•  μ‘μ—…</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μ”μ²­μ„ λ³΄λƒ…λ‹λ‹¤:'</span>, config);\n    \n    <span class=\"hljs-comment\">// μλ¥Ό λ“¤μ–΄, κ° μ”μ²­μ— μ„Έμ… μ‹λ³„μλ¥Ό μ¶”κ°€ν•  μ μμµλ‹λ‹¤.</span>\n    <span class=\"hljs-keyword\">const</span> accessToken = <span class=\"hljs-variable language_\">localStorage</span>.<span class=\"hljs-title function_\">getItem</span>(<span class=\"hljs-string\">'accessToken'</span>);\n    <span class=\"hljs-keyword\">if</span> (accessToken) {\n      config.<span class=\"hljs-property\">headers</span>.<span class=\"hljs-property\">Authorization</span> = <span class=\"hljs-string\">`Bearer <span class=\"hljs-subst\">${accessToken}</span>`</span>;\n    }\n\n    <span class=\"hljs-keyword\">return</span> config;\n  }, \n  <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">error</span>) {\n    <span class=\"hljs-comment\">// μ”μ²­ μ¤λ¥ λ°μƒ μ‹ μν–‰ν•  μ‘μ—…</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">'μ”μ²­ μ¤λ¥:'</span>, error);\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">reject</span>(error);\n  }\n);\n\naxiosInstance.<span class=\"hljs-property\">interceptors</span>.<span class=\"hljs-property\">response</span>.<span class=\"hljs-title function_\">use</span>(\n  <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">response</span>) {\n    <span class=\"hljs-comment\">// μ‘λ‹µμ΄ μ„±κ³µν–μ„ λ• μν–‰ν•  μ‘μ—…</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μ‘λ‹µ:'</span>, response.<span class=\"hljs-property\">data</span>);\n    <span class=\"hljs-keyword\">return</span> response;\n  },\n  <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">error</span>) {\n    <span class=\"hljs-comment\">// μ‘λ‹µ μ¤λ¥ λ°μƒ μ‹ μν–‰ν•  μ‘μ—…</span>\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">'μ‘λ‹µ μ¤λ¥:'</span>, error);\n    \n    <span class=\"hljs-comment\">// μλ¥Ό λ“¤μ–΄, 401 (Unauthorized) μ¤λ¥ λ°μƒ μ‹ μ„Έμ…μ΄ λ§λ£λ κ²ƒμΌλ΅ κ°€μ •ν•  μ μμµλ‹λ‹¤.</span>\n    <span class=\"hljs-keyword\">if</span> (error.<span class=\"hljs-property\">response</span>.<span class=\"hljs-property\">status</span> === <span class=\"hljs-number\">401</span>) {\n      <span class=\"hljs-comment\">// μ„Έμ… μƒλ΅ κ³ μΉ¨μ΄λ‚ λ΅κ·ΈμΈ νμ΄μ§€λ΅ λ¦¬λ‹¤μ΄λ ‰νΈν•λ” λ“±μ μ‘μ—… μν–‰ κ°€λ¥</span>\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μ„Έμ…μ΄ λ§λ£λμ—μµλ‹λ‹¤. λ¦¬λ‹¤μ΄λ ‰νΈ μ¤‘...'</span>);\n      <span class=\"hljs-comment\">// μλ¥Ό λ“¤μ–΄, μ‚¬μ©μλ¥Ό λ΅κ·ΈμΈ νμ΄μ§€λ΅ λ¦¬λ‹¤μ΄λ ‰νΈ:</span>\n    }\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">reject</span>(error);\n  }\n);\n\n<span class=\"hljs-comment\">// μμ‹ μ”μ²­</span>\n\naxiosInstance.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">'/data'</span>)\n  .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">response</span> =></span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μ‘λ‹µ:'</span>, response.<span class=\"hljs-property\">data</span>);\n  })\n  .<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">error</span> =></span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">'μ¤λ¥:'</span>, error);\n  });\n\naxiosInstance.<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-string\">'/post-data'</span>, {\n  <span class=\"hljs-comment\">// μ „μ†΅ν•  λ°μ΄ν„°</span>\n  <span class=\"hljs-attr\">firstName</span>: <span class=\"hljs-string\">'John'</span>,\n  <span class=\"hljs-attr\">lastName</span>: <span class=\"hljs-string\">'Doe'</span>\n})\n.<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">response</span> =></span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μ‘λ‹µ:'</span>, response.<span class=\"hljs-property\">data</span>);\n})\n.<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">error</span> =></span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">'μ¤λ¥:'</span>, error);\n});\n</code></pre>\n<p>π€π€ μ΄ μμ‹μ²λΌ λ“¤μ–΄μ¤λ” μ¤λ¥λ¥Ό μ΅μ•„ μ‚¬μ©μμ—κ² λ°ν™ν•κ±°λ‚ νμ΄μ§€ κ°„μ— λ¦¬λ‹¤μ΄λ ‰νΈν•  μ μμµλ‹λ‹¤.\nμ½μ†”μ—μ„ κ° μ”μ²­μ μ¤λ¥μ™€ λ³Έλ¬Έμ„ μ‰½κ² λ³΄κ³  μ΅°μΉν•  μ μμµλ‹λ‹¤.</p>\n<h3>μ΄μ „ κ²μ‹λ¬Ό</h3>\n</body>\n</html>\n"},"__N_SSG":true}