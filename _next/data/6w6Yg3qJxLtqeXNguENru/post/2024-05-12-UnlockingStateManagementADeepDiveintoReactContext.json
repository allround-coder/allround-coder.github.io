{"pageProps":{"post":{"title":"상태 관리의 잠금 해제 리액트 컨텍스트에 대한 심층 분석","description":"","date":"2024-05-12 21:30","slug":"2024-05-12-UnlockingStateManagementADeepDiveintoReactContext","content":"\n\nReact Context은 React 애플리케이션 내의 컴포넌트 트리를 통해 데이터를 수동으로 props를 전달하지 않고 전달할 수 있는 방법을 제공합니다. Props Drilling이라고도 합니다. 이것의 목적은 React 애플리케이션 내에서 상태 관리를 단순화하고 컴포넌트 간에 전역 데이터 공유를 활성화하는 것입니다.\n\n# 시작해봅시다:\n\n이제 우리가 React Context가 무엇인지 알았으니, 언제 사용할지 알아봅시다:\n- 애플리케이션이 UI 테마, 언어 설정 또는 사용자 인증 상태와 같은 비교적 간단한 상태 관리 요구사항을 갖고 있거나, 사이드 드로어의 현재 상태 또는 상태 값의 수가 적은 경우, Redux의 복잡성 없이 React Context가 가벼운 솔루션을 제공할 수 있습니다.\n- Redux와 비교하여 보일러플레이트 코드가 줄어들 수 있으며, 특히 상태 관리 요구사항이 간단한 프로젝트나 작은 프로젝트의 경우에 해당합니다.\n- 의존성 주입에 사용될 수 있으며, 의존성 (서비스 또는 구성 객체와 같은)을 컴포넌트에 수동으로 전달하지 않고 주입할 수 있습니다. 이는 특히 테스트와 컴포넌트를 구체적인 구현과 분리하는 데 유용할 수 있습니다.\n\n\n\n이제 React Context를 피해야 할 때를 확인해 봅시다:\n\n- React Context는 강력하지만, 특히 실제로 전역적이지 않은 데이터에는 신중하게 사용해야 합니다.\n- React Context를 과도하게 사용하면 불필요한 다시 렌더링과 성능 하락을 초래할 수 있습니다.\n- 상태 값이 매우 빈번하게 변경될 때에는 React Context가 Redux만큼 효율적이지 않습니다.\n- 컴포넌트 재구성도 React Context의 사용을 현명하게 피할 수 있습니다.\n\n# 한번 만들어 봅시다\n\n온라인 쇼핑 애플리케이션을 고려해 봅시다. 여기서는 장바구니 값을 처리하는 온라인 쇼핑 애플리케이션을 생각해 보겠습니다. React Context를 활용하는 것은 4가지 간단한 단계로 이루어질 수 있습니다.\n\n\n\n스텝 1:\n\n애플리케이션의 컨텍스트를 createContext 메서드를 사용하여 생성합니다. 컨텍스트를 생성하는 동안 객체 매개변수로 공유해야 하는 값과 메서드를 전달합니다. 이렇게 하면 컨텍스트 값을 사용할 때 자동 완성에 도움이 됩니다.\n\n```js\nimport React, { createContext } from 'react';\n\nexport const CartContext = createContext({\n  items: [],\n  addItemToCart: () => {},\n  updateCartItemQuantity: () => {},\n});\n```\n\n스텝 2:\n\n\n\n다음으로, 방금 생성한 컨텍스트의 Provider 구성 요소로 구성 요소를 래핑해야 합니다. 컨텍스트 값을 액세스할 모든 컴포넌트는 Provider 구성 요소로 둘러싸야 합니다. 예를 들어, 아래 예제에서 Header 컴포넌트는 현재 장바구니 아이템 수를 표시하기 위해 장바구니 심볼을 액세스합니다. 각 제품의 클릭 이벤트는 항목을 추가하여 장바구니를 업데이트하고 장바구니 항목 수도 업데이트합니다.\n\n```js\nimport React, { useState } from 'react';\nimport { CartContext } from \"../store/shopping-cart-context.jsx\";\n\nfunction App() {\n  return (\n    <CartContext.Provider>\n      <Header/>\n      <Shop>\n        {PRODUCTS.map((product) => (\n          <li key={product.id}>\n            <Product {...product} />\n          </li>\n        ))}\n      </Shop>\n    </CartContext.Provider>\n  );\n}\n```\n\n3단계:\n\nProvider에는 컨텍스트가 사용할 기본 값을 전달해야 합니다.\n\n\n\n현재 항목 상태 값을 전달했습니다. 또한 addItemToCart와 updateCartItemQuantity 두 공유 메소드의 참조를 전달했습니다.\n\n```js\nimport React, { useState } from 'react';\nimport { CartContext } from \"../store/shopping-cart-context.jsx\";\n\nfunction App() {\n  const [items, setItems] = useState([]);\n  const handleAddingItemToCart = (id) => {\n      ...\n  }\n  const handleUpdateCartItemQuantity = () => {\n      ...\n  }\n\n  const defaultCartValue = {\n      items: items,\n      addItemToCart: handleAddingItemToCart,\n      updateCartItemQuantity: handleUpdateCartItemQuantity,\n  }\n\n  return (\n    <CartContext.Provider value={defaultCartValue}>\n      <Header />\n      <Shop>\n        {PRODUCTS.map((product) => (\n          <li key={product.id}>\n            <Product {...product} />\n          </li>\n        ))}\n      </Shop>\n    </CartContext.Provider>\n  );\n}\n```\n\nStep 4:\n\n이제 자식 컴포넌트에서 컨텍스트 값을 사용할 때입니다.\n\n\n\n첫 번째로 useContext 후크를 사용하여 현재 컨텍스트에 액세스합니다. 여기서는 해당 컴포넌트가 필요로하는 컨텍스트 속성 및 메서드를 구조 분해할 수 있습니다.\n\n```js\nimport React, { useContext } from 'react';\n\nexport default function Header() {\n  const cartCtx = useContext(CartContext);\n  const cartItemsCount = cartCtx.items.length;\n  // OR\n  const { items } = useContext(CartContext);\n  const cartItemsCount = items.length;\n  ...\n  return (\n    <div>\n        <Logo/>\n        <p>온라인 쇼핑</p>\n        <button>장바구니 ({cartItemsCount})</button>\n    </div>\n  )\n}\n```\n\n```js\nimport { useContext } from \"react\";\nimport { CartContext } from \"../store/shopping-cart-context\";\n\nexport default function Product({ image, title, price, description }) {\n  const { addItemToCart } = useContext(CartContext);\n\n  return (\n    <article className=\"product\">\n      <img src={image} alt={title} />\n      <div className=\"product-content\">\n        <div>\n          <h3>{title}</h3>\n          <p className='product-price'>${price}</p>\n          <p>{description}</p>\n        </div>\n        <p className='product-actions'>\n          <button onClick={() => addItemToCart(id)}>장바구니에 추가</button>\n        </p>\n      </div>\n    </article>\n  );\n}\n```\n\n# 꿀팁\n\n\n\n- 메인 App 컴포넌트에 너무 많은 메소드가 있으면 컴포넌트가 과부하될 수 있어요. 이를 해소하기 위해 공유 메소드와 상태 값을 모두 사용자 정의 후크로 추출할 수 있어요.\n- Context API를 과도하게 사용하면 상태 값이 변경될 때마다 다시 렌더링되어 성능에 영향을 줄 수 있어요.\n- 여러 개의 컨텍스트 프로바이더가 있을 때는 코드 유지보수를 쉽게하기 위해 하나로 결합하여 슬라이스를 만들어야 해요.\n- 컨텍스트는 별도의 파일에서 처리되어야 해요.\n\n# 결론\n\nReact Context를 상태 관리 도구로서의 개념, 사용 사례, 이용 방법 및 주의 사항에 대해 쉽게 이해하는 데 도움이 되었으면 좋겠어요.\n\n즐거운 코딩하세요!!!","ogImage":{"url":"/assets/img/2024-05-12-UnlockingStateManagementADeepDiveintoReactContext_0.png"},"coverImage":"/assets/img/2024-05-12-UnlockingStateManagementADeepDiveintoReactContext_0.png","tag":["Tech"],"readingTime":5},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>React Context은 React 애플리케이션 내의 컴포넌트 트리를 통해 데이터를 수동으로 props를 전달하지 않고 전달할 수 있는 방법을 제공합니다. Props Drilling이라고도 합니다. 이것의 목적은 React 애플리케이션 내에서 상태 관리를 단순화하고 컴포넌트 간에 전역 데이터 공유를 활성화하는 것입니다.</p>\n<h1>시작해봅시다:</h1>\n<p>이제 우리가 React Context가 무엇인지 알았으니, 언제 사용할지 알아봅시다:</p>\n<ul>\n<li>애플리케이션이 UI 테마, 언어 설정 또는 사용자 인증 상태와 같은 비교적 간단한 상태 관리 요구사항을 갖고 있거나, 사이드 드로어의 현재 상태 또는 상태 값의 수가 적은 경우, Redux의 복잡성 없이 React Context가 가벼운 솔루션을 제공할 수 있습니다.</li>\n<li>Redux와 비교하여 보일러플레이트 코드가 줄어들 수 있으며, 특히 상태 관리 요구사항이 간단한 프로젝트나 작은 프로젝트의 경우에 해당합니다.</li>\n<li>의존성 주입에 사용될 수 있으며, 의존성 (서비스 또는 구성 객체와 같은)을 컴포넌트에 수동으로 전달하지 않고 주입할 수 있습니다. 이는 특히 테스트와 컴포넌트를 구체적인 구현과 분리하는 데 유용할 수 있습니다.</li>\n</ul>\n<p>이제 React Context를 피해야 할 때를 확인해 봅시다:</p>\n<ul>\n<li>React Context는 강력하지만, 특히 실제로 전역적이지 않은 데이터에는 신중하게 사용해야 합니다.</li>\n<li>React Context를 과도하게 사용하면 불필요한 다시 렌더링과 성능 하락을 초래할 수 있습니다.</li>\n<li>상태 값이 매우 빈번하게 변경될 때에는 React Context가 Redux만큼 효율적이지 않습니다.</li>\n<li>컴포넌트 재구성도 React Context의 사용을 현명하게 피할 수 있습니다.</li>\n</ul>\n<h1>한번 만들어 봅시다</h1>\n<p>온라인 쇼핑 애플리케이션을 고려해 봅시다. 여기서는 장바구니 값을 처리하는 온라인 쇼핑 애플리케이션을 생각해 보겠습니다. React Context를 활용하는 것은 4가지 간단한 단계로 이루어질 수 있습니다.</p>\n<p>스텝 1:</p>\n<p>애플리케이션의 컨텍스트를 createContext 메서드를 사용하여 생성합니다. 컨텍스트를 생성하는 동안 객체 매개변수로 공유해야 하는 값과 메서드를 전달합니다. 이렇게 하면 컨텍스트 값을 사용할 때 자동 완성에 도움이 됩니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { createContext } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title class_\">CartContext</span> = <span class=\"hljs-title function_\">createContext</span>({\n  <span class=\"hljs-attr\">items</span>: [],\n  <span class=\"hljs-attr\">addItemToCart</span>: <span class=\"hljs-function\">() =></span> {},\n  <span class=\"hljs-attr\">updateCartItemQuantity</span>: <span class=\"hljs-function\">() =></span> {},\n});\n</code></pre>\n<p>스텝 2:</p>\n<p>다음으로, 방금 생성한 컨텍스트의 Provider 구성 요소로 구성 요소를 래핑해야 합니다. 컨텍스트 값을 액세스할 모든 컴포넌트는 Provider 구성 요소로 둘러싸야 합니다. 예를 들어, 아래 예제에서 Header 컴포넌트는 현재 장바구니 아이템 수를 표시하기 위해 장바구니 심볼을 액세스합니다. 각 제품의 클릭 이벤트는 항목을 추가하여 장바구니를 업데이트하고 장바구니 항목 수도 업데이트합니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">CartContext</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../store/shopping-cart-context.jsx\"</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">CartContext.Provider</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Header</span>/></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Shop</span>></span>\n        {PRODUCTS.map((product) => (\n          <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">key</span>=<span class=\"hljs-string\">{product.id}</span>></span>\n            <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Product</span> {<span class=\"hljs-attr\">...product</span>} /></span>\n          <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">li</span>></span>\n        ))}\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Shop</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">CartContext.Provider</span>></span></span>\n  );\n}\n</code></pre>\n<p>3단계:</p>\n<p>Provider에는 컨텍스트가 사용할 기본 값을 전달해야 합니다.</p>\n<p>현재 항목 상태 값을 전달했습니다. 또한 addItemToCart와 updateCartItemQuantity 두 공유 메소드의 참조를 전달했습니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">CartContext</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../store/shopping-cart-context.jsx\"</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [items, setItems] = <span class=\"hljs-title function_\">useState</span>([]);\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">handleAddingItemToCart</span> = (<span class=\"hljs-params\">id</span>) => {\n      ...\n  }\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">handleUpdateCartItemQuantity</span> = (<span class=\"hljs-params\"></span>) => {\n      ...\n  }\n\n  <span class=\"hljs-keyword\">const</span> defaultCartValue = {\n      <span class=\"hljs-attr\">items</span>: items,\n      <span class=\"hljs-attr\">addItemToCart</span>: handleAddingItemToCart,\n      <span class=\"hljs-attr\">updateCartItemQuantity</span>: handleUpdateCartItemQuantity,\n  }\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">CartContext.Provider</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{defaultCartValue}</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Header</span> /></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Shop</span>></span>\n        {PRODUCTS.map((product) => (\n          <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">li</span> <span class=\"hljs-attr\">key</span>=<span class=\"hljs-string\">{product.id}</span>></span>\n            <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Product</span> {<span class=\"hljs-attr\">...product</span>} /></span>\n          <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">li</span>></span>\n        ))}\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Shop</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">CartContext.Provider</span>></span></span>\n  );\n}\n</code></pre>\n<p>Step 4:</p>\n<p>이제 자식 컴포넌트에서 컨텍스트 값을 사용할 때입니다.</p>\n<p>첫 번째로 useContext 후크를 사용하여 현재 컨텍스트에 액세스합니다. 여기서는 해당 컴포넌트가 필요로하는 컨텍스트 속성 및 메서드를 구조 분해할 수 있습니다.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { useContext } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">Header</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> cartCtx = <span class=\"hljs-title function_\">useContext</span>(<span class=\"hljs-title class_\">CartContext</span>);\n  <span class=\"hljs-keyword\">const</span> cartItemsCount = cartCtx.<span class=\"hljs-property\">items</span>.<span class=\"hljs-property\">length</span>;\n  <span class=\"hljs-comment\">// OR</span>\n  <span class=\"hljs-keyword\">const</span> { items } = <span class=\"hljs-title function_\">useContext</span>(<span class=\"hljs-title class_\">CartContext</span>);\n  <span class=\"hljs-keyword\">const</span> cartItemsCount = items.<span class=\"hljs-property\">length</span>;\n  ...\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Logo</span>/></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">p</span>></span>온라인 쇼핑<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">p</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span>></span>장바구니 ({cartItemsCount})<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></span>\n  )\n}\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> { useContext } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">CartContext</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../store/shopping-cart-context\"</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">Product</span>(<span class=\"hljs-params\">{ image, title, price, description }</span>) {\n  <span class=\"hljs-keyword\">const</span> { addItemToCart } = <span class=\"hljs-title function_\">useContext</span>(<span class=\"hljs-title class_\">CartContext</span>);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">article</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"product\"</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">img</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">{image}</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">{title}</span> /></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"product-content\"</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span>></span>\n          <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">h3</span>></span>{title}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">h3</span>></span>\n          <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">'product-price'</span>></span>${price}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">p</span>></span>\n          <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">p</span>></span>{description}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">p</span>></span>\n        <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">'product-actions'</span>></span>\n          <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{()</span> =></span> addItemToCart(id)}>장바구니에 추가<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n        <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">p</span>></span>\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">article</span>></span></span>\n  );\n}\n</code></pre>\n<h1>꿀팁</h1>\n<ul>\n<li>메인 App 컴포넌트에 너무 많은 메소드가 있으면 컴포넌트가 과부하될 수 있어요. 이를 해소하기 위해 공유 메소드와 상태 값을 모두 사용자 정의 후크로 추출할 수 있어요.</li>\n<li>Context API를 과도하게 사용하면 상태 값이 변경될 때마다 다시 렌더링되어 성능에 영향을 줄 수 있어요.</li>\n<li>여러 개의 컨텍스트 프로바이더가 있을 때는 코드 유지보수를 쉽게하기 위해 하나로 결합하여 슬라이스를 만들어야 해요.</li>\n<li>컨텍스트는 별도의 파일에서 처리되어야 해요.</li>\n</ul>\n<h1>결론</h1>\n<p>React Context를 상태 관리 도구로서의 개념, 사용 사례, 이용 방법 및 주의 사항에 대해 쉽게 이해하는 데 도움이 되었으면 좋겠어요.</p>\n<p>즐거운 코딩하세요!!!</p>\n</body>\n</html>\n"},"__N_SSG":true}