{"pageProps":{"post":{"title":"How to capture element with html2canvas and download image (React) ","description":"Share how to capture html tags and download images using html2canvas.","date":"2023-08-21T21:00:07.322Z","slug":"2024-04-15-How-to-capture-an-element-with-html2canvas-and-download-an-image 복사본 811","author":{"name":"Cozy Coding"},"content":"\n- 123456789\n- 12345678\n\n<Image width=\"846\" height=\"190\"  alt=\"html2canvas image download\" src=\"/assets/How-to-capture-an-element-with-html2canvas-and-download-an-image/2.gif\" />\n\n<img src=\"/assets/How-to-capture-an-element-with-html2canvas-and-download-an-image/2.gif\"></img>\n\n<GoogleAd/>\n\nhtml2canvas is a JavaScript library that captures HTML elements from web pages and turns them into images. Here's how to use it to capture and download a specific HTML element as an image.\n\nImport the html2canvas library: First add the html2canvas library to your web page. You can import the library using the `<script>` tag like this: At this time, the path of the library file must be modified according to the web page.\n\n```html\n<script src=\"path/to/html2canvas.min.js\"></script>\n```\n\nWrite a function to capture HTML elements and create an image: Write the JavaScript code as shown below to create a function that captures a specific HTML element and generates it as an image.\n\n```html\n<script>\n  function captureAndDownload() {\n    const targetElement = document.getElementById(\"target\"); //select HTML elements to capture\n    html2canvas(targetElement).then((canvas) => {\n      const link = document.createElement(\"a\");\n      link.download = \"captured_image.png\"; //Set the image file name to download\n      link.href = canvas.toDataURL(); //set canvas image data as download URL\n      link.click(); //trigger download by clicking on imaginary link\n    });\n  }\n</script>\n```\n\n<GoogleAd/>\n## Create a download button\n\nClicking the button creates a button to download.\n\nAttach a function to a button or event: Create a button for download or attach the function written above to the required event.\n\n```html\n<button onclick=\"captureAndDownload()\">Download Image</button>\n<div id=\"target\">\n  <!--Target HTML element content to capture -->\n</div>\n```\n\nIn the code above, target represents the ID of the target HTML element you want to capture, and the content of that element is captured as an image and downloaded. The function captureAndDownload creates an image after capturing using html2canvas and provides the generated image to the user via a download link.\n\nYou can use this code to capture a specific HTML element as an image and download it. However, it may not work depending on the browser's security and CORS policies, so an appropriate response is required depending on the environment in actual use.\n\n### result screen\n\n<Image width=\"846\" height=\"190\"  alt=\"html2canvas image download\" src=\"/assets/How-to-capture-an-element-with-html2canvas-and-download-an-image/1.png\" />\n\n## React\n\n### Install html2canvas\n\n```bash\nnpm install html2canvas\n```\n\nIn the code below, we created a CaptureAndDownload component that has the function of capturing and downloading using html2canvas.\n\nClicking the button calls the captureAndDownload method to capture and download the image. The target HTML element was assumed to be the element with id \"target\". When using it in practice, modify it to suit your project.\n\nYou can use this component inside another React component.\n\n```jsx\nimport React from \"react\";\nimport html2canvas from \"html2canvas\";\n\nclass CaptureAndDownload extends React.Component {\n  captureAndDownload = () => {\n    const targetElement = document.getElementById(\"target\"); //select HTML elements to capture\n    html2canvas(targetElement).then((canvas) => {\n      const link = document.createElement(\"a\");\n      link.download = \"captured_image.png\"; //Set the image file name to download\n      link.href = canvas.toDataURL(); //set canvas image data as download URL\n      link.click(); //trigger download by clicking on imaginary link\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <button onClick={this.captureAndDownload}>Download Image</button>\n        <div id=\"target\">{/*HTML element content to capture */}</div>\n      </div>\n    );\n  }\n}\n\nexport default CaptureAndDownload;\n```\n","ogImage":{"url":"/assets/How-to-capture-an-element-with-html2canvas-and-download-an-image/1.png"},"coverImage":"/assets/How-to-capture-an-element-with-html2canvas-and-download-an-image/1.png","tag":["html2canvas"]},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    ul: \"ul\",\n    li: \"li\",\n    p: \"p\",\n    code: \"code\",\n    pre: \"pre\",\n    span: \"span\",\n    h2: \"h2\",\n    h3: \"h3\"\n  }, _provideComponents(), props.components), {Image, GoogleAd} = _components;\n  if (!GoogleAd) _missingMdxReference(\"GoogleAd\", true);\n  if (!Image) _missingMdxReference(\"Image\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"123456789\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"12345678\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(Image, {\n      width: \"846\",\n      height: \"190\",\n      alt: \"html2canvas image download\",\n      src: \"/assets/How-to-capture-an-element-with-html2canvas-and-download-an-image/2.gif\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/How-to-capture-an-element-with-html2canvas-and-download-an-image/2.gif\"\n    }), \"\\n\", _jsx(GoogleAd, {}), \"\\n\", _jsx(_components.p, {\n      children: \"html2canvas is a JavaScript library that captures HTML elements from web pages and turns them into images. Here's how to use it to capture and download a specific HTML element as an image.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Import the html2canvas library: First add the html2canvas library to your web page. You can import the library using the \", _jsx(_components.code, {\n        children: \"<script>\"\n      }), \" tag like this: At this time, the path of the library file must be modified according to the web page.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-html\",\n        children: [_jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"<\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"script\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"src\"\n          }), \"=\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"path/to/html2canvas.min.js\\\"\"\n          }), \">\"]\n        }), _jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"</\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"script\"\n          }), \">\"]\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Write a function to capture HTML elements and create an image: Write the JavaScript code as shown below to create a function that captures a specific HTML element and generates it as an image.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-html\",\n        children: [_jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"<\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"script\"\n          }), \">\"]\n        }), _jsxs(_components.span, {\n          className: \"javascript\",\n          children: [\"\\n  \", _jsx(_components.span, {\n            className: \"hljs-keyword\",\n            children: \"function\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-title function_\",\n            children: \"captureAndDownload\"\n          }), \"(\", _jsx(_components.span, {\n            className: \"hljs-params\"\n          }), \") {\\n    \", _jsx(_components.span, {\n            className: \"hljs-keyword\",\n            children: \"const\"\n          }), \" targetElement = \", _jsx(_components.span, {\n            className: \"hljs-variable language_\",\n            children: \"document\"\n          }), \".\", _jsx(_components.span, {\n            className: \"hljs-title function_\",\n            children: \"getElementById\"\n          }), \"(\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"target\\\"\"\n          }), \"); \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"//select HTML elements to capture\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"hljs-title function_\",\n            children: \"html2canvas\"\n          }), \"(targetElement).\", _jsx(_components.span, {\n            className: \"hljs-title function_\",\n            children: \"then\"\n          }), \"(\", _jsxs(_components.span, {\n            className: \"hljs-function\",\n            children: [\"(\", _jsx(_components.span, {\n              className: \"hljs-params\",\n              children: \"canvas\"\n            }), \") =>\"]\n          }), \" {\\n      \", _jsx(_components.span, {\n            className: \"hljs-keyword\",\n            children: \"const\"\n          }), \" link = \", _jsx(_components.span, {\n            className: \"hljs-variable language_\",\n            children: \"document\"\n          }), \".\", _jsx(_components.span, {\n            className: \"hljs-title function_\",\n            children: \"createElement\"\n          }), \"(\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"a\\\"\"\n          }), \");\\n      link.\", _jsx(_components.span, {\n            className: \"hljs-property\",\n            children: \"download\"\n          }), \" = \", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"captured_image.png\\\"\"\n          }), \"; \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"//Set the image file name to download\"\n          }), \"\\n      link.\", _jsx(_components.span, {\n            className: \"hljs-property\",\n            children: \"href\"\n          }), \" = canvas.\", _jsx(_components.span, {\n            className: \"hljs-title function_\",\n            children: \"toDataURL\"\n          }), \"(); \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"//set canvas image data as download URL\"\n          }), \"\\n      link.\", _jsx(_components.span, {\n            className: \"hljs-title function_\",\n            children: \"click\"\n          }), \"(); \", _jsx(_components.span, {\n            className: \"hljs-comment\",\n            children: \"//trigger download by clicking on imaginary link\"\n          }), \"\\n    });\\n  }\\n\"]\n        }), _jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"</\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"script\"\n          }), \">\"]\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(GoogleAd, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"Create a download button\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Clicking the button creates a button to download.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Attach a function to a button or event: Create a button for download or attach the function written above to the required event.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-html\",\n        children: [_jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"<\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"button\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"onclick\"\n          }), \"=\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"captureAndDownload()\\\"\"\n          }), \">\"]\n        }), \"Download Image\", _jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"</\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"button\"\n          }), \">\"]\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"<\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"div\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-attr\",\n            children: \"id\"\n          }), \"=\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"target\\\"\"\n          }), \">\"]\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"<!--Target HTML element content to capture -->\"\n        }), \"\\n\", _jsxs(_components.span, {\n          className: \"hljs-tag\",\n          children: [\"</\", _jsx(_components.span, {\n            className: \"hljs-name\",\n            children: \"div\"\n          }), \">\"]\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In the code above, target represents the ID of the target HTML element you want to capture, and the content of that element is captured as an image and downloaded. The function captureAndDownload creates an image after capturing using html2canvas and provides the generated image to the user via a download link.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You can use this code to capture a specific HTML element as an image and download it. However, it may not work depending on the browser's security and CORS policies, so an appropriate response is required depending on the environment in actual use.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"result screen\"\n    }), \"\\n\", _jsx(Image, {\n      width: \"846\",\n      height: \"190\",\n      alt: \"html2canvas image download\",\n      src: \"/assets/How-to-capture-an-element-with-html2canvas-and-download-an-image/1.png\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"React\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Install html2canvas\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-bash\",\n        children: \"npm install html2canvas\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In the code below, we created a CaptureAndDownload component that has the function of capturing and downloading using html2canvas.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Clicking the button calls the captureAndDownload method to capture and download the image. The target HTML element was assumed to be the element with id \\\"target\\\". When using it in practice, modify it to suit your project.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You can use this component inside another React component.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-jsx\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"React\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"react\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" html2canvas \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"html2canvas\\\"\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CaptureAndDownload\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"extends\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_ inherited__\",\n          children: \"React.Component\"\n        }), \" {\\n  captureAndDownload = \", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" targetElement = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"document\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getElementById\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"target\\\"\"\n        }), \"); \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//select HTML elements to capture\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"html2canvas\"\n        }), \"(targetElement).\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"then\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [\"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"canvas\"\n          }), \") =>\"]\n        }), \" {\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" link = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"document\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"createElement\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"a\\\"\"\n        }), \");\\n      link.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"download\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"captured_image.png\\\"\"\n        }), \"; \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//Set the image file name to download\"\n        }), \"\\n      link.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"href\"\n        }), \" = canvas.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"toDataURL\"\n        }), \"(); \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//set canvas image data as download URL\"\n        }), \"\\n      link.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"click\"\n        }), \"(); \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"//trigger download by clicking on imaginary link\"\n        }), \"\\n    });\\n  };\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"render\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" (\\n      \", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \">\"]\n          }), \"\\n        \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"button\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"onClick\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"{this.captureAndDownload}\"\n            }), \">\"]\n          }), \"Download Image\", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"button\"\n            }), \">\"]\n          }), \"\\n        \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"id\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"target\\\"\"\n            }), \">\"]\n          }), \"{/*HTML element content to capture */}\", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \">\"]\n          }), \"\\n      \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \">\"]\n          })]\n        }), \"\\n    );\\n  }\\n}\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"default\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CaptureAndDownload\"\n        }), \";\\n\"]\n      })\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true}