{"pageProps":{"post":{"title":"스트림을 사용하여 Nextjs에서 라이브 스트림 채팅 구축하기","description":"","date":"2024-05-14 12:09","slug":"2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs","content":"\n\n다음.js, Stream 및 Chatscope를 사용하여 매력적이고 인터랙티브한 라이브 스트리밍 채팅 앱을 만드는 방법을 배워보세요.\n\n![이미지](/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_0.png)\n\n언제나 YouTube와 같은 라이브 스트리밍에서 발견되는 다이나믹한 채팅 경험을 어떻게 만들 수 있을지 궁금해했는데, 누구나 로그인 없이 참여할 수 있는 편리함을 더한 기능을 추가하고 싶었습니다.\n\nNext.js와 Stream을 사용하여 그 경험을 성공적으로 만들어냈습니다. 이 튜토리얼에서는 사용자 권한에 대한 세밀한 제어를 통해 실시간 상호작용을 보다 접근하기 쉽게 만드는 라이브 스트리밍 채팅 환경을 만드는 간단한 방법을 다루고 있습니다.\n\n\n\n# 데모\n\n기술적인 내용에 들어가기 전에, 이 튜토리얼에서 무엇을 만들게 될지 간단히 소개해 드릴게요 👇🏻\n\n# 준비물\n\n구현을 시작하기 위해 다음이 필요합니다:\n\n\n\n- Node.js 18 또는 그 이후 버전\n- Stream 계정\n- Vercel 계정\n\n# 새 Stream 애플리케이션 설정하기\n\n이 섹션에서는 새 Stream 애플리케이션을 생성하고, 인증 없이 사용자를 활성화하며, 사용자 권한을 정의하여 채널에 대한 읽기 및 게시를 설정하는 방법을 배울 수 있습니다. 시작해봅시다.\n\nStream 계정을 만들고 로그인한 후, + 앱 만들기를 클릭하여 Stream 채팅 애플리케이션 생성을 시작해보세요.\n\n\n\n<img src=\"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_1.png\" />\n\n어플리케이션 이름을 입력해주세요. 또한, 웹사이트 배포 지역/기능 근처의 채팅 저장 위치를 선택해주세요. 저는 인도에 있으므로 뭄바이로 설정했습니다.\n\n<img src=\"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_2.png\" />\n\n설정이 완료되면 채팅 개요 화면으로 이동합니다. API 키를 복사하고, 안전한 장소에 저장하여 Next.js 애플리케이션에서 NEXT_PUBLIC_STREAM_API_KEY로 계속 사용할 수 있도록 해주세요.\n\n\n\n![이미지](/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_3.png)\n\n권한 확인 없이 방문자가 채팅 메시지를 게시할 수 있도록 하려면 아래로 스크롤하여 \"인증 확인 비활성화\" 토글 버튼을 활성화하세요. 변경 사항을 동기화하려면 제출을 클릭하세요.\n\n![이미지](/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_4.png)\n\n방문자가 특정 채널의 사용자로서 메시지를 게시할 수 있도록 하려면 그들을 위해 읽기 및 게시 권한을 활성화해야 합니다. 방문자가 채팅 애플리케이션에서 가정할 수 있는 역할과 권한을 구성할 수 있도록 하는 것이 매우 유용합니다.\n\n\n\n사용자 역할을 선택하고 메시징을 스코프로 선택한 다음 편집 버튼을 클릭하여 방문자의 권한을 구성하실 수 있습니다.\n\n![이미지](/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_5.png)\n\n방문자가 메시지를 게시할 수 있도록 하려면 메시지 생성을 검색하고 \"메시지 생성\" 권한을 활성화하여 채널의 모든 사용자가 메시지를 보낼 수 있도록 허용할 수 있습니다.\n\n![이미지](/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_6.png)\n\n\n\n방문자들이 채팅 기록을 읽을 수 있도록 하려면 'read channel'을 검색하여 Read Channel 및 Read Channel Members를 활성화하세요. 이렇게 하면 방문자가 메시지를 읽을 뿐만 아니라 해당 메시지를 게시한 사용자도 확인할 수 있습니다.\n\n![이미지](/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_7.png)\n\n마지막으로 변경 사항을 동기화하려면 저장을 클릭하세요.\n\n![이미지](/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_8.png)\n\n\n\n이제 방문자가 할 수 있는 것들의 권한과 범위를 구성하는 것을 마쳤습니다. 이제 Chatscope UI Kit을 사용하여 Next.js에서 채팅 사용자 인터페이스를 구축해 봅시다.\n\n# 새 Next.js 애플리케이션 설정\n\n이 섹션에서는 새로운 Next.js 애플리케이션을 생성하는 방법, shadcn/ui를 설정하는 방법, 해당 애플리케이션의 요구 사항을 파악하여 빠른 구현을 위해 관련 라이브러리를 설치하는 방법을 배우게 될 것입니다.\n\n새로운 Next.js 프로젝트를 생성하는 것으로 시작해 봅시다. 터미널을 열고 다음 명령을 실행하세요:\n\n\n\n```js\r\nnpx create-next-app@latest my-chat-app\r\n```\r\n\r\n진행할 때, 다음을 선택하세요:\r\n\r\n- TypeScript를 사용할 것인지 물으면 \"Yes\"를 선택하세요.\r\n- ESLint를 사용할 것인지 물으면 \"No\"를 선택하세요.\r\n- Tailwind CSS를 사용할 것인지 물으면 \"Yes\"를 선택하세요.\r\n- src/ 디렉토리를 사용할 것인지 물으면 \"No\"를 선택하세요.\r\n- App Router를 사용할 것인지 물으면 \"Yes\"를 선택하세요.\r\n- 기본 import alias를 맞춤 설정할 것인지 물으면 \"No\"를 선택하세요.\r\n\r\n위 과정을 마치면 프로젝트 디렉토리로 이동하여 다음 명령어를 실행하여 개발 모드에서 앱을 시작할 수 있습니다:```\n\n\n\n```js\ncd my-chat-app\nnpm run dev\n```\n\n앱은 localhost:3000에서 실행 중이어야 합니다.\n\n이제 프로젝트의 루트에 .env 파일을 만드세요. 위 섹션에서 저장한 항목들을 추가할 것입니다.\n\n다음과 같이 보여야 합니다:```\n\n\n\n```js\n# .env\n\n# 스트림 환경 변수\nNEXT_PUBLIC_STREAM_API_KEY=\"...\"\n\n```\n\n## shadcn/ui 컴포넌트 통합\n\n채팅 사용자 인터페이스를 빠르게 프로토타입화하기 위해 Next.js와 함께 shadcn/ui를 설정할 것입니다. shadcn/ui는 아름답게 디자인된 컴포넌트들의 모음으로, 여러분의 애플리케이션에 복사하여 붙여넣을 수 있습니다. 아래 명령어를 실행하여 shadcn/ui를 설정하세요:\n\n```js\nnpx shadcn-ui@latest init\n```\n\n\n\n구성 파일 components.json을 구성하는 몇 가지 질문에 답해야합니다. 다음을 선택하세요:\n\n- TypeScript를 사용하것이라고 하면 \"예\"를 선택하세요.\n- 사용할 스타일을 선택하라는 프롬프트가 나오면 \"기본\"을 선택하세요.\n- 기본 색상으로 선택하라는 프롬프트가 나오면 \"Slate\"를 선택하세요.\n- 색상에 CSS 변수를 사용하냐고 묻힐 경우 \"예\"를 선택하세요.\n\n위 작업이 완료되면, Next.js 애플리케이션에 React 구성 요소를 쉽게 추가할 수 있는 CLI가 설정됩니다. 아래 명령어를 실행하여 버튼, 입력란, 그리고 텍스트영역 요소를 가져올 수 있습니다.\n\n```js\nnpx shadcn-ui@latest add button\nnpx shadcn-ui@latest add input\nnpx shadcn-ui@latest add textarea\n```\n\n\n\n그것이 끝나면 이제 app/components 디렉토리 안에 ui 디렉토리가 보일 것입니다. 그 안에 button.tsx, input.tsx, textarea.tsx 파일이 있습니다.\n\n## Chatscope 및 Stream UI Kit를 React에 설치하기\n\n구현을 더 쉽게 만들기 위해 필요한 작업을 이제 알아봅시다.\n\n먼저, 각 방문자가 익명 사용자로 취급되므로 임의로 생성된 이름(id)으로 그들을 식별해야 합니다. 또한 채널에서 받은 각 메시지는 실시간으로 모든 방문자에게 전파되어야 합니다. 마지막으로, 모든 메시지가 채널로 들어오는 메시지로 표시되도록 해야 합니다.\n\n\n\n위의 요구 사항을 충족하기 위해 다음 명령을 실행하여 필요한 라이브러리를 설치하세요:\n\n```js\nnpm install @chatscope/chat-ui-kit-react\nnpm install stream-chat stream-chat-react\nnpm install unique-username-generator\n```\n\n다음 라이브러리가 설치됩니다:\n\n- unique-username-generator: 고유한 사용자 이름을 생성하는 패키지입니다.\n- stream-chat: Stream의 JavaScript API 클라이언트입니다.\n- stream-chat-react: Stream Chat을 위한 React 훅(그리고 컴포넌트) 라이브러리입니다.\n- @chatscope/chat-ui-kit-react: 채팅 UI의 프로토타입을 위한 React 컴포넌트 라이브러리입니다.\n\n\n\n자, 이제 반응형 채팅 사용자 인터페이스를 만들어 봅시다.\n\n# ChatScope와 Stream을 사용하여 채팅 사용자 인터페이스 만들기\n\n이 섹션에서는 방문자를 특정 채널에 연결하고, 채팅 기록을 렌더링하고, 메시지를 게시할 수 있도록 하는 React 컴포넌트를 구축하는 방법을 배우게 될 것입니다.\n\n먼저, 채팅 메시지 목록을 동적으로 렌더링하는 React 컴포넌트를 만들어 봅시다. Stream 및 Chatscope 라이브러리에서 컴포넌트를 사용할 것입니다.\n\n\n\n앱 디렉토리에 Messages.tsx 파일을 만들어서 아래 코드를 넣어주세요:\n\n```js\nimport { cn } from \"@/lib/utils\";\nimport { useChannelStateContext } from \"stream-chat-react\";\nimport { Message, MessageList } from \"@chatscope/chat-ui-kit-react\";\n\nexport default function () {\n  const { messages } = useChannelStateContext();\n  return (\n    <MessageList>\n      {messages?.map((i, index: number) => (\n        <Message\n          key={i.id}\n          model={{\n            position: \"normal\",\n            sender: i.user?.id,\n            direction: \"incoming\",\n            message: `${i.user?.id}: ${i.text}`,\n            sentTime: i.created_at?.toString(),\n          }}\n          className={cn(\n            \"bg-white rounded text-black py-2 text-xs\",\n            index !== messages.length - 1 && \"border-b\"\n          )}\n        />\n      ))}\n    </MessageList>\n  );\n}\n```\n\n`useChannelStateContext` 훅을 사용하여 채팅 기록을 가져오고 새로운 메시지를 수신할 수 있습니다. `MessageList` 및 `Message` Chatscope UI 구성 요소를 사용하여 모든 메시지를 채널로 수신하도록 표시하고, 발신자 정보, 메시지 내용 및 타임스탬프와 매핑할 수 있습니다.\n\n이제 사용자가 채팅 기록을 볼 수 있고 메시지를 동시에 게시할 수 있는 경로를 작성해봅시다. 앱 디렉토리의 page.tsx 파일을 아래 코드로 업데이트해주세요:\n\n\n\n```js\n\"use client\";\n\nimport { useState } from \"react\";\nimport Messages from \"./Messages\";\nimport { Button } from \"@/components/ui/button\";\nimport { Channel, Chat } from \"stream-chat-react\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\nexport default function () {\n  const [channel, setChannel] = useState(null);\n  const [chatClient, setChatClient] = useState(null);\n  return (\n    <div className=\"flex max-w-[300px] flex-col gap-y-3 p-5\">\n      <div className=\"flex w-[300px] flex-col gap-y-3\">\n        <span className=\"border-b border-gray-100 font-semibold\">채팅</span>\n        {channel && (\n          <Chat client={chatClient}>\n            <Channel channel={channel}>\n              <Messages />\n            </Channel>\n          </Chat>\n        )}\n        <Textarea\n          id=\"message_text\"\n          name=\"message_text\"\n          placeholder=\"메시지...\"\n          className=\"min-h-[100px] w-full\"\n        />\n        <Button className=\"max-w-max\">\n          메시지 보내기 &rarr;\n        </Button>\n      </div>\n    </div>\n  );\n}\n```\n\n이제 새 메시지 렌더링 및 방문자로부터 입력을 받을 수 있는 textarea 요소가 있는 인덱스 라우트를 볼 수 있습니다. 메시지를 게시하는 기능을 구현하기 전에 해당 메시지를 고유한 ID와 연결하려고 할 것입니다. 다음과 같이 코드를 업데이트하십시오:\n\n```js\n\"use client\";\n\nimport Messages from \"./Messages\";\n+ import { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Channel, Chat } from \"stream-chat-react\";\n+ import { DevToken, StreamChat } from \"stream-chat\";\nimport { Textarea } from \"@/components/ui/textarea\";\n+ import { generateUsername } from \"unique-username-generator\";\n\nexport default function () {\n  const [channel, setChannel] = useState(null);\n  const [chatClient, setChatClient] = useState(null);\n+ const loadChatClient = async () => {\n+   const newChatClient = new StreamChat(\n+     process.env.NEXT_PUBLIC_STREAM_API_KEY,\n+     {\n+       enableWSFallback: true,\n+     }\n+   );\n+    if (newChatClient.user) await newChatClient.disconnectUser();\n+   const localUser = localStorage.getItem(\"local_user\");\n+   if (!localUser) localStorage.setItem(\"local_user\", generateUsername());\n+   const id = localStorage.getItem(\"local_user\");\n+   const userToConnect = { id };\n+   await newChatClient.connectUser(userToConnect, DevToken(userToConnect.id));\n+   setChatClient(newChatClient);\n+ };\n+ useEffect(() => {\n+   loadChatClient();\n+ }, []);\n  return (\n    <div className=\"flex max-w-[300px] flex-col gap-y-3 p-5\">\n      {/* 나머지 컴포넌트는 그대로 유지 */}\n    </div>\n  );\n}\n```\n\n이제 loadChatClient 함수를 한 번 호출하여 웹소켓 연결을 Stream의 메시징 채널로 활성화했습니다. 그런 다음 세션과 연관된 사용자를 연결 해제합니다. 마지막으로, 방문자를 위해 고유한 사용자명을 생성합니다 (localStorage에 없는 경우). 이러한 단계를 통해 방문자가 고유하게 식별됨을 보장합니다.```\n\n\n\n특정 채널의 메시지를 청취하려면 다음과 같이 코드를 업데이트하세요:\n\n```js\n\"use client\";\n\n// Imports as is\n\nexport default function () {\n  const [channel, setChannel] = useState(null);\n  const [chatClient, setChatClient] = useState(null);\n+  const watchChannel = () => {\n+    const channel = chatClient.channel(\"messaging\", \"livestreaming_chat\", {\n+      name: \"실시간 스트리밍 채팅\",\n+    });\n+    channel.watch().then(() => setChannel(channel));\n+  };\n  const loadChatClient = async () => {\n    const newChatClient = new StreamChat(\n      process.env.NEXT_PUBLIC_STREAM_API_KEY,\n      {\n        enableWSFallback: true,\n      }\n    );\n    if (newChatClient.user) await newChatClient.disconnectUser();\n    const localUser = localStorage.getItem(\"local_user\");\n    if (!localUser) localStorage.setItem(\"local_user\", generateUsername());\n    const id = localStorage.getItem(\"local_user\");\n    const userToConnect = { id };\n    await newChatClient.connectUser(userToConnect, DevToken(userToConnect.id));\n    setChatClient(newChatClient);\n  };\n  useEffect(() => {\n    loadChatClient();\n  }, []);\n+  useEffect(() => {\n+    if (chatClient) watchChannel();\n+  }, [chatClient]);\n  return (\n    <div className=\"flex max-w-[300px] flex-col gap-y-3 p-5\">\n      {/* 나머지 컴포넌트는 동일한 상태로 유지 */}\n    </div>\n  );\n}\n```\n\n방문자는 이제 livestreaming_chat 고유 ID로 식별되는 Live Stream Chat 채널에 연결되었습니다. 그런 다음 watch() 유틸리티를 사용하여 수신된 메시지를 청취하고 컨텍스트를 업데이트합니다.\n\n채널에 메시지를 게시하려면 다음과 같이 코드를 업데이트하세요:\n\n\n\n```js\n\"use client\";\n\n// 그대로 가져오기\n\nexport default function () {\n  // 변수, 훅 그대로\n  return (\n    <div className=\"flex max-w-[300px] flex-col gap-y-3 p-5\">\n      <div className=\"flex w-[300px] flex-col gap-y-3\">\n        {/* 컴포넌트 나머지 */}\n        <Button\n          className=\"max-w-max\"\n          onClick={() => {\n            if (channel) {\n              channel.sendMessage({\n                text: document.getElementById(\"message_text\").value,\n              });\n              document.getElementById(\"message_text\").value = \"\";\n            }\n          }\n        >\n          Send Message &rarr;\n        </Button>\n      </div>\n    </div>\n  );\n}\n```\n\nonClick 이벤트에서 sendMessage 유틸리티를 사용하여 방 정보에 메시지를 게시할 수 있습니다. 깔끔하게 구현했네요!\n\n이제 손님이 방문자를 위해 고유한 ID를 무작위로 생성하고 메시지 목록을 동적으로 렌더링하며 메시지를 게시할 수 있는 반응형 채팅 인터페이스를 완성했습니다. 이제 Next.js 애플리케이션을 Vercel에 배포합시다.\n\n# Vercel에 배포하기\n\n\n\n이제 코드를 Vercel에 배포할 준비가 되었습니다. 아래 단계를 따라 배포하세요:\n\n- 먼저 앱 코드가 포함된 GitHub 저장소를 만듭니다.\n- 그런 다음 Vercel 대시보드로 이동하여 새 프로젝트를 만듭니다.\n- 새 프로젝트를 방금 만든 GitHub 저장소에 연결합니다.\n- 설정에서 환경 변수를 로컬 .env 파일과 일치하도록 업데이트합니다.\n- 배포를 클릭합니다.\n\n# 마치며\n\n요약하면, 이 튜토리얼은 Next.js와 Stream을 통합하여 동적 실시간 채팅 환경을 구축하는 방법에 대한 포괄적인 안내를 제공합니다. 사용자가 인증 없이 참여할 수 있도록 허용하고 권한을 세밀하게 제어하여 실시간 상호작용을 보다 쉽게 만드는 방법을 배웠습니다.\n\n\n\n# 더 많은 정보\n\n더 자세한 통찰력을 얻으려면 이 게시물에서 인용된 참고 자료를 살펴보세요.\n\n- GitHub 저장소\n- 챗스코프 UI 킷\n- 인증되지 않은 사용자 - 스트림\n- 채널 시청 - 스트림","ogImage":{"url":"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_0.png"},"coverImage":"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_0.png","tag":["Tech"],"readingTime":12},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    h1: \"h1\",\n    ul: \"ul\",\n    li: \"li\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    h2: \"h2\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"다음.js, Stream 및 Chatscope를 사용하여 매력적이고 인터랙티브한 라이브 스트리밍 채팅 앱을 만드는 방법을 배워보세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_0.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"언제나 YouTube와 같은 라이브 스트리밍에서 발견되는 다이나믹한 채팅 경험을 어떻게 만들 수 있을지 궁금해했는데, 누구나 로그인 없이 참여할 수 있는 편리함을 더한 기능을 추가하고 싶었습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Next.js와 Stream을 사용하여 그 경험을 성공적으로 만들어냈습니다. 이 튜토리얼에서는 사용자 권한에 대한 세밀한 제어를 통해 실시간 상호작용을 보다 접근하기 쉽게 만드는 라이브 스트리밍 채팅 환경을 만드는 간단한 방법을 다루고 있습니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"데모\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"기술적인 내용에 들어가기 전에, 이 튜토리얼에서 무엇을 만들게 될지 간단히 소개해 드릴게요 👇🏻\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"준비물\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"구현을 시작하기 위해 다음이 필요합니다:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Node.js 18 또는 그 이후 버전\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Stream 계정\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Vercel 계정\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"새 Stream 애플리케이션 설정하기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 섹션에서는 새 Stream 애플리케이션을 생성하고, 인증 없이 사용자를 활성화하며, 사용자 권한을 정의하여 채널에 대한 읽기 및 게시를 설정하는 방법을 배울 수 있습니다. 시작해봅시다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Stream 계정을 만들고 로그인한 후, + 앱 만들기를 클릭하여 Stream 채팅 애플리케이션 생성을 시작해보세요.\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_1.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"어플리케이션 이름을 입력해주세요. 또한, 웹사이트 배포 지역/기능 근처의 채팅 저장 위치를 선택해주세요. 저는 인도에 있으므로 뭄바이로 설정했습니다.\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_2.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"설정이 완료되면 채팅 개요 화면으로 이동합니다. API 키를 복사하고, 안전한 장소에 저장하여 Next.js 애플리케이션에서 NEXT_PUBLIC_STREAM_API_KEY로 계속 사용할 수 있도록 해주세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_3.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"권한 확인 없이 방문자가 채팅 메시지를 게시할 수 있도록 하려면 아래로 스크롤하여 \\\"인증 확인 비활성화\\\" 토글 버튼을 활성화하세요. 변경 사항을 동기화하려면 제출을 클릭하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_4.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"방문자가 특정 채널의 사용자로서 메시지를 게시할 수 있도록 하려면 그들을 위해 읽기 및 게시 권한을 활성화해야 합니다. 방문자가 채팅 애플리케이션에서 가정할 수 있는 역할과 권한을 구성할 수 있도록 하는 것이 매우 유용합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"사용자 역할을 선택하고 메시징을 스코프로 선택한 다음 편집 버튼을 클릭하여 방문자의 권한을 구성하실 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_5.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"방문자가 메시지를 게시할 수 있도록 하려면 메시지 생성을 검색하고 \\\"메시지 생성\\\" 권한을 활성화하여 채널의 모든 사용자가 메시지를 보낼 수 있도록 허용할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_6.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"방문자들이 채팅 기록을 읽을 수 있도록 하려면 'read channel'을 검색하여 Read Channel 및 Read Channel Members를 활성화하세요. 이렇게 하면 방문자가 메시지를 읽을 뿐만 아니라 해당 메시지를 게시한 사용자도 확인할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_7.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"마지막으로 변경 사항을 동기화하려면 저장을 클릭하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-14-UsingStreamtoBuildaLivestreamChatinNextjs_8.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 방문자가 할 수 있는 것들의 권한과 범위를 구성하는 것을 마쳤습니다. 이제 Chatscope UI Kit을 사용하여 Next.js에서 채팅 사용자 인터페이스를 구축해 봅시다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"새 Next.js 애플리케이션 설정\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 섹션에서는 새로운 Next.js 애플리케이션을 생성하는 방법, shadcn/ui를 설정하는 방법, 해당 애플리케이션의 요구 사항을 파악하여 빠른 구현을 위해 관련 라이브러리를 설치하는 방법을 배우게 될 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"새로운 Next.js 프로젝트를 생성하는 것으로 시작해 봅시다. 터미널을 열고 다음 명령을 실행하세요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"npx create-next-app@latest my-chat-app\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"진행할 때, 다음을 선택하세요:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"TypeScript를 사용할 것인지 물으면 \\\"Yes\\\"를 선택하세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ESLint를 사용할 것인지 물으면 \\\"No\\\"를 선택하세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Tailwind CSS를 사용할 것인지 물으면 \\\"Yes\\\"를 선택하세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"src/ 디렉토리를 사용할 것인지 물으면 \\\"No\\\"를 선택하세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"App Router를 사용할 것인지 물으면 \\\"Yes\\\"를 선택하세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"기본 import alias를 맞춤 설정할 것인지 물으면 \\\"No\\\"를 선택하세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"위 과정을 마치면 프로젝트 디렉토리로 이동하여 다음 명령어를 실행하여 개발 모드에서 앱을 시작할 수 있습니다:```\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"cd my-chat-app\\nnpm run dev\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"앱은 localhost:3000에서 실행 중이어야 합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 프로젝트의 루트에 .env 파일을 만드세요. 위 섹션에서 저장한 항목들을 추가할 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음과 같이 보여야 합니다:```\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"# .\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"env\"\n        }), \"\\n\\n# 스트림 환경 변수\\n\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"NEXT_PUBLIC_STREAM_API_KEY\"\n        }), \"=\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"...\\\"\"\n        }), \"\\n\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"shadcn/ui 컴포넌트 통합\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"채팅 사용자 인터페이스를 빠르게 프로토타입화하기 위해 Next.js와 함께 shadcn/ui를 설정할 것입니다. shadcn/ui는 아름답게 디자인된 컴포넌트들의 모음으로, 여러분의 애플리케이션에 복사하여 붙여넣을 수 있습니다. 아래 명령어를 실행하여 shadcn/ui를 설정하세요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"npx shadcn-ui@latest init\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"구성 파일 components.json을 구성하는 몇 가지 질문에 답해야합니다. 다음을 선택하세요:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"TypeScript를 사용하것이라고 하면 \\\"예\\\"를 선택하세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"사용할 스타일을 선택하라는 프롬프트가 나오면 \\\"기본\\\"을 선택하세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"기본 색상으로 선택하라는 프롬프트가 나오면 \\\"Slate\\\"를 선택하세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"색상에 CSS 변수를 사용하냐고 묻힐 경우 \\\"예\\\"를 선택하세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"위 작업이 완료되면, Next.js 애플리케이션에 React 구성 요소를 쉽게 추가할 수 있는 CLI가 설정됩니다. 아래 명령어를 실행하여 버튼, 입력란, 그리고 텍스트영역 요소를 가져올 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"npx shadcn-ui@latest add button\\nnpx shadcn-ui@latest add input\\nnpx shadcn-ui@latest add textarea\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그것이 끝나면 이제 app/components 디렉토리 안에 ui 디렉토리가 보일 것입니다. 그 안에 button.tsx, input.tsx, textarea.tsx 파일이 있습니다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Chatscope 및 Stream UI Kit를 React에 설치하기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"구현을 더 쉽게 만들기 위해 필요한 작업을 이제 알아봅시다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"먼저, 각 방문자가 익명 사용자로 취급되므로 임의로 생성된 이름(id)으로 그들을 식별해야 합니다. 또한 채널에서 받은 각 메시지는 실시간으로 모든 방문자에게 전파되어야 합니다. 마지막으로, 모든 메시지가 채널로 들어오는 메시지로 표시되도록 해야 합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"위의 요구 사항을 충족하기 위해 다음 명령을 실행하여 필요한 라이브러리를 설치하세요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"npm install @chatscope/chat-ui-kit-react\\nnpm install stream-chat stream-chat-react\\nnpm install unique-username-generator\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음 라이브러리가 설치됩니다:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"unique-username-generator: 고유한 사용자 이름을 생성하는 패키지입니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"stream-chat: Stream의 JavaScript API 클라이언트입니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"stream-chat-react: Stream Chat을 위한 React 훅(그리고 컴포넌트) 라이브러리입니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"@chatscope/chat-ui-kit-react: 채팅 UI의 프로토타입을 위한 React 컴포넌트 라이브러리입니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"자, 이제 반응형 채팅 사용자 인터페이스를 만들어 봅시다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ChatScope와 Stream을 사용하여 채팅 사용자 인터페이스 만들기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 섹션에서는 방문자를 특정 채널에 연결하고, 채팅 기록을 렌더링하고, 메시지를 게시할 수 있도록 하는 React 컴포넌트를 구축하는 방법을 배우게 될 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"먼저, 채팅 메시지 목록을 동적으로 렌더링하는 React 컴포넌트를 만들어 봅시다. Stream 및 Chatscope 라이브러리에서 컴포넌트를 사용할 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"앱 디렉토리에 Messages.tsx 파일을 만들어서 아래 코드를 넣어주세요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { cn } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"@/lib/utils\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { useChannelStateContext } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"stream-chat-react\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Message\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"MessageList\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"@chatscope/chat-ui-kit-react\\\"\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"default\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" { messages } = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useChannelStateContext\"\n        }), \"();\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" (\\n    \", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"MessageList\"\n            }), \">\"]\n          }), \"\\n      {messages?.map((i, index: number) => (\\n        \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Message\"\n            }), \"\\n          \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"key\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"{i.id}\"\n            }), \"\\n          \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"model\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"{{\"\n            }), \"\\n            \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"position:\"\n            }), \" \\\"\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"normal\"\n            }), \"\\\",\\n            \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"sender:\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"i.user\"\n            }), \"?\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \".id\"\n            }), \",\\n            \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"direction:\"\n            }), \" \\\"\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"incoming\"\n            }), \"\\\",\\n            \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"message:\"\n            }), \" `${\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"i.user\"\n            }), \"?\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \".id\"\n            }), \"}\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \":\"\n            }), \" ${\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"i.text\"\n            }), \"}`,\\n            \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"sentTime:\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"i.created_at\"\n            }), \"?\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \".toString\"\n            }), \"(),\\n          }}\\n          \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"{cn(\"\n            }), \"\\n            \\\"\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"bg-white\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"rounded\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"text-black\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"py-2\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"text-xs\"\n            }), \"\\\",\\n            \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"index\"\n            }), \" !== \", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"messages.length\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"-\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"1\"\n            }), \" && \\\"\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"border-b\"\n            }), \"\\\"\\n          )}\\n        />\"]\n          }), \"\\n      ))}\\n    \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"MessageList\"\n            }), \">\"]\n          })]\n        }), \"\\n  );\\n}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"useChannelStateContext\"\n      }), \" 훅을 사용하여 채팅 기록을 가져오고 새로운 메시지를 수신할 수 있습니다. \", _jsx(_components.code, {\n        children: \"MessageList\"\n      }), \" 및 \", _jsx(_components.code, {\n        children: \"Message\"\n      }), \" Chatscope UI 구성 요소를 사용하여 모든 메시지를 채널로 수신하도록 표시하고, 발신자 정보, 메시지 내용 및 타임스탬프와 매핑할 수 있습니다.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 사용자가 채팅 기록을 볼 수 있고 메시지를 동시에 게시할 수 있는 경로를 작성해봅시다. 앱 디렉토리의 page.tsx 파일을 아래 코드로 업데이트해주세요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"use client\\\"\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { useState } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"react\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Messages\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./Messages\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Button\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"@/components/ui/button\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Channel\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Chat\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"stream-chat-react\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Textarea\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"@/components/ui/textarea\\\"\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"default\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" [channel, setChannel] = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useState\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"null\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" [chatClient, setChatClient] = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useState\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"null\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" (\\n    \", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"flex max-w-[300px] flex-col gap-y-3 p-5\\\"\"\n            }), \">\"]\n          }), \"\\n      \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"flex w-[300px] flex-col gap-y-3\\\"\"\n            }), \">\"]\n          }), \"\\n        \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"span\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"border-b border-gray-100 font-semibold\\\"\"\n            }), \">\"]\n          }), \"채팅\", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"span\"\n            }), \">\"]\n          }), \"\\n        {channel && (\\n          \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Chat\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"client\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"{chatClient}\"\n            }), \">\"]\n          }), \"\\n            \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Channel\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"channel\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"{channel}\"\n            }), \">\"]\n          }), \"\\n              \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Messages\"\n            }), \" />\"]\n          }), \"\\n            \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Channel\"\n            }), \">\"]\n          }), \"\\n          \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Chat\"\n            }), \">\"]\n          }), \"\\n        )}\\n        \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Textarea\"\n            }), \"\\n          \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"id\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"message_text\\\"\"\n            }), \"\\n          \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"name\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"message_text\\\"\"\n            }), \"\\n          \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"placeholder\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"메시지...\\\"\"\n            }), \"\\n          \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"min-h-[100px] w-full\\\"\"\n            }), \"\\n        />\"]\n          }), \"\\n        \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Button\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"max-w-max\\\"\"\n            }), \">\"]\n          }), \"\\n          메시지 보내기 \", _jsx(_components.span, {\n            className: \"hljs-symbol\",\n            children: \"&rarr;\"\n          }), \"\\n        \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Button\"\n            }), \">\"]\n          }), \"\\n      \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \">\"]\n          }), \"\\n    \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \">\"]\n          })]\n        }), \"\\n  );\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 새 메시지 렌더링 및 방문자로부터 입력을 받을 수 있는 textarea 요소가 있는 인덱스 라우트를 볼 수 있습니다. 메시지를 게시하는 기능을 구현하기 전에 해당 메시지를 고유한 ID와 연결하려고 할 것입니다. 다음과 같이 코드를 업데이트하십시오:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"use client\\\"\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Messages\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./Messages\\\"\"\n        }), \";\\n+ \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { useEffect, useState } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"react\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Button\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"@/components/ui/button\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Channel\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Chat\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"stream-chat-react\\\"\"\n        }), \";\\n+ \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DevToken\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"StreamChat\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"stream-chat\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Textarea\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"@/components/ui/textarea\\\"\"\n        }), \";\\n+ \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { generateUsername } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"unique-username-generator\\\"\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"default\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" [channel, setChannel] = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useState\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"null\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" [chatClient, setChatClient] = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useState\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"null\"\n        }), \");\\n+ \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"loadChatClient\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") => {\\n+   \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" newChatClient = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"StreamChat\"\n        }), \"(\\n+     process.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"env\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"NEXT_PUBLIC_STREAM_API_KEY\"\n        }), \",\\n+     {\\n+       \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"enableWSFallback\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \",\\n+     }\\n+   );\\n+    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (newChatClient.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"user\"\n        }), \") \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" newChatClient.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"disconnectUser\"\n        }), \"();\\n+   \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" localUser = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"localStorage\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getItem\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"local_user\\\"\"\n        }), \");\\n+   \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (!localUser) \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"localStorage\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setItem\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"local_user\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"generateUsername\"\n        }), \"());\\n+   \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" id = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"localStorage\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getItem\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"local_user\\\"\"\n        }), \");\\n+   \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" userToConnect = { id };\\n+   \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" newChatClient.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"connectUser\"\n        }), \"(userToConnect, \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DevToken\"\n        }), \"(userToConnect.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"));\\n+   \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setChatClient\"\n        }), \"(newChatClient);\\n+ };\\n+ \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useEffect\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" {\\n+   \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"loadChatClient\"\n        }), \"();\\n+ }, []);\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" (\\n    \", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"flex max-w-[300px] flex-col gap-y-3 p-5\\\"\"\n            }), \">\"]\n          }), \"\\n      {/* 나머지 컴포넌트는 그대로 유지 */}\\n    \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \">\"]\n          })]\n        }), \"\\n  );\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 loadChatClient 함수를 한 번 호출하여 웹소켓 연결을 Stream의 메시징 채널로 활성화했습니다. 그런 다음 세션과 연관된 사용자를 연결 해제합니다. 마지막으로, 방문자를 위해 고유한 사용자명을 생성합니다 (localStorage에 없는 경우). 이러한 단계를 통해 방문자가 고유하게 식별됨을 보장합니다.```\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"특정 채널의 메시지를 청취하려면 다음과 같이 코드를 업데이트하세요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"use client\\\"\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// Imports as is\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"default\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" [channel, setChannel] = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useState\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"null\"\n        }), \");\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" [chatClient, setChatClient] = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useState\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"null\"\n        }), \");\\n+  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"watchChannel\"\n        }), \" = (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") => {\\n+    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" channel = chatClient.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"channel\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"messaging\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"livestreaming_chat\\\"\"\n        }), \", {\\n+      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"name\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"실시간 스트리밍 채팅\\\"\"\n        }), \",\\n+    });\\n+    channel.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"watch\"\n        }), \"().\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"then\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setChannel\"\n        }), \"(channel));\\n+  };\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"loadChatClient\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") => {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" newChatClient = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"StreamChat\"\n        }), \"(\\n      process.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"env\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"NEXT_PUBLIC_STREAM_API_KEY\"\n        }), \",\\n      {\\n        \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"enableWSFallback\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \",\\n      }\\n    );\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (newChatClient.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"user\"\n        }), \") \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" newChatClient.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"disconnectUser\"\n        }), \"();\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" localUser = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"localStorage\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getItem\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"local_user\\\"\"\n        }), \");\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (!localUser) \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"localStorage\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setItem\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"local_user\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"generateUsername\"\n        }), \"());\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" id = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"localStorage\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getItem\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"local_user\\\"\"\n        }), \");\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" userToConnect = { id };\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" newChatClient.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"connectUser\"\n        }), \"(userToConnect, \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DevToken\"\n        }), \"(userToConnect.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"));\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"setChatClient\"\n        }), \"(newChatClient);\\n  };\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useEffect\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"loadChatClient\"\n        }), \"();\\n  }, []);\\n+  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"useEffect\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =>\"\n        }), \" {\\n+    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (chatClient) \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"watchChannel\"\n        }), \"();\\n+  }, [chatClient]);\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" (\\n    \", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"flex max-w-[300px] flex-col gap-y-3 p-5\\\"\"\n            }), \">\"]\n          }), \"\\n      {/* 나머지 컴포넌트는 동일한 상태로 유지 */}\\n    \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \">\"]\n          })]\n        }), \"\\n  );\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"방문자는 이제 livestreaming_chat 고유 ID로 식별되는 Live Stream Chat 채널에 연결되었습니다. 그런 다음 watch() 유틸리티를 사용하여 수신된 메시지를 청취하고 컨텍스트를 업데이트합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"채널에 메시지를 게시하려면 다음과 같이 코드를 업데이트하세요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"use client\\\"\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 그대로 가져오기\"\n        }), \"\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"default\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \" (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// 변수, 훅 그대로\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" (\\n    \", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"flex max-w-[300px] flex-col gap-y-3 p-5\\\"\"\n            }), \">\"]\n          }), \"\\n      \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"flex w-[300px] flex-col gap-y-3\\\"\"\n            }), \">\"]\n          }), \"\\n        {/* 컴포넌트 나머지 */}\\n        \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"<\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Button\"\n            }), \"\\n          \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"className\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"max-w-max\\\"\"\n            }), \"\\n          \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"onClick\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"{()\"\n            }), \" =>\"]\n          }), \" {\\n            if (channel) {\\n              channel.sendMessage({\\n                text: document.getElementById(\\\"message_text\\\").value,\\n              });\\n              document.getElementById(\\\"message_text\\\").value = \\\"\\\";\\n            }\\n          }\\n        >\\n          Send Message \", _jsx(_components.span, {\n            className: \"hljs-symbol\",\n            children: \"&rarr;\"\n          }), \"\\n        \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"Button\"\n            }), \">\"]\n          }), \"\\n      \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \">\"]\n          }), \"\\n    \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"</\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"div\"\n            }), \">\"]\n          })]\n        }), \"\\n  );\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"onClick 이벤트에서 sendMessage 유틸리티를 사용하여 방 정보에 메시지를 게시할 수 있습니다. 깔끔하게 구현했네요!\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 손님이 방문자를 위해 고유한 ID를 무작위로 생성하고 메시지 목록을 동적으로 렌더링하며 메시지를 게시할 수 있는 반응형 채팅 인터페이스를 완성했습니다. 이제 Next.js 애플리케이션을 Vercel에 배포합시다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"Vercel에 배포하기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 코드를 Vercel에 배포할 준비가 되었습니다. 아래 단계를 따라 배포하세요:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"먼저 앱 코드가 포함된 GitHub 저장소를 만듭니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"그런 다음 Vercel 대시보드로 이동하여 새 프로젝트를 만듭니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"새 프로젝트를 방금 만든 GitHub 저장소에 연결합니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"설정에서 환경 변수를 로컬 .env 파일과 일치하도록 업데이트합니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"배포를 클릭합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"마치며\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"요약하면, 이 튜토리얼은 Next.js와 Stream을 통합하여 동적 실시간 채팅 환경을 구축하는 방법에 대한 포괄적인 안내를 제공합니다. 사용자가 인증 없이 참여할 수 있도록 허용하고 권한을 세밀하게 제어하여 실시간 상호작용을 보다 쉽게 만드는 방법을 배웠습니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"더 많은 정보\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"더 자세한 통찰력을 얻으려면 이 게시물에서 인용된 참고 자료를 살펴보세요.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"GitHub 저장소\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"챗스코프 UI 킷\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"인증되지 않은 사용자 - 스트림\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"채널 시청 - 스트림\"\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true}