{"pageProps":{"post":{"title":"Nodejsλ¥Ό μ‚¬μ©ν•μ—¬ MongoDBμ—μ„ μ¤‘μ²©λ λ°°μ—΄ ν•„λ“λ¥Ό μ—…λ°μ΄νΈν•λ” λ°©λ²•","description":"","date":"2024-06-23 13:20","slug":"2024-06-23-HowtoupdatenestedarrayfieldinMongoDBusingNodejs","content":"\n\nλ½κ³ λ””λΉ„μ—μ„ λ¬Έμ„ λ‚΄ λ°°μ—΄ μ—…λ°μ΄νΈν•κΈ°.\n\n![μ΄λ―Έμ§€](/assets/img/2024-06-23-HowtoupdatenestedarrayfieldinMongoDBusingNodejs_0.png)\n\nNode.jsμ™€ λ½κ³ λ””λΉ„λ¥Ό μ΄μ©ν•μ—¬ μ• ν”λ¦¬μΌ€μ΄μ… λ°°μ—΄ λ‚΄ νΉμ • applicationIdμ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈν•λ ¤λ©΄ $set μ—°μ‚°μλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. $ μ—°μ‚°μλ” μΏΌλ¦¬ μ΅°κ±΄κ³Ό μΌμΉν•λ” μ²« λ²μ§Έ λ°°μ—΄ μ”μ†λ¥Ό μ—…λ°μ΄νΈν•  μ μλ„λ΅ ν•©λ‹λ‹¤.\n\n```js\n// applications λ°°μ—΄μ—μ„ μ§€μ •λ applicationIdλ¥Ό ν¬ν•¨ν•λ” λ¬Έμ„λ¥Ό μ°Ύλ” μΏΌλ¦¬.\nconst filter = { _id: userId, 'applications.applicationId': applicationId };\n\n// ν™μ„± μƒνƒλ¥Ό μ„¤μ •ν•λ” μ—…λ°μ΄νΈ.\nconst updateDoc = {\n  // $set λ° $ μ—°μ‚°μ ν™μ©: μΌμΉν•λ” applicationIdμ active ν•„λ“λ¥Ό μ—…λ°μ΄νΈ.\n  $set: { 'applications.$.active': newStatus }\n};\n\nconst result = await collection.updateOne(filter, updateDoc);\n```\n\n<div class=\"content-ad\"></div>\n\n## μ„¤λ…:\n\n- ν•„ν„°: ν•„ν„° κ°μ²΄λ” νΉμ • userId(λλ” λ¬Έμ„μ λ‹¤λ¥Έ κ³ μ  μ‹λ³„μ)μ™€ applications λ°°μ—΄ λ‚΄μ applicationIdλ¥Ό κ°€μ§„ λ¬Έμ„λ¥Ό μ°Ύκ³  μλ”μ§€λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤.\n- μ—…λ°μ΄νΈ: $set μ—°μ‚°μλ” μΌμΉν•λ” λ°°μ—΄ μ”μ†μ active ν•„λ“λ¥Ό μ—…λ°μ΄νΈν•κΈ° μ„ν•΄ μ„μΉ $ μ—°μ‚°μμ™€ ν•¨κ» μ‚¬μ©λ©λ‹λ‹¤.\n\n## μ΄μ  μ¤‘μ²©λ λ°°μ—΄μ—μ„ μ—¬λ¬ applicationIdμ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈν•λ” λ°©λ²•:\n\nν• λ²μ μ‘μ—…μ—μ„ applications λ°°μ—΄ λ‚΄μ μ—¬λ¬ applicationId ν•­λ©μ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈν•λ ¤λ©΄ $set μ—°μ‚°μλ¥Ό $[`identifier`] λ°°μ—΄ ν•„ν„°μ™€ ν•¨κ» μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ λ°°μ—΄ λ‚΄μ μ”μ†λ¥Ό μΌμΉμ‹ν‚¤κ³  μ΄μ— λ”°λΌ μ—…λ°μ΄νΈν•  μ μλ” μ—¬λ¬ μ΅°κ±΄μ„ μ§€μ •ν•  μ μμµλ‹λ‹¤.\n\n<div class=\"content-ad\"></div>\n\n# μ—¬λ¬ applicationId ν•­λ©μ„ μ—…λ°μ΄νΈν•λ” λ‹¨κ³„:\n\n- MongoDBμ— μ—°κ²°: MongoDB ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ² μ΄μ¤μ— μ—°κ²°ν•©λ‹λ‹¤.\n- μΏΌλ¦¬ μ •μ: μ—…λ°μ΄νΈν•  λ¬Έμ„λ¥Ό μ§€μ •ν•©λ‹λ‹¤.\n- Array Filtersμ™€ $set μ‚¬μ©: λ°°μ—΄ ν•„ν„°λ¥Ό μ‚¬μ©ν•μ—¬ μ—¬λ¬ applicationId ν•­λ©μ„ μΌμΉμ‹ν‚¤κ³  μ—…λ°μ΄νΈν•©λ‹λ‹¤.\n- μ—…λ°μ΄νΈ μ²λ¦¬: μ—…λ°μ΄νΈ λ…λ Ήμ„ μ‹¤ν–‰ν•κ³  μ‘λ‹µμ„ μ²λ¦¬ν•©λ‹λ‹¤.\n\n# μμ‹ μ½”λ“\n\nλ‹¤μμ€ Node.jsμ™€ MongoDBλ¥Ό μ‚¬μ©ν•μ—¬ μ΄ μ‘μ—…μ„ μν–‰ν•λ” λ°©λ²•μ…λ‹λ‹¤:\n\n<div class=\"content-ad\"></div>\n\n```js\r\nconst { MongoClient } = require('mongodb');\r\n\r\n// κ·€ν•μ MongoDB μ—°κ²° λ¬Έμμ—΄κ³Ό λ°μ΄ν„°λ² μ΄μ¤ μ΄λ¦„μΌλ΅ λ€μ²΄ν•©λ‹λ‹¤.\r\nconst uri = 'mongodb://localhost:27017';\r\nconst dbName = 'κ·€ν•μλ°μ΄ν„°λ² μ΄μ¤μ΄λ¦„';\r\nconst collectionName = 'κ·€ν•μμ»¬λ ‰μ…μ΄λ¦„';\r\n\r\nasync function updateApplicationStatu(userId, updates) {\r\n  const client = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true });\r\n\r\n  try {\r\n    await client.connect();\r\n    console.log('MongoDBμ— μ—°κ²°λ¨');\r\n\r\n    const database = client.db(dbName);\r\n    const collection = database.collection(collectionName);\r\n\r\n    // μ‚¬μ©μ λ¬Έμ„ κ°€μ Έμ¤κΈ°\r\n    const userDoc = await collection.findOne({ _id: userId });\r\n\r\n    if (!userDoc) {\r\n      console.log('μ‚¬μ©μ λ¬Έμ„λ¥Ό μ°Ύμ„ μ μ—†μ');\r\n      return;\r\n    }\r\n\r\n    // applications λ°°μ—΄μ„ μ΄κΈ°ν™”\r\n    if (!userDoc.applications) {\r\n      userDoc.applications = [];\r\n    }\r\n\r\n    const updateOperations = [];\r\n    const applicationIds = userDoc.applications.map(app => app.applicationId);\r\n\r\n    // μ¤‘μ²© λ°°μ—΄ λ‚΄ μ—¬λ¬ applicationIdμ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈ\r\n    updates.forEach(update => {\r\n      if (applicationIds.includes(update.applicationId)) {\r\n        // κΈ°μ΅΄ μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒλ¥Ό μ—…λ°μ΄νΈ\r\n        updateOperations.push({\r\n          updateOne: {\r\n            filter: { _id: userId, 'applications.applicationId': update.applicationId },\r\n            update: { \r\n              $set: { 'applications.$.active': update.active },\r\n              $addToSet: { updatedBy: req.session.userId }\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        // μ΅΄μ¬ν•μ§€ μ•λ” κ²½μ° μƒλ΅μ΄ μ• ν”λ¦¬μΌ€μ΄μ… μ¶”κ°€\r\n        updateOperations.push({\r\n          updateOne: {\r\n            filter: { _id: userId },\r\n            update: {\r\n              $push: {\r\n                applications: { applicationId: update.applicationId, active: update.active }\r\n              }\r\n            },\r\n            $addToSet: { updatedBy: req.session.userId }\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    // λ€λ‰ μ“°κΈ° μ‘μ—… μν–‰\r\n    const result = await collection.bulkWrite(updateOperations);\r\n\r\n    if (result.modifiedCount > 0 || result.insertedCount > 0) {\r\n      console.log('μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒκ°€ μ„±κ³µμ μΌλ΅ μ—…λ°μ΄νΈλ¨.');\r\n    } else {\r\n      console.log('μΌμΉν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ—†κ±°λ‚ λ³€κ²½λ λ‚΄μ©μ΄ μ—†μµλ‹λ‹¤.');\r\n    }\r\n  } catch (error) {\r\n    console.error('μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒ μ—…λ°μ΄νΈ μ¤λ¥:', error);\r\n  } finally {\r\n    await client.close();\r\n  }\r\n}\r\n\r\n// μ‚¬μ© μμ‹: μ—¬λ¬ μ• ν”λ¦¬μΌ€μ΄μ… μ—…λ°μ΄νΈ\r\nupdateApplicationStatuses('userId123', [\r\n  { applicationId: 'Apple', active: true },\r\n  { applicationId: 'Mango', active: false },\r\n  { applicationId: 'Orange', active: true }\r\n]);\r\n```\r\n\r\n# μ„¤λ…\r\n\r\n- MongoDB μ—°κ²°: MongoDB μΈμ¤ν„΄μ¤μ— μ—°κ²°μ„ μ„¤μ •ν•©λ‹λ‹¤.\r\n- λ°μ΄ν„°λ² μ΄μ¤ λ° μ»¬λ ‰μ…: μ‘μ—…ν•  λ°μ΄ν„°λ² μ΄μ¤ λ° μ»¬λ ‰μ…μ„ μ§€μ •ν•©λ‹λ‹¤.\r\n- ν•„ν„°: ν•„ν„° κ°μ²΄λ” userId λλ” λ¬Έμ„μ λ‹¤λ¥Έ κ³ μ  μ‹λ³„μλ¥Ό κΈ°λ°μΌλ΅ λ¬Έμ„λ¥Ό μ‹λ³„ν•©λ‹λ‹¤.\r\n- μ—…λ°μ΄νΈ μ¤λΈμ νΈ: updateDocμ€ $set μ—°μ‚°μλ¥Ό μ‚¬μ©ν•μ—¬ μ§€μ •λ applicationId μ—”νΈλ¦¬μ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈν•©λ‹λ‹¤. ν•„λ“ κ²½λ΅λ” λ°°μ—΄ ν•„ν„°λ¥Ό λ™μ μΌλ΅ μ‚¬μ©ν•κΈ° μ„ν•΄ κµ¬μ„±λ©λ‹λ‹¤.\r\n- λ°°μ—΄ ν•„ν„°: arrayFilters μµμ…μ„ μ‚¬μ©ν•μ—¬ μ–΄λ–¤ μ”μ†λ¥Ό μ—…λ°μ΄νΈν•΄μ•Ό ν•λ”μ§€λ¥Ό μ •μν•λ” μ΅°κ±΄μ„ μ •μν•©λ‹λ‹¤. κ° ν•„ν„°λ” μ—…λ°μ΄νΈν•΄μ•Ό ν•  applicationIdμ— ν•΄λ‹Ήν•©λ‹λ‹¤.\r\n- updatedBy ν•„λ“: updatedByλ” applications λ°°μ—΄μ μΌλ¶€κ°€ μ•„λ‹ λ¬Έμ„μ λ³„λ„ ν•„λ“μ…λ‹λ‹¤. μ”κµ¬ μ‚¬ν•­μ— λ”°λΌμ„ applications λ°°μ—΄μ—μ„ μμ •μ΄λ‚ μ¶”κ°€κ°€ μμ„ λ•λ§λ‹¤ updatedBy ν•„λ“λ¥Ό μ—…λ°μ΄νΈν•΄μ•Ό ν•©λ‹λ‹¤.\r\n- κ²°κ³Ό μ²λ¦¬: μ—…λ°μ΄νΈ μ‘μ—…μ΄ λ¬Έμ„λ¥Ό μμ •ν–λ”μ§€ ν™•μΈν•κ³  κ²°κ³Όλ¥Ό λ΅κ·Έμ— λ‚¨κΉλ‹λ‹¤.\r\n\r\nλ§μ•½ applicationIdκ°€ μ΅΄μ¬ν•μ§€ μ•λ” κ²½μ° ν•΄λ‹Ή ν™μ„± μƒνƒμ™€ ν•¨κ» μ¶”κ°€λμ–΄μ•Ό ν•©λ‹λ‹¤. μ΄λ¥Ό μ„ν•΄ μΏΌλ¦¬μ™€ μ—…λ°μ΄νΈ μ‘μ—…μ„ νΌν•©ν•΄ μ‚¬μ©ν•©λ‹λ‹¤.\r\n\n\n<div class=\"content-ad\"></div>\n\n# λ‹¨κ³„:\n\n- λ¬Έμ„ κ°€μ Έμ¤κΈ° λ° ν™•μΈ: _idλ³„λ΅ λ¬Έμ„λ¥Ό κ°€μ Έμ™€μ„ applications λ°°μ—΄μ κ° applicationIdλ¥Ό ν™•μΈν•©λ‹λ‹¤.\n- μ—…λ°μ΄νΈ μν–‰: applicationIdκ°€ μλ”μ§€ μ—¬λ¶€μ— λ”°λΌ κΈ°μ΅΄ κ°μ²΄λ¥Ό μ—…λ°μ΄νΈν•κ±°λ‚ μƒλ΅μ΄ κ°μ²΄λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤.\n\n# μμ‹ μ½”λ“\n\nλ‹¤μμ€ Node.jsμ™€ MongoDBλ¥Ό μ‚¬μ©ν•μ—¬ μ΄ μ‘μ—…μ„ μν–‰ν•λ” μ „μ²΄ μμ‹ μ½”λ“μ…λ‹λ‹¤:\n\n<div class=\"content-ad\"></div>\n\n```js\nconst { MongoClient } = require('mongodb');\n\n// κ·€ν•μ MongoDB μ—°κ²° λ¬Έμμ—΄ λ° λ°μ΄ν„°λ² μ΄μ¤ μ΄λ¦„μΌλ΅ λ€μ²΄ν•©λ‹λ‹¤.\nconst uri = 'mongodb://localhost:27017';\nconst dbName = 'λ‹Ήμ‹ μλ°μ΄ν„°λ² μ΄μ¤μ΄λ¦„';\nconst collectionName = 'λ‹Ήμ‹ μμ»¬λ ‰μ…μ΄λ¦„';\n\nasync function updateApplicationStatuses(userId, updates) {\n  const client = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true });\n\n  try {\n    await client.connect();\n    console.log('MongoDBμ— μ—°κ²°λμ—μµλ‹λ‹¤.');\n\n    const database = client.db(dbName);\n    const collection = database.collection(collectionName);\n\n    // μ‚¬μ©μ λ¬Έμ„ κ²€μƒ‰\n    const userDoc = await collection.findOne({ _id: userId });\n\n    if (!userDoc) {\n      console.log('μ‚¬μ©μ λ¬Έμ„λ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤.');\n      return;\n    }\n\n    // applications λ°°μ—΄μ„ μ΄κΈ°ν™”ν•©λ‹λ‹¤.\n    if (!userDoc.applications) {\n      userDoc.applications = [];\n    }\n\n    const updateOperations = [];\n    const applicationIds = userDoc.applications.map(app => app.applicationId);\n\n    updates.forEach(update => {\n      if (applicationIds.includes(update.applicationId)) {\n        // κΈ°μ΅΄ μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒ μ—…λ°μ΄νΈ\n        updateOperations.push({\n          updateOne: {\n            filter: { _id: userId, 'applications.applicationId': update.applicationId },\n            update: { $set: { 'applications.$.active': update.active } }\n          }\n        });\n      } else {\n        // μƒλ΅μ΄ μ• ν”λ¦¬μΌ€μ΄μ… μ¶”κ°€\n        updateOperations.push({\n          updateOne: {\n            filter: { _id: userId },\n            update: {\n              $push: {\n                applications: { applicationId: update.applicationId, active: update.active }\n              }\n            }\n          }\n        });\n      }\n    });\n\n    // μΌκ΄„ μ‘μ„± μ‘μ—… μν–‰\n    const result = await collection.bulkWrite(updateOperations);\n\n    if (result.modifiedCount > 0 || result.insertedCount > 0) {\n      console.log('μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒλ¥Ό μ„±κ³µμ μΌλ΅ μ—…λ°μ΄νΈν–μµλ‹λ‹¤.');\n    } else {\n      console.log('μΌμΉν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ—†κ±°λ‚ λ³€κ²½ μ‚¬ν•­μ΄ μ—†μµλ‹λ‹¤.');\n    }\n  } catch (error) {\n    console.error('μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒλ¥Ό μ—…λ°μ΄νΈν•λ” μ¤‘ μ¤λ¥ λ°μƒ:', error);\n  } finally {\n    await client.close();\n  }\n}\n\n// μμ  μ‚¬μ©λ²•: μ—¬λ¬ μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ—…λ°μ΄νΈ\nupdateApplicationStatuses('userId123', [\n  { applicationId: 'Apple', active: true },\n  { applicationId: 'Mango', active: false },\n  { applicationId: 'Orange', active: true }\n]);\n```\n\nλ§μ•½ λ„μ›€μ΄ λμ—λ‹¤λ©΄ π‘ π‘ λ¥Ό μΆ€ λ°›μ•„λ„ κ΄μ°®μΌμ„Έμ”? λ‹¤λ¥Έ μ‚¬λλ“¤μ—κ²λ„ λ„μ›€μ΄ λ  μ μλ„λ΅ κΈ€μ„ κ³µμ ν•΄μ£Όμ‹λ©΄ μ •λ§ κ°μ‚¬ν•κ² μµλ‹λ‹¤ :)\n\nμ–Έμ λ‚ ν™νΈν•΄ μ£Όμ„Έμ”...\n\n<img src=\"https://miro.medium.com/v2/resize:fit:156/0*9zGASKmAOha2Ov3S.gif\" />\n","ogImage":{"url":"/assets/img/2024-06-23-HowtoupdatenestedarrayfieldinMongoDBusingNodejs_0.png"},"coverImage":"/assets/img/2024-06-23-HowtoupdatenestedarrayfieldinMongoDBusingNodejs_0.png","tag":["Tech"],"readingTime":8},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>λ½κ³ λ””λΉ„μ—μ„ λ¬Έμ„ λ‚΄ λ°°μ—΄ μ—…λ°μ΄νΈν•κΈ°.</p>\n<p><img src=\"/assets/img/2024-06-23-HowtoupdatenestedarrayfieldinMongoDBusingNodejs_0.png\" alt=\"μ΄λ―Έμ§€\"></p>\n<p>Node.jsμ™€ λ½κ³ λ””λΉ„λ¥Ό μ΄μ©ν•μ—¬ μ• ν”λ¦¬μΌ€μ΄μ… λ°°μ—΄ λ‚΄ νΉμ • applicationIdμ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈν•λ ¤λ©΄ $set μ—°μ‚°μλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤. $ μ—°μ‚°μλ” μΏΌλ¦¬ μ΅°κ±΄κ³Ό μΌμΉν•λ” μ²« λ²μ§Έ λ°°μ—΄ μ”μ†λ¥Ό μ—…λ°μ΄νΈν•  μ μλ„λ΅ ν•©λ‹λ‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// applications λ°°μ—΄μ—μ„ μ§€μ •λ applicationIdλ¥Ό ν¬ν•¨ν•λ” λ¬Έμ„λ¥Ό μ°Ύλ” μΏΌλ¦¬.</span>\n<span class=\"hljs-keyword\">const</span> filter = { <span class=\"hljs-attr\">_id</span>: userId, <span class=\"hljs-string\">'applications.applicationId'</span>: applicationId };\n\n<span class=\"hljs-comment\">// ν™μ„± μƒνƒλ¥Ό μ„¤μ •ν•λ” μ—…λ°μ΄νΈ.</span>\n<span class=\"hljs-keyword\">const</span> updateDoc = {\n  <span class=\"hljs-comment\">// $set λ° $ μ—°μ‚°μ ν™μ©: μΌμΉν•λ” applicationIdμ active ν•„λ“λ¥Ό μ—…λ°μ΄νΈ.</span>\n  <span class=\"hljs-attr\">$set</span>: { <span class=\"hljs-string\">'applications.$.active'</span>: newStatus }\n};\n\n<span class=\"hljs-keyword\">const</span> result = <span class=\"hljs-keyword\">await</span> collection.<span class=\"hljs-title function_\">updateOne</span>(filter, updateDoc);\n</code></pre>\n<div class=\"content-ad\"></div>\n<h2>μ„¤λ…:</h2>\n<ul>\n<li>ν•„ν„°: ν•„ν„° κ°μ²΄λ” νΉμ • userId(λλ” λ¬Έμ„μ λ‹¤λ¥Έ κ³ μ  μ‹λ³„μ)μ™€ applications λ°°μ—΄ λ‚΄μ applicationIdλ¥Ό κ°€μ§„ λ¬Έμ„λ¥Ό μ°Ύκ³  μλ”μ§€λ¥Ό λ‚νƒ€λƒ…λ‹λ‹¤.</li>\n<li>μ—…λ°μ΄νΈ: $set μ—°μ‚°μλ” μΌμΉν•λ” λ°°μ—΄ μ”μ†μ active ν•„λ“λ¥Ό μ—…λ°μ΄νΈν•κΈ° μ„ν•΄ μ„μΉ $ μ—°μ‚°μμ™€ ν•¨κ» μ‚¬μ©λ©λ‹λ‹¤.</li>\n</ul>\n<h2>μ΄μ  μ¤‘μ²©λ λ°°μ—΄μ—μ„ μ—¬λ¬ applicationIdμ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈν•λ” λ°©λ²•:</h2>\n<p>ν• λ²μ μ‘μ—…μ—μ„ applications λ°°μ—΄ λ‚΄μ μ—¬λ¬ applicationId ν•­λ©μ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈν•λ ¤λ©΄ $set μ—°μ‚°μλ¥Ό $[<code>identifier</code>] λ°°μ—΄ ν•„ν„°μ™€ ν•¨κ» μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ λ°°μ—΄ λ‚΄μ μ”μ†λ¥Ό μΌμΉμ‹ν‚¤κ³  μ΄μ— λ”°λΌ μ—…λ°μ΄νΈν•  μ μλ” μ—¬λ¬ μ΅°κ±΄μ„ μ§€μ •ν•  μ μμµλ‹λ‹¤.</p>\n<div class=\"content-ad\"></div>\n<h1>μ—¬λ¬ applicationId ν•­λ©μ„ μ—…λ°μ΄νΈν•λ” λ‹¨κ³„:</h1>\n<ul>\n<li>MongoDBμ— μ—°κ²°: MongoDB ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ² μ΄μ¤μ— μ—°κ²°ν•©λ‹λ‹¤.</li>\n<li>μΏΌλ¦¬ μ •μ: μ—…λ°μ΄νΈν•  λ¬Έμ„λ¥Ό μ§€μ •ν•©λ‹λ‹¤.</li>\n<li>Array Filtersμ™€ $set μ‚¬μ©: λ°°μ—΄ ν•„ν„°λ¥Ό μ‚¬μ©ν•μ—¬ μ—¬λ¬ applicationId ν•­λ©μ„ μΌμΉμ‹ν‚¤κ³  μ—…λ°μ΄νΈν•©λ‹λ‹¤.</li>\n<li>μ—…λ°μ΄νΈ μ²λ¦¬: μ—…λ°μ΄νΈ λ…λ Ήμ„ μ‹¤ν–‰ν•κ³  μ‘λ‹µμ„ μ²λ¦¬ν•©λ‹λ‹¤.</li>\n</ul>\n<h1>μμ‹ μ½”λ“</h1>\n<p>λ‹¤μμ€ Node.jsμ™€ MongoDBλ¥Ό μ‚¬μ©ν•μ—¬ μ΄ μ‘μ—…μ„ μν–‰ν•λ” λ°©λ²•μ…λ‹λ‹¤:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> { <span class=\"hljs-title class_\">MongoClient</span> } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mongodb'</span>);\r\n\r\n<span class=\"hljs-comment\">// κ·€ν•μ MongoDB μ—°κ²° λ¬Έμμ—΄κ³Ό λ°μ΄ν„°λ² μ΄μ¤ μ΄λ¦„μΌλ΅ λ€μ²΄ν•©λ‹λ‹¤.</span>\r\n<span class=\"hljs-keyword\">const</span> uri = <span class=\"hljs-string\">'mongodb://localhost:27017'</span>;\r\n<span class=\"hljs-keyword\">const</span> dbName = <span class=\"hljs-string\">'κ·€ν•μλ°μ΄ν„°λ² μ΄μ¤μ΄λ¦„'</span>;\r\n<span class=\"hljs-keyword\">const</span> collectionName = <span class=\"hljs-string\">'κ·€ν•μμ»¬λ ‰μ…μ΄λ¦„'</span>;\r\n\r\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateApplicationStatu</span>(<span class=\"hljs-params\">userId, updates</span>) {\r\n  <span class=\"hljs-keyword\">const</span> client = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MongoClient</span>(uri, { <span class=\"hljs-attr\">useNewUrlParser</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-attr\">useUnifiedTopology</span>: <span class=\"hljs-literal\">true</span> });\r\n\r\n  <span class=\"hljs-keyword\">try</span> {\r\n    <span class=\"hljs-keyword\">await</span> client.<span class=\"hljs-title function_\">connect</span>();\r\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'MongoDBμ— μ—°κ²°λ¨'</span>);\r\n\r\n    <span class=\"hljs-keyword\">const</span> database = client.<span class=\"hljs-title function_\">db</span>(dbName);\r\n    <span class=\"hljs-keyword\">const</span> collection = database.<span class=\"hljs-title function_\">collection</span>(collectionName);\r\n\r\n    <span class=\"hljs-comment\">// μ‚¬μ©μ λ¬Έμ„ κ°€μ Έμ¤κΈ°</span>\r\n    <span class=\"hljs-keyword\">const</span> userDoc = <span class=\"hljs-keyword\">await</span> collection.<span class=\"hljs-title function_\">findOne</span>({ <span class=\"hljs-attr\">_id</span>: userId });\r\n\r\n    <span class=\"hljs-keyword\">if</span> (!userDoc) {\r\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μ‚¬μ©μ λ¬Έμ„λ¥Ό μ°Ύμ„ μ μ—†μ'</span>);\r\n      <span class=\"hljs-keyword\">return</span>;\r\n    }\r\n\r\n    <span class=\"hljs-comment\">// applications λ°°μ—΄μ„ μ΄κΈ°ν™”</span>\r\n    <span class=\"hljs-keyword\">if</span> (!userDoc.<span class=\"hljs-property\">applications</span>) {\r\n      userDoc.<span class=\"hljs-property\">applications</span> = [];\r\n    }\r\n\r\n    <span class=\"hljs-keyword\">const</span> updateOperations = [];\r\n    <span class=\"hljs-keyword\">const</span> applicationIds = userDoc.<span class=\"hljs-property\">applications</span>.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">app</span> =></span> app.<span class=\"hljs-property\">applicationId</span>);\r\n\r\n    <span class=\"hljs-comment\">// μ¤‘μ²© λ°°μ—΄ λ‚΄ μ—¬λ¬ applicationIdμ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈ</span>\r\n    updates.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">update</span> =></span> {\r\n      <span class=\"hljs-keyword\">if</span> (applicationIds.<span class=\"hljs-title function_\">includes</span>(update.<span class=\"hljs-property\">applicationId</span>)) {\r\n        <span class=\"hljs-comment\">// κΈ°μ΅΄ μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒλ¥Ό μ—…λ°μ΄νΈ</span>\r\n        updateOperations.<span class=\"hljs-title function_\">push</span>({\r\n          <span class=\"hljs-attr\">updateOne</span>: {\r\n            <span class=\"hljs-attr\">filter</span>: { <span class=\"hljs-attr\">_id</span>: userId, <span class=\"hljs-string\">'applications.applicationId'</span>: update.<span class=\"hljs-property\">applicationId</span> },\r\n            <span class=\"hljs-attr\">update</span>: { \r\n              <span class=\"hljs-attr\">$set</span>: { <span class=\"hljs-string\">'applications.$.active'</span>: update.<span class=\"hljs-property\">active</span> },\r\n              <span class=\"hljs-attr\">$addToSet</span>: { <span class=\"hljs-attr\">updatedBy</span>: req.<span class=\"hljs-property\">session</span>.<span class=\"hljs-property\">userId</span> }\r\n            }\r\n          }\r\n        });\r\n      } <span class=\"hljs-keyword\">else</span> {\r\n        <span class=\"hljs-comment\">// μ΅΄μ¬ν•μ§€ μ•λ” κ²½μ° μƒλ΅μ΄ μ• ν”λ¦¬μΌ€μ΄μ… μ¶”κ°€</span>\r\n        updateOperations.<span class=\"hljs-title function_\">push</span>({\r\n          <span class=\"hljs-attr\">updateOne</span>: {\r\n            <span class=\"hljs-attr\">filter</span>: { <span class=\"hljs-attr\">_id</span>: userId },\r\n            <span class=\"hljs-attr\">update</span>: {\r\n              <span class=\"hljs-attr\">$push</span>: {\r\n                <span class=\"hljs-attr\">applications</span>: { <span class=\"hljs-attr\">applicationId</span>: update.<span class=\"hljs-property\">applicationId</span>, <span class=\"hljs-attr\">active</span>: update.<span class=\"hljs-property\">active</span> }\r\n              }\r\n            },\r\n            <span class=\"hljs-attr\">$addToSet</span>: { <span class=\"hljs-attr\">updatedBy</span>: req.<span class=\"hljs-property\">session</span>.<span class=\"hljs-property\">userId</span> }\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    <span class=\"hljs-comment\">// λ€λ‰ μ“°κΈ° μ‘μ—… μν–‰</span>\r\n    <span class=\"hljs-keyword\">const</span> result = <span class=\"hljs-keyword\">await</span> collection.<span class=\"hljs-title function_\">bulkWrite</span>(updateOperations);\r\n\r\n    <span class=\"hljs-keyword\">if</span> (result.<span class=\"hljs-property\">modifiedCount</span> > <span class=\"hljs-number\">0</span> || result.<span class=\"hljs-property\">insertedCount</span> > <span class=\"hljs-number\">0</span>) {\r\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒκ°€ μ„±κ³µμ μΌλ΅ μ—…λ°μ΄νΈλ¨.'</span>);\r\n    } <span class=\"hljs-keyword\">else</span> {\r\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μΌμΉν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ—†κ±°λ‚ λ³€κ²½λ λ‚΄μ©μ΄ μ—†μµλ‹λ‹¤.'</span>);\r\n    }\r\n  } <span class=\"hljs-keyword\">catch</span> (error) {\r\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">'μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒ μ—…λ°μ΄νΈ μ¤λ¥:'</span>, error);\r\n  } <span class=\"hljs-keyword\">finally</span> {\r\n    <span class=\"hljs-keyword\">await</span> client.<span class=\"hljs-title function_\">close</span>();\r\n  }\r\n}\r\n\r\n<span class=\"hljs-comment\">// μ‚¬μ© μμ‹: μ—¬λ¬ μ• ν”λ¦¬μΌ€μ΄μ… μ—…λ°μ΄νΈ</span>\r\n<span class=\"hljs-title function_\">updateApplicationStatuses</span>(<span class=\"hljs-string\">'userId123'</span>, [\r\n  { <span class=\"hljs-attr\">applicationId</span>: <span class=\"hljs-string\">'Apple'</span>, <span class=\"hljs-attr\">active</span>: <span class=\"hljs-literal\">true</span> },\r\n  { <span class=\"hljs-attr\">applicationId</span>: <span class=\"hljs-string\">'Mango'</span>, <span class=\"hljs-attr\">active</span>: <span class=\"hljs-literal\">false</span> },\r\n  { <span class=\"hljs-attr\">applicationId</span>: <span class=\"hljs-string\">'Orange'</span>, <span class=\"hljs-attr\">active</span>: <span class=\"hljs-literal\">true</span> }\r\n]);\n</code></pre>\n<h1>μ„¤λ…</h1>\n<ul>\n<li>MongoDB μ—°κ²°: MongoDB μΈμ¤ν„΄μ¤μ— μ—°κ²°μ„ μ„¤μ •ν•©λ‹λ‹¤.</li>\n<li>λ°μ΄ν„°λ² μ΄μ¤ λ° μ»¬λ ‰μ…: μ‘μ—…ν•  λ°μ΄ν„°λ² μ΄μ¤ λ° μ»¬λ ‰μ…μ„ μ§€μ •ν•©λ‹λ‹¤.</li>\n<li>ν•„ν„°: ν•„ν„° κ°μ²΄λ” userId λλ” λ¬Έμ„μ λ‹¤λ¥Έ κ³ μ  μ‹λ³„μλ¥Ό κΈ°λ°μΌλ΅ λ¬Έμ„λ¥Ό μ‹λ³„ν•©λ‹λ‹¤.</li>\n<li>μ—…λ°μ΄νΈ μ¤λΈμ νΈ: updateDocμ€ $set μ—°μ‚°μλ¥Ό μ‚¬μ©ν•μ—¬ μ§€μ •λ applicationId μ—”νΈλ¦¬μ ν™μ„± μƒνƒλ¥Ό μ—…λ°μ΄νΈν•©λ‹λ‹¤. ν•„λ“ κ²½λ΅λ” λ°°μ—΄ ν•„ν„°λ¥Ό λ™μ μΌλ΅ μ‚¬μ©ν•κΈ° μ„ν•΄ κµ¬μ„±λ©λ‹λ‹¤.</li>\n<li>λ°°μ—΄ ν•„ν„°: arrayFilters μµμ…μ„ μ‚¬μ©ν•μ—¬ μ–΄λ–¤ μ”μ†λ¥Ό μ—…λ°μ΄νΈν•΄μ•Ό ν•λ”μ§€λ¥Ό μ •μν•λ” μ΅°κ±΄μ„ μ •μν•©λ‹λ‹¤. κ° ν•„ν„°λ” μ—…λ°μ΄νΈν•΄μ•Ό ν•  applicationIdμ— ν•΄λ‹Ήν•©λ‹λ‹¤.</li>\n<li>updatedBy ν•„λ“: updatedByλ” applications λ°°μ—΄μ μΌλ¶€κ°€ μ•„λ‹ λ¬Έμ„μ λ³„λ„ ν•„λ“μ…λ‹λ‹¤. μ”κµ¬ μ‚¬ν•­μ— λ”°λΌμ„ applications λ°°μ—΄μ—μ„ μμ •μ΄λ‚ μ¶”κ°€κ°€ μμ„ λ•λ§λ‹¤ updatedBy ν•„λ“λ¥Ό μ—…λ°μ΄νΈν•΄μ•Ό ν•©λ‹λ‹¤.</li>\n<li>κ²°κ³Ό μ²λ¦¬: μ—…λ°μ΄νΈ μ‘μ—…μ΄ λ¬Έμ„λ¥Ό μμ •ν–λ”μ§€ ν™•μΈν•κ³  κ²°κ³Όλ¥Ό λ΅κ·Έμ— λ‚¨κΉλ‹λ‹¤.</li>\n</ul>\n<p>λ§μ•½ applicationIdκ°€ μ΅΄μ¬ν•μ§€ μ•λ” κ²½μ° ν•΄λ‹Ή ν™μ„± μƒνƒμ™€ ν•¨κ» μ¶”κ°€λμ–΄μ•Ό ν•©λ‹λ‹¤. μ΄λ¥Ό μ„ν•΄ μΏΌλ¦¬μ™€ μ—…λ°μ΄νΈ μ‘μ—…μ„ νΌν•©ν•΄ μ‚¬μ©ν•©λ‹λ‹¤.</p>\n<div class=\"content-ad\"></div>\n<h1>λ‹¨κ³„:</h1>\n<ul>\n<li>λ¬Έμ„ κ°€μ Έμ¤κΈ° λ° ν™•μΈ: _idλ³„λ΅ λ¬Έμ„λ¥Ό κ°€μ Έμ™€μ„ applications λ°°μ—΄μ κ° applicationIdλ¥Ό ν™•μΈν•©λ‹λ‹¤.</li>\n<li>μ—…λ°μ΄νΈ μν–‰: applicationIdκ°€ μλ”μ§€ μ—¬λ¶€μ— λ”°λΌ κΈ°μ΅΄ κ°μ²΄λ¥Ό μ—…λ°μ΄νΈν•κ±°λ‚ μƒλ΅μ΄ κ°μ²΄λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤.</li>\n</ul>\n<h1>μμ‹ μ½”λ“</h1>\n<p>λ‹¤μμ€ Node.jsμ™€ MongoDBλ¥Ό μ‚¬μ©ν•μ—¬ μ΄ μ‘μ—…μ„ μν–‰ν•λ” μ „μ²΄ μμ‹ μ½”λ“μ…λ‹λ‹¤:</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> { <span class=\"hljs-title class_\">MongoClient</span> } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'mongodb'</span>);\n\n<span class=\"hljs-comment\">// κ·€ν•μ MongoDB μ—°κ²° λ¬Έμμ—΄ λ° λ°μ΄ν„°λ² μ΄μ¤ μ΄λ¦„μΌλ΅ λ€μ²΄ν•©λ‹λ‹¤.</span>\n<span class=\"hljs-keyword\">const</span> uri = <span class=\"hljs-string\">'mongodb://localhost:27017'</span>;\n<span class=\"hljs-keyword\">const</span> dbName = <span class=\"hljs-string\">'λ‹Ήμ‹ μλ°μ΄ν„°λ² μ΄μ¤μ΄λ¦„'</span>;\n<span class=\"hljs-keyword\">const</span> collectionName = <span class=\"hljs-string\">'λ‹Ήμ‹ μμ»¬λ ‰μ…μ΄λ¦„'</span>;\n\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateApplicationStatuses</span>(<span class=\"hljs-params\">userId, updates</span>) {\n  <span class=\"hljs-keyword\">const</span> client = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">MongoClient</span>(uri, { <span class=\"hljs-attr\">useNewUrlParser</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-attr\">useUnifiedTopology</span>: <span class=\"hljs-literal\">true</span> });\n\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">await</span> client.<span class=\"hljs-title function_\">connect</span>();\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'MongoDBμ— μ—°κ²°λμ—μµλ‹λ‹¤.'</span>);\n\n    <span class=\"hljs-keyword\">const</span> database = client.<span class=\"hljs-title function_\">db</span>(dbName);\n    <span class=\"hljs-keyword\">const</span> collection = database.<span class=\"hljs-title function_\">collection</span>(collectionName);\n\n    <span class=\"hljs-comment\">// μ‚¬μ©μ λ¬Έμ„ κ²€μƒ‰</span>\n    <span class=\"hljs-keyword\">const</span> userDoc = <span class=\"hljs-keyword\">await</span> collection.<span class=\"hljs-title function_\">findOne</span>({ <span class=\"hljs-attr\">_id</span>: userId });\n\n    <span class=\"hljs-keyword\">if</span> (!userDoc) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μ‚¬μ©μ λ¬Έμ„λ¥Ό μ°Ύμ„ μ μ—†μµλ‹λ‹¤.'</span>);\n      <span class=\"hljs-keyword\">return</span>;\n    }\n\n    <span class=\"hljs-comment\">// applications λ°°μ—΄μ„ μ΄κΈ°ν™”ν•©λ‹λ‹¤.</span>\n    <span class=\"hljs-keyword\">if</span> (!userDoc.<span class=\"hljs-property\">applications</span>) {\n      userDoc.<span class=\"hljs-property\">applications</span> = [];\n    }\n\n    <span class=\"hljs-keyword\">const</span> updateOperations = [];\n    <span class=\"hljs-keyword\">const</span> applicationIds = userDoc.<span class=\"hljs-property\">applications</span>.<span class=\"hljs-title function_\">map</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">app</span> =></span> app.<span class=\"hljs-property\">applicationId</span>);\n\n    updates.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">update</span> =></span> {\n      <span class=\"hljs-keyword\">if</span> (applicationIds.<span class=\"hljs-title function_\">includes</span>(update.<span class=\"hljs-property\">applicationId</span>)) {\n        <span class=\"hljs-comment\">// κΈ°μ΅΄ μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒ μ—…λ°μ΄νΈ</span>\n        updateOperations.<span class=\"hljs-title function_\">push</span>({\n          <span class=\"hljs-attr\">updateOne</span>: {\n            <span class=\"hljs-attr\">filter</span>: { <span class=\"hljs-attr\">_id</span>: userId, <span class=\"hljs-string\">'applications.applicationId'</span>: update.<span class=\"hljs-property\">applicationId</span> },\n            <span class=\"hljs-attr\">update</span>: { <span class=\"hljs-attr\">$set</span>: { <span class=\"hljs-string\">'applications.$.active'</span>: update.<span class=\"hljs-property\">active</span> } }\n          }\n        });\n      } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-comment\">// μƒλ΅μ΄ μ• ν”λ¦¬μΌ€μ΄μ… μ¶”κ°€</span>\n        updateOperations.<span class=\"hljs-title function_\">push</span>({\n          <span class=\"hljs-attr\">updateOne</span>: {\n            <span class=\"hljs-attr\">filter</span>: { <span class=\"hljs-attr\">_id</span>: userId },\n            <span class=\"hljs-attr\">update</span>: {\n              <span class=\"hljs-attr\">$push</span>: {\n                <span class=\"hljs-attr\">applications</span>: { <span class=\"hljs-attr\">applicationId</span>: update.<span class=\"hljs-property\">applicationId</span>, <span class=\"hljs-attr\">active</span>: update.<span class=\"hljs-property\">active</span> }\n              }\n            }\n          }\n        });\n      }\n    });\n\n    <span class=\"hljs-comment\">// μΌκ΄„ μ‘μ„± μ‘μ—… μν–‰</span>\n    <span class=\"hljs-keyword\">const</span> result = <span class=\"hljs-keyword\">await</span> collection.<span class=\"hljs-title function_\">bulkWrite</span>(updateOperations);\n\n    <span class=\"hljs-keyword\">if</span> (result.<span class=\"hljs-property\">modifiedCount</span> > <span class=\"hljs-number\">0</span> || result.<span class=\"hljs-property\">insertedCount</span> > <span class=\"hljs-number\">0</span>) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒλ¥Ό μ„±κ³µμ μΌλ΅ μ—…λ°μ΄νΈν–μµλ‹λ‹¤.'</span>);\n    } <span class=\"hljs-keyword\">else</span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'μΌμΉν•λ” μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ—†κ±°λ‚ λ³€κ²½ μ‚¬ν•­μ΄ μ—†μµλ‹λ‹¤.'</span>);\n    }\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">'μ• ν”λ¦¬μΌ€μ΄μ… μƒνƒλ¥Ό μ—…λ°μ΄νΈν•λ” μ¤‘ μ¤λ¥ λ°μƒ:'</span>, error);\n  } <span class=\"hljs-keyword\">finally</span> {\n    <span class=\"hljs-keyword\">await</span> client.<span class=\"hljs-title function_\">close</span>();\n  }\n}\n\n<span class=\"hljs-comment\">// μμ  μ‚¬μ©λ²•: μ—¬λ¬ μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ—…λ°μ΄νΈ</span>\n<span class=\"hljs-title function_\">updateApplicationStatuses</span>(<span class=\"hljs-string\">'userId123'</span>, [\n  { <span class=\"hljs-attr\">applicationId</span>: <span class=\"hljs-string\">'Apple'</span>, <span class=\"hljs-attr\">active</span>: <span class=\"hljs-literal\">true</span> },\n  { <span class=\"hljs-attr\">applicationId</span>: <span class=\"hljs-string\">'Mango'</span>, <span class=\"hljs-attr\">active</span>: <span class=\"hljs-literal\">false</span> },\n  { <span class=\"hljs-attr\">applicationId</span>: <span class=\"hljs-string\">'Orange'</span>, <span class=\"hljs-attr\">active</span>: <span class=\"hljs-literal\">true</span> }\n]);\n</code></pre>\n<p>λ§μ•½ λ„μ›€μ΄ λμ—λ‹¤λ©΄ π‘ π‘ λ¥Ό μΆ€ λ°›μ•„λ„ κ΄μ°®μΌμ„Έμ”? λ‹¤λ¥Έ μ‚¬λλ“¤μ—κ²λ„ λ„μ›€μ΄ λ  μ μλ„λ΅ κΈ€μ„ κ³µμ ν•΄μ£Όμ‹λ©΄ μ •λ§ κ°μ‚¬ν•κ² μµλ‹λ‹¤ :)</p>\n<p>μ–Έμ λ‚ ν™νΈν•΄ μ£Όμ„Έμ”...</p>\n<img src=\"https://miro.medium.com/v2/resize:fit:156/0*9zGASKmAOha2Ov3S.gif\">\n</body>\n</html>\n"},"__N_SSG":true}