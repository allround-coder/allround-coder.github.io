{"pageProps":{"post":{"title":"Nodejs를 사용하여 파이썬 프로그램을 이용해 이메일 보내기","description":"","date":"2024-05-27 18:22","slug":"2024-05-27-SendingEmailsfromNodejsUsingaPythonProgram","content":"\n\n이 블로그 포스트에서는 Node.js 애플리케이션에서 Python 스크립트를 호출하여 이메일을 보내는 방법을 살펴보겠습니다. 우리는 프로젝트 구조를 설계하여 관심사를 분리하고 코드베이스를 깔끔하게 유지할 것입니다.\n\n## 목차\n\n- 소개\n- 프로젝트 구조\n- 환경 설정\n- Python 이메일 발신 스크립트 생성\n- Node.js 컨트롤러 생성\n- 라우트 설정\n- 서버 생성\n- 결론\n\n### 1. 소개\n\n<div class=\"content-ad\"></div>\n\n어떤 경우에는 Node.js 애플리케이션에서 Python의 기능을 활용하고 싶을 수 있습니다. 이 튜토리얼은 Node.js 백엔드에서 Python을 사용하여 이메일을 보내는 방법을 보여줍니다. 우리는 Node.js의 child_process 모듈에서 spawn 함수를 사용하여 Python 스크립트를 호출할 것입니다.\n\n# 2. 프로젝트 구조\n\n다음은 우리 프로젝트의 구조입니다:\n\n\nserver/\n  ├── Controller/\n  │   └── mailController.js\n  ├── route/\n  │   └── mailRoute.js\n  ├── Utils/\n  │   └── mailSender.py\n  └── server.js\n  └── .env\n\n\n<div class=\"content-ad\"></div>\n\n# 3. 환경 설정하기\n\n## 단계 1: Node.js 프로젝트 초기화\n\n```js\nmkdir email-sender\ncd email-sender\nnpm init -y\nnpm install express dotenv body-parser\n```\n\n## 단계 2: 환경 변수 설정\n\n<div class=\"content-ad\"></div>\n\n루트 디렉토리에 다음 내용을 사용하여 .env 파일을 만들어주세요:\n\n```js\nGMAIL_USER=your-email@gmail.com\nGMAIL_APP_PASSWORD=your-app-password\n```\n\nyour-email@gmail.com 및 your-app-password를 실제 Gmail 주소 및 앱 비밀번호로 교체해주세요. Gmail 보안 탭 내에서 앱 비밀번호를 얻을 수 있습니다.\n\n# 4. 파이썬 이메일 발신 스크립트 만들기\n\n<div class=\"content-ad\"></div>\n\nUtils 디렉토리에 mailSender.py라는 Python 스크립트를 만들어주세요:\n\n```python\nimport smtplib\nimport os\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.text import MIMEText\n\ndef send_email(to_email, subject, body):\n    from_email = os.environ['GMAIL_USER']\n    app_password = os.environ['GMAIL_APP_PASSWORD']\n\n    msg = MIMEMultipart()\n    msg['From'] = from_email\n    msg['To'] = to_email\n    msg['Subject'] = subject\n    msg.attach(MIMEText(body, 'plain'))\n\n    try:\n        server = smtplib.SMTP('smtp.gmail.com', 587)\n        server.starttls()\n        server.login(from_email, app_password)\n        text = msg.as_string()\n        server.sendmail(from_email, to_email, text)\n        server.quit()\n        print(\"이메일을 성공적으로 전송했습니다.\")\n    except Exception as e:\n        print(f\"이메일 전송에 실패했습니다: {str(e)}\")\n\nif __name__ == \"__main__\":\n    import sys\n    to_email = sys.argv[1]\n    subject = sys.argv[2]\n    body = sys.argv[3]\n    send_email(to_email, subject, body)\n```\n\n# 5. Node.js Controller 생성\n\nController 디렉토리에 mailController.js라는 파일을 만들어주세요.\n\n<div class=\"content-ad\"></div>\n\n```js\nconst { spawn } = require('child_process');\nconst path = require('path');\n\nexports.sendEmail = (req, res) => {\n  const { to, subject, body } = req.body;\n  const pythonProcess = spawn('python3', [path.join(__dirname, '../Utils/mailSender.py'), to, subject, body]);\n\n  pythonProcess.stdout.on('data', (data) => {\n    console.log(`stdout: ${data}`);\n  });\n\n  pythonProcess.stderr.on('data', (data) => {\n    console.error(`stderr: ${data}`);\n  });\n\n  pythonProcess.on('close', (code) => {\n    console.log(`child process exited with code ${code}`);\n    res.send('Email sent');\n  });\n};\n```\n\n# 6. Setting Up the Routes\n\n라우트 설정하기\n\nroute 디렉토리에 mailRoute.js라는 파일을 만드세요:\n\n```js\nconst express = require('express');\nconst router = express.Router();\nconst mailController = require('../Controller/mailController');\n\nrouter.post('/send-email', mailController.sendEmail);\n\nmodule.exports = router;\n```\n\n<div class=\"content-ad\"></div>\n\n# 7. 서버 생성\n\n루트 디렉토리에 server.js라는 파일을 생성하세요:\n\n```js\nconst express = require('express');\nconst bodyParser = require('body-parser');\nconst dotenv = require('dotenv');\nconst mailRoute = require('./route/mailRoute');\n\ndotenv.config();\n\nconst app = express();\napp.use(bodyParser.json());\n\napp.use('/api', mailRoute);\n\nconst PORT = process.env.PORT || 3000;\napp.listen(PORT, () => {\n  console.log(`서버가 포트 ${PORT}에서 실행 중입니다.`);\n});\n```\n\n# 8. 결론\n\n<div class=\"content-ad\"></div>\n\n이 블로그 포스트에서는 Node.js 애플리케이션에서 Python 스크립트를 호출하여 이메일을 보내는 방법을 소개했습니다. 프로젝트 구조 설정, 환경 변수 구성, Python 전자 메일 발신자 스크립트 작성, 그리고 Node.js 백엔드를 설정하여 spawn 함수를 사용하여 Python 스크립트를 호출하는 방법에 대해 다뤘습니다. 이 접근 방식은 Node.js와 Python의 강점을 활용하여 유연하고 강력한 이메일 발송 솔루션을 제공합니다.\n\n이 단계를 따라가면 Python 스크립트를 Node.js 애플리케이션에 매끄럽게 통합하여 두 언어의 최상의 기능을 활용할 수 있습니다.\n\n더 나아가 향상된 이메일 처리 및 추가 기능을 위해 Python의 smtplib의 능력과 다양한 이메일 콘텐츠 및 첨부 파일을 처리하는 방법을 탐색하고 싶을 것입니다. 즐거운 코딩 하세요!","ogImage":{"url":"/assets/img/2024-05-27-SendingEmailsfromNodejsUsingaPythonProgram_0.png"},"coverImage":"/assets/img/2024-05-27-SendingEmailsfromNodejsUsingaPythonProgram_0.png","tag":["Tech"],"readingTime":5},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>이 블로그 포스트에서는 Node.js 애플리케이션에서 Python 스크립트를 호출하여 이메일을 보내는 방법을 살펴보겠습니다. 우리는 프로젝트 구조를 설계하여 관심사를 분리하고 코드베이스를 깔끔하게 유지할 것입니다.</p>\n<h2>목차</h2>\n<ul>\n<li>소개</li>\n<li>프로젝트 구조</li>\n<li>환경 설정</li>\n<li>Python 이메일 발신 스크립트 생성</li>\n<li>Node.js 컨트롤러 생성</li>\n<li>라우트 설정</li>\n<li>서버 생성</li>\n<li>결론</li>\n</ul>\n<h3>1. 소개</h3>\n<div class=\"content-ad\"></div>\n<p>어떤 경우에는 Node.js 애플리케이션에서 Python의 기능을 활용하고 싶을 수 있습니다. 이 튜토리얼은 Node.js 백엔드에서 Python을 사용하여 이메일을 보내는 방법을 보여줍니다. 우리는 Node.js의 child_process 모듈에서 spawn 함수를 사용하여 Python 스크립트를 호출할 것입니다.</p>\n<h1>2. 프로젝트 구조</h1>\n<p>다음은 우리 프로젝트의 구조입니다:</p>\n<p>server/\n├── Controller/\n│   └── mailController.js\n├── route/\n│   └── mailRoute.js\n├── Utils/\n│   └── mailSender.py\n└── server.js\n└── .env</p>\n<div class=\"content-ad\"></div>\n<h1>3. 환경 설정하기</h1>\n<h2>단계 1: Node.js 프로젝트 초기화</h2>\n<pre><code class=\"hljs language-js\">mkdir email-sender\ncd email-sender\nnpm init -y\nnpm install express dotenv body-parser\n</code></pre>\n<h2>단계 2: 환경 변수 설정</h2>\n<div class=\"content-ad\"></div>\n<p>루트 디렉토리에 다음 내용을 사용하여 .env 파일을 만들어주세요:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-variable constant_\">GMAIL_USER</span>=your-email@gmail.<span class=\"hljs-property\">com</span>\n<span class=\"hljs-variable constant_\">GMAIL_APP_PASSWORD</span>=your-app-password\n</code></pre>\n<p><a href=\"mailto:your-email@gmail.com\">your-email@gmail.com</a> 및 your-app-password를 실제 Gmail 주소 및 앱 비밀번호로 교체해주세요. Gmail 보안 탭 내에서 앱 비밀번호를 얻을 수 있습니다.</p>\n<h1>4. 파이썬 이메일 발신 스크립트 만들기</h1>\n<div class=\"content-ad\"></div>\n<p>Utils 디렉토리에 mailSender.py라는 Python 스크립트를 만들어주세요:</p>\n<pre><code class=\"hljs language-python\"><span class=\"hljs-keyword\">import</span> smtplib\n<span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">from</span> email.mime.multipart <span class=\"hljs-keyword\">import</span> MIMEMultipart\n<span class=\"hljs-keyword\">from</span> email.mime.text <span class=\"hljs-keyword\">import</span> MIMEText\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">send_email</span>(<span class=\"hljs-params\">to_email, subject, body</span>):\n    from_email = os.environ[<span class=\"hljs-string\">'GMAIL_USER'</span>]\n    app_password = os.environ[<span class=\"hljs-string\">'GMAIL_APP_PASSWORD'</span>]\n\n    msg = MIMEMultipart()\n    msg[<span class=\"hljs-string\">'From'</span>] = from_email\n    msg[<span class=\"hljs-string\">'To'</span>] = to_email\n    msg[<span class=\"hljs-string\">'Subject'</span>] = subject\n    msg.attach(MIMEText(body, <span class=\"hljs-string\">'plain'</span>))\n\n    <span class=\"hljs-keyword\">try</span>:\n        server = smtplib.SMTP(<span class=\"hljs-string\">'smtp.gmail.com'</span>, <span class=\"hljs-number\">587</span>)\n        server.starttls()\n        server.login(from_email, app_password)\n        text = msg.as_string()\n        server.sendmail(from_email, to_email, text)\n        server.quit()\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">\"이메일을 성공적으로 전송했습니다.\"</span>)\n    <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f\"이메일 전송에 실패했습니다: <span class=\"hljs-subst\">{<span class=\"hljs-built_in\">str</span>(e)}</span>\"</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">\"__main__\"</span>:\n    <span class=\"hljs-keyword\">import</span> sys\n    to_email = sys.argv[<span class=\"hljs-number\">1</span>]\n    subject = sys.argv[<span class=\"hljs-number\">2</span>]\n    body = sys.argv[<span class=\"hljs-number\">3</span>]\n    send_email(to_email, subject, body)\n</code></pre>\n<h1>5. Node.js Controller 생성</h1>\n<p>Controller 디렉토리에 mailController.js라는 파일을 만들어주세요.</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> { spawn } = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'child_process'</span>);\n<span class=\"hljs-keyword\">const</span> path = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'path'</span>);\n\n<span class=\"hljs-built_in\">exports</span>.<span class=\"hljs-property\">sendEmail</span> = <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =></span> {\n  <span class=\"hljs-keyword\">const</span> { to, subject, body } = req.<span class=\"hljs-property\">body</span>;\n  <span class=\"hljs-keyword\">const</span> pythonProcess = <span class=\"hljs-title function_\">spawn</span>(<span class=\"hljs-string\">'python3'</span>, [path.<span class=\"hljs-title function_\">join</span>(__dirname, <span class=\"hljs-string\">'../Utils/mailSender.py'</span>), to, subject, body]);\n\n  pythonProcess.<span class=\"hljs-property\">stdout</span>.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">'data'</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">data</span>) =></span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`stdout: <span class=\"hljs-subst\">${data}</span>`</span>);\n  });\n\n  pythonProcess.<span class=\"hljs-property\">stderr</span>.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">'data'</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">data</span>) =></span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">`stderr: <span class=\"hljs-subst\">${data}</span>`</span>);\n  });\n\n  pythonProcess.<span class=\"hljs-title function_\">on</span>(<span class=\"hljs-string\">'close'</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">code</span>) =></span> {\n    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`child process exited with code <span class=\"hljs-subst\">${code}</span>`</span>);\n    res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">'Email sent'</span>);\n  });\n};\n</code></pre>\n<h1>6. Setting Up the Routes</h1>\n<p>라우트 설정하기</p>\n<p>route 디렉토리에 mailRoute.js라는 파일을 만드세요:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'express'</span>);\n<span class=\"hljs-keyword\">const</span> router = express.<span class=\"hljs-title class_\">Router</span>();\n<span class=\"hljs-keyword\">const</span> mailController = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'../Controller/mailController'</span>);\n\nrouter.<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-string\">'/send-email'</span>, mailController.<span class=\"hljs-property\">sendEmail</span>);\n\n<span class=\"hljs-variable language_\">module</span>.<span class=\"hljs-property\">exports</span> = router;\n</code></pre>\n<div class=\"content-ad\"></div>\n<h1>7. 서버 생성</h1>\n<p>루트 디렉토리에 server.js라는 파일을 생성하세요:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'express'</span>);\n<span class=\"hljs-keyword\">const</span> bodyParser = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'body-parser'</span>);\n<span class=\"hljs-keyword\">const</span> dotenv = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'dotenv'</span>);\n<span class=\"hljs-keyword\">const</span> mailRoute = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'./route/mailRoute'</span>);\n\ndotenv.<span class=\"hljs-title function_\">config</span>();\n\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\napp.<span class=\"hljs-title function_\">use</span>(bodyParser.<span class=\"hljs-title function_\">json</span>());\n\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">'/api'</span>, mailRoute);\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">PORT</span> = process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">PORT</span> || <span class=\"hljs-number\">3000</span>;\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-variable constant_\">PORT</span>, <span class=\"hljs-function\">() =></span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`서버가 포트 <span class=\"hljs-subst\">${PORT}</span>에서 실행 중입니다.`</span>);\n});\n</code></pre>\n<h1>8. 결론</h1>\n<div class=\"content-ad\"></div>\n<p>이 블로그 포스트에서는 Node.js 애플리케이션에서 Python 스크립트를 호출하여 이메일을 보내는 방법을 소개했습니다. 프로젝트 구조 설정, 환경 변수 구성, Python 전자 메일 발신자 스크립트 작성, 그리고 Node.js 백엔드를 설정하여 spawn 함수를 사용하여 Python 스크립트를 호출하는 방법에 대해 다뤘습니다. 이 접근 방식은 Node.js와 Python의 강점을 활용하여 유연하고 강력한 이메일 발송 솔루션을 제공합니다.</p>\n<p>이 단계를 따라가면 Python 스크립트를 Node.js 애플리케이션에 매끄럽게 통합하여 두 언어의 최상의 기능을 활용할 수 있습니다.</p>\n<p>더 나아가 향상된 이메일 처리 및 추가 기능을 위해 Python의 smtplib의 능력과 다양한 이메일 콘텐츠 및 첨부 파일을 처리하는 방법을 탐색하고 싶을 것입니다. 즐거운 코딩 하세요!</p>\n</body>\n</html>\n"},"__N_SSG":true}