{"pageProps":{"post":{"title":"Nodejs, React ë° TypeScriptì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë°©ë²• ","description":"","date":"2024-05-12 19:37","slug":"2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2","content":"\n<img src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png\" />\n\n# ì†Œê°œ\n\nì´ê²ƒì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œì„ êµ¬í˜„í•˜ëŠ” ë‘ ë¶€ë¶„ íŠœí† ë¦¬ì–¼ì˜ ë‘ ë²ˆì§¸ ê¸°ì‚¬ì…ë‹ˆë‹¤.\n\níŠœí† ë¦¬ì–¼ì˜ ì²« ë²ˆì§¸ ë¶€ë¶„ì€ í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì¸ì¦ ë° ê¶Œí•œì˜ ê°œë…ì„ ì„¤ëª…í•˜ëŠ” ë° ì „ë…ë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ì§ ë³´ì§€ ì•Šì•˜ë‹¤ë©´, ì§„í–‰í•˜ê¸° ì „ì— ì²« ë²ˆì§¸ ë¶€ë¶„ì„ í™•ì¸í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.\n\nê¸°ì´ˆë¥¼ ë‹¤ë£¬ ê¸°ì´ˆë¥¼ ë°”íƒ•ìœ¼ë¡œ, React, Node.js ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ í† í° ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ í•˜ëŠ” í’€ ìŠ¤íƒ ì‹œìŠ¤í…œì„ ë‹¨ê³„ë³„ë¡œ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì˜ ì™„ì „í•œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì´ GitHub ì €ì¥ì†Œì—ì„œ ì°¾ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ì„¹ì…˜ì—ì„œ í”„ë¡œì íŠ¸ êµ¬ì¡°ì— ìµìˆ™í•´ì ¸ ë´…ì‹œë‹¤.\n\n# í”„ë¡œì íŠ¸ êµ¬ì¡°\n\n![í”„ë¡œì íŠ¸ êµ¬ì¡°](/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_1.png)\n\nìœ„ì˜ ê·¸ë¦¼ 1ì—ì„œ ì „ì²´ í’€ ìŠ¤íƒ í”„ë¡œì íŠ¸ êµ¬ì¡°ê°€ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ë° ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI) ë‚´ ê° êµ¬ì„± ìš”ì†Œì˜ ëª©ì ì— ëŒ€í•´ ë…¼ì˜í•´ ë´…ì‹œë‹¤.\n\n## ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤\n\nì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” ë§¤ìš° ê¸°ë³¸ì ì´ë©°, í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´ì˜ Auth ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì´ëŸ¬í•œ ì»´í¬ë„ŒíŠ¸ì™€ ìƒí˜¸ì‘ìš©í•˜ì—¬ ì‚¬ìš©ì ì§€ì • í›„í¬ useApi ë° ApiProvider í´ë˜ìŠ¤ë¥¼ í†µí•´ ì„œë²„ì— ì¸ì¦ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì„œë²„ê°€ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ ìœ íš¨ì„± ê²€ì‚¬í•˜ë©´ ì‘ë‹µ ë‚´ì—ì„œ JWT í† í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ìœ íš¨í•œ ì„œë²„ ì‘ë‹µì‹œ, ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° AuthReducerë¡œ ì‘ì—…ì´ ë””ìŠ¤íŒ¨ì¹˜ë©ë‹ˆë‹¤. ë””ìŠ¤íŒ¨ì¹˜ëœ ì‘ì—…ì€ ê´€ë ¨ AuthStateë¡œ ì¤„ì–´ë“¤ê³ , AuthContextë¥¼ í†µí•´ ì „ì²´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¸í„°í˜ì´ìŠ¤ì— ì œê³µë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” React ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë  ê²ƒì…ë‹ˆë‹¤.\n\n## ì„œë²„\n\nì„œë²„ëŠ” ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ìê²© ì¦ëª… ë°ì´í„°ì™€ í•¨ê»˜ ìš”ì²­ì„ ë°›ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € Cors(Cross-Origin-Resource-Sharing) ê·œì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ê³  ì œì¶œëœ ì…ë ¥ ë°ì´í„°ê°€ ìœ íš¨í•œì§€ë¥¼ ê²€ì¦í•  ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¨ê³„ ì¤‘ í•˜ë‚˜ë¼ë„ í†µê³¼í•˜ì§€ ëª»í•˜ë©´ ì˜¤ë¥˜ ì‘ë‹µì´ ë°˜í™˜ë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ì€ ì‚¬ìš©ì/ê°€ì… routeì—ì„œ ìƒˆë¡œìš´ ì‚¬ìš©ìê°€ ìƒì„±ë˜ê±°ë‚˜ ì‚¬ìš©ì/ë¡œê·¸ì¸ routeì—ì„œ ê¸°ì¡´ ì‚¬ìš©ìê°€ ì¸ì¦ë©ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” InMemoryDataProviderê°€ êµ¬í˜„ë˜ë©° ì‚¬ìš©ì ë°ì´í„°ëŠ” ê°„ë‹¨í•œ ê°ì²´ì— ì €ì¥ë©ë‹ˆë‹¤. ì´ëŠ” íŠœí† ë¦¬ì–¼ì´ ë³µì¡í•´ì§€ì§€ ì•Šë„ë¡ ì˜ë„ëœ ê²ƒì´ë©° ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ì— ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤. DataProviderInterfaceëŠ” ë°ì´í„° ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì¶”ìƒí™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ë©°, ë‚˜ì¤‘ì— ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ ì œê³µìë¡œ ì‰½ê²Œ ì „í™˜í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ê°€ì… ë˜ëŠ” ë¡œê·¸ì¸ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ë©´ ì„œëª…ëœ ì„œë²„ì™€ í•¨ê»˜ ë§Œë£Œ ê°€ëŠ¥í•œ JWT(JSON Web Token)ê°€ ìƒì„±ë˜ì–´ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤. ì´ í† í°, ì¼ë°˜ì ìœ¼ë¡œ ì¸ì¦ í† í°ìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆìœ¼ë©°, ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì—ì„œ /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ë³´í˜¸ëœ ì„œë²„ ì¸¡ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ ìš”ì²­ì— í¬í•¨ë©ë‹ˆë‹¤.\n\n# ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­\n\nì´ íŠœí† ë¦¬ì–¼ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ê¸° ìœ„í•œ ì „ì œ ì¡°ê±´ ëª©ë¡ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n- í•´ë‹¹ íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí•˜ë ¤ë©´ ì»´í“¨í„°ì— Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n- Node Package Manager (NPM)ì€ Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ì„œ Yarnì„ ì„ í˜¸í•˜ë©° í”„ë¡œì íŠ¸ ì¢…ì†ì„± ê´€ë¦¬ì—ëŠ” Yarnì´ ì‚¬ìš©ë  ê²ƒì…ë‹ˆë‹¤.\n- ì›¹ì´ ì‘ë™í•˜ëŠ” ë°©ì‹ì— ëŒ€í•œ ì•Œë§ì€ ì§€ì‹ì´ ìˆì–´ì•¼ í•˜ë©° ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ì‹œìŠ¤í…œì„ êµ¬í˜„í•œ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë³¸ì ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n- ë³¸ ë¬¸ì„œ ì´ì „ì— Node.js, React ë° Typescriptì™€ í•¨ê»˜ ì‘ì—…í•œ ê²½í—˜ì´ ìˆì–´ì•¼ í•˜ì§€ë§Œ, ì½”ë“œ ì•ˆë‚´ë¥¼ ë°›ì„ ì˜ˆì •ì´ë¯€ë¡œ ì‹¬ì¸µì ì¸ ì§€ì‹ì€ ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤.\n\nì, ì†Œê°œëŠ” ì´ì œ ëë‚´ê³  ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬í˜„ìœ¼ë¡œ ë„˜ì–´ê°€ ë´…ì‹œë‹¤. ë©‹ì§€ë„¤ìš”! ğŸ˜\n\n# 1. ì„œë²„ ì„¤ì •\n\n## 1.1 ì˜ì¡´ì„± ì„¤ì¹˜\n\në¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³  ì„œë²„ ì½”ë“œ ê¸°ë°˜ì„ ì„¤ì •í•´ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\nmkdir authentication-and-authorization &&\\\ncd authentication-and-authorization &&\\\nmkdir server &&\\\ncd server && mkdir src\n```\n\nì‹œì‘ ì„œë²„ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:\n\n```bash\n/authentication-and-authorization\n  |__ /server\n      |__ /src\n```\n\n/server í´ë” ì•ˆì— ìˆëŠ” í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ë…¸ë“œ í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ì„¸ìš”:\n\n```bash\nnpm init -y\n```\n\nì´ì œ ì„œë²„ í”„ë¡œì íŠ¸ì˜ ì‹œì‘ì ì´ ìˆìœ¼ë‹ˆ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Typescript í”„ë¡œì íŠ¸ë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤:\n\n```js\nyarn add typescript @types/node --dev && npx tsc --init\n```\n\nìœ„ ëª…ë ¹ì€ /server í´ë” ì•ˆì— tsconfig.json íŒŒì¼ì„ ìƒì„±í–ˆì„ ê²ë‹ˆë‹¤. í•´ë‹¹ íŒŒì¼ì˜ ë‚´ìš©ì„ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ë³€ê²½í•´ì£¼ì„¸ìš”:\n\n```js\n{\n  \"compilerOptions\": {\n    \"target\": \"es2016\",\n    \"module\": \"commonjs\",\n    \"rootDir\": \"./src\",\n    \"sourceMap\": true,\n    \"outDir\": \"./dist\",\n    \"esModuleInterop\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"strict\": true,\n    \"skipLibCheck\": true\n  }\n}\n```\n\nê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ rootDirì…ë‹ˆë‹¤. ì´ ì„¤ì •ì€ TypeScript ì»´íŒŒì¼ëŸ¬ì—ê²Œ .ts íŒŒì¼ì„ ì–´ë””ì—ì„œ ì°¾ì•„ .js íŒŒì¼ë¡œ ë³€í™˜í•˜ê³  outDirë¡œ ì§€ì •ëœ ë””ë ‰í† ë¦¬ì— ë°°ì¹˜í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤.\n\nì´ì œ ì„œë²„ì— í•„ìš”í•œ ì´ˆê¸° íŒ¨í‚¤ì§€ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤:\n\n```js\nyarn add express dotenv cors &&\\\nyarn add @types/express @types/dotenv @types/cors --dev\n```\n\n3rd party íŒ¨í‚¤ì§€ì— ëŒ€í•œ íƒ€ì… ì •ì˜ íŒŒì¼ë„ ê°œë°œ ì¢…ì†ì„±ìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì„¸ìš”.\n\n## 1.2 Express ì„œë²„ ë§Œë“¤ê¸°\n\në¨¼ì € Express ì„œë²„ì˜ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ìƒì„±í•˜ê³  ë³¸ ê°•ì¢Œë¥¼ í†µí•´ ì´ë¥¼ í™•ì¥í•´ ë‚˜ê°ˆ ê²ƒì…ë‹ˆë‹¤. /server/src ë””ë ‰í† ë¦¬ ì•ˆì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ app.tsì™€ index.tsë¥¼ ìƒì„±í•˜ì„¸ìš”:\n\n```js\ntouch app.ts && touch index.ts\n```\n\napp.ts ì•ˆì—ëŠ” ì„œë²„ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ê³  ê´€ë ¨ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Express ì•± ê°ì²´ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. app.tsì˜ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤ (ì´ê²ƒì€ í•´ë‹¹ íŒŒì¼ì˜ ìµœì¢… ì½”ë“œê°€ ì•„ë‹™ë‹ˆë‹¤):\n\n```js\n/* app.ts */\n\n// ì „ì—­ ì¢…ì†ì„±\nimport * as dotenv from \"dotenv\";\ndotenv.config(); // ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport routes from \"./routes\";\n\n// express ì•± ì„¤ì •\nimport express from \"express\";\nconst app = express();\n\n// ë¯¸ë“¤ì›¨ì–´\napp.use(express.json());\n\n// ë¼ìš°íŠ¸\napp.use(routes);\n\nexport default app;\n```\n\nindex.tsì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ SERVER_PORT í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì •ëœ í¬íŠ¸ì—ì„œ express ì„œë²„ë¥¼ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n/* index.ts */\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport app from \"./app\";\nconst { SERVER_PORT } = process.env;\n\n// ì•±ì´ listeningì¤‘\napp.listen(SERVER_PORT, () => {\n  console.info(`ì•±ì´ í¬íŠ¸ ${SERVER_PORT}ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤`);\n});\n```\n\nGitì—ì„œ ë¬´ì‹œë  ìˆ˜ ìˆëŠ” .env íŒŒì¼ì— í”„ë¡œì íŠ¸ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ê´€í–‰ì…ë‹ˆë‹¤. ì´ íŒŒì¼ì€ /serverí´ë”ì— ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n# .env\n\nSERVER_PORT=8000\n```\n\nìµìŠ¤í”„ë ˆìŠ¤ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ /server í´ë” ë‚´ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\nrm -rf ./dist && npx tsc && cp .env ./dist/.env && cd ./dist && node index.js\n```\n\nìœ„ ëª…ë ¹ì€ ë¨¼ì € ./dist ë””ë ‰í† ë¦¬ë¥¼ ì œê±°í•˜ê³ , ./src ë””ë ‰í† ë¦¬ì— ìˆëŠ” ëª¨ë“  ì½”ë“œë¥¼ íƒ€ì… í™•ì¸í•˜ê³  ./dist ë””ë ‰í† ë¦¬ ë‚´ì˜ JavaScriptë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì»´íŒŒì¼ ë‹¨ê³„ê°€ ì™„ë£Œë˜ë©´ .env íŒŒì¼ì´ ./dist ë””ë ‰í† ë¦¬ë¡œ ë³µì‚¬ë˜ì–´ ì„œë²„ë¥¼ node index.jsë¡œ ì‹¤í–‰í•  ë•Œ í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ë§¤ë²ˆ ì´ ëª…ë ¹ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì§€ë£¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ server/package.json ë‚´ì— ëª‡ ê°€ì§€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¨ìˆœí™”í•˜ê² ìŠµë‹ˆë‹¤:\n\n\n\n\n\n```json\n{\n  \"name\": \"server\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"build\": \"npx tsc && cp .env ./dist/.env\",\n    \"start\": \"rm -rf ./dist && yarn build && cd ./dist && node index.js\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"@types/cors\": \"^2.8.13\",\n    \"@types/dotenv\": \"^8.2.0\",\n    \"@types/express\": \"^4.17.15\",\n    \"@types/node\": \"^18.11.18\",\n    \"typescript\": \"^4.9.4\"\n  },\n  \"dependencies\": {\n    \"cors\": \"^2.8.5\",\n    \"dotenv\": \"^16.0.3\",\n    \"express\": \"^4.18.2\"\n  }\n}\n```\n\nì´ì œ start ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```bash\nyarn start\n```\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_2.png)\n\n\n\n\n\nì„œë²„ í”„ë¡œì íŠ¸ê°€ ì´ì œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ë°±ì—”ë“œ ì¸ì¦ ë° ê¶Œí•œ ì‹œìŠ¤í…œ ì„¤ì • ê³¼ì •ì„ ë³´ì—¬ë“œë¦´ ê²ƒì…ë‹ˆë‹¤.\n\n## 1.3 ì‚¬ìš©ì ë°ì´í„° ì œê³µì\n\në°ì´í„° ì €ì¥ ë ˆì´ì–´ëŠ” ì¸ì¦ ì‹œìŠ¤í…œì— í•„ìˆ˜ì ì…ë‹ˆë‹¤. ìƒˆ ì‚¬ìš©ìê°€ ìƒì„±ë  ë•Œ, ê·¸ë“¤ì˜ ë°ì´í„°ëŠ” ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë¡œê·¸ì¸í•  ë•Œ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•´ì„œ, ì‚¬ìš©ì ë°ì´í„° ì €ì¥ì„ ìœ„í•´ ì¸ë©”ëª¨ë¦¬ ì €ì¥ì„ êµ¬í˜„í•  ê²ƒì´ì§€ë§Œ, ë‚˜ì¤‘ì— ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ êµ¬í˜„ì„ êµì²´í•˜ëŠ” ê²ƒì´ ì‰½ë„ë¡ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\n\n/server/src/data_providers í´ë”ë¥¼ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì¸í„°í˜ì´ìŠ¤ IDataProviderë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.\n\n\n\n```js\n// server/src/data_providers/IDataProvider.ts\n\nexport default interface IDataProvider<Resource> {\n  createData: (resource: Resource) => Promise<void>;\n  readData: (args: {id: string, matchField: string}) => Promise<Resource>;\n  updateData: (args: {id: string, resource: Resource}) => Promise<void>;\n  deleteData: (id: string) => Promise<void>;\n}\n```\n\nì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ì¼ë°˜ì ì¸ CRUD ì‘ì—…ì„ ë‚˜íƒ€ë‚´ëŠ” ë„¤ ê°€ì§€ ë©”ì„œë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œë“¤ì€ Resource íƒ€ì…ì˜ ì¼ë°˜ì ì¸ ê°’ì„ ì†Œë¹„í•˜ê±°ë‚˜ ë°˜í™˜í•©ë‹ˆë‹¤. IDataProviderì˜ InMemoryDataProvider êµ¬í˜„ì€ ì•„ë˜ì™€ ê°™ì´ ë³´ì—¬ì§‘ë‹ˆë‹¤.\n\n```js\n// server/src/data_providers/InMemoryDataProvider.ts\n\nimport IDataProvider from \"./IDataProvider\";\n\nexport default class InMemoryDataProvider<Resource extends {id: string, data: any}> implements IDataProvider<Resource> {\n  private _data: Resource[];\n\n  constructor() {\n    this._data = [];\n  };\n\n  public async createData(resource: Resource) {\n    this._data.push(resource);\n    return;\n  }\n\n  public async readData(args: {id: string, matchField: string}) {\n    return this._data.filter(x => x.data[args.matchField] === args.id)[0];\n  };\n\n  public async updateData(props: { id: string; resource: Resource; }) {\n    const {id, resource} = props;\n    for(const datum of this._data) {\n      if(datum.id === id) {\n        datum.data = resource.data;\n      }\n    }\n\n    return;\n  };\n\n  public async deleteData(id: string) {\n    this._data = this._data.filter(datum => datum.id !== id);\n    return;\n  };\n}\n```\n\nInMemoryDataProviderëŠ” IDataProviderì—ì„œ ì •ì˜ëœ ê³µê°œ ë©”ì„œë“œë¥¼ ì—„ê²©í•˜ê²Œ êµ¬í˜„í•©ë‹ˆë‹¤. ì‹¤ì œ ë°ì´í„° ì €ì¥ì†ŒëŠ” InMemoryDataProvider í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— íŠ¹ì •í•œ private \\_data ë°°ì—´ ì†ì„±ì…ë‹ˆë‹¤. InMemoryDataProviderì˜ generic íƒ€ì…ì€ Resourceì´ë©° 'id: string, data: any'ë¥¼ í™•ì¥í•˜ì˜€ê¸° ë•Œë¬¸ì— ì…ë ¥ ìì›ì€ id ë° ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ê¸°íƒ€ ì†ì„±ì„ ì¶”ê°€ë¡œ ê°€ì ¸ì•¼í•©ë‹ˆë‹¤. TypeScriptì˜ ì´ ì¸í„°í˜ì´ìŠ¤ ì¤‘ì‹¬ì  ì ‘ê·¼ì˜ ì¥ì ì€ IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¤€ìˆ˜í•œë‹¤ë©´ ë°ì´í„° ì €ì¥ì†Œë¥¼ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤(ì˜ˆ: SQL ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©).\n\nì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ì—ì„œ CRUD ì‘ì—…ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì—ì„œ ë¶„ë¦¬í•˜ëŠ” ì‚¬ìš©ì ì €ì¥ì†Œë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì €, ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ëœ ì¶”ìƒí™” Repositoryë¥¼ ì‘ì„±í•  ê²ƒì…ë‹ˆë‹¤. ì´ RepositoryëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ ìœ í˜•ì—ì„œ í™•ì¥ë  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\n\n```js\n// server/src/repositories/Repository.ts\n\nimport IDataProvider from \"../data_providers/IDataProvider\";\n\nexport default class Repository<Resource> {\n  protected _provider: IDataProvider<Resource>;\n\n  constructor(args: {provider: IDataProvider<Resource>}) {\n    this._provider = args.provider;\n  };\n\n  public get provider(): IDataProvider<Resource> {\n    return this._provider;\n  }\n}\n```\n\nRepositoryì—ì„œ íŒŒìƒëœ í´ë˜ìŠ¤ëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì„ í˜•ì„±í•˜ëŠ” IDataProviderë¥¼ êµ¬í˜„í•˜ëŠ” ì œê³µì(provider)ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  UserRepository í´ë˜ìŠ¤ëŠ” Repositoryë¥¼ í™•ì¥í•˜ê³  ì‚¬ìš©ì ë°ì´í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ìì²´ public ë©”ì„œë“œë¥¼ ê°–ìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ìì„¸íˆ ì‚´í´ë´…ì‹œë‹¤.\n\n```js\n// server/src/repositories/UserRepository.ts\n\nimport IDataProvider from \"../data_providers/IDataProvider\";\nimport Repository from \"./Repository\";\nimport { randomUUID } from \"crypto\";\nimport InMemoryDataProvider from \"../data_providers/InMemoryDataProvider\";\n\ntype UserData = {\n  email: string,\n  name: string,\n  password: string,\n  createdAt: string,\n  updatedAt: string\n};\n\nexport class UserResource {\n  private _id: string;\n\n  constructor(private _data: UserData) {\n    this._id = randomUUID();\n  };\n\n  public get id(): string {\n    return this._id;\n  }\n\n  public get data(): UserData {\n    return this._data;\n  }\n}\n\nexport class UserRepository extends Repository<UserResource> {\n  constructor(args: {provider: IDataProvider<UserResource>}) {\n    super({provider: args.provider});\n  }\n\n  public async createUser(user: UserResource) {\n    await this.provider.createData(user);\n    return;\n  }\n\n  public async getUserBy(args: {id: string, matchField: string}) {\n    return this.provider.readData({id: args.id, matchField: args.matchField});\n  }\n}\n\nconst dataProvider = new InMemoryDataProvider<UserResource>();\nconst userRepository = new UserRepository({provider: dataProvider});\n\nexport default userRepository;\n```\n\nì‚¬ìš©ì ë°ì´í„°ì˜ êµ¬ì¡°ëŠ” UserData ìœ í˜•ì— ì˜í•´ ì •ì˜ë˜ë©°, ë¦¬ì†ŒìŠ¤ êµ¬ì¡°ëŠ” UserResource í´ë˜ìŠ¤ì— ì˜í•´ ì •ì˜ë©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” id ë° data ê³µê°œ ì†ì„±ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, creatUser ë° getUserBy ë©”ì„œë“œëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´ì™€ ìƒí˜¸ ì‘ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³  ì“°ê¸° ìœ„í•´ IDataProviderì˜ êµ¬í˜„ì„ í†µí•´ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\nì°¸ê³ : ìš°ë¦¬ëŠ” InMemoryDataProviderì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ UserRepositoryì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ë ¤ë©´, InMemoryDataProvider ëŒ€ì‹  IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ì œ UserRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ API ì—”ë“œí¬ì¸íŠ¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë…¼ë¦¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒ ì„¹ì…˜ì—ì„œ ì„¤ëª…ë  ê²ƒì…ë‹ˆë‹¤.\n\n## 1.3 ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ ë¼ìš°íŠ¸\n\në‹¤ìŒìœ¼ë¡œ, express ë¼ìš°íŠ¸ë¥¼ ëª¨ë‘ ë³´ê´€í•  í´ë”ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:\n\n```js\nyarn add bcrypt jwt &&\\\nyarn add @types/bcrypt @types/jwt --dev &&\\\ncd server/src &&\\\nmkdir routes &&\\\ncd ./routes &&\\\ntouch index.ts user.ts\n```\n\nì•Œë¦¼: ì¶”ê°€ì ìœ¼ë¡œ npm íŒ¨í‚¤ì§€ bcrypt ë° jwtë¥¼ ì„œë²„ í”„ë¡œì íŠ¸ ë‚´ì— ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë° bcryptë¥¼ ì‚¬ìš©í•˜ê³ , ì„±ê³µì ì¸ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì— ë°˜í™˜ë  ì¸ì¦ í† í°ì„ ìƒì„±í•˜ê¸° ìœ„í•´ jwtë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. /server ë‚´ë¶€ì˜ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:\n\n```js\n/server\n  |__ /src\n      |__ ...\n      |__ /routes\n        |__ index.ts\n        |__ user.ts\n```\n\nindex.ts ë‚´ì—ì„œëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ëª¨ë“  ê°€ëŠ¥í•œ ê²½ë¡œë¥¼ í¬í•¨í•˜ëŠ” ì¤‘ì•™ ë¼ìš°í„°ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ëŠ” ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ íŠ¹ì • /user ê²½ë¡œë§Œ ê°€ì§ˆ ê²ƒì…ë‹ˆë‹¤.\n\n```js\n// server/src/routes/index.ts\n\n// ì „ì—­ ì¢…ì†ì„±\nimport { Router } from \"express\";\nconst router = Router();\nimport userRoute from \"./user\";\n\n// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸\nrouter.use(\"/user\", userRoute);\n\nexport default router;\n```\n\nuserRouteëŠ” ë‹¤ìŒê³¼ ê°™ì´ user.tsì— êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n```js\n// server/src/routes/user.ts\n\n// ì „ì—­ ì¢…ì†ì„±\nconst { ENCRYPTION_KEY, AUTH_TOKEN_KEY } = process.env;\nimport {Router} from 'express';\nconst userRoute = Router();\nimport bcrypt from 'bcrypt';\nimport jwt from 'jsonwebtoken';\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport {UserResource} from '../repositories/UserRepository';\nimport { validateHasParameters, validateEmailFormat, validatePasswordLength } from \"../middleware/validation\";\nimport userRepository from '../repositories/UserRepository';\n\n/**\n * ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ë° ì´ë¦„ì„ ì…ë ¥í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡\n */\nuserRoute.post(\n  \"/register\",\n  validateHasParameters(\"email\", \"password\", \"name\"),\n  validateEmailFormat,\n  validatePasswordLength,\n  async (req, res) => {\n    const { name, email, password } = req.body;\n    try {\n      const userExist = await userRepository.getUserBy({id: email, matchField: 'email'});\n      if (userExist) {\n        return res.status(409).json({ error: \"User already exist\" });\n      }\n\n      const date = new Date().toISOString();\n\n      // ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”\n      const passwordHash = await bcrypt.hash(password, ENCRYPTION_KEY!);\n\n      // ì‚¬ìš©ì ì •ë³´ì™€ ë§Œë£Œ ë‚ ì§œë¡œ ì¸ì¦ í† í° ìƒì„±\n      const userData = {\n        name: name,\n        email: email,\n        password: passwordHash,\n        createdAt: date,\n        updatedAt: date,\n      };\n      const newUser = new UserResource(userData);\n\n      // ì‚¬ìš©ì ë°ì´í„° ì €ì¥\n      await userRepository.createUser(newUser);\n\n      const jwtOptions = {\n        expiresIn: '24h',  // 24ì‹œê°„ í›„ í† í° ë§Œë£Œ\n      };\n\n      const authToken = jwt.sign(newUser.data, AUTH_TOKEN_KEY!, jwtOptions);\n\n      return res.status(200).json({\n        success: true,\n        user: {\n          user_id: newUser.id,\n          email: newUser.data.email,\n          name: newUser.data.name,\n          auth_token: authToken,\n        },\n      });\n    } catch (error) {\n      console.error(error);\n      return res.status(500).json({ error: `ë‚´ë¶€ ì˜¤ë¥˜` });\n    }\n  }\n);\n\n/**\n * ì…ë ¥ëœ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë¡œê·¸ì¸ ì„¸ì…˜ ì¸ì¦\n */\nuserRoute.post(\n  \"/login\",\n  validateHasParameters(\"email\", \"password\"),\n  async (req, res) => {\n    const { email, password } = req.body;\n\n    try {\n      // ì‚¬ìš©ì ì¡´ì¬ ì—¬ë¶€ ë° ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸\n      const user = await userRepository.getUserBy({id: email, matchField: 'email'});\n      const userExists = !!user;\n      const passwordCorrect = userExists && (await bcrypt.compare(password, user.data.password));\n      if(userExists && passwordCorrect) {\n\n        const jwtOptions = {\n          expiresIn: '24h',  // 24ì‹œê°„ í›„ í† í° ë§Œë£Œ\n        };\n\n        const authToken = jwt.sign(user.data, AUTH_TOKEN_KEY!, jwtOptions);\n\n        return res.status(200).json({\n          success: true,\n          user: {\n            user_id: user.id,\n            email: user.data.email,\n            name: user.data.name,\n            auth_token: authToken,\n          },\n        });\n      }\n\n      return res.status(400).json({error: 'ì˜ëª»ëœ ì¸ì¦ ì •ë³´'});\n    } catch (error) {\n      console.error(error);\n      return res.status(500).json({ error: `ì„œë²„ ì˜¤ë¥˜` });\n    }\n  }\n);\n\nexport default userRoute;\n```\n\nPOST /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ì— ì´ë¦„, ì´ë©”ì¼ ë° ë¹„ë°€ë²ˆí˜¸ ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì´ë©”ì¼ì„ í†µí•´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„, ì°¸ì´ë©´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì €ì¥ì„ ìœ„í•´ ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„° userDataë¥¼ ìƒì„±í•˜ë©°, ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ëŠ” ì´ì „ì— ì„¤ì¹˜í•œ bcryptë¥¼ ì‚¬ìš©í•˜ì—¬ ENCRYPTION_KEYë¡œ ì•”í˜¸í™”ë©ë‹ˆë‹¤. ì‚¬ìš©ì ë°ì´í„°ì˜ ì§€ì†ì„±ì€ userRepository.createUserë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜í–‰í•˜ë©°, ì‚¬ìš©ì ìƒì„±ì´ ì„±ê³µí•˜ë©´ 24ì‹œê°„ ë§Œë£Œ ê¸°ê°„ì´ ìˆëŠ” JWT í† í°ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. JWT í† í°ì€ ì´ì „ì— ì„¤ì¹˜í•œ jwtë¥¼ ì‚¬ìš©í•˜ì—¬ AUTH_TOKEN_KEYë¡œ ì„œëª…ë˜ë©° ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ê°€ ì„œë²„ ì‘ë‹µì„ ë°›ìœ¼ë©´ ì´ JWT í† í°ì´ í”„ë¡ íŠ¸ì—”ë“œì— ì €ì¥ë©ë‹ˆë‹¤.\n\n\n\n\n\nPOST /user/login ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ ë‚´ emailê³¼ password ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ë¨¼ì € ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ í•´ë‹¹ ì‚¬ìš©ì ì´ë©”ì¼ì— ëŒ€í•´ ì°¾ì€ ë³µí˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ í›„, ë™ì¼í•œ JWT ì„œëª… í”„ë¡œì„¸ìŠ¤ê°€ ë°˜ë³µë©ë‹ˆë‹¤.\n\n/register ë° /login ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬ìš© ë¯¸ë“¤ì›¨ì–´ë„ êµ¬í˜„í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ì„ ê²ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ /middleware ë””ë ‰í† ë¦¬ì™€ ê·¸ ì•ˆì— validation.ts íŒŒì¼ì„ ìƒì„±í•´ ë³´ì„¸ìš”.\n\n```js\ncd server/src &&\\\nmkdir middleware &&\\\ntouch validation.ts\n```\n\nvalidation.ts íŒŒì¼ì—ì„œëŠ” ì‚¬ìš©ì ì…ë ¥ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë“¤ì„ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.\n\n```js\n// server/src/middleware/validation.ts\n\nimport { NextFunction, Request, Response } from \"express\";\n\nexport const validateHasParameters = (...args: string[]) => {\n  return (req: Request, res: Response, next: NextFunction) => {\n    const body = req.body;\n    let valid = true;\n\n    for (const arg of args) {\n      if (body[arg] === undefined) {\n        res.status(403).json({ error: arg + \" not specified\" });\n        valid = false;\n        break;\n      }\n    }\n\n    if (valid) {\n      next();\n    }\n  };\n};\n\nexport const validatePasswordLength = (req: Request, res: Response, next: NextFunction) => {\n  const { password } = req.body;\n  if (!!password && password.length > 7) {\n    next();\n  } else {\n    res.status(403).json({ error: \"The password provided is not valid\" });\n  }\n};\n\nexport const validateEmailFormat = (req: Request, res: Response, next: NextFunction) => {\n  const { email } = req.body;\n  const re =\n    /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  if (!!email && re.test(String(email).toLowerCase())) {\n    next();\n  } else {\n    res.status(403).json({ error: \"The email provided is not valid\" });\n  }\n};\n```\n\nvalidateHasParameterì€ ëª¨ë“  POST ìš”ì²­ì— ì‚¬ìš©ë˜ë©° íŠ¹ì • ë§¤ê°œë³€ìˆ˜ê°€ ì œì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. validatePasswordLength ë° validateEmailFormat ë¯¸ë“¤ì›¨ì–´ëŠ” /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ìš”ì²­ì— ëŒ€í•´ ìœ íš¨í•œ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ì™€ ì´ë©”ì¼ í˜•ì‹ì„ ë³´ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ, app.tsì—ì„œ routesë¥¼ ì‚¬ìš©í•˜ì—¬ ë£¨í„°ë¥¼ express ì•±ì— ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ì— í‘œì‹œëœëŒ€ë¡œ routesë¥¼ íŒŒì¼ ë§¨ ìœ„ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì‹­ì‹œì˜¤.\n\n```js\n/* app.ts */\n\n// ì „ì—­ ì¢…ì†ì„±\nimport * as dotenv from \"dotenv\";\ndotenv.config(); // ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ ì´ˆê¸°í™”\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport routes from \"./routes\";\n\n// express ì•± ì„¤ì •\nimport express from \"express\";\nconst app = express();\n\n// ë¯¸ë“¤ì›¨ì–´\napp.use(express.json());\n\n// ë¼ìš°í„°\napp.use(routes);\n\nexport default app;\n```\n\nì´ì œ ì‚¬ìš©ìê°€ ë°©ê¸ˆ ë§Œë“  ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë“±ë¡í•˜ê³  ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ì„œë²„ ì¸¡ì—ì„œ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì‚¬ìš©ì ê¶Œí•œ ì¶”ì ì„ ë‹¤ë£° ê²ƒì…ë‹ˆë‹¤.\n\n## 1.4 ì‚¬ìš©ì ê¶Œí•œ\n\nì‚¬ìš©ì ê¶Œí•œì€ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  ì‹œë„í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” ì‚¬ìš©ì ë“±ë¡ ë˜ëŠ” ë¡œê·¸ì¸ ì´ë²¤íŠ¸ì—ì„œ ìƒì„±ëœ í† í°ì´ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‹œì‘ëœ ëª¨ë“  ìš”ì²­ì— ì²¨ë¶€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. í† í°ì€ ê° ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‚¬ìš©ëœ AUTH_TOKEN_KEYì™€ ê°™ì€ ê²ƒìœ¼ë¡œ í™•ì¸ë  ê²ƒì…ë‹ˆë‹¤. ì•ìœ¼ë¡œ í† í°ì´ ìš”ì²­ê³¼ í•¨ê»˜ ì „ë‹¬ë˜ëŠ” ë°©ë²•ì„ ë‚˜ì¤€ì— ë‹¤ë£° ê²ƒì´ë©°, ì§€ê¸ˆì€ ì„œë²„ ì¸¡ì—ì„œ ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©ì ê¶Œí•œì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\n\nì„œë²„/src/middleware ë””ë ‰í† ë¦¬ ì•ˆì— auth.tsë¼ëŠ” ì¶”ê°€ íŒŒì¼ì„ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤.\n\n```js\ncd server/src/middleware && touch auth.ts\n```\n\nauth.ts íŒŒì¼ ì•ˆì—ëŠ” ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ê°€ë¡œì±„ê³  í† í° ìœ íš¨ì„± ê²€ì‚¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ëŠ” checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.\n\n```js\n// server/src/middleware/auth.ts\n\n// ì „ì—­ ì˜ì¡´ì„±\nimport jwt, { JwtPayload } from 'jsonwebtoken';\nconst { AUTH_TOKEN_KEY } = process.env;\n\n// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±\nimport userRepository from '../repositories/UserRepository';\n\nexport const checkAuthToken = async (req: any, res: any, next: any) => {\n  const auth_token = req.headers[\"x-access-token\"] as string;\n\n  try {\n    if (!auth_token) {\n      throw new Error('Unauthorized');\n    }\n\n    const decodedUserInfo = jwt.verify(auth_token, AUTH_TOKEN_KEY!) as JwtPayload;\n    // ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\n    const user = await userRepository.getUserBy({ id: decodedUserInfo.email, matchField: 'email' });\n    if(!user) {\n      throw new Error('Unauthorized');\n    }\n\n    req.user = {...user.data, ...decodedUserInfo};\n  } catch (error) {\n    return res.status(403).json({error: 'Unauthorized'});\n  }\n\n  return next();\n};\n```\n\ní™•ì¸í•  í† í°ì€ ìš”ì²­ í—¤ë” X-ACCESS-TOKEN ì•ˆì— í¬í•¨ë  ê²ƒì…ë‹ˆë‹¤. ì¶”ì¶œëœ í† í°ì€ AUTH_TOKEN_KEYë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ì¦ë˜ë©°, í•´ë‹¹ ë°ì´í„° í˜ì´ë¡œë“œëŠ” decodedUserInfoì— í• ë‹¹ë  ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì œì¶œëœ í† í°ì˜ ìœ íš¨ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë°ì´í„° ì €ì¥ì†Œì— ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ ì¶”ê°€ë¡œ í™•ì¸í•  ê²ƒì…ë‹ˆë‹¤. í† í° ìœ íš¨ì„± ê²€ì‚¬ì— ì‹¤íŒ¨í•˜ë©´ 403 ì˜¤ë¥˜ 'Unauthorized' ë©”ì‹œì§€ë¡œ ì‘ë‹µí•  ê²ƒì…ë‹ˆë‹¤.\n\nì¸ì¦ ë…¼ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ë¥¼ í‰ë‚´ ë‚´ëŠ” ë”ë¯¸ /resource API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ resource.ts íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.\n\n```js\ncd server/src/routes && touch resource.ts\n```\n\nresource.ts íŒŒì¼ì˜ ë‚´ìš©ì€ ê°„ë‹¨í•˜ë©° ë‹¨ì¼ GET ì—”ë“œí¬ì¸íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ì¼ë¶€ ì •ì  HTMLì„ ë°˜í™˜í•©ë‹ˆë‹¤.\n\n```js\n// server/src/routes/resource.ts\n\nimport { Router } from \"express\";\nconst resourceRoute = Router();\n\nresourceRoute.get(\"/\", async (req, res) => {\n  return res.status(200).send(\"<h1>You have successfully access resource!</h1>\");\n});\n\nexport default resourceRoute;\n```\n\nserver/src/routes/index.ts íŒŒì¼ ì•ˆì— /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\n// server/src/routes/index.ts\n\n// ì „ì—­ ì˜ì¡´ì„±\nimport { Router } from \"express\";\nconst router = Router();\nimport userRoute from \"./user\";\nimport resourceRoute from \"./resource\";\nimport { checkAuthToken } from \"../middleware/auth\";\n\n// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸\nrouter.use(\"/user\", userRoute);\nrouter.use(\"/resource\", checkAuthToken, resourceRoute);\n\nexport default router;\n```\n\në˜í•œ checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ importí•˜ê³  /resource ì—”ë“œí¬ì¸íŠ¸ì™€ ì—°ê²°í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•´ë‹¹ ì—”ë“œí¬ì¸íŠ¸ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì´ í† í° ê¶Œí•œ ë¶€ì—¬ë¥¼ ìœ„í•´ ìœ íš¨ì„±ì„ ê²€ì‚¬ë°›ë„ë¡ ë©ë‹ˆë‹¤.\n\n## 1.5 CORS êµ¬í˜„\n\nì•ì„œ ë§í•œ íŠœí† ë¦¬ì–¼ì˜ ì œ1ë¶€ì—ì„œëŠ” CORS ê·œì¹™ì´ ì„œë²„ì— ì˜í•´ ì§€ì •ë˜ì–´ íŠ¹ì • ì¶œì²˜ ë„ë©”ì¸ìœ¼ë¡œë¶€í„°ì˜ ìš”ì²­ì„ í—ˆìš©í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì™¸ë¶€ íŒ¨í‚¤ì§€ì¸ corsë¥¼ ì‚¬ìš©í•  ê²ƒì´ë©°, ë”°ë¼ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë¨¼ì € ì„œë²„ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.\n\n```js\ncd server && yarn add cors && yarn add @types/cors --dev\n```\n\nì‹¤ì œ CORS ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„/src/app.tsì—ì„œ ë¯¸ë“¤ì›¨ì–´ë¡œ ì§€ì •ë©ë‹ˆë‹¤.\n\n```js\n/* app.ts */\n\n// global dependencies\nimport * as dotenv from \"dotenv\";\ndotenv.config(); // ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.\nimport cors from \"cors\";\n\n// project dependencies\nimport routes from \"./routes\";\n\n// express ì•± ì„¤ì •\nimport express from \"express\";\nconst app = express();\n\n// CORS ì„¤ì •\napp.use(\n  \"/\",\n  cors({\n    origin: true, // ì°¸ê³ : ì—¬ê¸°ì„œ ëª¨ë“  ì¶œì²œì„ í—ˆìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n    optionsSuccessStatus: 200,\n    preflightContinue: false,\n    methods: \"GET,POST,OPTIONS\",\n    credentials: true,\n  })\n);\n\n// ë¯¸ë“¤ì›¨ì–´\napp.use(express.json());\n\n// ë¼ìš°íŠ¸\napp.use(routes);\n\nexport default app;\n```\n\nê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ origin: trueë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ëª¨ë“  ë„ë©”ì¸ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ë¡œì»¬ ê°œë°œì— ì¶©ë¶„í•˜ì§€ë§Œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” í”„ë¡œì íŠ¸ë³„ ë„ë©”ì¸ ëª©ë¡ì—ì„œ ìš”ì²­ì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ì œ ì„œë²„ì— í•„ìš”í•œ ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì—ëŠ” ì‚¬ìš©ìê°€ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸ì¸ í¼ì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\n\n# 2. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì„¤ì •\n\n## 2.1 ì¢…ì†ì„± ì„¤ì¹˜\n\nì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ìš°ë¦¬ëŠ” React ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•˜ê¸° ìœ„í•´ ./authentication-and-authorization í´ë”ì— ë³„ë„ì˜ í´ë”ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤:\n\n```js\nmkdir ui && cd ui\n```\n\n/ui ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ Typescriptë¥¼ í™œì„±í™”í•œ React í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì‹­ì‹œì˜¤:\n\n```js\nyarn create react-app ./ --template typescript\n```\n\nì„¤ì¹˜ í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ë©´ '/ui' í´ë” ë‚´ ë¶ˆí•„ìš”í•œ íŒŒì¼ë“¤ì„ ì •ë¦¬í•˜ê³  ì•„ë˜ì— í‘œì‹œëœ ë””ë ‰í† ë¦¬ì™€ ë™ì¼í•˜ê²Œ ë³´ì´ë„ë¡ ì¡°ì •í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n/ui\n  |__ /node_modules\n      |__ ...\n  |__ /public\n      |__ favicon.ico\n      |__ index.html\n      |__ logo192.png\n      |__ logo512.png\n      |__ manifest.json\n      |__robots.txt\n  |__ /src\n      |__ App.css\n      |__ App.tsx\n      |__ index.css\n      |__ index.tsx\n      |__ react-app-env.d.ts\n  |__ .gitignore\n  |__ package.json\n  |-- README.md\n  |__ tsconfig.json\n  |__ yarn.lock\n```\n\nindex.tsxì™€ App.tsxì—ì„œ ë¶ˆí•„ìš”í•œ ì½”ë“œì™€ ì˜ëª»ëœ importë¥¼ ì œê±°í•˜ì—¬ ì•„ë˜ì— í‘œì‹œëœ íŒŒì¼ê³¼ ë™ì¼í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤:\n\n```js\n/* index.tsx */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n```\n\n```js\n/* App.tsx */\n\nimport \"./App.css\";\n\nfunction App() {\n  return <div className=\"App\">ì•ˆë…•</div>;\n}\n\nexport default App;\n```\n\nì¢‹ì€ ì†Œì‹ì€ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ ëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìœ¼ë©° ì´ì œ ì‹¤ì œ ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤!\n\n## 2.2 ì „ì—­ ì¸ì¦ ìƒíƒœ ê´€ë¦¬\n\nì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ë ¤ë©´ ì¸í„°í˜ì´ìŠ¤ê°€ ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœì— ëŒ€í•´ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ React Contextì™€ useReducer í›…ì„ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € ui/src/ ì•ˆì— ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ ìœ„í•œ ìŠ¤í† ì–´ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:\n\n\n\n\n\n```js\ncd ui/src &&\\\nmkdir store &&\\\ncd store && mkdir auth &&\\\ntouch authAction.ts AuthContextProvier.tsx authReducer.ts\n```\n\nauthAction.tsëŠ” ì‚¬ìš©ìê°€ ì¸í„°í˜ì´ìŠ¤ ë‚´ì—ì„œ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆëŠ” ê°€ëŠ¥í•œ ì•¡ì…˜ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/store/auth/authActions.ts */\n\nexport enum AuthActionEnum {\n  LOG_IN = 'LOG_IN',\n  LOG_OUT = 'LOG_OUT',\n};\n\nexport type AuthAction = {\n  type: AuthActionEnum.LOG_IN,\n  payload: {\n    authToken: string;\n    userId: string;\n    email: string;\n    name: string;\n  }\n} | {\n  type: AuthActionEnum.LOG_OUT,\n  payload: null,\n}\n```\n\nauthReducer.ts ë‚´ë¶€ì—ì„œëŠ” ì¸ì¦ ê´€ë ¨ ì•¡ì…˜ì„ í•´ë‹¹ ìƒíƒœë¡œ ë§¤í•‘í•˜ëŠ” ë¦¬ë“€ì„œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n/* ui/src/store/auth/authReducer.ts */\n\nimport { Reducer } from \"react\";\nimport { AuthAction } from \"./authActions\";\n\nexport interface AuthState {\n  isLoggedIn: boolean;\n  authToken?: string;\n  userId?: string;\n  name?: string;\n  email?: string;\n}\n\nexport const defaultAuthState: AuthState = {\n  isLoggedIn: false,\n};\n\nconst authReducer: Reducer<AuthState, AuthAction> = (state, action) => {\n  // ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì¸ì¦ë˜ë©´\n  if (action.type === \"LOG_IN\") {\n    localStorage.setItem(\"user\", JSON.stringify(action.payload));\n    return {\n      ...state,\n      isLoggedIn: true,\n      authToken: action.payload.authToken,\n      userId: action.payload.userId,\n      name: action.payload.name,\n      email: action.payload.email,\n    };\n  }\n\n  // ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ\n  if (action.type === \"LOG_OUT\") {\n    localStorage.removeItem(\"user\");\n    return defaultAuthState;\n  }\n\n  return defaultAuthState;\n};\n\nexport default authReducer;\n```\n\nê¸°ë³¸ ìƒíƒœëŠ” falseë¡œ ì„¤ì •ëœ í•˜ë‚˜ì˜ í•„ë“œì¸ isLoggedInìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì¸ì¦ì„ í•œ ë²ˆí•˜ë©´ ë¦¬ë“€ì„œëŠ” LOG_IN ì•¡ì…˜ì„ ì²˜ë¦¬í•˜ê³  ì‚¬ìš©ì ê´€ë ¨ ì •ë³´ë¥¼ localStorageì— ìœ ì§€í•˜ë©° ìƒˆ ì¸ì¦ ìƒíƒœë¥¼ ë°˜í™˜í•˜ì—¬ ë™ì¼í•œ ì •ë³´ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì •ë³´ë¥¼ ê³„ì† ìœ ì§€í•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë‚˜ê°€ê³  ë‚˜ì¤‘ì— ë°©ë¬¸í•  ë•Œ ì¸ì¦ ìƒíƒœê°€ ìœ ì§€ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. LOG_OUT ì•¡ì…˜ì€ ë¦¬ë“€ì„œì— ì˜í•´ ì²˜ë¦¬ë˜ì–´ ëª¨ë“  ìƒíƒœ ë° ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ê°€ ê¸°ë³¸ ê°’ìœ¼ë¡œ ì¬ì„¤ì •ë©ë‹ˆë‹¤.\n\nì´ì œ ì•¡ì…˜ê³¼ ë¦¬ë“€ì„œê°€ ì •ì˜ë˜ì—ˆìœ¼ë¯€ë¡œ AuthContextProvider.tsxì—ì„œ ì „ì²´ ì‘ìš© í”„ë¡œê·¸ë¨ì— ì¸ì¦ ìƒíƒœë¥¼ ì œê³µí•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ì œê³µì êµ¬ì„± ìš”ì†Œë¥¼ ë§Œë“­ë‹ˆë‹¤:\n\n```js\n/* ui/src/store/auth/AuthContextProvider.tsx */\n\n// ì „ì—­ ê°€ì ¸ì˜¤ê¸°\nimport React, { createContext, useReducer, useCallback, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport { AuthActionEnum } from \"./authActions\";\nimport authReducer, { AuthState, defaultAuthState } from \"./authReducer\";\n\ntype AuthProviderProps = {\n  children: React.ReactElement,\n};\n\nexport type UserData = {\n  authToken: string,\n  userId: string,\n  name: string,\n  email: string,\n};\n\nexport interface AuthContext {\n  authState: AuthState;\n  globalLogInDispatch: (props: UserData) => void;\n  globalLogOutDispatch: () => void;\n}\n\n// Auth ì»¨í…ìŠ¤íŠ¸\nconst authCtx =\n  createContext <\n  AuthContext >\n  {\n    authState: defaultAuthState,\n    globalLogInDispatch: () => {},\n    globalLogOutDispatch: () => {},\n  };\n\nexport const AuthContextProvider = (props: AuthProviderProps) => {\n  const { children } = props;\n\n  const [authState, authDispatch] = useReducer(authReducer, defaultAuthState);\n  const navigate = useNavigate();\n\n  // ì‚¬ìš©ì ì„¸ë¶€ ì •ë³´ê°€ ì§€ì†ë˜ëŠ”ì§€ í™•ì¸, ëŒ€ë¶€ë¶„ ë¸Œë¼ìš°ì € ìƒˆë¡œ ê³ ì¹¨ì— ëŒ€ì‘\n  useEffect(() => {\n    const user = localStorage.getItem(\"user\");\n    if (user) {\n      const userData: UserData = JSON.parse(user);\n      authDispatch({ type: AuthActionEnum.LOG_IN, payload: userData });\n    }\n  }, []);\n\n  const globalLogInDispatch = useCallback(\n    (props: UserData) => {\n      const { authToken, email, name, userId } = props;\n      authDispatch({\n        type: AuthActionEnum.LOG_IN,\n        payload: {\n          authToken,\n          userId,\n          name,\n          email,\n        },\n      });\n      navigate(\"/resource\");\n    },\n    [navigate]\n  );\n\n  const globalLogOutDispatch = useCallback(() => {\n    authDispatch({ type: AuthActionEnum.LOG_OUT, payload: null });\n    navigate(\"/user/login\");\n  }, [navigate]);\n\n  // í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•  ì»¨í…ìŠ¤íŠ¸ ê°’\n  const ctx = {\n    authState,\n    globalLogInDispatch,\n    globalLogOutDispatch,\n  };\n\n  return <authCtx.Provider value={ctx}>{children}</authCtx.Provider>;\n};\n\nexport default authCtx;\n```\n\nAuthContextProvider ì»´í¬ë„ŒíŠ¸ëŠ” authState ë° ê´€ë ¨ ë””ìŠ¤íŒ¨ì¹˜ ë©”ì„œë“œë¥¼ authCtx ì»¨í…ìŠ¤íŠ¸ ë‚´ì˜ ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì œê³µí•˜ëŠ” Higher Order Component (HOC)ì…ë‹ˆë‹¤. globalLogInDispatchì™€ globalLogOutDispatch í•¨ìˆ˜ëŠ” ê°ê° LOG_IN ë° LOG_OUT ì•¡ì…˜ì„ ë¦¬ë“€ì„œì— ë””ìŠ¤íŒ¨ì¹˜í•˜ì—¬ ì¸ì¦ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì¸ì¦ ì•¡ì…˜ì´ ë””ìŠ¤íŒ¨ì¹˜ë  ë•Œ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™í•˜ê¸° ìœ„í•´ react-router-domë„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, ì‚¬ìš©ìê°€ ì´ì „ì— ë¡œê·¸ì¸í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  í•„ìš”í•  ê²½ìš° localStorageì— ì €ì¥ëœ ì •ë³´ë¥¼ ì°¾ì•„ LOG_IN ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ëŠ” useEffect í›…ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.\n\në§ˆì§€ë§‰ ë‹¨ê³„ëŠ” index.tsxì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ AuthContextProviderë¡œ ë˜í•‘í•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n```js\n/* index.tsx */\n\nimport ReactDOM from 'react-dom/client';\nimport React from 'react';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\nimport { AuthContextProvider } from './store/auth/AuthContextProvider';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <AuthContextProvider>\n        <App />\n      </AuthContextProvider>\n    </BrowserRouter>\n  </React.StrictMode>\n);\n```\n\n## 2.3 ì„œë²„ì™€ í†µì‹ í•˜ê¸°\n\nì¸ì¦ ìƒíƒœ ê´€ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ ì´ì œ ë‚´ë¶€ ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ê²€ìƒ‰í•´ì•¼ í•˜ëŠ” ì„œë²„ì™€ì˜ í†µì‹ ì— ì§‘ì¤‘í•´ ë´…ì‹œë‹¤. ì´ë¥¼ ìœ„í•´ React ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„œë²„ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ëŠ” ë…¼ë¦¬ë¥¼ ëª¨ë‘ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ useApië¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ui/src ë‚´ë¶€ì— ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆëŠ” ê´€ë ¨ íŒŒì¼ì´ ìˆëŠ” hooks í´ë”ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\ncd ui/src && mkdir hooks && cd hooks &&\\\nmkdir api && cd api &&\\\ntouch apiData.ts useApi.ts\n```\n\napiData.ts íŒŒì¼ì—ëŠ” ì‚¬ìš©ì ë¡œê·¸ì¸ ë° ë“±ë¡ ì´ë²¤íŠ¸ì— ëŒ€í•œ ì„œë²„ì—ì„œ ë°˜í™˜ë  ë°ì´í„° êµ¬ì¡°ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/hooks/api/apiData.ts */\n\nexport type AuthData = {\n  success: boolean,\n  user: {\n    user_id: string,\n    email: string,\n    name: string,\n    auth_token: string,\n  },\n};\n```\n\nuseApi.ts íŒŒì¼ì—ëŠ” ì„œë²„ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ í›…ì´ ë“¤ì–´ ìˆì–´ìš”:\n\n```js\n/* ui/src/hooks/api/useApi.ts */\n\n// ì „ì—­ ì˜ì¡´ì„±\nimport { useState, useCallback, useContext } from \"react\";\n\n// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±\nimport AuthContext from \"../../store/auth/AuthContextProvider\";\n\nconst BASE_URL = \"http://localhost:8000\";\n\nconst useApi = () => {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const { authState, globalLogOutDispatch } = useContext(AuthContext);\n\n  const request = useCallback(\n    async (\n      endpoint: string,\n      params: { [key: string]: any },\n      handleSuccessResponse: (data: any) => void,\n      handleErrorResponse?: (error: Error) => void\n    ) => {\n      setLoading(true);\n      setError(null);\n\n      try {\n        // NOTE: ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì¤‘ì´ë©´ ìš”ì²­ í—¤ë”ì— auth í† í° ì‚½ì…\n        if (authState.isLoggedIn) {\n          params.headers[\"x-access-token\"] = authState.authToken;\n        }\n\n        const response = await fetch(BASE_URL + endpoint, { ...params });\n        if (!response.ok) {\n          const data = await response.json(); // í•­ìƒ json ì‘ë‹µì„ ê°€ì •\n          throw new Error(data.error);\n        }\n        const data = await response.json(); // í•­ìƒ json ì‘ë‹µì„ ê°€ì •\n\n        // ì‘ë‹µì´ ì •ìƒì ì´ê³  ì˜¤ë¥˜ê°€ ì—†ëŠ” ê²½ìš°, ì„±ê³µ ì‘ë‹µ ì²˜ë¦¬\n        handleSuccessResponse && (await handleSuccessResponse(data));\n      } catch (error: any) {\n        // NOTE: ê¶Œí•œì´ ì—†ëŠ” ì˜¤ë¥˜ì¸ ê²½ìš° ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ\n        if (error && error.message && error.message === \"Unauthorized\") {\n          globalLogOutDispatch();\n        }\n\n        // ì§€ì •ëœ ì˜¤ë¥˜ ì²˜ë¦¬\n        if (handleErrorResponse) {\n          handleErrorResponse(error.message || error.error || error);\n        } else {\n          setError(error.message || error.error || error);\n        }\n      }\n\n      setLoading(false);\n    },\n\n    [authState.isLoggedIn, authState.authToken, globalLogOutDispatch]\n  );\n\n  return {\n    loading: loading,\n    error: error,\n    request: request,\n    setError: setError,\n  };\n};\n\nexport default useApi;\n```\n\nuseApi í›…ì€ request í•¨ìˆ˜ ë‚´ì—ì„œ fetch ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì„ ë‹´ë‹¹í•˜ê³  ìˆì–´ìš”. ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í–ˆëŠ”ì§€ ë¨¼ì € í™•ì¸í•˜ê³ , ì‚¬ìš©ìê°€ ì¸ì¦ë˜ë©´ ìš”ì²­ í—¤ë” x-access-tokenì— authTokenì„ ì²¨ë¶€í•©ë‹ˆë‹¤. ì´ í† í°ì€ ìš”ì²­ê³¼ í•¨ê»˜ ì „ì†¡ë˜ì–´ ì„œë²„ê°€ ì‚¬ìš©ìê°€ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë˜í•œ, ì»¤ìŠ¤í…€ í›…ì€ ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ ë° ì˜¤ë¥˜ ì²˜ë¦¬ì˜ ìƒíƒœ ê´€ë¦¬ë„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì„œë²„ì—ì„œ ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì•˜ë‹¤ë©´ handleSuccessResponse ì½œë°±ì„ í†µí•´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , ì‘ë‹µì´ ì‹¤íŒ¨í•œ ê²½ìš° handleErrorResponse ì½œë°±ì„ í†µí•´ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì‘ë‹µ ì˜¤ë¥˜ì— \"Unauthorized\" ë©”ì‹œì§€ê°€ ìˆìœ¼ë©´ globalLogOutDispatch í•¨ìˆ˜ë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.\n\n## 2.4 ì¸ì¦ êµ¬ì„± ìš”ì†Œ\n\nìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì™„ë£Œí–ˆê³ , ì´ì œ í™”ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‘ì—…í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë¨¼ì € React ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤:\n\n```js\ncd ui/src && mkdir components &&\\\ncd components && mkdir auth &&\\\ntouch Auth.tsx LogInForm.tsx RegisterForm.tsx validations.ts\n```\n\në¨¼ì €, LogInForm.tsxì™€ RegisterForm.tsxì—ì„œ ê°ê° ë¡œê·¸ì¸ ë° ì‚¬ìš©ì ë“±ë¡ì„ ìœ„í•œ ì–‘ì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/components/auth/LoginForm.tsx */\n\nimport { FormEventHandler } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./Auth.module.css\";\n\ntype Props = {\n  onSubmit: FormEventHandler<HTMLFormElement>,\n};\n\nconst LoginForm = (props: Props) => {\n  const { onSubmit } = props;\n  return (\n    <form onSubmit={onSubmit} className={styles.Form}>\n      <div className={styles.Input}>\n        <label htmlFor=\"email\">ì´ë©”ì¼</label>\n        <input id=\"email\" name=\"email\" type=\"email\" required placeholder=\"ì´ë©”ì¼ ì£¼ì†Œ\" />\n      </div>\n      <div className={styles.Input}>\n        <label htmlFor=\"password\">ë¹„ë°€ë²ˆí˜¸</label>\n        <input id=\"password\" name=\"password\" type=\"password\" required placeholder=\"ë¹„ë°€ë²ˆí˜¸\" />\n      </div>\n      <button type=\"submit\">ì œì¶œ</button>\n      <Link className={styles.Link} to={\"/user/register\"}>\n        ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? ê°€ì…í•˜ê¸°\n      </Link>\n    </form>\n  );\n};\n\nexport default LoginForm;\n```\n\n```js\n/* ui/src/components/auth/RegisterForm.tsx */\n\nimport { FormEventHandler } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./Auth.module.css\";\n\ntype Props = {\n  onSubmit: FormEventHandler<HTMLFormElement>,\n};\n\nconst RegisterForm = (props: Props) => {\n  const { onSubmit } = props;\n  return (\n    <form onSubmit={onSubmit} className={styles.Form}>\n      <div className={styles.Input}>\n        <label htmlFor=\"name\">ì´ë¦„</label>\n        <input id=\"name\" name=\"name\" type=\"text\" required placeholder=\"ì „ì²´ ì´ë¦„\" />\n      </div>\n      <div className={styles.Input}>\n        <label htmlFor=\"email\">ì´ë©”ì¼</label>\n        <input id=\"email\" name=\"email\" type=\"email\" required placeholder=\"ì´ë©”ì¼ ì£¼ì†Œ\" />\n      </div>\n      <div className={styles.Input}>\n        <label htmlFor=\"password\">ë¹„ë°€ë²ˆí˜¸</label>\n        <input id=\"password\" name=\"password\" type=\"password\" required placeholder=\"ë¹„ë°€ë²ˆí˜¸\" />\n      </div>\n      <button type=\"submit\">ì œì¶œ</button>\n      <Link className={styles.Link} to={\"/user/login\"}>\n        ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸í•˜ê¸°\n      </Link>\n    </form>\n  );\n};\n\nexport default RegisterForm;\n```\n\në‘ ì–‘ì‹ì€ ê°ê° ì´ë¦„, ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ ì†ì„±ì„ í¬í•¨í•œ í¼ ì œì¶œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ì½œë°± í”„ë¡­ì¸ onSubmitì„ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.\n\nê·¸ ë‹¤ìŒìœ¼ë¡œ, Auth.tsxì—ì„œ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ë‚´ì˜ ë„¤ë¹„ê²Œì´ì…˜ ê²½ë¡œì— ë”°ë¼ LogInForm ë˜ëŠ” RegisterForm êµ¬ì„± ìš”ì†Œ ì¤‘ í•˜ë‚˜ë¥¼ í‘œì‹œí•  ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/components/auth/Auth.tsx */\n\n// ì „ì—­ imports\nimport { useEffect, useState, useContext, FormEventHandler } from \"react\";\n\n// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±\nimport useApi from \"../../hooks/api/useApi\";\nimport AuthContext from \"../../store/auth/AuthContextProvider\";\nimport { validatePasswordLength, validateEmailFormat } from \"./validations\";\nimport { AuthData } from \"../../hooks/api/apiData\";\nimport { useLocation } from \"react-router-dom\";\nimport LoginForm from \"./LoginForm\";\nimport RegisterForm from \"./RegisterForm\";\n\nconst Auth = () => {\n  const [authData, setAuthData] = useState<AuthData>();\n  const { request, setError } = useApi();\n  const { globalLogInDispatch } = useContext(AuthContext);\n  const location = useLocation();\n  const currentPathArray = location.pathname.split('/');\n  const isLogin = currentPathArray[currentPathArray.length - 1] === 'login';\n\n  // ë¡œê·¸ì¸ ì‚¬ìš©ìì— ëŒ€í•œ api ì‘ë‹µ ì„±ê³µ ì‹œ, ì „ì—­ auth LOG_IN ì´ë²¤íŠ¸ë¥¼ ë””ìŠ¤íŒ¨ì¹˜í•©ë‹ˆë‹¤\n  useEffect(() => {\n    if (authData && \"success\" in authData) {\n      globalLogInDispatch({\n        authToken: authData.user.auth_token,\n        userId: authData.user.user_id,\n        name: authData.user.name,\n        email: authData.user.email,\n      });\n    }\n  }, [authData, globalLogInDispatch]);\n\n  const authHandler: FormEventHandler<HTMLFormElement> = async (event) => {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    // ë¨¼ì € ìœ íš¨ì„± ê²€ì‚¬!\n    const userEmail = data.get(\"email\");\n    const userPassword = data.get(\"password\");\n    const userName = data.get(\"name\");\n    try {\n      if (\n        !validateEmailFormat(userEmail?.toString() || \"\") ||\n        !validatePasswordLength(userPassword?.toString() || \"\")\n      ) {\n        throw new Error(\"ì˜ëª»ëœ ìê²© ì¦ëª… í˜•ì‹ì…ë‹ˆë‹¤!\");\n      }\n      const params = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          email: userEmail,\n          password: userPassword,\n          name: userName,\n        }),\n      };\n\n      const endpoint = `/user/${isLogin ? 'login' : 'register'}`\n      await request(endpoint, params, setAuthData);\n    } catch (error: any) {\n      setError(error.message || error);\n    }\n  };\n\n  return (\n    <>\n      <h2>{isLogin ? 'ë¡œê·¸ì¸' : 'ê°€ì…í•˜ê¸°'}</h2>\n      {\n        isLogin\n          ? <LoginForm onSubmit={authHandler} />\n          : <RegisterForm onSubmit={authHandler} />\n      }\n    </>\n  );\n};\n\nexport default Auth;\n```\n\nìš°ë¦¬ëŠ” react-router-domì—ì„œ ì œê³µí•˜ëŠ” useLocationì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì–´ë–¤ ê²½ë¡œì— ìˆëŠ”ì§€ ì¶”ì¶œí•©ë‹ˆë‹¤. ê²½ë¡œì— ë”°ë¼, LoginForm ë˜ëŠ” RegisterFormì„ í‘œì‹œí•˜ë„ë¡ ì„ íƒí•©ë‹ˆë‹¤. ê° í¼ì— ëŒ€í•œ onSubmit í•¸ë“¤ëŸ¬ëŠ” authHandlerì— ì •ì˜ëœ ëŒ€ë¡œ ì‘ë™í•˜ë©°, ì´ í•¸ë“¤ëŸ¬ëŠ” ì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì—ì„œ ëª¨ë“  ì…ë ¥ í¼ ì†ì„±ì„ ì¶”ì¶œí•˜ê³  ì„œë²„ì—ì„œ ì‚¬ìš©ì/ë¡œê·¸ì¸ ë˜ëŠ” ì‚¬ìš©ì/ë“±ë¡ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ê¸° ì „ì— ì´ë¥¼ ìœ íš¨ì„± ê²€ì‚¬í•©ë‹ˆë‹¤.\n\nì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ì€ ê¸°ë³¸ì ì´ë©° ì•„ë˜ validation.tsì—ì„œ ë³´ì—¬ì§„ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/components/auth/validations.ts */\n\nexport const validatePasswordLength = (password: string) => {\n  return !!password && password.length > 7;\n};\n\nexport const validateEmailFormat = (email: string) => {\n  const re =\n    /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return !!email && re.test(String(email).toLowerCase());\n};\n```\n\n## 2.5 Resource component\n\në§ˆì§€ë§‰ìœ¼ë¡œ ë§Œë“¤ ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ìš”ì†ŒëŠ” ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” ë”ë¯¸ í˜ì´ì§€ì…ë‹ˆë‹¤. ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:\n\n```js\ncd ui/src/components &&\\\nmkdir resource &&\\\ncd resource &&\\\ntouch Resource.tsx\n```\n\nResource.tsx íŒŒì¼ ë‚´ë¶€ì— ì•„ë˜ì™€ ê°™ì´ êµ¬ì„± ìš”ì†Œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n/* ui/src/components/resource/Resource.tsx */\n\nimport { useCallback, useContext, useEffect, useState } from \"react\";\nimport useApi from \"../../hooks/api/useApi\";\nimport authCtx from \"../../store/auth/AuthContextProvider\";\nimport styles from \"./Resource.module.css\";\n\nconst Resource = () => {\n  const [data, setData] = useState();\n  const { request, setError } = useApi();\n  const { globalLogOutDispatch } = useContext(authCtx);\n\n  const fetchData = useCallback(async () => {\n    try {\n      const params = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      };\n      await request(\"/resource\", params, (result) => {\n        setData(result.data);\n      });\n    } catch (error: any) {\n      setError(error.message || error);\n    }\n  }, [request, setError]);\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n\n  return (\n    <div className={styles.Resource}>\n      <h1>{data}</h1>\n      <button onClick={globalLogOutDispatch}>ë¡œê·¸ì•„ì›ƒ</button>\n    </div>\n  );\n};\n\nexport default Resource;\n```\n\nì´ ì»´í¬ë„ŒíŠ¸ëŠ” ê°„ë‹¨í•˜ë©° useEffect í›…ì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì˜ /resource ì—”ë“œí¬ì¸íŠ¸ë¡œ í˜¸ì¶œí•˜ëŠ” ë¡œì§ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ í˜¸ì¶œì—ëŠ” pre-existing auth í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤. ë°˜í™˜ëœ ë°ì´í„°ëŠ” í˜ì´ì§€ì— í‘œì‹œë˜ë©° ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ auth ì»¨í…ìŠ¤íŠ¸ì—ì„œ globalLogOutDispatchë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì „ì—­ auth ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.\n\n## 2.6 ëª¨ë“  ê²ƒì„ ì—°ê²°í•˜ê¸°\n\nì¸í„°í˜ì´ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ í”„ë ˆì  í…Œì´ì…˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í–ˆìœ¼ë‹ˆ, App.tsxì—ì„œ react-router-domì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œ ë¼ìš°íŒ…ì„ í†µí•´ ëª¨ë“  ê²ƒì„ ì—°ê²°í•´ë³´ê² ìŠµë‹ˆë‹¤ :\n\n```js\n/* ui/src/App.tsx */\n\nimport \"./App.css\";\nimport { Route, Routes, Navigate, useLocation } from \"react-router-dom\";\nimport AuthContext from \"./store/auth/AuthContextProvider\";\nimport { useContext } from \"react\";\nimport Resource from \"./components/resource/Resource\";\nimport Auth from \"./components/auth/Auth\";\n\nfunction App() {\n  const { authState } = useContext(AuthContext);\n  const location = useLocation();\n\n  return (\n    <div className=\"App\">\n      <Routes>\n        <Route path=\"/\" element={<Navigate to={authState.isLoggedIn ? location.pathname : \"/user/login\"} />} />\n        {!authState.isLoggedIn && (\n          <Route path=\"user\">\n            <Route path=\"register\" element={<Auth />} />\n            <Route path=\"login\" element={<Auth />} />\n          </Route>\n        )}\n        {authState.isLoggedIn && <Route path=\"resource\" element={<Resource />} />}\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n```\n\nApp.tsx íŒŒì¼ ë‚´ì—ì„œëŠ” ì§€ê¸ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¼ìš°íŒ…ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. /user/register, /user/login ë° /resourceë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê³µëœ ì „ì—­ ì¸ì¦ ìƒíƒœê°€ ì‚¬ìš©ìê°€ ì¸ì¦ëœ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ë©´ ì‚¬ìš©ìì—ê²Œ /resource ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ì—¬ í•´ë‹¹ ì„œë²„ì˜ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™í•˜ì—¬ 'protected' ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\n\n# ê²°ë¡ \n\nì´ ê¸€ì—ì„œëŠ” í’€ìŠ¤íƒ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ëŠ” ë° í•„ìš”í•œ ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¸ì¦ ë°©ë²•ì€ í† í° ê¸°ë°˜ ë°©ì‹ìœ¼ë¡œ, ì´ëŠ” ì´ íŠœí† ë¦¬ì–¼ ì‹œë¦¬ì¦ˆì˜ ì²« ë²ˆì§¸ ê¸€ì—ì„œ ë…¼ì˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê° êµ¬ì„± ìš”ì†Œì— ëŒ€í•´ ë§ì€ ì„¸ë¶€ ì •ë³´ë¥¼ ë‹¤ë¤˜ì§€ë§Œ, ì•„ì§ í•  ì¼ì´ ë§ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n- í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìŠ¤íƒ€ì¼ë§ ê°œì„ , ì´ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ë§ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- í”„ë¡ íŠ¸ì—”ë“œ ë° ë°±ì—”ë“œì—ì„œ ì ì ˆí•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬, SQL ì¸ì ì…˜ ë°©ì§€ ë˜ëŠ” ë°ì´í„° ìœ í˜• ìœ íš¨ì„± ê²€ì‚¬ì™€ ê°™ì€ ì‘ì—….\n- ì˜ëª»ëœ ìê²© ì¦ëª…ì„ ì œì¶œí–ˆì„ ë•Œ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ì—ëŸ¬ ì²˜ë¦¬.\n- ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„° ì €ì¥.\n- AWS ë˜ëŠ” GCPì™€ ê°™ì€ í´ë¼ìš°ë“œ ì œê³µ ì—…ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì»¨í…Œì´ë„ˆí™”í•˜ê³  ë°°í¬.\n\në‚˜ë¨¸ì§€ëŠ” ë„¤ê°€ ì•Œì•„ì„œ í•´ì£¼ë©´ ë¼! ê·¸ë¦¬ê³  ì–¸ì œë“ ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œì„ í•˜ê±°ë‚˜ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ì œì•ˆì´ ìˆë‹¤ë©´ ëŒ“ê¸€ì„ ë‚¨ê²¨ì¤˜! ì´ íŠœí† ë¦¬ì–¼ì˜ ìµœì¢… ì½”ë“œëŠ” ì—¬ê¸°ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´.\n","ogImage":{"url":"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png"},"coverImage":"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png","tag":["Tech"],"readingTime":39},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<img src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png\">\n<h1>ì†Œê°œ</h1>\n<p>ì´ê²ƒì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œì„ êµ¬í˜„í•˜ëŠ” ë‘ ë¶€ë¶„ íŠœí† ë¦¬ì–¼ì˜ ë‘ ë²ˆì§¸ ê¸°ì‚¬ì…ë‹ˆë‹¤.</p>\n<p>íŠœí† ë¦¬ì–¼ì˜ ì²« ë²ˆì§¸ ë¶€ë¶„ì€ í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì¸ì¦ ë° ê¶Œí•œì˜ ê°œë…ì„ ì„¤ëª…í•˜ëŠ” ë° ì „ë…ë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ì§ ë³´ì§€ ì•Šì•˜ë‹¤ë©´, ì§„í–‰í•˜ê¸° ì „ì— ì²« ë²ˆì§¸ ë¶€ë¶„ì„ í™•ì¸í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.</p>\n<p>ê¸°ì´ˆë¥¼ ë‹¤ë£¬ ê¸°ì´ˆë¥¼ ë°”íƒ•ìœ¼ë¡œ, React, Node.js ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ í† í° ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ í•˜ëŠ” í’€ ìŠ¤íƒ ì‹œìŠ¤í…œì„ ë‹¨ê³„ë³„ë¡œ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì˜ ì™„ì „í•œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì´ GitHub ì €ì¥ì†Œì—ì„œ ì°¾ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ì„¹ì…˜ì—ì„œ í”„ë¡œì íŠ¸ êµ¬ì¡°ì— ìµìˆ™í•´ì ¸ ë´…ì‹œë‹¤.</p>\n<h1>í”„ë¡œì íŠ¸ êµ¬ì¡°</h1>\n<p><img src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_1.png\" alt=\"í”„ë¡œì íŠ¸ êµ¬ì¡°\"></p>\n<p>ìœ„ì˜ ê·¸ë¦¼ 1ì—ì„œ ì „ì²´ í’€ ìŠ¤íƒ í”„ë¡œì íŠ¸ êµ¬ì¡°ê°€ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ë° ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI) ë‚´ ê° êµ¬ì„± ìš”ì†Œì˜ ëª©ì ì— ëŒ€í•´ ë…¼ì˜í•´ ë´…ì‹œë‹¤.</p>\n<h2>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤</h2>\n<p>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” ë§¤ìš° ê¸°ë³¸ì ì´ë©°, í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´ì˜ Auth ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì´ëŸ¬í•œ ì»´í¬ë„ŒíŠ¸ì™€ ìƒí˜¸ì‘ìš©í•˜ì—¬ ì‚¬ìš©ì ì§€ì • í›„í¬ useApi ë° ApiProvider í´ë˜ìŠ¤ë¥¼ í†µí•´ ì„œë²„ì— ì¸ì¦ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì„œë²„ê°€ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ ìœ íš¨ì„± ê²€ì‚¬í•˜ë©´ ì‘ë‹µ ë‚´ì—ì„œ JWT í† í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ìœ íš¨í•œ ì„œë²„ ì‘ë‹µì‹œ, ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° AuthReducerë¡œ ì‘ì—…ì´ ë””ìŠ¤íŒ¨ì¹˜ë©ë‹ˆë‹¤. ë””ìŠ¤íŒ¨ì¹˜ëœ ì‘ì—…ì€ ê´€ë ¨ AuthStateë¡œ ì¤„ì–´ë“¤ê³ , AuthContextë¥¼ í†µí•´ ì „ì²´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¸í„°í˜ì´ìŠ¤ì— ì œê³µë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” React ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë  ê²ƒì…ë‹ˆë‹¤.</p>\n<h2>ì„œë²„</h2>\n<p>ì„œë²„ëŠ” ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ìê²© ì¦ëª… ë°ì´í„°ì™€ í•¨ê»˜ ìš”ì²­ì„ ë°›ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € Cors(Cross-Origin-Resource-Sharing) ê·œì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ê³  ì œì¶œëœ ì…ë ¥ ë°ì´í„°ê°€ ìœ íš¨í•œì§€ë¥¼ ê²€ì¦í•  ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¨ê³„ ì¤‘ í•˜ë‚˜ë¼ë„ í†µê³¼í•˜ì§€ ëª»í•˜ë©´ ì˜¤ë¥˜ ì‘ë‹µì´ ë°˜í™˜ë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ì€ ì‚¬ìš©ì/ê°€ì… routeì—ì„œ ìƒˆë¡œìš´ ì‚¬ìš©ìê°€ ìƒì„±ë˜ê±°ë‚˜ ì‚¬ìš©ì/ë¡œê·¸ì¸ routeì—ì„œ ê¸°ì¡´ ì‚¬ìš©ìê°€ ì¸ì¦ë©ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” InMemoryDataProviderê°€ êµ¬í˜„ë˜ë©° ì‚¬ìš©ì ë°ì´í„°ëŠ” ê°„ë‹¨í•œ ê°ì²´ì— ì €ì¥ë©ë‹ˆë‹¤. ì´ëŠ” íŠœí† ë¦¬ì–¼ì´ ë³µì¡í•´ì§€ì§€ ì•Šë„ë¡ ì˜ë„ëœ ê²ƒì´ë©° ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ì— ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤. DataProviderInterfaceëŠ” ë°ì´í„° ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì¶”ìƒí™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ë©°, ë‚˜ì¤‘ì— ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ ì œê³µìë¡œ ì‰½ê²Œ ì „í™˜í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ê°€ì… ë˜ëŠ” ë¡œê·¸ì¸ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ë©´ ì„œëª…ëœ ì„œë²„ì™€ í•¨ê»˜ ë§Œë£Œ ê°€ëŠ¥í•œ JWT(JSON Web Token)ê°€ ìƒì„±ë˜ì–´ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤. ì´ í† í°, ì¼ë°˜ì ìœ¼ë¡œ ì¸ì¦ í† í°ìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆìœ¼ë©°, ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì—ì„œ /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ë³´í˜¸ëœ ì„œë²„ ì¸¡ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ ìš”ì²­ì— í¬í•¨ë©ë‹ˆë‹¤.</p>\n<h1>ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­</h1>\n<p>ì´ íŠœí† ë¦¬ì–¼ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ê¸° ìœ„í•œ ì „ì œ ì¡°ê±´ ëª©ë¡ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>\n<ul>\n<li>í•´ë‹¹ íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí•˜ë ¤ë©´ ì»´í“¨í„°ì— Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>\n<li>Node Package Manager (NPM)ì€ Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ì„œ Yarnì„ ì„ í˜¸í•˜ë©° í”„ë¡œì íŠ¸ ì¢…ì†ì„± ê´€ë¦¬ì—ëŠ” Yarnì´ ì‚¬ìš©ë  ê²ƒì…ë‹ˆë‹¤.</li>\n<li>ì›¹ì´ ì‘ë™í•˜ëŠ” ë°©ì‹ì— ëŒ€í•œ ì•Œë§ì€ ì§€ì‹ì´ ìˆì–´ì•¼ í•˜ë©° ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ì‹œìŠ¤í…œì„ êµ¬í˜„í•œ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë³¸ì ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>\n<li>ë³¸ ë¬¸ì„œ ì´ì „ì— Node.js, React ë° Typescriptì™€ í•¨ê»˜ ì‘ì—…í•œ ê²½í—˜ì´ ìˆì–´ì•¼ í•˜ì§€ë§Œ, ì½”ë“œ ì•ˆë‚´ë¥¼ ë°›ì„ ì˜ˆì •ì´ë¯€ë¡œ ì‹¬ì¸µì ì¸ ì§€ì‹ì€ ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤.</li>\n</ul>\n<p>ì, ì†Œê°œëŠ” ì´ì œ ëë‚´ê³  ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬í˜„ìœ¼ë¡œ ë„˜ì–´ê°€ ë´…ì‹œë‹¤. ë©‹ì§€ë„¤ìš”! ğŸ˜</p>\n<h1>1. ì„œë²„ ì„¤ì •</h1>\n<h2>1.1 ì˜ì¡´ì„± ì„¤ì¹˜</h2>\n<p>ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³  ì„œë²„ ì½”ë“œ ê¸°ë°˜ì„ ì„¤ì •í•´ë³´ê² ìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\">mkdir authentication-and-authorization &#x26;&#x26;\\\ncd authentication-and-authorization &#x26;&#x26;\\\nmkdir server &#x26;&#x26;\\\ncd server &#x26;&#x26; mkdir src\n</code></pre>\n<p>ì‹œì‘ ì„œë²„ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-bash\">/authentication-and-authorization\n  |__ /server\n      |__ /src\n</code></pre>\n<p>/server í´ë” ì•ˆì— ìˆëŠ” í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ë…¸ë“œ í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ì„¸ìš”:</p>\n<pre><code class=\"hljs language-bash\">npm init -y\n</code></pre>\n<p>ì´ì œ ì„œë²„ í”„ë¡œì íŠ¸ì˜ ì‹œì‘ì ì´ ìˆìœ¼ë‹ˆ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Typescript í”„ë¡œì íŠ¸ë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\">yarn add typescript @types/node --dev &#x26;&#x26; npx tsc --init\n</code></pre>\n<p>ìœ„ ëª…ë ¹ì€ /server í´ë” ì•ˆì— tsconfig.json íŒŒì¼ì„ ìƒì„±í–ˆì„ ê²ë‹ˆë‹¤. í•´ë‹¹ íŒŒì¼ì˜ ë‚´ìš©ì„ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ë³€ê²½í•´ì£¼ì„¸ìš”:</p>\n<pre><code class=\"hljs language-js\">{\n  <span class=\"hljs-string\">\"compilerOptions\"</span>: {\n    <span class=\"hljs-string\">\"target\"</span>: <span class=\"hljs-string\">\"es2016\"</span>,\n    <span class=\"hljs-string\">\"module\"</span>: <span class=\"hljs-string\">\"commonjs\"</span>,\n    <span class=\"hljs-string\">\"rootDir\"</span>: <span class=\"hljs-string\">\"./src\"</span>,\n    <span class=\"hljs-string\">\"sourceMap\"</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-string\">\"outDir\"</span>: <span class=\"hljs-string\">\"./dist\"</span>,\n    <span class=\"hljs-string\">\"esModuleInterop\"</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-string\">\"forceConsistentCasingInFileNames\"</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-string\">\"strict\"</span>: <span class=\"hljs-literal\">true</span>,\n    <span class=\"hljs-string\">\"skipLibCheck\"</span>: <span class=\"hljs-literal\">true</span>\n  }\n}\n</code></pre>\n<p>ê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ rootDirì…ë‹ˆë‹¤. ì´ ì„¤ì •ì€ TypeScript ì»´íŒŒì¼ëŸ¬ì—ê²Œ .ts íŒŒì¼ì„ ì–´ë””ì—ì„œ ì°¾ì•„ .js íŒŒì¼ë¡œ ë³€í™˜í•˜ê³  outDirë¡œ ì§€ì •ëœ ë””ë ‰í† ë¦¬ì— ë°°ì¹˜í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤.</p>\n<p>ì´ì œ ì„œë²„ì— í•„ìš”í•œ ì´ˆê¸° íŒ¨í‚¤ì§€ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\">yarn add express dotenv cors &#x26;&#x26;\\\nyarn add @types/express @types/dotenv @types/cors --dev\n</code></pre>\n<p>3rd party íŒ¨í‚¤ì§€ì— ëŒ€í•œ íƒ€ì… ì •ì˜ íŒŒì¼ë„ ê°œë°œ ì¢…ì†ì„±ìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì„¸ìš”.</p>\n<h2>1.2 Express ì„œë²„ ë§Œë“¤ê¸°</h2>\n<p>ë¨¼ì € Express ì„œë²„ì˜ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ìƒì„±í•˜ê³  ë³¸ ê°•ì¢Œë¥¼ í†µí•´ ì´ë¥¼ í™•ì¥í•´ ë‚˜ê°ˆ ê²ƒì…ë‹ˆë‹¤. /server/src ë””ë ‰í† ë¦¬ ì•ˆì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ app.tsì™€ index.tsë¥¼ ìƒì„±í•˜ì„¸ìš”:</p>\n<pre><code class=\"hljs language-js\">touch app.<span class=\"hljs-property\">ts</span> &#x26;&#x26; touch index.<span class=\"hljs-property\">ts</span>\n</code></pre>\n<p>app.ts ì•ˆì—ëŠ” ì„œë²„ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ê³  ê´€ë ¨ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Express ì•± ê°ì²´ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. app.tsì˜ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤ (ì´ê²ƒì€ í•´ë‹¹ íŒŒì¼ì˜ ìµœì¢… ì½”ë“œê°€ ì•„ë‹™ë‹ˆë‹¤):</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* app.ts */</span>\n\n<span class=\"hljs-comment\">// ì „ì—­ ì¢…ì†ì„±</span>\n<span class=\"hljs-keyword\">import</span> * <span class=\"hljs-keyword\">as</span> dotenv <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"dotenv\"</span>;\ndotenv.<span class=\"hljs-title function_\">config</span>(); <span class=\"hljs-comment\">// ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤</span>\n\n<span class=\"hljs-comment\">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>\n<span class=\"hljs-keyword\">import</span> routes <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./routes\"</span>;\n\n<span class=\"hljs-comment\">// express ì•± ì„¤ì •</span>\n<span class=\"hljs-keyword\">import</span> express <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"express\"</span>;\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n\n<span class=\"hljs-comment\">// ë¯¸ë“¤ì›¨ì–´</span>\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">json</span>());\n\n<span class=\"hljs-comment\">// ë¼ìš°íŠ¸</span>\napp.<span class=\"hljs-title function_\">use</span>(routes);\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> app;\n</code></pre>\n<p>index.tsì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ SERVER_PORT í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì •ëœ í¬íŠ¸ì—ì„œ express ì„œë²„ë¥¼ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* index.ts */</span>\n\n<span class=\"hljs-comment\">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>\n<span class=\"hljs-keyword\">import</span> app <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./app\"</span>;\n<span class=\"hljs-keyword\">const</span> { <span class=\"hljs-variable constant_\">SERVER_PORT</span> } = process.<span class=\"hljs-property\">env</span>;\n\n<span class=\"hljs-comment\">// ì•±ì´ listeningì¤‘</span>\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-variable constant_\">SERVER_PORT</span>, <span class=\"hljs-function\">() =></span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">info</span>(<span class=\"hljs-string\">`ì•±ì´ í¬íŠ¸ <span class=\"hljs-subst\">${SERVER_PORT}</span>ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤`</span>);\n});\n</code></pre>\n<p>Gitì—ì„œ ë¬´ì‹œë  ìˆ˜ ìˆëŠ” .env íŒŒì¼ì— í”„ë¡œì íŠ¸ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ê´€í–‰ì…ë‹ˆë‹¤. ì´ íŒŒì¼ì€ /serverí´ë”ì— ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"># .<span class=\"hljs-property\">env</span>\n\n<span class=\"hljs-variable constant_\">SERVER_PORT</span>=<span class=\"hljs-number\">8000</span>\n</code></pre>\n<p>ìµìŠ¤í”„ë ˆìŠ¤ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ /server í´ë” ë‚´ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\">rm -rf ./dist &#x26;&#x26; npx tsc &#x26;&#x26; cp .<span class=\"hljs-property\">env</span> ./dist/.<span class=\"hljs-property\">env</span> &#x26;&#x26; cd ./dist &#x26;&#x26; node index.<span class=\"hljs-property\">js</span>\n</code></pre>\n<p>ìœ„ ëª…ë ¹ì€ ë¨¼ì € ./dist ë””ë ‰í† ë¦¬ë¥¼ ì œê±°í•˜ê³ , ./src ë””ë ‰í† ë¦¬ì— ìˆëŠ” ëª¨ë“  ì½”ë“œë¥¼ íƒ€ì… í™•ì¸í•˜ê³  ./dist ë””ë ‰í† ë¦¬ ë‚´ì˜ JavaScriptë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì»´íŒŒì¼ ë‹¨ê³„ê°€ ì™„ë£Œë˜ë©´ .env íŒŒì¼ì´ ./dist ë””ë ‰í† ë¦¬ë¡œ ë³µì‚¬ë˜ì–´ ì„œë²„ë¥¼ node index.jsë¡œ ì‹¤í–‰í•  ë•Œ í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ë§¤ë²ˆ ì´ ëª…ë ¹ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì§€ë£¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ server/package.json ë‚´ì— ëª‡ ê°€ì§€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¨ìˆœí™”í•˜ê² ìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">\"name\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"server\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"version\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"1.0.0\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"description\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"main\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"index.js\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"scripts\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"build\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"npx tsc &#x26;&#x26; cp .env ./dist/.env\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"start\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"rm -rf ./dist &#x26;&#x26; yarn build &#x26;&#x26; cd ./dist &#x26;&#x26; node index.js\"</span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"author\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"license\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"ISC\"</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"devDependencies\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"@types/cors\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^2.8.13\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"@types/dotenv\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^8.2.0\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"@types/express\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^4.17.15\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"@types/node\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^18.11.18\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"typescript\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^4.9.4\"</span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">\"dependencies\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">\"cors\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^2.8.5\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"dotenv\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^16.0.3\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"express\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"^4.18.2\"</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<p>ì´ì œ start ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-bash\">yarn start\n</code></pre>\n<p><img src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_2.png\" alt=\"ì´ë¯¸ì§€\"></p>\n<p>ì„œë²„ í”„ë¡œì íŠ¸ê°€ ì´ì œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ë°±ì—”ë“œ ì¸ì¦ ë° ê¶Œí•œ ì‹œìŠ¤í…œ ì„¤ì • ê³¼ì •ì„ ë³´ì—¬ë“œë¦´ ê²ƒì…ë‹ˆë‹¤.</p>\n<h2>1.3 ì‚¬ìš©ì ë°ì´í„° ì œê³µì</h2>\n<p>ë°ì´í„° ì €ì¥ ë ˆì´ì–´ëŠ” ì¸ì¦ ì‹œìŠ¤í…œì— í•„ìˆ˜ì ì…ë‹ˆë‹¤. ìƒˆ ì‚¬ìš©ìê°€ ìƒì„±ë  ë•Œ, ê·¸ë“¤ì˜ ë°ì´í„°ëŠ” ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë¡œê·¸ì¸í•  ë•Œ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•´ì„œ, ì‚¬ìš©ì ë°ì´í„° ì €ì¥ì„ ìœ„í•´ ì¸ë©”ëª¨ë¦¬ ì €ì¥ì„ êµ¬í˜„í•  ê²ƒì´ì§€ë§Œ, ë‚˜ì¤‘ì— ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ êµ¬í˜„ì„ êµì²´í•˜ëŠ” ê²ƒì´ ì‰½ë„ë¡ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<p>/server/src/data_providers í´ë”ë¥¼ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì¸í„°í˜ì´ìŠ¤ IDataProviderë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/data_providers/IDataProvider.ts</span>\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> interface <span class=\"hljs-title class_\">IDataProvider</span>&#x3C;<span class=\"hljs-title class_\">Resource</span>> {\n  <span class=\"hljs-attr\">createData</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">resource: Resource</span>) =></span> <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-keyword\">void</span>>;\n  <span class=\"hljs-attr\">readData</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">args: {id: string, matchField: string}</span>) =></span> <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-title class_\">Resource</span>>;\n  <span class=\"hljs-attr\">updateData</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">args: {id: string, resource: Resource}</span>) =></span> <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-keyword\">void</span>>;\n  <span class=\"hljs-attr\">deleteData</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">id: string</span>) =></span> <span class=\"hljs-title class_\">Promise</span>&#x3C;<span class=\"hljs-keyword\">void</span>>;\n}\n</code></pre>\n<p>ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ì¼ë°˜ì ì¸ CRUD ì‘ì—…ì„ ë‚˜íƒ€ë‚´ëŠ” ë„¤ ê°€ì§€ ë©”ì„œë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œë“¤ì€ Resource íƒ€ì…ì˜ ì¼ë°˜ì ì¸ ê°’ì„ ì†Œë¹„í•˜ê±°ë‚˜ ë°˜í™˜í•©ë‹ˆë‹¤. IDataProviderì˜ InMemoryDataProvider êµ¬í˜„ì€ ì•„ë˜ì™€ ê°™ì´ ë³´ì—¬ì§‘ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/data_providers/InMemoryDataProvider.ts</span>\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">IDataProvider</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./IDataProvider\"</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">InMemoryDataProvider</span>&#x3C;<span class=\"hljs-title class_\">Resource</span> <span class=\"hljs-keyword\">extends</span> {<span class=\"hljs-attr\">id</span>: string, <span class=\"hljs-attr\">data</span>: any}> implements <span class=\"hljs-title class_\">IDataProvider</span>&#x3C;<span class=\"hljs-title class_\">Resource</span>> {\n  private <span class=\"hljs-attr\">_data</span>: <span class=\"hljs-title class_\">Resource</span>[];\n\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\"></span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_data</span> = [];\n  };\n\n  public <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">createData</span>(<span class=\"hljs-params\">resource: Resource</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_data</span>.<span class=\"hljs-title function_\">push</span>(resource);\n    <span class=\"hljs-keyword\">return</span>;\n  }\n\n  public <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">readData</span>(<span class=\"hljs-params\">args: {id: string, matchField: string}</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_data</span>.<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">x</span> =></span> x.<span class=\"hljs-property\">data</span>[args.<span class=\"hljs-property\">matchField</span>] === args.<span class=\"hljs-property\">id</span>)[<span class=\"hljs-number\">0</span>];\n  };\n\n  public <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">updateData</span>(<span class=\"hljs-params\">props: { id: string; resource: Resource; }</span>) {\n    <span class=\"hljs-keyword\">const</span> {id, resource} = props;\n    <span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">const</span> datum <span class=\"hljs-keyword\">of</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_data</span>) {\n      <span class=\"hljs-keyword\">if</span>(datum.<span class=\"hljs-property\">id</span> === id) {\n        datum.<span class=\"hljs-property\">data</span> = resource.<span class=\"hljs-property\">data</span>;\n      }\n    }\n\n    <span class=\"hljs-keyword\">return</span>;\n  };\n\n  public <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">deleteData</span>(<span class=\"hljs-params\">id: string</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_data</span> = <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_data</span>.<span class=\"hljs-title function_\">filter</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">datum</span> =></span> datum.<span class=\"hljs-property\">id</span> !== id);\n    <span class=\"hljs-keyword\">return</span>;\n  };\n}\n</code></pre>\n<p>InMemoryDataProviderëŠ” IDataProviderì—ì„œ ì •ì˜ëœ ê³µê°œ ë©”ì„œë“œë¥¼ ì—„ê²©í•˜ê²Œ êµ¬í˜„í•©ë‹ˆë‹¤. ì‹¤ì œ ë°ì´í„° ì €ì¥ì†ŒëŠ” InMemoryDataProvider í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— íŠ¹ì •í•œ private _data ë°°ì—´ ì†ì„±ì…ë‹ˆë‹¤. InMemoryDataProviderì˜ generic íƒ€ì…ì€ Resourceì´ë©° 'id: string, data: any'ë¥¼ í™•ì¥í•˜ì˜€ê¸° ë•Œë¬¸ì— ì…ë ¥ ìì›ì€ id ë° ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ê¸°íƒ€ ì†ì„±ì„ ì¶”ê°€ë¡œ ê°€ì ¸ì•¼í•©ë‹ˆë‹¤. TypeScriptì˜ ì´ ì¸í„°í˜ì´ìŠ¤ ì¤‘ì‹¬ì  ì ‘ê·¼ì˜ ì¥ì ì€ IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¤€ìˆ˜í•œë‹¤ë©´ ë°ì´í„° ì €ì¥ì†Œë¥¼ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤(ì˜ˆ: SQL ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©).</p>\n<p>ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ì—ì„œ CRUD ì‘ì—…ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì—ì„œ ë¶„ë¦¬í•˜ëŠ” ì‚¬ìš©ì ì €ì¥ì†Œë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì €, ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ëœ ì¶”ìƒí™” Repositoryë¥¼ ì‘ì„±í•  ê²ƒì…ë‹ˆë‹¤. ì´ RepositoryëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ ìœ í˜•ì—ì„œ í™•ì¥ë  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/repositories/Repository.ts</span>\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">IDataProvider</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../data_providers/IDataProvider\"</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Repository</span>&#x3C;<span class=\"hljs-title class_\">Resource</span>> {\n  protected <span class=\"hljs-attr\">_provider</span>: <span class=\"hljs-title class_\">IDataProvider</span>&#x3C;<span class=\"hljs-title class_\">Resource</span>>;\n\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">args: {provider: IDataProvider&#x3C;Resource>}</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_provider</span> = args.<span class=\"hljs-property\">provider</span>;\n  };\n\n  public <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">provider</span>(): <span class=\"hljs-title class_\">IDataProvider</span>&#x3C;<span class=\"hljs-title class_\">Resource</span>> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_provider</span>;\n  }\n}\n</code></pre>\n<p>Repositoryì—ì„œ íŒŒìƒëœ í´ë˜ìŠ¤ëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì„ í˜•ì„±í•˜ëŠ” IDataProviderë¥¼ êµ¬í˜„í•˜ëŠ” ì œê³µì(provider)ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  UserRepository í´ë˜ìŠ¤ëŠ” Repositoryë¥¼ í™•ì¥í•˜ê³  ì‚¬ìš©ì ë°ì´í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ìì²´ public ë©”ì„œë“œë¥¼ ê°–ìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ìì„¸íˆ ì‚´í´ë´…ì‹œë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/repositories/UserRepository.ts</span>\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">IDataProvider</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../data_providers/IDataProvider\"</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Repository</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./Repository\"</span>;\n<span class=\"hljs-keyword\">import</span> { randomUUID } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"crypto\"</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">InMemoryDataProvider</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../data_providers/InMemoryDataProvider\"</span>;\n\ntype <span class=\"hljs-title class_\">UserData</span> = {\n  <span class=\"hljs-attr\">email</span>: string,\n  <span class=\"hljs-attr\">name</span>: string,\n  <span class=\"hljs-attr\">password</span>: string,\n  <span class=\"hljs-attr\">createdAt</span>: string,\n  <span class=\"hljs-attr\">updatedAt</span>: string\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">UserResource</span> {\n  private <span class=\"hljs-attr\">_id</span>: string;\n\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">private _data: UserData</span>) {\n    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_id</span> = <span class=\"hljs-title function_\">randomUUID</span>();\n  };\n\n  public <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">id</span>(): string {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_id</span>;\n  }\n\n  public <span class=\"hljs-keyword\">get</span> <span class=\"hljs-title function_\">data</span>(): <span class=\"hljs-title class_\">UserData</span> {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">_data</span>;\n  }\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">UserRepository</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_ inherited__\">Repository</span>&#x3C;<span class=\"hljs-title class_\">UserResource</span>> {\n  <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">args: {provider: IDataProvider&#x3C;UserResource>}</span>) {\n    <span class=\"hljs-variable language_\">super</span>({<span class=\"hljs-attr\">provider</span>: args.<span class=\"hljs-property\">provider</span>});\n  }\n\n  public <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">createUser</span>(<span class=\"hljs-params\">user: UserResource</span>) {\n    <span class=\"hljs-keyword\">await</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">provider</span>.<span class=\"hljs-title function_\">createData</span>(user);\n    <span class=\"hljs-keyword\">return</span>;\n  }\n\n  public <span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">getUserBy</span>(<span class=\"hljs-params\">args: {id: string, matchField: string}</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">provider</span>.<span class=\"hljs-title function_\">readData</span>({<span class=\"hljs-attr\">id</span>: args.<span class=\"hljs-property\">id</span>, <span class=\"hljs-attr\">matchField</span>: args.<span class=\"hljs-property\">matchField</span>});\n  }\n}\n\n<span class=\"hljs-keyword\">const</span> dataProvider = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">InMemoryDataProvider</span>&#x3C;<span class=\"hljs-title class_\">UserResource</span>>();\n<span class=\"hljs-keyword\">const</span> userRepository = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">UserRepository</span>({<span class=\"hljs-attr\">provider</span>: dataProvider});\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> userRepository;\n</code></pre>\n<p>ì‚¬ìš©ì ë°ì´í„°ì˜ êµ¬ì¡°ëŠ” UserData ìœ í˜•ì— ì˜í•´ ì •ì˜ë˜ë©°, ë¦¬ì†ŒìŠ¤ êµ¬ì¡°ëŠ” UserResource í´ë˜ìŠ¤ì— ì˜í•´ ì •ì˜ë©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” id ë° data ê³µê°œ ì†ì„±ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, creatUser ë° getUserBy ë©”ì„œë“œëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´ì™€ ìƒí˜¸ ì‘ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³  ì“°ê¸° ìœ„í•´ IDataProviderì˜ êµ¬í˜„ì„ í†µí•´ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>\n<p>ì°¸ê³ : ìš°ë¦¬ëŠ” InMemoryDataProviderì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ UserRepositoryì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ë ¤ë©´, InMemoryDataProvider ëŒ€ì‹  IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ì œ UserRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ API ì—”ë“œí¬ì¸íŠ¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë…¼ë¦¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒ ì„¹ì…˜ì—ì„œ ì„¤ëª…ë  ê²ƒì…ë‹ˆë‹¤.</p>\n<h2>1.3 ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ ë¼ìš°íŠ¸</h2>\n<p>ë‹¤ìŒìœ¼ë¡œ, express ë¼ìš°íŠ¸ë¥¼ ëª¨ë‘ ë³´ê´€í•  í´ë”ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:</p>\n<pre><code class=\"hljs language-js\">yarn add bcrypt jwt &#x26;&#x26;\\\nyarn add @types/bcrypt @types/jwt --dev &#x26;&#x26;\\\ncd server/src &#x26;&#x26;\\\nmkdir routes &#x26;&#x26;\\\ncd ./routes &#x26;&#x26;\\\ntouch index.<span class=\"hljs-property\">ts</span> user.<span class=\"hljs-property\">ts</span>\n</code></pre>\n<p>ì•Œë¦¼: ì¶”ê°€ì ìœ¼ë¡œ npm íŒ¨í‚¤ì§€ bcrypt ë° jwtë¥¼ ì„œë²„ í”„ë¡œì íŠ¸ ë‚´ì— ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë° bcryptë¥¼ ì‚¬ìš©í•˜ê³ , ì„±ê³µì ì¸ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì— ë°˜í™˜ë  ì¸ì¦ í† í°ì„ ìƒì„±í•˜ê¸° ìœ„í•´ jwtë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. /server ë‚´ë¶€ì˜ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\">/server\n  |__ /src\n      |__ ...\n      |__ /routes\n        |__ index.<span class=\"hljs-property\">ts</span>\n        |__ user.<span class=\"hljs-property\">ts</span>\n</code></pre>\n<p>index.ts ë‚´ì—ì„œëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ëª¨ë“  ê°€ëŠ¥í•œ ê²½ë¡œë¥¼ í¬í•¨í•˜ëŠ” ì¤‘ì•™ ë¼ìš°í„°ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ëŠ” ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ íŠ¹ì • /user ê²½ë¡œë§Œ ê°€ì§ˆ ê²ƒì…ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/routes/index.ts</span>\n\n<span class=\"hljs-comment\">// ì „ì—­ ì¢…ì†ì„±</span>\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Router</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"express\"</span>;\n<span class=\"hljs-keyword\">const</span> router = <span class=\"hljs-title class_\">Router</span>();\n<span class=\"hljs-keyword\">import</span> userRoute <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./user\"</span>;\n\n<span class=\"hljs-comment\">// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸</span>\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">\"/user\"</span>, userRoute);\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> router;\n</code></pre>\n<p>userRouteëŠ” ë‹¤ìŒê³¼ ê°™ì´ user.tsì— êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/routes/user.ts</span>\n\n<span class=\"hljs-comment\">// ì „ì—­ ì¢…ì†ì„±</span>\n<span class=\"hljs-keyword\">const</span> { <span class=\"hljs-variable constant_\">ENCRYPTION_KEY</span>, <span class=\"hljs-variable constant_\">AUTH_TOKEN_KEY</span> } = process.<span class=\"hljs-property\">env</span>;\n<span class=\"hljs-keyword\">import</span> {<span class=\"hljs-title class_\">Router</span>} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'express'</span>;\n<span class=\"hljs-keyword\">const</span> userRoute = <span class=\"hljs-title class_\">Router</span>();\n<span class=\"hljs-keyword\">import</span> bcrypt <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'bcrypt'</span>;\n<span class=\"hljs-keyword\">import</span> jwt <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'jsonwebtoken'</span>;\n\n<span class=\"hljs-comment\">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>\n<span class=\"hljs-keyword\">import</span> {<span class=\"hljs-title class_\">UserResource</span>} <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../repositories/UserRepository'</span>;\n<span class=\"hljs-keyword\">import</span> { validateHasParameters, validateEmailFormat, validatePasswordLength } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../middleware/validation\"</span>;\n<span class=\"hljs-keyword\">import</span> userRepository <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../repositories/UserRepository'</span>;\n\n<span class=\"hljs-comment\">/**\n * ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ë° ì´ë¦„ì„ ì…ë ¥í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡\n */</span>\nuserRoute.<span class=\"hljs-title function_\">post</span>(\n  <span class=\"hljs-string\">\"/register\"</span>,\n  <span class=\"hljs-title function_\">validateHasParameters</span>(<span class=\"hljs-string\">\"email\"</span>, <span class=\"hljs-string\">\"password\"</span>, <span class=\"hljs-string\">\"name\"</span>),\n  validateEmailFormat,\n  validatePasswordLength,\n  <span class=\"hljs-keyword\">async</span> (req, res) => {\n    <span class=\"hljs-keyword\">const</span> { name, email, password } = req.<span class=\"hljs-property\">body</span>;\n    <span class=\"hljs-keyword\">try</span> {\n      <span class=\"hljs-keyword\">const</span> userExist = <span class=\"hljs-keyword\">await</span> userRepository.<span class=\"hljs-title function_\">getUserBy</span>({<span class=\"hljs-attr\">id</span>: email, <span class=\"hljs-attr\">matchField</span>: <span class=\"hljs-string\">'email'</span>});\n      <span class=\"hljs-keyword\">if</span> (userExist) {\n        <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">409</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">\"User already exist\"</span> });\n      }\n\n      <span class=\"hljs-keyword\">const</span> date = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Date</span>().<span class=\"hljs-title function_\">toISOString</span>();\n\n      <span class=\"hljs-comment\">// ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”</span>\n      <span class=\"hljs-keyword\">const</span> passwordHash = <span class=\"hljs-keyword\">await</span> bcrypt.<span class=\"hljs-title function_\">hash</span>(password, <span class=\"hljs-variable constant_\">ENCRYPTION_KEY</span>!);\n\n      <span class=\"hljs-comment\">// ì‚¬ìš©ì ì •ë³´ì™€ ë§Œë£Œ ë‚ ì§œë¡œ ì¸ì¦ í† í° ìƒì„±</span>\n      <span class=\"hljs-keyword\">const</span> userData = {\n        <span class=\"hljs-attr\">name</span>: name,\n        <span class=\"hljs-attr\">email</span>: email,\n        <span class=\"hljs-attr\">password</span>: passwordHash,\n        <span class=\"hljs-attr\">createdAt</span>: date,\n        <span class=\"hljs-attr\">updatedAt</span>: date,\n      };\n      <span class=\"hljs-keyword\">const</span> newUser = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">UserResource</span>(userData);\n\n      <span class=\"hljs-comment\">// ì‚¬ìš©ì ë°ì´í„° ì €ì¥</span>\n      <span class=\"hljs-keyword\">await</span> userRepository.<span class=\"hljs-title function_\">createUser</span>(newUser);\n\n      <span class=\"hljs-keyword\">const</span> jwtOptions = {\n        <span class=\"hljs-attr\">expiresIn</span>: <span class=\"hljs-string\">'24h'</span>,  <span class=\"hljs-comment\">// 24ì‹œê°„ í›„ í† í° ë§Œë£Œ</span>\n      };\n\n      <span class=\"hljs-keyword\">const</span> authToken = jwt.<span class=\"hljs-title function_\">sign</span>(newUser.<span class=\"hljs-property\">data</span>, <span class=\"hljs-variable constant_\">AUTH_TOKEN_KEY</span>!, jwtOptions);\n\n      <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">200</span>).<span class=\"hljs-title function_\">json</span>({\n        <span class=\"hljs-attr\">success</span>: <span class=\"hljs-literal\">true</span>,\n        <span class=\"hljs-attr\">user</span>: {\n          <span class=\"hljs-attr\">user_id</span>: newUser.<span class=\"hljs-property\">id</span>,\n          <span class=\"hljs-attr\">email</span>: newUser.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">email</span>,\n          <span class=\"hljs-attr\">name</span>: newUser.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">name</span>,\n          <span class=\"hljs-attr\">auth_token</span>: authToken,\n        },\n      });\n    } <span class=\"hljs-keyword\">catch</span> (error) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(error);\n      <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">500</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">`ë‚´ë¶€ ì˜¤ë¥˜`</span> });\n    }\n  }\n);\n\n<span class=\"hljs-comment\">/**\n * ì…ë ¥ëœ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë¡œê·¸ì¸ ì„¸ì…˜ ì¸ì¦\n */</span>\nuserRoute.<span class=\"hljs-title function_\">post</span>(\n  <span class=\"hljs-string\">\"/login\"</span>,\n  <span class=\"hljs-title function_\">validateHasParameters</span>(<span class=\"hljs-string\">\"email\"</span>, <span class=\"hljs-string\">\"password\"</span>),\n  <span class=\"hljs-keyword\">async</span> (req, res) => {\n    <span class=\"hljs-keyword\">const</span> { email, password } = req.<span class=\"hljs-property\">body</span>;\n\n    <span class=\"hljs-keyword\">try</span> {\n      <span class=\"hljs-comment\">// ì‚¬ìš©ì ì¡´ì¬ ì—¬ë¶€ ë° ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸</span>\n      <span class=\"hljs-keyword\">const</span> user = <span class=\"hljs-keyword\">await</span> userRepository.<span class=\"hljs-title function_\">getUserBy</span>({<span class=\"hljs-attr\">id</span>: email, <span class=\"hljs-attr\">matchField</span>: <span class=\"hljs-string\">'email'</span>});\n      <span class=\"hljs-keyword\">const</span> userExists = !!user;\n      <span class=\"hljs-keyword\">const</span> passwordCorrect = userExists &#x26;&#x26; (<span class=\"hljs-keyword\">await</span> bcrypt.<span class=\"hljs-title function_\">compare</span>(password, user.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">password</span>));\n      <span class=\"hljs-keyword\">if</span>(userExists &#x26;&#x26; passwordCorrect) {\n\n        <span class=\"hljs-keyword\">const</span> jwtOptions = {\n          <span class=\"hljs-attr\">expiresIn</span>: <span class=\"hljs-string\">'24h'</span>,  <span class=\"hljs-comment\">// 24ì‹œê°„ í›„ í† í° ë§Œë£Œ</span>\n        };\n\n        <span class=\"hljs-keyword\">const</span> authToken = jwt.<span class=\"hljs-title function_\">sign</span>(user.<span class=\"hljs-property\">data</span>, <span class=\"hljs-variable constant_\">AUTH_TOKEN_KEY</span>!, jwtOptions);\n\n        <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">200</span>).<span class=\"hljs-title function_\">json</span>({\n          <span class=\"hljs-attr\">success</span>: <span class=\"hljs-literal\">true</span>,\n          <span class=\"hljs-attr\">user</span>: {\n            <span class=\"hljs-attr\">user_id</span>: user.<span class=\"hljs-property\">id</span>,\n            <span class=\"hljs-attr\">email</span>: user.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">email</span>,\n            <span class=\"hljs-attr\">name</span>: user.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">name</span>,\n            <span class=\"hljs-attr\">auth_token</span>: authToken,\n          },\n        });\n      }\n\n      <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">400</span>).<span class=\"hljs-title function_\">json</span>({<span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">'ì˜ëª»ëœ ì¸ì¦ ì •ë³´'</span>});\n    } <span class=\"hljs-keyword\">catch</span> (error) {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(error);\n      <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">500</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">`ì„œë²„ ì˜¤ë¥˜`</span> });\n    }\n  }\n);\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> userRoute;\n</code></pre>\n<p>POST /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ì— ì´ë¦„, ì´ë©”ì¼ ë° ë¹„ë°€ë²ˆí˜¸ ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì´ë©”ì¼ì„ í†µí•´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„, ì°¸ì´ë©´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì €ì¥ì„ ìœ„í•´ ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„° userDataë¥¼ ìƒì„±í•˜ë©°, ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ëŠ” ì´ì „ì— ì„¤ì¹˜í•œ bcryptë¥¼ ì‚¬ìš©í•˜ì—¬ ENCRYPTION_KEYë¡œ ì•”í˜¸í™”ë©ë‹ˆë‹¤. ì‚¬ìš©ì ë°ì´í„°ì˜ ì§€ì†ì„±ì€ userRepository.createUserë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜í–‰í•˜ë©°, ì‚¬ìš©ì ìƒì„±ì´ ì„±ê³µí•˜ë©´ 24ì‹œê°„ ë§Œë£Œ ê¸°ê°„ì´ ìˆëŠ” JWT í† í°ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. JWT í† í°ì€ ì´ì „ì— ì„¤ì¹˜í•œ jwtë¥¼ ì‚¬ìš©í•˜ì—¬ AUTH_TOKEN_KEYë¡œ ì„œëª…ë˜ë©° ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ê°€ ì„œë²„ ì‘ë‹µì„ ë°›ìœ¼ë©´ ì´ JWT í† í°ì´ í”„ë¡ íŠ¸ì—”ë“œì— ì €ì¥ë©ë‹ˆë‹¤.</p>\n<p>POST /user/login ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ ë‚´ emailê³¼ password ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ë¨¼ì € ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ í•´ë‹¹ ì‚¬ìš©ì ì´ë©”ì¼ì— ëŒ€í•´ ì°¾ì€ ë³µí˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ í›„, ë™ì¼í•œ JWT ì„œëª… í”„ë¡œì„¸ìŠ¤ê°€ ë°˜ë³µë©ë‹ˆë‹¤.</p>\n<p>/register ë° /login ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬ìš© ë¯¸ë“¤ì›¨ì–´ë„ êµ¬í˜„í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ì„ ê²ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ /middleware ë””ë ‰í† ë¦¬ì™€ ê·¸ ì•ˆì— validation.ts íŒŒì¼ì„ ìƒì„±í•´ ë³´ì„¸ìš”.</p>\n<pre><code class=\"hljs language-js\">cd server/src &#x26;&#x26;\\\nmkdir middleware &#x26;&#x26;\\\ntouch validation.<span class=\"hljs-property\">ts</span>\n</code></pre>\n<p>validation.ts íŒŒì¼ì—ì„œëŠ” ì‚¬ìš©ì ì…ë ¥ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë“¤ì„ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/middleware/validation.ts</span>\n\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">NextFunction</span>, <span class=\"hljs-title class_\">Request</span>, <span class=\"hljs-title class_\">Response</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"express\"</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validateHasParameters</span> = (<span class=\"hljs-params\">...args: string[]</span>) => {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\">(<span class=\"hljs-params\">req: Request, res: Response, next: NextFunction</span>) =></span> {\n    <span class=\"hljs-keyword\">const</span> body = req.<span class=\"hljs-property\">body</span>;\n    <span class=\"hljs-keyword\">let</span> valid = <span class=\"hljs-literal\">true</span>;\n\n    <span class=\"hljs-keyword\">for</span> (<span class=\"hljs-keyword\">const</span> arg <span class=\"hljs-keyword\">of</span> args) {\n      <span class=\"hljs-keyword\">if</span> (body[arg] === <span class=\"hljs-literal\">undefined</span>) {\n        res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">403</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">error</span>: arg + <span class=\"hljs-string\">\" not specified\"</span> });\n        valid = <span class=\"hljs-literal\">false</span>;\n        <span class=\"hljs-keyword\">break</span>;\n      }\n    }\n\n    <span class=\"hljs-keyword\">if</span> (valid) {\n      <span class=\"hljs-title function_\">next</span>();\n    }\n  };\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validatePasswordLength</span> = (<span class=\"hljs-params\">req: Request, res: Response, next: NextFunction</span>) => {\n  <span class=\"hljs-keyword\">const</span> { password } = req.<span class=\"hljs-property\">body</span>;\n  <span class=\"hljs-keyword\">if</span> (!!password &#x26;&#x26; password.<span class=\"hljs-property\">length</span> > <span class=\"hljs-number\">7</span>) {\n    <span class=\"hljs-title function_\">next</span>();\n  } <span class=\"hljs-keyword\">else</span> {\n    res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">403</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">\"The password provided is not valid\"</span> });\n  }\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validateEmailFormat</span> = (<span class=\"hljs-params\">req: Request, res: Response, next: NextFunction</span>) => {\n  <span class=\"hljs-keyword\">const</span> { email } = req.<span class=\"hljs-property\">body</span>;\n  <span class=\"hljs-keyword\">const</span> re =\n    <span class=\"hljs-regexp\">/^(([^&#x3C;>()[\\]\\\\.,;:\\s@\"]+(\\.[^&#x3C;>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/</span>;\n  <span class=\"hljs-keyword\">if</span> (!!email &#x26;&#x26; re.<span class=\"hljs-title function_\">test</span>(<span class=\"hljs-title class_\">String</span>(email).<span class=\"hljs-title function_\">toLowerCase</span>())) {\n    <span class=\"hljs-title function_\">next</span>();\n  } <span class=\"hljs-keyword\">else</span> {\n    res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">403</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">\"The email provided is not valid\"</span> });\n  }\n};\n</code></pre>\n<p>validateHasParameterì€ ëª¨ë“  POST ìš”ì²­ì— ì‚¬ìš©ë˜ë©° íŠ¹ì • ë§¤ê°œë³€ìˆ˜ê°€ ì œì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. validatePasswordLength ë° validateEmailFormat ë¯¸ë“¤ì›¨ì–´ëŠ” /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ìš”ì²­ì— ëŒ€í•´ ìœ íš¨í•œ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ì™€ ì´ë©”ì¼ í˜•ì‹ì„ ë³´ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, app.tsì—ì„œ routesë¥¼ ì‚¬ìš©í•˜ì—¬ ë£¨í„°ë¥¼ express ì•±ì— ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ì— í‘œì‹œëœëŒ€ë¡œ routesë¥¼ íŒŒì¼ ë§¨ ìœ„ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì‹­ì‹œì˜¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* app.ts */</span>\n\n<span class=\"hljs-comment\">// ì „ì—­ ì¢…ì†ì„±</span>\n<span class=\"hljs-keyword\">import</span> * <span class=\"hljs-keyword\">as</span> dotenv <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"dotenv\"</span>;\ndotenv.<span class=\"hljs-title function_\">config</span>(); <span class=\"hljs-comment\">// ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ ì´ˆê¸°í™”</span>\n\n<span class=\"hljs-comment\">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>\n<span class=\"hljs-keyword\">import</span> routes <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./routes\"</span>;\n\n<span class=\"hljs-comment\">// express ì•± ì„¤ì •</span>\n<span class=\"hljs-keyword\">import</span> express <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"express\"</span>;\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n\n<span class=\"hljs-comment\">// ë¯¸ë“¤ì›¨ì–´</span>\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">json</span>());\n\n<span class=\"hljs-comment\">// ë¼ìš°í„°</span>\napp.<span class=\"hljs-title function_\">use</span>(routes);\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> app;\n</code></pre>\n<p>ì´ì œ ì‚¬ìš©ìê°€ ë°©ê¸ˆ ë§Œë“  ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë“±ë¡í•˜ê³  ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ì„œë²„ ì¸¡ì—ì„œ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì‚¬ìš©ì ê¶Œí•œ ì¶”ì ì„ ë‹¤ë£° ê²ƒì…ë‹ˆë‹¤.</p>\n<h2>1.4 ì‚¬ìš©ì ê¶Œí•œ</h2>\n<p>ì‚¬ìš©ì ê¶Œí•œì€ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  ì‹œë„í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” ì‚¬ìš©ì ë“±ë¡ ë˜ëŠ” ë¡œê·¸ì¸ ì´ë²¤íŠ¸ì—ì„œ ìƒì„±ëœ í† í°ì´ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‹œì‘ëœ ëª¨ë“  ìš”ì²­ì— ì²¨ë¶€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. í† í°ì€ ê° ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‚¬ìš©ëœ AUTH_TOKEN_KEYì™€ ê°™ì€ ê²ƒìœ¼ë¡œ í™•ì¸ë  ê²ƒì…ë‹ˆë‹¤. ì•ìœ¼ë¡œ í† í°ì´ ìš”ì²­ê³¼ í•¨ê»˜ ì „ë‹¬ë˜ëŠ” ë°©ë²•ì„ ë‚˜ì¤€ì— ë‹¤ë£° ê²ƒì´ë©°, ì§€ê¸ˆì€ ì„œë²„ ì¸¡ì—ì„œ ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©ì ê¶Œí•œì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<p>ì„œë²„/src/middleware ë””ë ‰í† ë¦¬ ì•ˆì— auth.tsë¼ëŠ” ì¶”ê°€ íŒŒì¼ì„ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\">cd server/src/middleware &#x26;&#x26; touch auth.<span class=\"hljs-property\">ts</span>\n</code></pre>\n<p>auth.ts íŒŒì¼ ì•ˆì—ëŠ” ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ê°€ë¡œì±„ê³  í† í° ìœ íš¨ì„± ê²€ì‚¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ëŠ” checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/middleware/auth.ts</span>\n\n<span class=\"hljs-comment\">// ì „ì—­ ì˜ì¡´ì„±</span>\n<span class=\"hljs-keyword\">import</span> jwt, { <span class=\"hljs-title class_\">JwtPayload</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'jsonwebtoken'</span>;\n<span class=\"hljs-keyword\">const</span> { <span class=\"hljs-variable constant_\">AUTH_TOKEN_KEY</span> } = process.<span class=\"hljs-property\">env</span>;\n\n<span class=\"hljs-comment\">// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±</span>\n<span class=\"hljs-keyword\">import</span> userRepository <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../repositories/UserRepository'</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">checkAuthToken</span> = <span class=\"hljs-keyword\">async</span> (<span class=\"hljs-params\">req: any, res: any, next: any</span>) => {\n  <span class=\"hljs-keyword\">const</span> auth_token = req.<span class=\"hljs-property\">headers</span>[<span class=\"hljs-string\">\"x-access-token\"</span>] <span class=\"hljs-keyword\">as</span> string;\n\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-keyword\">if</span> (!auth_token) {\n      <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">'Unauthorized'</span>);\n    }\n\n    <span class=\"hljs-keyword\">const</span> decodedUserInfo = jwt.<span class=\"hljs-title function_\">verify</span>(auth_token, <span class=\"hljs-variable constant_\">AUTH_TOKEN_KEY</span>!) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title class_\">JwtPayload</span>;\n    <span class=\"hljs-comment\">// ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸</span>\n    <span class=\"hljs-keyword\">const</span> user = <span class=\"hljs-keyword\">await</span> userRepository.<span class=\"hljs-title function_\">getUserBy</span>({ <span class=\"hljs-attr\">id</span>: decodedUserInfo.<span class=\"hljs-property\">email</span>, <span class=\"hljs-attr\">matchField</span>: <span class=\"hljs-string\">'email'</span> });\n    <span class=\"hljs-keyword\">if</span>(!user) {\n      <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">'Unauthorized'</span>);\n    }\n\n    req.<span class=\"hljs-property\">user</span> = {...user.<span class=\"hljs-property\">data</span>, ...decodedUserInfo};\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n    <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">403</span>).<span class=\"hljs-title function_\">json</span>({<span class=\"hljs-attr\">error</span>: <span class=\"hljs-string\">'Unauthorized'</span>});\n  }\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">next</span>();\n};\n</code></pre>\n<p>í™•ì¸í•  í† í°ì€ ìš”ì²­ í—¤ë” X-ACCESS-TOKEN ì•ˆì— í¬í•¨ë  ê²ƒì…ë‹ˆë‹¤. ì¶”ì¶œëœ í† í°ì€ AUTH_TOKEN_KEYë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ì¦ë˜ë©°, í•´ë‹¹ ë°ì´í„° í˜ì´ë¡œë“œëŠ” decodedUserInfoì— í• ë‹¹ë  ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì œì¶œëœ í† í°ì˜ ìœ íš¨ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë°ì´í„° ì €ì¥ì†Œì— ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ ì¶”ê°€ë¡œ í™•ì¸í•  ê²ƒì…ë‹ˆë‹¤. í† í° ìœ íš¨ì„± ê²€ì‚¬ì— ì‹¤íŒ¨í•˜ë©´ 403 ì˜¤ë¥˜ 'Unauthorized' ë©”ì‹œì§€ë¡œ ì‘ë‹µí•  ê²ƒì…ë‹ˆë‹¤.</p>\n<p>ì¸ì¦ ë…¼ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ë¥¼ í‰ë‚´ ë‚´ëŠ” ë”ë¯¸ /resource API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ resource.ts íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\">cd server/src/routes &#x26;&#x26; touch resource.<span class=\"hljs-property\">ts</span>\n</code></pre>\n<p>resource.ts íŒŒì¼ì˜ ë‚´ìš©ì€ ê°„ë‹¨í•˜ë©° ë‹¨ì¼ GET ì—”ë“œí¬ì¸íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ì¼ë¶€ ì •ì  HTMLì„ ë°˜í™˜í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/routes/resource.ts</span>\n\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Router</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"express\"</span>;\n<span class=\"hljs-keyword\">const</span> resourceRoute = <span class=\"hljs-title class_\">Router</span>();\n\nresourceRoute.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">\"/\"</span>, <span class=\"hljs-keyword\">async</span> (req, res) => {\n  <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">200</span>).<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">\"&#x3C;h1>You have successfully access resource!&#x3C;/h1>\"</span>);\n});\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> resourceRoute;\n</code></pre>\n<p>server/src/routes/index.ts íŒŒì¼ ì•ˆì— /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server/src/routes/index.ts</span>\n\n<span class=\"hljs-comment\">// ì „ì—­ ì˜ì¡´ì„±</span>\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Router</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"express\"</span>;\n<span class=\"hljs-keyword\">const</span> router = <span class=\"hljs-title class_\">Router</span>();\n<span class=\"hljs-keyword\">import</span> userRoute <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./user\"</span>;\n<span class=\"hljs-keyword\">import</span> resourceRoute <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./resource\"</span>;\n<span class=\"hljs-keyword\">import</span> { checkAuthToken } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../middleware/auth\"</span>;\n\n<span class=\"hljs-comment\">// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸</span>\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">\"/user\"</span>, userRoute);\nrouter.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-string\">\"/resource\"</span>, checkAuthToken, resourceRoute);\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> router;\n</code></pre>\n<p>ë˜í•œ checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ importí•˜ê³  /resource ì—”ë“œí¬ì¸íŠ¸ì™€ ì—°ê²°í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•´ë‹¹ ì—”ë“œí¬ì¸íŠ¸ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì´ í† í° ê¶Œí•œ ë¶€ì—¬ë¥¼ ìœ„í•´ ìœ íš¨ì„±ì„ ê²€ì‚¬ë°›ë„ë¡ ë©ë‹ˆë‹¤.</p>\n<h2>1.5 CORS êµ¬í˜„</h2>\n<p>ì•ì„œ ë§í•œ íŠœí† ë¦¬ì–¼ì˜ ì œ1ë¶€ì—ì„œëŠ” CORS ê·œì¹™ì´ ì„œë²„ì— ì˜í•´ ì§€ì •ë˜ì–´ íŠ¹ì • ì¶œì²˜ ë„ë©”ì¸ìœ¼ë¡œë¶€í„°ì˜ ìš”ì²­ì„ í—ˆìš©í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì™¸ë¶€ íŒ¨í‚¤ì§€ì¸ corsë¥¼ ì‚¬ìš©í•  ê²ƒì´ë©°, ë”°ë¼ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë¨¼ì € ì„œë²„ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\">cd server &#x26;&#x26; yarn add cors &#x26;&#x26; yarn add @types/cors --dev\n</code></pre>\n<p>ì‹¤ì œ CORS ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„/src/app.tsì—ì„œ ë¯¸ë“¤ì›¨ì–´ë¡œ ì§€ì •ë©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* app.ts */</span>\n\n<span class=\"hljs-comment\">// global dependencies</span>\n<span class=\"hljs-keyword\">import</span> * <span class=\"hljs-keyword\">as</span> dotenv <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"dotenv\"</span>;\ndotenv.<span class=\"hljs-title function_\">config</span>(); <span class=\"hljs-comment\">// ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.</span>\n<span class=\"hljs-keyword\">import</span> cors <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"cors\"</span>;\n\n<span class=\"hljs-comment\">// project dependencies</span>\n<span class=\"hljs-keyword\">import</span> routes <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./routes\"</span>;\n\n<span class=\"hljs-comment\">// express ì•± ì„¤ì •</span>\n<span class=\"hljs-keyword\">import</span> express <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"express\"</span>;\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n\n<span class=\"hljs-comment\">// CORS ì„¤ì •</span>\napp.<span class=\"hljs-title function_\">use</span>(\n  <span class=\"hljs-string\">\"/\"</span>,\n  <span class=\"hljs-title function_\">cors</span>({\n    <span class=\"hljs-attr\">origin</span>: <span class=\"hljs-literal\">true</span>, <span class=\"hljs-comment\">// ì°¸ê³ : ì—¬ê¸°ì„œ ëª¨ë“  ì¶œì²œì„ í—ˆìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</span>\n    <span class=\"hljs-attr\">optionsSuccessStatus</span>: <span class=\"hljs-number\">200</span>,\n    <span class=\"hljs-attr\">preflightContinue</span>: <span class=\"hljs-literal\">false</span>,\n    <span class=\"hljs-attr\">methods</span>: <span class=\"hljs-string\">\"GET,POST,OPTIONS\"</span>,\n    <span class=\"hljs-attr\">credentials</span>: <span class=\"hljs-literal\">true</span>,\n  })\n);\n\n<span class=\"hljs-comment\">// ë¯¸ë“¤ì›¨ì–´</span>\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">json</span>());\n\n<span class=\"hljs-comment\">// ë¼ìš°íŠ¸</span>\napp.<span class=\"hljs-title function_\">use</span>(routes);\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> app;\n</code></pre>\n<p>ê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ origin: trueë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ëª¨ë“  ë„ë©”ì¸ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ë¡œì»¬ ê°œë°œì— ì¶©ë¶„í•˜ì§€ë§Œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” í”„ë¡œì íŠ¸ë³„ ë„ë©”ì¸ ëª©ë¡ì—ì„œ ìš”ì²­ì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<p>ì´ì œ ì„œë²„ì— í•„ìš”í•œ ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì—ëŠ” ì‚¬ìš©ìê°€ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸ì¸ í¼ì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.</p>\n<h1>2. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì„¤ì •</h1>\n<h2>2.1 ì¢…ì†ì„± ì„¤ì¹˜</h2>\n<p>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ìš°ë¦¬ëŠ” React ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•˜ê¸° ìœ„í•´ ./authentication-and-authorization í´ë”ì— ë³„ë„ì˜ í´ë”ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\">mkdir ui &#x26;&#x26; cd ui\n</code></pre>\n<p>/ui ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ Typescriptë¥¼ í™œì„±í™”í•œ React í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì‹­ì‹œì˜¤:</p>\n<pre><code class=\"hljs language-js\">yarn create react-app ./ --template typescript\n</code></pre>\n<p>ì„¤ì¹˜ í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ë©´ '/ui' í´ë” ë‚´ ë¶ˆí•„ìš”í•œ íŒŒì¼ë“¤ì„ ì •ë¦¬í•˜ê³  ì•„ë˜ì— í‘œì‹œëœ ë””ë ‰í† ë¦¬ì™€ ë™ì¼í•˜ê²Œ ë³´ì´ë„ë¡ ì¡°ì •í•  ê²ƒì…ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\">/ui\n  |__ /node_modules\n      |__ ...\n  |__ /public\n      |__ favicon.<span class=\"hljs-property\">ico</span>\n      |__ index.<span class=\"hljs-property\">html</span>\n      |__ logo192.<span class=\"hljs-property\">png</span>\n      |__ logo512.<span class=\"hljs-property\">png</span>\n      |__ manifest.<span class=\"hljs-property\">json</span>\n      |__robots.<span class=\"hljs-property\">txt</span>\n  |__ /src\n      |__ <span class=\"hljs-title class_\">App</span>.<span class=\"hljs-property\">css</span>\n      |__ <span class=\"hljs-title class_\">App</span>.<span class=\"hljs-property\">tsx</span>\n      |__ index.<span class=\"hljs-property\">css</span>\n      |__ index.<span class=\"hljs-property\">tsx</span>\n      |__ react-app-env.<span class=\"hljs-property\">d</span>.<span class=\"hljs-property\">ts</span>\n  |__ .<span class=\"hljs-property\">gitignore</span>\n  |__ package.<span class=\"hljs-property\">json</span>\n  |-- <span class=\"hljs-variable constant_\">README</span>.<span class=\"hljs-property\">md</span>\n  |__ tsconfig.<span class=\"hljs-property\">json</span>\n  |__ yarn.<span class=\"hljs-property\">lock</span>\n</code></pre>\n<p>index.tsxì™€ App.tsxì—ì„œ ë¶ˆí•„ìš”í•œ ì½”ë“œì™€ ì˜ëª»ëœ importë¥¼ ì œê±°í•˜ì—¬ ì•„ë˜ì— í‘œì‹œëœ íŒŒì¼ê³¼ ë™ì¼í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* index.tsx */</span>\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">ReactDOM</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react-dom/client'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'./index.css'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">App</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./App'</span>;\n\n<span class=\"hljs-keyword\">const</span> root = <span class=\"hljs-title class_\">ReactDOM</span>.<span class=\"hljs-title function_\">createRoot</span>(\n  <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">'root'</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title class_\">HTMLElement</span>\n);\nroot.<span class=\"hljs-title function_\">render</span>(\n  <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">React.StrictMode</span>></span>\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">App</span> /></span>\n  <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">React.StrictMode</span>></span></span>\n);\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* App.tsx */</span>\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">\"./App.css\"</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"App\"</span>></span>ì•ˆë…•<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></span>;\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">App</span>;\n</code></pre>\n<p>ì¢‹ì€ ì†Œì‹ì€ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ ëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìœ¼ë©° ì´ì œ ì‹¤ì œ ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤!</p>\n<h2>2.2 ì „ì—­ ì¸ì¦ ìƒíƒœ ê´€ë¦¬</h2>\n<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ë ¤ë©´ ì¸í„°í˜ì´ìŠ¤ê°€ ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœì— ëŒ€í•´ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ React Contextì™€ useReducer í›…ì„ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € ui/src/ ì•ˆì— ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ ìœ„í•œ ìŠ¤í† ì–´ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\">cd ui/src &#x26;&#x26;\\\nmkdir store &#x26;&#x26;\\\ncd store &#x26;&#x26; mkdir auth &#x26;&#x26;\\\ntouch authAction.<span class=\"hljs-property\">ts</span> <span class=\"hljs-title class_\">AuthContextProvier</span>.<span class=\"hljs-property\">tsx</span> authReducer.<span class=\"hljs-property\">ts</span>\n</code></pre>\n<p>authAction.tsëŠ” ì‚¬ìš©ìê°€ ì¸í„°í˜ì´ìŠ¤ ë‚´ì—ì„œ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆëŠ” ê°€ëŠ¥í•œ ì•¡ì…˜ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/store/auth/authActions.ts */</span>\n\n<span class=\"hljs-keyword\">export</span> enum <span class=\"hljs-title class_\">AuthActionEnum</span> {\n  <span class=\"hljs-variable constant_\">LOG_IN</span> = <span class=\"hljs-string\">'LOG_IN'</span>,\n  <span class=\"hljs-variable constant_\">LOG_OUT</span> = <span class=\"hljs-string\">'LOG_OUT'</span>,\n};\n\n<span class=\"hljs-keyword\">export</span> type <span class=\"hljs-title class_\">AuthAction</span> = {\n  <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">AuthActionEnum</span>.<span class=\"hljs-property\">LOG_IN</span>,\n  <span class=\"hljs-attr\">payload</span>: {\n    <span class=\"hljs-attr\">authToken</span>: string;\n    <span class=\"hljs-attr\">userId</span>: string;\n    <span class=\"hljs-attr\">email</span>: string;\n    <span class=\"hljs-attr\">name</span>: string;\n  }\n} | {\n  <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">AuthActionEnum</span>.<span class=\"hljs-property\">LOG_OUT</span>,\n  <span class=\"hljs-attr\">payload</span>: <span class=\"hljs-literal\">null</span>,\n}\n</code></pre>\n<p>authReducer.ts ë‚´ë¶€ì—ì„œëŠ” ì¸ì¦ ê´€ë ¨ ì•¡ì…˜ì„ í•´ë‹¹ ìƒíƒœë¡œ ë§¤í•‘í•˜ëŠ” ë¦¬ë“€ì„œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/store/auth/authReducer.ts */</span>\n\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Reducer</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">AuthAction</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./authActions\"</span>;\n\n<span class=\"hljs-keyword\">export</span> interface <span class=\"hljs-title class_\">AuthState</span> {\n  <span class=\"hljs-attr\">isLoggedIn</span>: boolean;\n  authToken?: string;\n  userId?: string;\n  name?: string;\n  email?: string;\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">defaultAuthState</span>: <span class=\"hljs-title class_\">AuthState</span> = {\n  <span class=\"hljs-attr\">isLoggedIn</span>: <span class=\"hljs-literal\">false</span>,\n};\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">authReducer</span>: <span class=\"hljs-title class_\">Reducer</span>&#x3C;<span class=\"hljs-title class_\">AuthState</span>, <span class=\"hljs-title class_\">AuthAction</span>> = <span class=\"hljs-function\">(<span class=\"hljs-params\">state, action</span>) =></span> {\n  <span class=\"hljs-comment\">// ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì¸ì¦ë˜ë©´</span>\n  <span class=\"hljs-keyword\">if</span> (action.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">\"LOG_IN\"</span>) {\n    <span class=\"hljs-variable language_\">localStorage</span>.<span class=\"hljs-title function_\">setItem</span>(<span class=\"hljs-string\">\"user\"</span>, <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>(action.<span class=\"hljs-property\">payload</span>));\n    <span class=\"hljs-keyword\">return</span> {\n      ...state,\n      <span class=\"hljs-attr\">isLoggedIn</span>: <span class=\"hljs-literal\">true</span>,\n      <span class=\"hljs-attr\">authToken</span>: action.<span class=\"hljs-property\">payload</span>.<span class=\"hljs-property\">authToken</span>,\n      <span class=\"hljs-attr\">userId</span>: action.<span class=\"hljs-property\">payload</span>.<span class=\"hljs-property\">userId</span>,\n      <span class=\"hljs-attr\">name</span>: action.<span class=\"hljs-property\">payload</span>.<span class=\"hljs-property\">name</span>,\n      <span class=\"hljs-attr\">email</span>: action.<span class=\"hljs-property\">payload</span>.<span class=\"hljs-property\">email</span>,\n    };\n  }\n\n  <span class=\"hljs-comment\">// ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ</span>\n  <span class=\"hljs-keyword\">if</span> (action.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">\"LOG_OUT\"</span>) {\n    <span class=\"hljs-variable language_\">localStorage</span>.<span class=\"hljs-title function_\">removeItem</span>(<span class=\"hljs-string\">\"user\"</span>);\n    <span class=\"hljs-keyword\">return</span> defaultAuthState;\n  }\n\n  <span class=\"hljs-keyword\">return</span> defaultAuthState;\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> authReducer;\n</code></pre>\n<p>ê¸°ë³¸ ìƒíƒœëŠ” falseë¡œ ì„¤ì •ëœ í•˜ë‚˜ì˜ í•„ë“œì¸ isLoggedInìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì¸ì¦ì„ í•œ ë²ˆí•˜ë©´ ë¦¬ë“€ì„œëŠ” LOG_IN ì•¡ì…˜ì„ ì²˜ë¦¬í•˜ê³  ì‚¬ìš©ì ê´€ë ¨ ì •ë³´ë¥¼ localStorageì— ìœ ì§€í•˜ë©° ìƒˆ ì¸ì¦ ìƒíƒœë¥¼ ë°˜í™˜í•˜ì—¬ ë™ì¼í•œ ì •ë³´ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì •ë³´ë¥¼ ê³„ì† ìœ ì§€í•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë‚˜ê°€ê³  ë‚˜ì¤‘ì— ë°©ë¬¸í•  ë•Œ ì¸ì¦ ìƒíƒœê°€ ìœ ì§€ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. LOG_OUT ì•¡ì…˜ì€ ë¦¬ë“€ì„œì— ì˜í•´ ì²˜ë¦¬ë˜ì–´ ëª¨ë“  ìƒíƒœ ë° ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ê°€ ê¸°ë³¸ ê°’ìœ¼ë¡œ ì¬ì„¤ì •ë©ë‹ˆë‹¤.</p>\n<p>ì´ì œ ì•¡ì…˜ê³¼ ë¦¬ë“€ì„œê°€ ì •ì˜ë˜ì—ˆìœ¼ë¯€ë¡œ AuthContextProvider.tsxì—ì„œ ì „ì²´ ì‘ìš© í”„ë¡œê·¸ë¨ì— ì¸ì¦ ìƒíƒœë¥¼ ì œê³µí•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ì œê³µì êµ¬ì„± ìš”ì†Œë¥¼ ë§Œë“­ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/store/auth/AuthContextProvider.tsx */</span>\n\n<span class=\"hljs-comment\">// ì „ì—­ ê°€ì ¸ì˜¤ê¸°</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { createContext, useReducer, useCallback, useEffect } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n<span class=\"hljs-keyword\">import</span> { useNavigate } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react-router-dom\"</span>;\n\n<span class=\"hljs-comment\">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">AuthActionEnum</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./authActions\"</span>;\n<span class=\"hljs-keyword\">import</span> authReducer, { <span class=\"hljs-title class_\">AuthState</span>, defaultAuthState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./authReducer\"</span>;\n\ntype <span class=\"hljs-title class_\">AuthProviderProps</span> = {\n  <span class=\"hljs-attr\">children</span>: <span class=\"hljs-title class_\">React</span>.<span class=\"hljs-property\">ReactElement</span>,\n};\n\n<span class=\"hljs-keyword\">export</span> type <span class=\"hljs-title class_\">UserData</span> = {\n  <span class=\"hljs-attr\">authToken</span>: string,\n  <span class=\"hljs-attr\">userId</span>: string,\n  <span class=\"hljs-attr\">name</span>: string,\n  <span class=\"hljs-attr\">email</span>: string,\n};\n\n<span class=\"hljs-keyword\">export</span> interface <span class=\"hljs-title class_\">AuthContext</span> {\n  <span class=\"hljs-attr\">authState</span>: <span class=\"hljs-title class_\">AuthState</span>;\n  <span class=\"hljs-attr\">globalLogInDispatch</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">props: UserData</span>) =></span> <span class=\"hljs-keyword\">void</span>;\n  <span class=\"hljs-attr\">globalLogOutDispatch</span>: <span class=\"hljs-function\">() =></span> <span class=\"hljs-keyword\">void</span>;\n}\n\n<span class=\"hljs-comment\">// Auth ì»¨í…ìŠ¤íŠ¸</span>\n<span class=\"hljs-keyword\">const</span> authCtx =\n  createContext &#x3C;\n  <span class=\"hljs-title class_\">AuthContext</span> >\n  {\n    <span class=\"hljs-attr\">authState</span>: defaultAuthState,\n    <span class=\"hljs-attr\">globalLogInDispatch</span>: <span class=\"hljs-function\">() =></span> {},\n    <span class=\"hljs-attr\">globalLogOutDispatch</span>: <span class=\"hljs-function\">() =></span> {},\n  };\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">AuthContextProvider</span> = (<span class=\"hljs-params\">props: AuthProviderProps</span>) => {\n  <span class=\"hljs-keyword\">const</span> { children } = props;\n\n  <span class=\"hljs-keyword\">const</span> [authState, authDispatch] = <span class=\"hljs-title function_\">useReducer</span>(authReducer, defaultAuthState);\n  <span class=\"hljs-keyword\">const</span> navigate = <span class=\"hljs-title function_\">useNavigate</span>();\n\n  <span class=\"hljs-comment\">// ì‚¬ìš©ì ì„¸ë¶€ ì •ë³´ê°€ ì§€ì†ë˜ëŠ”ì§€ í™•ì¸, ëŒ€ë¶€ë¶„ ë¸Œë¼ìš°ì € ìƒˆë¡œ ê³ ì¹¨ì— ëŒ€ì‘</span>\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-keyword\">const</span> user = <span class=\"hljs-variable language_\">localStorage</span>.<span class=\"hljs-title function_\">getItem</span>(<span class=\"hljs-string\">\"user\"</span>);\n    <span class=\"hljs-keyword\">if</span> (user) {\n      <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">userData</span>: <span class=\"hljs-title class_\">UserData</span> = <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">parse</span>(user);\n      <span class=\"hljs-title function_\">authDispatch</span>({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">AuthActionEnum</span>.<span class=\"hljs-property\">LOG_IN</span>, <span class=\"hljs-attr\">payload</span>: userData });\n    }\n  }, []);\n\n  <span class=\"hljs-keyword\">const</span> globalLogInDispatch = <span class=\"hljs-title function_\">useCallback</span>(\n    <span class=\"hljs-function\">(<span class=\"hljs-params\">props: UserData</span>) =></span> {\n      <span class=\"hljs-keyword\">const</span> { authToken, email, name, userId } = props;\n      <span class=\"hljs-title function_\">authDispatch</span>({\n        <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">AuthActionEnum</span>.<span class=\"hljs-property\">LOG_IN</span>,\n        <span class=\"hljs-attr\">payload</span>: {\n          authToken,\n          userId,\n          name,\n          email,\n        },\n      });\n      <span class=\"hljs-title function_\">navigate</span>(<span class=\"hljs-string\">\"/resource\"</span>);\n    },\n    [navigate]\n  );\n\n  <span class=\"hljs-keyword\">const</span> globalLogOutDispatch = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-title function_\">authDispatch</span>({ <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">AuthActionEnum</span>.<span class=\"hljs-property\">LOG_OUT</span>, <span class=\"hljs-attr\">payload</span>: <span class=\"hljs-literal\">null</span> });\n    <span class=\"hljs-title function_\">navigate</span>(<span class=\"hljs-string\">\"/user/login\"</span>);\n  }, [navigate]);\n\n  <span class=\"hljs-comment\">// í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•  ì»¨í…ìŠ¤íŠ¸ ê°’</span>\n  <span class=\"hljs-keyword\">const</span> ctx = {\n    authState,\n    globalLogInDispatch,\n    globalLogOutDispatch,\n  };\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">authCtx.Provider</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">{ctx}</span>></span>{children}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">authCtx.Provider</span>></span></span>;\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> authCtx;\n</code></pre>\n<p>AuthContextProvider ì»´í¬ë„ŒíŠ¸ëŠ” authState ë° ê´€ë ¨ ë””ìŠ¤íŒ¨ì¹˜ ë©”ì„œë“œë¥¼ authCtx ì»¨í…ìŠ¤íŠ¸ ë‚´ì˜ ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì œê³µí•˜ëŠ” Higher Order Component (HOC)ì…ë‹ˆë‹¤. globalLogInDispatchì™€ globalLogOutDispatch í•¨ìˆ˜ëŠ” ê°ê° LOG_IN ë° LOG_OUT ì•¡ì…˜ì„ ë¦¬ë“€ì„œì— ë””ìŠ¤íŒ¨ì¹˜í•˜ì—¬ ì¸ì¦ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì¸ì¦ ì•¡ì…˜ì´ ë””ìŠ¤íŒ¨ì¹˜ë  ë•Œ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™í•˜ê¸° ìœ„í•´ react-router-domë„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, ì‚¬ìš©ìê°€ ì´ì „ì— ë¡œê·¸ì¸í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  í•„ìš”í•  ê²½ìš° localStorageì— ì €ì¥ëœ ì •ë³´ë¥¼ ì°¾ì•„ LOG_IN ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ëŠ” useEffect í›…ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.</p>\n<p>ë§ˆì§€ë§‰ ë‹¨ê³„ëŠ” index.tsxì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ AuthContextProviderë¡œ ë˜í•‘í•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* index.tsx */</span>\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">ReactDOM</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react-dom/client'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">'./index.css'</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">App</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./App'</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">BrowserRouter</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react-router-dom'</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">AuthContextProvider</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./store/auth/AuthContextProvider'</span>;\n\n<span class=\"hljs-keyword\">const</span> root = <span class=\"hljs-title class_\">ReactDOM</span>.<span class=\"hljs-title function_\">createRoot</span>(\n  <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">'root'</span>) <span class=\"hljs-keyword\">as</span> <span class=\"hljs-title class_\">HTMLElement</span>\n);\nroot.<span class=\"hljs-title function_\">render</span>(\n  <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">React.StrictMode</span>></span>\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">BrowserRouter</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">AuthContextProvider</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">App</span> /></span>\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">AuthContextProvider</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">BrowserRouter</span>></span>\n  <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">React.StrictMode</span>></span></span>\n);\n</code></pre>\n<h2>2.3 ì„œë²„ì™€ í†µì‹ í•˜ê¸°</h2>\n<p>ì¸ì¦ ìƒíƒœ ê´€ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ ì´ì œ ë‚´ë¶€ ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ê²€ìƒ‰í•´ì•¼ í•˜ëŠ” ì„œë²„ì™€ì˜ í†µì‹ ì— ì§‘ì¤‘í•´ ë´…ì‹œë‹¤. ì´ë¥¼ ìœ„í•´ React ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„œë²„ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ëŠ” ë…¼ë¦¬ë¥¼ ëª¨ë‘ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ useApië¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ui/src ë‚´ë¶€ì— ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆëŠ” ê´€ë ¨ íŒŒì¼ì´ ìˆëŠ” hooks í´ë”ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\">cd ui/src &#x26;&#x26; mkdir hooks &#x26;&#x26; cd hooks &#x26;&#x26;\\\nmkdir api &#x26;&#x26; cd api &#x26;&#x26;\\\ntouch apiData.<span class=\"hljs-property\">ts</span> useApi.<span class=\"hljs-property\">ts</span>\n</code></pre>\n<p>apiData.ts íŒŒì¼ì—ëŠ” ì‚¬ìš©ì ë¡œê·¸ì¸ ë° ë“±ë¡ ì´ë²¤íŠ¸ì— ëŒ€í•œ ì„œë²„ì—ì„œ ë°˜í™˜ë  ë°ì´í„° êµ¬ì¡°ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/hooks/api/apiData.ts */</span>\n\n<span class=\"hljs-keyword\">export</span> type <span class=\"hljs-title class_\">AuthData</span> = {\n  <span class=\"hljs-attr\">success</span>: boolean,\n  <span class=\"hljs-attr\">user</span>: {\n    <span class=\"hljs-attr\">user_id</span>: string,\n    <span class=\"hljs-attr\">email</span>: string,\n    <span class=\"hljs-attr\">name</span>: string,\n    <span class=\"hljs-attr\">auth_token</span>: string,\n  },\n};\n</code></pre>\n<p>useApi.ts íŒŒì¼ì—ëŠ” ì„œë²„ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ í›…ì´ ë“¤ì–´ ìˆì–´ìš”:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/hooks/api/useApi.ts */</span>\n\n<span class=\"hljs-comment\">// ì „ì—­ ì˜ì¡´ì„±</span>\n<span class=\"hljs-keyword\">import</span> { useState, useCallback, useContext } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n\n<span class=\"hljs-comment\">// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">AuthContext</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../../store/auth/AuthContextProvider\"</span>;\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">BASE_URL</span> = <span class=\"hljs-string\">\"http://localhost:8000\"</span>;\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">useApi</span> = (<span class=\"hljs-params\"></span>) => {\n  <span class=\"hljs-keyword\">const</span> [loading, setLoading] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">false</span>);\n  <span class=\"hljs-keyword\">const</span> [error, setError] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-literal\">null</span>);\n  <span class=\"hljs-keyword\">const</span> { authState, globalLogOutDispatch } = <span class=\"hljs-title function_\">useContext</span>(<span class=\"hljs-title class_\">AuthContext</span>);\n\n  <span class=\"hljs-keyword\">const</span> request = <span class=\"hljs-title function_\">useCallback</span>(\n    <span class=\"hljs-keyword\">async</span> (\n      <span class=\"hljs-attr\">endpoint</span>: string,\n      <span class=\"hljs-attr\">params</span>: { [<span class=\"hljs-attr\">key</span>: string]: any },\n      <span class=\"hljs-attr\">handleSuccessResponse</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">data: any</span>) =></span> <span class=\"hljs-keyword\">void</span>,\n      handleErrorResponse?: <span class=\"hljs-function\">(<span class=\"hljs-params\">error: <span class=\"hljs-built_in\">Error</span></span>) =></span> <span class=\"hljs-keyword\">void</span>\n    ) => {\n      <span class=\"hljs-title function_\">setLoading</span>(<span class=\"hljs-literal\">true</span>);\n      <span class=\"hljs-title function_\">setError</span>(<span class=\"hljs-literal\">null</span>);\n\n      <span class=\"hljs-keyword\">try</span> {\n        <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">NOTE:</span> ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì¤‘ì´ë©´ ìš”ì²­ í—¤ë”ì— auth í† í° ì‚½ì…</span>\n        <span class=\"hljs-keyword\">if</span> (authState.<span class=\"hljs-property\">isLoggedIn</span>) {\n          params.<span class=\"hljs-property\">headers</span>[<span class=\"hljs-string\">\"x-access-token\"</span>] = authState.<span class=\"hljs-property\">authToken</span>;\n        }\n\n        <span class=\"hljs-keyword\">const</span> response = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-variable constant_\">BASE_URL</span> + endpoint, { ...params });\n        <span class=\"hljs-keyword\">if</span> (!response.<span class=\"hljs-property\">ok</span>) {\n          <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> response.<span class=\"hljs-title function_\">json</span>(); <span class=\"hljs-comment\">// í•­ìƒ json ì‘ë‹µì„ ê°€ì •</span>\n          <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(data.<span class=\"hljs-property\">error</span>);\n        }\n        <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">await</span> response.<span class=\"hljs-title function_\">json</span>(); <span class=\"hljs-comment\">// í•­ìƒ json ì‘ë‹µì„ ê°€ì •</span>\n\n        <span class=\"hljs-comment\">// ì‘ë‹µì´ ì •ìƒì ì´ê³  ì˜¤ë¥˜ê°€ ì—†ëŠ” ê²½ìš°, ì„±ê³µ ì‘ë‹µ ì²˜ë¦¬</span>\n        handleSuccessResponse &#x26;&#x26; (<span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">handleSuccessResponse</span>(data));\n      } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-attr\">error</span>: any) {\n        <span class=\"hljs-comment\">// <span class=\"hljs-doctag\">NOTE:</span> ê¶Œí•œì´ ì—†ëŠ” ì˜¤ë¥˜ì¸ ê²½ìš° ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ</span>\n        <span class=\"hljs-keyword\">if</span> (error &#x26;&#x26; error.<span class=\"hljs-property\">message</span> &#x26;&#x26; error.<span class=\"hljs-property\">message</span> === <span class=\"hljs-string\">\"Unauthorized\"</span>) {\n          <span class=\"hljs-title function_\">globalLogOutDispatch</span>();\n        }\n\n        <span class=\"hljs-comment\">// ì§€ì •ëœ ì˜¤ë¥˜ ì²˜ë¦¬</span>\n        <span class=\"hljs-keyword\">if</span> (handleErrorResponse) {\n          <span class=\"hljs-title function_\">handleErrorResponse</span>(error.<span class=\"hljs-property\">message</span> || error.<span class=\"hljs-property\">error</span> || error);\n        } <span class=\"hljs-keyword\">else</span> {\n          <span class=\"hljs-title function_\">setError</span>(error.<span class=\"hljs-property\">message</span> || error.<span class=\"hljs-property\">error</span> || error);\n        }\n      }\n\n      <span class=\"hljs-title function_\">setLoading</span>(<span class=\"hljs-literal\">false</span>);\n    },\n\n    [authState.<span class=\"hljs-property\">isLoggedIn</span>, authState.<span class=\"hljs-property\">authToken</span>, globalLogOutDispatch]\n  );\n\n  <span class=\"hljs-keyword\">return</span> {\n    <span class=\"hljs-attr\">loading</span>: loading,\n    <span class=\"hljs-attr\">error</span>: error,\n    <span class=\"hljs-attr\">request</span>: request,\n    <span class=\"hljs-attr\">setError</span>: setError,\n  };\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> useApi;\n</code></pre>\n<p>useApi í›…ì€ request í•¨ìˆ˜ ë‚´ì—ì„œ fetch ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì„ ë‹´ë‹¹í•˜ê³  ìˆì–´ìš”. ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í–ˆëŠ”ì§€ ë¨¼ì € í™•ì¸í•˜ê³ , ì‚¬ìš©ìê°€ ì¸ì¦ë˜ë©´ ìš”ì²­ í—¤ë” x-access-tokenì— authTokenì„ ì²¨ë¶€í•©ë‹ˆë‹¤. ì´ í† í°ì€ ìš”ì²­ê³¼ í•¨ê»˜ ì „ì†¡ë˜ì–´ ì„œë²„ê°€ ì‚¬ìš©ìê°€ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë˜í•œ, ì»¤ìŠ¤í…€ í›…ì€ ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ ë° ì˜¤ë¥˜ ì²˜ë¦¬ì˜ ìƒíƒœ ê´€ë¦¬ë„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì„œë²„ì—ì„œ ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì•˜ë‹¤ë©´ handleSuccessResponse ì½œë°±ì„ í†µí•´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , ì‘ë‹µì´ ì‹¤íŒ¨í•œ ê²½ìš° handleErrorResponse ì½œë°±ì„ í†µí•´ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì‘ë‹µ ì˜¤ë¥˜ì— \"Unauthorized\" ë©”ì‹œì§€ê°€ ìˆìœ¼ë©´ globalLogOutDispatch í•¨ìˆ˜ë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.</p>\n<h2>2.4 ì¸ì¦ êµ¬ì„± ìš”ì†Œ</h2>\n<p>ìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì™„ë£Œí–ˆê³ , ì´ì œ í™”ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‘ì—…í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë¨¼ì € React ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤:</p>\n<pre><code class=\"hljs language-js\">cd ui/src &#x26;&#x26; mkdir components &#x26;&#x26;\\\ncd components &#x26;&#x26; mkdir auth &#x26;&#x26;\\\ntouch <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-property\">tsx</span> <span class=\"hljs-title class_\">LogInForm</span>.<span class=\"hljs-property\">tsx</span> <span class=\"hljs-title class_\">RegisterForm</span>.<span class=\"hljs-property\">tsx</span> validations.<span class=\"hljs-property\">ts</span>\n</code></pre>\n<p>ë¨¼ì €, LogInForm.tsxì™€ RegisterForm.tsxì—ì„œ ê°ê° ë¡œê·¸ì¸ ë° ì‚¬ìš©ì ë“±ë¡ì„ ìœ„í•œ ì–‘ì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/components/auth/LoginForm.tsx */</span>\n\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">FormEventHandler</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Link</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react-router-dom\"</span>;\n<span class=\"hljs-keyword\">import</span> styles <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./Auth.module.css\"</span>;\n\ntype <span class=\"hljs-title class_\">Props</span> = {\n  <span class=\"hljs-attr\">onSubmit</span>: <span class=\"hljs-title class_\">FormEventHandler</span>&#x3C;<span class=\"hljs-title class_\">HTMLFormElement</span>>,\n};\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">LoginForm</span> = (<span class=\"hljs-params\">props: Props</span>) => {\n  <span class=\"hljs-keyword\">const</span> { onSubmit } = props;\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">onSubmit</span>=<span class=\"hljs-string\">{onSubmit}</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Form}</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Input}</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">label</span> <span class=\"hljs-attr\">htmlFor</span>=<span class=\"hljs-string\">\"email\"</span>></span>ì´ë©”ì¼<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">label</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"email\"</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"email\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"email\"</span> <span class=\"hljs-attr\">required</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"ì´ë©”ì¼ ì£¼ì†Œ\"</span> /></span>\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Input}</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">label</span> <span class=\"hljs-attr\">htmlFor</span>=<span class=\"hljs-string\">\"password\"</span>></span>ë¹„ë°€ë²ˆí˜¸<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">label</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"password\"</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"password\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"password\"</span> <span class=\"hljs-attr\">required</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"ë¹„ë°€ë²ˆí˜¸\"</span> /></span>\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"submit\"</span>></span>ì œì¶œ<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Link</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Link}</span> <span class=\"hljs-attr\">to</span>=<span class=\"hljs-string\">{</span>\"/<span class=\"hljs-attr\">user</span>/<span class=\"hljs-attr\">register</span>\"}></span>\n        ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? ê°€ì…í•˜ê¸°\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Link</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">form</span>></span></span>\n  );\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">LoginForm</span>;\n</code></pre>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/components/auth/RegisterForm.tsx */</span>\n\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">FormEventHandler</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Link</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react-router-dom\"</span>;\n<span class=\"hljs-keyword\">import</span> styles <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./Auth.module.css\"</span>;\n\ntype <span class=\"hljs-title class_\">Props</span> = {\n  <span class=\"hljs-attr\">onSubmit</span>: <span class=\"hljs-title class_\">FormEventHandler</span>&#x3C;<span class=\"hljs-title class_\">HTMLFormElement</span>>,\n};\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">RegisterForm</span> = (<span class=\"hljs-params\">props: Props</span>) => {\n  <span class=\"hljs-keyword\">const</span> { onSubmit } = props;\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">onSubmit</span>=<span class=\"hljs-string\">{onSubmit}</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Form}</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Input}</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">label</span> <span class=\"hljs-attr\">htmlFor</span>=<span class=\"hljs-string\">\"name\"</span>></span>ì´ë¦„<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">label</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"name\"</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"name\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text\"</span> <span class=\"hljs-attr\">required</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"ì „ì²´ ì´ë¦„\"</span> /></span>\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Input}</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">label</span> <span class=\"hljs-attr\">htmlFor</span>=<span class=\"hljs-string\">\"email\"</span>></span>ì´ë©”ì¼<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">label</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"email\"</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"email\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"email\"</span> <span class=\"hljs-attr\">required</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"ì´ë©”ì¼ ì£¼ì†Œ\"</span> /></span>\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Input}</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">label</span> <span class=\"hljs-attr\">htmlFor</span>=<span class=\"hljs-string\">\"password\"</span>></span>ë¹„ë°€ë²ˆí˜¸<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">label</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"password\"</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"password\"</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"password\"</span> <span class=\"hljs-attr\">required</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">\"ë¹„ë°€ë²ˆí˜¸\"</span> /></span>\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"submit\"</span>></span>ì œì¶œ<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Link</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Link}</span> <span class=\"hljs-attr\">to</span>=<span class=\"hljs-string\">{</span>\"/<span class=\"hljs-attr\">user</span>/<span class=\"hljs-attr\">login</span>\"}></span>\n        ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸í•˜ê¸°\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Link</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">form</span>></span></span>\n  );\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">RegisterForm</span>;\n</code></pre>\n<p>ë‘ ì–‘ì‹ì€ ê°ê° ì´ë¦„, ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ ì†ì„±ì„ í¬í•¨í•œ í¼ ì œì¶œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ì½œë°± í”„ë¡­ì¸ onSubmitì„ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.</p>\n<p>ê·¸ ë‹¤ìŒìœ¼ë¡œ, Auth.tsxì—ì„œ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ë‚´ì˜ ë„¤ë¹„ê²Œì´ì…˜ ê²½ë¡œì— ë”°ë¼ LogInForm ë˜ëŠ” RegisterForm êµ¬ì„± ìš”ì†Œ ì¤‘ í•˜ë‚˜ë¥¼ í‘œì‹œí•  ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/components/auth/Auth.tsx */</span>\n\n<span class=\"hljs-comment\">// ì „ì—­ imports</span>\n<span class=\"hljs-keyword\">import</span> { useEffect, useState, useContext, <span class=\"hljs-title class_\">FormEventHandler</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n\n<span class=\"hljs-comment\">// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±</span>\n<span class=\"hljs-keyword\">import</span> useApi <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../../hooks/api/useApi\"</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">AuthContext</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../../store/auth/AuthContextProvider\"</span>;\n<span class=\"hljs-keyword\">import</span> { validatePasswordLength, validateEmailFormat } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./validations\"</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">AuthData</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../../hooks/api/apiData\"</span>;\n<span class=\"hljs-keyword\">import</span> { useLocation } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react-router-dom\"</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">LoginForm</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./LoginForm\"</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">RegisterForm</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./RegisterForm\"</span>;\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Auth</span> = (<span class=\"hljs-params\"></span>) => {\n  <span class=\"hljs-keyword\">const</span> [authData, setAuthData] = useState&#x3C;<span class=\"hljs-title class_\">AuthData</span>>();\n  <span class=\"hljs-keyword\">const</span> { request, setError } = <span class=\"hljs-title function_\">useApi</span>();\n  <span class=\"hljs-keyword\">const</span> { globalLogInDispatch } = <span class=\"hljs-title function_\">useContext</span>(<span class=\"hljs-title class_\">AuthContext</span>);\n  <span class=\"hljs-keyword\">const</span> location = <span class=\"hljs-title function_\">useLocation</span>();\n  <span class=\"hljs-keyword\">const</span> currentPathArray = location.<span class=\"hljs-property\">pathname</span>.<span class=\"hljs-title function_\">split</span>(<span class=\"hljs-string\">'/'</span>);\n  <span class=\"hljs-keyword\">const</span> isLogin = currentPathArray[currentPathArray.<span class=\"hljs-property\">length</span> - <span class=\"hljs-number\">1</span>] === <span class=\"hljs-string\">'login'</span>;\n\n  <span class=\"hljs-comment\">// ë¡œê·¸ì¸ ì‚¬ìš©ìì— ëŒ€í•œ api ì‘ë‹µ ì„±ê³µ ì‹œ, ì „ì—­ auth LOG_IN ì´ë²¤íŠ¸ë¥¼ ë””ìŠ¤íŒ¨ì¹˜í•©ë‹ˆë‹¤</span>\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-keyword\">if</span> (authData &#x26;&#x26; <span class=\"hljs-string\">\"success\"</span> <span class=\"hljs-keyword\">in</span> authData) {\n      <span class=\"hljs-title function_\">globalLogInDispatch</span>({\n        <span class=\"hljs-attr\">authToken</span>: authData.<span class=\"hljs-property\">user</span>.<span class=\"hljs-property\">auth_token</span>,\n        <span class=\"hljs-attr\">userId</span>: authData.<span class=\"hljs-property\">user</span>.<span class=\"hljs-property\">user_id</span>,\n        <span class=\"hljs-attr\">name</span>: authData.<span class=\"hljs-property\">user</span>.<span class=\"hljs-property\">name</span>,\n        <span class=\"hljs-attr\">email</span>: authData.<span class=\"hljs-property\">user</span>.<span class=\"hljs-property\">email</span>,\n      });\n    }\n  }, [authData, globalLogInDispatch]);\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">authHandler</span>: <span class=\"hljs-title class_\">FormEventHandler</span>&#x3C;<span class=\"hljs-title class_\">HTMLFormElement</span>> = <span class=\"hljs-keyword\">async</span> (event) => {\n    event.<span class=\"hljs-title function_\">preventDefault</span>();\n    <span class=\"hljs-keyword\">const</span> data = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">FormData</span>(event.<span class=\"hljs-property\">currentTarget</span>);\n    <span class=\"hljs-comment\">// ë¨¼ì € ìœ íš¨ì„± ê²€ì‚¬!</span>\n    <span class=\"hljs-keyword\">const</span> userEmail = data.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">\"email\"</span>);\n    <span class=\"hljs-keyword\">const</span> userPassword = data.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">\"password\"</span>);\n    <span class=\"hljs-keyword\">const</span> userName = data.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">\"name\"</span>);\n    <span class=\"hljs-keyword\">try</span> {\n      <span class=\"hljs-keyword\">if</span> (\n        !<span class=\"hljs-title function_\">validateEmailFormat</span>(userEmail?.<span class=\"hljs-title function_\">toString</span>() || <span class=\"hljs-string\">\"\"</span>) ||\n        !<span class=\"hljs-title function_\">validatePasswordLength</span>(userPassword?.<span class=\"hljs-title function_\">toString</span>() || <span class=\"hljs-string\">\"\"</span>)\n      ) {\n        <span class=\"hljs-keyword\">throw</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Error</span>(<span class=\"hljs-string\">\"ì˜ëª»ëœ ìê²© ì¦ëª… í˜•ì‹ì…ë‹ˆë‹¤!\"</span>);\n      }\n      <span class=\"hljs-keyword\">const</span> params = {\n        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">\"POST\"</span>,\n        <span class=\"hljs-attr\">headers</span>: {\n          <span class=\"hljs-string\">\"Content-Type\"</span>: <span class=\"hljs-string\">\"application/json\"</span>,\n        },\n        <span class=\"hljs-attr\">body</span>: <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>({\n          <span class=\"hljs-attr\">email</span>: userEmail,\n          <span class=\"hljs-attr\">password</span>: userPassword,\n          <span class=\"hljs-attr\">name</span>: userName,\n        }),\n      };\n\n      <span class=\"hljs-keyword\">const</span> endpoint = <span class=\"hljs-string\">`/user/<span class=\"hljs-subst\">${isLogin ? <span class=\"hljs-string\">'login'</span> : <span class=\"hljs-string\">'register'</span>}</span>`</span>\n      <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">request</span>(endpoint, params, setAuthData);\n    } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-attr\">error</span>: any) {\n      <span class=\"hljs-title function_\">setError</span>(error.<span class=\"hljs-property\">message</span> || error);\n    }\n  };\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">h2</span>></span>{isLogin ? 'ë¡œê·¸ì¸' : 'ê°€ì…í•˜ê¸°'}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">h2</span>></span>\n      {\n        isLogin\n          ? <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">LoginForm</span> <span class=\"hljs-attr\">onSubmit</span>=<span class=\"hljs-string\">{authHandler}</span> /></span>\n          : <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">RegisterForm</span> <span class=\"hljs-attr\">onSubmit</span>=<span class=\"hljs-string\">{authHandler}</span> /></span>\n      }\n    <span class=\"hljs-tag\">&#x3C;/></span></span>\n  );\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">Auth</span>;\n</code></pre>\n<p>ìš°ë¦¬ëŠ” react-router-domì—ì„œ ì œê³µí•˜ëŠ” useLocationì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì–´ë–¤ ê²½ë¡œì— ìˆëŠ”ì§€ ì¶”ì¶œí•©ë‹ˆë‹¤. ê²½ë¡œì— ë”°ë¼, LoginForm ë˜ëŠ” RegisterFormì„ í‘œì‹œí•˜ë„ë¡ ì„ íƒí•©ë‹ˆë‹¤. ê° í¼ì— ëŒ€í•œ onSubmit í•¸ë“¤ëŸ¬ëŠ” authHandlerì— ì •ì˜ëœ ëŒ€ë¡œ ì‘ë™í•˜ë©°, ì´ í•¸ë“¤ëŸ¬ëŠ” ì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì—ì„œ ëª¨ë“  ì…ë ¥ í¼ ì†ì„±ì„ ì¶”ì¶œí•˜ê³  ì„œë²„ì—ì„œ ì‚¬ìš©ì/ë¡œê·¸ì¸ ë˜ëŠ” ì‚¬ìš©ì/ë“±ë¡ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ê¸° ì „ì— ì´ë¥¼ ìœ íš¨ì„± ê²€ì‚¬í•©ë‹ˆë‹¤.</p>\n<p>ì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ì€ ê¸°ë³¸ì ì´ë©° ì•„ë˜ validation.tsì—ì„œ ë³´ì—¬ì§„ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/components/auth/validations.ts */</span>\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validatePasswordLength</span> = (<span class=\"hljs-params\">password: string</span>) => {\n  <span class=\"hljs-keyword\">return</span> !!password &#x26;&#x26; password.<span class=\"hljs-property\">length</span> > <span class=\"hljs-number\">7</span>;\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">validateEmailFormat</span> = (<span class=\"hljs-params\">email: string</span>) => {\n  <span class=\"hljs-keyword\">const</span> re =\n    <span class=\"hljs-regexp\">/^(([^&#x3C;>()[\\]\\\\.,;:\\s@\"]+(\\.[^&#x3C;>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/</span>;\n  <span class=\"hljs-keyword\">return</span> !!email &#x26;&#x26; re.<span class=\"hljs-title function_\">test</span>(<span class=\"hljs-title class_\">String</span>(email).<span class=\"hljs-title function_\">toLowerCase</span>());\n};\n</code></pre>\n<h2>2.5 Resource component</h2>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ë§Œë“¤ ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ìš”ì†ŒëŠ” ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” ë”ë¯¸ í˜ì´ì§€ì…ë‹ˆë‹¤. ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:</p>\n<pre><code class=\"hljs language-js\">cd ui/src/components &#x26;&#x26;\\\nmkdir resource &#x26;&#x26;\\\ncd resource &#x26;&#x26;\\\ntouch <span class=\"hljs-title class_\">Resource</span>.<span class=\"hljs-property\">tsx</span>\n</code></pre>\n<p>Resource.tsx íŒŒì¼ ë‚´ë¶€ì— ì•„ë˜ì™€ ê°™ì´ êµ¬ì„± ìš”ì†Œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/components/resource/Resource.tsx */</span>\n\n<span class=\"hljs-keyword\">import</span> { useCallback, useContext, useEffect, useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n<span class=\"hljs-keyword\">import</span> useApi <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../../hooks/api/useApi\"</span>;\n<span class=\"hljs-keyword\">import</span> authCtx <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"../../store/auth/AuthContextProvider\"</span>;\n<span class=\"hljs-keyword\">import</span> styles <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./Resource.module.css\"</span>;\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">Resource</span> = (<span class=\"hljs-params\"></span>) => {\n  <span class=\"hljs-keyword\">const</span> [data, setData] = <span class=\"hljs-title function_\">useState</span>();\n  <span class=\"hljs-keyword\">const</span> { request, setError } = <span class=\"hljs-title function_\">useApi</span>();\n  <span class=\"hljs-keyword\">const</span> { globalLogOutDispatch } = <span class=\"hljs-title function_\">useContext</span>(authCtx);\n\n  <span class=\"hljs-keyword\">const</span> fetchData = <span class=\"hljs-title function_\">useCallback</span>(<span class=\"hljs-keyword\">async</span> () => {\n    <span class=\"hljs-keyword\">try</span> {\n      <span class=\"hljs-keyword\">const</span> params = {\n        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">\"GET\"</span>,\n        <span class=\"hljs-attr\">headers</span>: {\n          <span class=\"hljs-string\">\"Content-Type\"</span>: <span class=\"hljs-string\">\"application/json\"</span>,\n        },\n      };\n      <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">request</span>(<span class=\"hljs-string\">\"/resource\"</span>, params, <span class=\"hljs-function\">(<span class=\"hljs-params\">result</span>) =></span> {\n        <span class=\"hljs-title function_\">setData</span>(result.<span class=\"hljs-property\">data</span>);\n      });\n    } <span class=\"hljs-keyword\">catch</span> (<span class=\"hljs-attr\">error</span>: any) {\n      <span class=\"hljs-title function_\">setError</span>(error.<span class=\"hljs-property\">message</span> || error);\n    }\n  }, [request, setError]);\n\n  <span class=\"hljs-title function_\">useEffect</span>(<span class=\"hljs-function\">() =></span> {\n    <span class=\"hljs-title function_\">fetchData</span>();\n  }, [fetchData]);\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">{styles.Resource}</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">h1</span>></span>{data}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">h1</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{globalLogOutDispatch}</span>></span>ë¡œê·¸ì•„ì›ƒ<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></span>\n  );\n};\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">Resource</span>;\n</code></pre>\n<p>ì´ ì»´í¬ë„ŒíŠ¸ëŠ” ê°„ë‹¨í•˜ë©° useEffect í›…ì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì˜ /resource ì—”ë“œí¬ì¸íŠ¸ë¡œ í˜¸ì¶œí•˜ëŠ” ë¡œì§ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ í˜¸ì¶œì—ëŠ” pre-existing auth í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤. ë°˜í™˜ëœ ë°ì´í„°ëŠ” í˜ì´ì§€ì— í‘œì‹œë˜ë©° ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ auth ì»¨í…ìŠ¤íŠ¸ì—ì„œ globalLogOutDispatchë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì „ì—­ auth ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.</p>\n<h2>2.6 ëª¨ë“  ê²ƒì„ ì—°ê²°í•˜ê¸°</h2>\n<p>ì¸í„°í˜ì´ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ í”„ë ˆì  í…Œì´ì…˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í–ˆìœ¼ë‹ˆ, App.tsxì—ì„œ react-router-domì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œ ë¼ìš°íŒ…ì„ í†µí•´ ëª¨ë“  ê²ƒì„ ì—°ê²°í•´ë³´ê² ìŠµë‹ˆë‹¤ :</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">/* ui/src/App.tsx */</span>\n\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">\"./App.css\"</span>;\n<span class=\"hljs-keyword\">import</span> { <span class=\"hljs-title class_\">Route</span>, <span class=\"hljs-title class_\">Routes</span>, <span class=\"hljs-title class_\">Navigate</span>, useLocation } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react-router-dom\"</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">AuthContext</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./store/auth/AuthContextProvider\"</span>;\n<span class=\"hljs-keyword\">import</span> { useContext } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"react\"</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Resource</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./components/resource/Resource\"</span>;\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">Auth</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./components/auth/Auth\"</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> { authState } = <span class=\"hljs-title function_\">useContext</span>(<span class=\"hljs-title class_\">AuthContext</span>);\n  <span class=\"hljs-keyword\">const</span> location = <span class=\"hljs-title function_\">useLocation</span>();\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">className</span>=<span class=\"hljs-string\">\"App\"</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Routes</span>></span>\n        <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">\"/\"</span> <span class=\"hljs-attr\">element</span>=<span class=\"hljs-string\">{</span>&#x3C;<span class=\"hljs-attr\">Navigate</span> <span class=\"hljs-attr\">to</span>=<span class=\"hljs-string\">{authState.isLoggedIn</span> ? <span class=\"hljs-attr\">location.pathname</span> <span class=\"hljs-attr\">:</span> \"/<span class=\"hljs-attr\">user</span>/<span class=\"hljs-attr\">login</span>\"} /></span>} />\n        {!authState.isLoggedIn &#x26;&#x26; (\n          <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">\"user\"</span>></span>\n            <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">\"register\"</span> <span class=\"hljs-attr\">element</span>=<span class=\"hljs-string\">{</span>&#x3C;<span class=\"hljs-attr\">Auth</span> /></span>} />\n            <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">\"login\"</span> <span class=\"hljs-attr\">element</span>=<span class=\"hljs-string\">{</span>&#x3C;<span class=\"hljs-attr\">Auth</span> /></span>} />\n          <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Route</span>></span>\n        )}\n        {authState.isLoggedIn &#x26;&#x26; <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">Route</span> <span class=\"hljs-attr\">path</span>=<span class=\"hljs-string\">\"resource\"</span> <span class=\"hljs-attr\">element</span>=<span class=\"hljs-string\">{</span>&#x3C;<span class=\"hljs-attr\">Resource</span> /></span>} />}\n      <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">Routes</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></span>\n  );\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">App</span>;\n</code></pre>\n<p>App.tsx íŒŒì¼ ë‚´ì—ì„œëŠ” ì§€ê¸ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¼ìš°íŒ…ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. /user/register, /user/login ë° /resourceë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê³µëœ ì „ì—­ ì¸ì¦ ìƒíƒœê°€ ì‚¬ìš©ìê°€ ì¸ì¦ëœ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ë©´ ì‚¬ìš©ìì—ê²Œ /resource ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ì—¬ í•´ë‹¹ ì„œë²„ì˜ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™í•˜ì—¬ 'protected' ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.</p>\n<h1>ê²°ë¡ </h1>\n<p>ì´ ê¸€ì—ì„œëŠ” í’€ìŠ¤íƒ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ëŠ” ë° í•„ìš”í•œ ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¸ì¦ ë°©ë²•ì€ í† í° ê¸°ë°˜ ë°©ì‹ìœ¼ë¡œ, ì´ëŠ” ì´ íŠœí† ë¦¬ì–¼ ì‹œë¦¬ì¦ˆì˜ ì²« ë²ˆì§¸ ê¸€ì—ì„œ ë…¼ì˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê° êµ¬ì„± ìš”ì†Œì— ëŒ€í•´ ë§ì€ ì„¸ë¶€ ì •ë³´ë¥¼ ë‹¤ë¤˜ì§€ë§Œ, ì•„ì§ í•  ì¼ì´ ë§ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>\n<ul>\n<li>í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìŠ¤íƒ€ì¼ë§ ê°œì„ , ì´ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ë§ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>í”„ë¡ íŠ¸ì—”ë“œ ë° ë°±ì—”ë“œì—ì„œ ì ì ˆí•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬, SQL ì¸ì ì…˜ ë°©ì§€ ë˜ëŠ” ë°ì´í„° ìœ í˜• ìœ íš¨ì„± ê²€ì‚¬ì™€ ê°™ì€ ì‘ì—….</li>\n<li>ì˜ëª»ëœ ìê²© ì¦ëª…ì„ ì œì¶œí–ˆì„ ë•Œ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ì—ëŸ¬ ì²˜ë¦¬.</li>\n<li>ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„° ì €ì¥.</li>\n<li>AWS ë˜ëŠ” GCPì™€ ê°™ì€ í´ë¼ìš°ë“œ ì œê³µ ì—…ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì»¨í…Œì´ë„ˆí™”í•˜ê³  ë°°í¬.</li>\n</ul>\n<p>ë‚˜ë¨¸ì§€ëŠ” ë„¤ê°€ ì•Œì•„ì„œ í•´ì£¼ë©´ ë¼! ê·¸ë¦¬ê³  ì–¸ì œë“ ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œì„ í•˜ê±°ë‚˜ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ì œì•ˆì´ ìˆë‹¤ë©´ ëŒ“ê¸€ì„ ë‚¨ê²¨ì¤˜! ì´ íŠœí† ë¦¬ì–¼ì˜ ìµœì¢… ì½”ë“œëŠ” ì—¬ê¸°ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´.</p>\n</body>\n</html>\n"},"__N_SSG":true}