{"pageProps":{"post":{"title":"SwiftUIì—ì„œ HTML ë Œë”ë§í•˜ê¸°","description":"","date":"2024-06-20 03:39","slug":"2024-06-20-RenderHTMLinSwiftUI","content":"\n\n## NSAttributedString, UITextView ë° UIViewRepresentableë¥¼ ì‚¬ìš©í•˜ì—¬ SwiftUIì—ì„œ HTML ë Œë”ë§í•˜ê¸°.\n\n![ì´ë¯¸ì§€](/assets/img/2024-06-20-RenderHTMLinSwiftUI_0.png)\n\nSwiftUIëŠ” ë©‹ì§€ì§€ë§Œ ì—¬ì „íˆ ê¸°ëŠ¥ì´ ë¶€ì¡±í•œ ê²ƒì´ ë§ìŠµë‹ˆë‹¤. ëª‡ ë…„ê°„ UIKitì„ ì‚¬ìš©í•œ í›„ ìµìˆ™í•´ì§„ ê¸°ëŠ¥ì´ì£ . ê·¸ ì¤‘ í•˜ë‚˜ëŠ” NSAttributedString ë° UITextViewë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ HTML í…ìŠ¤íŠ¸ë¥¼ ë Œë”ë§í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.\n\nì´ ê¸€ì—ì„œëŠ” SwiftUIë¥¼ UIViewRepresentableì„ ì‚¬ìš©í•˜ì—¬ UIKitê³¼ ì—°ê²°í•˜ê³ , HTMLì„ ë Œë”ë§í•˜ëŠ” ì‚¬ìš©ì ì •ì˜ SwiftUI Viewë¥¼ ë§Œë“œëŠ” ë°©ë²•ì„ ê°„ë‹¨íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n<div class=\"content-ad\"></div>\n\nì—…ë°ì´íŠ¸: ì›ë³¸ ê¸°ì‚¬ ê°œì„  ì‚¬í•­\n\nì´ ê¸°ì‚¬ì˜ ì›ë³¸ ë²„ì „ì—ì„œëŠ” NSAttributedStringì„ ì‚¬ìš©í•˜ì—¬ HTMLì„ ìŠ¤íƒ€ì¼ë§í•˜ê³  ë Œë”ë§í•˜ëŠ” ë° íŠ¹í™”ëœ ê°„ë‹¨í•œ ì‚¬ìš©ì ì •ì˜ SwiftUI ë·°ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì— ëŒ€í•´ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ ê¸°ì‚¬ì—ì„œëŠ” AttributedText ë·°ë„ ì–¸ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ë¡œ ì¸í•´ ì´ìƒí•œ ë™ì‘ì´ ë°œìƒí–ˆëŠ”ë°, ì•„ì§ ì ì ˆí•œ í•´ê²°ì±…ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ê¸°ì‚¬ì˜ ì—…ë°ì´íŠ¸ëœ ë²„ì „ì—ì„œëŠ” HTML ë·°ë¥¼ ì œê±°í•˜ê³  NSAttributedStringì— ëŒ€í•œ í¸ë¦¬í•œ í™•ì¥ ê¸°ëŠ¥ì´ ëª‡ ê°€ì§€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ë‚˜ëŠ” ì´ìƒí•œ ë™ì‘ì— ëŒ€í•œ ë” ë‚˜ì€ ì´í•´ë¥¼ ì–»ê¸° ìœ„í•´ Apple ê°œë°œì í¬ëŸ¼ê³¼ ìŠ¤íƒ ì˜¤ë²„í”Œë¡œì— ê²Œì‹œí–ˆìŠµë‹ˆë‹¤.\n\n## ì£¼ìš” í¬ì¸íŠ¸\n\n- UIViewRepresentable í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ UIKit ë·°ë¥¼ SwiftUI ë·° ê³„ì¸µêµ¬ì¡°ì— í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- NSAttributedString (UITextViewë¥¼ í†µí•´)ì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ë…¸ì¶œí•  ìˆ˜ ìˆìœ¼ë©°, í˜„ì¬ SwiftUI ì„¸ê³„ì—ëŠ” ë™ë“±í•œ ê²ƒì´ ì—†ìŠµë‹ˆë‹¤ (í•˜ì§€ë§Œ AttributedStringëŠ” ì¢‹ì€ í›„ë³´ì¼ ìˆ˜ ìˆìŒ).\n- ìŠ¤íƒ€ì¼ì´ ì§€ì •ëœ HTML í˜•ì‹ì˜ NSAttributedStringsëŠ” UIViewRepresentableì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” UITextViewì— ì˜í•´ ë Œë”ë§ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. HTML í˜•ì‹ì˜ í…ìŠ¤íŠ¸ì—ì„œ ì¼ë¶€ CSS ìŠ¤íƒ€ì¼ ì†ì„±ì„ ì¸ë¼ì¸ìœ¼ë¡œ ì •ì˜í•˜ê±°ë‚˜ HTML í˜•ì‹ì˜ í…ìŠ¤íŠ¸ì˜ ì „ìš© ìŠ¤íƒ€ì¼ íƒœê·¸ë¡œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n<div class=\"content-ad\"></div>\n\nì´ ê¸°ì‚¬ì—ì„œ ì‚¬ìš©ëœ ì™„ì„±ëœ ì˜ˆì œ ì½”ë“œëŠ” GitHubì—ì„œ ì°¾ì„ ìˆ˜ ìˆì–´ìš”: https://github.com/thomsmed/ios-examples/tree/main/SwiftUIHTML.\n\n# ì»¤ìŠ¤í…€ UIViewRepresentable\n\nSwiftUIê°€ ì²˜ìŒ ë°œí‘œëì„ ë•ŒëŠ” ê¸°ì¡´ UIKit ë·°ë¥¼ SwiftUI ë·° ê³„ì¸µêµ¬ì¡°ì— ì„ë² ë“œí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” APIë„ í•¨ê»˜ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤. ê°œë°œìë“¤ì—ê²Œ UIKitì—ì„œ SwiftUIë¡œì˜ ì „í™˜ì´ ì‰¬ì›Œì¡Œì–´ìš”.\n\nì´ëŸ¬í•œ API ì¤‘ í•˜ë‚˜ëŠ” UIViewRepresentable í”„ë¡œí† ì½œì¸ë°ìš”, SwiftUIì˜ ì»¨í…ìŠ¤íŠ¸ì—ì„œ UIKit ë·°ë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë¼ìš”. Appleì€ ì´ í”„ë¡œí† ì½œê³¼ ë‹¤ë¥¸ SwiftUIì™€ UIKitì„ ì—°ê²°í•˜ëŠ” í”„ë¡œí† ì½œì„ í†µí•´ ì´ë¥¼ í†µí•œ ê°€ëŠ¥ì„±ì„ ë³´ì—¬ì£¼ëŠ” ë©‹ì§„ WWDC ë¹„ë””ì˜¤ë¥¼ ì œê³µí–ˆì–´ìš”. ì ì–´ë„ 'Integrating SwiftUI'ë¥¼ í™•ì¸í•´ë³´ì‹œê¸°ë¥¼ ê¶Œí•´ìš”.\n\n<div class=\"content-ad\"></div>\n\n## AttributedText\n\nNSAttributedStringì€ í…ìŠ¤íŠ¸ ë¬¸ìì—´ì„ ê°•ë ¥í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ë„êµ¬ë¡œ, í…ìŠ¤íŠ¸ ë¬¸ìì—´ì˜ ë¬¸ì ë²”ìœ„ë¥¼ ìŠ¤íƒ€ì¼ë§í•˜ëŠ” ê°•ë ¥í•œ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì‹¬ì§€ì–´ ê°„ë‹¨í•œ HTMLì— ë”°ë¼ í…ìŠ¤íŠ¸ë¥¼ ìŠ¤íƒ€ì¼ë§í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\nNSAttributedStringì„ ìŠ¤íƒ€ì¼ë§ëœ ìƒíƒœë¡œ ì´ˆê¸°í™”í•˜ë ¤ë©´ NSAttributedString.init(data:options:documentAttributes:) ì´ë‹ˆì…œë¼ì´ì €ì— .documentType ì˜µì…˜ì„ .htmlë¡œ ì„¤ì •í•œ HTML ë¬¸ìì—´(ë°ì´í„° í˜•ì‹ìœ¼ë¡œ)ì„ ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  UITextViewì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì•±ì—ì„œ HTMLì„ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!\n\nUIViewRepresentable í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ NSAttributedString ë° UITextViewì˜ ê¸°ëŠ¥ì„ SwiftUIì— ì‚¬ìš©ë˜ëŠ” ì‚¬ìš©ì ì§€ì • AttributedText Viewë¡œ ë…¸ì¶œì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤!\n\n<div class=\"content-ad\"></div>\n\n```swift\nimport SwiftUI\n\nstruct AttributedText: UIViewRepresentable {\n    private let attributedString: NSAttributedString\n\n    init(_ attributedString: NSAttributedString) {\n        self.attributedString = attributedString\n    }\n\n    func makeUIView(context: Context) -> UITextView {\n        // SwiftUIì´ ì´ \"View\"ë¥¼ ë Œë”ë§í•˜ëŠ” ì²« ë²ˆì§¸ ì‹œê°„ì— í˜¸ì¶œë©ë‹ˆë‹¤.\n\n        let uiTextView = UITextView()\n\n        // ë°°ê²½ ë·°ê°€ ë°˜ì§ì¼ ìˆ˜ ìˆë„ë¡ íˆ¬ëª…í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.\n        uiTextView.backgroundColor = .clear\n\n        // í…ìŠ¤íŠ¸ ì‹œê°í™”ë§Œì„ ìœ„í•œ ê²ƒì´ë¯€ë¡œ í¸ì§‘ë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.\n        uiTextView.isEditable = false\n\n        // UITextViewë¥¼ ê°€ëŠ¥í•œ ë„ˆë¹„ì— ë§ê²Œ ìœ ì—°í•˜ê²Œ ë§Œë“¤ì§€ë§Œ, ì½˜í…ì¸ ì— ë§ëŠ” ë†’ì´ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤.\n        // ë˜í•œ UITextViewê°€ ìŠ¤í¬ë¡¤ë˜ì§€ ì•Šê²Œ í•˜ì—¬ UITextViewê°€ í…ìŠ¤íŠ¸ ì½˜í…ì¸ ì™€ ì¼ì¹˜í•˜ë„ë¡ `intrinsicContentSize`ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\n        uiTextView.isScrollEnabled = false\n        uiTextView.setContentHuggingPriority(.defaultLow, for: .vertical)\n        uiTextView.setContentHuggingPriority(.defaultLow, for: .horizontal)\n        uiTextView.setContentCompressionResistancePriority(.required, for: .vertical)\n        uiTextView.setContentCompressionResistancePriority(.defaultLow, for: .horizontal)\n\n        return uiTextView\n    }\n\n    func updateUIView(_ uiTextView: UITextView, context: Context) {\n        // SwiftUIì´ ì´ UIViewRepresentableì„ ì²˜ìŒ ë Œë”ë§í•˜ëŠ” ì‹œê°„ê³¼ ìƒíƒœ ë³€ê²½ì— ëŒ€í•´ ì•Œë¦¼ì„ ë°›ì„ ë•Œë§ˆë‹¤ í˜¸ì¶œë©ë‹ˆë‹¤. (ì˜ˆ: @State ë³€ìˆ˜ë¥¼ í†µí•´)\n        uiTextView.attributedText = attributedString\n    }\n}\n```\n\nUIViewRepresentableë¡œ ìœ„ì—ì„œ ì •ì˜í•œ AttributedTextë¥¼ ì‚¬ìš©í•˜ì—¬ SwiftUI ì•±ì—ì„œ NSAttributedStringsë¥¼ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. HTML í˜•ì‹ì˜ í…ìŠ¤íŠ¸ë¡œ ì´ˆê¸°í™”ëœ NSAttributedStringsë¥¼ ë Œë”ë§í•˜ëŠ” ê²ƒì´ ì£¼ëœ ëª©í‘œì´ë¯€ë¡œ NSAttributedStringì— ëŒ€í•œ í¸ì˜ ìƒì„±ìë¥¼ ë§Œë“­ë‹ˆë‹¤.\n\n```swift\nimport UIKit\n\nextension NSAttributedString {\n    static func html(withBody body: String) -> NSAttributedString {\n        // ì•±ì—ì„œ ì‚¬ìš©ë˜ëŠ” í˜„ì¬ ë¡œì¼€ì´ì…˜ê³¼ ì¼ì¹˜í•˜ëŠ” HTML `lang` ì†ì„±ì„ ë§¤ì¹˜í•©ë‹ˆë‹¤. (ì¦‰, Bundle.main)\n        let bundle = Bundle.main\n        let lang = bundle.preferredLocalizations.first\n            ?? bundle.developmentLocalization\n            ?? \"en\"\n\n        return (try? NSAttributedString(\n            data: \"\"\"\n            <!doctype html>\n            <html lang=\"\\(lang)\">\n            <head>\n                <meta charset=\"utf-8\">\n                <style type=\"text/css\">\n                    /*\n                      HTML í˜•ì‹ì˜ í…ìŠ¤íŠ¸ì— ëŒ€í•œ ì‚¬ìš©ì ì •ì˜ CSS ìŠ¤íƒ€ì¼ ì§€ì •\n                      ì£¼ì˜: NSAttributedString/UITextViewì—ì„œ ì§€ì›í•˜ëŠ” CSS ê¸°ëŠ¥ì€ ì œí•œì ì…ë‹ˆë‹¤.\n                    */\n\n                    body {\n                        font: -apple-system-body;\n                        color: \\(UIColor.secondaryLabel.hex);\n                    }\n\n                    h1, h2, h3, h4, h5, h6 {\n                        color: \\(UIColor.label.hex);\n                    }\n\n                    a {\n                        color: \\(UIColor.systemGreen.hex);\n                    }\n\n                    li:last-child {\n                        margin-bottom: 1em;\n                    }\n                </style>\n            </head>\n            <body>\n                \\(body)\n            </body>\n            </html>\n            \"\"\".data(using: .utf8)!,\n            options: [\n                .documentType: NSAttributedString.DocumentType.html,\n                .characterEncoding: String.Encoding.utf8.rawValue,\n            ],\n            documentAttributes: nil\n        )) ?? NSAttributedString(string: body)\n    }\n}\n\n// UIColorë¥¼ CSS ì¹œí™”ì ì¸ ìƒ‰ìƒ í—¥ìŠ¤ ë¬¸ìì—´ë¡œ ë³€í™˜\n\nprivate extension UIColor {\n    var hex: String {\n        var red: CGFloat = 0\n        var green: CGFloat = 0\n        var blue: CGFloat = 0\n        var alpha: CGFloat = 0\n\n        getRed(&red, green: &green, blue: &blue, alpha: &alpha)\n\n        return String(\n            format: \"#%02lX%02lX%02lX%02lX\",\n            lroundf(Float(red * 255)),\n            lroundf(Float(green * 255)),\n            lroundf(Float(blue * 255)),\n            lroundf(Float(alpha * 255))\n        )\n    }\n}\n```\n\n<div class=\"content-ad\"></div>\n\nNSAttributedStringì€ ì¼ë¶€ CSS ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤ (ì•ˆíƒ€ê¹ê²Œë„ ì–´ë”˜ê°€ ì œëŒ€ë¡œ ë¬¸ì„œí™”ë˜ì§€ ì•Šì€ ê¸°ëŠ¥ë“¤ì´ ìˆìŠµë‹ˆë‹¤), í•˜ì§€ë§Œ ì¸ë¼ì¸ ë° ë³„ë„ì˜ íƒœê·¸ ë‚´ì—ì„œ ìŠ¤íƒ€ì¼ì„ ì •ì˜í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤ (ì¼ë°˜ì ìœ¼ë¡œ HTML head íƒœê·¸ì˜ ì¼ë¶€ë¡œ).\n\n## SwiftUIì—ì„œ HTML ë Œë”ë§í•˜ê¸°\n\nê·¸ëŸ° ë‹¤ìŒ, ìš°ë¦¬ëŠ” AttributedText UIViewRepresentableì„ ì‚¬ìš©í•˜ì—¬ NSAttributedString í¸ë¦¬í•œ ì´ˆê¸°í™”ìë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ SwiftUI ì•±ì—ì„œ HTMLì„ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ - ì‹¬ì§€ì–´ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë§ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤!\n\n```js\nimport SwiftUI\n\nstruct ContentView: View {\n    var body: some View {\n        NavigationStack {\n            ScrollView {\n                AttributedText(.html(withBody: \"\"\"\n                <h3>This is a H3 header</h3>\n                <p>This is a paragraph</p>\n                <ul>\n                    <li>List item one</li>\n                    <li>List item two</li>\n                </ul>\n                <p>This is a paragraph with a <a href=\"https://developer.apple.com/\">link</a></p>\n                <p style=\"color: blue; text-align: center;\">\n                    This is a paragraph with inline styling\n                </p>\n                \"\"\"))\n                .padding()\n            }\n            .navigationTitle(\"Render HTML in SwiftUI\")\n        }\n    }\n}\n```\n\n<div class=\"content-ad\"></div>\n\n## ë³´ë„ˆìŠ¤: í…Œë§ˆë³„ HTML ë Œë”ë§\n\në§Œì•½ ì•±ì´ (ìƒ‰ìƒ) í…Œë§ˆ ê°œë…ì„ ì‚¬ìš©í•˜ì—¬ ì•± ì „ë°˜ì— ëŒ€í•œ ìƒ‰ìƒ ì •ë³´ ë“±ì„ ì „íŒŒí•œë‹¤ë©´, í˜„ì¬ í…Œë§ˆ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ HTMLì„ ìŠ¤íƒ€ì¼ë§í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\nì‚¬ìš©ì ì •ì˜ í…Œë§ˆ í™˜ê²½ ê°’ê³¼ ë‹¤ë¥¸ NSAttributedString í¸ì˜ ì´ë‹ˆì…œë¼ì´ì €ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\nì‚¬ìš©ì ì •ì˜ í…Œë§ˆ í™˜ê²½ ê°’\n\n<div class=\"content-ad\"></div>\n\në‹¤ìŒì€ Markdown í˜•ì‹ìœ¼ë¡œ í…Œì´ë¸” íƒœê·¸ë¥¼ ë³€ê²½í•œ ì½”ë“œì…ë‹ˆë‹¤.\n\n\nimport SwiftUI\n\n// Example of a simple Theme struct.\nstruct Theme {\n    let textPrimary: UIColor\n    let textSecondary: UIColor\n    let textInteractive: UIColor\n}\n\nextension Theme {\n    static let `default` = Theme(\n        textPrimary: .label,\n        textSecondary: .secondaryLabel,\n        textInteractive: .systemGreen\n    )\n}\n\nprivate struct ThemeEnvironmentKey: EnvironmentKey {\n    static var defaultValue: Theme = .default\n}\n\nextension EnvironmentValues {\n    var theme: Theme {\n        get { self[ThemeEnvironmentKey.self] }\n        set { self[ThemeEnvironmentKey.self] = newValue }\n    }\n}\n\n\nNSAttributedStringì„ ìœ„í•œ í¸ë¦¬í•œ ì´ë‹ˆì…œë¼ì´ì €\n\n\nimport UIKit\n\nextension NSAttributedString {\n    static func themedHtml(withBody body: String, theme: Theme = .default) -> NSAttributedString {\n        // Match the HTML `lang` attribute to current localisation used by the app (aka Bundle.main).\n        let bundle = Bundle.main\n        let lang = bundle.preferredLocalizations.first\n            ?? bundle.developmentLocalization\n            ?? \"en\"\n\n        return (try? NSAttributedString(\n            data: \"\"\"\n            <!doctype html>\n            <html lang=\"\\(lang)\">\n            <head>\n                <meta charset=\"utf-8\">\n                <style type=\"text/css\">\n                    /*\n                      Custom CSS styling of HTML formatted text.\n                      Note, only a limited number of CSS features are supported by NSAttributedString/UITextView.\n                    */\n\n                    body {\n                        font: -apple-system-body;\n                        color: \\(theme.textSecondary.hex);\n                    }\n\n                    h1, h2, h3, h4, h5, h6 {\n                        color: \\(theme.textPrimary.hex);\n                    }\n\n                    a {\n                        color: \\(theme.textInteractive.hex);\n                    }\n\n                    li:last-child {\n                        margin-bottom: 1em;\n                    }\n                </style>\n            </head>\n            <body>\n                \\(body)\n            </body>\n            </html>\n            \"\"\".data(using: .utf8)!,\n            options: [\n                .documentType: NSAttributedString.DocumentType.html,\n                .characterEncoding: String.Encoding.utf8.rawValue,\n            ],\n            documentAttributes: nil\n        )) ?? NSAttributedString(string: body)\n    }\n}\n\n// MARK: Converting UIColors into CSS friendly color hex string\n\nprivate extension UIColor {\n    var hex: String {\n        var red: CGFloat = 0\n        var green: CGFloat = 0\n        var blue: CGFloat = 0\n        var alpha: CGFloat = 0\n\n        getRed(&red, green: &green, blue: &blue, alpha: &alpha)\n\n        return String(\n            format: \"#%02lX%02lX%02lX%02lX\",\n            lroundf(Float(red * 255)),\n            lroundf(Float(green * 255)),\n            lroundf(Float(blue * 255)),\n            lroundf(Float(alpha * 255))\n        )\n    }\n}\n\n\nSwiftUIì—ì„œ í…Œë§ˆê°€ ì ìš©ëœ HTML ë Œë”ë§í•˜ê¸°\n\n\n<div class=\"content-ad\"></div>\n\n```swift\nimport SwiftUI\n\nstruct ContentView: View {\n    @Environment(\\.theme) private var theme: Theme\n\n    var body: some View {\n        NavigationStack {\n            ScrollView {\n                AttributedText(.themedHtml(withBody: \"\"\"\n                <h3>This is a H3 header</h3>\n                <p>This is a paragraph</p>\n                <ul>\n                    <li>List item one</li>\n                    <li>List item two</li>\n                </ul>\n                <p>This is a paragraph with a <a href=\"https://developer.apple.com/\">link</a></p>\n                <p style=\"color: blue; text-align: center;\">\n                    This is a paragraph with inline styling\n                </p>\n                \"\"\", theme: theme))\n                .padding()\n            }\n            .navigationTitle(\"Render Themed HTML in SwiftUI\")\n        }\n    }\n}\n```\n\n## ì´ê²Œ ë‹¤ì•¼!\n\nì‰½ì£ ! SwiftUIê°€ ì •ë§ ë©‹ì§€ì§€ë§Œ, ë•Œë¡œëŠ” ëª‡ ë…„ ë™ì•ˆ ì‚¬ë‘í•´ ì˜¨ UIKit ë·°ì™€ ê¸°ëŠ¥ì„ ì„ë² ë“œí•  ìˆ˜ ìˆëŠ” ê²ƒì´ ì°¸ ì¢‹ìŠµë‹ˆë‹¤.\n\nì½”ë”©í•˜ì„¸ìš”! ğŸ™Œ\n","ogImage":{"url":"/assets/img/2024-06-20-RenderHTMLinSwiftUI_0.png"},"coverImage":"/assets/img/2024-06-20-RenderHTMLinSwiftUI_0.png","tag":["Tech"],"readingTime":12},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<h2>NSAttributedString, UITextView ë° UIViewRepresentableë¥¼ ì‚¬ìš©í•˜ì—¬ SwiftUIì—ì„œ HTML ë Œë”ë§í•˜ê¸°.</h2>\n<p><img src=\"/assets/img/2024-06-20-RenderHTMLinSwiftUI_0.png\" alt=\"ì´ë¯¸ì§€\"></p>\n<p>SwiftUIëŠ” ë©‹ì§€ì§€ë§Œ ì—¬ì „íˆ ê¸°ëŠ¥ì´ ë¶€ì¡±í•œ ê²ƒì´ ë§ìŠµë‹ˆë‹¤. ëª‡ ë…„ê°„ UIKitì„ ì‚¬ìš©í•œ í›„ ìµìˆ™í•´ì§„ ê¸°ëŠ¥ì´ì£ . ê·¸ ì¤‘ í•˜ë‚˜ëŠ” NSAttributedString ë° UITextViewë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ë‹¨í•œ HTML í…ìŠ¤íŠ¸ë¥¼ ë Œë”ë§í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.</p>\n<p>ì´ ê¸€ì—ì„œëŠ” SwiftUIë¥¼ UIViewRepresentableì„ ì‚¬ìš©í•˜ì—¬ UIKitê³¼ ì—°ê²°í•˜ê³ , HTMLì„ ë Œë”ë§í•˜ëŠ” ì‚¬ìš©ì ì •ì˜ SwiftUI Viewë¥¼ ë§Œë“œëŠ” ë°©ë²•ì„ ê°„ë‹¨íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>\n<div class=\"content-ad\"></div>\n<p>ì—…ë°ì´íŠ¸: ì›ë³¸ ê¸°ì‚¬ ê°œì„  ì‚¬í•­</p>\n<p>ì´ ê¸°ì‚¬ì˜ ì›ë³¸ ë²„ì „ì—ì„œëŠ” NSAttributedStringì„ ì‚¬ìš©í•˜ì—¬ HTMLì„ ìŠ¤íƒ€ì¼ë§í•˜ê³  ë Œë”ë§í•˜ëŠ” ë° íŠ¹í™”ëœ ê°„ë‹¨í•œ ì‚¬ìš©ì ì •ì˜ SwiftUI ë·°ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì— ëŒ€í•´ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. ì´ ê¸°ì‚¬ì—ì„œëŠ” AttributedText ë·°ë„ ì–¸ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ë¡œ ì¸í•´ ì´ìƒí•œ ë™ì‘ì´ ë°œìƒí–ˆëŠ”ë°, ì•„ì§ ì ì ˆí•œ í•´ê²°ì±…ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ ê¸°ì‚¬ì˜ ì—…ë°ì´íŠ¸ëœ ë²„ì „ì—ì„œëŠ” HTML ë·°ë¥¼ ì œê±°í•˜ê³  NSAttributedStringì— ëŒ€í•œ í¸ë¦¬í•œ í™•ì¥ ê¸°ëŠ¥ì´ ëª‡ ê°€ì§€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ë‚˜ëŠ” ì´ìƒí•œ ë™ì‘ì— ëŒ€í•œ ë” ë‚˜ì€ ì´í•´ë¥¼ ì–»ê¸° ìœ„í•´ Apple ê°œë°œì í¬ëŸ¼ê³¼ ìŠ¤íƒ ì˜¤ë²„í”Œë¡œì— ê²Œì‹œí–ˆìŠµë‹ˆë‹¤.</p>\n<h2>ì£¼ìš” í¬ì¸íŠ¸</h2>\n<ul>\n<li>UIViewRepresentable í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ UIKit ë·°ë¥¼ SwiftUI ë·° ê³„ì¸µêµ¬ì¡°ì— í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li>NSAttributedString (UITextViewë¥¼ í†µí•´)ì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ì„ ë…¸ì¶œí•  ìˆ˜ ìˆìœ¼ë©°, í˜„ì¬ SwiftUI ì„¸ê³„ì—ëŠ” ë™ë“±í•œ ê²ƒì´ ì—†ìŠµë‹ˆë‹¤ (í•˜ì§€ë§Œ AttributedStringëŠ” ì¢‹ì€ í›„ë³´ì¼ ìˆ˜ ìˆìŒ).</li>\n<li>ìŠ¤íƒ€ì¼ì´ ì§€ì •ëœ HTML í˜•ì‹ì˜ NSAttributedStringsëŠ” UIViewRepresentableì— ì˜í•´ ê´€ë¦¬ë˜ëŠ” UITextViewì— ì˜í•´ ë Œë”ë§ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. HTML í˜•ì‹ì˜ í…ìŠ¤íŠ¸ì—ì„œ ì¼ë¶€ CSS ìŠ¤íƒ€ì¼ ì†ì„±ì„ ì¸ë¼ì¸ìœ¼ë¡œ ì •ì˜í•˜ê±°ë‚˜ HTML í˜•ì‹ì˜ í…ìŠ¤íŠ¸ì˜ ì „ìš© ìŠ¤íƒ€ì¼ íƒœê·¸ë¡œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n<div class=\"content-ad\"></div>\n<p>ì´ ê¸°ì‚¬ì—ì„œ ì‚¬ìš©ëœ ì™„ì„±ëœ ì˜ˆì œ ì½”ë“œëŠ” GitHubì—ì„œ ì°¾ì„ ìˆ˜ ìˆì–´ìš”: <a href=\"https://github.com/thomsmed/ios-examples/tree/main/SwiftUIHTML\" rel=\"nofollow\" target=\"_blank\">https://github.com/thomsmed/ios-examples/tree/main/SwiftUIHTML</a>.</p>\n<h1>ì»¤ìŠ¤í…€ UIViewRepresentable</h1>\n<p>SwiftUIê°€ ì²˜ìŒ ë°œí‘œëì„ ë•ŒëŠ” ê¸°ì¡´ UIKit ë·°ë¥¼ SwiftUI ë·° ê³„ì¸µêµ¬ì¡°ì— ì„ë² ë“œí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” APIë„ í•¨ê»˜ ì œê³µë˜ì—ˆìŠµë‹ˆë‹¤. ê°œë°œìë“¤ì—ê²Œ UIKitì—ì„œ SwiftUIë¡œì˜ ì „í™˜ì´ ì‰¬ì›Œì¡Œì–´ìš”.</p>\n<p>ì´ëŸ¬í•œ API ì¤‘ í•˜ë‚˜ëŠ” UIViewRepresentable í”„ë¡œí† ì½œì¸ë°ìš”, SwiftUIì˜ ì»¨í…ìŠ¤íŠ¸ì—ì„œ UIKit ë·°ë¥¼ ê´€ë¦¬í•˜ëŠ” ë° ì‚¬ìš©ë¼ìš”. Appleì€ ì´ í”„ë¡œí† ì½œê³¼ ë‹¤ë¥¸ SwiftUIì™€ UIKitì„ ì—°ê²°í•˜ëŠ” í”„ë¡œí† ì½œì„ í†µí•´ ì´ë¥¼ í†µí•œ ê°€ëŠ¥ì„±ì„ ë³´ì—¬ì£¼ëŠ” ë©‹ì§„ WWDC ë¹„ë””ì˜¤ë¥¼ ì œê³µí–ˆì–´ìš”. ì ì–´ë„ 'Integrating SwiftUI'ë¥¼ í™•ì¸í•´ë³´ì‹œê¸°ë¥¼ ê¶Œí•´ìš”.</p>\n<div class=\"content-ad\"></div>\n<h2>AttributedText</h2>\n<p>NSAttributedStringì€ í…ìŠ¤íŠ¸ ë¬¸ìì—´ì„ ê°•ë ¥í•˜ê²Œ ê´€ë¦¬í•˜ëŠ” ë„êµ¬ë¡œ, í…ìŠ¤íŠ¸ ë¬¸ìì—´ì˜ ë¬¸ì ë²”ìœ„ë¥¼ ìŠ¤íƒ€ì¼ë§í•˜ëŠ” ê°•ë ¥í•œ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì‹¬ì§€ì–´ ê°„ë‹¨í•œ HTMLì— ë”°ë¼ í…ìŠ¤íŠ¸ë¥¼ ìŠ¤íƒ€ì¼ë§í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p>NSAttributedStringì„ ìŠ¤íƒ€ì¼ë§ëœ ìƒíƒœë¡œ ì´ˆê¸°í™”í•˜ë ¤ë©´ NSAttributedString.init(data:options:documentAttributes:) ì´ë‹ˆì…œë¼ì´ì €ì— .documentType ì˜µì…˜ì„ .htmlë¡œ ì„¤ì •í•œ HTML ë¬¸ìì—´(ë°ì´í„° í˜•ì‹ìœ¼ë¡œ)ì„ ì „ë‹¬í•˜ë©´ ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  UITextViewì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì•±ì—ì„œ HTMLì„ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>\n<p>UIViewRepresentable í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ NSAttributedString ë° UITextViewì˜ ê¸°ëŠ¥ì„ SwiftUIì— ì‚¬ìš©ë˜ëŠ” ì‚¬ìš©ì ì§€ì • AttributedText Viewë¡œ ë…¸ì¶œì‹œí‚¬ ê²ƒì…ë‹ˆë‹¤!</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-swift\"><span class=\"hljs-keyword\">import</span> SwiftUI\n\n<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">AttributedText</span>: <span class=\"hljs-title class_\">UIViewRepresentable</span> {\n    <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">let</span> attributedString: <span class=\"hljs-type\">NSAttributedString</span>\n\n    <span class=\"hljs-keyword\">init</span>(<span class=\"hljs-keyword\">_</span> <span class=\"hljs-params\">attributedString</span>: <span class=\"hljs-type\">NSAttributedString</span>) {\n        <span class=\"hljs-keyword\">self</span>.attributedString <span class=\"hljs-operator\">=</span> attributedString\n    }\n\n    <span class=\"hljs-keyword\">func</span> <span class=\"hljs-title function_\">makeUIView</span>(<span class=\"hljs-params\">context</span>: <span class=\"hljs-type\">Context</span>) -> <span class=\"hljs-type\">UITextView</span> {\n        <span class=\"hljs-comment\">// SwiftUIì´ ì´ \"View\"ë¥¼ ë Œë”ë§í•˜ëŠ” ì²« ë²ˆì§¸ ì‹œê°„ì— í˜¸ì¶œë©ë‹ˆë‹¤.</span>\n\n        <span class=\"hljs-keyword\">let</span> uiTextView <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">UITextView</span>()\n\n        <span class=\"hljs-comment\">// ë°°ê²½ ë·°ê°€ ë°˜ì§ì¼ ìˆ˜ ìˆë„ë¡ íˆ¬ëª…í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.</span>\n        uiTextView.backgroundColor <span class=\"hljs-operator\">=</span> .clear\n\n        <span class=\"hljs-comment\">// í…ìŠ¤íŠ¸ ì‹œê°í™”ë§Œì„ ìœ„í•œ ê²ƒì´ë¯€ë¡œ í¸ì§‘ë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.</span>\n        uiTextView.isEditable <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">false</span>\n\n        <span class=\"hljs-comment\">// UITextViewë¥¼ ê°€ëŠ¥í•œ ë„ˆë¹„ì— ë§ê²Œ ìœ ì—°í•˜ê²Œ ë§Œë“¤ì§€ë§Œ, ì½˜í…ì¸ ì— ë§ëŠ” ë†’ì´ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤.</span>\n        <span class=\"hljs-comment\">// ë˜í•œ UITextViewê°€ ìŠ¤í¬ë¡¤ë˜ì§€ ì•Šê²Œ í•˜ì—¬ UITextViewê°€ í…ìŠ¤íŠ¸ ì½˜í…ì¸ ì™€ ì¼ì¹˜í•˜ë„ë¡ `intrinsicContentSize`ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.</span>\n        uiTextView.isScrollEnabled <span class=\"hljs-operator\">=</span> <span class=\"hljs-literal\">false</span>\n        uiTextView.setContentHuggingPriority(.defaultLow, for: .vertical)\n        uiTextView.setContentHuggingPriority(.defaultLow, for: .horizontal)\n        uiTextView.setContentCompressionResistancePriority(.required, for: .vertical)\n        uiTextView.setContentCompressionResistancePriority(.defaultLow, for: .horizontal)\n\n        <span class=\"hljs-keyword\">return</span> uiTextView\n    }\n\n    <span class=\"hljs-keyword\">func</span> <span class=\"hljs-title function_\">updateUIView</span>(<span class=\"hljs-keyword\">_</span> <span class=\"hljs-params\">uiTextView</span>: <span class=\"hljs-type\">UITextView</span>, <span class=\"hljs-params\">context</span>: <span class=\"hljs-type\">Context</span>) {\n        <span class=\"hljs-comment\">// SwiftUIì´ ì´ UIViewRepresentableì„ ì²˜ìŒ ë Œë”ë§í•˜ëŠ” ì‹œê°„ê³¼ ìƒíƒœ ë³€ê²½ì— ëŒ€í•´ ì•Œë¦¼ì„ ë°›ì„ ë•Œë§ˆë‹¤ í˜¸ì¶œë©ë‹ˆë‹¤. (ì˜ˆ: @State ë³€ìˆ˜ë¥¼ í†µí•´)</span>\n        uiTextView.attributedText <span class=\"hljs-operator\">=</span> attributedString\n    }\n}\n</code></pre>\n<p>UIViewRepresentableë¡œ ìœ„ì—ì„œ ì •ì˜í•œ AttributedTextë¥¼ ì‚¬ìš©í•˜ì—¬ SwiftUI ì•±ì—ì„œ NSAttributedStringsë¥¼ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. HTML í˜•ì‹ì˜ í…ìŠ¤íŠ¸ë¡œ ì´ˆê¸°í™”ëœ NSAttributedStringsë¥¼ ë Œë”ë§í•˜ëŠ” ê²ƒì´ ì£¼ëœ ëª©í‘œì´ë¯€ë¡œ NSAttributedStringì— ëŒ€í•œ í¸ì˜ ìƒì„±ìë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-swift\"><span class=\"hljs-keyword\">import</span> UIKit\n\n<span class=\"hljs-keyword\">extension</span> <span class=\"hljs-title class_\">NSAttributedString</span> {\n    <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">func</span> <span class=\"hljs-title function_\">html</span>(<span class=\"hljs-params\">withBody</span> <span class=\"hljs-params\">body</span>: <span class=\"hljs-type\">String</span>) -> <span class=\"hljs-type\">NSAttributedString</span> {\n        <span class=\"hljs-comment\">// ì•±ì—ì„œ ì‚¬ìš©ë˜ëŠ” í˜„ì¬ ë¡œì¼€ì´ì…˜ê³¼ ì¼ì¹˜í•˜ëŠ” HTML `lang` ì†ì„±ì„ ë§¤ì¹˜í•©ë‹ˆë‹¤. (ì¦‰, Bundle.main)</span>\n        <span class=\"hljs-keyword\">let</span> bundle <span class=\"hljs-operator\">=</span> <span class=\"hljs-type\">Bundle</span>.main\n        <span class=\"hljs-keyword\">let</span> lang <span class=\"hljs-operator\">=</span> bundle.preferredLocalizations.first\n            <span class=\"hljs-operator\">??</span> bundle.developmentLocalization\n            <span class=\"hljs-operator\">??</span> <span class=\"hljs-string\">\"en\"</span>\n\n        <span class=\"hljs-keyword\">return</span> (<span class=\"hljs-keyword\">try?</span> <span class=\"hljs-type\">NSAttributedString</span>(\n            data: <span class=\"hljs-string\">\"\"\"\n            &#x3C;!doctype html>\n            &#x3C;html lang=\"<span class=\"hljs-subst\">\\(lang)</span>\">\n            &#x3C;head>\n                &#x3C;meta charset=\"utf-8\">\n                &#x3C;style type=\"text/css\">\n                    /*\n                      HTML í˜•ì‹ì˜ í…ìŠ¤íŠ¸ì— ëŒ€í•œ ì‚¬ìš©ì ì •ì˜ CSS ìŠ¤íƒ€ì¼ ì§€ì •\n                      ì£¼ì˜: NSAttributedString/UITextViewì—ì„œ ì§€ì›í•˜ëŠ” CSS ê¸°ëŠ¥ì€ ì œí•œì ì…ë‹ˆë‹¤.\n                    */\n\n                    body {\n                        font: -apple-system-body;\n                        color: <span class=\"hljs-subst\">\\(UIColor.secondaryLabel.hex)</span>;\n                    }\n\n                    h1, h2, h3, h4, h5, h6 {\n                        color: <span class=\"hljs-subst\">\\(UIColor.label.hex)</span>;\n                    }\n\n                    a {\n                        color: <span class=\"hljs-subst\">\\(UIColor.systemGreen.hex)</span>;\n                    }\n\n                    li:last-child {\n                        margin-bottom: 1em;\n                    }\n                &#x3C;/style>\n            &#x3C;/head>\n            &#x3C;body>\n                <span class=\"hljs-subst\">\\(body)</span>\n            &#x3C;/body>\n            &#x3C;/html>\n            \"\"\"</span>.data(using: .utf8)<span class=\"hljs-operator\">!</span>,\n            options: [\n                .documentType: <span class=\"hljs-type\">NSAttributedString</span>.<span class=\"hljs-type\">DocumentType</span>.html,\n                .characterEncoding: <span class=\"hljs-type\">String</span>.<span class=\"hljs-type\">Encoding</span>.utf8.rawValue,\n            ],\n            documentAttributes: <span class=\"hljs-literal\">nil</span>\n        )) <span class=\"hljs-operator\">??</span> <span class=\"hljs-type\">NSAttributedString</span>(string: body)\n    }\n}\n\n<span class=\"hljs-comment\">// UIColorë¥¼ CSS ì¹œí™”ì ì¸ ìƒ‰ìƒ í—¥ìŠ¤ ë¬¸ìì—´ë¡œ ë³€í™˜</span>\n\n<span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">extension</span> <span class=\"hljs-title class_\">UIColor</span> {\n    <span class=\"hljs-keyword\">var</span> hex: <span class=\"hljs-type\">String</span> {\n        <span class=\"hljs-keyword\">var</span> red: <span class=\"hljs-type\">CGFloat</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-keyword\">var</span> green: <span class=\"hljs-type\">CGFloat</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-keyword\">var</span> blue: <span class=\"hljs-type\">CGFloat</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-keyword\">var</span> alpha: <span class=\"hljs-type\">CGFloat</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0</span>\n\n        getRed(<span class=\"hljs-operator\">&#x26;</span>red, green: <span class=\"hljs-operator\">&#x26;</span>green, blue: <span class=\"hljs-operator\">&#x26;</span>blue, alpha: <span class=\"hljs-operator\">&#x26;</span>alpha)\n\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-type\">String</span>(\n            format: <span class=\"hljs-string\">\"#%02lX%02lX%02lX%02lX\"</span>,\n            lroundf(<span class=\"hljs-type\">Float</span>(red <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">255</span>)),\n            lroundf(<span class=\"hljs-type\">Float</span>(green <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">255</span>)),\n            lroundf(<span class=\"hljs-type\">Float</span>(blue <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">255</span>)),\n            lroundf(<span class=\"hljs-type\">Float</span>(alpha <span class=\"hljs-operator\">*</span> <span class=\"hljs-number\">255</span>))\n        )\n    }\n}\n</code></pre>\n<div class=\"content-ad\"></div>\n<p>NSAttributedStringì€ ì¼ë¶€ CSS ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤ (ì•ˆíƒ€ê¹ê²Œë„ ì–´ë”˜ê°€ ì œëŒ€ë¡œ ë¬¸ì„œí™”ë˜ì§€ ì•Šì€ ê¸°ëŠ¥ë“¤ì´ ìˆìŠµë‹ˆë‹¤), í•˜ì§€ë§Œ ì¸ë¼ì¸ ë° ë³„ë„ì˜ íƒœê·¸ ë‚´ì—ì„œ ìŠ¤íƒ€ì¼ì„ ì •ì˜í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤ (ì¼ë°˜ì ìœ¼ë¡œ HTML head íƒœê·¸ì˜ ì¼ë¶€ë¡œ).</p>\n<h2>SwiftUIì—ì„œ HTML ë Œë”ë§í•˜ê¸°</h2>\n<p>ê·¸ëŸ° ë‹¤ìŒ, ìš°ë¦¬ëŠ” AttributedText UIViewRepresentableì„ ì‚¬ìš©í•˜ì—¬ NSAttributedString í¸ë¦¬í•œ ì´ˆê¸°í™”ìë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ SwiftUI ì•±ì—ì„œ HTMLì„ ë Œë”ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ - ì‹¬ì§€ì–´ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë§ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤!</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">SwiftUI</span>\n\nstruct <span class=\"hljs-title class_\">ContentView</span>: <span class=\"hljs-title class_\">View</span> {\n    <span class=\"hljs-keyword\">var</span> <span class=\"hljs-attr\">body</span>: some <span class=\"hljs-title class_\">View</span> {\n        <span class=\"hljs-title class_\">NavigationStack</span> {\n            <span class=\"hljs-title class_\">ScrollView</span> {\n                <span class=\"hljs-title class_\">AttributedText</span>(.<span class=\"hljs-title function_\">html</span>(<span class=\"hljs-attr\">withBody</span>: <span class=\"hljs-string\">\"\"</span><span class=\"hljs-string\">\"\n                &#x3C;h3>This is a H3 header&#x3C;/h3>\n                &#x3C;p>This is a paragraph&#x3C;/p>\n                &#x3C;ul>\n                    &#x3C;li>List item one&#x3C;/li>\n                    &#x3C;li>List item two&#x3C;/li>\n                &#x3C;/ul>\n                &#x3C;p>This is a paragraph with a &#x3C;a href=\"</span><span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//developer.apple.com/\">link&#x3C;/a>&#x3C;/p></span>\n                <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">p</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">\"color: blue; text-align: center;\"</span>></span>\n                    This is a paragraph with inline styling\n                <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">p</span>></span></span>\n                <span class=\"hljs-string\">\"\"</span><span class=\"hljs-string\">\"))\n                .padding()\n            }\n            .navigationTitle(\"</span><span class=\"hljs-title class_\">Render</span> <span class=\"hljs-variable constant_\">HTML</span> <span class=\"hljs-keyword\">in</span> <span class=\"hljs-title class_\">SwiftUI</span><span class=\"hljs-string\">\")\n        }\n    }\n}\n</span></code></pre>\n<div class=\"content-ad\"></div>\n<h2>ë³´ë„ˆìŠ¤: í…Œë§ˆë³„ HTML ë Œë”ë§</h2>\n<p>ë§Œì•½ ì•±ì´ (ìƒ‰ìƒ) í…Œë§ˆ ê°œë…ì„ ì‚¬ìš©í•˜ì—¬ ì•± ì „ë°˜ì— ëŒ€í•œ ìƒ‰ìƒ ì •ë³´ ë“±ì„ ì „íŒŒí•œë‹¤ë©´, í˜„ì¬ í…Œë§ˆ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ HTMLì„ ìŠ¤íƒ€ì¼ë§í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</p>\n<p>ì‚¬ìš©ì ì •ì˜ í…Œë§ˆ í™˜ê²½ ê°’ê³¼ ë‹¤ë¥¸ NSAttributedString í¸ì˜ ì´ë‹ˆì…œë¼ì´ì €ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>\n<p>ì‚¬ìš©ì ì •ì˜ í…Œë§ˆ í™˜ê²½ ê°’</p>\n<div class=\"content-ad\"></div>\n<p>ë‹¤ìŒì€ Markdown í˜•ì‹ìœ¼ë¡œ í…Œì´ë¸” íƒœê·¸ë¥¼ ë³€ê²½í•œ ì½”ë“œì…ë‹ˆë‹¤.</p>\n<p>import SwiftUI</p>\n<p>// Example of a simple Theme struct.\nstruct Theme {\nlet textPrimary: UIColor\nlet textSecondary: UIColor\nlet textInteractive: UIColor\n}</p>\n<p>extension Theme {\nstatic let <code>default</code> = Theme(\ntextPrimary: .label,\ntextSecondary: .secondaryLabel,\ntextInteractive: .systemGreen\n)\n}</p>\n<p>private struct ThemeEnvironmentKey: EnvironmentKey {\nstatic var defaultValue: Theme = .default\n}</p>\n<p>extension EnvironmentValues {\nvar theme: Theme {\nget { self[ThemeEnvironmentKey.self] }\nset { self[ThemeEnvironmentKey.self] = newValue }\n}\n}</p>\n<p>NSAttributedStringì„ ìœ„í•œ í¸ë¦¬í•œ ì´ë‹ˆì…œë¼ì´ì €</p>\n<p>import UIKit</p>\n<p>extension NSAttributedString {\nstatic func themedHtml(withBody body: String, theme: Theme = .default) -> NSAttributedString {\n// Match the HTML <code>lang</code> attribute to current localisation used by the app (aka Bundle.main).\nlet bundle = Bundle.main\nlet lang = bundle.preferredLocalizations.first\n?? bundle.developmentLocalization\n?? \"en\"</p>\n<pre><code>    return (try? NSAttributedString(\n        data: \"\"\"\n        &#x3C;!doctype html>\n        &#x3C;html lang=\"\\(lang)\">\n        &#x3C;head>\n            &#x3C;meta charset=\"utf-8\">\n            &#x3C;style type=\"text/css\">\n                /*\n                  Custom CSS styling of HTML formatted text.\n                  Note, only a limited number of CSS features are supported by NSAttributedString/UITextView.\n                */\n\n                body {\n                    font: -apple-system-body;\n                    color: \\(theme.textSecondary.hex);\n                }\n\n                h1, h2, h3, h4, h5, h6 {\n                    color: \\(theme.textPrimary.hex);\n                }\n\n                a {\n                    color: \\(theme.textInteractive.hex);\n                }\n\n                li:last-child {\n                    margin-bottom: 1em;\n                }\n            &#x3C;/style>\n        &#x3C;/head>\n        &#x3C;body>\n            \\(body)\n        &#x3C;/body>\n        &#x3C;/html>\n        \"\"\".data(using: .utf8)!,\n        options: [\n            .documentType: NSAttributedString.DocumentType.html,\n            .characterEncoding: String.Encoding.utf8.rawValue,\n        ],\n        documentAttributes: nil\n    )) ?? NSAttributedString(string: body)\n}\n</code></pre>\n<p>}</p>\n<p>// MARK: Converting UIColors into CSS friendly color hex string</p>\n<p>private extension UIColor {\nvar hex: String {\nvar red: CGFloat = 0\nvar green: CGFloat = 0\nvar blue: CGFloat = 0\nvar alpha: CGFloat = 0</p>\n<pre><code>    getRed(&#x26;red, green: &#x26;green, blue: &#x26;blue, alpha: &#x26;alpha)\n\n    return String(\n        format: \"#%02lX%02lX%02lX%02lX\",\n        lroundf(Float(red * 255)),\n        lroundf(Float(green * 255)),\n        lroundf(Float(blue * 255)),\n        lroundf(Float(alpha * 255))\n    )\n}\n</code></pre>\n<p>}</p>\n<p>SwiftUIì—ì„œ í…Œë§ˆê°€ ì ìš©ëœ HTML ë Œë”ë§í•˜ê¸°</p>\n<div class=\"content-ad\"></div>\n<pre><code class=\"hljs language-swift\"><span class=\"hljs-keyword\">import</span> SwiftUI\n\n<span class=\"hljs-keyword\">struct</span> <span class=\"hljs-title class_\">ContentView</span>: <span class=\"hljs-title class_\">View</span> {\n    <span class=\"hljs-meta\">@Environment</span>(\\.theme) <span class=\"hljs-keyword\">private</span> <span class=\"hljs-keyword\">var</span> theme: <span class=\"hljs-type\">Theme</span>\n\n    <span class=\"hljs-keyword\">var</span> body: <span class=\"hljs-keyword\">some</span> <span class=\"hljs-type\">View</span> {\n        <span class=\"hljs-type\">NavigationStack</span> {\n            <span class=\"hljs-type\">ScrollView</span> {\n                <span class=\"hljs-type\">AttributedText</span>(.themedHtml(withBody: <span class=\"hljs-string\">\"\"\"\n                &#x3C;h3>This is a H3 header&#x3C;/h3>\n                &#x3C;p>This is a paragraph&#x3C;/p>\n                &#x3C;ul>\n                    &#x3C;li>List item one&#x3C;/li>\n                    &#x3C;li>List item two&#x3C;/li>\n                &#x3C;/ul>\n                &#x3C;p>This is a paragraph with a &#x3C;a href=\"https://developer.apple.com/\">link&#x3C;/a>&#x3C;/p>\n                &#x3C;p style=\"color: blue; text-align: center;\">\n                    This is a paragraph with inline styling\n                &#x3C;/p>\n                \"\"\"</span>, theme: theme))\n                .padding()\n            }\n            .navigationTitle(<span class=\"hljs-string\">\"Render Themed HTML in SwiftUI\"</span>)\n        }\n    }\n}\n</code></pre>\n<h2>ì´ê²Œ ë‹¤ì•¼!</h2>\n<p>ì‰½ì£ ! SwiftUIê°€ ì •ë§ ë©‹ì§€ì§€ë§Œ, ë•Œë¡œëŠ” ëª‡ ë…„ ë™ì•ˆ ì‚¬ë‘í•´ ì˜¨ UIKit ë·°ì™€ ê¸°ëŠ¥ì„ ì„ë² ë“œí•  ìˆ˜ ìˆëŠ” ê²ƒì´ ì°¸ ì¢‹ìŠµë‹ˆë‹¤.</p>\n<p>ì½”ë”©í•˜ì„¸ìš”! ğŸ™Œ</p>\n</body>\n</html>\n"},"__N_SSG":true}