{"pageProps":{"post":{"title":"리액트 앱에서 노드js 백엔드를 통해 API 호출 보안하기","description":"","date":"2024-06-20 07:35","slug":"2024-06-20-SecuringAPICallsinReactAppswithNodejsBackend","content":"\n\n오늘날 연결된 세상에서 안전한 웹 앱을 만드는 것은 매우 중요합니다. 애플리케이션의 통신 링크는 민감한 사용자 데이터를 관리하거나 거래를 돕는 경우 모두 안전해야 합니다. 다른 이의 엿보는 데서 민감한 데이터를 보호하기 위해, 리액트 프로젝트에서 API 호출을 안전하게 하는 방법에 대해 살펴보면서 업계 모베스트 프랙티스를 준수합니다.\n\n소개\n프런트엔드와 백엔드 간의 통신을 보호하는 것은 웹 애플리케이션 보안에서 가장 중요한 부분 중 하나입니다. 이는 API 엔드포인트를 보호하고 데이터 통신을 암호화하며 강력한 인증 절차를 수립하는 것을 포함합니다. 이러한 안전장치를 구현함으로써 무단 접근, 데이터 유출 및 기타 보안 결함의 가능성을 줄일 수 있습니다.\n\n# Node.js 백엔드 설정하기\n\n우리의 여정은 Node.js와 Express.js를 사용하여 백엔드를 설정하는 것으로 시작됩니다. Express.js는 Node.js를 위한 인기 있는 웹 애플리케이션 프레임워크입니다. 우리는 인증 기능을 갖춘 간단한 RESTful API를 만들어 보호된 리소스에만 인증된 사용자가 접근할 수 있도록 합니다.\n\n<div class=\"content-ad\"></div>\n\n저희 Node.js 백엔드에서는:\n\n- Express.js를 사용하여 서버를 생성하고 HTTP 요청을 처리합니다.\n- 인증은 현대적인 웹 애플리케이션에서 널리 사용되는 stateless 인증 메커니즘인 JSON Web Tokens (JWT)를 사용하여 구현됩니다.\n- 사용자 로그인 (/login) 및 보호된 데이터 검색 (/api/data)을 위한 라우트를 정의하고, 후자에 대한 인증을 강제합니다.\n\n```js\n// server.js\nconst express = require('express');\nconst jwt = require('jsonwebtoken');\n\nconst app = express();\nconst PORT = process.env.PORT || 5000;\nconst SECRET_KEY = 'your_secret_key';\n\napp.use(express.json());\n\n// 사용자 데이터 모의 (실제 시나리오에서는 데이터베이스에서 검색됨)\nconst users = [\n  { id: 1, username: 'user1', password: 'password1' },\n  { id: 2, username: 'user2', password: 'password2' }\n];\n\n// JWT 토큰 생성을 위한 로그인 라우트\napp.post('/login', (req, res) => {\n  const { username, password } = req.body;\n  const user = users.find(u => u.username === username && u.password === password);\n  if (!user) {\n    return res.status(401).json({ message: '유효하지 않은 사용자 이름 또는 비밀번호' });\n  }\n  const token = jwt.sign({ userId: user.id }, SECRET_KEY);\n  res.json({ token });\n});\n\n// 보호된 라우트\napp.get('/api/data', verifyToken, (req, res) => {\n  res.json({ message: '보호된 데이터' });\n});\n\nfunction verifyToken(req, res, next) {\n  const token = req.headers.authorization;\n  if (!token) {\n    return res.status(401).json({ message: '인가되지 않음' });\n  }\n  jwt.verify(token, SECRET_KEY, (err, decoded) => {\n    if (err) {\n      return res.status(401).json({ message: '유효하지 않은 토큰' });\n    }\n    req.userId = decoded.userId;\n    next();\n  });\n}\n\napp.listen(PORT, () => {\n  console.log(`서버가 http://localhost:${PORT}에서 실행 중입니다.`);\n});\n```\n\n# React로 프론트엔드 구현하기\n\n<div class=\"content-ad\"></div>\n\n백엔드 설정이 완료되어, 이제 프론트엔드에 주력하게 됩니다. 리액트 애플리케이션을 구축하여 백엔드 API와 상호작용할 것입니다. 리액트 앱은 사용자 인증을 용이하게 하며, 보호된 데이터를 가져오기 위해 백엔드로 요청을 보냅니다.\n\n우리의 리액트 프론트엔드에서 주요한 부분은 다음과 같습니다:\n\n- React 컴포넌트 내에서 백엔드 엔드포인트에 HTTP 요청을 보내기 위해 fetch API를 사용합니다.\n- 성공적으로 인증된 후, JWT 토큰을 클라이언트의 로컬 상태에 저장합니다.\n- 토큰은 보호된 API 엔드포인트로의 후속 요청의 Authorization 헤더에 포함됩니다.\n\n```js\n// App.js\nimport React, { useState } from 'react';\n\nfunction App() {\n  const [token, setToken] = useState('');\n  const [data, setData] = useState('');\n\n  const login = async () => {\n    const response = await fetch('/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({ username: 'user1', password: 'password1' })\n    });\n    const { token } = await response.json();\n    setToken(token);\n  };\n\n  const fetchData = async () => {\n    const response = await fetch('/api/data', {\n      method: 'GET',\n      headers: {\n        'Authorization': token\n      }\n    });\n    const result = await response.json();\n    setData(result.message);\n  };\n\n  return (\n    <div>\n      <button onClick={login}>로그인</button>\n      {token && <button onClick={fetchData}>데이터 가져오기</button>}\n      <div>{data}</div>\n    </div>\n  );\n}\n\nexport default App;\n```\n\n<div class=\"content-ad\"></div>\n\n# API 호출 및 데이터 전송 보안\n\nAPI 호출을 보호하는 것은 여러 층의 보호를 포함합니다:\n\n- HTTPS: 백엔드 API가 HTTPS를 통해 제공되도록하여 클라이언트와 서버 간에 전송되는 데이터를 암호화하여 도청과 변경을 방지합니다.\n- JWT 인증: JWT 토큰을 사용하여 클라이언트가 자신을 인증하고 안전하게 보호된 리소스에 액세스할 수 있도록 인증합니다.\n- 권한 부여: 민감한 정보에 액세스할 수 있는 사용자가 인증되었는지 확인하기 위해 보호된 엔드포인트에 권한 확인을 구현합니다.\n- 프록시된 요청: 클라이언트에게 백엔드 API의 세부 정보를 숨기기 위해 서버를 통해 요청을 프록시 처리하여 보안을 강화하고 백엔드 엔드포인트가 직접 노출되는 것을 방지합니다.\n\n# 결론\n\n<div class=\"content-ad\"></div>\n\nReact 프로젝트에서 Node.js 백엔드와 API 호출을 할 때는 최상의 방법을 준수하고 견고한 보안 메커니즘을 적용하여 안전하게 보호할 수 있습니다. JWT 토큰으로 인증 설정부터 서버를 통해 요청 프록시하는 것까지, 각 단계는 미인가된 접근으로부터 민감한 데이터를 보호하고 잠재적인 보안 문제를 예방하는 데 중요합니다.\n\n데이터 프라이버시와 보안이 중요한 점이 갈수록 높아지는 현대 세계에서는 이러한 보안 원칙을 구현하는 것이 권장 사항뿐만 아니라 사용자 신뢰와 확신을 구축하기 위한 필수 요소입니다. 보안을 강조함으로써, 우리는 웹 애플리케이션이 증가하는 위협과 취약점에 강건하게 대응하여 사용자에게 안전하고 안전한 경험을 제공할 수 있습니다.","ogImage":{"url":"/assets/img/2024-06-20-SecuringAPICallsinReactAppswithNodejsBackend_0.png"},"coverImage":"/assets/img/2024-06-20-SecuringAPICallsinReactAppswithNodejsBackend_0.png","tag":["Tech"],"readingTime":5},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p>오늘날 연결된 세상에서 안전한 웹 앱을 만드는 것은 매우 중요합니다. 애플리케이션의 통신 링크는 민감한 사용자 데이터를 관리하거나 거래를 돕는 경우 모두 안전해야 합니다. 다른 이의 엿보는 데서 민감한 데이터를 보호하기 위해, 리액트 프로젝트에서 API 호출을 안전하게 하는 방법에 대해 살펴보면서 업계 모베스트 프랙티스를 준수합니다.</p>\n<p>소개\n프런트엔드와 백엔드 간의 통신을 보호하는 것은 웹 애플리케이션 보안에서 가장 중요한 부분 중 하나입니다. 이는 API 엔드포인트를 보호하고 데이터 통신을 암호화하며 강력한 인증 절차를 수립하는 것을 포함합니다. 이러한 안전장치를 구현함으로써 무단 접근, 데이터 유출 및 기타 보안 결함의 가능성을 줄일 수 있습니다.</p>\n<h1>Node.js 백엔드 설정하기</h1>\n<p>우리의 여정은 Node.js와 Express.js를 사용하여 백엔드를 설정하는 것으로 시작됩니다. Express.js는 Node.js를 위한 인기 있는 웹 애플리케이션 프레임워크입니다. 우리는 인증 기능을 갖춘 간단한 RESTful API를 만들어 보호된 리소스에만 인증된 사용자가 접근할 수 있도록 합니다.</p>\n<p>저희 Node.js 백엔드에서는:</p>\n<ul>\n<li>Express.js를 사용하여 서버를 생성하고 HTTP 요청을 처리합니다.</li>\n<li>인증은 현대적인 웹 애플리케이션에서 널리 사용되는 stateless 인증 메커니즘인 JSON Web Tokens (JWT)를 사용하여 구현됩니다.</li>\n<li>사용자 로그인 (/login) 및 보호된 데이터 검색 (/api/data)을 위한 라우트를 정의하고, 후자에 대한 인증을 강제합니다.</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// server.js</span>\n<span class=\"hljs-keyword\">const</span> express = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'express'</span>);\n<span class=\"hljs-keyword\">const</span> jwt = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'jsonwebtoken'</span>);\n\n<span class=\"hljs-keyword\">const</span> app = <span class=\"hljs-title function_\">express</span>();\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">PORT</span> = process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">PORT</span> || <span class=\"hljs-number\">5000</span>;\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-variable constant_\">SECRET_KEY</span> = <span class=\"hljs-string\">'your_secret_key'</span>;\n\napp.<span class=\"hljs-title function_\">use</span>(express.<span class=\"hljs-title function_\">json</span>());\n\n<span class=\"hljs-comment\">// 사용자 데이터 모의 (실제 시나리오에서는 데이터베이스에서 검색됨)</span>\n<span class=\"hljs-keyword\">const</span> users = [\n  { <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-attr\">username</span>: <span class=\"hljs-string\">'user1'</span>, <span class=\"hljs-attr\">password</span>: <span class=\"hljs-string\">'password1'</span> },\n  { <span class=\"hljs-attr\">id</span>: <span class=\"hljs-number\">2</span>, <span class=\"hljs-attr\">username</span>: <span class=\"hljs-string\">'user2'</span>, <span class=\"hljs-attr\">password</span>: <span class=\"hljs-string\">'password2'</span> }\n];\n\n<span class=\"hljs-comment\">// JWT 토큰 생성을 위한 로그인 라우트</span>\napp.<span class=\"hljs-title function_\">post</span>(<span class=\"hljs-string\">'/login'</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =></span> {\n  <span class=\"hljs-keyword\">const</span> { username, password } = req.<span class=\"hljs-property\">body</span>;\n  <span class=\"hljs-keyword\">const</span> user = users.<span class=\"hljs-title function_\">find</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">u</span> =></span> u.<span class=\"hljs-property\">username</span> === username &#x26;&#x26; u.<span class=\"hljs-property\">password</span> === password);\n  <span class=\"hljs-keyword\">if</span> (!user) {\n    <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">401</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">'유효하지 않은 사용자 이름 또는 비밀번호'</span> });\n  }\n  <span class=\"hljs-keyword\">const</span> token = jwt.<span class=\"hljs-title function_\">sign</span>({ <span class=\"hljs-attr\">userId</span>: user.<span class=\"hljs-property\">id</span> }, <span class=\"hljs-variable constant_\">SECRET_KEY</span>);\n  res.<span class=\"hljs-title function_\">json</span>({ token });\n});\n\n<span class=\"hljs-comment\">// 보호된 라우트</span>\napp.<span class=\"hljs-title function_\">get</span>(<span class=\"hljs-string\">'/api/data'</span>, verifyToken, <span class=\"hljs-function\">(<span class=\"hljs-params\">req, res</span>) =></span> {\n  res.<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">'보호된 데이터'</span> });\n});\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">verifyToken</span>(<span class=\"hljs-params\">req, res, next</span>) {\n  <span class=\"hljs-keyword\">const</span> token = req.<span class=\"hljs-property\">headers</span>.<span class=\"hljs-property\">authorization</span>;\n  <span class=\"hljs-keyword\">if</span> (!token) {\n    <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">401</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">'인가되지 않음'</span> });\n  }\n  jwt.<span class=\"hljs-title function_\">verify</span>(token, <span class=\"hljs-variable constant_\">SECRET_KEY</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">err, decoded</span>) =></span> {\n    <span class=\"hljs-keyword\">if</span> (err) {\n      <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">401</span>).<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">'유효하지 않은 토큰'</span> });\n    }\n    req.<span class=\"hljs-property\">userId</span> = decoded.<span class=\"hljs-property\">userId</span>;\n    <span class=\"hljs-title function_\">next</span>();\n  });\n}\n\napp.<span class=\"hljs-title function_\">listen</span>(<span class=\"hljs-variable constant_\">PORT</span>, <span class=\"hljs-function\">() =></span> {\n  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">`서버가 http://localhost:<span class=\"hljs-subst\">${PORT}</span>에서 실행 중입니다.`</span>);\n});\n</code></pre>\n<h1>React로 프론트엔드 구현하기</h1>\n<p>백엔드 설정이 완료되어, 이제 프론트엔드에 주력하게 됩니다. 리액트 애플리케이션을 구축하여 백엔드 API와 상호작용할 것입니다. 리액트 앱은 사용자 인증을 용이하게 하며, 보호된 데이터를 가져오기 위해 백엔드로 요청을 보냅니다.</p>\n<p>우리의 리액트 프론트엔드에서 주요한 부분은 다음과 같습니다:</p>\n<ul>\n<li>React 컴포넌트 내에서 백엔드 엔드포인트에 HTTP 요청을 보내기 위해 fetch API를 사용합니다.</li>\n<li>성공적으로 인증된 후, JWT 토큰을 클라이언트의 로컬 상태에 저장합니다.</li>\n<li>토큰은 보호된 API 엔드포인트로의 후속 요청의 Authorization 헤더에 포함됩니다.</li>\n</ul>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// App.js</span>\n<span class=\"hljs-keyword\">import</span> <span class=\"hljs-title class_\">React</span>, { useState } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'react'</span>;\n\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">App</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> [token, setToken] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-string\">''</span>);\n  <span class=\"hljs-keyword\">const</span> [data, setData] = <span class=\"hljs-title function_\">useState</span>(<span class=\"hljs-string\">''</span>);\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">login</span> = <span class=\"hljs-keyword\">async</span> (<span class=\"hljs-params\"></span>) => {\n    <span class=\"hljs-keyword\">const</span> response = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">'/login'</span>, {\n      <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">'POST'</span>,\n      <span class=\"hljs-attr\">headers</span>: {\n        <span class=\"hljs-string\">'Content-Type'</span>: <span class=\"hljs-string\">'application/json'</span>\n      },\n      <span class=\"hljs-attr\">body</span>: <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>({ <span class=\"hljs-attr\">username</span>: <span class=\"hljs-string\">'user1'</span>, <span class=\"hljs-attr\">password</span>: <span class=\"hljs-string\">'password1'</span> })\n    });\n    <span class=\"hljs-keyword\">const</span> { token } = <span class=\"hljs-keyword\">await</span> response.<span class=\"hljs-title function_\">json</span>();\n    <span class=\"hljs-title function_\">setToken</span>(token);\n  };\n\n  <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">fetchData</span> = <span class=\"hljs-keyword\">async</span> (<span class=\"hljs-params\"></span>) => {\n    <span class=\"hljs-keyword\">const</span> response = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">'/api/data'</span>, {\n      <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">'GET'</span>,\n      <span class=\"hljs-attr\">headers</span>: {\n        <span class=\"hljs-string\">'Authorization'</span>: token\n      }\n    });\n    <span class=\"hljs-keyword\">const</span> result = <span class=\"hljs-keyword\">await</span> response.<span class=\"hljs-title function_\">json</span>();\n    <span class=\"hljs-title function_\">setData</span>(result.<span class=\"hljs-property\">message</span>);\n  };\n\n  <span class=\"hljs-keyword\">return</span> (\n    <span class=\"xml\"><span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{login}</span>></span>로그인<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>\n      {token &#x26;&#x26; <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onClick</span>=<span class=\"hljs-string\">{fetchData}</span>></span>데이터 가져오기<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">button</span>></span>}\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span>></span>{data}<span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></span>\n  );\n}\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title class_\">App</span>;\n</code></pre>\n<h1>API 호출 및 데이터 전송 보안</h1>\n<p>API 호출을 보호하는 것은 여러 층의 보호를 포함합니다:</p>\n<ul>\n<li>HTTPS: 백엔드 API가 HTTPS를 통해 제공되도록하여 클라이언트와 서버 간에 전송되는 데이터를 암호화하여 도청과 변경을 방지합니다.</li>\n<li>JWT 인증: JWT 토큰을 사용하여 클라이언트가 자신을 인증하고 안전하게 보호된 리소스에 액세스할 수 있도록 인증합니다.</li>\n<li>권한 부여: 민감한 정보에 액세스할 수 있는 사용자가 인증되었는지 확인하기 위해 보호된 엔드포인트에 권한 확인을 구현합니다.</li>\n<li>프록시된 요청: 클라이언트에게 백엔드 API의 세부 정보를 숨기기 위해 서버를 통해 요청을 프록시 처리하여 보안을 강화하고 백엔드 엔드포인트가 직접 노출되는 것을 방지합니다.</li>\n</ul>\n<h1>결론</h1>\n<p>React 프로젝트에서 Node.js 백엔드와 API 호출을 할 때는 최상의 방법을 준수하고 견고한 보안 메커니즘을 적용하여 안전하게 보호할 수 있습니다. JWT 토큰으로 인증 설정부터 서버를 통해 요청 프록시하는 것까지, 각 단계는 미인가된 접근으로부터 민감한 데이터를 보호하고 잠재적인 보안 문제를 예방하는 데 중요합니다.</p>\n<p>데이터 프라이버시와 보안이 중요한 점이 갈수록 높아지는 현대 세계에서는 이러한 보안 원칙을 구현하는 것이 권장 사항뿐만 아니라 사용자 신뢰와 확신을 구축하기 위한 필수 요소입니다. 보안을 강조함으로써, 우리는 웹 애플리케이션이 증가하는 위협과 취약점에 강건하게 대응하여 사용자에게 안전하고 안전한 경험을 제공할 수 있습니다.</p>\n</body>\n</html>\n"},"__N_SSG":true}