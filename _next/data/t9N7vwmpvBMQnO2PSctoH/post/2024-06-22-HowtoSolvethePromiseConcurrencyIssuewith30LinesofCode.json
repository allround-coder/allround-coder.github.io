{"pageProps":{"post":{"title":"30ì¤„ ì½”ë“œë¡œ ì‰½ê²Œ í•´ê²°í•˜ëŠ” í”„ë¼ë¯¸ìŠ¤ ë™ì‹œì„± ë¬¸ì œ í•´ê²° ë°©ë²•","description":"","date":"2024-06-22 02:01","slug":"2024-06-22-HowtoSolvethePromiseConcurrencyIssuewith30LinesofCode","content":"\n\n\n![image](/assets/img/2024-06-22-HowtoSolvethePromiseConcurrencyIssuewith30LinesofCode_0.png)\n\n# 1. Why\n\n## Why Control Concurrency?\n\nControlling concurrency is essential for effectively managing system resources, preventing overload, improving performance and response time, ensuring system stability, and maintaining a good user experience. By limiting the number of concurrent requests, the system can continue to operate normally even under high load conditions.\n\n\n<div class=\"content-ad\"></div>\n\n# 2. ë¬´ì—‡\n\n## 2.1 ë™ì‹œì„±ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?\n\në™ì‹œì„±ì€ ì‹œìŠ¤í…œ ë˜ëŠ” í”„ë¡œê·¸ë¨ì´ ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ì´ë‚˜ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì´ëŠ” ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë‚˜ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì‘ì—…ì„ ì‹¤í–‰í•˜ì—¬ ì‹œìŠ¤í…œì˜ ì²˜ë¦¬ëŸ‰ê³¼ ì‘ë‹µ ì†ë„ë¥¼ ë†’ì´ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤. ë™ì‹œ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ ì‘ì—…ì´ ë²ˆê°ˆì•„ê°€ë©° ì‹¤í–‰ë˜ì–´ ë¦¬ì†ŒìŠ¤ í™œìš©ì´ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë¦¬ì†ŒìŠ¤ ì¶©ëŒ, ì„±ëŠ¥ ì €í•˜, ë°ë“œë½ê³¼ ë°ì´í„° ë¶ˆì¼ì¹˜ ë“±ì˜ ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ íš¨ê³¼ì ì¸ ê´€ë¦¬ì™€ ì œì–´ê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\n## 2.2 ì¼ë°˜ì ì¸ ë™ì‹œ ì‘ì—…\n\n<div class=\"content-ad\"></div>\n\nì›¹ ê°œë°œì—ì„œ ì¼ë°˜ì ì¸ ë™ì‹œ ì‘ì—…ì´ ë§ì´ ìˆìŠµë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œ, ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… ë° ì‹œìŠ¤í…œ ìˆ˜ì¤€ì˜ ì‘ì—… ì²˜ë¦¬ ë“±ì„ ë‹¤ë£¹ë‹ˆë‹¤. ì›¹ ê°œë°œì—ì„œ ì¼ë°˜ì ì¸ ë™ì‹œ ì‘ì—…ì˜ ëª‡ ê°€ì§€ ì˜ˆëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n- ì—¬ëŸ¬ ë™ì‹œ ì¸í„°í˜ì´ìŠ¤ ìš”ì²­: í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì—ì„œëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ë™ì‹œì— ì—¬ëŸ¬ API ì—”ë“œí¬ì¸íŠ¸ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.\n- ë™ì‹œì— ì—¬ëŸ¬ ìš”ì²­ ì²˜ë¦¬: ì›¹ ì„œë²„ëŠ” ë™ì‹œì— ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n- ë³‘ë ¬ë¡œ ì‘ì—… ì‹¤í–‰: ì˜ˆë¥¼ ë“¤ì–´ Node.jsì˜ ë¹„ë™ê¸° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n# 3. ë°©ë²•\n\n## 3.1 Promise.all\n\n<div class=\"content-ad\"></div>\n\ní”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë™ì‹œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ Promise.allì„ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:\n\n```js\n// ë¹„ë™ê¸° ì‘ì—…ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” í•¨ìˆ˜\nfunction asyncOperation(duration) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(`ì´ ${duration}ë°€ë¦¬ì´ˆ ì†Œìš”`);\n    }, duration);\n  });\n}\n\n// ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê¸° ìœ„í•´ Promise.all ì‚¬ìš©\nfunction simulatePromiseAll() {\n  const promise1 = asyncOperation(1000);\n  const promise2 = asyncOperation(2000);\n  const promise3 = asyncOperation(3000);\n\n  Promise.all([promise1, promise2, promise3])\n    .then((results) => {\n      console.log('ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤:');\n      results.forEach(result => console.log(result));\n    })\n    .catch((error) => {\n      console.error('ì˜¤ë¥˜ ë°œìƒ:', error);\n    });\n}\n\n// Promise.all í•¨ìˆ˜ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰\nsimulatePromiseAll();\r\n```\n\nê·¸ëŸ¬ë‚˜ Promise.allì€ ë™ì‹œì„±ì„ ì œì–´í•  ìˆ˜ ì—†ê±°ë‚˜ ì •í™•íˆëŠ” ì´ ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ê° asyncOperationì„ ìˆ˜ì •í•˜ì—¬ Promise.allì´ Promiseë¥¼ ì‹¤í–‰í•  ë•Œ ë™ì‹œì„± ì œì–´ë¥¼ ì§€ì›í•˜ë„ë¡ ëª‡ ê°€ì§€ ìˆ˜ì •ì„ í•´ì•¼ í•©ë‹ˆë‹¤.\n\n## 3.2 êµ¬í˜„ ë°©ë²•\n\n<div class=\"content-ad\"></div>\n\nê¸°ë³¸ ì•„ì´ë””ì–´ëŠ” 100ê°œì˜ ë™ì‹œ ì‘ì—…ì´ ìˆê³  ìµœëŒ€ ë™ì‹œì„±ì„ 10ìœ¼ë¡œ ì„¤ì •í•œë‹¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¦…ë‹ˆë‹¤:\n\n1. ë¨¼ì € 10ê°œì˜ ìŠ¬ë¡¯ì„ ì„¤ì •í•©ë‹ˆë‹¤.\n2. ì²˜ìŒ 10ê°œì˜ ë™ì‹œ ì‘ì—…ì´ ìŠ¬ë¡¯ì„ ì°¨ì§€í•˜ê³  ì‹¤í–‰ë©ë‹ˆë‹¤.\n3. ì–´ë–¤ ìŠ¬ë¡¯ì´ ë¨¼ì € ì‘ì—…ì„ ì™„ë£Œí–ˆëŠ”ì§€ ëª¨ë‹ˆí„°ë§í•œ í›„, ë‚˜ë¨¸ì§€ ì‘ì—…ì—ì„œ ë‹¤ë¥¸ ì‘ì—…ì„ ê°€ì ¸ì™€ ìŠ¬ë¡¯ì„ ì±„ì›ë‹ˆë‹¤.\n4. ëª¨ë“  ë™ì‹œ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ë‹¨ê³„ 3ì„ ë°˜ë³µí•©ë‹ˆë‹¤.\n\n```js\n// ìš°ë¦¬ê°€ êµ¬í˜„í•´ì•¼ í•˜ëŠ” í•¨ìˆ˜\nconst simulateLimit = () => {\n  // ì½”ë“œ ì‘ì„± \n}\n\n// ë¹„ë™ê¸° ì‘ì—…ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” í•¨ìˆ˜\nfunction asyncOperation(duration) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(`Completed in ${duration} ms`);\n    }, duration);\n  });\n}\n\n// ë™ì‹œì„±ì„ ì œí•œí•˜ê¸° ìœ„í•´ simulateLimitì„ ì‚¬ìš©í•©ë‹ˆë‹¤\nfunction simulateControlledPromiseAll() {\n  const limit = simulateLimit(10);\n\n  const tasks = [\n    limit(() => asyncOperation(1000)),\n    limit(() => asyncOperation(2000)),\n    limit(() => asyncOperation(3000)),\n    limit(() => asyncOperation(1500)),\n    limit(() => asyncOperation(2500)),\n    limit(() => asyncOperation(3500)),\n    // ì—¬ê¸°ì— ë” ë§ì€ ì‘ì—…ì„ ì¶”ê°€í•˜ì„¸ìš”\n    // ...\n  ];\n\n  Promise.all(tasks)\n    .then((results) => {\n      console.log('ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤:');\n      results.forEach(result => console.log(result));\n    })\n    .catch((error) => {\n      console.error('ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:', error);\n    });\n}\n\nsimulateControlledPromiseAll();\r\n```\n\n3.3 30ì¤„ì˜ ì½”ë“œë¡œ simulateLimitë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•\n\n<div class=\"content-ad\"></div>\n\ní…Œì´ë¸” íƒœê·¸ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë°”ê¿”ì£¼ì„¸ìš”.\n\n<div class=\"content-ad\"></div>\n\në°˜í™˜ëœ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” ì‹¤ì œ ì‘ì—… í•¨ìˆ˜ fnì„ ë˜í•‘í•˜ëŠ” ì‘ì—… í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤. taskê°€ í˜¸ì¶œë˜ë©´ activeCountë¥¼ ì¦ê°€ì‹œí‚¤ê³  ì‘ì—… í•¨ìˆ˜ fnì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ ì—¬ë¶€ì— ìƒê´€ì—†ì´ ë‹¤ìŒ í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.\n\n```js\nconst task = () => {\n  activeCount++;\n\n  fn(...args).then(\n    (value) => {\n      resolve(value);\n      next();\n    },\n    (error) => {\n      reject(error);\n      next();\n    }\n  );\n};\n```\n\ní˜„ì¬ ì‘ì—…ì´ ì™„ë£Œëœ í›„ next í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤. activeCountë¥¼ ê°ì†Œì‹œí‚¤ê³  ëŒ€ê¸° ì¤‘ì¸ ì‘ì—…ì´ ìˆê³  ë™ì‹œì„± ì œí•œì´ ì•„ì§ ì´ˆê³¼ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ëŒ€ê¸°ì—´ì—ì„œ ë‹¤ìŒ ì‘ì—…ì„ ê°€ì ¸ì™€ ì‹¤í–‰í•©ë‹ˆë‹¤.\n\n```js\nconst next = () => {\n  activeCount--;\n  if (queue.length > 0 && activeCount < concurrency) {\n    const nextTask = queue.shift();\n    nextTask();\n  }\n};\n```\n\n<div class=\"content-ad\"></div>\n\në°˜í™˜ëœ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í˜„ì¬ í™œì„± ì‘ì—… ìˆ˜ activeCountê°€ ë™ì‹œì„± ì œí•œ(concurrency)ë³´ë‹¤ ì‘ì€ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì‘ì—… ìˆ˜ê°€ ëª¨ìë¼ë©´ í•´ë‹¹ ì‘ì—…ì„ ì¦‰ì‹œ ì‹¤í–‰í•˜ê³ , ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ í•´ë‹¹ ì‘ì—…ì„ ëŒ€ê¸°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤.\n\n```js\nif (activeCount < concurrency) {\n  task();\n} else {\n  queue.push(task);\n}\n```\n\nì „ì²´ ì½”ë“œ êµ¬í˜„ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:\n\n```js\nfunction simulateLimit(concurrency) {\n  const queue = [];\n  let activeCount = 0;\n\n  return function (fn, ...args) {\n    return new Promise((resolve, reject) => {\n      const task = () => {\n        activeCount++;\n        fn(...args).then(\n          (value) => {\n            resolve(value);\n            next();\n          },\n          (error) => {\n            reject(error);\n            next();\n          }\n        );\n      };\n\n      const next = () => {\n        activeCount--;\n        if (queue.length > 0 && activeCount < concurrency) {\n          const nextTask = queue.shift();\n          nextTask();\n        }\n      };\n\n      if (activeCount < concurrency) {\n        task();\n      } else {\n        queue.push(task);\n      }\n    });\n  };\n}\n```\n\n<div class=\"content-ad\"></div>\n\nì‹¤ì œë¡œ ì´ê²ƒì€ ìœ ëª…í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ p-limitì˜ ì†ŒìŠ¤ ì½”ë“œì…ë‹ˆë‹¤. ë” ì™„ë²½í•œ ì‚¬ìš©ë²•ê³¼ ì •ì œëœ ì½”ë“œë¥¼ ë³´ë ¤ë©´ npmì—ì„œ p-limitì„ ì°¸ì¡°í•´ì£¼ì„¸ìš”. ë°°ì›Œê°”ë‚˜ìš”?\n\n# ê°„ë‹¨í•˜ê³  ì‰¬ìš´ ì˜ì–´ë¡œ ğŸš€\n\nIn Plain English ì»¤ë®¤ë‹ˆí‹°ì˜ ì¼ì›ì´ ë˜ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:\n\n- ì‘ê°€ë¥¼ ë°•ìˆ˜ë¡œ ì‘ì›í•˜ê³  íŒ”ë¡œìš°í•˜ê¸° ï¸ğŸ‘ï¸\n- íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | Newsletter\n- ë‹¤ë¥¸ í”Œë«í¼ì—ì„œ ë§Œë‚˜ê¸°: CoFeed | Differ\n- PlainEnglish.ioì—ì„œ ë” ë§ì€ ì½˜í…ì¸  ë§Œë‚˜ë³´ê¸°","ogImage":{"url":"/assets/img/2024-06-22-HowtoSolvethePromiseConcurrencyIssuewith30LinesofCode_0.png"},"coverImage":"/assets/img/2024-06-22-HowtoSolvethePromiseConcurrencyIssuewith30LinesofCode_0.png","tag":["Tech"],"readingTime":6},"content":"<!doctype html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\">\n<meta content=\"width=device-width, initial-scale=1\" name=\"viewport\">\n</head>\n<body>\n<p><img src=\"/assets/img/2024-06-22-HowtoSolvethePromiseConcurrencyIssuewith30LinesofCode_0.png\" alt=\"image\"></p>\n<h1>1. Why</h1>\n<h2>Why Control Concurrency?</h2>\n<p>Controlling concurrency is essential for effectively managing system resources, preventing overload, improving performance and response time, ensuring system stability, and maintaining a good user experience. By limiting the number of concurrent requests, the system can continue to operate normally even under high load conditions.</p>\n<h1>2. ë¬´ì—‡</h1>\n<h2>2.1 ë™ì‹œì„±ì´ë€ ë¬´ì—‡ì¸ê°€ìš”?</h2>\n<p>ë™ì‹œì„±ì€ ì‹œìŠ¤í…œ ë˜ëŠ” í”„ë¡œê·¸ë¨ì´ ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ì´ë‚˜ ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì´ëŠ” ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ë‚˜ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì‘ì—…ì„ ì‹¤í–‰í•˜ì—¬ ì‹œìŠ¤í…œì˜ ì²˜ë¦¬ëŸ‰ê³¼ ì‘ë‹µ ì†ë„ë¥¼ ë†’ì´ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤. ë™ì‹œ í™˜ê²½ì—ì„œ ì—¬ëŸ¬ ì‘ì—…ì´ ë²ˆê°ˆì•„ê°€ë©° ì‹¤í–‰ë˜ì–´ ë¦¬ì†ŒìŠ¤ í™œìš©ì´ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë¦¬ì†ŒìŠ¤ ì¶©ëŒ, ì„±ëŠ¥ ì €í•˜, ë°ë“œë½ê³¼ ë°ì´í„° ë¶ˆì¼ì¹˜ ë“±ì˜ ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ íš¨ê³¼ì ì¸ ê´€ë¦¬ì™€ ì œì–´ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>\n<h2>2.2 ì¼ë°˜ì ì¸ ë™ì‹œ ì‘ì—…</h2>\n<p>ì›¹ ê°œë°œì—ì„œ ì¼ë°˜ì ì¸ ë™ì‹œ ì‘ì—…ì´ ë§ì´ ìˆìŠµë‹ˆë‹¤. í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œ, ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—… ë° ì‹œìŠ¤í…œ ìˆ˜ì¤€ì˜ ì‘ì—… ì²˜ë¦¬ ë“±ì„ ë‹¤ë£¹ë‹ˆë‹¤. ì›¹ ê°œë°œì—ì„œ ì¼ë°˜ì ì¸ ë™ì‹œ ì‘ì—…ì˜ ëª‡ ê°€ì§€ ì˜ˆëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>\n<ul>\n<li>ì—¬ëŸ¬ ë™ì‹œ ì¸í„°í˜ì´ìŠ¤ ìš”ì²­: í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì—ì„œëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ ë™ì‹œì— ì—¬ëŸ¬ API ì—”ë“œí¬ì¸íŠ¸ì— ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.</li>\n<li>ë™ì‹œì— ì—¬ëŸ¬ ìš”ì²­ ì²˜ë¦¬: ì›¹ ì„œë²„ëŠ” ë™ì‹œì— ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</li>\n<li>ë³‘ë ¬ë¡œ ì‘ì—… ì‹¤í–‰: ì˜ˆë¥¼ ë“¤ì–´ Node.jsì˜ ë¹„ë™ê¸° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</li>\n</ul>\n<h1>3. ë°©ë²•</h1>\n<h2>3.1 Promise.all</h2>\n<p>í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë™ì‹œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ Promise.allì„ ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// ë¹„ë™ê¸° ì‘ì—…ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” í•¨ìˆ˜</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-params\">duration</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =></span> {\n    <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =></span> {\n      <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-string\">`ì´ <span class=\"hljs-subst\">${duration}</span>ë°€ë¦¬ì´ˆ ì†Œìš”`</span>);\n    }, duration);\n  });\n}\n\n<span class=\"hljs-comment\">// ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê¸° ìœ„í•´ Promise.all ì‚¬ìš©</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">simulatePromiseAll</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> promise1 = <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-number\">1000</span>);\n  <span class=\"hljs-keyword\">const</span> promise2 = <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-number\">2000</span>);\n  <span class=\"hljs-keyword\">const</span> promise3 = <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-number\">3000</span>);\n\n  <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">all</span>([promise1, promise2, promise3])\n    .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">results</span>) =></span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤:'</span>);\n      results.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">result</span> =></span> <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(result));\n    })\n    .<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">error</span>) =></span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">'ì˜¤ë¥˜ ë°œìƒ:'</span>, error);\n    });\n}\n\n<span class=\"hljs-comment\">// Promise.all í•¨ìˆ˜ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰</span>\n<span class=\"hljs-title function_\">simulatePromiseAll</span>();\n</code></pre>\n<p>ê·¸ëŸ¬ë‚˜ Promise.allì€ ë™ì‹œì„±ì„ ì œì–´í•  ìˆ˜ ì—†ê±°ë‚˜ ì •í™•íˆëŠ” ì´ ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ê° asyncOperationì„ ìˆ˜ì •í•˜ì—¬ Promise.allì´ Promiseë¥¼ ì‹¤í–‰í•  ë•Œ ë™ì‹œì„± ì œì–´ë¥¼ ì§€ì›í•˜ë„ë¡ ëª‡ ê°€ì§€ ìˆ˜ì •ì„ í•´ì•¼ í•©ë‹ˆë‹¤.</p>\n<h2>3.2 êµ¬í˜„ ë°©ë²•</h2>\n<p>ê¸°ë³¸ ì•„ì´ë””ì–´ëŠ” 100ê°œì˜ ë™ì‹œ ì‘ì—…ì´ ìˆê³  ìµœëŒ€ ë™ì‹œì„±ì„ 10ìœ¼ë¡œ ì„¤ì •í•œë‹¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¦…ë‹ˆë‹¤:</p>\n<ol>\n<li>ë¨¼ì € 10ê°œì˜ ìŠ¬ë¡¯ì„ ì„¤ì •í•©ë‹ˆë‹¤.</li>\n<li>ì²˜ìŒ 10ê°œì˜ ë™ì‹œ ì‘ì—…ì´ ìŠ¬ë¡¯ì„ ì°¨ì§€í•˜ê³  ì‹¤í–‰ë©ë‹ˆë‹¤.</li>\n<li>ì–´ë–¤ ìŠ¬ë¡¯ì´ ë¨¼ì € ì‘ì—…ì„ ì™„ë£Œí–ˆëŠ”ì§€ ëª¨ë‹ˆí„°ë§í•œ í›„, ë‚˜ë¨¸ì§€ ì‘ì—…ì—ì„œ ë‹¤ë¥¸ ì‘ì—…ì„ ê°€ì ¸ì™€ ìŠ¬ë¡¯ì„ ì±„ì›ë‹ˆë‹¤.</li>\n<li>ëª¨ë“  ë™ì‹œ ì‘ì—…ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ë‹¨ê³„ 3ì„ ë°˜ë³µí•©ë‹ˆë‹¤.</li>\n</ol>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// ìš°ë¦¬ê°€ êµ¬í˜„í•´ì•¼ í•˜ëŠ” í•¨ìˆ˜</span>\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">simulateLimit</span> = (<span class=\"hljs-params\"></span>) => {\n  <span class=\"hljs-comment\">// ì½”ë“œ ì‘ì„± </span>\n}\n\n<span class=\"hljs-comment\">// ë¹„ë™ê¸° ì‘ì—…ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” í•¨ìˆ˜</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-params\">duration</span>) {\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =></span> {\n    <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">() =></span> {\n      <span class=\"hljs-title function_\">resolve</span>(<span class=\"hljs-string\">`Completed in <span class=\"hljs-subst\">${duration}</span> ms`</span>);\n    }, duration);\n  });\n}\n\n<span class=\"hljs-comment\">// ë™ì‹œì„±ì„ ì œí•œí•˜ê¸° ìœ„í•´ simulateLimitì„ ì‚¬ìš©í•©ë‹ˆë‹¤</span>\n<span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">simulateControlledPromiseAll</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-keyword\">const</span> limit = <span class=\"hljs-title function_\">simulateLimit</span>(<span class=\"hljs-number\">10</span>);\n\n  <span class=\"hljs-keyword\">const</span> tasks = [\n    <span class=\"hljs-title function_\">limit</span>(<span class=\"hljs-function\">() =></span> <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-number\">1000</span>)),\n    <span class=\"hljs-title function_\">limit</span>(<span class=\"hljs-function\">() =></span> <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-number\">2000</span>)),\n    <span class=\"hljs-title function_\">limit</span>(<span class=\"hljs-function\">() =></span> <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-number\">3000</span>)),\n    <span class=\"hljs-title function_\">limit</span>(<span class=\"hljs-function\">() =></span> <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-number\">1500</span>)),\n    <span class=\"hljs-title function_\">limit</span>(<span class=\"hljs-function\">() =></span> <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-number\">2500</span>)),\n    <span class=\"hljs-title function_\">limit</span>(<span class=\"hljs-function\">() =></span> <span class=\"hljs-title function_\">asyncOperation</span>(<span class=\"hljs-number\">3500</span>)),\n    <span class=\"hljs-comment\">// ì—¬ê¸°ì— ë” ë§ì€ ì‘ì—…ì„ ì¶”ê°€í•˜ì„¸ìš”</span>\n    <span class=\"hljs-comment\">// ...</span>\n  ];\n\n  <span class=\"hljs-title class_\">Promise</span>.<span class=\"hljs-title function_\">all</span>(tasks)\n    .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">results</span>) =></span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">'ëª¨ë“  ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤:'</span>);\n      results.<span class=\"hljs-title function_\">forEach</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">result</span> =></span> <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(result));\n    })\n    .<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">error</span>) =></span> {\n      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">error</span>(<span class=\"hljs-string\">'ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:'</span>, error);\n    });\n}\n\n<span class=\"hljs-title function_\">simulateControlledPromiseAll</span>();\n</code></pre>\n<p>3.3 30ì¤„ì˜ ì½”ë“œë¡œ simulateLimitë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•</p>\n<p>í…Œì´ë¸” íƒœê·¸ë¥¼ ë§ˆí¬ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ë°”ê¿”ì£¼ì„¸ìš”.</p>\n<p>ë°˜í™˜ëœ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” ì‹¤ì œ ì‘ì—… í•¨ìˆ˜ fnì„ ë˜í•‘í•˜ëŠ” ì‘ì—… í•¨ìˆ˜ë¥¼ ë§Œë“­ë‹ˆë‹¤. taskê°€ í˜¸ì¶œë˜ë©´ activeCountë¥¼ ì¦ê°€ì‹œí‚¤ê³  ì‘ì—… í•¨ìˆ˜ fnì„ ì‹¤í–‰í•©ë‹ˆë‹¤. ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ ì—¬ë¶€ì— ìƒê´€ì—†ì´ ë‹¤ìŒ í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">task</span> = (<span class=\"hljs-params\"></span>) => {\n  activeCount++;\n\n  <span class=\"hljs-title function_\">fn</span>(...args).<span class=\"hljs-title function_\">then</span>(\n    <span class=\"hljs-function\">(<span class=\"hljs-params\">value</span>) =></span> {\n      <span class=\"hljs-title function_\">resolve</span>(value);\n      <span class=\"hljs-title function_\">next</span>();\n    },\n    <span class=\"hljs-function\">(<span class=\"hljs-params\">error</span>) =></span> {\n      <span class=\"hljs-title function_\">reject</span>(error);\n      <span class=\"hljs-title function_\">next</span>();\n    }\n  );\n};\n</code></pre>\n<p>í˜„ì¬ ì‘ì—…ì´ ì™„ë£Œëœ í›„ next í•¨ìˆ˜ê°€ í˜¸ì¶œë©ë‹ˆë‹¤. activeCountë¥¼ ê°ì†Œì‹œí‚¤ê³  ëŒ€ê¸° ì¤‘ì¸ ì‘ì—…ì´ ìˆê³  ë™ì‹œì„± ì œí•œì´ ì•„ì§ ì´ˆê³¼ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ëŒ€ê¸°ì—´ì—ì„œ ë‹¤ìŒ ì‘ì—…ì„ ê°€ì ¸ì™€ ì‹¤í–‰í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">next</span> = (<span class=\"hljs-params\"></span>) => {\n  activeCount--;\n  <span class=\"hljs-keyword\">if</span> (queue.<span class=\"hljs-property\">length</span> > <span class=\"hljs-number\">0</span> &#x26;&#x26; activeCount &#x3C; concurrency) {\n    <span class=\"hljs-keyword\">const</span> nextTask = queue.<span class=\"hljs-title function_\">shift</span>();\n    <span class=\"hljs-title function_\">nextTask</span>();\n  }\n};\n</code></pre>\n<p>ë°˜í™˜ëœ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ í˜„ì¬ í™œì„± ì‘ì—… ìˆ˜ activeCountê°€ ë™ì‹œì„± ì œí•œ(concurrency)ë³´ë‹¤ ì‘ì€ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì‘ì—… ìˆ˜ê°€ ëª¨ìë¼ë©´ í•´ë‹¹ ì‘ì—…ì„ ì¦‰ì‹œ ì‹¤í–‰í•˜ê³ , ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ í•´ë‹¹ ì‘ì—…ì„ ëŒ€ê¸°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">if</span> (activeCount &#x3C; concurrency) {\n  <span class=\"hljs-title function_\">task</span>();\n} <span class=\"hljs-keyword\">else</span> {\n  queue.<span class=\"hljs-title function_\">push</span>(task);\n}\n</code></pre>\n<p>ì „ì²´ ì½”ë“œ êµ¬í˜„ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">simulateLimit</span>(<span class=\"hljs-params\">concurrency</span>) {\n  <span class=\"hljs-keyword\">const</span> queue = [];\n  <span class=\"hljs-keyword\">let</span> activeCount = <span class=\"hljs-number\">0</span>;\n\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">fn, ...args</span>) {\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve, reject</span>) =></span> {\n      <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">task</span> = (<span class=\"hljs-params\"></span>) => {\n        activeCount++;\n        <span class=\"hljs-title function_\">fn</span>(...args).<span class=\"hljs-title function_\">then</span>(\n          <span class=\"hljs-function\">(<span class=\"hljs-params\">value</span>) =></span> {\n            <span class=\"hljs-title function_\">resolve</span>(value);\n            <span class=\"hljs-title function_\">next</span>();\n          },\n          <span class=\"hljs-function\">(<span class=\"hljs-params\">error</span>) =></span> {\n            <span class=\"hljs-title function_\">reject</span>(error);\n            <span class=\"hljs-title function_\">next</span>();\n          }\n        );\n      };\n\n      <span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">next</span> = (<span class=\"hljs-params\"></span>) => {\n        activeCount--;\n        <span class=\"hljs-keyword\">if</span> (queue.<span class=\"hljs-property\">length</span> > <span class=\"hljs-number\">0</span> &#x26;&#x26; activeCount &#x3C; concurrency) {\n          <span class=\"hljs-keyword\">const</span> nextTask = queue.<span class=\"hljs-title function_\">shift</span>();\n          <span class=\"hljs-title function_\">nextTask</span>();\n        }\n      };\n\n      <span class=\"hljs-keyword\">if</span> (activeCount &#x3C; concurrency) {\n        <span class=\"hljs-title function_\">task</span>();\n      } <span class=\"hljs-keyword\">else</span> {\n        queue.<span class=\"hljs-title function_\">push</span>(task);\n      }\n    });\n  };\n}\n</code></pre>\n<p>ì‹¤ì œë¡œ ì´ê²ƒì€ ìœ ëª…í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ p-limitì˜ ì†ŒìŠ¤ ì½”ë“œì…ë‹ˆë‹¤. ë” ì™„ë²½í•œ ì‚¬ìš©ë²•ê³¼ ì •ì œëœ ì½”ë“œë¥¼ ë³´ë ¤ë©´ npmì—ì„œ p-limitì„ ì°¸ì¡°í•´ì£¼ì„¸ìš”. ë°°ì›Œê°”ë‚˜ìš”?</p>\n<h1>ê°„ë‹¨í•˜ê³  ì‰¬ìš´ ì˜ì–´ë¡œ ğŸš€</h1>\n<p>In Plain English ì»¤ë®¤ë‹ˆí‹°ì˜ ì¼ì›ì´ ë˜ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:</p>\n<ul>\n<li>ì‘ê°€ë¥¼ ë°•ìˆ˜ë¡œ ì‘ì›í•˜ê³  íŒ”ë¡œìš°í•˜ê¸° ï¸ğŸ‘ï¸</li>\n<li>íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | Newsletter</li>\n<li>ë‹¤ë¥¸ í”Œë«í¼ì—ì„œ ë§Œë‚˜ê¸°: CoFeed | Differ</li>\n<li>PlainEnglish.ioì—ì„œ ë” ë§ì€ ì½˜í…ì¸  ë§Œë‚˜ë³´ê¸°</li>\n</ul>\n</body>\n</html>\n"},"__N_SSG":true}