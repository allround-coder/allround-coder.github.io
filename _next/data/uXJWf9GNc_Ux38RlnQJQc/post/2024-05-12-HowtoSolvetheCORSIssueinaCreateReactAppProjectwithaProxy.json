{"pageProps":{"post":{"title":"크리에이트 리액트 앱 프로젝트에서 프록시를 사용하여 CORS 문제 해결하기","description":"","date":"2024-05-12 20:40","slug":"2024-05-12-HowtoSolvetheCORSIssueinaCreateReactAppProjectwithaProxy","content":"\n\n<img src=\"/assets/img/2024-05-12-HowtoSolvetheCORSIssueinaCreateReactAppProjectwithaProxy_0.png\" />\n\n만약 여러분이 Create React App 프로젝트에서 페이지를 제공하는 도메인과 다른 도메인으로부터 fetch 요청을 보낸 적이 있다면, CORS(Cross-Origin Resource Sharing) 문제를 마주친 적이 있을 수도 있습니다.\n\nReact 앱에서 다른 도메인으로 요청을 보낼 때, 서버가 CORS를 명시적으로 허용하지 않는다면 브라우저가 요청을 차단할 수 있습니다.\n\n이 글에서는 프록시를 사용하여 Create React App 프로젝트에서 CORS 문제를 해결하는 방법을 살펴볼 것입니다. 프록시는 클라이언트와 대상 서버 사이에서 중계 역할을 하는 서버입니다. 프록시를 사용하면 클라이언트에서 대상 서버로의 요청을 프록시 서버를 통해 전달함으로써 CORS 문제를 우회할 수 있습니다.\n\n\n\nCreate React App 프로젝트에서 프록시를 사용하는 두 가지 방법이 있습니다: setupProxy.js 파일을 사용하거나 package.json 파일에 프록시를 추가하는 것입니다. 이 기사에서는 두 가지 방법을 모두 다룰 것입니다.\n\n# setupProxy.js 파일 사용\n\nsetupProxy.js 파일은 Create React App 프로젝트에서 프록시를 구성할 수 있는 특별한 파일입니다. CORS 문제를 해결하기 위해 setupProxy.js 파일을 사용하는 방법은 다음과 같습니다:\n\n- 프로젝트의 src 폴더에 setupProxy.js 파일을 생성합니다.\n- 아래 코드를 setupProxy.js 파일에 추가합니다:\n\n\n\n```js\nconst { createProxyMiddleware } = require('http-proxy-middleware');\n\nmodule.exports = function(app) {\n  app.use(\n    '/api',\n    createProxyMiddleware({\n      target: 'http://localhost:5000',\n      changeOrigin: true,\n    })\n  );\n};\n```\n\n이 코드는 /api 경로를 http://localhost:5000으로 전달하는 프록시 미들웨어를 설정합니다. 실제 서버의 URL로 바꿀 수 있습니다.\n\nchangeOrigin 옵션은 요청의 원래 호스트 이름을 볼 수 있도록 대상 서버를 활성화하는 데 true로 설정됩니다.\n\n- fetch 요청을 사용하여 /api 접두사를 업데이트하십시오:\n```\n\n\n\n```js\r\nfetch('/api/data')\n  .then(response => response.json())\n  .then(data => console.log(data))\n  .catch(error => console.error(error));\r\n```\n\n이렇게 하면 프록시를 통해 http://localhost:5000/data로 요청을 보낼 수 있습니다.\n\nsetupProxy.js 파일을 사용하여 React 앱에서 CORS 문제를 해결할 수 있습니다.\n\n# package.json 파일에 프록시 추가하기\n\n\n\nCreate React App 프로젝트의 package.json 파일에 프록시를 추가하여 CORS 문제를 해결할 수도 있어요. 아래는 해결 방법입니다:\n\n- 프로젝트의 루트 폴더에 있는 package.json 파일을 열어주세요.\n- 파일에 다음 라인을 추가하세요:\n\n```js\n\"proxy\": \"http://localhost:5000\"\n```\n\nhttp://localhost:5000을 서버의 실제 URL로 교체해주세요.\n\n\n\n- 파일을 저장하세요.\n- fetch 요청을 절대 URL 대신 상대 URL을 사용하도록 업데이트하세요:\n\n```js\nfetch('/data')\n  .then(response => response.json())\n  .then(data => console.log(data))\n  .catch(error => console.error(error));\n```\n\n이렇게 하면 프록시를 통해 http://localhost:5000/data로 요청이 전송됩니다.\n\npackage.json 파일에 프록시를 추가하여 별도의 setupProxy.js 설정 없이 React 앱에서 CORS 문제를 피할 수 있습니다.\n\n\n\n# 결론\n\n이 글에서는 프록시를 사용하여 Create React App 프로젝트에서 CORS 문제를 해결하는 방법에 대해 살펴보았습니다. setupProxy.js 파일을 사용하는 방법과 package.json 파일에 프록시를 추가하는 두 가지 방법을 다루었습니다. 프록시를 사용하면 클라이언트에서 요청을 프록시 서버를 통해 대상 서버로 전달하여 CORS 문제를 우회할 수 있습니다.\n\n# 참고 자료\n\n- MDN Web Docs: Cross-Origin Resource Sharing (CORS)\n- Create React App: Proxying API Requests in Development\n- http-proxy-middleware","ogImage":{"url":"/assets/img/2024-05-12-HowtoSolvetheCORSIssueinaCreateReactAppProjectwithaProxy_0.png"},"coverImage":"/assets/img/2024-05-12-HowtoSolvetheCORSIssueinaCreateReactAppProjectwithaProxy_0.png","tag":["Tech"],"readingTime":3},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h1: \"h1\",\n    ul: \"ul\",\n    li: \"li\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(\"img\", {\n      src: \"/assets/img/2024-05-12-HowtoSolvetheCORSIssueinaCreateReactAppProjectwithaProxy_0.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"만약 여러분이 Create React App 프로젝트에서 페이지를 제공하는 도메인과 다른 도메인으로부터 fetch 요청을 보낸 적이 있다면, CORS(Cross-Origin Resource Sharing) 문제를 마주친 적이 있을 수도 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"React 앱에서 다른 도메인으로 요청을 보낼 때, 서버가 CORS를 명시적으로 허용하지 않는다면 브라우저가 요청을 차단할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 글에서는 프록시를 사용하여 Create React App 프로젝트에서 CORS 문제를 해결하는 방법을 살펴볼 것입니다. 프록시는 클라이언트와 대상 서버 사이에서 중계 역할을 하는 서버입니다. 프록시를 사용하면 클라이언트에서 대상 서버로의 요청을 프록시 서버를 통해 전달함으로써 CORS 문제를 우회할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Create React App 프로젝트에서 프록시를 사용하는 두 가지 방법이 있습니다: setupProxy.js 파일을 사용하거나 package.json 파일에 프록시를 추가하는 것입니다. 이 기사에서는 두 가지 방법을 모두 다룰 것입니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"setupProxy.js 파일 사용\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"setupProxy.js 파일은 Create React App 프로젝트에서 프록시를 구성할 수 있는 특별한 파일입니다. CORS 문제를 해결하기 위해 setupProxy.js 파일을 사용하는 방법은 다음과 같습니다:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"프로젝트의 src 폴더에 setupProxy.js 파일을 생성합니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"아래 코드를 setupProxy.js 파일에 추가합니다:\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" { createProxyMiddleware } = \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"require\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'http-proxy-middleware'\"\n        }), \");\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"module\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"exports\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"function\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"app\"\n        }), \") {\\n  app.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"use\"\n        }), \"(\\n    \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'/api'\"\n        }), \",\\n    \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"createProxyMiddleware\"\n        }), \"({\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"target\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'http://localhost:5000'\"\n        }), \",\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"changeOrigin\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \",\\n    })\\n  );\\n};\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 코드는 /api 경로를 http://localhost:5000으로 전달하는 프록시 미들웨어를 설정합니다. 실제 서버의 URL로 바꿀 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"changeOrigin 옵션은 요청의 원래 호스트 이름을 볼 수 있도록 대상 서버를 활성화하는 데 true로 설정됩니다.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"fetch 요청을 사용하여 /api 접두사를 업데이트하십시오:\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"\\n\\n\\n```js\\r\\nfetch('/api/data')\\n  .then(response => response.json())\\n  .then(data => console.log(data))\\n  .catch(error => console.error(error));\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이렇게 하면 프록시를 통해 http://localhost:5000/data로 요청을 보낼 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"setupProxy.js 파일을 사용하여 React 앱에서 CORS 문제를 해결할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"package.json 파일에 프록시 추가하기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Create React App 프로젝트의 package.json 파일에 프록시를 추가하여 CORS 문제를 해결할 수도 있어요. 아래는 해결 방법입니다:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"프로젝트의 루트 폴더에 있는 package.json 파일을 열어주세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"파일에 다음 라인을 추가하세요:\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"proxy\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"http://localhost:5000\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"http://localhost:5000을 서버의 실제 URL로 교체해주세요.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"파일을 저장하세요.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"fetch 요청을 절대 URL 대신 상대 URL을 사용하도록 업데이트하세요:\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"fetch\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'/data'\"\n        }), \")\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"then\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"response\"\n          }), \" =>\"]\n        }), \" response.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"json\"\n        }), \"())\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"then\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"data\"\n          }), \" =>\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"console\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"log\"\n        }), \"(data))\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"catch\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"error\"\n          }), \" =>\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"console\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"error\"\n        }), \"(error));\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이렇게 하면 프록시를 통해 http://localhost:5000/data로 요청이 전송됩니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"package.json 파일에 프록시를 추가하여 별도의 setupProxy.js 설정 없이 React 앱에서 CORS 문제를 피할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"결론\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 글에서는 프록시를 사용하여 Create React App 프로젝트에서 CORS 문제를 해결하는 방법에 대해 살펴보았습니다. setupProxy.js 파일을 사용하는 방법과 package.json 파일에 프록시를 추가하는 두 가지 방법을 다루었습니다. 프록시를 사용하면 클라이언트에서 요청을 프록시 서버를 통해 대상 서버로 전달하여 CORS 문제를 우회할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"참고 자료\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"MDN Web Docs: Cross-Origin Resource Sharing (CORS)\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Create React App: Proxying API Requests in Development\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"http-proxy-middleware\"\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true}