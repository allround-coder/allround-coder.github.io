<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>NestJS, TCP ë° Typescriptë¡œ Microservices êµ¬ì¶•í•˜ê¸° | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="NestJS, TCP ë° Typescriptë¡œ Microservices êµ¬ì¶•í•˜ê¸° | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="NestJS, TCP ë° Typescriptë¡œ Microservices êµ¬ì¶•í•˜ê¸° | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript" data-gatsby-head="true"/><meta name="twitter:title" content="NestJS, TCP ë° Typescriptë¡œ Microservices êµ¬ì¶•í•˜ê¸° | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-20 00:09" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_buildManifest.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">NestJS, TCP ë° Typescriptë¡œ Microservices êµ¬ì¶•í•˜ê¸°</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="NestJS, TCP ë° Typescriptë¡œ Microservices êµ¬ì¶•í•˜ê¸°" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 20, 2024</span><span class="posts_reading_time__f7YPP">11<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h2>ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ì„œë¡œ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ë²•</h2>
<p><img src="/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_0.png" alt="ì´ë¯¸ì§€"></p>
<p>í”„ë¡œì íŠ¸ê°€ ì ì  ì»¤ì§€ë©´ì„œ ë”ìš± ê³ ê¸‰ ì•„í‚¤í…ì²˜ê°€ í•„ìš”í•´ì§‘ë‹ˆë‹¤. ê·¸ë˜ì„œ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë¡œì„œ, í˜„ëŒ€ì ì´ê³  ì¸ê¸° ìˆëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ì†Œê°œí•˜ê³ ì í•©ë‹ˆë‹¤. ì´ ì•„í‚¤í…ì²˜ëŠ” SOA (Service Oriented Architecture) ê°œë…ì„ ë”°ë¦…ë‹ˆë‹¤.</p>
<p>ì´ ê¸€ì—ì„œëŠ” ë‹¨ì¼ì²´ì™€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ì°¨ì´ë¥¼ ì´ì•¼ê¸°í•˜ê³ , NestJS, TCP ë° Typescriptë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ë“œë¦¬ë ¤ê³  í•©ë‹ˆë‹¤. ë¨¼ì € ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<div class="content-ad"></div>
<h1>ë¯¸í¬ë¡œì„œë¹„ìŠ¤ë€ ë¬´ì—‡ì¸ê°€</h1>
<p>ë¯¸í¬ë¡œì„œë¹„ìŠ¤ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì˜ ì•„í‚¤í…ì²˜ì  ê´€ì ìœ¼ë¡œ, ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì‘ê³  ë…ë¦½ì ì¸ ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ì„œë¡œ ì •ì˜ëœ APIë¥¼ í†µí•´ í†µì‹ í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ê° ì„œë¹„ìŠ¤ëŠ” íŠ¹ì • ì‘ì—…ì´ë‚˜ ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œë¥¼ ì§€ì›í•˜ë©° ë‹¤ë¥¸ ëª¨ë“ˆ ë° ì„œë¹„ìŠ¤ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í™•ì¥í•˜ê³  ë” ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆì–´ í˜ì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë©° ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì‹œì¥ì— ë¹ ë¥´ê²Œ ë‚´ë†“ì„ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</p>
<p>ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ì™€ ë¯¸í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ì£¼ìš” ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ìš”? ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ì—ì„œëŠ” ëª¨ë“  ê¸°ëŠ¥ê³¼ ì„œë¹„ìŠ¤ê°€ ê²°í•©ë¼ ë‹¨ì¼ ë‹¨ìœ„ë¡œ ì‘ë™í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë¯¸í¬ë¡œì„œë¹„ìŠ¤ì—ì„œëŠ” ê¸°ë°˜ ë¡œì§ì„ ì„œë¡œ ë‹¤ë¥¸ ì‘ì—…ì´ë‚˜ ì„œë¹„ìŠ¤ë¡œ ë¶„í•´í•˜ì—¬ ê°œë³„ì ìœ¼ë¡œ ê°œë°œí•˜ê³ , ë°°í¬í•˜ë©° APIë¥¼ í†µí•´ ë…¸ì¶œí•˜ëŠ” ê²ƒì´ íŠ¹ì§•ì…ë‹ˆë‹¤.</p>
<p>ë” ë‚˜ì€ ì´í•´ë¥¼ ìœ„í•´ ì €í¬ëŠ” í•¨ê»˜ NestJSì—ì„œ ë¯¸í¬ë¡œì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ë¥¼ ê°œë°œí•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
<div class="content-ad"></div>
<h1>í”„ë¡œì íŠ¸ ì„¤ì •í•˜ê¸°</h1>
<p>ì‹œì‘í•˜ê¸° ì „ì—, ì €í¬ í”„ë¡œì íŠ¸ì˜ ë‘ ê°€ì§€ ì£¼ìš” ì¸¡ë©´ì„ ê°•ì¡°í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤:</p>
<ul>
<li>auth-microservice: ì‚¬ìš©ì ê¶Œí•œì„ ê´€ë¦¬í•˜ëŠ” ì¸ì¦ ì„œë¹„ìŠ¤</li>
<li>API Gateway: í´ë¼ì´ì–¸íŠ¸ì™€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì‚¬ì´ì— ìœ„ì¹˜í•˜ë©° HTTP API ì—”ë“œí¬ì¸íŠ¸ë¡œë¶€í„° ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì„œë¹„ìŠ¤</li>
</ul>
<p>ê°„ëµíˆ ì„¤ëª…í•˜ë©´, ì‚¬ìš©ìê°€ ìê²© ì¦ëª…ìœ¼ë¡œ /api/login ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ë¡œê·¸ì¸í•˜ë©´ API ê²Œì´íŠ¸ì›¨ì´ì— ì—°ê²°ë©ë‹ˆë‹¤. API ê²Œì´íŠ¸ì›¨ì´ëŠ” ê·¸ëŸ° ë‹¤ìŒ ìš”ì²­-ì‘ë‹µ ìŠ¤íƒ€ì¼ì˜ ë©”ì‹œì§€ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì™€ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì €í¬ ì•±ì´ ì‘ë™í•  ê²ƒì…ë‹ˆë‹¤.</p>
<div class="content-ad"></div>
<p>ì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•  ì˜ˆì •ì´ë¯€ë¡œ ì—¬ëŸ¬ ì•±ê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¬í•¨ëœ ë‹¨ì¼ ë²„ì „ ê´€ë¦¬ ì½”ë“œ ì €ì¥ì†Œì¸ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ë¥¼ ê°€ì§€ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ëª¨ë…¸-ì €ì¥ì†Œì—ì„œ ì›¹ ì•± ë° ì„œë¹„ìŠ¤ë¥¼ ë¹Œë“œí•˜ê³  í™•ì¥í•  ìˆ˜ ìˆëŠ” Nx ë„êµ¬ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>ìš°ì„  ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ ë´…ì‹œë‹¤:</p>
<pre><code class="hljs language-js">npx create-nx-workspace nestjs-microservices --preset=nest
</code></pre>
<p>ì•± ì´ë¦„ì„ api-gatewayë¡œ ì§€ì •í•´ì£¼ì„¸ìš”.</p>
<div class="content-ad"></div>
<img src="/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_1.png">
<p>ì´ì œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ í”„ë¡œì íŠ¸ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•´ë´…ì‹œë‹¤:</p>
<pre><code class="hljs language-js">cd nestjs-microservices
npm i @nestjs/microservices <span class="hljs-keyword">class</span>-validator <span class="hljs-keyword">class</span>-transformer
</code></pre>
<h1>Auth ëª¨ë“ˆ ì¶”ê°€í•˜ê¸°</h1>
<div class="content-ad"></div>
<p>ìš°ë¦¬ í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ì—ˆìœ¼ë¯€ë¡œ, nxëŠ” ì´ë¯¸ API Gateway ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ì œ API Gateway ì•±ì—ì„œ ì¸ì¦ ëª¨ë“ˆì„ ë§Œë“¤ì–´ì„œ ì¸ì¦ ê´€ë ¨ ìš”ì²­ì„ ì²˜ë¦¬í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>ì‚¬ìš©ìê°€ ì•±ì— ìš”ì²­ì„ ë³´ë‚´ë©´ API Gatewayê°€ ìš”ì²­ì„ ë°›ì•„ì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë™ì¼í•œ ë°ì´í„° ìœ í˜•ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì¤‘ë³µë˜ëŠ” ì½”ë“œë¥¼ í”¼í•˜ê¸° ìœ„í•´ ëª¨ë†€ë¦¬í¬ ë‚´ì—ì„œ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ì½”ë“œë¥¼ ì—¬ê¸°ì €ê¸° ì¤‘ë³µ ìƒì„±í•˜ì§€ ì•Šê³  ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">nx g @nx/<span class="hljs-attr">nest</span>:lib shared
</code></pre>
<p>ì´ì œ dto í´ë”ë¥¼ ë§Œë“¤ì–´ì„œ create-user.dto.ts íŒŒì¼ì„ ì¶”ê°€í•´ ì£¼ì„¸ìš”:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-ts"><span class="hljs-comment">// shared/src/lib/dto/create-user.dto.ts</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IsNotEmpty</span>, <span class="hljs-title class_">IsString</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'class-validator'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateUserDto</span> {
  <span class="hljs-meta">@IsString</span>()
  <span class="hljs-meta">@IsNotEmpty</span>()
  <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-meta">@IsNotEmpty</span>()
  <span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<p>ë˜í•œ tsconfig.base.jsonì— ê²½ë¡œ í•­ëª©ì„ ì¶”ê°€í•˜ê³  ì ˆëŒ€ ê²½ë¡œë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  ...
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    ...
    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@nestjs-microservices/shared"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"shared/src/index.ts"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  ...
<span class="hljs-punctuation">}</span>
</code></pre>
<p>NestJSëŠ” ê¸°ë³¸ TCP ì „ì†¡ ê³„ì¸µì„ ì‚¬ìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ê°„ì— ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. NestJSëŠ” microservice ì „ì†¡ìë¥¼ ì„¤ëª…í•˜ëŠ” ê°ì²´ ë°°ì—´ì„ ì¸ìë¡œë°›ëŠ” static register() ë©”ì„œë“œë¥¼ ë…¸ì¶œí•˜ëŠ” ClientsModuleì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ìŒ ì½”ë“œ ë¼ì¸ì„ ì‚¬ìš©í•˜ì—¬ auth.service.tsë¥¼ ì¶”ê°€í•˜ê³  AUTH_MICROSERVICEë¥¼ ë“±ë¡í•´ ë³´ê² ìŠµë‹ˆë‹¤:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">// apps/api-gateway/src/auth/auth.module.ts</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ClientsModule</span>, <span class="hljs-title class_">Transport</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/microservices'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./auth.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./auth.service'</span>;

@<span class="hljs-title class_">Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">ClientsModule</span>.<span class="hljs-title function_">register</span>([
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'AUTH_MICROSERVICE'</span>,
        <span class="hljs-attr">transport</span>: <span class="hljs-title class_">Transport</span>.<span class="hljs-property">TCP</span>,
        <span class="hljs-attr">options</span>: {
          <span class="hljs-attr">host</span>: <span class="hljs-string">'localhost'</span>,
          <span class="hljs-attr">port</span>: <span class="hljs-number">3001</span>,
        },
      },
    ]),
  ],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AuthService</span>],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AuthController</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> {}
</code></pre>
<p>ìœ„ ì½”ë“œì—ì„œ ê° transporterëŠ” name ì†ì„±, ì„ íƒì ì¸ transport ì†ì„± (ê¸°ë³¸ê°’ì€ Transport.TCP), ê·¸ë¦¬ê³  ì„ íƒì ì¸ transporterì— íŠ¹í™”ëœ options ì†ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>ëª¨ë“ˆì„ importí•œ í›„ì—ëŠ” @Inject() ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ auth.service.ts íŒŒì¼ì—ì„œ AUTH_MICROSERVICE transporter ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±ëœ ClientProxy ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// apps/api-gateway/src/auth/auth.service.ts</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Inject</span>, <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ClientProxy</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/microservices'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span>, <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs-microservices/shared'</span>;

@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    @Inject(<span class="hljs-string">'AUTH_MICROSERVICE'</span>) private readonly authClient: ClientProxy
  </span>) {}

  <span class="hljs-title function_">getUser</span>(<span class="hljs-params">createUserDto: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authClient</span>.<span class="hljs-property">send</span>&#x3C;<span class="hljs-title class_">User</span>, <span class="hljs-title class_">CreateUserDto</span>>(<span class="hljs-string">'get_user'</span>, createUserDto);
  }

  <span class="hljs-title function_">createUser</span>(<span class="hljs-params">createUserDto: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authClient</span>.<span class="hljs-property">send</span>&#x3C;<span class="hljs-title class_">User</span>, <span class="hljs-title class_">CreateUserDto</span>>(<span class="hljs-string">'create_user'</span>, createUserDto);
  }
}
</code></pre>
<div class="content-ad"></div>
<p>ìœ„ì—ì„œ ë³´ë“¯ì´, get_user ë˜ëŠ” create_user íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ê±°ë‚˜ ë“±ë¡í•  ë•Œ ì´ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>send ë©”ì„œë“œëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ê³  ì‘ë‹µìœ¼ë¡œ Observableì„ ë°˜í™˜í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‘ ê°€ì§€ ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:</p>
<ul>
<li>pattern â€” @MessagePattern() ë°ì½”ë ˆì´í„°ì—ì„œ ì •ì˜ëœ ê²ƒ ì¤‘ í•˜ë‚˜</li>
<li>payload â€” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì— ì „ë‹¬í•˜ë ¤ëŠ” ë©”ì‹œì§€</li>
</ul>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, login ë° signupì„ ìœ„í•œ ë‘ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê°–ëŠ” AuthController í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">// apps/api-gateway/src/auth/auth.controller.ts</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Post</span>, <span class="hljs-title class_">BadRequestException</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { lastValueFrom } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span>, <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs-microservices/shared'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./auth.service'</span>;

@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'auth'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private readonly authService: AuthService</span>) {}

  @<span class="hljs-title class_">Post</span>(<span class="hljs-string">'login'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">@Body() createUserDto: CreateUserDto</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">lastValueFrom</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">getUser</span>(createUserDto), {
      <span class="hljs-attr">defaultValue</span>: <span class="hljs-literal">undefined</span>,
    });
    <span class="hljs-keyword">if</span> (!user) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(<span class="hljs-string">'Invalid credentials'</span>);
    }

    <span class="hljs-keyword">const</span> isMatch = user.<span class="hljs-property">password</span> === createUserDto.<span class="hljs-property">password</span>;
    <span class="hljs-keyword">if</span> (!isMatch) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(<span class="hljs-string">'Incorrect password'</span>);
    }

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`User <span class="hljs-subst">${user.username}</span> successfully logged in.`</span>);

    <span class="hljs-keyword">return</span> user;
  }

  @<span class="hljs-title class_">Post</span>(<span class="hljs-string">'signup'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">signup</span>(<span class="hljs-params">@Body() createUserDto: CreateUserDto</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">lastValueFrom</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">getUser</span>(createUserDto), {
      <span class="hljs-attr">defaultValue</span>: <span class="hljs-literal">undefined</span>,
    });
    <span class="hljs-keyword">if</span> (user) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestException</span>(
        <span class="hljs-string">`Username <span class="hljs-subst">${createUserDto.username}</span> already exists!`</span>
      );
    }

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">authService</span>.<span class="hljs-title function_">createUser</span>(createUserDto);
  }
}
</code></pre>
<p>ì•ì„œ ì–¸ê¸‰í–ˆë“¯ì´, getUser ë° createUser ì¸ì¦ í´ë¼ì´ì–¸íŠ¸ ë©”ì„œë“œëŠ” Obserableì„ ë°˜í™˜í•˜ë¯€ë¡œ ë©”ì‹œì§€ê°€ ì „ì†¡ë˜ê¸° ì „ì— ëª…ì‹œì ìœ¼ë¡œ êµ¬ë…í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ rxjsì—ì„œ ê°€ì ¸ì˜¨ lastValueFrom ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Observableì„ Promiseë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1>ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìƒì„±</h1>
<p>ì´ì œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ ì²« ë²ˆì§¸ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">nx g @nx/<span class="hljs-attr">nest</span>:app auth-microservice
</code></pre>
<p>ì•ˆë…•í•˜ì„¸ìš”! auth-microservice ì•±ì˜ main.ts íŒŒì¼ ë‚´ bootstrap() í•¨ìˆ˜ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ NestFactory.createMicroservice() ë©”ì†Œë“œë¡œ ì—…ë°ì´íŠ¸í•´ë³´ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// apps/auth-microservice/src/main.ts</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Logger</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Transport</span>, <span class="hljs-title class_">MicroserviceOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/microservices'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app/app.module'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-property">createMicroservice</span>&#x3C;<span class="hljs-title class_">MicroserviceOptions</span>>(
    <span class="hljs-title class_">AppModule</span>,
    {
      <span class="hljs-attr">transport</span>: <span class="hljs-title class_">Transport</span>.<span class="hljs-property">TCP</span>,
      <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">host</span>: <span class="hljs-string">'localhost'</span>,
        <span class="hljs-attr">port</span>: <span class="hljs-number">3001</span>,
      },
    }
  );

  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>();

  <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸš€ Auth microservice is listening'</span>);
}

<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<p>NestFactory í´ë˜ìŠ¤ì˜ createMicroservice() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ì£¼ ê°„ë‹¨í•˜ì£ ! ë§Œì•½ ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ë„ì›€ì´ í•„ìš”í•˜ì‹œë‹¤ë©´ ì–¸ì œë“ ì§€ ë¬¼ì–´ì£¼ì„¸ìš”! ğŸ˜Šâœ¨</p>
<div class="content-ad"></div>
<p>ê·¸ëŸ¬ë©´ ì‚¬ìš©ì ì—”í‹°í‹°ë¥¼ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ìƒì„±í•˜ì—¬ UsersRepository í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•  ê²ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì‚¬ìš©ìë¥¼ ê²€ìƒ‰í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// shared/src/lib/entities/user.entity.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
  id?: number;
  <span class="hljs-attr">username</span>: string;
  <span class="hljs-attr">password</span>: string;
}
</code></pre>
<p>ìš°ë¦¬ëŠ” ì–´ë–¤ ë°ì´í„°ë² ì´ìŠ¤ë„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©° ê°„ê²°í•¨ì„ ìœ„í•´ ì´ ë°ëª¨ì—ì„œëŠ” ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•  ê²ë‹ˆë‹¤. UserRepository í´ë˜ìŠ¤ë¥¼ í¬í•¨í•œ ê°„ë‹¨í•œ user.repository.ts íŒŒì¼ì„ ë§Œë“¤ì–´ë³´ì£ .</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// apps/auth-microservice/src/app/user.repository.ts</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span>, <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs-microservices/shared'</span>;

@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> {
  private <span class="hljs-attr">users</span>: <span class="hljs-title class_">User</span>[] = [];

  <span class="hljs-title function_">save</span>(<span class="hljs-attr">user</span>: <span class="hljs-title class_">CreateUserDto</span>): <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">const</span> newUser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
    newUser.<span class="hljs-property">id</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-property">length</span> + <span class="hljs-number">1</span>;
    newUser.<span class="hljs-property">username</span> = user.<span class="hljs-property">username</span>;
    newUser.<span class="hljs-property">password</span> = user.<span class="hljs-property">password</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">push</span>(newUser);
    <span class="hljs-keyword">return</span> newUser;
  }

  <span class="hljs-title function_">findOne</span>(<span class="hljs-attr">username</span>: string): <span class="hljs-title class_">User</span> | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =></span> user.<span class="hljs-property">username</span> === username);
  }
}
</code></pre>
<div class="content-ad"></div>
<p>ì´ì œ createUser() ë° getUser()ë¥¼ app.service.tsì—ì„œ UserRepository ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³  ì°¾ëŠ” ë©”ì†Œë“œë¥¼ ì¶”ê°€í•  ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// apps/auth-microservice/src/app/app.service.ts</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span>, <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs-microservices/shared'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserRepository</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.repository'</span>;

@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private readonly userRepository: UserRepository</span>) {}

  <span class="hljs-title function_">createUser</span>(<span class="hljs-attr">newUser</span>: <span class="hljs-title class_">CreateUserDto</span>): <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">save</span>(newUser);
  }

  <span class="hljs-title function_">getUser</span>(<span class="hljs-attr">username</span>: string): <span class="hljs-title class_">User</span> | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">findOne</span>(username);
  }
}
</code></pre>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, @nestjs/microservices íŒ¨í‚¤ì§€ì—ì„œ ê°€ì ¸ì˜¨ @MessagePattern() ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­-ì‘ë‹µ íŒ¨ëŸ¬ë‹¤ì„ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ ë©”ì†Œë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// apps/auth-microservice/src/app/app.controller.ts</span>

@<span class="hljs-title class_">Controller</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private readonly appService: AppService</span>) {}

  @<span class="hljs-title class_">MessagePattern</span>(<span class="hljs-string">'get_user'</span>) <span class="hljs-comment">// get_user ë©”ì‹œì§€ íŒ¨í„´ì„ ìˆ˜ì‹  ëŒ€ê¸°</span>
  <span class="hljs-title function_">handleGetUser</span>(<span class="hljs-params">user: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">appService</span>.<span class="hljs-title function_">getUser</span>(user.<span class="hljs-property">username</span>);
  }

  @<span class="hljs-title class_">MessagePattern</span>(<span class="hljs-string">'create_user'</span>) <span class="hljs-comment">// create_user ë©”ì‹œì§€ íŒ¨í„´ì„ ìˆ˜ì‹  ëŒ€ê¸°</span>
  <span class="hljs-title function_">handleCreateUser</span>(<span class="hljs-params">newUser: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">appService</span>.<span class="hljs-title function_">createUser</span>(newUser);
  }
}
</code></pre>
<div class="content-ad"></div>
<p>ìœ„ ì½”ë“œì—ì„œ handleGetUser() ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ëŠ” get_user ë©”ì‹œì§€ íŒ¨í„´ê³¼ ì¼ì¹˜í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•©ë‹ˆë‹¤. ì´ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì „ë‹¬ëœ CreateUserDto ìœ í˜•ì˜ ì‚¬ìš©ìë¥¼ ì¸ìë¡œ ì·¨í•©ë‹ˆë‹¤.</p>
<h1>ì„œë¹„ìŠ¤ ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸</h1>
<p>ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ê°œë³„ì ìœ¼ë¡œ ë³„ë„ì˜ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">nx serve api-gateway
nx serve auth-microservice
</code></pre>
<div class="content-ad"></div>
<p>ì•±ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ Postmanì´ë‚˜ ë‹¤ë¥¸ API í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.</p>
<h2>ì˜ëª»ëœ ìê²© ì¦ëª…ìœ¼ë¡œ ë¡œê·¸ì¸</h2>
<img src="/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_2.png">
<h2>ê°€ì…</h2>
<div class="content-ad"></div>
<img src="/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_3.png">
<h2>ë¡œê·¸ì¸</h2>
<img src="/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_4.png">
<h2>ë™ì¼í•œ ì‚¬ìš©ì ì´ë¦„ìœ¼ë¡œ ê°€ì…</h2>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_5.png" alt="ì´ë¯¸ì§€"></p>
<h1>ê²°ë¡ </h1>
<p>ì½”ë“œë¥¼ ëª¨ë‘ í™•ì¸í•˜ë ¤ë©´ GitHub ë§í¬ë¥¼ í´ë¦­í•˜ì„¸ìš”.</p>
<p>ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ â€” ì´ ê¸€ì´ ë„ì›€ì´ ë˜ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ì¦ê±°ìš´ ì½”ë”© ë˜ì„¸ìš”!</p>
<div class="content-ad"></div>
<h1>ìì›</h1>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"NestJS, TCP ë° Typescriptë¡œ Microservices êµ¬ì¶•í•˜ê¸°","description":"","date":"2024-06-20 00:09","slug":"2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript","content":"\n\n## ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ì„œë¡œ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ë²•\n\n![ì´ë¯¸ì§€](/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_0.png)\n\ní”„ë¡œì íŠ¸ê°€ ì ì  ì»¤ì§€ë©´ì„œ ë”ìš± ê³ ê¸‰ ì•„í‚¤í…ì²˜ê°€ í•„ìš”í•´ì§‘ë‹ˆë‹¤. ê·¸ë˜ì„œ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë¡œì„œ, í˜„ëŒ€ì ì´ê³  ì¸ê¸° ìˆëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ì†Œê°œí•˜ê³ ì í•©ë‹ˆë‹¤. ì´ ì•„í‚¤í…ì²˜ëŠ” SOA (Service Oriented Architecture) ê°œë…ì„ ë”°ë¦…ë‹ˆë‹¤.\n\nì´ ê¸€ì—ì„œëŠ” ë‹¨ì¼ì²´ì™€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ì°¨ì´ë¥¼ ì´ì•¼ê¸°í•˜ê³ , NestJS, TCP ë° Typescriptë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ë“œë¦¬ë ¤ê³  í•©ë‹ˆë‹¤. ë¨¼ì € ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# ë¯¸í¬ë¡œì„œë¹„ìŠ¤ë€ ë¬´ì—‡ì¸ê°€\n\në¯¸í¬ë¡œì„œë¹„ìŠ¤ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì˜ ì•„í‚¤í…ì²˜ì  ê´€ì ìœ¼ë¡œ, ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì‘ê³  ë…ë¦½ì ì¸ ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ì„œë¡œ ì •ì˜ëœ APIë¥¼ í†µí•´ í†µì‹ í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ê° ì„œë¹„ìŠ¤ëŠ” íŠ¹ì • ì‘ì—…ì´ë‚˜ ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œë¥¼ ì§€ì›í•˜ë©° ë‹¤ë¥¸ ëª¨ë“ˆ ë° ì„œë¹„ìŠ¤ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í™•ì¥í•˜ê³  ë” ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆì–´ í˜ì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë©° ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì‹œì¥ì— ë¹ ë¥´ê²Œ ë‚´ë†“ì„ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\n\nëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ì™€ ë¯¸í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ì£¼ìš” ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ìš”? ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ì—ì„œëŠ” ëª¨ë“  ê¸°ëŠ¥ê³¼ ì„œë¹„ìŠ¤ê°€ ê²°í•©ë¼ ë‹¨ì¼ ë‹¨ìœ„ë¡œ ì‘ë™í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë¯¸í¬ë¡œì„œë¹„ìŠ¤ì—ì„œëŠ” ê¸°ë°˜ ë¡œì§ì„ ì„œë¡œ ë‹¤ë¥¸ ì‘ì—…ì´ë‚˜ ì„œë¹„ìŠ¤ë¡œ ë¶„í•´í•˜ì—¬ ê°œë³„ì ìœ¼ë¡œ ê°œë°œí•˜ê³ , ë°°í¬í•˜ë©° APIë¥¼ í†µí•´ ë…¸ì¶œí•˜ëŠ” ê²ƒì´ íŠ¹ì§•ì…ë‹ˆë‹¤.\n\në” ë‚˜ì€ ì´í•´ë¥¼ ìœ„í•´ ì €í¬ëŠ” í•¨ê»˜ NestJSì—ì„œ ë¯¸í¬ë¡œì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ë¥¼ ê°œë°œí•  ì˜ˆì •ì…ë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# í”„ë¡œì íŠ¸ ì„¤ì •í•˜ê¸°\n\nì‹œì‘í•˜ê¸° ì „ì—, ì €í¬ í”„ë¡œì íŠ¸ì˜ ë‘ ê°€ì§€ ì£¼ìš” ì¸¡ë©´ì„ ê°•ì¡°í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤:\n\n- auth-microservice: ì‚¬ìš©ì ê¶Œí•œì„ ê´€ë¦¬í•˜ëŠ” ì¸ì¦ ì„œë¹„ìŠ¤\n- API Gateway: í´ë¼ì´ì–¸íŠ¸ì™€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì‚¬ì´ì— ìœ„ì¹˜í•˜ë©° HTTP API ì—”ë“œí¬ì¸íŠ¸ë¡œë¶€í„° ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì„œë¹„ìŠ¤\n\nê°„ëµíˆ ì„¤ëª…í•˜ë©´, ì‚¬ìš©ìê°€ ìê²© ì¦ëª…ìœ¼ë¡œ /api/login ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ë¡œê·¸ì¸í•˜ë©´ API ê²Œì´íŠ¸ì›¨ì´ì— ì—°ê²°ë©ë‹ˆë‹¤. API ê²Œì´íŠ¸ì›¨ì´ëŠ” ê·¸ëŸ° ë‹¤ìŒ ìš”ì²­-ì‘ë‹µ ìŠ¤íƒ€ì¼ì˜ ë©”ì‹œì§€ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì™€ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì €í¬ ì•±ì´ ì‘ë™í•  ê²ƒì…ë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•  ì˜ˆì •ì´ë¯€ë¡œ ì—¬ëŸ¬ ì•±ê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¬í•¨ëœ ë‹¨ì¼ ë²„ì „ ê´€ë¦¬ ì½”ë“œ ì €ì¥ì†Œì¸ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ë¥¼ ê°€ì§€ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ëª¨ë…¸-ì €ì¥ì†Œì—ì„œ ì›¹ ì•± ë° ì„œë¹„ìŠ¤ë¥¼ ë¹Œë“œí•˜ê³  í™•ì¥í•  ìˆ˜ ìˆëŠ” Nx ë„êµ¬ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\n\nìš°ì„  ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ ë´…ì‹œë‹¤:\n\n```js\nnpx create-nx-workspace nestjs-microservices --preset=nest\n```\n\nì•± ì´ë¦„ì„ api-gatewayë¡œ ì§€ì •í•´ì£¼ì„¸ìš”.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_1.png\" /\u003e\n\nì´ì œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ í”„ë¡œì íŠ¸ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•´ë´…ì‹œë‹¤:\n\n```js\ncd nestjs-microservices\nnpm i @nestjs/microservices class-validator class-transformer\n```\n\n# Auth ëª¨ë“ˆ ì¶”ê°€í•˜ê¸°\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nìš°ë¦¬ í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ì—ˆìœ¼ë¯€ë¡œ, nxëŠ” ì´ë¯¸ API Gateway ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ì œ API Gateway ì•±ì—ì„œ ì¸ì¦ ëª¨ë“ˆì„ ë§Œë“¤ì–´ì„œ ì¸ì¦ ê´€ë ¨ ìš”ì²­ì„ ì²˜ë¦¬í•  ê²ƒì…ë‹ˆë‹¤.\n\nì‚¬ìš©ìê°€ ì•±ì— ìš”ì²­ì„ ë³´ë‚´ë©´ API Gatewayê°€ ìš”ì²­ì„ ë°›ì•„ì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë™ì¼í•œ ë°ì´í„° ìœ í˜•ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì¤‘ë³µë˜ëŠ” ì½”ë“œë¥¼ í”¼í•˜ê¸° ìœ„í•´ ëª¨ë†€ë¦¬í¬ ë‚´ì—ì„œ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ì½”ë“œë¥¼ ì—¬ê¸°ì €ê¸° ì¤‘ë³µ ìƒì„±í•˜ì§€ ì•Šê³  ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:\n\n```js\nnx g @nx/nest:lib shared\n```\n\nì´ì œ dto í´ë”ë¥¼ ë§Œë“¤ì–´ì„œ create-user.dto.ts íŒŒì¼ì„ ì¶”ê°€í•´ ì£¼ì„¸ìš”:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```ts\n// shared/src/lib/dto/create-user.dto.ts\n\nimport { IsNotEmpty, IsString } from 'class-validator';\n\nexport class CreateUserDto {\n  @IsString()\n  @IsNotEmpty()\n  username: string;\n\n  @IsNotEmpty()\n  password: string;\n}\n```\n\në˜í•œ tsconfig.base.jsonì— ê²½ë¡œ í•­ëª©ì„ ì¶”ê°€í•˜ê³  ì ˆëŒ€ ê²½ë¡œë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```json\n{\n  ...\n  \"compilerOptions\": {\n    ...\n    \"paths\": {\n      \"@nestjs-microservices/shared\": [\"shared/src/index.ts\"]\n    }\n  },\n  ...\n}\n```\n\nNestJSëŠ” ê¸°ë³¸ TCP ì „ì†¡ ê³„ì¸µì„ ì‚¬ìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ê°„ì— ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. NestJSëŠ” microservice ì „ì†¡ìë¥¼ ì„¤ëª…í•˜ëŠ” ê°ì²´ ë°°ì—´ì„ ì¸ìë¡œë°›ëŠ” static register() ë©”ì„œë“œë¥¼ ë…¸ì¶œí•˜ëŠ” ClientsModuleì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ìŒ ì½”ë“œ ë¼ì¸ì„ ì‚¬ìš©í•˜ì—¬ auth.service.tsë¥¼ ì¶”ê°€í•˜ê³  AUTH_MICROSERVICEë¥¼ ë“±ë¡í•´ ë³´ê² ìŠµë‹ˆë‹¤:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n// apps/api-gateway/src/auth/auth.module.ts\n\nimport { Module } from '@nestjs/common';\nimport { ClientsModule, Transport } from '@nestjs/microservices';\n\nimport { AuthController } from './auth.controller';\nimport { AuthService } from './auth.service';\n\n@Module({\n  imports: [\n    ClientsModule.register([\n      {\n        name: 'AUTH_MICROSERVICE',\n        transport: Transport.TCP,\n        options: {\n          host: 'localhost',\n          port: 3001,\n        },\n      },\n    ]),\n  ],\n  providers: [AuthService],\n  controllers: [AuthController],\n})\nexport class AuthModule {}\n```\n\nìœ„ ì½”ë“œì—ì„œ ê° transporterëŠ” name ì†ì„±, ì„ íƒì ì¸ transport ì†ì„± (ê¸°ë³¸ê°’ì€ Transport.TCP), ê·¸ë¦¬ê³  ì„ íƒì ì¸ transporterì— íŠ¹í™”ëœ options ì†ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\n\nëª¨ë“ˆì„ importí•œ í›„ì—ëŠ” @Inject() ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ auth.service.ts íŒŒì¼ì—ì„œ AUTH_MICROSERVICE transporter ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±ëœ ClientProxy ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•©ë‹ˆë‹¤:\n\n```js\n// apps/api-gateway/src/auth/auth.service.ts\n\nimport { Inject, Injectable } from '@nestjs/common';\nimport { ClientProxy } from '@nestjs/microservices';\n\nimport { CreateUserDto, User } from '@nestjs-microservices/shared';\n\n@Injectable()\nexport class AuthService {\n  constructor(\n    @Inject('AUTH_MICROSERVICE') private readonly authClient: ClientProxy\n  ) {}\n\n  getUser(createUserDto: CreateUserDto) {\n    return this.authClient.send\u003cUser, CreateUserDto\u003e('get_user', createUserDto);\n  }\n\n  createUser(createUserDto: CreateUserDto) {\n    return this.authClient.send\u003cUser, CreateUserDto\u003e('create_user', createUserDto);\n  }\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nìœ„ì—ì„œ ë³´ë“¯ì´, get_user ë˜ëŠ” create_user íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ê±°ë‚˜ ë“±ë¡í•  ë•Œ ì´ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\n\nsend ë©”ì„œë“œëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ê³  ì‘ë‹µìœ¼ë¡œ Observableì„ ë°˜í™˜í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‘ ê°€ì§€ ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:\n\n- pattern â€” @MessagePattern() ë°ì½”ë ˆì´í„°ì—ì„œ ì •ì˜ëœ ê²ƒ ì¤‘ í•˜ë‚˜\n- payload â€” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì— ì „ë‹¬í•˜ë ¤ëŠ” ë©”ì‹œì§€\n\në§ˆì§€ë§‰ìœ¼ë¡œ, login ë° signupì„ ìœ„í•œ ë‘ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê°–ëŠ” AuthController í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n// apps/api-gateway/src/auth/auth.controller.ts\n\nimport { Body, Controller, Post, BadRequestException } from '@nestjs/common';\nimport { lastValueFrom } from 'rxjs';\n\nimport { CreateUserDto, User } from '@nestjs-microservices/shared';\n\nimport { AuthService } from './auth.service';\n\n@Controller('auth')\nexport class AuthController {\n  constructor(private readonly authService: AuthService) {}\n\n  @Post('login')\n  async login(@Body() createUserDto: CreateUserDto) {\n    const user: User = await lastValueFrom(this.authService.getUser(createUserDto), {\n      defaultValue: undefined,\n    });\n    if (!user) {\n      throw new BadRequestException('Invalid credentials');\n    }\n\n    const isMatch = user.password === createUserDto.password;\n    if (!isMatch) {\n      throw new BadRequestException('Incorrect password');\n    }\n\n    console.log(`User ${user.username} successfully logged in.`);\n\n    return user;\n  }\n\n  @Post('signup')\n  async signup(@Body() createUserDto: CreateUserDto) {\n    const user: User = await lastValueFrom(this.authService.getUser(createUserDto), {\n      defaultValue: undefined,\n    });\n    if (user) {\n      throw new BadRequestException(\n        `Username ${createUserDto.username} already exists!`\n      );\n    }\n\n    return this.authService.createUser(createUserDto);\n  }\n}\n```\n\nì•ì„œ ì–¸ê¸‰í–ˆë“¯ì´, getUser ë° createUser ì¸ì¦ í´ë¼ì´ì–¸íŠ¸ ë©”ì„œë“œëŠ” Obserableì„ ë°˜í™˜í•˜ë¯€ë¡œ ë©”ì‹œì§€ê°€ ì „ì†¡ë˜ê¸° ì „ì— ëª…ì‹œì ìœ¼ë¡œ êµ¬ë…í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ rxjsì—ì„œ ê°€ì ¸ì˜¨ lastValueFrom ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Observableì„ Promiseë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìƒì„±\n\nì´ì œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ ì²« ë²ˆì§¸ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnx g @nx/nest:app auth-microservice\n```\n\nì•ˆë…•í•˜ì„¸ìš”! auth-microservice ì•±ì˜ main.ts íŒŒì¼ ë‚´ bootstrap() í•¨ìˆ˜ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ NestFactory.createMicroservice() ë©”ì†Œë“œë¡œ ì—…ë°ì´íŠ¸í•´ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\n// apps/auth-microservice/src/main.ts\n\nimport { Logger } from '@nestjs/common';\nimport { NestFactory } from '@nestjs/core';\nimport { Transport, MicroserviceOptions } from '@nestjs/microservices';\n\nimport { AppModule } from './app/app.module';\n\nasync function bootstrap() {\n  const app = await NestFactory.createMicroservice\u003cMicroserviceOptions\u003e(\n    AppModule,\n    {\n      transport: Transport.TCP,\n      options: {\n        host: 'localhost',\n        port: 3001,\n      },\n    }\n  );\n\n  await app.listen();\n\n  Logger.log('ğŸš€ Auth microservice is listening');\n}\n\nbootstrap();\n```\n\nNestFactory í´ë˜ìŠ¤ì˜ createMicroservice() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ì£¼ ê°„ë‹¨í•˜ì£ ! ë§Œì•½ ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ë„ì›€ì´ í•„ìš”í•˜ì‹œë‹¤ë©´ ì–¸ì œë“ ì§€ ë¬¼ì–´ì£¼ì„¸ìš”! ğŸ˜Šâœ¨\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nê·¸ëŸ¬ë©´ ì‚¬ìš©ì ì—”í‹°í‹°ë¥¼ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ìƒì„±í•˜ì—¬ UsersRepository í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•  ê²ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì‚¬ìš©ìë¥¼ ê²€ìƒ‰í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\n// shared/src/lib/entities/user.entity.ts\n\nexport class User {\n  id?: number;\n  username: string;\n  password: string;\n}\n```\n\nìš°ë¦¬ëŠ” ì–´ë–¤ ë°ì´í„°ë² ì´ìŠ¤ë„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©° ê°„ê²°í•¨ì„ ìœ„í•´ ì´ ë°ëª¨ì—ì„œëŠ” ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•  ê²ë‹ˆë‹¤. UserRepository í´ë˜ìŠ¤ë¥¼ í¬í•¨í•œ ê°„ë‹¨í•œ user.repository.ts íŒŒì¼ì„ ë§Œë“¤ì–´ë³´ì£ .\n\n```js\n// apps/auth-microservice/src/app/user.repository.ts\n\nimport { Injectable } from '@nestjs/common';\n\nimport { CreateUserDto, User } from '@nestjs-microservices/shared';\n\n@Injectable()\nexport class UserRepository {\n  private users: User[] = [];\n\n  save(user: CreateUserDto): User {\n    const newUser = new User();\n    newUser.id = this.users.length + 1;\n    newUser.username = user.username;\n    newUser.password = user.password;\n    this.users.push(newUser);\n    return newUser;\n  }\n\n  findOne(username: string): User | undefined {\n    return this.users.find((user) =\u003e user.username === username);\n  }\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì´ì œ createUser() ë° getUser()ë¥¼ app.service.tsì—ì„œ UserRepository ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³  ì°¾ëŠ” ë©”ì†Œë“œë¥¼ ì¶”ê°€í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n// apps/auth-microservice/src/app/app.service.ts\n\nimport { Injectable } from '@nestjs/common';\n\nimport { CreateUserDto, User } from '@nestjs-microservices/shared';\n\nimport { UserRepository } from './user.repository';\n\n@Injectable()\nexport class AppService {\n  constructor(private readonly userRepository: UserRepository) {}\n\n  createUser(newUser: CreateUserDto): User {\n    return this.userRepository.save(newUser);\n  }\n\n  getUser(username: string): User | undefined {\n    return this.userRepository.findOne(username);\n  }\n}\n```\n\në§ˆì§€ë§‰ìœ¼ë¡œ, @nestjs/microservices íŒ¨í‚¤ì§€ì—ì„œ ê°€ì ¸ì˜¨ @MessagePattern() ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­-ì‘ë‹µ íŒ¨ëŸ¬ë‹¤ì„ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ ë©”ì†Œë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\n```js\n// apps/auth-microservice/src/app/app.controller.ts\n\n@Controller()\nexport class AppController {\n  constructor(private readonly appService: AppService) {}\n\n  @MessagePattern('get_user') // get_user ë©”ì‹œì§€ íŒ¨í„´ì„ ìˆ˜ì‹  ëŒ€ê¸°\n  handleGetUser(user: CreateUserDto) {\n    return this.appService.getUser(user.username);\n  }\n\n  @MessagePattern('create_user') // create_user ë©”ì‹œì§€ íŒ¨í„´ì„ ìˆ˜ì‹  ëŒ€ê¸°\n  handleCreateUser(newUser: CreateUserDto) {\n    return this.appService.createUser(newUser);\n  }\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nìœ„ ì½”ë“œì—ì„œ handleGetUser() ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ëŠ” get_user ë©”ì‹œì§€ íŒ¨í„´ê³¼ ì¼ì¹˜í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•©ë‹ˆë‹¤. ì´ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì „ë‹¬ëœ CreateUserDto ìœ í˜•ì˜ ì‚¬ìš©ìë¥¼ ì¸ìë¡œ ì·¨í•©ë‹ˆë‹¤.\n\n# ì„œë¹„ìŠ¤ ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸\n\nëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ê°œë³„ì ìœ¼ë¡œ ë³„ë„ì˜ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤:\n\n```js\nnx serve api-gateway\nnx serve auth-microservice\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì•±ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ Postmanì´ë‚˜ ë‹¤ë¥¸ API í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.\n\n## ì˜ëª»ëœ ìê²© ì¦ëª…ìœ¼ë¡œ ë¡œê·¸ì¸\n\n\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_2.png\" /\u003e\n\n## ê°€ì…\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_3.png\" /\u003e\n\n## ë¡œê·¸ì¸\n\n\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_4.png\" /\u003e\n\n## ë™ì¼í•œ ì‚¬ìš©ì ì´ë¦„ìœ¼ë¡œ ê°€ì…\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n![ì´ë¯¸ì§€](/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_5.png)\n\n# ê²°ë¡ \n\nì½”ë“œë¥¼ ëª¨ë‘ í™•ì¸í•˜ë ¤ë©´ GitHub ë§í¬ë¥¼ í´ë¦­í•˜ì„¸ìš”.\n\nì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ â€” ì´ ê¸€ì´ ë„ì›€ì´ ë˜ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ì¦ê±°ìš´ ì½”ë”© ë˜ì„¸ìš”!\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# ìì›","ogImage":{"url":"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_0.png"},"coverImage":"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_0.png","tag":["Tech"],"readingTime":11},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch2\u003eë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ì„œë¡œ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ë²•\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_0.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003eí”„ë¡œì íŠ¸ê°€ ì ì  ì»¤ì§€ë©´ì„œ ë”ìš± ê³ ê¸‰ ì•„í‚¤í…ì²˜ê°€ í•„ìš”í•´ì§‘ë‹ˆë‹¤. ê·¸ë˜ì„œ ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´ë¡œì„œ, í˜„ëŒ€ì ì´ê³  ì¸ê¸° ìˆëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ì†Œê°œí•˜ê³ ì í•©ë‹ˆë‹¤. ì´ ì•„í‚¤í…ì²˜ëŠ” SOA (Service Oriented Architecture) ê°œë…ì„ ë”°ë¦…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ê¸€ì—ì„œëŠ” ë‹¨ì¼ì²´ì™€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ì°¨ì´ë¥¼ ì´ì•¼ê¸°í•˜ê³ , NestJS, TCP ë° Typescriptë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ë“œë¦¬ë ¤ê³  í•©ë‹ˆë‹¤. ë¨¼ì € ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ê°€ ë¬´ì—‡ì¸ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003eë¯¸í¬ë¡œì„œë¹„ìŠ¤ë€ ë¬´ì—‡ì¸ê°€\u003c/h1\u003e\n\u003cp\u003eë¯¸í¬ë¡œì„œë¹„ìŠ¤ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì˜ ì•„í‚¤í…ì²˜ì  ê´€ì ìœ¼ë¡œ, ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì‘ê³  ë…ë¦½ì ì¸ ì„œë¹„ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ì„œë¡œ ì •ì˜ëœ APIë¥¼ í†µí•´ í†µì‹ í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ê° ì„œë¹„ìŠ¤ëŠ” íŠ¹ì • ì‘ì—…ì´ë‚˜ ë¹„ì¦ˆë‹ˆìŠ¤ ëª©í‘œë¥¼ ì§€ì›í•˜ë©° ë‹¤ë¥¸ ëª¨ë“ˆ ë° ì„œë¹„ìŠ¤ì™€ í†µì‹ í•˜ê¸° ìœ„í•´ APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í™•ì¥í•˜ê³  ë” ë¹ ë¥´ê²Œ ê°œë°œí•  ìˆ˜ ìˆì–´ í˜ì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ë©° ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì‹œì¥ì— ë¹ ë¥´ê²Œ ë‚´ë†“ì„ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ì™€ ë¯¸í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ì£¼ìš” ì°¨ì´ëŠ” ë¬´ì—‡ì¸ê°€ìš”? ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ì—ì„œëŠ” ëª¨ë“  ê¸°ëŠ¥ê³¼ ì„œë¹„ìŠ¤ê°€ ê²°í•©ë¼ ë‹¨ì¼ ë‹¨ìœ„ë¡œ ì‘ë™í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ë¯¸í¬ë¡œì„œë¹„ìŠ¤ì—ì„œëŠ” ê¸°ë°˜ ë¡œì§ì„ ì„œë¡œ ë‹¤ë¥¸ ì‘ì—…ì´ë‚˜ ì„œë¹„ìŠ¤ë¡œ ë¶„í•´í•˜ì—¬ ê°œë³„ì ìœ¼ë¡œ ê°œë°œí•˜ê³ , ë°°í¬í•˜ë©° APIë¥¼ í†µí•´ ë…¸ì¶œí•˜ëŠ” ê²ƒì´ íŠ¹ì§•ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë” ë‚˜ì€ ì´í•´ë¥¼ ìœ„í•´ ì €í¬ëŠ” í•¨ê»˜ NestJSì—ì„œ ë¯¸í¬ë¡œì„œë¹„ìŠ¤ í”„ë¡œì íŠ¸ë¥¼ ê°œë°œí•  ì˜ˆì •ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003eí”„ë¡œì íŠ¸ ì„¤ì •í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eì‹œì‘í•˜ê¸° ì „ì—, ì €í¬ í”„ë¡œì íŠ¸ì˜ ë‘ ê°€ì§€ ì£¼ìš” ì¸¡ë©´ì„ ê°•ì¡°í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eauth-microservice: ì‚¬ìš©ì ê¶Œí•œì„ ê´€ë¦¬í•˜ëŠ” ì¸ì¦ ì„œë¹„ìŠ¤\u003c/li\u003e\n\u003cli\u003eAPI Gateway: í´ë¼ì´ì–¸íŠ¸ì™€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì‚¬ì´ì— ìœ„ì¹˜í•˜ë©° HTTP API ì—”ë“œí¬ì¸íŠ¸ë¡œë¶€í„° ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ì„œë¹„ìŠ¤\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eê°„ëµíˆ ì„¤ëª…í•˜ë©´, ì‚¬ìš©ìê°€ ìê²© ì¦ëª…ìœ¼ë¡œ /api/login ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ë¡œê·¸ì¸í•˜ë©´ API ê²Œì´íŠ¸ì›¨ì´ì— ì—°ê²°ë©ë‹ˆë‹¤. API ê²Œì´íŠ¸ì›¨ì´ëŠ” ê·¸ëŸ° ë‹¤ìŒ ìš”ì²­-ì‘ë‹µ ìŠ¤íƒ€ì¼ì˜ ë©”ì‹œì§€ íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì™€ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì €í¬ ì•±ì´ ì‘ë™í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eì—¬ëŸ¬ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•  ì˜ˆì •ì´ë¯€ë¡œ ì—¬ëŸ¬ ì•±ê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¬í•¨ëœ ë‹¨ì¼ ë²„ì „ ê´€ë¦¬ ì½”ë“œ ì €ì¥ì†Œì¸ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ë¥¼ ê°€ì§€ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ëª¨ë…¸-ì €ì¥ì†Œì—ì„œ ì›¹ ì•± ë° ì„œë¹„ìŠ¤ë¥¼ ë¹Œë“œí•˜ê³  í™•ì¥í•  ìˆ˜ ìˆëŠ” Nx ë„êµ¬ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eìš°ì„  ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ ë´…ì‹œë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpx create-nx-workspace nestjs-microservices --preset=nest\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì•± ì´ë¦„ì„ api-gatewayë¡œ ì§€ì •í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_1.png\"\u003e\n\u003cp\u003eì´ì œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ í”„ë¡œì íŠ¸ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•´ë´…ì‹œë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd nestjs-microservices\nnpm i @nestjs/microservices \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e-validator \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e-transformer\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eAuth ëª¨ë“ˆ ì¶”ê°€í•˜ê¸°\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eìš°ë¦¬ í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ì—ˆìœ¼ë¯€ë¡œ, nxëŠ” ì´ë¯¸ API Gateway ì„œë¹„ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ì œ API Gateway ì•±ì—ì„œ ì¸ì¦ ëª¨ë“ˆì„ ë§Œë“¤ì–´ì„œ ì¸ì¦ ê´€ë ¨ ìš”ì²­ì„ ì²˜ë¦¬í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì‚¬ìš©ìê°€ ì•±ì— ìš”ì²­ì„ ë³´ë‚´ë©´ API Gatewayê°€ ìš”ì²­ì„ ë°›ì•„ì„œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë™ì¼í•œ ë°ì´í„° ìœ í˜•ì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì¤‘ë³µë˜ëŠ” ì½”ë“œë¥¼ í”¼í•˜ê¸° ìœ„í•´ ëª¨ë†€ë¦¬í¬ ë‚´ì—ì„œ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ ì½”ë“œë¥¼ ì—¬ê¸°ì €ê¸° ì¤‘ë³µ ìƒì„±í•˜ì§€ ì•Šê³  ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enx g @nx/\u003cspan class=\"hljs-attr\"\u003enest\u003c/span\u003e:lib shared\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ dto í´ë”ë¥¼ ë§Œë“¤ì–´ì„œ create-user.dto.ts íŒŒì¼ì„ ì¶”ê°€í•´ ì£¼ì„¸ìš”:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-comment\"\u003e// shared/src/lib/dto/create-user.dto.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eIsNotEmpty\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eIsString\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'class-validator'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e {\n  \u003cspan class=\"hljs-meta\"\u003e@IsString\u003c/span\u003e()\n  \u003cspan class=\"hljs-meta\"\u003e@IsNotEmpty\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-meta\"\u003e@IsNotEmpty\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë˜í•œ tsconfig.base.jsonì— ê²½ë¡œ í•­ëª©ì„ ì¶”ê°€í•˜ê³  ì ˆëŒ€ ê²½ë¡œë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  ...\n  \u003cspan class=\"hljs-attr\"\u003e\"compilerOptions\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    ...\n    \u003cspan class=\"hljs-attr\"\u003e\"paths\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003e\"@nestjs-microservices/shared\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"shared/src/index.ts\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e]\u003c/span\u003e\n    \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  ...\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNestJSëŠ” ê¸°ë³¸ TCP ì „ì†¡ ê³„ì¸µì„ ì‚¬ìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ê°„ì— ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. NestJSëŠ” microservice ì „ì†¡ìë¥¼ ì„¤ëª…í•˜ëŠ” ê°ì²´ ë°°ì—´ì„ ì¸ìë¡œë°›ëŠ” static register() ë©”ì„œë“œë¥¼ ë…¸ì¶œí•˜ëŠ” ClientsModuleì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¤ìŒ ì½”ë“œ ë¼ì¸ì„ ì‚¬ìš©í•˜ì—¬ auth.service.tsë¥¼ ì¶”ê°€í•˜ê³  AUTH_MICROSERVICEë¥¼ ë“±ë¡í•´ ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// apps/api-gateway/src/auth/auth.module.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eClientsModule\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eTransport\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/microservices'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAuthController\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./auth.controller'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAuthService\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./auth.service'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003eimports\u003c/span\u003e: [\n    \u003cspan class=\"hljs-title class_\"\u003eClientsModule\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eregister\u003c/span\u003e([\n      {\n        \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'AUTH_MICROSERVICE'\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003etransport\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eTransport\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eTCP\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eoptions\u003c/span\u003e: {\n          \u003cspan class=\"hljs-attr\"\u003ehost\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'localhost'\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003eport\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3001\u003c/span\u003e,\n        },\n      },\n    ]),\n  ],\n  \u003cspan class=\"hljs-attr\"\u003eproviders\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003eAuthService\u003c/span\u003e],\n  \u003cspan class=\"hljs-attr\"\u003econtrollers\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003eAuthController\u003c/span\u003e],\n})\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthModule\u003c/span\u003e {}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ ì½”ë“œì—ì„œ ê° transporterëŠ” name ì†ì„±, ì„ íƒì ì¸ transport ì†ì„± (ê¸°ë³¸ê°’ì€ Transport.TCP), ê·¸ë¦¬ê³  ì„ íƒì ì¸ transporterì— íŠ¹í™”ëœ options ì†ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eëª¨ë“ˆì„ importí•œ í›„ì—ëŠ” @Inject() ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ auth.service.ts íŒŒì¼ì—ì„œ AUTH_MICROSERVICE transporter ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ì„±ëœ ClientProxy ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// apps/api-gateway/src/auth/auth.service.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eInject\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eClientProxy\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/microservices'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs-microservices/shared'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthService\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    @Inject(\u003cspan class=\"hljs-string\"\u003e'AUTH_MICROSERVICE'\u003c/span\u003e) private readonly authClient: ClientProxy\n  \u003c/span\u003e) {}\n\n  \u003cspan class=\"hljs-title function_\"\u003egetUser\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ecreateUserDto: CreateUserDto\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthClient\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003esend\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e\u003e(\u003cspan class=\"hljs-string\"\u003e'get_user'\u003c/span\u003e, createUserDto);\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003ecreateUser\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ecreateUserDto: CreateUserDto\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthClient\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003esend\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e\u003e(\u003cspan class=\"hljs-string\"\u003e'create_user'\u003c/span\u003e, createUserDto);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eìœ„ì—ì„œ ë³´ë“¯ì´, get_user ë˜ëŠ” create_user íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•˜ê±°ë‚˜ ë“±ë¡í•  ë•Œ ì´ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003esend ë©”ì„œë“œëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ í˜¸ì¶œí•˜ê³  ì‘ë‹µìœ¼ë¡œ Observableì„ ë°˜í™˜í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‘ ê°€ì§€ ì¸ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003epattern â€” @MessagePattern() ë°ì½”ë ˆì´í„°ì—ì„œ ì •ì˜ëœ ê²ƒ ì¤‘ í•˜ë‚˜\u003c/li\u003e\n\u003cli\u003epayload â€” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì— ì „ë‹¬í•˜ë ¤ëŠ” ë©”ì‹œì§€\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ, login ë° signupì„ ìœ„í•œ ë‘ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê°–ëŠ” AuthController í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// apps/api-gateway/src/auth/auth.controller.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eBody\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eController\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003ePost\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eBadRequestException\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { lastValueFrom } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'rxjs'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs-microservices/shared'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAuthService\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./auth.service'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eController\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'auth'\u003c/span\u003e)\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthController\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprivate readonly authService: AuthService\u003c/span\u003e) {}\n\n  @\u003cspan class=\"hljs-title class_\"\u003ePost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'login'\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elogin\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e@Body() createUserDto: CreateUserDto\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003euser\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elastValueFrom\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetUser\u003c/span\u003e(createUserDto), {\n      \u003cspan class=\"hljs-attr\"\u003edefaultValue\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e,\n    });\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!user) {\n      \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBadRequestException\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Invalid credentials'\u003c/span\u003e);\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e isMatch = user.\u003cspan class=\"hljs-property\"\u003epassword\u003c/span\u003e === createUserDto.\u003cspan class=\"hljs-property\"\u003epassword\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!isMatch) {\n      \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBadRequestException\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Incorrect password'\u003c/span\u003e);\n    }\n\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`User \u003cspan class=\"hljs-subst\"\u003e${user.username}\u003c/span\u003e successfully logged in.`\u003c/span\u003e);\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e user;\n  }\n\n  @\u003cspan class=\"hljs-title class_\"\u003ePost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'signup'\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esignup\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e@Body() createUserDto: CreateUserDto\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003euser\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elastValueFrom\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetUser\u003c/span\u003e(createUserDto), {\n      \u003cspan class=\"hljs-attr\"\u003edefaultValue\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e,\n    });\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (user) {\n      \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBadRequestException\u003c/span\u003e(\n        \u003cspan class=\"hljs-string\"\u003e`Username \u003cspan class=\"hljs-subst\"\u003e${createUserDto.username}\u003c/span\u003e already exists!`\u003c/span\u003e\n      );\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateUser\u003c/span\u003e(createUserDto);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì•ì„œ ì–¸ê¸‰í–ˆë“¯ì´, getUser ë° createUser ì¸ì¦ í´ë¼ì´ì–¸íŠ¸ ë©”ì„œë“œëŠ” Obserableì„ ë°˜í™˜í•˜ë¯€ë¡œ ë©”ì‹œì§€ê°€ ì „ì†¡ë˜ê¸° ì „ì— ëª…ì‹œì ìœ¼ë¡œ êµ¬ë…í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ rxjsì—ì„œ ê°€ì ¸ì˜¨ lastValueFrom ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ Observableì„ Promiseë¡œ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìƒì„±\u003c/h1\u003e\n\u003cp\u003eì´ì œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ ì²« ë²ˆì§¸ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enx g @nx/\u003cspan class=\"hljs-attr\"\u003enest\u003c/span\u003e:app auth-microservice\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì•ˆë…•í•˜ì„¸ìš”! auth-microservice ì•±ì˜ main.ts íŒŒì¼ ë‚´ bootstrap() í•¨ìˆ˜ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ NestFactory.createMicroservice() ë©”ì†Œë“œë¡œ ì—…ë°ì´íŠ¸í•´ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// apps/auth-microservice/src/main.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNestFactory\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/core'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eTransport\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eMicroserviceOptions\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/microservices'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppModule\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./app/app.module'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ebootstrap\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e app = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNestFactory\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecreateMicroservice\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eMicroserviceOptions\u003c/span\u003e\u003e(\n    \u003cspan class=\"hljs-title class_\"\u003eAppModule\u003c/span\u003e,\n    {\n      \u003cspan class=\"hljs-attr\"\u003etransport\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eTransport\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eTCP\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003eoptions\u003c/span\u003e: {\n        \u003cspan class=\"hljs-attr\"\u003ehost\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'localhost'\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eport\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e3001\u003c/span\u003e,\n      },\n    }\n  );\n\n  \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e app.\u003cspan class=\"hljs-title function_\"\u003elisten\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-title class_\"\u003eLogger\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ğŸš€ Auth microservice is listening'\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-title function_\"\u003ebootstrap\u003c/span\u003e();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNestFactory í´ë˜ìŠ¤ì˜ createMicroservice() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ì£¼ ê°„ë‹¨í•˜ì£ ! ë§Œì•½ ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ ë„ì›€ì´ í•„ìš”í•˜ì‹œë‹¤ë©´ ì–¸ì œë“ ì§€ ë¬¼ì–´ì£¼ì„¸ìš”! ğŸ˜Šâœ¨\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eê·¸ëŸ¬ë©´ ì‚¬ìš©ì ì—”í‹°í‹°ë¥¼ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ìƒì„±í•˜ì—¬ UsersRepository í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•  ê²ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ì‚¬ìš©ìë¥¼ ê²€ìƒ‰í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// shared/src/lib/entities/user.entity.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e {\n  id?: number;\n  \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: string;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” ì–´ë–¤ ë°ì´í„°ë² ì´ìŠ¤ë„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©° ê°„ê²°í•¨ì„ ìœ„í•´ ì´ ë°ëª¨ì—ì„œëŠ” ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•  ê²ë‹ˆë‹¤. UserRepository í´ë˜ìŠ¤ë¥¼ í¬í•¨í•œ ê°„ë‹¨í•œ user.repository.ts íŒŒì¼ì„ ë§Œë“¤ì–´ë³´ì£ .\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// apps/auth-microservice/src/app/user.repository.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs-microservices/shared'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserRepository\u003c/span\u003e {\n  private \u003cspan class=\"hljs-attr\"\u003eusers\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e[] = [];\n\n  \u003cspan class=\"hljs-title function_\"\u003esave\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003euser\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e newUser = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e();\n    newUser.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eusers\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e + \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e;\n    newUser.\u003cspan class=\"hljs-property\"\u003eusername\u003c/span\u003e = user.\u003cspan class=\"hljs-property\"\u003eusername\u003c/span\u003e;\n    newUser.\u003cspan class=\"hljs-property\"\u003epassword\u003c/span\u003e = user.\u003cspan class=\"hljs-property\"\u003epassword\u003c/span\u003e;\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eusers\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e(newUser);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e newUser;\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: string): \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eusers\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efind\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003euser\u003c/span\u003e) =\u003e\u003c/span\u003e user.\u003cspan class=\"hljs-property\"\u003eusername\u003c/span\u003e === username);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eì´ì œ createUser() ë° getUser()ë¥¼ app.service.tsì—ì„œ UserRepository ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ê³  ì°¾ëŠ” ë©”ì†Œë“œë¥¼ ì¶”ê°€í•  ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// apps/auth-microservice/src/app/app.service.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs-microservices/shared'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUserRepository\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./user.repository'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAppService\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprivate readonly userRepository: UserRepository\u003c/span\u003e) {}\n\n  \u003cspan class=\"hljs-title function_\"\u003ecreateUser\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003enewUser\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserRepository\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esave\u003c/span\u003e(newUser);\n  }\n\n  \u003cspan class=\"hljs-title function_\"\u003egetUser\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: string): \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserRepository\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e(username);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ, @nestjs/microservices íŒ¨í‚¤ì§€ì—ì„œ ê°€ì ¸ì˜¨ @MessagePattern() ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­-ì‘ë‹µ íŒ¨ëŸ¬ë‹¤ì„ì„ ê¸°ë°˜ìœ¼ë¡œ í•œ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ ë©”ì†Œë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// apps/auth-microservice/src/app/app.controller.ts\u003c/span\u003e\n\n@\u003cspan class=\"hljs-title class_\"\u003eController\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAppController\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprivate readonly appService: AppService\u003c/span\u003e) {}\n\n  @\u003cspan class=\"hljs-title class_\"\u003eMessagePattern\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'get_user'\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// get_user ë©”ì‹œì§€ íŒ¨í„´ì„ ìˆ˜ì‹  ëŒ€ê¸°\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003ehandleGetUser\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003euser: CreateUserDto\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eappService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetUser\u003c/span\u003e(user.\u003cspan class=\"hljs-property\"\u003eusername\u003c/span\u003e);\n  }\n\n  @\u003cspan class=\"hljs-title class_\"\u003eMessagePattern\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'create_user'\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// create_user ë©”ì‹œì§€ íŒ¨í„´ì„ ìˆ˜ì‹  ëŒ€ê¸°\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003ehandleCreateUser\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003enewUser: CreateUserDto\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eappService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateUser\u003c/span\u003e(newUser);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eìœ„ ì½”ë“œì—ì„œ handleGetUser() ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ëŠ” get_user ë©”ì‹œì§€ íŒ¨í„´ê³¼ ì¼ì¹˜í•˜ëŠ” ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•©ë‹ˆë‹¤. ì´ ë©”ì‹œì§€ í•¸ë“¤ëŸ¬ëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì „ë‹¬ëœ CreateUserDto ìœ í˜•ì˜ ì‚¬ìš©ìë¥¼ ì¸ìë¡œ ì·¨í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì„œë¹„ìŠ¤ ì‹¤í–‰ ë° í…ŒìŠ¤íŠ¸\u003c/h1\u003e\n\u003cp\u003eëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ê°œë³„ì ìœ¼ë¡œ ë³„ë„ì˜ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enx serve api-gateway\nnx serve auth-microservice\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eì•±ì„ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ Postmanì´ë‚˜ ë‹¤ë¥¸ API í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003ch2\u003eì˜ëª»ëœ ìê²© ì¦ëª…ìœ¼ë¡œ ë¡œê·¸ì¸\u003c/h2\u003e\n\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_2.png\"\u003e\n\u003ch2\u003eê°€ì…\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_3.png\"\u003e\n\u003ch2\u003eë¡œê·¸ì¸\u003c/h2\u003e\n\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_4.png\"\u003e\n\u003ch2\u003eë™ì¼í•œ ì‚¬ìš©ì ì´ë¦„ìœ¼ë¡œ ê°€ì…\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript_5.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003ch1\u003eê²°ë¡ \u003c/h1\u003e\n\u003cp\u003eì½”ë“œë¥¼ ëª¨ë‘ í™•ì¸í•˜ë ¤ë©´ GitHub ë§í¬ë¥¼ í´ë¦­í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003eì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ â€” ì´ ê¸€ì´ ë„ì›€ì´ ë˜ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. ì¦ê±°ìš´ ì½”ë”© ë˜ì„¸ìš”!\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003eìì›\u003c/h1\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-20-BuildingMicroserviceswithNestJSTCPandTypescript"},"buildId":"Rv-NbbtWUaja2joH5WkO_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>