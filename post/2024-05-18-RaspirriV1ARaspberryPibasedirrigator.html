<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>RaspirriV1로 라즈베리 파이 기반의 자동 급수기 만들기 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-18-RaspirriV1ARaspberryPibasedirrigator" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="RaspirriV1로 라즈베리 파이 기반의 자동 급수기 만들기 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="RaspirriV1로 라즈베리 파이 기반의 자동 급수기 만들기 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-18-RaspirriV1ARaspberryPibasedirrigator" data-gatsby-head="true"/><meta name="twitter:title" content="RaspirriV1로 라즈베리 파이 기반의 자동 급수기 만들기 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-18 21:28" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/Y-fCAg8BUV7y2HNFwX9AA/_buildManifest.js" defer=""></script><script src="/_next/static/Y-fCAg8BUV7y2HNFwX9AA/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">RaspirriV1로 라즈베리 파이 기반의 자동 급수기 만들기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="RaspirriV1로 라즈베리 파이 기반의 자동 급수기 만들기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 18, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-18-RaspirriV1ARaspberryPibasedirrigator&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>몇 년 전에 제가 작은 잔디 정원을 관리하기 위한 책임을 맡아 상업용 스크린 LCD를 갖춘 자동 급수 시스템을 사용했어요. 그러나 COVID-19 대유행으로 인한 봉쇄 기간에 LCD 화면이 고장나면서 프로그래머 메뉴에 접근할 수 없게 되었어요.</p>
<p>해결책을 찾기 위해 고장 난 LCD 화면을 모바일 앱으로 교체하고, 급수 시스템을 Raspberry Pi Zero로 대체하기로 결정했어요. 이 대체 방안을 추구한 동기는 시장에서 다른 상업적인 솔루션에 비해 경제적인 측면과 나의 새로운 프로젝트에 도전하는 즐거움이었어요. 게다가, 이 노력은 그리스 테살로니키에서 열린 Voxxed Days Conference에서 만난 Flutter 개발자인 Tom Makrodimos와의 협력으로 이끌어졌어요!</p>
<h1>프로젝트 개요</h1>
<p>제 주요 목표 중 하나인 기존 급수 시스템을 Raspberry Pi로 대체하기 위해 프로젝트를 <code>RaspirriV1</code>로 적절하게 명명했어요. 이는 Raspberry Irrigator Version 1을 상징하는 이름이에요.</p>
<div class="content-ad"></div>
<p>서버 소프트웨어는 Python을 기반으로 하며, RaspirriV1 모바일 앱은 Flutter를 기반으로 합니다.</p>
<h1>개발 여정</h1>
<p>모바일 앱 및 서버 측 구성 요소의 아키텍처 설계와 구현을 시작하기 전에, 우리는 잠재적인 하드웨어적 과제에 대해 논의하였습니다. 그 시점에서, 라즈베리 파이가 24볼트 전원 공급이 필요한 전기 밸브를 제어할 수 있는 내재된 능력이 부족하다는 것을 알았습니다. 이 장애를 인식한 후, 전자 기술에 대한 전문 지식을 보유한 두 명의 친구인 Lambros Anastasopoulos와 Dimitris Iliopoulos에게 연락했습니다. 그들은 즉시 이 과제를 확인하고 해결책을 종이에 스케치하여 Proof-of-Concept를 스티로폼 보드에 만들었습니다:</p>
<p><img src="/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_0.png" alt="사진"></p>
<div class="content-ad"></div>
<p>전자 연결의 정확성을 확인하고 LED의 켜고 끄기 기능을 검증하기 위해 간단한 Python 구현을 빠르게 시작했습니다. Concept 증명은 성공적인 기능을 보여줌으로써 우리가 다음 단계로 진행할 확신을 더했습니다:</p>
<p>구성품 비용은 선택한 특정 모델에 따라 다릅니다. 그러나 일반적인 추정 금액은 다음과 같습니다:</p>
<ul>
<li>Raspberry Pi (Zero-4): $35–$55</li>
<li>Reley: $5–$10</li>
<li>24V DC 전원 공급기: $10</li>
<li>LED: $1–$2</li>
<li>전류 제한 저항기: $0.50–$1</li>
<li>Step-down 변환기: $5</li>
</ul>
<p>총액: $57–$83$</p>
<div class="content-ad"></div>
<p>위에 나와 있는 회로도는 라즈베리 파이를 사용하여 릴레이를 제어하는 간단한 회로를 보여줍니다. 릴레이는 LED나 모터와 같은 고출력 부하를 켜고 끄는 데 사용됩니다. 이 회로는 24V DC 전원 공급기로 구동됩니다.</p>
<p>라즈베리 파이는 디지털 출력 핀을 사용하여 릴레이에 연결됩니다. 라즈베리 파이가 출력 핀을 HIGH로 설정하면 릴레이 코일이 활성화되고 릴레이 접점이 닫힙니다. 이로써 24V 전원 공급기에서 하중으로 전류가 흐를 수 있습니다. 라즈베리 파이가 출력 핀을 LOW로 설정하면 릴레이 코일이 비활성화되고 릴레이 접점이 열립니다. 이로써 하중으로 전류가 흐르지 않게 됩니다.</p>
<div class="content-ad"></div>
<p>회로 내 LED는 부하가 켜졌을 때 표시하는 데 사용됩니다. LED는 24V 전원 공급원을 통해 전류 제한 저항을 통해 연결됩니다. 전류 제한 저항은 LED가 너무 많은 전류를 빨아들이고 소멸되는 것을 방지하기 위해 필요합니다.</p>
<p>회로 내 Step-down 컨버터는 24V DC 전원 공급 전압을 5V DC로 변환하는 데 사용됩니다. 5V DC 전압은 Raspberry Pi를 구동하는 데 사용됩니다.</p>
<h1>소프트웨어 아키텍처</h1>
<p><img src="/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_2.png" alt="Image"></p>
<div class="content-ad"></div>
<p>위의 UML 다이어그램에 따라 사용자가 모바일 앱을 라즈베리 파이 서버와 블루투스 통신을 통해 페어링하고 인터넷을 통해 제어하는 단계는 다음과 같습니다:</p>
<p>단계 1: 사용자는 모바일 앱을 시작하고 설정-`연결 초기화'를 클릭하여 모바일 앱을 서버와 페어링합니다.</p>
<img src="/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_3.png">
<p>단계 2: 사용자는 계속을 클릭하고 RaspirriV1 서버에서 사용할 사용 가능한 WiFi 네트워크 중 하나를 선택합니다.</p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_4.png" alt="이미지"></p>
<h3>단계-3: 준비 완료!!! 이제 앱을 사용하여 인터넷을 통해 관정을 제어하고 일정을 설정하며 시스템 상태를 모니터링할 수 있습니다. 앱을 처음 실행할 때는 밸브가 활성화되어 있지 않습니다. 라즈베리 파이에서 밸브를 활성화하고 해당 포트를 앱에서 선택할 수 있습니다.</h3>
<p><img src="/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_5.png" alt="이미지"></p>
<h3>단계-4: 그런 다음 토글 버튼으로 밸브를 켜거나 끄거나 각 밸브에 대한 일정 프로그램을 만들 수 있습니다.</h3>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_6.png" alt="Program creation"></p>
<p>STEP-5: To create a program, select days, start time, and duration. You can change the valve name if desired and then click Save. A new schedule will be created and saved in the raspirri-server storage.</p>
<p><img src="/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_7.png" alt="Schedule creation"></p>
<h1>Raspberry Pi Server</h1>
<div class="content-ad"></div>
<p>라스피리V1을 위한 서버 소프트웨어는 세 가지 주요 모듈로 구성되어 있습니다:</p>
<p>이 구성 요소는 클라우드 MQTT 브로커와의 통신을 설정하여 시스템 설정의 온라인 구성 및 유지 관리를 용이하게 합니다.</p>
<p>Bluetooth 특성을 등록하기 위해 설계된 이 모듈은 휴대 기기를 라스피리V1과 초기 페어링할 수 있게 합니다. 이 페어링 프로세스는 모바일 앱을 IoT 장치와 연결하기 위해 필요한 필수 최소 구성을 보장합니다.</p>
<p>MQTT 모듈의 상태를 모니터링하고 필요한 경우 다시 시작하는 이 모듈이 구현되었습니다.</p>
<div class="content-ad"></div>
<p>모든 모듈은 Raspbian OS에서 서로 다른 systemd 서비스로 시작됩니다. 사용된 Python 라이브러리는 다음과 같습니다:</p>
<pre><code class="hljs language-js"><span class="hljs-title class_">APScheduler</span>==<span class="hljs-number">3.10</span><span class="hljs-number">.4</span>

# <span class="hljs-title class_">Linting</span>/<span class="hljs-title class_">Tooling</span>
black>=<span class="hljs-number">23.3</span><span class="hljs-number">.0</span>
build>=<span class="hljs-number">0.10</span><span class="hljs-number">.0</span>
bump2version==<span class="hljs-number">1.0</span><span class="hljs-number">.1</span>
codecov>=<span class="hljs-number">2.1</span><span class="hljs-number">.13</span>
configparser==<span class="hljs-number">6.0</span><span class="hljs-number">.0</span>
coverage==<span class="hljs-number">7.3</span><span class="hljs-number">.2</span>
<span class="hljs-title class_">Deprecated</span>==<span class="hljs-number">1.2</span><span class="hljs-number">.13</span>
distro==<span class="hljs-number">1.7</span><span class="hljs-number">.0</span>

# <span class="hljs-title class_">Raspirri</span>
fastapi[all]==<span class="hljs-number">0.109</span><span class="hljs-number">.1</span>
feedparser==<span class="hljs-number">6.0</span><span class="hljs-number">.11</span>
future==<span class="hljs-number">0.18</span><span class="hljs-number">.3</span>
getmac==<span class="hljs-number">0.8</span><span class="hljs-number">.3</span>
invoke==<span class="hljs-number">2.2</span><span class="hljs-number">.0</span>
isort>=<span class="hljs-number">5.12</span><span class="hljs-number">.0</span>
lockfile==<span class="hljs-number">0.12</span><span class="hljs-number">.2</span>
loguru==<span class="hljs-number">0.7</span><span class="hljs-number">.2</span>

# <span class="hljs-title class_">Documentation</span>
mkdocs>=<span class="hljs-number">1.4</span><span class="hljs-number">.3</span>
mkdocs-material>=<span class="hljs-number">9.1</span><span class="hljs-number">.14</span>
mkdocstrings>=<span class="hljs-number">0.21</span><span class="hljs-number">.2</span>
mkdocstrings[python]>=<span class="hljs-number">0.9</span><span class="hljs-number">.0</span>
mypy>=<span class="hljs-number">1.3</span><span class="hljs-number">.0</span>
paho-mqtt==<span class="hljs-number">1.6</span><span class="hljs-number">.1</span>
pre-commit>=<span class="hljs-number">3.3</span><span class="hljs-number">.2</span>
<span class="hljs-title class_">Pygments</span>>=<span class="hljs-number">2.15</span><span class="hljs-number">.1</span>
pyright>=<span class="hljs-number">1.1</span><span class="hljs-number">.309</span>

# <span class="hljs-title class_">Testing</span>
pytest>=<span class="hljs-number">7.4</span><span class="hljs-number">.3</span>
pytest-asyncio==<span class="hljs-number">0.21</span><span class="hljs-number">.1</span>
pytest-benchmark>=<span class="hljs-number">4.0</span><span class="hljs-number">.0</span>
pytest-cov>=<span class="hljs-number">4.1</span><span class="hljs-number">.0</span>
pytest-mock==<span class="hljs-number">3.12</span><span class="hljs-number">.0</span>
pytest-ordering==<span class="hljs-number">0.6</span>
requests==<span class="hljs-number">2.31</span><span class="hljs-number">.0</span>
ruff>=<span class="hljs-number">0.0</span><span class="hljs-number">.270</span>

# <span class="hljs-title class_">Linting</span>/<span class="hljs-title class_">Tooling</span>
setuptools>=<span class="hljs-number">67.8</span><span class="hljs-number">.0</span>
subprocess.<span class="hljs-property">run</span>==<span class="hljs-number">0.0</span><span class="hljs-number">.8</span>
uvicorn==<span class="hljs-number">0.27</span><span class="hljs-number">.0</span>
</code></pre>
<h1>Flutter 모바일 앱</h1>
<p>RaspirriV1 모바일 앱은 RaspirriV1 서버 소프트웨어의 자동 급수 시스템 컨트롤러입니다. Flutter 프레임워크와 Dart 프로그래밍 언어로 작성되었으며 Android 5 (롤리팝, API 21) 이후 버전의 모바일폰과 태블릿을 지원합니다.</p>
<div class="content-ad"></div>
<p>핵심 구성 요소</p>
<p>Flutter로 제작된 Android 앱은 시각적으로 직관적인 인터페이스를 제공합니다. 크로스 플랫폼 기능을 통해 일관된 경험을 제공하며 Flutter의 핫 리로드 기능을 추가하여 개발 및 테스트를 쉽게 할 수 있습니다.</p>
<p>앱은 상태를 원활하고 효율적으로 관리하기 위해 Riverpod 패키지를 활용합니다.</p>
<p>Riverpod는 반응형 캐싱 및 데이터 바인딩 프레임워크로, 애플리케이션의 상태를 쉽게 구성, 공유 및 업데이트할 수 있어 원활하고 유지보수 가능한 개발 경험을 보장합니다.</p>
<div class="content-ad"></div>
<p>우리 시스템의 핵심은 MQTT 프로토콜에 있습니다. 이 프로토콜을 통해 안드로이드 앱과 라즈베리 파이 서버 간에 실시간 통신이 가능해집니다. Mqtt_client 패키지는 메시지를 신속하고 효율적으로 교환하여 관개 시스템을 빠르고 반응적으로 제어할 수 있도록 도와줍니다.</p>
<p>초기 설정 과정을 간단하게 하기 위해 초기화 단계에서 Bluetooth 통신을 위해 flutter_blue_plus 패키지를 사용합니다. 이를 통해 안드로이드 앱이 중요한 Wi-Fi 자격 증명을 신속하게 라즈베리 파이 서버에 전송하여 인터넷에 안전하고 안정적으로 연결할 수 있게 됩니다.</p>
<p>기기 설정에 따라 자동으로 영어 및 그리스어를 지원합니다. 아래에서 설명된대로 언어를 추가하는 것이 용이합니다.</p>
<p>사용한 Flutter 패키지는 다음과 같습니다:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-yaml"><span class="hljs-attr">environment:</span>
  <span class="hljs-attr">sdk:</span> <span class="hljs-string">'>=3.1.0 &#x3C;4.0.0'</span>

<span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">collection:</span> <span class="hljs-string">^1.18.0</span>
  <span class="hljs-attr">duration_picker:</span> <span class="hljs-string">^1.1.1</span>
  <span class="hljs-attr">flutter:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
  <span class="hljs-attr">flutter_blue_plus:</span> <span class="hljs-string">^1.28.10</span>
  
  <span class="hljs-attr">flutter_localizations:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
  
  <span class="hljs-attr">flutter_riverpod:</span> <span class="hljs-string">^2.4.5</span>
  <span class="hljs-attr">google_fonts:</span> <span class="hljs-string">^6.1.0</span>
  <span class="hljs-attr">http:</span> <span class="hljs-string">^1.1.2</span>
  <span class="hljs-attr">intl:</span> <span class="hljs-string">^0.18.1</span>
  <span class="hljs-attr">mockingjay:</span> <span class="hljs-string">^0.5.0</span>
  <span class="hljs-attr">mocktail:</span> <span class="hljs-string">^1.0.3</span>
  <span class="hljs-attr">mqtt_client:</span> <span class="hljs-string">^10.0.0</span>
  <span class="hljs-attr">package_info_plus:</span> <span class="hljs-string">^5.0.1</span>
  <span class="hljs-attr">rename_app:</span> <span class="hljs-string">^1.3.1</span>
  <span class="hljs-attr">shared_preferences:</span> <span class="hljs-string">^2.2.2</span>
  <span class="hljs-attr">typed_data:</span> <span class="hljs-string">^1.3.2</span>
  <span class="hljs-attr">url_launcher:</span> <span class="hljs-string">^6.2.3</span>

<span class="hljs-attr">dev_dependencies:</span>
  <span class="hljs-attr">flutter_test:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>
  <span class="hljs-attr">integration_test:</span>
    <span class="hljs-attr">sdk:</span> <span class="hljs-string">flutter</span>

  <span class="hljs-attr">flutter_lints:</span> <span class="hljs-string">^2.0.0</span>
  <span class="hljs-attr">flutter_native_splash:</span> <span class="hljs-string">^2.3.9</span>
  <span class="hljs-attr">flutter_launcher_icons:</span> <span class="hljs-string">^0.13.1</span>
</code></pre>
<h2>지속적 통합</h2>
<p>현대 소프트웨어 개발에서 품질 표준이 각 빌드마다 일정하게 유지되도록 보장하려면 현재의 DevOps 도구를 활용해야 한다는 것은 부인할 수 없습니다. 이에 따라, 저희는 서버 및 모바일 앱 프로젝트 모두 GitHub Actions를 활용해 GitHub에서 구축되었습니다. GitHub Actions는 빌드, 테스트 및 릴리스 프로세스를 자동화할 수 있도록 하는 지속적 통합 및 지속적 전달(CI/CD) 플랫폼으로, 우리에게 이와 같은 기능을 제공했습니다.</p>
<p>따라서, 우리의 저장소에 대한 각 pull request에 대해, 우리는 사전 커밋 포매팅 도구, 린터, 단위 테스트를 실행합니다. 이러한 단계가 모두 성공적으로 통과되면 해당 pull request를 병합할 수 있습니다. 마찬가지로, 저장소 소유자가 새로운 Git 태그를 생성하여 새 릴리스를 작성하고자 할 때, 모든 CI 절차가 시작됩니다. 모든 검사가 통과되면:</p>
<div class="content-ad"></div>
<ul>
<li>새 릴리스가 생성되어 릴리스 섹션에 업로드되었습니다.</li>
<li>CHANGELOG.md 파일이 자동으로 업데이트되어 이전 릴리스 이후의 최신 커밋이 반영되었습니다.</li>
</ul>
<h1>데모</h1>
<h1>향후 계획</h1>
<p>각 프로젝트의 이슈 섹션에는 구현을 기다리고 있는 여러 잠재적인 향상 사항이 기술되어 있습니다. 이 프로젝트의 상용화는 산업용 케이스를 개발하고 유료 클라우드 기반 MQTT 브로커를 활용함으로써 원활하게 달성할 수 있습니다. 다른 모든 구성 요소는 단일 밸브에 주력하여 우리의 지역 정원에서 여러 날 동안 엄격한 테스트를 거쳤습니다.</p>
<div class="content-ad"></div>
<h1>결론</h1>
<p>이 프로젝트의 미래를 함께 만들어 나가는 것에 여러분을 초대합니다. 여러분의 협력, 피드백, 그리고 통찰력은 혁신을 이끌어가는 데 귀중한 자산입니다. 열렬한 지지자, 개발자, 또는 우리의 노력에 흥미를 느끼는 분이던, 언제든지 저희와 소통할 것을 장려합니다. 함께 새로운 가능성을 탐색하고, 기존 기능을 개선하며, 의미 있는 영향을 미칠 수 있습니다. 만약 이 프로젝트가 여러분을 영감을 주는 사례라면, 주변 사람들과 공유를 망설이지 마세요. 함께 놀라운 것을 만들어봅시다.</p>
<h1>참고 자료</h1>
<ul>
<li>서버 Github 저장소</li>
<li>Flutter Github 저장소</li>
<li>라즈베리 파이와 MQTT 가이드</li>
<li>GPIO 핀 연결 가이드</li>
</ul>
<div class="content-ad"></div>
<p><strong>사용한 도구 및 자원:</strong> VSCode, Raspberry Pi, CodiumAI</p>
<p>아래는 연락처 정보입니다! 이 프로젝트에 관한 질문이 있으시면 언제든지 이메일 보내주세요.</p>
<p>마리오스 카라기아나폴루스 <code>mariosk@gmail.com</code> 톰 마크로디모스 <code>tom.makrodi@gmail.com</code></p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"RaspirriV1로 라즈베리 파이 기반의 자동 급수기 만들기","description":"","date":"2024-05-18 21:28","slug":"2024-05-18-RaspirriV1ARaspberryPibasedirrigator","content":"\n\n몇 년 전에 제가 작은 잔디 정원을 관리하기 위한 책임을 맡아 상업용 스크린 LCD를 갖춘 자동 급수 시스템을 사용했어요. 그러나 COVID-19 대유행으로 인한 봉쇄 기간에 LCD 화면이 고장나면서 프로그래머 메뉴에 접근할 수 없게 되었어요.\n\n해결책을 찾기 위해 고장 난 LCD 화면을 모바일 앱으로 교체하고, 급수 시스템을 Raspberry Pi Zero로 대체하기로 결정했어요. 이 대체 방안을 추구한 동기는 시장에서 다른 상업적인 솔루션에 비해 경제적인 측면과 나의 새로운 프로젝트에 도전하는 즐거움이었어요. 게다가, 이 노력은 그리스 테살로니키에서 열린 Voxxed Days Conference에서 만난 Flutter 개발자인 Tom Makrodimos와의 협력으로 이끌어졌어요!\n\n# 프로젝트 개요\n\n제 주요 목표 중 하나인 기존 급수 시스템을 Raspberry Pi로 대체하기 위해 프로젝트를 `RaspirriV1`로 적절하게 명명했어요. 이는 Raspberry Irrigator Version 1을 상징하는 이름이에요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n서버 소프트웨어는 Python을 기반으로 하며, RaspirriV1 모바일 앱은 Flutter를 기반으로 합니다.\n\n# 개발 여정\n\n모바일 앱 및 서버 측 구성 요소의 아키텍처 설계와 구현을 시작하기 전에, 우리는 잠재적인 하드웨어적 과제에 대해 논의하였습니다. 그 시점에서, 라즈베리 파이가 24볼트 전원 공급이 필요한 전기 밸브를 제어할 수 있는 내재된 능력이 부족하다는 것을 알았습니다. 이 장애를 인식한 후, 전자 기술에 대한 전문 지식을 보유한 두 명의 친구인 Lambros Anastasopoulos와 Dimitris Iliopoulos에게 연락했습니다. 그들은 즉시 이 과제를 확인하고 해결책을 종이에 스케치하여 Proof-of-Concept를 스티로폼 보드에 만들었습니다:\n\n![사진](/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_0.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n전자 연결의 정확성을 확인하고 LED의 켜고 끄기 기능을 검증하기 위해 간단한 Python 구현을 빠르게 시작했습니다. Concept 증명은 성공적인 기능을 보여줌으로써 우리가 다음 단계로 진행할 확신을 더했습니다:\n\n구성품 비용은 선택한 특정 모델에 따라 다릅니다. 그러나 일반적인 추정 금액은 다음과 같습니다:\n\n- Raspberry Pi (Zero-4): $35–$55\n- Reley: $5–$10\n- 24V DC 전원 공급기: $10\n- LED: $1–$2\n- 전류 제한 저항기: $0.50–$1\n- Step-down 변환기: $5\n\n총액: $57–$83$\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n위에 나와 있는 회로도는 라즈베리 파이를 사용하여 릴레이를 제어하는 간단한 회로를 보여줍니다. 릴레이는 LED나 모터와 같은 고출력 부하를 켜고 끄는 데 사용됩니다. 이 회로는 24V DC 전원 공급기로 구동됩니다.\n\n라즈베리 파이는 디지털 출력 핀을 사용하여 릴레이에 연결됩니다. 라즈베리 파이가 출력 핀을 HIGH로 설정하면 릴레이 코일이 활성화되고 릴레이 접점이 닫힙니다. 이로써 24V 전원 공급기에서 하중으로 전류가 흐를 수 있습니다. 라즈베리 파이가 출력 핀을 LOW로 설정하면 릴레이 코일이 비활성화되고 릴레이 접점이 열립니다. 이로써 하중으로 전류가 흐르지 않게 됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n회로 내 LED는 부하가 켜졌을 때 표시하는 데 사용됩니다. LED는 24V 전원 공급원을 통해 전류 제한 저항을 통해 연결됩니다. 전류 제한 저항은 LED가 너무 많은 전류를 빨아들이고 소멸되는 것을 방지하기 위해 필요합니다.\n\n회로 내 Step-down 컨버터는 24V DC 전원 공급 전압을 5V DC로 변환하는 데 사용됩니다. 5V DC 전압은 Raspberry Pi를 구동하는 데 사용됩니다.\n\n# 소프트웨어 아키텍처\n\n![Image](/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_2.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n위의 UML 다이어그램에 따라 사용자가 모바일 앱을 라즈베리 파이 서버와 블루투스 통신을 통해 페어링하고 인터넷을 통해 제어하는 단계는 다음과 같습니다:\n\n단계 1: 사용자는 모바일 앱을 시작하고 설정-`연결 초기화'를 클릭하여 모바일 앱을 서버와 페어링합니다.\n\n\u003cimg src=\"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_3.png\"/\u003e\n\n단계 2: 사용자는 계속을 클릭하고 RaspirriV1 서버에서 사용할 사용 가능한 WiFi 네트워크 중 하나를 선택합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n![이미지](/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_4.png)\n\n### 단계-3: 준비 완료!!! 이제 앱을 사용하여 인터넷을 통해 관정을 제어하고 일정을 설정하며 시스템 상태를 모니터링할 수 있습니다. 앱을 처음 실행할 때는 밸브가 활성화되어 있지 않습니다. 라즈베리 파이에서 밸브를 활성화하고 해당 포트를 앱에서 선택할 수 있습니다.\n\n![이미지](/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_5.png)\n\n### 단계-4: 그런 다음 토글 버튼으로 밸브를 켜거나 끄거나 각 밸브에 대한 일정 프로그램을 만들 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![Program creation](/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_6.png)\n\nSTEP-5: To create a program, select days, start time, and duration. You can change the valve name if desired and then click Save. A new schedule will be created and saved in the raspirri-server storage.\n\n![Schedule creation](/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_7.png)\n\n# Raspberry Pi Server\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n라스피리V1을 위한 서버 소프트웨어는 세 가지 주요 모듈로 구성되어 있습니다:\n\n이 구성 요소는 클라우드 MQTT 브로커와의 통신을 설정하여 시스템 설정의 온라인 구성 및 유지 관리를 용이하게 합니다.\n\nBluetooth 특성을 등록하기 위해 설계된 이 모듈은 휴대 기기를 라스피리V1과 초기 페어링할 수 있게 합니다. 이 페어링 프로세스는 모바일 앱을 IoT 장치와 연결하기 위해 필요한 필수 최소 구성을 보장합니다.\n\nMQTT 모듈의 상태를 모니터링하고 필요한 경우 다시 시작하는 이 모듈이 구현되었습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n모든 모듈은 Raspbian OS에서 서로 다른 systemd 서비스로 시작됩니다. 사용된 Python 라이브러리는 다음과 같습니다:\n\n```js\nAPScheduler==3.10.4\n\n# Linting/Tooling\nblack\u003e=23.3.0\nbuild\u003e=0.10.0\nbump2version==1.0.1\ncodecov\u003e=2.1.13\nconfigparser==6.0.0\ncoverage==7.3.2\nDeprecated==1.2.13\ndistro==1.7.0\n\n# Raspirri\nfastapi[all]==0.109.1\nfeedparser==6.0.11\nfuture==0.18.3\ngetmac==0.8.3\ninvoke==2.2.0\nisort\u003e=5.12.0\nlockfile==0.12.2\nloguru==0.7.2\n\n# Documentation\nmkdocs\u003e=1.4.3\nmkdocs-material\u003e=9.1.14\nmkdocstrings\u003e=0.21.2\nmkdocstrings[python]\u003e=0.9.0\nmypy\u003e=1.3.0\npaho-mqtt==1.6.1\npre-commit\u003e=3.3.2\nPygments\u003e=2.15.1\npyright\u003e=1.1.309\n\n# Testing\npytest\u003e=7.4.3\npytest-asyncio==0.21.1\npytest-benchmark\u003e=4.0.0\npytest-cov\u003e=4.1.0\npytest-mock==3.12.0\npytest-ordering==0.6\nrequests==2.31.0\nruff\u003e=0.0.270\n\n# Linting/Tooling\nsetuptools\u003e=67.8.0\nsubprocess.run==0.0.8\nuvicorn==0.27.0\n```\n\n# Flutter 모바일 앱\n\nRaspirriV1 모바일 앱은 RaspirriV1 서버 소프트웨어의 자동 급수 시스템 컨트롤러입니다. Flutter 프레임워크와 Dart 프로그래밍 언어로 작성되었으며 Android 5 (롤리팝, API 21) 이후 버전의 모바일폰과 태블릿을 지원합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n핵심 구성 요소\n\nFlutter로 제작된 Android 앱은 시각적으로 직관적인 인터페이스를 제공합니다. 크로스 플랫폼 기능을 통해 일관된 경험을 제공하며 Flutter의 핫 리로드 기능을 추가하여 개발 및 테스트를 쉽게 할 수 있습니다.\n\n앱은 상태를 원활하고 효율적으로 관리하기 위해 Riverpod 패키지를 활용합니다.\n\nRiverpod는 반응형 캐싱 및 데이터 바인딩 프레임워크로, 애플리케이션의 상태를 쉽게 구성, 공유 및 업데이트할 수 있어 원활하고 유지보수 가능한 개발 경험을 보장합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n우리 시스템의 핵심은 MQTT 프로토콜에 있습니다. 이 프로토콜을 통해 안드로이드 앱과 라즈베리 파이 서버 간에 실시간 통신이 가능해집니다. Mqtt_client 패키지는 메시지를 신속하고 효율적으로 교환하여 관개 시스템을 빠르고 반응적으로 제어할 수 있도록 도와줍니다.\n\n초기 설정 과정을 간단하게 하기 위해 초기화 단계에서 Bluetooth 통신을 위해 flutter_blue_plus 패키지를 사용합니다. 이를 통해 안드로이드 앱이 중요한 Wi-Fi 자격 증명을 신속하게 라즈베리 파이 서버에 전송하여 인터넷에 안전하고 안정적으로 연결할 수 있게 됩니다.\n\n기기 설정에 따라 자동으로 영어 및 그리스어를 지원합니다. 아래에서 설명된대로 언어를 추가하는 것이 용이합니다.\n\n사용한 Flutter 패키지는 다음과 같습니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```yaml\nenvironment:\n  sdk: '\u003e=3.1.0 \u003c4.0.0'\n\ndependencies:\n  collection: ^1.18.0\n  duration_picker: ^1.1.1\n  flutter:\n    sdk: flutter\n  flutter_blue_plus: ^1.28.10\n  \n  flutter_localizations:\n    sdk: flutter\n  \n  flutter_riverpod: ^2.4.5\n  google_fonts: ^6.1.0\n  http: ^1.1.2\n  intl: ^0.18.1\n  mockingjay: ^0.5.0\n  mocktail: ^1.0.3\n  mqtt_client: ^10.0.0\n  package_info_plus: ^5.0.1\n  rename_app: ^1.3.1\n  shared_preferences: ^2.2.2\n  typed_data: ^1.3.2\n  url_launcher: ^6.2.3\n\ndev_dependencies:\n  flutter_test:\n    sdk: flutter\n  integration_test:\n    sdk: flutter\n\n  flutter_lints: ^2.0.0\n  flutter_native_splash: ^2.3.9\n  flutter_launcher_icons: ^0.13.1\n```\n\n## 지속적 통합\n\n현대 소프트웨어 개발에서 품질 표준이 각 빌드마다 일정하게 유지되도록 보장하려면 현재의 DevOps 도구를 활용해야 한다는 것은 부인할 수 없습니다. 이에 따라, 저희는 서버 및 모바일 앱 프로젝트 모두 GitHub Actions를 활용해 GitHub에서 구축되었습니다. GitHub Actions는 빌드, 테스트 및 릴리스 프로세스를 자동화할 수 있도록 하는 지속적 통합 및 지속적 전달(CI/CD) 플랫폼으로, 우리에게 이와 같은 기능을 제공했습니다.\n\n따라서, 우리의 저장소에 대한 각 pull request에 대해, 우리는 사전 커밋 포매팅 도구, 린터, 단위 테스트를 실행합니다. 이러한 단계가 모두 성공적으로 통과되면 해당 pull request를 병합할 수 있습니다. 마찬가지로, 저장소 소유자가 새로운 Git 태그를 생성하여 새 릴리스를 작성하고자 할 때, 모든 CI 절차가 시작됩니다. 모든 검사가 통과되면:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 새 릴리스가 생성되어 릴리스 섹션에 업로드되었습니다.\n- CHANGELOG.md 파일이 자동으로 업데이트되어 이전 릴리스 이후의 최신 커밋이 반영되었습니다.\n\n# 데모\n\n# 향후 계획\n\n각 프로젝트의 이슈 섹션에는 구현을 기다리고 있는 여러 잠재적인 향상 사항이 기술되어 있습니다. 이 프로젝트의 상용화는 산업용 케이스를 개발하고 유료 클라우드 기반 MQTT 브로커를 활용함으로써 원활하게 달성할 수 있습니다. 다른 모든 구성 요소는 단일 밸브에 주력하여 우리의 지역 정원에서 여러 날 동안 엄격한 테스트를 거쳤습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 결론\n\n이 프로젝트의 미래를 함께 만들어 나가는 것에 여러분을 초대합니다. 여러분의 협력, 피드백, 그리고 통찰력은 혁신을 이끌어가는 데 귀중한 자산입니다. 열렬한 지지자, 개발자, 또는 우리의 노력에 흥미를 느끼는 분이던, 언제든지 저희와 소통할 것을 장려합니다. 함께 새로운 가능성을 탐색하고, 기존 기능을 개선하며, 의미 있는 영향을 미칠 수 있습니다. 만약 이 프로젝트가 여러분을 영감을 주는 사례라면, 주변 사람들과 공유를 망설이지 마세요. 함께 놀라운 것을 만들어봅시다.\n\n# 참고 자료\n\n- 서버 Github 저장소\n- Flutter Github 저장소\n- 라즈베리 파이와 MQTT 가이드\n- GPIO 핀 연결 가이드\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n**사용한 도구 및 자원:** VSCode, Raspberry Pi, CodiumAI\n\n아래는 연락처 정보입니다! 이 프로젝트에 관한 질문이 있으시면 언제든지 이메일 보내주세요.\n\n마리오스 카라기아나폴루스 `mariosk@gmail.com` 톰 마크로디모스 `tom.makrodi@gmail.com`","ogImage":{"url":"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_0.png"},"coverImage":"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e몇 년 전에 제가 작은 잔디 정원을 관리하기 위한 책임을 맡아 상업용 스크린 LCD를 갖춘 자동 급수 시스템을 사용했어요. 그러나 COVID-19 대유행으로 인한 봉쇄 기간에 LCD 화면이 고장나면서 프로그래머 메뉴에 접근할 수 없게 되었어요.\u003c/p\u003e\n\u003cp\u003e해결책을 찾기 위해 고장 난 LCD 화면을 모바일 앱으로 교체하고, 급수 시스템을 Raspberry Pi Zero로 대체하기로 결정했어요. 이 대체 방안을 추구한 동기는 시장에서 다른 상업적인 솔루션에 비해 경제적인 측면과 나의 새로운 프로젝트에 도전하는 즐거움이었어요. 게다가, 이 노력은 그리스 테살로니키에서 열린 Voxxed Days Conference에서 만난 Flutter 개발자인 Tom Makrodimos와의 협력으로 이끌어졌어요!\u003c/p\u003e\n\u003ch1\u003e프로젝트 개요\u003c/h1\u003e\n\u003cp\u003e제 주요 목표 중 하나인 기존 급수 시스템을 Raspberry Pi로 대체하기 위해 프로젝트를 \u003ccode\u003eRaspirriV1\u003c/code\u003e로 적절하게 명명했어요. 이는 Raspberry Irrigator Version 1을 상징하는 이름이에요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e서버 소프트웨어는 Python을 기반으로 하며, RaspirriV1 모바일 앱은 Flutter를 기반으로 합니다.\u003c/p\u003e\n\u003ch1\u003e개발 여정\u003c/h1\u003e\n\u003cp\u003e모바일 앱 및 서버 측 구성 요소의 아키텍처 설계와 구현을 시작하기 전에, 우리는 잠재적인 하드웨어적 과제에 대해 논의하였습니다. 그 시점에서, 라즈베리 파이가 24볼트 전원 공급이 필요한 전기 밸브를 제어할 수 있는 내재된 능력이 부족하다는 것을 알았습니다. 이 장애를 인식한 후, 전자 기술에 대한 전문 지식을 보유한 두 명의 친구인 Lambros Anastasopoulos와 Dimitris Iliopoulos에게 연락했습니다. 그들은 즉시 이 과제를 확인하고 해결책을 종이에 스케치하여 Proof-of-Concept를 스티로폼 보드에 만들었습니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_0.png\" alt=\"사진\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e전자 연결의 정확성을 확인하고 LED의 켜고 끄기 기능을 검증하기 위해 간단한 Python 구현을 빠르게 시작했습니다. Concept 증명은 성공적인 기능을 보여줌으로써 우리가 다음 단계로 진행할 확신을 더했습니다:\u003c/p\u003e\n\u003cp\u003e구성품 비용은 선택한 특정 모델에 따라 다릅니다. 그러나 일반적인 추정 금액은 다음과 같습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eRaspberry Pi (Zero-4): $35–$55\u003c/li\u003e\n\u003cli\u003eReley: $5–$10\u003c/li\u003e\n\u003cli\u003e24V DC 전원 공급기: $10\u003c/li\u003e\n\u003cli\u003eLED: $1–$2\u003c/li\u003e\n\u003cli\u003e전류 제한 저항기: $0.50–$1\u003c/li\u003e\n\u003cli\u003eStep-down 변환기: $5\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e총액: $57–$83$\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e위에 나와 있는 회로도는 라즈베리 파이를 사용하여 릴레이를 제어하는 간단한 회로를 보여줍니다. 릴레이는 LED나 모터와 같은 고출력 부하를 켜고 끄는 데 사용됩니다. 이 회로는 24V DC 전원 공급기로 구동됩니다.\u003c/p\u003e\n\u003cp\u003e라즈베리 파이는 디지털 출력 핀을 사용하여 릴레이에 연결됩니다. 라즈베리 파이가 출력 핀을 HIGH로 설정하면 릴레이 코일이 활성화되고 릴레이 접점이 닫힙니다. 이로써 24V 전원 공급기에서 하중으로 전류가 흐를 수 있습니다. 라즈베리 파이가 출력 핀을 LOW로 설정하면 릴레이 코일이 비활성화되고 릴레이 접점이 열립니다. 이로써 하중으로 전류가 흐르지 않게 됩니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e회로 내 LED는 부하가 켜졌을 때 표시하는 데 사용됩니다. LED는 24V 전원 공급원을 통해 전류 제한 저항을 통해 연결됩니다. 전류 제한 저항은 LED가 너무 많은 전류를 빨아들이고 소멸되는 것을 방지하기 위해 필요합니다.\u003c/p\u003e\n\u003cp\u003e회로 내 Step-down 컨버터는 24V DC 전원 공급 전압을 5V DC로 변환하는 데 사용됩니다. 5V DC 전압은 Raspberry Pi를 구동하는 데 사용됩니다.\u003c/p\u003e\n\u003ch1\u003e소프트웨어 아키텍처\u003c/h1\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_2.png\" alt=\"Image\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e위의 UML 다이어그램에 따라 사용자가 모바일 앱을 라즈베리 파이 서버와 블루투스 통신을 통해 페어링하고 인터넷을 통해 제어하는 단계는 다음과 같습니다:\u003c/p\u003e\n\u003cp\u003e단계 1: 사용자는 모바일 앱을 시작하고 설정-`연결 초기화'를 클릭하여 모바일 앱을 서버와 페어링합니다.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_3.png\"\u003e\n\u003cp\u003e단계 2: 사용자는 계속을 클릭하고 RaspirriV1 서버에서 사용할 사용 가능한 WiFi 네트워크 중 하나를 선택합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_4.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003ch3\u003e단계-3: 준비 완료!!! 이제 앱을 사용하여 인터넷을 통해 관정을 제어하고 일정을 설정하며 시스템 상태를 모니터링할 수 있습니다. 앱을 처음 실행할 때는 밸브가 활성화되어 있지 않습니다. 라즈베리 파이에서 밸브를 활성화하고 해당 포트를 앱에서 선택할 수 있습니다.\u003c/h3\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_5.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003ch3\u003e단계-4: 그런 다음 토글 버튼으로 밸브를 켜거나 끄거나 각 밸브에 대한 일정 프로그램을 만들 수 있습니다.\u003c/h3\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_6.png\" alt=\"Program creation\"\u003e\u003c/p\u003e\n\u003cp\u003eSTEP-5: To create a program, select days, start time, and duration. You can change the valve name if desired and then click Save. A new schedule will be created and saved in the raspirri-server storage.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-RaspirriV1ARaspberryPibasedirrigator_7.png\" alt=\"Schedule creation\"\u003e\u003c/p\u003e\n\u003ch1\u003eRaspberry Pi Server\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e라스피리V1을 위한 서버 소프트웨어는 세 가지 주요 모듈로 구성되어 있습니다:\u003c/p\u003e\n\u003cp\u003e이 구성 요소는 클라우드 MQTT 브로커와의 통신을 설정하여 시스템 설정의 온라인 구성 및 유지 관리를 용이하게 합니다.\u003c/p\u003e\n\u003cp\u003eBluetooth 특성을 등록하기 위해 설계된 이 모듈은 휴대 기기를 라스피리V1과 초기 페어링할 수 있게 합니다. 이 페어링 프로세스는 모바일 앱을 IoT 장치와 연결하기 위해 필요한 필수 최소 구성을 보장합니다.\u003c/p\u003e\n\u003cp\u003eMQTT 모듈의 상태를 모니터링하고 필요한 경우 다시 시작하는 이 모듈이 구현되었습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e모든 모듈은 Raspbian OS에서 서로 다른 systemd 서비스로 시작됩니다. 사용된 Python 라이브러리는 다음과 같습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eAPScheduler\u003c/span\u003e==\u003cspan class=\"hljs-number\"\u003e3.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.4\u003c/span\u003e\n\n# \u003cspan class=\"hljs-title class_\"\u003eLinting\u003c/span\u003e/\u003cspan class=\"hljs-title class_\"\u003eTooling\u003c/span\u003e\nblack\u003e=\u003cspan class=\"hljs-number\"\u003e23.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nbuild\u003e=\u003cspan class=\"hljs-number\"\u003e0.10\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nbump2version==\u003cspan class=\"hljs-number\"\u003e1.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\ncodecov\u003e=\u003cspan class=\"hljs-number\"\u003e2.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.13\u003c/span\u003e\nconfigparser==\u003cspan class=\"hljs-number\"\u003e6.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\ncoverage==\u003cspan class=\"hljs-number\"\u003e7.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eDeprecated\u003c/span\u003e==\u003cspan class=\"hljs-number\"\u003e1.2\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.13\u003c/span\u003e\ndistro==\u003cspan class=\"hljs-number\"\u003e1.7\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\n# \u003cspan class=\"hljs-title class_\"\u003eRaspirri\u003c/span\u003e\nfastapi[all]==\u003cspan class=\"hljs-number\"\u003e0.109\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\nfeedparser==\u003cspan class=\"hljs-number\"\u003e6.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.11\u003c/span\u003e\nfuture==\u003cspan class=\"hljs-number\"\u003e0.18\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\ngetmac==\u003cspan class=\"hljs-number\"\u003e0.8\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\ninvoke==\u003cspan class=\"hljs-number\"\u003e2.2\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nisort\u003e=\u003cspan class=\"hljs-number\"\u003e5.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nlockfile==\u003cspan class=\"hljs-number\"\u003e0.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2\u003c/span\u003e\nloguru==\u003cspan class=\"hljs-number\"\u003e0.7\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2\u003c/span\u003e\n\n# \u003cspan class=\"hljs-title class_\"\u003eDocumentation\u003c/span\u003e\nmkdocs\u003e=\u003cspan class=\"hljs-number\"\u003e1.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\nmkdocs-material\u003e=\u003cspan class=\"hljs-number\"\u003e9.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.14\u003c/span\u003e\nmkdocstrings\u003e=\u003cspan class=\"hljs-number\"\u003e0.21\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2\u003c/span\u003e\nmkdocstrings[python]\u003e=\u003cspan class=\"hljs-number\"\u003e0.9\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nmypy\u003e=\u003cspan class=\"hljs-number\"\u003e1.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\npaho-mqtt==\u003cspan class=\"hljs-number\"\u003e1.6\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\npre-commit\u003e=\u003cspan class=\"hljs-number\"\u003e3.3\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.2\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003ePygments\u003c/span\u003e\u003e=\u003cspan class=\"hljs-number\"\u003e2.15\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\npyright\u003e=\u003cspan class=\"hljs-number\"\u003e1.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.309\u003c/span\u003e\n\n# \u003cspan class=\"hljs-title class_\"\u003eTesting\u003c/span\u003e\npytest\u003e=\u003cspan class=\"hljs-number\"\u003e7.4\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.3\u003c/span\u003e\npytest-asyncio==\u003cspan class=\"hljs-number\"\u003e0.21\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\npytest-benchmark\u003e=\u003cspan class=\"hljs-number\"\u003e4.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\npytest-cov\u003e=\u003cspan class=\"hljs-number\"\u003e4.1\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\npytest-mock==\u003cspan class=\"hljs-number\"\u003e3.12\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\npytest-ordering==\u003cspan class=\"hljs-number\"\u003e0.6\u003c/span\u003e\nrequests==\u003cspan class=\"hljs-number\"\u003e2.31\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nruff\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.270\u003c/span\u003e\n\n# \u003cspan class=\"hljs-title class_\"\u003eLinting\u003c/span\u003e/\u003cspan class=\"hljs-title class_\"\u003eTooling\u003c/span\u003e\nsetuptools\u003e=\u003cspan class=\"hljs-number\"\u003e67.8\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\nsubprocess.\u003cspan class=\"hljs-property\"\u003erun\u003c/span\u003e==\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.8\u003c/span\u003e\nuvicorn==\u003cspan class=\"hljs-number\"\u003e0.27\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eFlutter 모바일 앱\u003c/h1\u003e\n\u003cp\u003eRaspirriV1 모바일 앱은 RaspirriV1 서버 소프트웨어의 자동 급수 시스템 컨트롤러입니다. Flutter 프레임워크와 Dart 프로그래밍 언어로 작성되었으며 Android 5 (롤리팝, API 21) 이후 버전의 모바일폰과 태블릿을 지원합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e핵심 구성 요소\u003c/p\u003e\n\u003cp\u003eFlutter로 제작된 Android 앱은 시각적으로 직관적인 인터페이스를 제공합니다. 크로스 플랫폼 기능을 통해 일관된 경험을 제공하며 Flutter의 핫 리로드 기능을 추가하여 개발 및 테스트를 쉽게 할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e앱은 상태를 원활하고 효율적으로 관리하기 위해 Riverpod 패키지를 활용합니다.\u003c/p\u003e\n\u003cp\u003eRiverpod는 반응형 캐싱 및 데이터 바인딩 프레임워크로, 애플리케이션의 상태를 쉽게 구성, 공유 및 업데이트할 수 있어 원활하고 유지보수 가능한 개발 경험을 보장합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e우리 시스템의 핵심은 MQTT 프로토콜에 있습니다. 이 프로토콜을 통해 안드로이드 앱과 라즈베리 파이 서버 간에 실시간 통신이 가능해집니다. Mqtt_client 패키지는 메시지를 신속하고 효율적으로 교환하여 관개 시스템을 빠르고 반응적으로 제어할 수 있도록 도와줍니다.\u003c/p\u003e\n\u003cp\u003e초기 설정 과정을 간단하게 하기 위해 초기화 단계에서 Bluetooth 통신을 위해 flutter_blue_plus 패키지를 사용합니다. 이를 통해 안드로이드 앱이 중요한 Wi-Fi 자격 증명을 신속하게 라즈베리 파이 서버에 전송하여 인터넷에 안전하고 안정적으로 연결할 수 있게 됩니다.\u003c/p\u003e\n\u003cp\u003e기기 설정에 따라 자동으로 영어 및 그리스어를 지원합니다. 아래에서 설명된대로 언어를 추가하는 것이 용이합니다.\u003c/p\u003e\n\u003cp\u003e사용한 Flutter 패키지는 다음과 같습니다:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003esdk:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'\u003e=3.1.0 \u0026#x3C;4.0.0'\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003edependencies:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ecollection:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^1.18.0\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eduration_picker:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^1.1.1\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003esdk:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eflutter\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_blue_plus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^1.28.10\u003c/span\u003e\n  \n  \u003cspan class=\"hljs-attr\"\u003eflutter_localizations:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003esdk:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eflutter\u003c/span\u003e\n  \n  \u003cspan class=\"hljs-attr\"\u003eflutter_riverpod:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^2.4.5\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003egoogle_fonts:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^6.1.0\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ehttp:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^1.1.2\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eintl:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^0.18.1\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emockingjay:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^0.5.0\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emocktail:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^1.0.3\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emqtt_client:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^10.0.0\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epackage_info_plus:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^5.0.1\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003erename_app:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^1.3.1\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eshared_preferences:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^2.2.2\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003etyped_data:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^1.3.2\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eurl_launcher:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^6.2.3\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003edev_dependencies:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_test:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003esdk:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eflutter\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eintegration_test:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003esdk:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eflutter\u003c/span\u003e\n\n  \u003cspan class=\"hljs-attr\"\u003eflutter_lints:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^2.0.0\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_native_splash:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^2.3.9\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eflutter_launcher_icons:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e^0.13.1\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e지속적 통합\u003c/h2\u003e\n\u003cp\u003e현대 소프트웨어 개발에서 품질 표준이 각 빌드마다 일정하게 유지되도록 보장하려면 현재의 DevOps 도구를 활용해야 한다는 것은 부인할 수 없습니다. 이에 따라, 저희는 서버 및 모바일 앱 프로젝트 모두 GitHub Actions를 활용해 GitHub에서 구축되었습니다. GitHub Actions는 빌드, 테스트 및 릴리스 프로세스를 자동화할 수 있도록 하는 지속적 통합 및 지속적 전달(CI/CD) 플랫폼으로, 우리에게 이와 같은 기능을 제공했습니다.\u003c/p\u003e\n\u003cp\u003e따라서, 우리의 저장소에 대한 각 pull request에 대해, 우리는 사전 커밋 포매팅 도구, 린터, 단위 테스트를 실행합니다. 이러한 단계가 모두 성공적으로 통과되면 해당 pull request를 병합할 수 있습니다. 마찬가지로, 저장소 소유자가 새로운 Git 태그를 생성하여 새 릴리스를 작성하고자 할 때, 모든 CI 절차가 시작됩니다. 모든 검사가 통과되면:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e새 릴리스가 생성되어 릴리스 섹션에 업로드되었습니다.\u003c/li\u003e\n\u003cli\u003eCHANGELOG.md 파일이 자동으로 업데이트되어 이전 릴리스 이후의 최신 커밋이 반영되었습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e데모\u003c/h1\u003e\n\u003ch1\u003e향후 계획\u003c/h1\u003e\n\u003cp\u003e각 프로젝트의 이슈 섹션에는 구현을 기다리고 있는 여러 잠재적인 향상 사항이 기술되어 있습니다. 이 프로젝트의 상용화는 산업용 케이스를 개발하고 유료 클라우드 기반 MQTT 브로커를 활용함으로써 원활하게 달성할 수 있습니다. 다른 모든 구성 요소는 단일 밸브에 주력하여 우리의 지역 정원에서 여러 날 동안 엄격한 테스트를 거쳤습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003cp\u003e이 프로젝트의 미래를 함께 만들어 나가는 것에 여러분을 초대합니다. 여러분의 협력, 피드백, 그리고 통찰력은 혁신을 이끌어가는 데 귀중한 자산입니다. 열렬한 지지자, 개발자, 또는 우리의 노력에 흥미를 느끼는 분이던, 언제든지 저희와 소통할 것을 장려합니다. 함께 새로운 가능성을 탐색하고, 기존 기능을 개선하며, 의미 있는 영향을 미칠 수 있습니다. 만약 이 프로젝트가 여러분을 영감을 주는 사례라면, 주변 사람들과 공유를 망설이지 마세요. 함께 놀라운 것을 만들어봅시다.\u003c/p\u003e\n\u003ch1\u003e참고 자료\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e서버 Github 저장소\u003c/li\u003e\n\u003cli\u003eFlutter Github 저장소\u003c/li\u003e\n\u003cli\u003e라즈베리 파이와 MQTT 가이드\u003c/li\u003e\n\u003cli\u003eGPIO 핀 연결 가이드\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003cstrong\u003e사용한 도구 및 자원:\u003c/strong\u003e VSCode, Raspberry Pi, CodiumAI\u003c/p\u003e\n\u003cp\u003e아래는 연락처 정보입니다! 이 프로젝트에 관한 질문이 있으시면 언제든지 이메일 보내주세요.\u003c/p\u003e\n\u003cp\u003e마리오스 카라기아나폴루스 \u003ccode\u003emariosk@gmail.com\u003c/code\u003e 톰 마크로디모스 \u003ccode\u003etom.makrodi@gmail.com\u003c/code\u003e\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-18-RaspirriV1ARaspberryPibasedirrigator"},"buildId":"Y-fCAg8BUV7y2HNFwX9AA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>