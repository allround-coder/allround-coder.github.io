<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>REST 엔드포인트를 데이터 소스로 사용하는 GraphQL 쿼리 작성하기 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="REST 엔드포인트를 데이터 소스로 사용하는 GraphQL 쿼리 작성하기 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="REST 엔드포인트를 데이터 소스로 사용하는 GraphQL 쿼리 작성하기 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource" data-gatsby-head="true"/><meta name="twitter:title" content="REST 엔드포인트를 데이터 소스로 사용하는 GraphQL 쿼리 작성하기 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-18 21:26" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cd012fc8787133d0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cd012fc8787133d0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/551-3069cf29fe274aab.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-a8eda6c93e0b14fe.js" defer=""></script><script src="/_next/static/7rKODeu6chWTLgXf6auoL/_buildManifest.js" defer=""></script><script src="/_next/static/7rKODeu6chWTLgXf6auoL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">REST 엔드포인트를 데이터 소스로 사용하는 GraphQL 쿼리 작성하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="REST 엔드포인트를 데이터 소스로 사용하는 GraphQL 쿼리 작성하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/assets/profile.jpg"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 18, 2024</span><span class="posts_reading_time__f7YPP">7<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><p><img src="/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_0.png" alt="image"/></p>
<p>이 짧은 기사에서는 RESTful 엔드포인트에서 데이터를 가져오는 간단한 GraphQL 쿼리를 어떻게 생성할 수 있는지 살펴보겠습니다. 이를 위해 Node.js와 Apollo Server를 사용할 것입니다.</p>
<p>이 기사에서는 예시로 간단한 사용자 리소스인 Users를 살펴보겠습니다. 이 글의 목표는 apollo GraphQL 서버를 사용하여 기존 REST 엔드포인트를 데이터 소스로 활용하는 쿼리를 작성하는 데 필요한 단계와 구성을 간략히 개요로 설명하는 것뿐입니다.</p>
<h2>PlainEnglish.io에서 더 많은 내용 확인 가능합니다.</h2>
<div class="content-ad"></div>
<p>우리 무료 주간 뉴스레터를 구독해보세요. Twitter, LinkedIn, YouTube, 그리고 Discord에서도 팔로우해주세요.</p>
<h2>당신의 기술 창업품을 알림과 채용을 확대하려고 하세요? Circuit을 확인해보세요.</h2>
<p>이것이 응담하는 클라이언트에게 응답에서 투영되는 필드를 더 많은 제어를 제공하고 싶을 때 유용할 수 있습니다.</p>
<p>자, 더 이상 말이 필요없으니 시작해봅시다:</p>
<div class="content-ad"></div>
<h1>GraphQL 프로젝트 초기화:</h1>
<p>새 디렉토리를 gserver로 만들고 cd gserver라고 입력하여 디렉토리를 변경해 봅시다.</p>
<p>이제 yarn init -y로 프로젝트를 초기화해 봅시다.</p>
<h2>Dependencies 추가:</h2>
<div class="content-ad"></div>
<p>저희가 주요하게 사용하는 의존성은 graphQL과 apollo-server 패키지입니다. 그러니 이들을 프로젝트에 추가해봅시다:</p>
<pre><code class="hljs language-js">yarn add apollo-server graphql
</code></pre>
<p>개발 중에 서버가 변경 사항이 생길 때 자동으로 다시 시작되도록 하려면 nodemon을 개발 의존성으로 추가해봅시다:</p>
<pre><code class="hljs language-js">yarn add --dev nodemon
</code></pre>
<div class="content-ad"></div>
<p>지금 우리의 package.json 파일은 다음과 같이 보일 것입니다:</p>
<pre><code class="hljs language-js">{
  <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;gserver&quot;</span>,
  <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;1.0.0&quot;</span>,
  <span class="hljs-string">&quot;main&quot;</span>: <span class="hljs-string">&quot;index.js&quot;</span>,
  <span class="hljs-string">&quot;license&quot;</span>: <span class="hljs-string">&quot;MIT&quot;</span>,
  <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;module&quot;</span>,
  <span class="hljs-string">&quot;dependencies&quot;</span>: {
    <span class="hljs-string">&quot;apollo-server&quot;</span>: <span class="hljs-string">&quot;^3.10.2&quot;</span>,
    <span class="hljs-string">&quot;graphql&quot;</span>: <span class="hljs-string">&quot;^16.6.0&quot;</span>
  },
  <span class="hljs-string">&quot;devDependencies&quot;</span>: {
    <span class="hljs-string">&quot;nodemon&quot;</span>: <span class="hljs-string">&quot;^2.0.19&quot;</span>
  }
}
</code></pre>
<p>참고: 저는 패키지 매니저로 Yarn을 사용하고 있지만, npm을 사용해도 괜찮습니다.</p>
<h2>index 파일을 생성하세요:</h2>
<div class="content-ad"></div>
<p>프로젝트의 루트에 index.js라는 파일을 만들어주세요. 이 파일은 우리의 GraphQL 서버의 진입점이 될 것입니다.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApolloServer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;apollo-server&quot;</span>;
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApolloServer</span>();
server
  .<span class="hljs-title function_">listen</span>({<span class="hljs-attr">port</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">5000</span>})
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">{url}</span>)=&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`서버 실행 중 : <span class="hljs-subst">${url}</span>`</span>));
</code></pre>
<p>기본적인 GraphQL 서버가 설정되었으니, package.json에 nodemon을 사용하여 개발 모드에서 시작하는 스크립트를 추가해봅시다:</p>
<pre><code class="hljs language-js">{
...기존의 package.<span class="hljs-property">json</span> 내용
<span class="hljs-string">&quot;scripts&quot;</span>: {
    <span class="hljs-string">&quot;dev&quot;</span>: <span class="hljs-string">&quot;nodemon index.js&quot;</span>
  }
 ... 남은 내용
}
</code></pre>
<div class="content-ad"></div>
<h1>사용자 스키마 생성하기:</h1>
<p>스키마는 우리가 GraphQL에서 쿼리와 뮤테이션을 위한 유형과 그 하위 구조를 정의하는 방법입니다.</p>
<p>프로젝트 루트에 schema라는 디렉토리를 빠르게 생성해봅시다.</p>
<p>스키마를 정의하기 위해 gql이라는 특별한 태그를 사용할 것입니다.</p>
<div class="content-ad"></div>
<p>사용자 스키마는 다음과 같이 정의될 수 있습니다:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// schema/user.js</span>
<span class="hljs-keyword">import</span> { gql } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;apollo-server&quot;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">User</span> = gql`<span class="graphql">
  <span class="hljs-keyword">type</span> User <span class="hljs-punctuation">{</span>
    <span class="hljs-symbol">id</span><span class="hljs-punctuation">:</span> ID<span class="hljs-punctuation">!</span>,
    <span class="hljs-symbol">email</span><span class="hljs-punctuation">:</span> String,
    <span class="hljs-symbol">name</span><span class="hljs-punctuation">:</span> String
  <span class="hljs-punctuation">}</span>
</span></code></pre>
<p>UUID를 위해 우리는 graphQL에서 ID라는 특별한 타입을 사용하며, &#x27;!&#x27; 표시는 값이 null일 수 없음을 의미합니다.</p>
<p>따라서 User라는 타입을 정의하고 사용자 객체에 대한 스키마를 생성했습니다.</p>
<div class="content-ad"></div>
<h1>사용자 쿼리 정의:</h1>
<p>GraphQL에서는 데이터를 가져오는 쿼리(REST 용어로는 GET 요청과 동일하다고 볼 수 있음)를 정의할 때 잘 정의된 스키마가 필요합니다. 이 예시에서는 기본 사용자 서비스 엔드포인트에서 모든 사용자를 가져오고자 합니다. 그러므로 모든 사용자를 가져오기 위한 쿼리를 정의해봅시다:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// schema/query.js</span>
<span class="hljs-keyword">import</span> { gql } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;apollo-server&quot;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Query</span> = gql`<span class="graphql">
  <span class="hljs-keyword">type</span> <span class="hljs-keyword">Query</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-symbol">users</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>User<span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</span></code></pre>
<p>사용자 쿼리로 여러 사용자를 검색할 것이기 때문에 그 유형을 이전에 스키마에서 정의한 User 유형의 배열로 지정합니다.</p>
<div class="content-ad"></div>
<p>편의를 위해 스키마 디렉토리 아래에 인덱스 파일을 만들고 정의된 스키마를 다음과 같이 노출해봅시다:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// schema/index.js</span>
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./user.js&#x27;</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Query</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./query.js&#x27;</span>;
</code></pre>
<h1>서버 실행:</h1>
<p>저희가 정의한 스키마를 포함하는 서버의 진입점인 index.js를 수정해봅시다:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApolloServer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;apollo-server&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Query</span>, <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./schema/index.js&quot;</span>;
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApolloServer</span>({<span class="hljs-attr">typeDefs</span>:[<span class="hljs-title class_">Query</span>,<span class="hljs-title class_">User</span>]});
server
  .<span class="hljs-title function_">listen</span>({ <span class="hljs-attr">port</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">5000</span> })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">{ url }</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`gserver at : <span class="hljs-subst">${url}</span>`</span>));
</code></pre>
<p>이제 터미널에서 <code>yarn dev</code>라고 입력해보세요:</p>
<img src="/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_1.png"/>
<p>브라우저를 http://localhost:5000 에서 열어볼 때, 모든게 잘 되었다면 다음 화면을 보게 됩니다:</p>
<div class="content-ad"></div>
<img src="/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_2.png"/>
<p>&quot;Query Your Server&quot; 버튼을 클릭하면 아폴로 스튜디오로 이동하게 되는데, 여기서 정의된 스키마를 찾을 수 있어요:</p>
<img src="/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_3.png"/>
<p>아직 많이 할 수 있는 것은 없어요. 그래서 다음 섹션에서 사용자 정보를 가져오기 위한 리졸버를 추가해볼게요.</p>
<div class="content-ad"></div>
<h1>사용자 RESTful 서비스:</h1>
<p>저희는 현재 포트 3000에서 실행 중인 사용자 서비스가 있습니다. 현재 localhost:3000/users 엔드포인트에 대한 다음 응답을 반환합니다 :</p>
<p><img src="/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_4.png" alt="이미지"/></p>
<p>이것은 express 서버에서 실행 중인 전형적인 RESTful 엔드포인트입니다. 이미 구현되어 있으므로 많은 걱정할 필요가 없습니다. 이 기사의 초점은 기존 REST 엔드포인트와 graphQL 쿼리를 인터페이싱하는 것뿐입니다.</p>
<div class="content-ad"></div>
<h1>사용자 데이터 소스 및 리졸버:</h1>
<p>이제 우리는 그래프큐엘 사용자 쿼리를 위에서 언급된 RESTful 엔드포인트에서 데이터를 가져오도록 매핑해야 합니다. 이를 하기 위해 dataSource를 정의하고 resolver에 매핑하는 방법을 살펴볼 수 있습니다.</p>
<p>이 섹션에서는 Rest 엔드포인트에서 모든 사용자를 가져오기 위해 그것을 하는 방법을 살펴보겠습니다.</p>
<h2>사용자 데이터 소스:</h2>
<div class="content-ad"></div>
<p>우리가 데이터 소스로 REST 엔드포인트를 사용할 것이기 때문에, 아폴로 팀이 만든 apollo-datasource-rest 패키지를 설치해봅시다. 이 패키지는 캐싱과 같은 중요한 기능을 다루므로 우리가 걱정할 필요가 없습니다.</p>
<p>프로젝트에 패키지를 추가해봅시다:</p>
<pre><code class="hljs language-js">yarn add apollo-datasource-rest
</code></pre>
<p>이제 프로젝트 루트에 datasource라는 디렉토리를 만들어 다음과 같이 정의해봅시다:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">// datasource/users.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RESTDataSource</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;apollo-datasource-rest&quot;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UsersAPI</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">RESTDataSource</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>){
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseURL</span> = <span class="hljs-string">&quot;http://localhost:3000/&quot;</span>
  }
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAllUsers</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;users&#x27;</span>)
  }
}
</code></pre>
<p><code>baseURL</code>는 우리 usersservice를 위한 기본 URL이어야 합니다.</p>
<p>datasource 디렉토리의 인덱스 파일은 다음과 같이 될 것입니다:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// datasource/index.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UsersAPI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./users.js&quot;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">dataSources</span> = (<span class="hljs-params"></span>) =&gt; ({
  <span class="hljs-title class_">UsersAPI</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">UsersAPI</span>()
});
</code></pre>
<div class="content-ad"></div>
<h2>사용자 리졸버:</h2>
<p>모든 사용자를 가져오는 우리의 리졸버를 추가해보겠습니다. 프로젝트 루트에 resolvers라는 디렉토리를 만들고 다음을 추가합니다:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// resolvers/users.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> userResolvers = {
  <span class="hljs-attr">users</span>: <span class="hljs-function">(<span class="hljs-params">parent, args, {dataSources}, info</span>) =&gt;</span> dataSources.<span class="hljs-property">UsersAPI</span>.<span class="hljs-title function_">getAllUsers</span>()
}
</code></pre>
<p>다음 세션에서 서버의 진입점과 연결할 때 이해할 수 있을 것입니다. 리졸버 인덱스에 다음을 추가합시다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">// resolvers/index.js</span>
<span class="hljs-keyword">import</span> { userResolvers } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./users.js&quot;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> resolvers = {
  <span class="hljs-title class_">Query</span>: {
    ...userResolvers
  }
}
</code></pre>
<h2>서버와 연결하기:</h2>
<p>데이터 소스와 리졸버를 서버에 연결하려면 프로젝트 루트에 있는 index.js 파일을 다음과 같이 수정하십시오:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApolloServer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;apollo-server&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Query</span>, <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./schema/index.js&quot;</span>;
<span class="hljs-keyword">import</span> { resolvers } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./resolver/index.js&quot;</span>;
<span class="hljs-keyword">import</span> { dataSources } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./datasource/index.js&quot;</span>;
<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApolloServer</span>({ <span class="hljs-attr">typeDefs</span>:[<span class="hljs-title class_">Query</span>,<span class="hljs-title class_">User</span> ], resolvers, dataSources });
server
  .<span class="hljs-title function_">listen</span>({ <span class="hljs-attr">port</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">5000</span> })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">{ url }</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`서버가 실행 중: <span class="hljs-subst">${url}</span>`</span>));
</code></pre>
<div class="content-ad"></div>
<p>이제 로컬호스트:5000에서 실행 중인 GraphQL 플레이그라운드로 이동하여 다음과 같이 모든 사용자를 검색하는 쿼리를 실행할 수 있습니다:</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/1*X9A5GeYoCB8dxYsROmk6VQ.gif" alt="이미지"/></p>
<p>REST 엔드포인트와 달리 GraphQL 쿼리에서는 사용자 스키마에서 필요한 필드만 선택적으로 가져올 수 있습니다.</p>
<h1>결론:</h1>
<div class="content-ad"></div>
<p>따라서 기존 REST 엔드포인트에서 데이터를 가져오는 기능이 포함된 GraphQL 쿼리를 만들었습니다. 또한 필요한 다양한 구성 요소 및 구성 설정이 무엇이며, 이를 어떻게 연결하여 작동시키는지 살펴보았습니다.</p></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"REST 엔드포인트를 데이터 소스로 사용하는 GraphQL 쿼리 작성하기","description":"","date":"2024-05-18 21:26","slug":"2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource","content":"\n\n![image](/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_0.png)\n\n이 짧은 기사에서는 RESTful 엔드포인트에서 데이터를 가져오는 간단한 GraphQL 쿼리를 어떻게 생성할 수 있는지 살펴보겠습니다. 이를 위해 Node.js와 Apollo Server를 사용할 것입니다.\n\n이 기사에서는 예시로 간단한 사용자 리소스인 Users를 살펴보겠습니다. 이 글의 목표는 apollo GraphQL 서버를 사용하여 기존 REST 엔드포인트를 데이터 소스로 활용하는 쿼리를 작성하는 데 필요한 단계와 구성을 간략히 개요로 설명하는 것뿐입니다.\n\n## PlainEnglish.io에서 더 많은 내용 확인 가능합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n우리 무료 주간 뉴스레터를 구독해보세요. Twitter, LinkedIn, YouTube, 그리고 Discord에서도 팔로우해주세요.\n\n## 당신의 기술 창업품을 알림과 채용을 확대하려고 하세요? Circuit을 확인해보세요.\n\n이것이 응담하는 클라이언트에게 응답에서 투영되는 필드를 더 많은 제어를 제공하고 싶을 때 유용할 수 있습니다.\n\n자, 더 이상 말이 필요없으니 시작해봅시다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# GraphQL 프로젝트 초기화:\n\n새 디렉토리를 gserver로 만들고 cd gserver라고 입력하여 디렉토리를 변경해 봅시다.\n\n이제 yarn init -y로 프로젝트를 초기화해 봅시다.\n\n## Dependencies 추가:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n저희가 주요하게 사용하는 의존성은 graphQL과 apollo-server 패키지입니다. 그러니 이들을 프로젝트에 추가해봅시다:\n\n```js\nyarn add apollo-server graphql\n```\n\n개발 중에 서버가 변경 사항이 생길 때 자동으로 다시 시작되도록 하려면 nodemon을 개발 의존성으로 추가해봅시다:\n\n```js\nyarn add --dev nodemon\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n지금 우리의 package.json 파일은 다음과 같이 보일 것입니다:\n\n```js\n{\n  \"name\": \"gserver\",\n  \"version\": \"1.0.0\",\n  \"main\": \"index.js\",\n  \"license\": \"MIT\",\n  \"type\": \"module\",\n  \"dependencies\": {\n    \"apollo-server\": \"^3.10.2\",\n    \"graphql\": \"^16.6.0\"\n  },\n  \"devDependencies\": {\n    \"nodemon\": \"^2.0.19\"\n  }\n}\n```\n\n참고: 저는 패키지 매니저로 Yarn을 사용하고 있지만, npm을 사용해도 괜찮습니다.\n\n## index 파일을 생성하세요:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n프로젝트의 루트에 index.js라는 파일을 만들어주세요. 이 파일은 우리의 GraphQL 서버의 진입점이 될 것입니다.\n\n```js\n// index.js\nimport { ApolloServer } from \"apollo-server\";\nconst server = new ApolloServer();\nserver\n  .listen({port: process.env.PORT || 5000})\n  .then(({url})=\u003e console.log(`서버 실행 중 : ${url}`));\n```\n\n기본적인 GraphQL 서버가 설정되었으니, package.json에 nodemon을 사용하여 개발 모드에서 시작하는 스크립트를 추가해봅시다:\n\n```js\n{\n...기존의 package.json 내용\n\"scripts\": {\n    \"dev\": \"nodemon index.js\"\n  }\n ... 남은 내용\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 사용자 스키마 생성하기:\n\n스키마는 우리가 GraphQL에서 쿼리와 뮤테이션을 위한 유형과 그 하위 구조를 정의하는 방법입니다.\n\n프로젝트 루트에 schema라는 디렉토리를 빠르게 생성해봅시다.\n\n스키마를 정의하기 위해 gql이라는 특별한 태그를 사용할 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n사용자 스키마는 다음과 같이 정의될 수 있습니다:\n\n```js\n// schema/user.js\nimport { gql } from \"apollo-server\";\nexport const User = gql`\n  type User {\n    id: ID!,\n    email: String,\n    name: String\n  }\n``` \n\nUUID를 위해 우리는 graphQL에서 ID라는 특별한 타입을 사용하며, '!' 표시는 값이 null일 수 없음을 의미합니다.\n\n따라서 User라는 타입을 정의하고 사용자 객체에 대한 스키마를 생성했습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 사용자 쿼리 정의:\n\nGraphQL에서는 데이터를 가져오는 쿼리(REST 용어로는 GET 요청과 동일하다고 볼 수 있음)를 정의할 때 잘 정의된 스키마가 필요합니다. 이 예시에서는 기본 사용자 서비스 엔드포인트에서 모든 사용자를 가져오고자 합니다. 그러므로 모든 사용자를 가져오기 위한 쿼리를 정의해봅시다:\n\n```js\n// schema/query.js\nimport { gql } from \"apollo-server\";\nexport const Query = gql`\n  type Query {\n    users: [User]\n}\n```\n\n사용자 쿼리로 여러 사용자를 검색할 것이기 때문에 그 유형을 이전에 스키마에서 정의한 User 유형의 배열로 지정합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n편의를 위해 스키마 디렉토리 아래에 인덱스 파일을 만들고 정의된 스키마를 다음과 같이 노출해봅시다:\n\n```js\n// schema/index.js\nexport { User } from './user.js';\nexport { Query } from './query.js';\n```\n\n# 서버 실행:\n\n저희가 정의한 스키마를 포함하는 서버의 진입점인 index.js를 수정해봅시다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n// index.js\nimport { ApolloServer } from \"apollo-server\";\nimport { Query, User } from \"./schema/index.js\";\nconst server = new ApolloServer({typeDefs:[Query,User]});\nserver\n  .listen({ port: process.env.PORT || 5000 })\n  .then(({ url }) =\u003e console.log(`gserver at : ${url}`));\n```\n\n이제 터미널에서 `yarn dev`라고 입력해보세요:\n\n\u003cimg src=\"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_1.png\" /\u003e\n\n브라우저를 http://localhost:5000 에서 열어볼 때, 모든게 잘 되었다면 다음 화면을 보게 됩니다:\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_2.png\" /\u003e\n\n\"Query Your Server\" 버튼을 클릭하면 아폴로 스튜디오로 이동하게 되는데, 여기서 정의된 스키마를 찾을 수 있어요:\n\n\u003cimg src=\"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_3.png\" /\u003e\n\n아직 많이 할 수 있는 것은 없어요. 그래서 다음 섹션에서 사용자 정보를 가져오기 위한 리졸버를 추가해볼게요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 사용자 RESTful 서비스:\n\n저희는 현재 포트 3000에서 실행 중인 사용자 서비스가 있습니다. 현재 localhost:3000/users 엔드포인트에 대한 다음 응답을 반환합니다 :\n\n![이미지](/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_4.png)\n\n이것은 express 서버에서 실행 중인 전형적인 RESTful 엔드포인트입니다. 이미 구현되어 있으므로 많은 걱정할 필요가 없습니다. 이 기사의 초점은 기존 REST 엔드포인트와 graphQL 쿼리를 인터페이싱하는 것뿐입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 사용자 데이터 소스 및 리졸버:\n\n이제 우리는 그래프큐엘 사용자 쿼리를 위에서 언급된 RESTful 엔드포인트에서 데이터를 가져오도록 매핑해야 합니다. 이를 하기 위해 dataSource를 정의하고 resolver에 매핑하는 방법을 살펴볼 수 있습니다.\n\n이 섹션에서는 Rest 엔드포인트에서 모든 사용자를 가져오기 위해 그것을 하는 방법을 살펴보겠습니다.\n\n## 사용자 데이터 소스:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n우리가 데이터 소스로 REST 엔드포인트를 사용할 것이기 때문에, 아폴로 팀이 만든 apollo-datasource-rest 패키지를 설치해봅시다. 이 패키지는 캐싱과 같은 중요한 기능을 다루므로 우리가 걱정할 필요가 없습니다.\n\n프로젝트에 패키지를 추가해봅시다:\n\n```js\nyarn add apollo-datasource-rest\n```\n\n이제 프로젝트 루트에 datasource라는 디렉토리를 만들어 다음과 같이 정의해봅시다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n// datasource/users.js\nimport { RESTDataSource } from \"apollo-datasource-rest\";\nexport class UsersAPI extends RESTDataSource {\n  constructor(){\n    super();\n    this.baseURL = \"http://localhost:3000/\"\n  }\n  async getAllUsers() {\n    return this.get('users')\n  }\n}\n```\n\n`baseURL`는 우리 usersservice를 위한 기본 URL이어야 합니다.\n\ndatasource 디렉토리의 인덱스 파일은 다음과 같이 될 것입니다:\n\n```js\n// datasource/index.js\nimport { UsersAPI } from \"./users.js\";\nexport const dataSources = () =\u003e ({\n  UsersAPI: new UsersAPI()\n});\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 사용자 리졸버:\n\n모든 사용자를 가져오는 우리의 리졸버를 추가해보겠습니다. 프로젝트 루트에 resolvers라는 디렉토리를 만들고 다음을 추가합니다:\n\n```js\n// resolvers/users.js\nexport const userResolvers = {\n  users: (parent, args, {dataSources}, info) =\u003e dataSources.UsersAPI.getAllUsers()\n}\n```\n\n다음 세션에서 서버의 진입점과 연결할 때 이해할 수 있을 것입니다. 리졸버 인덱스에 다음을 추가합시다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n// resolvers/index.js\nimport { userResolvers } from \"./users.js\";\nexport const resolvers = {\n  Query: {\n    ...userResolvers\n  }\n}\n```\n\n## 서버와 연결하기:\n\n데이터 소스와 리졸버를 서버에 연결하려면 프로젝트 루트에 있는 index.js 파일을 다음과 같이 수정하십시오:\n\n```js\n// index.js\nimport { ApolloServer } from \"apollo-server\";\nimport { Query, User } from \"./schema/index.js\";\nimport { resolvers } from \"./resolver/index.js\";\nimport { dataSources } from \"./datasource/index.js\";\nconst server = new ApolloServer({ typeDefs:[Query,User ], resolvers, dataSources });\nserver\n  .listen({ port: process.env.PORT || 5000 })\n  .then(({ url }) =\u003e console.log(`서버가 실행 중: ${url}`));\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이제 로컬호스트:5000에서 실행 중인 GraphQL 플레이그라운드로 이동하여 다음과 같이 모든 사용자를 검색하는 쿼리를 실행할 수 있습니다:\n\n![이미지](https://miro.medium.com/v2/resize:fit:1400/1*X9A5GeYoCB8dxYsROmk6VQ.gif)\n\nREST 엔드포인트와 달리 GraphQL 쿼리에서는 사용자 스키마에서 필요한 필드만 선택적으로 가져올 수 있습니다.\n\n# 결론:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n따라서 기존 REST 엔드포인트에서 데이터를 가져오는 기능이 포함된 GraphQL 쿼리를 만들었습니다. 또한 필요한 다양한 구성 요소 및 구성 설정이 무엇이며, 이를 어떻게 연결하여 작동시키는지 살펴보았습니다.","ogImage":{"url":"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_0.png"},"coverImage":"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_0.png","tag":["Tech"],"readingTime":7},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    h2: \"h2\",\n    h1: \"h1\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_0.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 짧은 기사에서는 RESTful 엔드포인트에서 데이터를 가져오는 간단한 GraphQL 쿼리를 어떻게 생성할 수 있는지 살펴보겠습니다. 이를 위해 Node.js와 Apollo Server를 사용할 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 기사에서는 예시로 간단한 사용자 리소스인 Users를 살펴보겠습니다. 이 글의 목표는 apollo GraphQL 서버를 사용하여 기존 REST 엔드포인트를 데이터 소스로 활용하는 쿼리를 작성하는 데 필요한 단계와 구성을 간략히 개요로 설명하는 것뿐입니다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"PlainEnglish.io에서 더 많은 내용 확인 가능합니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리 무료 주간 뉴스레터를 구독해보세요. Twitter, LinkedIn, YouTube, 그리고 Discord에서도 팔로우해주세요.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"당신의 기술 창업품을 알림과 채용을 확대하려고 하세요? Circuit을 확인해보세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이것이 응담하는 클라이언트에게 응답에서 투영되는 필드를 더 많은 제어를 제공하고 싶을 때 유용할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"자, 더 이상 말이 필요없으니 시작해봅시다:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"GraphQL 프로젝트 초기화:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"새 디렉토리를 gserver로 만들고 cd gserver라고 입력하여 디렉토리를 변경해 봅시다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 yarn init -y로 프로젝트를 초기화해 봅시다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Dependencies 추가:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"저희가 주요하게 사용하는 의존성은 graphQL과 apollo-server 패키지입니다. 그러니 이들을 프로젝트에 추가해봅시다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"yarn add apollo-server graphql\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"개발 중에 서버가 변경 사항이 생길 때 자동으로 다시 시작되도록 하려면 nodemon을 개발 의존성으로 추가해봅시다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"yarn add --dev nodemon\\n\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"지금 우리의 package.json 파일은 다음과 같이 보일 것입니다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"{\\n  \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"name\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"gserver\\\"\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"version\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"1.0.0\\\"\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"main\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"index.js\\\"\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"license\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"MIT\\\"\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"type\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"module\\\"\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"dependencies\\\"\"\n        }), \": {\\n    \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"apollo-server\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"^3.10.2\\\"\"\n        }), \",\\n    \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"graphql\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"^16.6.0\\\"\"\n        }), \"\\n  },\\n  \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"devDependencies\\\"\"\n        }), \": {\\n    \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"nodemon\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"^2.0.19\\\"\"\n        }), \"\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"참고: 저는 패키지 매니저로 Yarn을 사용하고 있지만, npm을 사용해도 괜찮습니다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"index 파일을 생성하세요:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"프로젝트의 루트에 index.js라는 파일을 만들어주세요. 이 파일은 우리의 GraphQL 서버의 진입점이 될 것입니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// index.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApolloServer\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"apollo-server\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" server = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApolloServer\"\n        }), \"();\\nserver\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"listen\"\n        }), \"({\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"port\"\n        }), \": process.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"env\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"PORT\"\n        }), \" || \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"5000\"\n        }), \"})\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"then\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [\"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"{url}\"\n          }), \")=\u003e\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"console\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"log\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-string\",\n          children: [\"`서버 실행 중 : \", _jsx(_components.span, {\n            className: \"hljs-subst\",\n            children: \"${url}\"\n          }), \"`\"]\n        }), \"));\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"기본적인 GraphQL 서버가 설정되었으니, package.json에 nodemon을 사용하여 개발 모드에서 시작하는 스크립트를 추가해봅시다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"{\\n...기존의 package.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"json\"\n        }), \" 내용\\n\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"scripts\\\"\"\n        }), \": {\\n    \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"dev\\\"\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"nodemon index.js\\\"\"\n        }), \"\\n  }\\n ... 남은 내용\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"사용자 스키마 생성하기:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"스키마는 우리가 GraphQL에서 쿼리와 뮤테이션을 위한 유형과 그 하위 구조를 정의하는 방법입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"프로젝트 루트에 schema라는 디렉토리를 빠르게 생성해봅시다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"스키마를 정의하기 위해 gql이라는 특별한 태그를 사용할 것입니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"사용자 스키마는 다음과 같이 정의될 수 있습니다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// schema/user.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { gql } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"apollo-server\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"User\"\n        }), \" = gql`\", _jsxs(_components.span, {\n          className: \"graphql\",\n          children: [\"\\n  \", _jsx(_components.span, {\n            className: \"hljs-keyword\",\n            children: \"type\"\n          }), \" User \", _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \"{\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"hljs-symbol\",\n            children: \"id\"\n          }), _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \":\"\n          }), \" ID\", _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \"!\"\n          }), \",\\n    \", _jsx(_components.span, {\n            className: \"hljs-symbol\",\n            children: \"email\"\n          }), _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \":\"\n          }), \" String,\\n    \", _jsx(_components.span, {\n            className: \"hljs-symbol\",\n            children: \"name\"\n          }), _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \":\"\n          }), \" String\\n  \", _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"UUID를 위해 우리는 graphQL에서 ID라는 특별한 타입을 사용하며, '!' 표시는 값이 null일 수 없음을 의미합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"따라서 User라는 타입을 정의하고 사용자 객체에 대한 스키마를 생성했습니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"사용자 쿼리 정의:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"GraphQL에서는 데이터를 가져오는 쿼리(REST 용어로는 GET 요청과 동일하다고 볼 수 있음)를 정의할 때 잘 정의된 스키마가 필요합니다. 이 예시에서는 기본 사용자 서비스 엔드포인트에서 모든 사용자를 가져오고자 합니다. 그러므로 모든 사용자를 가져오기 위한 쿼리를 정의해봅시다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// schema/query.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { gql } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"apollo-server\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Query\"\n        }), \" = gql`\", _jsxs(_components.span, {\n          className: \"graphql\",\n          children: [\"\\n  \", _jsx(_components.span, {\n            className: \"hljs-keyword\",\n            children: \"type\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-keyword\",\n            children: \"Query\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \"{\"\n          }), \"\\n    \", _jsx(_components.span, {\n            className: \"hljs-symbol\",\n            children: \"users\"\n          }), _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \":\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \"[\"\n          }), \"User\", _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \"]\"\n          }), \"\\n\", _jsx(_components.span, {\n            className: \"hljs-punctuation\",\n            children: \"}\"\n          }), \"\\n\"]\n        })]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"사용자 쿼리로 여러 사용자를 검색할 것이기 때문에 그 유형을 이전에 스키마에서 정의한 User 유형의 배열로 지정합니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"편의를 위해 스키마 디렉토리 아래에 인덱스 파일을 만들고 정의된 스키마를 다음과 같이 노출해봅시다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// schema/index.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"User\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./user.js'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Query\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./query.js'\"\n        }), \";\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"서버 실행:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"저희가 정의한 스키마를 포함하는 서버의 진입점인 index.js를 수정해봅시다:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// index.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApolloServer\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"apollo-server\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Query\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"User\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./schema/index.js\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" server = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApolloServer\"\n        }), \"({\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"typeDefs\"\n        }), \":[\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Query\"\n        }), \",\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"User\"\n        }), \"]});\\nserver\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"listen\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"port\"\n        }), \": process.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"env\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"PORT\"\n        }), \" || \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"5000\"\n        }), \" })\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"then\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [\"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"{ url }\"\n          }), \") =\u003e\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"console\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"log\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-string\",\n          children: [\"`gserver at : \", _jsx(_components.span, {\n            className: \"hljs-subst\",\n            children: \"${url}\"\n          }), \"`\"]\n        }), \"));\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"이제 터미널에서 \", _jsx(_components.code, {\n        children: \"yarn dev\"\n      }), \"라고 입력해보세요:\"]\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_1.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"브라우저를 http://localhost:5000 에서 열어볼 때, 모든게 잘 되었다면 다음 화면을 보게 됩니다:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_2.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"\\\"Query Your Server\\\" 버튼을 클릭하면 아폴로 스튜디오로 이동하게 되는데, 여기서 정의된 스키마를 찾을 수 있어요:\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_3.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"아직 많이 할 수 있는 것은 없어요. 그래서 다음 섹션에서 사용자 정보를 가져오기 위한 리졸버를 추가해볼게요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"사용자 RESTful 서비스:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"저희는 현재 포트 3000에서 실행 중인 사용자 서비스가 있습니다. 현재 localhost:3000/users 엔드포인트에 대한 다음 응답을 반환합니다 :\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource_4.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이것은 express 서버에서 실행 중인 전형적인 RESTful 엔드포인트입니다. 이미 구현되어 있으므로 많은 걱정할 필요가 없습니다. 이 기사의 초점은 기존 REST 엔드포인트와 graphQL 쿼리를 인터페이싱하는 것뿐입니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"사용자 데이터 소스 및 리졸버:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 우리는 그래프큐엘 사용자 쿼리를 위에서 언급된 RESTful 엔드포인트에서 데이터를 가져오도록 매핑해야 합니다. 이를 하기 위해 dataSource를 정의하고 resolver에 매핑하는 방법을 살펴볼 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 섹션에서는 Rest 엔드포인트에서 모든 사용자를 가져오기 위해 그것을 하는 방법을 살펴보겠습니다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"사용자 데이터 소스:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리가 데이터 소스로 REST 엔드포인트를 사용할 것이기 때문에, 아폴로 팀이 만든 apollo-datasource-rest 패키지를 설치해봅시다. 이 패키지는 캐싱과 같은 중요한 기능을 다루므로 우리가 걱정할 필요가 없습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"프로젝트에 패키지를 추가해봅시다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"yarn add apollo-datasource-rest\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 프로젝트 루트에 datasource라는 디렉토리를 만들어 다음과 같이 정의해봅시다:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// datasource/users.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"RESTDataSource\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"apollo-datasource-rest\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersAPI\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"extends\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_ inherited__\",\n          children: \"RESTDataSource\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \"){\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"super\"\n        }), \"();\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"baseURL\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"http://localhost:3000/\\\"\"\n        }), \"\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getAllUsers\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"get\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'users'\"\n        }), \")\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"baseURL\"\n      }), \"는 우리 usersservice를 위한 기본 URL이어야 합니다.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"datasource 디렉토리의 인덱스 파일은 다음과 같이 될 것입니다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// datasource/index.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersAPI\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./users.js\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"dataSources\"\n        }), \" = (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") =\u003e ({\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersAPI\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersAPI\"\n        }), \"()\\n});\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"사용자 리졸버:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"모든 사용자를 가져오는 우리의 리졸버를 추가해보겠습니다. 프로젝트 루트에 resolvers라는 디렉토리를 만들고 다음을 추가합니다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// resolvers/users.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" userResolvers = {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"users\"\n        }), \": \", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [\"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"parent, args, {dataSources}, info\"\n          }), \") =\u003e\"]\n        }), \" dataSources.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"UsersAPI\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getAllUsers\"\n        }), \"()\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음 세션에서 서버의 진입점과 연결할 때 이해할 수 있을 것입니다. 리졸버 인덱스에 다음을 추가합시다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// resolvers/index.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { userResolvers } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./users.js\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" resolvers = {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Query\"\n        }), \": {\\n    ...userResolvers\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"서버와 연결하기:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"데이터 소스와 리졸버를 서버에 연결하려면 프로젝트 루트에 있는 index.js 파일을 다음과 같이 수정하십시오:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// index.js\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApolloServer\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"apollo-server\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Query\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"User\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./schema/index.js\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { resolvers } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./resolver/index.js\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { dataSources } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./datasource/index.js\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" server = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApolloServer\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"typeDefs\"\n        }), \":[\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Query\"\n        }), \",\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"User\"\n        }), \" ], resolvers, dataSources });\\nserver\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"listen\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"port\"\n        }), \": process.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"env\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"PORT\"\n        }), \" || \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"5000\"\n        }), \" })\\n  .\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"then\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [\"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"{ url }\"\n          }), \") =\u003e\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"console\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"log\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-string\",\n          children: [\"`서버가 실행 중: \", _jsx(_components.span, {\n            className: \"hljs-subst\",\n            children: \"${url}\"\n          }), \"`\"]\n        }), \"));\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 로컬호스트:5000에서 실행 중인 GraphQL 플레이그라운드로 이동하여 다음과 같이 모든 사용자를 검색하는 쿼리를 실행할 수 있습니다:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://miro.medium.com/v2/resize:fit:1400/1*X9A5GeYoCB8dxYsROmk6VQ.gif\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"REST 엔드포인트와 달리 GraphQL 쿼리에서는 사용자 스키마에서 필요한 필드만 선택적으로 가져올 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"결론:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"따라서 기존 REST 엔드포인트에서 데이터를 가져오는 기능이 포함된 GraphQL 쿼리를 만들었습니다. 또한 필요한 다양한 구성 요소 및 구성 설정이 무엇이며, 이를 어떻게 연결하여 작동시키는지 살펴보았습니다.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-18-CreateaGraphQLQueryWithaRESTEndpointAsaDataSource"},"buildId":"7rKODeu6chWTLgXf6auoL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>