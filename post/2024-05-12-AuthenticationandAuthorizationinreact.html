<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>리액트에서의 인증과 권한 부여 방법 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-12-AuthenticationandAuthorizationinreact" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="리액트에서의 인증과 권한 부여 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="리액트에서의 인증과 권한 부여 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-12-AuthenticationandAuthorizationinreact" data-gatsby-head="true"/><meta name="twitter:title" content="리액트에서의 인증과 권한 부여 방법 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-12 20:14" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/QH5Mz7n7Y6w0r4_gCGFQf/_buildManifest.js" defer=""></script><script src="/_next/static/QH5Mz7n7Y6w0r4_gCGFQf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">리액트에서의 인증과 권한 부여 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="리액트에서의 인증과 권한 부여 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 12, 2024</span><span class="posts_reading_time__f7YPP">10<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-12-AuthenticationandAuthorizationinreact&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>우리는 이 튜토리얼에서 React 앱에 대한 인증 및 권한 부여 기능을 활용할 것입니다. 시작해 봅시다...</p>
<p>인증이란 무엇인가요?</p>
<p>인증은 제공된 자격 증명을 사용하여 사용자의 신원을 확인하는 과정입니다. 사용자가 정당한지 확인하는 것이 일반적입니다.</p>
<p>권한이란 무엇인가요?</p>
<p>인증은 사용자 클라이언트의 권한이나 액세스 수준을 결정하는 보안 절차입니다. 인증된 사용자가 작업을 수행할 수 있는 권한 또는 액세스 여부를 확인하는 것은 표준 절차입니다.</p>
<p>파일과 폴더를 정리해 봅시다.</p>
<p>src 하위에 components 폴더를 만듭니다.
그런 다음 다음 파일을 만듭니다: Unauthorized.js, Navbar.js, Profile.js, Extra.js, Home.js, About.js, Extra.js.</p>
<p><img src="/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_0.png" alt="이미지"></p>
<p>리액트 라우터 패키지를 사용할 것이기 때문에 다음 명령어를 사용하여 설치해 보겠습니다.</p>
<p>NPM을 사용하는 경우</p>
<pre><code class="hljs language-js">npm install react-router-dom@<span class="hljs-number">6</span>
</code></pre>
<p>Yarn을 사용하는 경우</p>
<pre><code class="hljs language-js">yarn add react-router-dom@<span class="hljs-number">6</span>
</code></pre>
<p>새로운 폴더를 만들어서 routes라고 이름 짓기로 하자.</p>
<p>다음 파일을 만들어보세요: Authentication.js, Authorization.js, 그리고 RoutePath.js.</p>
<img src="/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_1.png">
<p>permissions와 provider라는 이름의 두 개의 추가 폴더를 만들어 주세요. permissions 폴더 안에 permissions.js 파일을, provider 폴더 안에는 authprovider.js 파일을 만들어 주세요.</p>
<p>우린 이제 폴더 구조를 마칩니다.</p>
<p><img src="/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_2.png" alt="Authentication and Authorization in react"></p>
<p>인증 및 권한 부여가 어떻게 구현되는지 이해하는 것이 우리의 유일한 목표이기 때문에 복잡한 코드나 디자인에 신경쓰지 않을 거에요.</p>
<p>지금 파일을 수정하기 시작하세요!!!</p>
<p>Permissions.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PERMISSIONS</span> = {
  <span class="hljs-attr">CAN_VIEW_ABOUT</span>: <span class="hljs-string">"view_about"</span>,
  <span class="hljs-attr">CAN_VIEW_EXTRA</span>: <span class="hljs-string">"view_extra"</span>,
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-variable constant_">PERMISSIONS</span>;
</code></pre>
<p>일부 데이터에 무단으로 접근을 막기 위해 권한을 만들었습니다.</p>
<p>AuthProvider.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { createContext, useContext, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { useNavigate, useLocation } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AuthContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">AuthProvider</span> = (<span class="hljs-params">{ children }</span>) => {
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
  <span class="hljs-keyword">const</span> redirectPath = location.<span class="hljs-property">state</span>?.<span class="hljs-property">path</span> || <span class="hljs-string">"/profile"</span>;
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">username</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">permissions</span>: [],
  });
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params">user</span>) => {
    <span class="hljs-keyword">if</span> (user === <span class="hljs-string">"admin"</span>) {
      <span class="hljs-title function_">setUser</span>({ <span class="hljs-attr">username</span>: user, <span class="hljs-attr">permissions</span>: [<span class="hljs-string">"view_extra"</span>] });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">setUser</span>({ <span class="hljs-attr">username</span>: user, <span class="hljs-attr">permissions</span>: [<span class="hljs-string">"view_about"</span>] });
    }
    <span class="hljs-title function_">navigate</span>(redirectPath, { <span class="hljs-attr">replace</span>: <span class="hljs-literal">true</span> });
  };
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">logout</span> = (<span class="hljs-params"></span>) => {
    <span class="hljs-title function_">setUser</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">""</span>, <span class="hljs-attr">permissions</span>: [] });
  };
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">AuthContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{(user,</span> <span class="hljs-attr">login</span>, <span class="hljs-attr">logout</span>)}></span>{children}<span class="hljs-tag">&#x3C;/<span class="hljs-name">AuthContext.Provider</span>></span></span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useAuth</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">AuthContext</span>);
};
</code></pre>
<p>현재 로그인한 사용자와 부여된 권한을 저장하기 위해 사용자라는 상태 변수 객체를 만들었습니다.</p>
<p>login() 함수는 사용자 매개변수를 받습니다. 사용자가 관리자이면 할당된 권한은 view_extra가 되고, 그렇지 않으면 view_about이 됩니다. 사용자 이름은 사용자와 동일합니다. 그 후, 페이지를 보려고 시도한 경로 또는 프로필 페이지로 이동합니다.</p>
<p>사용자 변수는 logout()에 의해 클리어됩니다.</p>
<p>우리는 context를 구축하고 user, login, logout 값을 provider를 통해 props로 전달했습니다. 앱 전체에서 어디서든 이를 액세스할 수 있습니다.</p>
<p>Authentication.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { useAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">"../provider/AuthProvider"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Navigate</span>, useLocation } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Authentication</span> = (<span class="hljs-params">{ children }</span>) => {
  <span class="hljs-keyword">const</span> { user } = <span class="hljs-title function_">useAuth</span>();
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();

  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">username</span>) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">state</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">path:</span> <span class="hljs-attr">location.pathname</span> }} /></span></span>;
  }

  <span class="hljs-keyword">return</span> children;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Authentication</span>;
</code></pre>
<p>useAuth()를 통해 사용자 객체에 액세스할 수 있었습니다. username 속성이 없다면 로그인되지 않은 상태로 간주되어 로그인 페이지로 이동합니다. 그 외의 경우에는 요청한 페이지가 표시됩니다.</p>
<p>Authorization.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Navigate</span>, useLocation, <span class="hljs-title class_">Outlet</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Unauthorized</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../components/Unauthorized"</span>;
<span class="hljs-keyword">import</span> { useAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">"../provider/AuthProvider"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Authorization</span> = (<span class="hljs-params">{ permissions }</span>) => {
    <span class="hljs-keyword">const</span> { user } = <span class="hljs-title function_">useAuth</span>();
    <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
    <span class="hljs-keyword">if</span> (user.<span class="hljs-property">username</span>) {
        <span class="hljs-keyword">const</span> userpermission = user.<span class="hljs-property">permissions</span>;
        <span class="hljs-keyword">const</span> isAllowed = permissions.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">allowed</span>) =></span> userpermission.<span class="hljs-title function_">includes</span>(allowed));
        <span class="hljs-keyword">return</span> isAllowed ? <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Outlet</span> /></span></span> : <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Unauthorized</span> /></span></span>;
    }
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">state</span>=<span class="hljs-string">{</span> <span class="hljs-attr">path:</span> <span class="hljs-attr">location.pathname</span> } <span class="hljs-attr">replace</span> /></span></span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Authorization</span>;
</code></pre>
<p>코드를 조각 단위로 해석해 보겠습니다.</p>
<p>당신이 사용자 이름에 따라 권한이 설정되어 있는 것을 염두에 두셨나요? 현재 로그인한 사용자를 통해 해당 권한에 액세스할 수 있게 됐습니다.</p>
<p>권한 획득은 사용자가 로그인했는지에 따라 달라집니다. 현재 로그인한 사용자가 부모 구성 요소를 통해 권한이 부여되었는지 확인하고 싶습니다. 사용자가 권한이 부여된 경우 컴포넌트는 <code>Outlet/</code> (하위 라우트)를 렌더링하고, 그렇지 않은 경우 권한이없다는 컴포넌트를 반환합니다.</p>
<p>사용자가 이미 로그인되어 있지 않은 경우 로그인 페이지가 표시됩니다.</p>
<p>Routepath.js에서</p>
<pre><code class="hljs language-js">&#x3C;<span class="hljs-title class_">Route</span> element={<span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Authorization</span> <span class="hljs-attr">permissions</span>=<span class="hljs-string">{[PERMISSIONS.CAN_VIEW_ABOUT]}</span> /></span></span>}>
  <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">About</span> /></span>} /></span>
&#x3C;/<span class="hljs-title class_">Route</span>>
</code></pre>
<p>Authorization 컴포넌트를 Route의 element로 전달하여 권한이 포함된 CAN_VIEW_ABOUT을 가진 사용자가 about 페이지를 방문할 수 있습니다.</p>
<p>Authorization.js에서</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Authorization</span> = (<span class="hljs-params">{ permissions }</span>) => {};
</code></pre>
<p>RoutePath Component에 의해 권한 prop이 전달되었으며 이 경우 부모이다. 따라서 우리는 이제 해당 prop에 액세스할 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> { user } = <span class="hljs-title function_">useAuth</span>();
</code></pre>
<p>useAuth()를 통해 현재 사용자에 액세스할 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">if</span> (user.<span class="hljs-property">username</span>) {
  <span class="hljs-keyword">const</span> userpermission = user.<span class="hljs-property">permissions</span>;
  <span class="hljs-keyword">const</span> isAllowed = permissions.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">allowed</span>) =></span> userpermission.<span class="hljs-title function_">includes</span>(allowed));
  <span class="hljs-keyword">return</span> isAllowed ? <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Outlet</span> /></span></span> : <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Unauthorized</span> /></span></span>;
}
<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span> <span class="hljs-attr">state</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">path:</span> <span class="hljs-attr">location.pathname</span> }} <span class="hljs-attr">replace</span> /></span></span>;
</code></pre>
<p>사용자가 로그인한 경우에는 사용자 이름과 권한 속성에 액세스할 수 있습니다. 우리는 부여한 권한이 로그인한 사용자의 권한을 포함하는지 여부를 결정해야 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> isAllowed = permissions.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">allowed</span>) =></span> userpermission.<span class="hljs-title function_">includes</span>(allowed));
</code></pre>
<p>사용자에게 권한이 있는 경우 (Children Route)이 렌더링되고, 그렇지 않으면 Unauthorized 컴포넌트가 반환됩니다.
사용자가 이미 로그인하지 않은 경우 로그인 페이지가 표시됩니다.</p>
<p>About.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> “react<span class="hljs-string">";
const About = () => {
  return &#x3C;div>About Page&#x3C;/div>;
};
export default About;
</span></code></pre>
<p>Extra.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Extra</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>Extra Page<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Extra</span>;
</code></pre>
<p>Home.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Home</span> = (<span class="hljs-params"></span>) => {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>홈 페이지<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Home</span>;
</code></pre>
<p>Login.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { useAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">"../provider/AuthProvider"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Login</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> { login } = <span class="hljs-title function_">useAuth</span>();
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
  <span class="hljs-keyword">const</span> redirectPath = location.<span class="hljs-property">state</span>?.<span class="hljs-property">path</span> || <span class="hljs-string">""</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = (<span class="hljs-params"></span>) => {
    <span class="hljs-title function_">login</span>(user);
  };
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">h1</span>></span>로그인 페이지<span class="hljs-tag">&#x3C;/<span class="hljs-name">h1</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">label</span>></span>이름<span class="hljs-tag">&#x3C;/<span class="hljs-name">label</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =></span> setUser(e.target.value)} />
      <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLogin}</span>></span>
        로그인
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
    <span class="hljs-tag">&#x3C;/></span></span>
  );
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Login</span>;
</code></pre>
<p>우리는 사용자 상태 변수를 생성하고 입력 필드를 추가했습니다. 입력란에 입력된 데이터는 사용자를 위해 보관되며 로그인할 때 전달됩니다.</p>
<p>Navbar.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NavLink</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;
<span class="hljs-keyword">import</span> { useAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">"../provider/AuthProvider"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">Navbar</span> = (<span class="hljs-params"></span>) => {
    <span class="hljs-keyword">const</span> { user } = <span class="hljs-title function_">useAuth</span>();
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">nav</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">NavLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>></span>홈<span class="hljs-tag">&#x3C;/<span class="hljs-name">NavLink</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">NavLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>></span>소개<span class="hljs-tag">&#x3C;/<span class="hljs-name">NavLink</span>></span>
            {user.username &#x26;&#x26; <span class="hljs-tag">&#x3C;<span class="hljs-name">NavLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/profile"</span>></span>프로필<span class="hljs-tag">&#x3C;/<span class="hljs-name">NavLink</span>></span>}
            {!user.username &#x26;&#x26; <span class="hljs-tag">&#x3C;<span class="hljs-name">NavLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span>></span>로그인<span class="hljs-tag">&#x3C;/<span class="hljs-name">NavLink</span>></span>}
            <span class="hljs-tag">&#x3C;<span class="hljs-name">NavLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/extra"</span>></span>추가<span class="hljs-tag">&#x3C;/<span class="hljs-name">NavLink</span>></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">nav</span>></span></span>
    );
};
</code></pre>
<p>서로 다른 경로 간 이동이 간단해지도록 navbar를 추가했습니다. 프로필 링크는 로그인한 사용자를 위해 제공되지만, 아직 인증을 받지 않은 사용자에게는 로그인 링크가 표시됩니다.</p>
<img src="/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_3.png">
<p><img src="/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_4.png" alt="Authentication and Authorization in React"></p>
<p>Profile.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { useAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">"../provider/AuthProvider"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Profile</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">const</span> { user, logout } = <span class="hljs-title function_">useAuth</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">logoutHandler</span> = (<span class="hljs-params"></span>) => {
    <span class="hljs-title function_">logout</span>();
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">h1</span>></span>Welcome {user.username}<span class="hljs-tag">&#x3C;/<span class="hljs-name">h1</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{logoutHandler}</span>></span>
        Logout
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
    <span class="hljs-tag">&#x3C;/></span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Profile</span>;
</code></pre>
<p>We used useAuth() to access user and logout(). We added a logout button to handle logout operations and displayed the username of the user who is presently logged in.</p>
<p>Unauthorized.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">Unauthorized</span> = (<span class="hljs-params"></span>) => {
 <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>이 페이지를 보기 위한 권한이 없습니다<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>;
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Unauthorized</span>;
</code></pre>
<p>RoutePath.js</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../components/Home"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../components/About"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../components/Login"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Profile</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../components/Profile"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Authentication</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Authentication"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Authorization</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Authorization"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-variable constant_">PERMISSIONS</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../permissions/Permissions"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Extra</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../components/Extra"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">RoutePath</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Routes</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Home</span> /></span>} />
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Authorization</span> <span class="hljs-attr">permissions</span>=<span class="hljs-string">{[PERMISSIONS.CAN_VIEW_ABOUT]}</span> /></span>}>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"about"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">About</span> /></span>} />
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">Route</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span>
        <span class="hljs-attr">path</span>=<span class="hljs-string">"profile"</span>
        <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>
          &#x3C;<span class="hljs-attr">Authentication</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">Profile</span> /></span>
          <span class="hljs-tag">&#x3C;/<span class="hljs-name">Authentication</span>></span>
        }
      />
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Authorization</span> <span class="hljs-attr">permissions</span>=<span class="hljs-string">{[PERMISSIONS.CAN_VIEW_EXTRA]}</span> /></span>}>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"extra"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Extra</span> /></span>} />
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">Route</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"login"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Login</span> /></span>} />
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">Routes</span>></span></span>
  );
};
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">RoutePath</span>;
</code></pre>
<p><code>Routes</code> 구성 요소에서 루트를 캡슐화했습니다.</p>
<pre><code class="hljs language-js">&#x3C;<span class="hljs-title class_">Route</span>
  path=<span class="hljs-string">"profile"</span>
  element={
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Authentication</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Profile</span> /></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">Authentication</span>></span></span>
  }
/>
</code></pre>
<p>접근하기 전에 인증이 필요하기 때문에 <code>Authentication</code> 구성 요소로 루트를 래핑했습니다.</p>
<pre><code class="hljs language-js">&#x3C;<span class="hljs-title class_">Route</span> element={<span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Authorization</span> <span class="hljs-attr">permissions</span>=<span class="hljs-string">{[PERMISSIONS.CAN_VIEW_EXTRA]}</span> /></span></span>}>
  <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"extra"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Extra</span> /></span>} /></span>
&#x3C;/<span class="hljs-title class_">Route</span>>
</code></pre>
<p>또한 인가가 필요한 루트에 대해 인가를 요소로 전달했는데, 이 인가는 권한을 가진 자식 루트들을 감싸는 역할을 했어요. 이 경우 관리자 권한을 가진 사용자만 <code>Extra /</code> 컴포넌트를 볼 수 있어요.</p>
<p>아래는 최종 결과물입니다:</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/1*8u590rCf0gvThvAdNOAqoQ.gif" alt="이미지"></p>
<p>그래서, 새로운 것을 배웠나요? 마음대로 바꾸고 실험해보세요. 즐거운 코딩하세요!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"리액트에서의 인증과 권한 부여 방법","description":"","date":"2024-05-12 20:14","slug":"2024-05-12-AuthenticationandAuthorizationinreact","content":"\n우리는 이 튜토리얼에서 React 앱에 대한 인증 및 권한 부여 기능을 활용할 것입니다. 시작해 봅시다...\n\n인증이란 무엇인가요?\n\n인증은 제공된 자격 증명을 사용하여 사용자의 신원을 확인하는 과정입니다. 사용자가 정당한지 확인하는 것이 일반적입니다.\n\n권한이란 무엇인가요?\n\n인증은 사용자 클라이언트의 권한이나 액세스 수준을 결정하는 보안 절차입니다. 인증된 사용자가 작업을 수행할 수 있는 권한 또는 액세스 여부를 확인하는 것은 표준 절차입니다.\n\n파일과 폴더를 정리해 봅시다.\n\nsrc 하위에 components 폴더를 만듭니다.\n그런 다음 다음 파일을 만듭니다: Unauthorized.js, Navbar.js, Profile.js, Extra.js, Home.js, About.js, Extra.js.\n\n![이미지](/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_0.png)\n\n리액트 라우터 패키지를 사용할 것이기 때문에 다음 명령어를 사용하여 설치해 보겠습니다.\n\nNPM을 사용하는 경우\n\n```js\nnpm install react-router-dom@6\n```\n\nYarn을 사용하는 경우\n\n```js\nyarn add react-router-dom@6\n```\n\n새로운 폴더를 만들어서 routes라고 이름 짓기로 하자.\n\n다음 파일을 만들어보세요: Authentication.js, Authorization.js, 그리고 RoutePath.js.\n\n\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_1.png\" /\u003e\n\n\npermissions와 provider라는 이름의 두 개의 추가 폴더를 만들어 주세요. permissions 폴더 안에 permissions.js 파일을, provider 폴더 안에는 authprovider.js 파일을 만들어 주세요.\n\n우린 이제 폴더 구조를 마칩니다.\n\n![Authentication and Authorization in react](/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_2.png)\n\n인증 및 권한 부여가 어떻게 구현되는지 이해하는 것이 우리의 유일한 목표이기 때문에 복잡한 코드나 디자인에 신경쓰지 않을 거에요.\n\n지금 파일을 수정하기 시작하세요!!!\n\nPermissions.js\n\n```js\nconst PERMISSIONS = {\n  CAN_VIEW_ABOUT: \"view_about\",\n  CAN_VIEW_EXTRA: \"view_extra\",\n};\nexport default PERMISSIONS;\n```\n\n일부 데이터에 무단으로 접근을 막기 위해 권한을 만들었습니다.\n\nAuthProvider.js\n\n```js\nimport React, { createContext, useContext, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\nconst AuthContext = createContext(null);\nexport const AuthProvider = ({ children }) =\u003e {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const redirectPath = location.state?.path || \"/profile\";\n  const [user, setUser] = useState({\n    username: \"\",\n    permissions: [],\n  });\n  const login = (user) =\u003e {\n    if (user === \"admin\") {\n      setUser({ username: user, permissions: [\"view_extra\"] });\n    } else {\n      setUser({ username: user, permissions: [\"view_about\"] });\n    }\n    navigate(redirectPath, { replace: true });\n  };\n  const logout = () =\u003e {\n    setUser({ username: \"\", permissions: [] });\n  };\n  return \u003cAuthContext.Provider value={(user, login, logout)}\u003e{children}\u003c/AuthContext.Provider\u003e;\n};\nexport const useAuth = () =\u003e {\n  return useContext(AuthContext);\n};\n```\n\n현재 로그인한 사용자와 부여된 권한을 저장하기 위해 사용자라는 상태 변수 객체를 만들었습니다.\n\nlogin() 함수는 사용자 매개변수를 받습니다. 사용자가 관리자이면 할당된 권한은 view_extra가 되고, 그렇지 않으면 view_about이 됩니다. 사용자 이름은 사용자와 동일합니다. 그 후, 페이지를 보려고 시도한 경로 또는 프로필 페이지로 이동합니다.\n\n사용자 변수는 logout()에 의해 클리어됩니다.\n\n우리는 context를 구축하고 user, login, logout 값을 provider를 통해 props로 전달했습니다. 앱 전체에서 어디서든 이를 액세스할 수 있습니다.\n\nAuthentication.js\n\n```js\nimport React from \"react\";\nimport { useAuth } from \"../provider/AuthProvider\";\nimport { Navigate, useLocation } from \"react-router-dom\";\n\nconst Authentication = ({ children }) =\u003e {\n  const { user } = useAuth();\n  const location = useLocation();\n\n  if (!user.username) {\n    return \u003cNavigate to=\"/login\" state={{ path: location.pathname }} /\u003e;\n  }\n\n  return children;\n};\n\nexport default Authentication;\n```\n\nuseAuth()를 통해 사용자 객체에 액세스할 수 있었습니다. username 속성이 없다면 로그인되지 않은 상태로 간주되어 로그인 페이지로 이동합니다. 그 외의 경우에는 요청한 페이지가 표시됩니다.\n\nAuthorization.js\n\n```js\nimport React from \"react\";\nimport { Navigate, useLocation, Outlet } from \"react-router-dom\";\nimport Unauthorized from \"../components/Unauthorized\";\nimport { useAuth } from \"../provider/AuthProvider\";\nconst Authorization = ({ permissions }) =\u003e {\n    const { user } = useAuth();\n    const location = useLocation();\n    if (user.username) {\n        const userpermission = user.permissions;\n        const isAllowed = permissions.some((allowed) =\u003e userpermission.includes(allowed));\n        return isAllowed ? \u003cOutlet /\u003e : \u003cUnauthorized /\u003e;\n    }\n    return \u003cNavigate to=\"/login\" state={ path: location.pathname } replace /\u003e;\n};\nexport default Authorization;\n```\n\n코드를 조각 단위로 해석해 보겠습니다.\n\n당신이 사용자 이름에 따라 권한이 설정되어 있는 것을 염두에 두셨나요? 현재 로그인한 사용자를 통해 해당 권한에 액세스할 수 있게 됐습니다.\n\n권한 획득은 사용자가 로그인했는지에 따라 달라집니다. 현재 로그인한 사용자가 부모 구성 요소를 통해 권한이 부여되었는지 확인하고 싶습니다. 사용자가 권한이 부여된 경우 컴포넌트는 `Outlet/` (하위 라우트)를 렌더링하고, 그렇지 않은 경우 권한이없다는 컴포넌트를 반환합니다.\n\n사용자가 이미 로그인되어 있지 않은 경우 로그인 페이지가 표시됩니다.\n\nRoutepath.js에서\n\n```js\n\u003cRoute element={\u003cAuthorization permissions={[PERMISSIONS.CAN_VIEW_ABOUT]} /\u003e}\u003e\n  \u003cRoute path=\"about\" element={\u003cAbout /\u003e} /\u003e\n\u003c/Route\u003e\n```\n\nAuthorization 컴포넌트를 Route의 element로 전달하여 권한이 포함된 CAN_VIEW_ABOUT을 가진 사용자가 about 페이지를 방문할 수 있습니다.\n\nAuthorization.js에서\n\n```js\nconst Authorization = ({ permissions }) =\u003e {};\n```\n\nRoutePath Component에 의해 권한 prop이 전달되었으며 이 경우 부모이다. 따라서 우리는 이제 해당 prop에 액세스할 수 있습니다.\n\n```js\nconst { user } = useAuth();\n```\n\nuseAuth()를 통해 현재 사용자에 액세스할 수 있습니다.\n\n```js\nif (user.username) {\n  const userpermission = user.permissions;\n  const isAllowed = permissions.some((allowed) =\u003e userpermission.includes(allowed));\n  return isAllowed ? \u003cOutlet /\u003e : \u003cUnauthorized /\u003e;\n}\nreturn \u003cNavigate to=\"/login\" state={{ path: location.pathname }} replace /\u003e;\n```\n\n사용자가 로그인한 경우에는 사용자 이름과 권한 속성에 액세스할 수 있습니다. 우리는 부여한 권한이 로그인한 사용자의 권한을 포함하는지 여부를 결정해야 합니다.\n\n```js\nconst isAllowed = permissions.some((allowed) =\u003e userpermission.includes(allowed));\n```\n\n사용자에게 권한이 있는 경우 (Children Route)이 렌더링되고, 그렇지 않으면 Unauthorized 컴포넌트가 반환됩니다.\n사용자가 이미 로그인하지 않은 경우 로그인 페이지가 표시됩니다.\n\nAbout.js\n\n```js\nimport React from “react\";\nconst About = () =\u003e {\n  return \u003cdiv\u003eAbout Page\u003c/div\u003e;\n};\nexport default About;\n```\n\nExtra.js\n\n```js\nimport React from \"react\";\nconst Extra = () =\u003e {\n  return \u003cdiv\u003eExtra Page\u003c/div\u003e;\n};\nexport default Extra;\n```\n\nHome.js\n\n\n\n\n\n```js\nimport React from \"react\";\nconst Home = () =\u003e {\n    return \u003cdiv\u003e홈 페이지\u003c/div\u003e;\n};\nexport default Home;\n```\n\nLogin.js\n\n```js\nimport React, { useState } from \"react\";\nimport { useAuth } from \"../provider/AuthProvider\";\nconst Login = () =\u003e {\n  const [user, setUser] = useState(null);\n  const { login } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const redirectPath = location.state?.path || \"\";\n  const handleLogin = () =\u003e {\n    login(user);\n  };\n  return (\n    \u003c\u003e\n      \u003ch1\u003e로그인 페이지\u003c/h1\u003e\n      \u003clabel\u003e이름\u003c/label\u003e\n      \u003cinput type=\"text\" onChange={(e) =\u003e setUser(e.target.value)} /\u003e\n      \u003cbutton type=\"submit\" onClick={handleLogin}\u003e\n        로그인\n      \u003c/button\u003e\n    \u003c/\u003e\n  );\n};\nexport default Login;\n```\n\n우리는 사용자 상태 변수를 생성하고 입력 필드를 추가했습니다. 입력란에 입력된 데이터는 사용자를 위해 보관되며 로그인할 때 전달됩니다.\n\n\n\n\n\nNavbar.js\n\n```js\nimport React from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { useAuth } from \"../provider/AuthProvider\";\nexport const Navbar = () =\u003e {\n    const { user } = useAuth();\n    return (\n        \u003cnav\u003e\n            \u003cNavLink to=\"/\"\u003e홈\u003c/NavLink\u003e\n            \u003cNavLink to=\"/about\"\u003e소개\u003c/NavLink\u003e\n            {user.username \u0026\u0026 \u003cNavLink to=\"/profile\"\u003e프로필\u003c/NavLink\u003e}\n            {!user.username \u0026\u0026 \u003cNavLink to=\"/login\"\u003e로그인\u003c/NavLink\u003e}\n            \u003cNavLink to=\"/extra\"\u003e추가\u003c/NavLink\u003e\n        \u003c/nav\u003e\n    );\n};\n```\n\n서로 다른 경로 간 이동이 간단해지도록 navbar를 추가했습니다. 프로필 링크는 로그인한 사용자를 위해 제공되지만, 아직 인증을 받지 않은 사용자에게는 로그인 링크가 표시됩니다.\n\n\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_3.png\" /\u003e\n\n\n![Authentication and Authorization in React](/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_4.png)\n\nProfile.js\n\n```js\nimport React from \"react\";\nimport { useAuth } from \"../provider/AuthProvider\";\n\nconst Profile = () =\u003e {\n  const { user, logout } = useAuth();\n\n  const logoutHandler = () =\u003e {\n    logout();\n  };\n\n  return (\n    \u003c\u003e\n      \u003ch1\u003eWelcome {user.username}\u003c/h1\u003e\n      \u003cbutton type=\"submit\" onClick={logoutHandler}\u003e\n        Logout\n      \u003c/button\u003e\n    \u003c/\u003e\n  );\n};\n\nexport default Profile;\n```\n\n\nWe used useAuth() to access user and logout(). We added a logout button to handle logout operations and displayed the username of the user who is presently logged in.\n\n\n\n\n\nUnauthorized.js\n\n```js\nimport React from \"react\";\nconst Unauthorized = () =\u003e {\n return \u003cdiv\u003e이 페이지를 보기 위한 권한이 없습니다\u003c/div\u003e;\n};\nexport default Unauthorized;\n```\n\nRoutePath.js\n\n```js\nimport React from \"react\";\nimport { Routes, Route } from \"react-router-dom\";\nimport Home from \"../components/Home\";\nimport About from \"../components/About\";\nimport Login from \"../components/Login\";\nimport Profile from \"../components/Profile\";\nimport Authentication from \"./Authentication\";\nimport Authorization from \"./Authorization\";\nimport PERMISSIONS from \"../permissions/Permissions\";\nimport Extra from \"../components/Extra\";\nconst RoutePath = () =\u003e {\n  return (\n    \u003cRoutes\u003e\n      \u003cRoute path=\"/\" element={\u003cHome /\u003e} /\u003e\n      \u003cRoute element={\u003cAuthorization permissions={[PERMISSIONS.CAN_VIEW_ABOUT]} /\u003e}\u003e\n        \u003cRoute path=\"about\" element={\u003cAbout /\u003e} /\u003e\n      \u003c/Route\u003e\n      \u003cRoute\n        path=\"profile\"\n        element={\n          \u003cAuthentication\u003e\n            \u003cProfile /\u003e\n          \u003c/Authentication\u003e\n        }\n      /\u003e\n      \u003cRoute element={\u003cAuthorization permissions={[PERMISSIONS.CAN_VIEW_EXTRA]} /\u003e}\u003e\n        \u003cRoute path=\"extra\" element={\u003cExtra /\u003e} /\u003e\n      \u003c/Route\u003e\n      \u003cRoute path=\"login\" element={\u003cLogin /\u003e} /\u003e\n    \u003c/Routes\u003e\n  );\n};\nexport default RoutePath;\n```\n\n`Routes` 구성 요소에서 루트를 캡슐화했습니다.\n\n```js\n\u003cRoute\n  path=\"profile\"\n  element={\n    \u003cAuthentication\u003e\n      \u003cProfile /\u003e\n    \u003c/Authentication\u003e\n  }\n/\u003e\n```\n\n접근하기 전에 인증이 필요하기 때문에 `Authentication` 구성 요소로 루트를 래핑했습니다.\n\n```js\n\u003cRoute element={\u003cAuthorization permissions={[PERMISSIONS.CAN_VIEW_EXTRA]} /\u003e}\u003e\n  \u003cRoute path=\"extra\" element={\u003cExtra /\u003e} /\u003e\n\u003c/Route\u003e\n```\n\n또한 인가가 필요한 루트에 대해 인가를 요소로 전달했는데, 이 인가는 권한을 가진 자식 루트들을 감싸는 역할을 했어요. 이 경우 관리자 권한을 가진 사용자만 `Extra /` 컴포넌트를 볼 수 있어요.\n\n아래는 최종 결과물입니다:\n\n![이미지](https://miro.medium.com/v2/resize:fit:1400/1*8u590rCf0gvThvAdNOAqoQ.gif)\n\n그래서, 새로운 것을 배웠나요? 마음대로 바꾸고 실험해보세요. 즐거운 코딩하세요!\n","ogImage":{"url":"/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_0.png"},"coverImage":"/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_0.png","tag":["Tech"],"readingTime":10},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e우리는 이 튜토리얼에서 React 앱에 대한 인증 및 권한 부여 기능을 활용할 것입니다. 시작해 봅시다...\u003c/p\u003e\n\u003cp\u003e인증이란 무엇인가요?\u003c/p\u003e\n\u003cp\u003e인증은 제공된 자격 증명을 사용하여 사용자의 신원을 확인하는 과정입니다. 사용자가 정당한지 확인하는 것이 일반적입니다.\u003c/p\u003e\n\u003cp\u003e권한이란 무엇인가요?\u003c/p\u003e\n\u003cp\u003e인증은 사용자 클라이언트의 권한이나 액세스 수준을 결정하는 보안 절차입니다. 인증된 사용자가 작업을 수행할 수 있는 권한 또는 액세스 여부를 확인하는 것은 표준 절차입니다.\u003c/p\u003e\n\u003cp\u003e파일과 폴더를 정리해 봅시다.\u003c/p\u003e\n\u003cp\u003esrc 하위에 components 폴더를 만듭니다.\n그런 다음 다음 파일을 만듭니다: Unauthorized.js, Navbar.js, Profile.js, Extra.js, Home.js, About.js, Extra.js.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e리액트 라우터 패키지를 사용할 것이기 때문에 다음 명령어를 사용하여 설치해 보겠습니다.\u003c/p\u003e\n\u003cp\u003eNPM을 사용하는 경우\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install react-router-dom@\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYarn을 사용하는 경우\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eyarn add react-router-dom@\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e새로운 폴더를 만들어서 routes라고 이름 짓기로 하자.\u003c/p\u003e\n\u003cp\u003e다음 파일을 만들어보세요: Authentication.js, Authorization.js, 그리고 RoutePath.js.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_1.png\"\u003e\n\u003cp\u003epermissions와 provider라는 이름의 두 개의 추가 폴더를 만들어 주세요. permissions 폴더 안에 permissions.js 파일을, provider 폴더 안에는 authprovider.js 파일을 만들어 주세요.\u003c/p\u003e\n\u003cp\u003e우린 이제 폴더 구조를 마칩니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_2.png\" alt=\"Authentication and Authorization in react\"\u003e\u003c/p\u003e\n\u003cp\u003e인증 및 권한 부여가 어떻게 구현되는지 이해하는 것이 우리의 유일한 목표이기 때문에 복잡한 코드나 디자인에 신경쓰지 않을 거에요.\u003c/p\u003e\n\u003cp\u003e지금 파일을 수정하기 시작하세요!!!\u003c/p\u003e\n\u003cp\u003ePermissions.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003ePERMISSIONS\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eCAN_VIEW_ABOUT\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"view_about\"\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eCAN_VIEW_EXTRA\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"view_extra\"\u003c/span\u003e,\n};\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003ePERMISSIONS\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e일부 데이터에 무단으로 접근을 막기 위해 권한을 만들었습니다.\u003c/p\u003e\n\u003cp\u003eAuthProvider.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { createContext, useContext, useState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useNavigate, useLocation } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003ecreateContext\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eAuthProvider\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e{ children }\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e navigate = \u003cspan class=\"hljs-title function_\"\u003euseNavigate\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e location = \u003cspan class=\"hljs-title function_\"\u003euseLocation\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e redirectPath = location.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003epath\u003c/span\u003e || \u003cspan class=\"hljs-string\"\u003e\"/profile\"\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [user, setUser] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e: [],\n  });\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elogin\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003euser\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (user === \u003cspan class=\"hljs-string\"\u003e\"admin\"\u003c/span\u003e) {\n      \u003cspan class=\"hljs-title function_\"\u003esetUser\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: user, \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\"view_extra\"\u003c/span\u003e] });\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-title function_\"\u003esetUser\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: user, \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\"view_about\"\u003c/span\u003e] });\n    }\n    \u003cspan class=\"hljs-title function_\"\u003enavigate\u003c/span\u003e(redirectPath, { \u003cspan class=\"hljs-attr\"\u003ereplace\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e });\n  };\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elogout\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-title function_\"\u003esetUser\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e: [] });\n  };\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eAuthContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{(user,\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003elogin\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003elogout\u003c/span\u003e)}\u003e\u003c/span\u003e{children}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eAuthContext.Provider\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e;\n};\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003euseAuth\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e);\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e현재 로그인한 사용자와 부여된 권한을 저장하기 위해 사용자라는 상태 변수 객체를 만들었습니다.\u003c/p\u003e\n\u003cp\u003elogin() 함수는 사용자 매개변수를 받습니다. 사용자가 관리자이면 할당된 권한은 view_extra가 되고, 그렇지 않으면 view_about이 됩니다. 사용자 이름은 사용자와 동일합니다. 그 후, 페이지를 보려고 시도한 경로 또는 프로필 페이지로 이동합니다.\u003c/p\u003e\n\u003cp\u003e사용자 변수는 logout()에 의해 클리어됩니다.\u003c/p\u003e\n\u003cp\u003e우리는 context를 구축하고 user, login, logout 값을 provider를 통해 props로 전달했습니다. 앱 전체에서 어디서든 이를 액세스할 수 있습니다.\u003c/p\u003e\n\u003cp\u003eAuthentication.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useAuth } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../provider/AuthProvider\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNavigate\u003c/span\u003e, useLocation } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eAuthentication\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e{ children }\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { user } = \u003cspan class=\"hljs-title function_\"\u003euseAuth\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e location = \u003cspan class=\"hljs-title function_\"\u003euseLocation\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!user.\u003cspan class=\"hljs-property\"\u003eusername\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eNavigate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/login\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estate\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003elocation.pathname\u003c/span\u003e }} /\u003e\u003c/span\u003e\u003c/span\u003e;\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e children;\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthentication\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003euseAuth()를 통해 사용자 객체에 액세스할 수 있었습니다. username 속성이 없다면 로그인되지 않은 상태로 간주되어 로그인 페이지로 이동합니다. 그 외의 경우에는 요청한 페이지가 표시됩니다.\u003c/p\u003e\n\u003cp\u003eAuthorization.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNavigate\u003c/span\u003e, useLocation, \u003cspan class=\"hljs-title class_\"\u003eOutlet\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUnauthorized\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../components/Unauthorized\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useAuth } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../provider/AuthProvider\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eAuthorization\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e{ permissions }\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { user } = \u003cspan class=\"hljs-title function_\"\u003euseAuth\u003c/span\u003e();\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e location = \u003cspan class=\"hljs-title function_\"\u003euseLocation\u003c/span\u003e();\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (user.\u003cspan class=\"hljs-property\"\u003eusername\u003c/span\u003e) {\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userpermission = user.\u003cspan class=\"hljs-property\"\u003epermissions\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e isAllowed = permissions.\u003cspan class=\"hljs-title function_\"\u003esome\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eallowed\u003c/span\u003e) =\u003e\u003c/span\u003e userpermission.\u003cspan class=\"hljs-title function_\"\u003eincludes\u003c/span\u003e(allowed));\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e isAllowed ? \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eOutlet\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e : \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eUnauthorized\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e;\n    }\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eNavigate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/login\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estate\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003elocation.pathname\u003c/span\u003e } \u003cspan class=\"hljs-attr\"\u003ereplace\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e;\n};\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthorization\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e코드를 조각 단위로 해석해 보겠습니다.\u003c/p\u003e\n\u003cp\u003e당신이 사용자 이름에 따라 권한이 설정되어 있는 것을 염두에 두셨나요? 현재 로그인한 사용자를 통해 해당 권한에 액세스할 수 있게 됐습니다.\u003c/p\u003e\n\u003cp\u003e권한 획득은 사용자가 로그인했는지에 따라 달라집니다. 현재 로그인한 사용자가 부모 구성 요소를 통해 권한이 부여되었는지 확인하고 싶습니다. 사용자가 권한이 부여된 경우 컴포넌트는 \u003ccode\u003eOutlet/\u003c/code\u003e (하위 라우트)를 렌더링하고, 그렇지 않은 경우 권한이없다는 컴포넌트를 반환합니다.\u003c/p\u003e\n\u003cp\u003e사용자가 이미 로그인되어 있지 않은 경우 로그인 페이지가 표시됩니다.\u003c/p\u003e\n\u003cp\u003eRoutepath.js에서\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e element={\u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eAuthorization\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{[PERMISSIONS.CAN_VIEW_ABOUT]}\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e}\u003e\n  \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"about\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eAbout\u003c/span\u003e /\u003e\u003c/span\u003e} /\u003e\u003c/span\u003e\n\u0026#x3C;/\u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAuthorization 컴포넌트를 Route의 element로 전달하여 권한이 포함된 CAN_VIEW_ABOUT을 가진 사용자가 about 페이지를 방문할 수 있습니다.\u003c/p\u003e\n\u003cp\u003eAuthorization.js에서\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eAuthorization\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e{ permissions }\u003c/span\u003e) =\u003e {};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRoutePath Component에 의해 권한 prop이 전달되었으며 이 경우 부모이다. 따라서 우리는 이제 해당 prop에 액세스할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { user } = \u003cspan class=\"hljs-title function_\"\u003euseAuth\u003c/span\u003e();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003euseAuth()를 통해 현재 사용자에 액세스할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (user.\u003cspan class=\"hljs-property\"\u003eusername\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userpermission = user.\u003cspan class=\"hljs-property\"\u003epermissions\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e isAllowed = permissions.\u003cspan class=\"hljs-title function_\"\u003esome\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eallowed\u003c/span\u003e) =\u003e\u003c/span\u003e userpermission.\u003cspan class=\"hljs-title function_\"\u003eincludes\u003c/span\u003e(allowed));\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e isAllowed ? \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eOutlet\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e : \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eUnauthorized\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e;\n}\n\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eNavigate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/login\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estate\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003elocation.pathname\u003c/span\u003e }} \u003cspan class=\"hljs-attr\"\u003ereplace\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e사용자가 로그인한 경우에는 사용자 이름과 권한 속성에 액세스할 수 있습니다. 우리는 부여한 권한이 로그인한 사용자의 권한을 포함하는지 여부를 결정해야 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e isAllowed = permissions.\u003cspan class=\"hljs-title function_\"\u003esome\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eallowed\u003c/span\u003e) =\u003e\u003c/span\u003e userpermission.\u003cspan class=\"hljs-title function_\"\u003eincludes\u003c/span\u003e(allowed));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e사용자에게 권한이 있는 경우 (Children Route)이 렌더링되고, 그렇지 않으면 Unauthorized 컴포넌트가 반환됩니다.\n사용자가 이미 로그인하지 않은 경우 로그인 페이지가 표시됩니다.\u003c/p\u003e\n\u003cp\u003eAbout.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e “react\u003cspan class=\"hljs-string\"\u003e\";\nconst About = () =\u003e {\n  return \u0026#x3C;div\u003eAbout Page\u0026#x3C;/div\u003e;\n};\nexport default About;\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eExtra.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eExtra\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003eExtra Page\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e;\n};\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eExtra\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHome.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eHome\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e홈 페이지\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e;\n};\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHome\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eLogin.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { useState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useAuth } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../provider/AuthProvider\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eLogin\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [user, setUser] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { login } = \u003cspan class=\"hljs-title function_\"\u003euseAuth\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e navigate = \u003cspan class=\"hljs-title function_\"\u003euseNavigate\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e location = \u003cspan class=\"hljs-title function_\"\u003euseLocation\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e redirectPath = location.\u003cspan class=\"hljs-property\"\u003estate\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003epath\u003c/span\u003e || \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandleLogin\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-title function_\"\u003elogin\u003c/span\u003e(user);\n  };\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u003e\u003c/span\u003e로그인 페이지\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e이름\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"text\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{(e)\u003c/span\u003e =\u003e\u003c/span\u003e setUser(e.target.value)} /\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"submit\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{handleLogin}\u003c/span\u003e\u003e\u003c/span\u003e\n        로그인\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n};\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLogin\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e우리는 사용자 상태 변수를 생성하고 입력 필드를 추가했습니다. 입력란에 입력된 데이터는 사용자를 위해 보관되며 로그인할 때 전달됩니다.\u003c/p\u003e\n\u003cp\u003eNavbar.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNavLink\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useAuth } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../provider/AuthProvider\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eNavbar\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { user } = \u003cspan class=\"hljs-title function_\"\u003euseAuth\u003c/span\u003e();\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n        \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003enav\u003c/span\u003e\u003e\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e\u003e\u003c/span\u003e홈\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e\u003e\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/about\"\u003c/span\u003e\u003e\u003c/span\u003e소개\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e\u003e\u003c/span\u003e\n            {user.username \u0026#x26;\u0026#x26; \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/profile\"\u003c/span\u003e\u003e\u003c/span\u003e프로필\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e\u003e\u003c/span\u003e}\n            {!user.username \u0026#x26;\u0026#x26; \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/login\"\u003c/span\u003e\u003e\u003c/span\u003e로그인\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e\u003e\u003c/span\u003e}\n            \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/extra\"\u003c/span\u003e\u003e\u003c/span\u003e추가\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eNavLink\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003enav\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    );\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e서로 다른 경로 간 이동이 간단해지도록 navbar를 추가했습니다. 프로필 링크는 로그인한 사용자를 위해 제공되지만, 아직 인증을 받지 않은 사용자에게는 로그인 링크가 표시됩니다.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_3.png\"\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationinreact_4.png\" alt=\"Authentication and Authorization in React\"\u003e\u003c/p\u003e\n\u003cp\u003eProfile.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useAuth } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../provider/AuthProvider\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eProfile\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { user, logout } = \u003cspan class=\"hljs-title function_\"\u003euseAuth\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003elogoutHandler\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-title function_\"\u003elogout\u003c/span\u003e();\n  };\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u003e\u003c/span\u003eWelcome {user.username}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"submit\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{logoutHandler}\u003c/span\u003e\u003e\u003c/span\u003e\n        Logout\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProfile\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe used useAuth() to access user and logout(). We added a logout button to handle logout operations and displayed the username of the user who is presently logged in.\u003c/p\u003e\n\u003cp\u003eUnauthorized.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eUnauthorized\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e이 페이지를 보기 위한 권한이 없습니다\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e;\n};\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUnauthorized\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRoutePath.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRoutes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHome\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../components/Home\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAbout\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../components/About\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLogin\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../components/Login\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProfile\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../components/Profile\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthentication\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./Authentication\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthorization\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./Authorization\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003ePERMISSIONS\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../permissions/Permissions\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eExtra\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../components/Extra\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eRoutePath\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoutes\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eHome\u003c/span\u003e /\u003e\u003c/span\u003e} /\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eAuthorization\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{[PERMISSIONS.CAN_VIEW_ABOUT]}\u003c/span\u003e /\u003e\u003c/span\u003e}\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"about\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eAbout\u003c/span\u003e /\u003e\u003c/span\u003e} /\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"profile\"\u003c/span\u003e\n        \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\n          \u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eAuthentication\u003c/span\u003e\u003e\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eProfile\u003c/span\u003e /\u003e\u003c/span\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eAuthentication\u003c/span\u003e\u003e\u003c/span\u003e\n        }\n      /\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eAuthorization\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{[PERMISSIONS.CAN_VIEW_EXTRA]}\u003c/span\u003e /\u003e\u003c/span\u003e}\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"extra\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eExtra\u003c/span\u003e /\u003e\u003c/span\u003e} /\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"login\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eLogin\u003c/span\u003e /\u003e\u003c/span\u003e} /\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eRoutes\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n};\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRoutePath\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eRoutes\u003c/code\u003e 구성 요소에서 루트를 캡슐화했습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e\n  path=\u003cspan class=\"hljs-string\"\u003e\"profile\"\u003c/span\u003e\n  element={\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eAuthentication\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eProfile\u003c/span\u003e /\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eAuthentication\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  }\n/\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e접근하기 전에 인증이 필요하기 때문에 \u003ccode\u003eAuthentication\u003c/code\u003e 구성 요소로 루트를 래핑했습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e element={\u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eAuthorization\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epermissions\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{[PERMISSIONS.CAN_VIEW_EXTRA]}\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e}\u003e\n  \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"extra\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eExtra\u003c/span\u003e /\u003e\u003c/span\u003e} /\u003e\u003c/span\u003e\n\u0026#x3C;/\u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e또한 인가가 필요한 루트에 대해 인가를 요소로 전달했는데, 이 인가는 권한을 가진 자식 루트들을 감싸는 역할을 했어요. 이 경우 관리자 권한을 가진 사용자만 \u003ccode\u003eExtra /\u003c/code\u003e 컴포넌트를 볼 수 있어요.\u003c/p\u003e\n\u003cp\u003e아래는 최종 결과물입니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1400/1*8u590rCf0gvThvAdNOAqoQ.gif\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e그래서, 새로운 것을 배웠나요? 마음대로 바꾸고 실험해보세요. 즐거운 코딩하세요!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-12-AuthenticationandAuthorizationinreact"},"buildId":"QH5Mz7n7Y6w0r4_gCGFQf","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>