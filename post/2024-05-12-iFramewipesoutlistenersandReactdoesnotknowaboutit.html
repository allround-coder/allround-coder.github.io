<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>iFrameê°€ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•˜ê³  ReactëŠ” ì•Œì§€ ëª»í•œë‹¤  | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="iFrameê°€ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•˜ê³  ReactëŠ” ì•Œì§€ ëª»í•œë‹¤  | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="iFrameê°€ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•˜ê³  ReactëŠ” ì•Œì§€ ëª»í•œë‹¤  | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit" data-gatsby-head="true"/><meta name="twitter:title" content="iFrameê°€ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•˜ê³  ReactëŠ” ì•Œì§€ ëª»í•œë‹¤  | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-12 18:44" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_buildManifest.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">iFrameê°€ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•˜ê³  ReactëŠ” ì•Œì§€ ëª»í•œë‹¤ </h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="iFrameê°€ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•˜ê³  ReactëŠ” ì•Œì§€ ëª»í•œë‹¤ " loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 12, 2024</span><span class="posts_reading_time__f7YPP">7<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h1>ê°œìš”</h1>
<p>ì´ ê¸°ì‚¬ì—ì„œëŠ” ë¶€ëª¨ ì°½ê³¼ ìì‹ iFrame ê°„ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì„ ë³´ì—¬ë“œë¦¬ê³  ì‹¶ì–´ìš”. ì´ ê³¼ì •ì—ì„œ iFrameì´ ë¦¬ìŠ¤ë„ˆë¥¼ ì–´ë–»ê²Œ ì§€ìš°ëŠ”ì§€ì— ëŒ€í•´ í¥ë¯¸ë¡œìš´ ì ì„ ë°œê²¬í–ˆì–´ìš”. ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”, ë‚˜ì•„ê°€ë©´ì„œ ìŠ¤í¬ë¦°ìƒ·ì„ ê²Œì‹œí•  ê±°ì—ìš”. <a href="https://github.com" rel="nofollow" target="_blank">GitHub ë§í¬</a></p>
<p>ì¦ê²ê²Œ ê³µë¶€í•˜ì„¸ìš”!</p>
<h1>iFrameì´ë€ ë¬´ì—‡ì¸ê°€ìš”?</h1>
<p>iFrame ë˜ëŠ” ì¸ë¼ì¸ í”„ë ˆì„ì€ ë¶€ëª¨ ì›¹í˜ì´ì§€ ë‚´ì— ë‹¤ë¥¸ ë¬¸ì„œë¥¼ ë¡œë“œí•˜ëŠ” HTML ìš”ì†Œì…ë‹ˆë‹¤.</p>
<h1>iFrameì„ ì‚¬ìš©í•˜ëŠ” ê³³ì€ ì–´ë””ì¸ê°€ìš”?</h1>
<p>iFrameì€ ì´ë¯¸ ìˆëŠ” HTML ì•ˆì— HTMLì„ í¬í•¨ì‹œí‚¤ê³  ì‹¶ì„ ë•Œë‚˜ ì‹ ë¢°í•  ìˆ˜ ì—†ê±°ë‚˜ ì œ3ì ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¦‰, ê´‘ê³  ì„¹ì…˜ì„ ì›¹ì‚¬ì´íŠ¸ì— í‘œì‹œí•˜ê±°ë‚˜ YouTube ë¹„ë””ì˜¤ë¥¼ ë„£ê³  ì‹¶ì„ ë•Œ iFrameì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ë¡œ iFrameì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ì œ3ì ì‚¬ì´íŠ¸/ì½˜í…ì¸ ë¥¼ í˜¸ìŠ¤íŒ…í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<h1>iFrame ìƒì„±í•˜ê¸°</h1>
<p>ì œê°€ ë§Œë“  í”„ë¡œì íŠ¸ëŠ” ê°„ë‹¨í•œ React ì•±(v18.2.0)ì…ë‹ˆë‹¤. ë¶€ëª¨ ìœ„ì ¯(App.tsx)ì€ iFrame ì»´í¬ë„ŒíŠ¸(IFrame.tsx)ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤. ë‘ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ëª¨ë‘ ë©”ì‹œì§€ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë  ë•Œ ì œê±°ë©ë‹ˆë‹¤. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ postMessage í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ iFrameì— ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.</p>
<p>App.tsx</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">IFrame</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./iFrame"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =></span> {
 <span class="hljs-keyword">const</span> refs = useRef&#x3C;<span class="hljs-title class_">HTMLIFrameElement</span>>(<span class="hljs-literal">null</span>);

 <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
   <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, processMessage, <span class="hljs-literal">false</span>);
   <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"message"</span>, processMessage);
 }, []);


 <span class="hljs-keyword">const</span> <span class="hljs-title function_">processMessage</span> = (<span class="hljs-params">event: MessageEvent</span>) => {
   <span class="hljs-keyword">if</span> (event.<span class="hljs-property">origin</span> !== <span class="hljs-string">"http://localhost:8080"</span>) {
     <span class="hljs-keyword">return</span>;
   }
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"parent Event Listener"</span>, event);
 };


 <span class="hljs-keyword">const</span> <span class="hljs-title function_">buttonClick</span> = (<span class="hljs-params">event: React.MouseEvent</span>) => {
   event.<span class="hljs-title function_">stopPropagation</span>();
   <span class="hljs-keyword">if</span> (refs.<span class="hljs-property">current</span> === <span class="hljs-literal">null</span>) {
     <span class="hljs-keyword">return</span>;
   }

   refs?.<span class="hljs-property">current</span>?.<span class="hljs-property">contentWindow</span>?.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">"ë¶€ëª¨ì—ì„œ ë³´ë‚¸ ë©”ì‹œì§€"</span>, <span class="hljs-string">"*"</span>);
 };
 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
     <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span>
       <span class="hljs-attr">style</span>=<span class="hljs-string">{</span> <span class="hljs-attr">margin:</span> "<span class="hljs-attr">10px</span>", <span class="hljs-attr">marginLeft:</span> "<span class="hljs-attr">0px</span>" }
       <span class="hljs-attr">onClick</span>=<span class="hljs-string">{buttonClick}</span>
     ></span>
       ìì‹ì—ê²Œ ë©”ì‹œì§€ ë³´ë‚´ê¸°
     <span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
     <span class="hljs-tag">&#x3C;<span class="hljs-name">IFrame</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{refs}</span> /></span>
   <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
 );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p>IFrame.tsx</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, useState, forwardRef, <span class="hljs-title class_">ForwardedRef</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;


interface <span class="hljs-title class_">IFrameProps</span> {
 <span class="hljs-attr">ref</span>: <span class="hljs-title class_">ForwardedRef</span>&#x3C;<span class="hljs-title class_">HTMLIFrameElement</span>>;
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">IFrame</span> = forwardRef&#x3C;<span class="hljs-title class_">HTMLIFrameElement</span>, <span class="hljs-title class_">IFrameProps</span>>(<span class="hljs-function">(<span class="hljs-params">prop, ref</span>) =></span> {
 <span class="hljs-keyword">const</span> [message, setMessage] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
 <span class="hljs-keyword">const</span> iframeRef = ref <span class="hljs-keyword">as</span> <span class="hljs-title class_">React</span>.<span class="hljs-property">MutableRefObject</span>&#x3C;<span class="hljs-title class_">HTMLIFrameElement</span>>;
 <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"mounted"</span>);
   iframeRef?.<span class="hljs-property">current</span>?.<span class="hljs-property">contentWindow</span>?.<span class="hljs-title function_">addEventListener</span>(
     <span class="hljs-string">"message"</span>,
     processMessage,
     <span class="hljs-literal">false</span>
   );
   <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> {
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"unmounted"</span>);
     iframeRef?.<span class="hljs-property">current</span>?.<span class="hljs-property">contentWindow</span>?.<span class="hljs-title function_">removeEventListener</span>(
       <span class="hljs-string">"message"</span>,
       processMessage,
       <span class="hljs-literal">false</span>
     );
   };
 }, [iframeRef?.<span class="hljs-property">current</span>]);


 <span class="hljs-keyword">const</span> <span class="hljs-title function_">processMessage</span> = (<span class="hljs-params">event: MessageEvent</span>) => {
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"iFrame Event Listener"</span>);
   <span class="hljs-keyword">if</span> (event.<span class="hljs-property">origin</span> !== <span class="hljs-string">"http://localhost:8080"</span>) {
     <span class="hljs-keyword">return</span>;
   }


  <span class="hljs-keyword">const</span> newMessage = message.<span class="hljs-title function_">concat</span>(event?.<span class="hljs-property">data</span>)
  <span class="hljs-title function_">setMessage</span>(newMessage);


 };


 <span class="hljs-keyword">return</span> (
   <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
     <span class="hljs-tag">&#x3C;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"1"</span> {<span class="hljs-attr">...prop</span>} <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">srcDoc</span>=<span class="hljs-string">{message}</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">iframe</span>></span>
   <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
 );
});


<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">IFrame</span>;
</code></pre>
<p>ë¦¬ìŠ¤ë„ˆê°€ ì˜¬ë°”ë¥´ê²Œ ë§ˆìš´íŠ¸ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ iFrameì—ì„œ getEventListeners(window)ì„ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤. iFrameì—ì„œ 'message' ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹  ëŒ€ê¸°í•˜ëŠ” ë¦¬ìŠ¤ë„ˆë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë³´ì•ˆ ëŒ€ì±…ìœ¼ë¡œ ì•…ì˜ì ì¸ ì‚¬ìš©ìë¡œë¶€í„°ì˜ ë©”ì‹œì§€ë¥¼ ë¬´ì‹œí•˜ë„ë¡ originì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<img src="/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_0.png">
<h1>í™”ë©´ì—ì„œ ë³´ì´ëŠ” ëª¨ìŠµ</h1>
<img src="/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_1.png">
<p>ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë©”ì‹œì§€ê°€ iFrame ì•ˆì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</p>
<img src="/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_2.png">
<p>ì´ ëª¨ë“  ê²ƒì´ ì •ë§ ê¸°ë»¤ì–´ìš”. ê·¸ëŸ¬ë‚˜ ì´ê³³ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë©”ì‹œì§€ë¥¼ iFrameìœ¼ë¡œ ë³´ë‚´ë ¤ê³  ì‹œë„í–ˆì„ ë•Œ iFrame UIê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. iFrame ì•ˆì—ì„œ "ë¶€ëª¨ë¡œë¶€í„° ì˜¨ ë©”ì‹œì§€"ë¥¼ ì—¬ëŸ¬ ë²ˆ ë³´ê¸°ë¥¼ ê¸°ëŒ€í–ˆëŠ”ë° ê·¸ëŸ° ì¼ì€ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë²„íŠ¼ í´ë¦­ ì‹œ UIê°€ ë§¤ë²ˆ ì—…ë°ì´íŠ¸ë˜ì§€ ëª»í–ˆë‹¤ëŠ” ê²ƒ ê°™ì•˜ì–´ìš”.</p>
<img src="/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_3.png">
<p>ë‚´ ì½˜ì†” ë¡œê·¸ë¥¼ í™•ì¸í•´ ë³´ë‹ˆ, ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì–¸ë§ˆìš´íŠ¸í•œ í›„ì— ì¶œë ¥í•˜ëŠ” <code>unmounted</code>ê°€ ì•„ë¬´ëŸ° ë°œìƒí•˜ì§€ ì•Šì•˜ì–´. ì´ê²ƒì€ Reactê°€ ë²„íŠ¼ í´ë¦­ í›„ iFrameì˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì œëŒ€ë¡œ ì–¸ë§ˆìš´íŠ¸í•˜ì§€ ì•Šì•˜ìŒì„ í™•ì¸í–ˆì–´. (ì¬í‘œí˜„)</p>
<p>useEffectì˜ ì˜ì¡´ì„± ë°°ì—´ì„ ê±´ë“œë¦¬ë©´ì„œ ë¦¬ìŠ¤ë„ˆë¥¼ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•´ ë³´ì•˜ì§€ë§Œ, ëª¨ë“  ì‹œë„ê°€ ì‹¤íŒ¨í–ˆì–´. ìì‹ì—ê²Œ ë©”ì‹œì§€ë¥¼ ì—¬ëŸ¬ ë²ˆ ë³´ë‚´ë„, ìì‹ì€ ì²« ë²ˆì§¸ ë©”ì‹œì§€ë§Œ ë“£ë”ë¼ê³ .</p>
<h1>ê·¸ë˜ì„œ ì–´ë–»ê²Œ í•˜ë©´ ì œëŒ€ë¡œ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆì„ê¹Œ?</h1>
<p>ë” ê¶ê¸ˆí•´ì ¸ì„œ, ì²˜ìŒ ë©”ì‹œì§€ê°€ ë„ì°©í•œ í›„ì— ë‹¤ì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ í™•ì¸í•´ ë´¤ì–´ìš”. ì—¬ê¸°ì„œ ë¬¸ì œë¥¼ ë°œê²¬í–ˆì–´ìš”.</p>
<p><img src="/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_4.png" alt="ì´ë¯¸ì§€"></p>
<p>ì²« ë²ˆì§¸ ë©”ì‹œì§€ê°€ ë„ì°©í•œ í›„ì— iFrameì—ëŠ” ì–´ë– í•œ ë¦¬ìŠ¤ë„ˆë„ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì•˜ì–´ìš”. ë§ˆì¹˜ ì–´ë–»ê²Œë“  ì²« ë²ˆì§¸ ë©”ì‹œì§€ê°€ ë„ì°©í•œ í›„ì— ë¦¬ìŠ¤ë„ˆë“¤ì´ ì œê±°ëœ ê²ƒì²˜ëŸ¼ ë³´ì˜€ì–´ìš”.</p>
<p>ì¡°ê¸ˆ ë” ì‹¤í—˜í•´ ë³¸ ê²°ê³¼, srcDoc ìš”ì†Œì— ë¬¸ì œê°€ ìˆëŠ” ê²ƒì„ ë°œê²¬í–ˆì–´ìš”. ë”°ë¼ì„œ, ìƒíƒœê°€ ë³€ê²½ë  ë•Œ srcDoc ìš”ì†Œê°€ iFrameì˜ ìƒˆ ë©”ì‹œì§€ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë˜ì—ˆì–´ìš”. ì´ ë³€ê²½ìœ¼ë¡œ ì¸í•´ iFrameì€ iFrameê³¼ ê´€ë ¨ëœ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ëª¨ë‘ ì œê±°í•˜ê³  ë¦¬ì•¡íŠ¸ëŠ” ì•„ë¬´ê²ƒë„ ëª¨ë¥´ê²Œ ë˜ì—ˆì–´ìš” ğŸ«¢.</p>
<p>ê·¸ë˜ì„œ ReactëŠ” iFrameì´ ê·¸ê²ƒì„ í•˜ëŠ”ì§€ ëª¨ë¦…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ Reactì—ê²ŒëŠ” iFrameì— ëŒ€í•œ ì°¸ì¡°ê°€ ì¶”ê°€/ì œê±°ë˜ì–´ì•¼ í•˜ëŠ”ë°, ì°¸ì¡°ê°€ ì ˆëŒ€ ë³€ê²½ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ReactëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ ì–¸ë§ˆìš´íŠ¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ iFrameì— ì •ì  HTMLì„ ì¶”ê°€í–ˆìœ¼ë©°, ë©”ì‹œì§€ê°€ ë„ì°©í•  ë•Œë§ˆë‹¤ ê¸°ì¡´ HTMLì— ì¶”ê°€í•©ë‹ˆë‹¤. ì´ëŠ” srcDocê°€ ìƒˆ HTMLì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— iFrameì— ì²¨ë¶€ëœ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì§€ìš°ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect, forwardRef, <span class="hljs-title class_">ForwardedRef</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;


interface <span class="hljs-title class_">IFrameProps</span> {
  <span class="hljs-attr">ref</span>: <span class="hljs-title class_">ForwardedRef</span>&#x3C;<span class="hljs-title class_">HTMLIFrameElement</span>>;
}


<span class="hljs-keyword">const</span> html = <span class="hljs-string">`&#x3C;html>
&#x3C;body>
&#x3C;div id="changeText" value="changeText">Hello Div&#x3C;/div>
&#x3C;button value="replyButton" id="replyButton">Reply to parent&#x3C;/button>
&#x3C;script>
// Get the button element
var button = document.getElementById("replyButton");


// click event listener
button.addEventListener("click", function() {
  console.log('sending message to parent');
  window.parent.postMessage('Message from Child. Listen to me!');
});
&#x3C;/script>
&#x3C;/body>
&#x3C;/html>`</span>;


<span class="hljs-keyword">const</span> <span class="hljs-title class_">IFrame</span> = forwardRef&#x3C;<span class="hljs-title class_">HTMLIFrameElement</span>, <span class="hljs-title class_">IFrameProps</span>>(<span class="hljs-function">(<span class="hljs-params">prop, ref</span>) =></span> {
  <span class="hljs-keyword">const</span> iframeRef = ref <span class="hljs-keyword">as</span> <span class="hljs-title class_">React</span>.<span class="hljs-property">MutableRefObject</span>&#x3C;<span class="hljs-title class_">HTMLIFrameElement</span>>;
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"mounted"</span>);
    iframeRef?.<span class="hljs-property">current</span>?.<span class="hljs-property">contentWindow</span>?.<span class="hljs-title function_">addEventListener</span>(
      <span class="hljs-string">"message"</span>,
      processMessage,
      <span class="hljs-literal">false</span>
    );
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"unmounted"</span>);
      iframeRef?.<span class="hljs-property">current</span>?.<span class="hljs-property">contentWindow</span>?.<span class="hljs-title function_">removeEventListener</span>(
        <span class="hljs-string">"message"</span>,
        processMessage,
        <span class="hljs-literal">false</span>
      );
    };
  }, [iframeRef?.<span class="hljs-property">current</span>]);


  <span class="hljs-keyword">const</span> <span class="hljs-title function_">processMessage</span> = (<span class="hljs-params">event: MessageEvent</span>) => {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"iFrame Event Listener"</span>);
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">origin</span> !== <span class="hljs-string">"http://localhost:8080"</span>) {
      <span class="hljs-keyword">return</span>;
    }


    <span class="hljs-keyword">const</span> node = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"div"</span>);
    <span class="hljs-keyword">const</span> textNode = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(event?.<span class="hljs-property">data</span>);
    node.<span class="hljs-title function_">appendChild</span>(textNode);
    iframeRef?.<span class="hljs-property">current</span>?.<span class="hljs-property">contentWindow</span>?.<span class="hljs-property">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(textNode);
  };


  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"1"</span> {<span class="hljs-attr">...prop</span>} <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">srcDoc</span>=<span class="hljs-string">{html}</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">iframe</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
  );
});


<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">IFrame</span>;
</code></pre>
<h1>ìš”ì•½</h1>
<ul>
<li>ë¶€ëª¨ì™€ ìì‹ ê°„ì˜ ê°„ë‹¨í•œ ë©”ì‹œì§€ í†µì‹ ì´ ì‘ë™í•˜ì§€ ì•ŠëŠ” ì´ìœ ì— ëŒ€í•´ ê³µìœ í–ˆì–´ìš”. iFrameì—ì„œ srcDoc ìš”ì†Œë¥¼ ë³€ê²½í•  ê²½ìš° ì‘ë™í•˜ì§€ ì•Šì•„ìš”.</li>
<li>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ iFrameì— HTMLì„ ì‚½ì…í•˜ê³  ì§€ì†ì ìœ¼ë¡œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ iFrameì´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì§€ì›Œ ë²„ë¦¬ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆì–´ìš”.</li>
</ul>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"iFrameê°€ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•˜ê³  ReactëŠ” ì•Œì§€ ëª»í•œë‹¤ ","description":"","date":"2024-05-12 18:44","slug":"2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit","content":"\n\n# ê°œìš”\n\nì´ ê¸°ì‚¬ì—ì„œëŠ” ë¶€ëª¨ ì°½ê³¼ ìì‹ iFrame ê°„ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì„ ë³´ì—¬ë“œë¦¬ê³  ì‹¶ì–´ìš”. ì´ ê³¼ì •ì—ì„œ iFrameì´ ë¦¬ìŠ¤ë„ˆë¥¼ ì–´ë–»ê²Œ ì§€ìš°ëŠ”ì§€ì— ëŒ€í•´ í¥ë¯¸ë¡œìš´ ì ì„ ë°œê²¬í–ˆì–´ìš”. ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”, ë‚˜ì•„ê°€ë©´ì„œ ìŠ¤í¬ë¦°ìƒ·ì„ ê²Œì‹œí•  ê±°ì—ìš”. [GitHub ë§í¬](https://github.com)\n\nì¦ê²ê²Œ ê³µë¶€í•˜ì„¸ìš”!\n\n# iFrameì´ë€ ë¬´ì—‡ì¸ê°€ìš”?\n\n\n\niFrame ë˜ëŠ” ì¸ë¼ì¸ í”„ë ˆì„ì€ ë¶€ëª¨ ì›¹í˜ì´ì§€ ë‚´ì— ë‹¤ë¥¸ ë¬¸ì„œë¥¼ ë¡œë“œí•˜ëŠ” HTML ìš”ì†Œì…ë‹ˆë‹¤.\n\n# iFrameì„ ì‚¬ìš©í•˜ëŠ” ê³³ì€ ì–´ë””ì¸ê°€ìš”?\n\niFrameì€ ì´ë¯¸ ìˆëŠ” HTML ì•ˆì— HTMLì„ í¬í•¨ì‹œí‚¤ê³  ì‹¶ì„ ë•Œë‚˜ ì‹ ë¢°í•  ìˆ˜ ì—†ê±°ë‚˜ ì œ3ì ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¦‰, ê´‘ê³  ì„¹ì…˜ì„ ì›¹ì‚¬ì´íŠ¸ì— í‘œì‹œí•˜ê±°ë‚˜ YouTube ë¹„ë””ì˜¤ë¥¼ ë„£ê³  ì‹¶ì„ ë•Œ iFrameì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ë¡œ iFrameì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ì œ3ì ì‚¬ì´íŠ¸/ì½˜í…ì¸ ë¥¼ í˜¸ìŠ¤íŒ…í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n# iFrame ìƒì„±í•˜ê¸°\n\n\n\nì œê°€ ë§Œë“  í”„ë¡œì íŠ¸ëŠ” ê°„ë‹¨í•œ React ì•±(v18.2.0)ì…ë‹ˆë‹¤. ë¶€ëª¨ ìœ„ì ¯(App.tsx)ì€ iFrame ì»´í¬ë„ŒíŠ¸(IFrame.tsx)ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤. ë‘ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ëª¨ë‘ ë©”ì‹œì§€ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë  ë•Œ ì œê±°ë©ë‹ˆë‹¤. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ postMessage í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ iFrameì— ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.\n\nApp.tsx\n\n```js\nimport React, { useEffect, useRef } from \"react\";\nimport IFrame from \"./iFrame\";\n\nconst App: React.FC = () =\u003e {\n const refs = useRef\u003cHTMLIFrameElement\u003e(null);\n\n useEffect(() =\u003e {\n   window.addEventListener(\"message\", processMessage, false);\n   return () =\u003e window.removeEventListener(\"message\", processMessage);\n }, []);\n\n\n const processMessage = (event: MessageEvent) =\u003e {\n   if (event.origin !== \"http://localhost:8080\") {\n     return;\n   }\n   console.log(\"parent Event Listener\", event);\n };\n\n\n const buttonClick = (event: React.MouseEvent) =\u003e {\n   event.stopPropagation();\n   if (refs.current === null) {\n     return;\n   }\n\n   refs?.current?.contentWindow?.postMessage(\"ë¶€ëª¨ì—ì„œ ë³´ë‚¸ ë©”ì‹œì§€\", \"*\");\n };\n return (\n   \u003cdiv\u003e\n     \u003cbutton\n       style={ margin: \"10px\", marginLeft: \"0px\" }\n       onClick={buttonClick}\n     \u003e\n       ìì‹ì—ê²Œ ë©”ì‹œì§€ ë³´ë‚´ê¸°\n     \u003c/button\u003e\n     \u003cIFrame ref={refs} /\u003e\n   \u003c/div\u003e\n );\n};\n\nexport default App;\n```\n\nIFrame.tsx\n\n\n\n```js\nimport React, { useEffect, useState, forwardRef, ForwardedRef } from \"react\";\n\n\ninterface IFrameProps {\n ref: ForwardedRef\u003cHTMLIFrameElement\u003e;\n}\n\nconst IFrame = forwardRef\u003cHTMLIFrameElement, IFrameProps\u003e((prop, ref) =\u003e {\n const [message, setMessage] = useState('');\n const iframeRef = ref as React.MutableRefObject\u003cHTMLIFrameElement\u003e;\n useEffect(() =\u003e {\n   console.log(\"mounted\");\n   iframeRef?.current?.contentWindow?.addEventListener(\n     \"message\",\n     processMessage,\n     false\n   );\n   return () =\u003e {\n     console.log(\"unmounted\");\n     iframeRef?.current?.contentWindow?.removeEventListener(\n       \"message\",\n       processMessage,\n       false\n     );\n   };\n }, [iframeRef?.current]);\n\n\n const processMessage = (event: MessageEvent) =\u003e {\n   console.log(\"iFrame Event Listener\");\n   if (event.origin !== \"http://localhost:8080\") {\n     return;\n   }\n\n\n  const newMessage = message.concat(event?.data)\n  setMessage(newMessage);\n\n\n };\n\n\n return (\n   \u003cdiv\u003e\n     \u003ciframe id=\"1\" {...prop} ref={ref} srcDoc={message}\u003e\u003c/iframe\u003e\n   \u003c/div\u003e\n );\n});\n\n\nexport default IFrame;\r\n```\n\në¦¬ìŠ¤ë„ˆê°€ ì˜¬ë°”ë¥´ê²Œ ë§ˆìš´íŠ¸ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ iFrameì—ì„œ getEventListeners(window)ì„ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤. iFrameì—ì„œ 'message' ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹  ëŒ€ê¸°í•˜ëŠ” ë¦¬ìŠ¤ë„ˆë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë³´ì•ˆ ëŒ€ì±…ìœ¼ë¡œ ì•…ì˜ì ì¸ ì‚¬ìš©ìë¡œë¶€í„°ì˜ ë©”ì‹œì§€ë¥¼ ë¬´ì‹œí•˜ë„ë¡ originì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\n\n\u003cimg src=\"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_0.png\" /\u003e\n\n# í™”ë©´ì—ì„œ ë³´ì´ëŠ” ëª¨ìŠµ\n\n\n\n\n\u003cimg src=\"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_1.png\" /\u003e\n\në²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë©”ì‹œì§€ê°€ iFrame ì•ˆì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\n\n\u003cimg src=\"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_2.png\" /\u003e\n\nì´ ëª¨ë“  ê²ƒì´ ì •ë§ ê¸°ë»¤ì–´ìš”. ê·¸ëŸ¬ë‚˜ ì´ê³³ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë©”ì‹œì§€ë¥¼ iFrameìœ¼ë¡œ ë³´ë‚´ë ¤ê³  ì‹œë„í–ˆì„ ë•Œ iFrame UIê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. iFrame ì•ˆì—ì„œ \"ë¶€ëª¨ë¡œë¶€í„° ì˜¨ ë©”ì‹œì§€\"ë¥¼ ì—¬ëŸ¬ ë²ˆ ë³´ê¸°ë¥¼ ê¸°ëŒ€í–ˆëŠ”ë° ê·¸ëŸ° ì¼ì€ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë²„íŠ¼ í´ë¦­ ì‹œ UIê°€ ë§¤ë²ˆ ì—…ë°ì´íŠ¸ë˜ì§€ ëª»í–ˆë‹¤ëŠ” ê²ƒ ê°™ì•˜ì–´ìš”.\n\n\n\n\u003cimg src=\"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_3.png\" /\u003e\n\në‚´ ì½˜ì†” ë¡œê·¸ë¥¼ í™•ì¸í•´ ë³´ë‹ˆ, ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì–¸ë§ˆìš´íŠ¸í•œ í›„ì— ì¶œë ¥í•˜ëŠ” `unmounted`ê°€ ì•„ë¬´ëŸ° ë°œìƒí•˜ì§€ ì•Šì•˜ì–´. ì´ê²ƒì€ Reactê°€ ë²„íŠ¼ í´ë¦­ í›„ iFrameì˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì œëŒ€ë¡œ ì–¸ë§ˆìš´íŠ¸í•˜ì§€ ì•Šì•˜ìŒì„ í™•ì¸í–ˆì–´. (ì¬í‘œí˜„)\n\nuseEffectì˜ ì˜ì¡´ì„± ë°°ì—´ì„ ê±´ë“œë¦¬ë©´ì„œ ë¦¬ìŠ¤ë„ˆë¥¼ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•´ ë³´ì•˜ì§€ë§Œ, ëª¨ë“  ì‹œë„ê°€ ì‹¤íŒ¨í–ˆì–´. ìì‹ì—ê²Œ ë©”ì‹œì§€ë¥¼ ì—¬ëŸ¬ ë²ˆ ë³´ë‚´ë„, ìì‹ì€ ì²« ë²ˆì§¸ ë©”ì‹œì§€ë§Œ ë“£ë”ë¼ê³ .\n\n# ê·¸ë˜ì„œ ì–´ë–»ê²Œ í•˜ë©´ ì œëŒ€ë¡œ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆì„ê¹Œ?\n\n\n\në” ê¶ê¸ˆí•´ì ¸ì„œ, ì²˜ìŒ ë©”ì‹œì§€ê°€ ë„ì°©í•œ í›„ì— ë‹¤ì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ í™•ì¸í•´ ë´¤ì–´ìš”. ì—¬ê¸°ì„œ ë¬¸ì œë¥¼ ë°œê²¬í–ˆì–´ìš”.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_4.png)\n\nì²« ë²ˆì§¸ ë©”ì‹œì§€ê°€ ë„ì°©í•œ í›„ì— iFrameì—ëŠ” ì–´ë– í•œ ë¦¬ìŠ¤ë„ˆë„ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì•˜ì–´ìš”. ë§ˆì¹˜ ì–´ë–»ê²Œë“  ì²« ë²ˆì§¸ ë©”ì‹œì§€ê°€ ë„ì°©í•œ í›„ì— ë¦¬ìŠ¤ë„ˆë“¤ì´ ì œê±°ëœ ê²ƒì²˜ëŸ¼ ë³´ì˜€ì–´ìš”.\n\nì¡°ê¸ˆ ë” ì‹¤í—˜í•´ ë³¸ ê²°ê³¼, srcDoc ìš”ì†Œì— ë¬¸ì œê°€ ìˆëŠ” ê²ƒì„ ë°œê²¬í–ˆì–´ìš”. ë”°ë¼ì„œ, ìƒíƒœê°€ ë³€ê²½ë  ë•Œ srcDoc ìš”ì†Œê°€ iFrameì˜ ìƒˆ ë©”ì‹œì§€ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë˜ì—ˆì–´ìš”. ì´ ë³€ê²½ìœ¼ë¡œ ì¸í•´ iFrameì€ iFrameê³¼ ê´€ë ¨ëœ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ëª¨ë‘ ì œê±°í•˜ê³  ë¦¬ì•¡íŠ¸ëŠ” ì•„ë¬´ê²ƒë„ ëª¨ë¥´ê²Œ ë˜ì—ˆì–´ìš” ğŸ«¢.\n\n\n\nê·¸ë˜ì„œ ReactëŠ” iFrameì´ ê·¸ê²ƒì„ í•˜ëŠ”ì§€ ëª¨ë¦…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ Reactì—ê²ŒëŠ” iFrameì— ëŒ€í•œ ì°¸ì¡°ê°€ ì¶”ê°€/ì œê±°ë˜ì–´ì•¼ í•˜ëŠ”ë°, ì°¸ì¡°ê°€ ì ˆëŒ€ ë³€ê²½ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ReactëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ ì–¸ë§ˆìš´íŠ¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\nì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ iFrameì— ì •ì  HTMLì„ ì¶”ê°€í–ˆìœ¼ë©°, ë©”ì‹œì§€ê°€ ë„ì°©í•  ë•Œë§ˆë‹¤ ê¸°ì¡´ HTMLì— ì¶”ê°€í•©ë‹ˆë‹¤. ì´ëŠ” srcDocê°€ ìƒˆ HTMLì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— iFrameì— ì²¨ë¶€ëœ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì§€ìš°ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n```js\nimport React, { useEffect, forwardRef, ForwardedRef } from \"react\";\n\n\ninterface IFrameProps {\n  ref: ForwardedRef\u003cHTMLIFrameElement\u003e;\n}\n\n\nconst html = `\u003chtml\u003e\n\u003cbody\u003e\n\u003cdiv id=\"changeText\" value=\"changeText\"\u003eHello Div\u003c/div\u003e\n\u003cbutton value=\"replyButton\" id=\"replyButton\"\u003eReply to parent\u003c/button\u003e\n\u003cscript\u003e\n// Get the button element\nvar button = document.getElementById(\"replyButton\");\n\n\n// click event listener\nbutton.addEventListener(\"click\", function() {\n  console.log('sending message to parent');\n  window.parent.postMessage('Message from Child. Listen to me!');\n});\n\u003c/script\u003e\n\u003c/body\u003e\n\u003c/html\u003e`;\n\n\nconst IFrame = forwardRef\u003cHTMLIFrameElement, IFrameProps\u003e((prop, ref) =\u003e {\n  const iframeRef = ref as React.MutableRefObject\u003cHTMLIFrameElement\u003e;\n  useEffect(() =\u003e {\n    console.log(\"mounted\");\n    iframeRef?.current?.contentWindow?.addEventListener(\n      \"message\",\n      processMessage,\n      false\n    );\n    return () =\u003e {\n      console.log(\"unmounted\");\n      iframeRef?.current?.contentWindow?.removeEventListener(\n        \"message\",\n        processMessage,\n        false\n      );\n    };\n  }, [iframeRef?.current]);\n\n\n  const processMessage = (event: MessageEvent) =\u003e {\n    console.log(\"iFrame Event Listener\");\n    if (event.origin !== \"http://localhost:8080\") {\n      return;\n    }\n\n\n    const node = document.createElement(\"div\");\n    const textNode = document.createTextNode(event?.data);\n    node.appendChild(textNode);\n    iframeRef?.current?.contentWindow?.document.body.appendChild(textNode);\n  };\n\n\n  return (\n    \u003cdiv\u003e\n      \u003ciframe id=\"1\" {...prop} ref={ref} srcDoc={html}\u003e\u003c/iframe\u003e\n    \u003c/div\u003e\n  );\n});\n\n\nexport default IFrame;\r\n```\n\n# ìš”ì•½\n\n\n\n- ë¶€ëª¨ì™€ ìì‹ ê°„ì˜ ê°„ë‹¨í•œ ë©”ì‹œì§€ í†µì‹ ì´ ì‘ë™í•˜ì§€ ì•ŠëŠ” ì´ìœ ì— ëŒ€í•´ ê³µìœ í–ˆì–´ìš”. iFrameì—ì„œ srcDoc ìš”ì†Œë¥¼ ë³€ê²½í•  ê²½ìš° ì‘ë™í•˜ì§€ ì•Šì•„ìš”.\n- ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ iFrameì— HTMLì„ ì‚½ì…í•˜ê³  ì§€ì†ì ìœ¼ë¡œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ iFrameì´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì§€ì›Œ ë²„ë¦¬ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆì–´ìš”.","ogImage":{"url":"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_0.png"},"coverImage":"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_0.png","tag":["Tech"],"readingTime":7},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch1\u003eê°œìš”\u003c/h1\u003e\n\u003cp\u003eì´ ê¸°ì‚¬ì—ì„œëŠ” ë¶€ëª¨ ì°½ê³¼ ìì‹ iFrame ê°„ì— ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì„ ë³´ì—¬ë“œë¦¬ê³  ì‹¶ì–´ìš”. ì´ ê³¼ì •ì—ì„œ iFrameì´ ë¦¬ìŠ¤ë„ˆë¥¼ ì–´ë–»ê²Œ ì§€ìš°ëŠ”ì§€ì— ëŒ€í•´ í¥ë¯¸ë¡œìš´ ì ì„ ë°œê²¬í–ˆì–´ìš”. ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”, ë‚˜ì•„ê°€ë©´ì„œ ìŠ¤í¬ë¦°ìƒ·ì„ ê²Œì‹œí•  ê±°ì—ìš”. \u003ca href=\"https://github.com\" rel=\"nofollow\" target=\"_blank\"\u003eGitHub ë§í¬\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eì¦ê²ê²Œ ê³µë¶€í•˜ì„¸ìš”!\u003c/p\u003e\n\u003ch1\u003eiFrameì´ë€ ë¬´ì—‡ì¸ê°€ìš”?\u003c/h1\u003e\n\u003cp\u003eiFrame ë˜ëŠ” ì¸ë¼ì¸ í”„ë ˆì„ì€ ë¶€ëª¨ ì›¹í˜ì´ì§€ ë‚´ì— ë‹¤ë¥¸ ë¬¸ì„œë¥¼ ë¡œë“œí•˜ëŠ” HTML ìš”ì†Œì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eiFrameì„ ì‚¬ìš©í•˜ëŠ” ê³³ì€ ì–´ë””ì¸ê°€ìš”?\u003c/h1\u003e\n\u003cp\u003eiFrameì€ ì´ë¯¸ ìˆëŠ” HTML ì•ˆì— HTMLì„ í¬í•¨ì‹œí‚¤ê³  ì‹¶ì„ ë•Œë‚˜ ì‹ ë¢°í•  ìˆ˜ ì—†ê±°ë‚˜ ì œ3ì ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¦‰, ê´‘ê³  ì„¹ì…˜ì„ ì›¹ì‚¬ì´íŠ¸ì— í‘œì‹œí•˜ê±°ë‚˜ YouTube ë¹„ë””ì˜¤ë¥¼ ë„£ê³  ì‹¶ì„ ë•Œ iFrameì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ë¡œ iFrameì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ì œ3ì ì‚¬ì´íŠ¸/ì½˜í…ì¸ ë¥¼ í˜¸ìŠ¤íŒ…í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eiFrame ìƒì„±í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eì œê°€ ë§Œë“  í”„ë¡œì íŠ¸ëŠ” ê°„ë‹¨í•œ React ì•±(v18.2.0)ì…ë‹ˆë‹¤. ë¶€ëª¨ ìœ„ì ¯(App.tsx)ì€ iFrame ì»´í¬ë„ŒíŠ¸(IFrame.tsx)ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤. ë‘ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ëª¨ë‘ ë©”ì‹œì§€ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ê¸° ìœ„í•´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ í•´ì œë  ë•Œ ì œê±°ë©ë‹ˆë‹¤. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ postMessage í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ iFrameì— ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eApp.tsx\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { useEffect, useRef } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIFrame\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./iFrame\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eFC\u003c/span\u003e = \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e refs = useRef\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLIFrameElement\u003c/span\u003e\u003e(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n\n \u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n   \u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e, processMessage, \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e);\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eremoveEventListener\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e, processMessage);\n }, []);\n\n\n \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eprocessMessage\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eevent: MessageEvent\u003c/span\u003e) =\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (event.\u003cspan class=\"hljs-property\"\u003eorigin\u003c/span\u003e !== \u003cspan class=\"hljs-string\"\u003e\"http://localhost:8080\"\u003c/span\u003e) {\n     \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n   }\n   \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"parent Event Listener\"\u003c/span\u003e, event);\n };\n\n\n \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ebuttonClick\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eevent: React.MouseEvent\u003c/span\u003e) =\u003e {\n   event.\u003cspan class=\"hljs-title function_\"\u003estopPropagation\u003c/span\u003e();\n   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (refs.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e === \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e) {\n     \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n   }\n\n   refs?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003econtentWindow\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003epostMessage\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ë¶€ëª¨ì—ì„œ ë³´ë‚¸ ë©”ì‹œì§€\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"*\"\u003c/span\u003e);\n };\n \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n   \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n     \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\n       \u003cspan class=\"hljs-attr\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003emargin:\u003c/span\u003e \"\u003cspan class=\"hljs-attr\"\u003e10px\u003c/span\u003e\", \u003cspan class=\"hljs-attr\"\u003emarginLeft:\u003c/span\u003e \"\u003cspan class=\"hljs-attr\"\u003e0px\u003c/span\u003e\" }\n       \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{buttonClick}\u003c/span\u003e\n     \u003e\u003c/span\u003e\n       ìì‹ì—ê²Œ ë©”ì‹œì§€ ë³´ë‚´ê¸°\n     \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n     \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eIFrame\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eref\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{refs}\u003c/span\u003e /\u003e\u003c/span\u003e\n   \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n );\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIFrame.tsx\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { useEffect, useState, forwardRef, \u003cspan class=\"hljs-title class_\"\u003eForwardedRef\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\n\ninterface \u003cspan class=\"hljs-title class_\"\u003eIFrameProps\u003c/span\u003e {\n \u003cspan class=\"hljs-attr\"\u003eref\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eForwardedRef\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLIFrameElement\u003c/span\u003e\u003e;\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIFrame\u003c/span\u003e = forwardRef\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLIFrameElement\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eIFrameProps\u003c/span\u003e\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eprop, ref\u003c/span\u003e) =\u003e\u003c/span\u003e {\n \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [message, setMessage] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e);\n \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e iframeRef = ref \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eMutableRefObject\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLIFrameElement\u003c/span\u003e\u003e;\n \u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n   \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"mounted\"\u003c/span\u003e);\n   iframeRef?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003econtentWindow\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\n     \u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e,\n     processMessage,\n     \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n   );\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n     \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"unmounted\"\u003c/span\u003e);\n     iframeRef?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003econtentWindow\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003eremoveEventListener\u003c/span\u003e(\n       \u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e,\n       processMessage,\n       \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n     );\n   };\n }, [iframeRef?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e]);\n\n\n \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eprocessMessage\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eevent: MessageEvent\u003c/span\u003e) =\u003e {\n   \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"iFrame Event Listener\"\u003c/span\u003e);\n   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (event.\u003cspan class=\"hljs-property\"\u003eorigin\u003c/span\u003e !== \u003cspan class=\"hljs-string\"\u003e\"http://localhost:8080\"\u003c/span\u003e) {\n     \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n   }\n\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e newMessage = message.\u003cspan class=\"hljs-title function_\"\u003econcat\u003c/span\u003e(event?.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e)\n  \u003cspan class=\"hljs-title function_\"\u003esetMessage\u003c/span\u003e(newMessage);\n\n\n };\n\n\n \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n   \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n     \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eiframe\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"1\"\u003c/span\u003e {\u003cspan class=\"hljs-attr\"\u003e...prop\u003c/span\u003e} \u003cspan class=\"hljs-attr\"\u003eref\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{ref}\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrcDoc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{message}\u003c/span\u003e\u003e\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eiframe\u003c/span\u003e\u003e\u003c/span\u003e\n   \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n );\n});\n\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIFrame\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë¦¬ìŠ¤ë„ˆê°€ ì˜¬ë°”ë¥´ê²Œ ë§ˆìš´íŠ¸ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ iFrameì—ì„œ getEventListeners(window)ì„ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤. iFrameì—ì„œ 'message' ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹  ëŒ€ê¸°í•˜ëŠ” ë¦¬ìŠ¤ë„ˆë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë³´ì•ˆ ëŒ€ì±…ìœ¼ë¡œ ì•…ì˜ì ì¸ ì‚¬ìš©ìë¡œë¶€í„°ì˜ ë©”ì‹œì§€ë¥¼ ë¬´ì‹œí•˜ë„ë¡ originì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_0.png\"\u003e\n\u003ch1\u003eí™”ë©´ì—ì„œ ë³´ì´ëŠ” ëª¨ìŠµ\u003c/h1\u003e\n\u003cimg src=\"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_1.png\"\u003e\n\u003cp\u003eë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë©”ì‹œì§€ê°€ iFrame ì•ˆì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_2.png\"\u003e\n\u003cp\u003eì´ ëª¨ë“  ê²ƒì´ ì •ë§ ê¸°ë»¤ì–´ìš”. ê·¸ëŸ¬ë‚˜ ì´ê³³ì—ì„œ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë©”ì‹œì§€ë¥¼ iFrameìœ¼ë¡œ ë³´ë‚´ë ¤ê³  ì‹œë„í–ˆì„ ë•Œ iFrame UIê°€ ë³€ê²½ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. iFrame ì•ˆì—ì„œ \"ë¶€ëª¨ë¡œë¶€í„° ì˜¨ ë©”ì‹œì§€\"ë¥¼ ì—¬ëŸ¬ ë²ˆ ë³´ê¸°ë¥¼ ê¸°ëŒ€í–ˆëŠ”ë° ê·¸ëŸ° ì¼ì€ ì¼ì–´ë‚˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë²„íŠ¼ í´ë¦­ ì‹œ UIê°€ ë§¤ë²ˆ ì—…ë°ì´íŠ¸ë˜ì§€ ëª»í–ˆë‹¤ëŠ” ê²ƒ ê°™ì•˜ì–´ìš”.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_3.png\"\u003e\n\u003cp\u003eë‚´ ì½˜ì†” ë¡œê·¸ë¥¼ í™•ì¸í•´ ë³´ë‹ˆ, ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì–¸ë§ˆìš´íŠ¸í•œ í›„ì— ì¶œë ¥í•˜ëŠ” \u003ccode\u003eunmounted\u003c/code\u003eê°€ ì•„ë¬´ëŸ° ë°œìƒí•˜ì§€ ì•Šì•˜ì–´. ì´ê²ƒì€ Reactê°€ ë²„íŠ¼ í´ë¦­ í›„ iFrameì˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì œëŒ€ë¡œ ì–¸ë§ˆìš´íŠ¸í•˜ì§€ ì•Šì•˜ìŒì„ í™•ì¸í–ˆì–´. (ì¬í‘œí˜„)\u003c/p\u003e\n\u003cp\u003euseEffectì˜ ì˜ì¡´ì„± ë°°ì—´ì„ ê±´ë“œë¦¬ë©´ì„œ ë¦¬ìŠ¤ë„ˆë¥¼ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•´ ë³´ì•˜ì§€ë§Œ, ëª¨ë“  ì‹œë„ê°€ ì‹¤íŒ¨í–ˆì–´. ìì‹ì—ê²Œ ë©”ì‹œì§€ë¥¼ ì—¬ëŸ¬ ë²ˆ ë³´ë‚´ë„, ìì‹ì€ ì²« ë²ˆì§¸ ë©”ì‹œì§€ë§Œ ë“£ë”ë¼ê³ .\u003c/p\u003e\n\u003ch1\u003eê·¸ë˜ì„œ ì–´ë–»ê²Œ í•˜ë©´ ì œëŒ€ë¡œ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆì„ê¹Œ?\u003c/h1\u003e\n\u003cp\u003eë” ê¶ê¸ˆí•´ì ¸ì„œ, ì²˜ìŒ ë©”ì‹œì§€ê°€ ë„ì°©í•œ í›„ì— ë‹¤ì‹œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ í™•ì¸í•´ ë´¤ì–´ìš”. ì—¬ê¸°ì„œ ë¬¸ì œë¥¼ ë°œê²¬í–ˆì–´ìš”.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit_4.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003eì²« ë²ˆì§¸ ë©”ì‹œì§€ê°€ ë„ì°©í•œ í›„ì— iFrameì—ëŠ” ì–´ë– í•œ ë¦¬ìŠ¤ë„ˆë„ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šì•˜ì–´ìš”. ë§ˆì¹˜ ì–´ë–»ê²Œë“  ì²« ë²ˆì§¸ ë©”ì‹œì§€ê°€ ë„ì°©í•œ í›„ì— ë¦¬ìŠ¤ë„ˆë“¤ì´ ì œê±°ëœ ê²ƒì²˜ëŸ¼ ë³´ì˜€ì–´ìš”.\u003c/p\u003e\n\u003cp\u003eì¡°ê¸ˆ ë” ì‹¤í—˜í•´ ë³¸ ê²°ê³¼, srcDoc ìš”ì†Œì— ë¬¸ì œê°€ ìˆëŠ” ê²ƒì„ ë°œê²¬í–ˆì–´ìš”. ë”°ë¼ì„œ, ìƒíƒœê°€ ë³€ê²½ë  ë•Œ srcDoc ìš”ì†Œê°€ iFrameì˜ ìƒˆ ë©”ì‹œì§€ë¥¼ ê°€ë¦¬í‚¤ê²Œ ë˜ì—ˆì–´ìš”. ì´ ë³€ê²½ìœ¼ë¡œ ì¸í•´ iFrameì€ iFrameê³¼ ê´€ë ¨ëœ ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ëª¨ë‘ ì œê±°í•˜ê³  ë¦¬ì•¡íŠ¸ëŠ” ì•„ë¬´ê²ƒë„ ëª¨ë¥´ê²Œ ë˜ì—ˆì–´ìš” ğŸ«¢.\u003c/p\u003e\n\u003cp\u003eê·¸ë˜ì„œ ReactëŠ” iFrameì´ ê·¸ê²ƒì„ í•˜ëŠ”ì§€ ëª¨ë¦…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ Reactì—ê²ŒëŠ” iFrameì— ëŒ€í•œ ì°¸ì¡°ê°€ ì¶”ê°€/ì œê±°ë˜ì–´ì•¼ í•˜ëŠ”ë°, ì°¸ì¡°ê°€ ì ˆëŒ€ ë³€ê²½ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ReactëŠ” ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë§ˆìš´íŠ¸í•˜ê±°ë‚˜ ì–¸ë§ˆìš´íŠ¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ iFrameì— ì •ì  HTMLì„ ì¶”ê°€í–ˆìœ¼ë©°, ë©”ì‹œì§€ê°€ ë„ì°©í•  ë•Œë§ˆë‹¤ ê¸°ì¡´ HTMLì— ì¶”ê°€í•©ë‹ˆë‹¤. ì´ëŠ” srcDocê°€ ìƒˆ HTMLì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— iFrameì— ì²¨ë¶€ëœ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì§€ìš°ì§€ ì•ŠìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { useEffect, forwardRef, \u003cspan class=\"hljs-title class_\"\u003eForwardedRef\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\n\ninterface \u003cspan class=\"hljs-title class_\"\u003eIFrameProps\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003eref\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eForwardedRef\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLIFrameElement\u003c/span\u003e\u003e;\n}\n\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e html = \u003cspan class=\"hljs-string\"\u003e`\u0026#x3C;html\u003e\n\u0026#x3C;body\u003e\n\u0026#x3C;div id=\"changeText\" value=\"changeText\"\u003eHello Div\u0026#x3C;/div\u003e\n\u0026#x3C;button value=\"replyButton\" id=\"replyButton\"\u003eReply to parent\u0026#x3C;/button\u003e\n\u0026#x3C;script\u003e\n// Get the button element\nvar button = document.getElementById(\"replyButton\");\n\n\n// click event listener\nbutton.addEventListener(\"click\", function() {\n  console.log('sending message to parent');\n  window.parent.postMessage('Message from Child. Listen to me!');\n});\n\u0026#x3C;/script\u003e\n\u0026#x3C;/body\u003e\n\u0026#x3C;/html\u003e`\u003c/span\u003e;\n\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIFrame\u003c/span\u003e = forwardRef\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLIFrameElement\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eIFrameProps\u003c/span\u003e\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eprop, ref\u003c/span\u003e) =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e iframeRef = ref \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eMutableRefObject\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLIFrameElement\u003c/span\u003e\u003e;\n  \u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"mounted\"\u003c/span\u003e);\n    iframeRef?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003econtentWindow\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\n      \u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e,\n      processMessage,\n      \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n    );\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"unmounted\"\u003c/span\u003e);\n      iframeRef?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003econtentWindow\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003eremoveEventListener\u003c/span\u003e(\n        \u003cspan class=\"hljs-string\"\u003e\"message\"\u003c/span\u003e,\n        processMessage,\n        \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n      );\n    };\n  }, [iframeRef?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e]);\n\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eprocessMessage\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eevent: MessageEvent\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"iFrame Event Listener\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (event.\u003cspan class=\"hljs-property\"\u003eorigin\u003c/span\u003e !== \u003cspan class=\"hljs-string\"\u003e\"http://localhost:8080\"\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n    }\n\n\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e node = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateElement\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"div\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e textNode = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateTextNode\u003c/span\u003e(event?.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e);\n    node.\u003cspan class=\"hljs-title function_\"\u003eappendChild\u003c/span\u003e(textNode);\n    iframeRef?.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003econtentWindow\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eappendChild\u003c/span\u003e(textNode);\n  };\n\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eiframe\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"1\"\u003c/span\u003e {\u003cspan class=\"hljs-attr\"\u003e...prop\u003c/span\u003e} \u003cspan class=\"hljs-attr\"\u003eref\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{ref}\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003esrcDoc\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{html}\u003c/span\u003e\u003e\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eiframe\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n});\n\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIFrame\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eìš”ì•½\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eë¶€ëª¨ì™€ ìì‹ ê°„ì˜ ê°„ë‹¨í•œ ë©”ì‹œì§€ í†µì‹ ì´ ì‘ë™í•˜ì§€ ì•ŠëŠ” ì´ìœ ì— ëŒ€í•´ ê³µìœ í–ˆì–´ìš”. iFrameì—ì„œ srcDoc ìš”ì†Œë¥¼ ë³€ê²½í•  ê²½ìš° ì‘ë™í•˜ì§€ ì•Šì•„ìš”.\u003c/li\u003e\n\u003cli\u003eì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ iFrameì— HTMLì„ ì‚½ì…í•˜ê³  ì§€ì†ì ìœ¼ë¡œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ iFrameì´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì§€ì›Œ ë²„ë¦¬ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆì–´ìš”.\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-12-iFramewipesoutlistenersandReactdoesnotknowaboutit"},"buildId":"Rv-NbbtWUaja2joH5WkO_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>