<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Nodejs에서 SSLCOMMERZ 결제 게이트웨이 통합하기 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Nodejs에서 SSLCOMMERZ 결제 게이트웨이 통합하기 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="Nodejs에서 SSLCOMMERZ 결제 게이트웨이 통합하기 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs" data-gatsby-head="true"/><meta name="twitter:title" content="Nodejs에서 SSLCOMMERZ 결제 게이트웨이 통합하기 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-20 04:32" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_buildManifest.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Nodejs에서 SSLCOMMERZ 결제 게이트웨이 통합하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Nodejs에서 SSLCOMMERZ 결제 게이트웨이 통합하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 20, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>이 블로그 포스트에서는 MongoDB를 사용하여 Node.js 애플리케이션에 SSLCommerz 결제 게이트웨이를 통합하는 과정을 안내하겠습니다. 이 안내서는 웹 애플리케이션을 위한 안전하고 효율적인 결제 처리 시스템을 설정하는 데 도움이 될 것입니다.</p>
<p><img src="/assets/img/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs_0.png" alt="이미지"></p>
<p>SSLCOMMERZ는 SSL Wireless가 개발한 안전하고 인증된 온라인 결제 게이트웨이 플랫폼으로, 온라인 비즈니스 및 전자상거래 판매 업체의 최종 고객이 고객의 카드, 모바일 지갑 또는 은행 계좌로 안전한 거래를 수행할 수 있도록 하였습니다. SSLCOMMERZ의 주요 이점을 살펴보겠습니다.</p>
<ul>
<li>온라인 문서를 통한 빠른 활성화</li>
<li>쉬운 통합</li>
<li>방글라데시 중앙 은행이 PSO 라이선스 부여</li>
<li>30개 이상의 결제 방식</li>
<li>글로벌 결제 수락</li>
<li>실시간 대시보드 보고</li>
<li>PCI DSS 규정을 준수한 고수준 보안</li>
</ul>
<div class="content-ad"></div>
<h1>준비 사항</h1>
<p>시작하기 전에 다음 사항이 준비되어 있는지 확인하십시오:</p>
<ul>
<li>Node.js: 컴퓨터에 Node.js가 설치되어 있는지 확인하십시오. nodejs.org에서 다운로드할 수 있습니다.</li>
<li>MongoDB: MongoDB가 설정되어 실행 중인지 확인하십시오.</li>
<li>SSLCommerz 계정: SSLCommerz 상인 계정이 필요합니다. sslcommerz.com에서 가입할 수 있습니다.</li>
</ul>
<h1>단계 1: 프로젝트 설정하기</h1>
<div class="content-ad"></div>
<p>먼저, 새로운 Node.js 프로젝트를 생성하고 필요한 종속성을 설치하세요. 터미널을 열고 다음 명령을 실행해보세요:</p>
<pre><code class="hljs language-js">mkdir sslcommerz-integration
cd sslcommerz-integration
npm init -y
npm install express body-parser dotenv sslcommerz-lts mongodb cors
</code></pre>
<h1>단계 2: 환경 변수 설정</h1>
<p>프로젝트의 루트에 .env 파일을 생성하고 SSLCommerz 자격 증명을 추가하세요. 이러한 자격 증명은 SSLCommerz API와의 요청을 인증하는 데 사용될 것입니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">STORE_ID</span>=your_store_id
<span class="hljs-variable constant_">STORE_PASSWORD</span>=your_store_password
<span class="hljs-variable constant_">SERVER_API</span>=<span class="hljs-attr">http</span>:<span class="hljs-comment">//localhost:3030</span>
<span class="hljs-variable constant_">MONGO_URI</span> = <span class="hljs-string">"mongodb+srv://username:password@cluster0.7ctc5qe.mongodb.net/?retryWrites=true&#x26;w=majority"</span>
</code></pre>
<p>상인 계정을 생성한 후 이메일로 STORE_ID 및 STORE_PASSWORD를 받게 됩니다. SERVER_API는 백엔드 API 주소이며, MONGO_URI는 MongoDB 대시보드에서 얻을 수 있습니다.</p>
<h1>단계 3: 익스프레스 서버 설정</h1>
<p>이제 익스프레스 서버를 설정하고 결제 작업을 처리하기 위한 필요한 라우트를 정의하세요. app.js 파일을 만들고 다음 코드를 추가하세요:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">'body-parser'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">SSLCommerzPayment</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'sslcommerz-lts'</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">MongoClient</span>, <span class="hljs-title class_">ObjectId</span>, <span class="hljs-title class_">ServerApiVersion</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"mongodb"</span>);
<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">"cors"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'dotenv'</span>).<span class="hljs-title function_">config</span>();
<span class="hljs-keyword">const</span> mongoURI = process.<span class="hljs-property">env</span>.<span class="hljs-property">MONGO_URI</span>;

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-keyword">const</span> port = process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3030</span>;

app.<span class="hljs-title function_">use</span>(bodyParser.<span class="hljs-title function_">json</span>());
app.<span class="hljs-title function_">use</span>(bodyParser.<span class="hljs-title function_">urlencoded</span>({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> })); <span class="hljs-comment">// SSLCommerz로부터 전송된 폼 데이터 처리를 위해</span>

<span class="hljs-comment">// MongoDB 연결</span>
<span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MongoClient</span>(mongoURI, {
  <span class="hljs-attr">serverApi</span>: {
    <span class="hljs-attr">version</span>: <span class="hljs-title class_">ServerApiVersion</span>.<span class="hljs-property">v1</span>,
    <span class="hljs-attr">strict</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">deprecationErrors</span>: <span class="hljs-literal">true</span>,
  },
});

<span class="hljs-comment">// CORS 및 JSON 파싱을 위한 미들웨어</span>
app.<span class="hljs-title function_">use</span>(
  <span class="hljs-title function_">cors</span>({
    <span class="hljs-attr">origin</span>: [<span class="hljs-string">"http://localhost:5173"</span>],
    <span class="hljs-attr">credentials</span>: <span class="hljs-literal">true</span>,
  })
);
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

<span class="hljs-comment">// SSLCommerz 구성</span>
<span class="hljs-keyword">const</span> store_id = process.<span class="hljs-property">env</span>.<span class="hljs-property">STORE_ID</span>;
<span class="hljs-keyword">const</span> store_passwd = process.<span class="hljs-property">env</span>.<span class="hljs-property">STORE_PASSWORD</span>;
<span class="hljs-keyword">const</span> is_live = <span class="hljs-literal">false</span>; <span class="hljs-comment">// 라이브 모드: true, 샌드박스 모드: false</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">run</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 데이터베이스 연결</span>
    <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">connect</span>();

    <span class="hljs-comment">// 주문 저장을 위한 컬렉션</span>
    <span class="hljs-keyword">const</span> ordersCollection = client.<span class="hljs-title function_">db</span>(<span class="hljs-string">"test"</span>).<span class="hljs-title function_">collection</span>(<span class="hljs-string">"orders"</span>);

    <span class="hljs-comment">// 결제 생성을 위한 POST 요청</span>
    app.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/plans"</span>, <span class="hljs-keyword">async</span> (req, res) => {
      <span class="hljs-comment">// 클라이언트에서 보낸 플랜 세부 정보</span>
      <span class="hljs-keyword">const</span> planDetails = req.<span class="hljs-property">body</span>;

      <span class="hljs-comment">// 가격을 정수로 변환</span>
      <span class="hljs-keyword">const</span> price = <span class="hljs-built_in">parseInt</span>(planDetails.<span class="hljs-property">price</span>);

      <span class="hljs-comment">// ObjectId를 사용하여 트랜잭션 ID 생성</span>
      <span class="hljs-keyword">const</span> tran_id = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectId</span>().<span class="hljs-title function_">toString</span>();

      <span class="hljs-comment">// SSLCommerz로 보낼 결제 데이터</span>
      <span class="hljs-keyword">const</span> data = {
        <span class="hljs-attr">total_amount</span>: price,
        <span class="hljs-attr">currency</span>: <span class="hljs-string">"BDT"</span>,
        <span class="hljs-attr">tran_id</span>: tran_id,
        <span class="hljs-attr">success_url</span>: <span class="hljs-string">`<span class="hljs-subst">${process.env.SERVER_API}</span>/payment/success`</span>,
        <span class="hljs-attr">fail_url</span>: <span class="hljs-string">`<span class="hljs-subst">${process.env.SERVER_API}</span>/payment/fail`</span>,
        <span class="hljs-attr">cancel_url</span>: <span class="hljs-string">`<span class="hljs-subst">${process.env.SERVER_API}</span>/payment/cancel`</span>,
        <span class="hljs-attr">ipn_url</span>: <span class="hljs-string">`<span class="hljs-subst">${process.env.SERVER_API}</span>/payment/ipn`</span>,
        <span class="hljs-attr">shipping_method</span>: <span class="hljs-string">"Courier"</span>,
        <span class="hljs-attr">product_name</span>: planDetails.<span class="hljs-property">plan</span>,
        <span class="hljs-attr">product_category</span>: <span class="hljs-string">"Electronic"</span>,
        <span class="hljs-attr">product_profile</span>: <span class="hljs-string">"general"</span>,
        <span class="hljs-attr">cus_name</span>: <span class="hljs-string">"Customer Name"</span>,
        <span class="hljs-attr">cus_email</span>: planDetails.<span class="hljs-property">user_email</span>,
        <span class="hljs-attr">cus_add1</span>: <span class="hljs-string">"Dhaka"</span>,
        <span class="hljs-attr">cus_add2</span>: <span class="hljs-string">"Dhaka"</span>,
        <span class="hljs-attr">cus_city</span>: <span class="hljs-string">"Dhaka"</span>,
        <span class="hljs-attr">cus_state</span>: <span class="hljs-string">"Dhaka"</span>,
        <span class="hljs-attr">cus_postcode</span>: <span class="hljs-string">"1000"</span>,
        <span class="hljs-attr">cus_country</span>: <span class="hljs-string">"Bangladesh"</span>,
        <span class="hljs-attr">cus_phone</span>: <span class="hljs-string">"01711111111"</span>,
        <span class="hljs-attr">cus_fax</span>: <span class="hljs-string">"01711111111"</span>,
        <span class="hljs-attr">ship_name</span>: <span class="hljs-string">"Customer Name"</span>,
        <span class="hljs-attr">ship_add1</span>: <span class="hljs-string">"Dhaka"</span>,
        <span class="hljs-attr">ship_add2</span>: <span class="hljs-string">"Dhaka"</span>,
        <span class="hljs-attr">ship_city</span>: <span class="hljs-string">"Dhaka"</span>,
        <span class="hljs-attr">ship_state</span>: <span class="hljs-string">"Dhaka"</span>,
        <span class="hljs-attr">ship_postcode</span>: <span class="hljs-number">1000</span>,
        <span class="hljs-attr">ship_country</span>: <span class="hljs-string">"Bangladesh"</span>
      };

      <span class="hljs-comment">// SSLCommerz 결제 초기화</span>
      <span class="hljs-keyword">const</span> sslcz = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SSLCommerzPayment</span>(store_id, store_passwd, is_live);
      sslcz.<span class="hljs-title function_">init</span>(data).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">apiResponse</span>) =></span> {
        <span class="hljs-comment">// 결제 게이트웨이 URL 가져오기</span>
        <span class="hljs-keyword">let</span> <span class="hljs-title class_">GatewayPageURL</span> = apiResponse.<span class="hljs-property">GatewayPageURL</span>;
        res.<span class="hljs-title function_">send</span>({ <span class="hljs-attr">url</span>: <span class="hljs-title class_">GatewayPageURL</span> });

        <span class="hljs-comment">// 주문 세부 정보를 데이터베이스에 삽입</span>
        <span class="hljs-keyword">const</span> order = { ...planDetails, tran_id, <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>};
        <span class="hljs-keyword">const</span> result = ordersCollection.<span class="hljs-title function_">insertOne</span>(order);
      });

      <span class="hljs-comment">// 성공한 결제 처리를 위한 POST 요청</span>
      app.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/payment/success"</span>, <span class="hljs-keyword">async</span> (req, res) => {

        <span class="hljs-comment">// 데이터베이스에서 주문 상태를 성공으로 업데이트</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> ordersCollection.<span class="hljs-title function_">updateOne</span>(
          { tran_id },
          { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'success'</span>} }
        );
         <span class="hljs-comment">// 클라이언트에 결제 성공 페이지로 리디렉션</span>
        res.<span class="hljs-title function_">redirect</span>(<span class="hljs-string">"http://localhost:5173/payment/success"</span>);
      });

      <span class="hljs-comment">// 실패한 결제 처리를 위한 POST 요청</span>
      app.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/payment/fail"</span>, <span class="hljs-keyword">async</span> (req, res) => {

        <span class="hljs-comment">// 데이터베이스에서 주문 상태를 실패로 업데이트</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> ordersCollection.<span class="hljs-title function_">updateOne</span>(
          { tran_id },
          { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'failed'</span>} }
        );
       <span class="hljs-comment">// 클라이언트에 결제 실패 페이지로 리디렉션</span>
        res.<span class="hljs-title function_">redirect</span>(<span class="hljs-string">"http://localhost:5173/payment/fail"</span>);
      });

      <span class="hljs-comment">// 취소된 결제 처리를 위한 POST 요청</span>
      app.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/payment/cancel"</span>, <span class="hljs-keyword">async</span> (req, res) => {

        <span class="hljs-comment">// 데이터베이스에서 주문 상태를 취소됨으로 업데이트</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> ordersCollection.<span class="hljs-title function_">updateOne</span>(
          { tran_id },
          { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'canceled'</span>} }
        );
        <span class="hljs-comment">// 클라이언트에 결제 취소 페이지로 리디렉션</span>
        res.<span class="hljs-title function_">redirect</span>(<span class="hljs-string">"http://localhost:5173/payment/cancel"</span>);
      });

      <span class="hljs-comment">// IPN(즉시 결제 알림) 처리를 위한 POST 요청</span>
      app.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/payment/ipn"</span>, <span class="hljs-keyword">async</span> (req, res) => {

        <span class="hljs-comment">// IPN 알림에 따라 데이터베이스에서 주문 상태 업데이트</span>
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> ordersCollection.<span class="hljs-title function_">updateOne</span>(
          { tran_id },
          { <span class="hljs-attr">$set</span>: { <span class="hljs-attr">status</span>: status === <span class="hljs-string">"VALID"</span> } }
        );
        res.<span class="hljs-title function_">send</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"IPN received"</span> });
      });
    });
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 서버가 계속 실행되도록 보장</span>
  }
};

<span class="hljs-comment">// 서버 실행</span>
<span class="hljs-title function_">run</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">dir</span>);

<span class="hljs-comment">// 서버 실행 상태 확인을 위한 간단한 루트</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/'</span>, <span class="hljs-keyword">async</span> (req, res) => {
  res.<span class="hljs-title function_">send</span>({ <span class="hljs-attr">server_status</span>: <span class="hljs-string">"Running"</span> });
});

<span class="hljs-comment">// Express 서버 시작</span>
app.<span class="hljs-title function_">listen</span>(port, <span class="hljs-function">() =></span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`서버가 <span class="hljs-subst">${port}</span> 포트에서 실행 중입니다.`</span>);
});
</code></pre>
<div class="content-ad"></div>
<p>프론트엔드에서 지불 프로세스를 트리거하기 위해 아래의 코드 스니펫을 사용할 수 있어요. 이 코드는 POST 요청을 /plans 엔드포인트로 보내고, 사용자를 SSLCommerz 지불 페이지로 리디렉션해요.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handlePlans</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/plans'</span>, {
    <span class="hljs-attr">user_email</span>: user.<span class="hljs-property">email</span>,
    <span class="hljs-attr">plan</span>: plan,
    <span class="hljs-attr">price</span>: price,
    <span class="hljs-attr">purchase_date</span>: purchaseDate,
    <span class="hljs-attr">expiration_date</span>: expirationDate,
    <span class="hljs-attr">currency</span>: <span class="hljs-string">'BDT'</span>,
    <span class="hljs-attr">payment_method</span>: <span class="hljs-string">'SSLCOMMERZ'</span>
  });
  <span class="hljs-comment">// 서버로부터 받은 URL로 리디렉션하기</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-title function_">replace</span>(data.<span class="hljs-property">url</span>);
};
</code></pre>
<h1>설명</h1>
<ul>
<li>handlePlans 함수: 해당 함수는 필요한 플랜 세부 정보와 함께 /plans 엔드포인트로 POST 요청을 보냅니다.</li>
<li>리디렉션: 응답을 받은 후, 사용자는 window.location.replace를 사용하여 SSLCommerz 지불 페이지로 리디렉션됩니다.</li>
</ul>
<div class="content-ad"></div>
<h1>결론</h1>
<p>이 블로그 포스트에서 우리는 SSLCommerz 결제 게이트웨이를 Node.js 어플리케이션에 성공적으로 통합하고 데이터베이스 작업에 대해 직접 MongoDB를 사용했습니다. 이 통합을 통해 안전하게 결제를 처리하고 데이터베이스를 업데이트할 수 있습니다.</p>
<h1>주요 포인트</h1>
<ul>
<li>SSLCommerz 설정: SSLCommerz와 상점 ID 및 비밀번호를 획득하기 위해 상인 계정을 사용합니다.</li>
<li>환경 변수: 환경 변수에 자격 증명을 안전하게 저장합니다.</li>
<li>MongoDB 작업: 주문 추적 및 사용자 플랜 업데이트를 위해 데이터베이스 작업에 MongoDB를 사용합니다.</li>
</ul>
<div class="content-ad"></div>
<p>이 단계를 따라하면 Node.js 애플리케이션에 견고하고 안전한 결제 처리 시스템을 설정할 수 있어요. 코딩을 즐기세요!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Nodejs에서 SSLCOMMERZ 결제 게이트웨이 통합하기","description":"","date":"2024-06-20 04:32","slug":"2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs","content":"\n\n이 블로그 포스트에서는 MongoDB를 사용하여 Node.js 애플리케이션에 SSLCommerz 결제 게이트웨이를 통합하는 과정을 안내하겠습니다. 이 안내서는 웹 애플리케이션을 위한 안전하고 효율적인 결제 처리 시스템을 설정하는 데 도움이 될 것입니다.\n\n![이미지](/assets/img/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs_0.png)\n\nSSLCOMMERZ는 SSL Wireless가 개발한 안전하고 인증된 온라인 결제 게이트웨이 플랫폼으로, 온라인 비즈니스 및 전자상거래 판매 업체의 최종 고객이 고객의 카드, 모바일 지갑 또는 은행 계좌로 안전한 거래를 수행할 수 있도록 하였습니다. SSLCOMMERZ의 주요 이점을 살펴보겠습니다.\n\n- 온라인 문서를 통한 빠른 활성화\n- 쉬운 통합\n- 방글라데시 중앙 은행이 PSO 라이선스 부여\n- 30개 이상의 결제 방식\n- 글로벌 결제 수락\n- 실시간 대시보드 보고\n- PCI DSS 규정을 준수한 고수준 보안\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 준비 사항\n\n시작하기 전에 다음 사항이 준비되어 있는지 확인하십시오:\n\n- Node.js: 컴퓨터에 Node.js가 설치되어 있는지 확인하십시오. nodejs.org에서 다운로드할 수 있습니다.\n- MongoDB: MongoDB가 설정되어 실행 중인지 확인하십시오.\n- SSLCommerz 계정: SSLCommerz 상인 계정이 필요합니다. sslcommerz.com에서 가입할 수 있습니다.\n\n# 단계 1: 프로젝트 설정하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n먼저, 새로운 Node.js 프로젝트를 생성하고 필요한 종속성을 설치하세요. 터미널을 열고 다음 명령을 실행해보세요:\n\n```js\nmkdir sslcommerz-integration\ncd sslcommerz-integration\nnpm init -y\nnpm install express body-parser dotenv sslcommerz-lts mongodb cors\n```\n\n# 단계 2: 환경 변수 설정\n\n프로젝트의 루트에 .env 파일을 생성하고 SSLCommerz 자격 증명을 추가하세요. 이러한 자격 증명은 SSLCommerz API와의 요청을 인증하는 데 사용될 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nSTORE_ID=your_store_id\nSTORE_PASSWORD=your_store_password\nSERVER_API=http://localhost:3030\nMONGO_URI = \"mongodb+srv://username:password@cluster0.7ctc5qe.mongodb.net/?retryWrites=true\u0026w=majority\"\n```\n\n상인 계정을 생성한 후 이메일로 STORE_ID 및 STORE_PASSWORD를 받게 됩니다. SERVER_API는 백엔드 API 주소이며, MONGO_URI는 MongoDB 대시보드에서 얻을 수 있습니다.\n\n# 단계 3: 익스프레스 서버 설정\n\n이제 익스프레스 서버를 설정하고 결제 작업을 처리하기 위한 필요한 라우트를 정의하세요. app.js 파일을 만들고 다음 코드를 추가하세요:\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nconst express = require('express');\nconst bodyParser = require('body-parser');\nconst SSLCommerzPayment = require('sslcommerz-lts');\nconst { MongoClient, ObjectId, ServerApiVersion } = require(\"mongodb\");\nconst cors = require(\"cors\");\nrequire('dotenv').config();\nconst mongoURI = process.env.MONGO_URI;\n\nconst app = express();\nconst port = process.env.PORT || 3030;\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true })); // SSLCommerz로부터 전송된 폼 데이터 처리를 위해\n\n// MongoDB 연결\nconst client = new MongoClient(mongoURI, {\n  serverApi: {\n    version: ServerApiVersion.v1,\n    strict: true,\n    deprecationErrors: true,\n  },\n});\n\n// CORS 및 JSON 파싱을 위한 미들웨어\napp.use(\n  cors({\n    origin: [\"http://localhost:5173\"],\n    credentials: true,\n  })\n);\napp.use(express.json());\n\n// SSLCommerz 구성\nconst store_id = process.env.STORE_ID;\nconst store_passwd = process.env.STORE_PASSWORD;\nconst is_live = false; // 라이브 모드: true, 샌드박스 모드: false\n\nconst run = async () =\u003e {\n  try {\n    // 데이터베이스 연결\n    await client.connect();\n\n    // 주문 저장을 위한 컬렉션\n    const ordersCollection = client.db(\"test\").collection(\"orders\");\n\n    // 결제 생성을 위한 POST 요청\n    app.post(\"/plans\", async (req, res) =\u003e {\n      // 클라이언트에서 보낸 플랜 세부 정보\n      const planDetails = req.body;\n\n      // 가격을 정수로 변환\n      const price = parseInt(planDetails.price);\n\n      // ObjectId를 사용하여 트랜잭션 ID 생성\n      const tran_id = new ObjectId().toString();\n\n      // SSLCommerz로 보낼 결제 데이터\n      const data = {\n        total_amount: price,\n        currency: \"BDT\",\n        tran_id: tran_id,\n        success_url: `${process.env.SERVER_API}/payment/success`,\n        fail_url: `${process.env.SERVER_API}/payment/fail`,\n        cancel_url: `${process.env.SERVER_API}/payment/cancel`,\n        ipn_url: `${process.env.SERVER_API}/payment/ipn`,\n        shipping_method: \"Courier\",\n        product_name: planDetails.plan,\n        product_category: \"Electronic\",\n        product_profile: \"general\",\n        cus_name: \"Customer Name\",\n        cus_email: planDetails.user_email,\n        cus_add1: \"Dhaka\",\n        cus_add2: \"Dhaka\",\n        cus_city: \"Dhaka\",\n        cus_state: \"Dhaka\",\n        cus_postcode: \"1000\",\n        cus_country: \"Bangladesh\",\n        cus_phone: \"01711111111\",\n        cus_fax: \"01711111111\",\n        ship_name: \"Customer Name\",\n        ship_add1: \"Dhaka\",\n        ship_add2: \"Dhaka\",\n        ship_city: \"Dhaka\",\n        ship_state: \"Dhaka\",\n        ship_postcode: 1000,\n        ship_country: \"Bangladesh\"\n      };\n\n      // SSLCommerz 결제 초기화\n      const sslcz = new SSLCommerzPayment(store_id, store_passwd, is_live);\n      sslcz.init(data).then((apiResponse) =\u003e {\n        // 결제 게이트웨이 URL 가져오기\n        let GatewayPageURL = apiResponse.GatewayPageURL;\n        res.send({ url: GatewayPageURL });\n\n        // 주문 세부 정보를 데이터베이스에 삽입\n        const order = { ...planDetails, tran_id, status: 'pending'};\n        const result = ordersCollection.insertOne(order);\n      });\n\n      // 성공한 결제 처리를 위한 POST 요청\n      app.post(\"/payment/success\", async (req, res) =\u003e {\n\n        // 데이터베이스에서 주문 상태를 성공으로 업데이트\n        const result = await ordersCollection.updateOne(\n          { tran_id },\n          { $set: { status: 'success'} }\n        );\n         // 클라이언트에 결제 성공 페이지로 리디렉션\n        res.redirect(\"http://localhost:5173/payment/success\");\n      });\n\n      // 실패한 결제 처리를 위한 POST 요청\n      app.post(\"/payment/fail\", async (req, res) =\u003e {\n\n        // 데이터베이스에서 주문 상태를 실패로 업데이트\n        const result = await ordersCollection.updateOne(\n          { tran_id },\n          { $set: { status: 'failed'} }\n        );\n       // 클라이언트에 결제 실패 페이지로 리디렉션\n        res.redirect(\"http://localhost:5173/payment/fail\");\n      });\n\n      // 취소된 결제 처리를 위한 POST 요청\n      app.post(\"/payment/cancel\", async (req, res) =\u003e {\n\n        // 데이터베이스에서 주문 상태를 취소됨으로 업데이트\n        const result = await ordersCollection.updateOne(\n          { tran_id },\n          { $set: { status: 'canceled'} }\n        );\n        // 클라이언트에 결제 취소 페이지로 리디렉션\n        res.redirect(\"http://localhost:5173/payment/cancel\");\n      });\n\n      // IPN(즉시 결제 알림) 처리를 위한 POST 요청\n      app.post(\"/payment/ipn\", async (req, res) =\u003e {\n\n        // IPN 알림에 따라 데이터베이스에서 주문 상태 업데이트\n        const result = await ordersCollection.updateOne(\n          { tran_id },\n          { $set: { status: status === \"VALID\" } }\n        );\n        res.send({ message: \"IPN received\" });\n      });\n    });\n  } finally {\n    // 서버가 계속 실행되도록 보장\n  }\n};\n\n// 서버 실행\nrun().catch(console.dir);\n\n// 서버 실행 상태 확인을 위한 간단한 루트\napp.get('/', async (req, res) =\u003e {\n  res.send({ server_status: \"Running\" });\n});\n\n// Express 서버 시작\napp.listen(port, () =\u003e {\n  console.log(`서버가 ${port} 포트에서 실행 중입니다.`);\n});\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n프론트엔드에서 지불 프로세스를 트리거하기 위해 아래의 코드 스니펫을 사용할 수 있어요. 이 코드는 POST 요청을 /plans 엔드포인트로 보내고, 사용자를 SSLCommerz 지불 페이지로 리디렉션해요.\n\n```js\nconst handlePlans = async () =\u003e {\n  const { data } = await axios.post('/plans', {\n    user_email: user.email,\n    plan: plan,\n    price: price,\n    purchase_date: purchaseDate,\n    expiration_date: expirationDate,\n    currency: 'BDT',\n    payment_method: 'SSLCOMMERZ'\n  });\n  // 서버로부터 받은 URL로 리디렉션하기\n  window.location.replace(data.url);\n};\n```\n\n# 설명\n\n- handlePlans 함수: 해당 함수는 필요한 플랜 세부 정보와 함께 /plans 엔드포인트로 POST 요청을 보냅니다.\n- 리디렉션: 응답을 받은 후, 사용자는 window.location.replace를 사용하여 SSLCommerz 지불 페이지로 리디렉션됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 결론\n\n이 블로그 포스트에서 우리는 SSLCommerz 결제 게이트웨이를 Node.js 어플리케이션에 성공적으로 통합하고 데이터베이스 작업에 대해 직접 MongoDB를 사용했습니다. 이 통합을 통해 안전하게 결제를 처리하고 데이터베이스를 업데이트할 수 있습니다.\n\n# 주요 포인트\n\n- SSLCommerz 설정: SSLCommerz와 상점 ID 및 비밀번호를 획득하기 위해 상인 계정을 사용합니다.\n- 환경 변수: 환경 변수에 자격 증명을 안전하게 저장합니다.\n- MongoDB 작업: 주문 추적 및 사용자 플랜 업데이트를 위해 데이터베이스 작업에 MongoDB를 사용합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 단계를 따라하면 Node.js 애플리케이션에 견고하고 안전한 결제 처리 시스템을 설정할 수 있어요. 코딩을 즐기세요!","ogImage":{"url":"/assets/img/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs_0.png"},"coverImage":"/assets/img/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e이 블로그 포스트에서는 MongoDB를 사용하여 Node.js 애플리케이션에 SSLCommerz 결제 게이트웨이를 통합하는 과정을 안내하겠습니다. 이 안내서는 웹 애플리케이션을 위한 안전하고 효율적인 결제 처리 시스템을 설정하는 데 도움이 될 것입니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003eSSLCOMMERZ는 SSL Wireless가 개발한 안전하고 인증된 온라인 결제 게이트웨이 플랫폼으로, 온라인 비즈니스 및 전자상거래 판매 업체의 최종 고객이 고객의 카드, 모바일 지갑 또는 은행 계좌로 안전한 거래를 수행할 수 있도록 하였습니다. SSLCOMMERZ의 주요 이점을 살펴보겠습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e온라인 문서를 통한 빠른 활성화\u003c/li\u003e\n\u003cli\u003e쉬운 통합\u003c/li\u003e\n\u003cli\u003e방글라데시 중앙 은행이 PSO 라이선스 부여\u003c/li\u003e\n\u003cli\u003e30개 이상의 결제 방식\u003c/li\u003e\n\u003cli\u003e글로벌 결제 수락\u003c/li\u003e\n\u003cli\u003e실시간 대시보드 보고\u003c/li\u003e\n\u003cli\u003ePCI DSS 규정을 준수한 고수준 보안\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e준비 사항\u003c/h1\u003e\n\u003cp\u003e시작하기 전에 다음 사항이 준비되어 있는지 확인하십시오:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNode.js: 컴퓨터에 Node.js가 설치되어 있는지 확인하십시오. nodejs.org에서 다운로드할 수 있습니다.\u003c/li\u003e\n\u003cli\u003eMongoDB: MongoDB가 설정되어 실행 중인지 확인하십시오.\u003c/li\u003e\n\u003cli\u003eSSLCommerz 계정: SSLCommerz 상인 계정이 필요합니다. sslcommerz.com에서 가입할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e단계 1: 프로젝트 설정하기\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e먼저, 새로운 Node.js 프로젝트를 생성하고 필요한 종속성을 설치하세요. 터미널을 열고 다음 명령을 실행해보세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emkdir sslcommerz-integration\ncd sslcommerz-integration\nnpm init -y\nnpm install express body-parser dotenv sslcommerz-lts mongodb cors\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 2: 환경 변수 설정\u003c/h1\u003e\n\u003cp\u003e프로젝트의 루트에 .env 파일을 생성하고 SSLCommerz 자격 증명을 추가하세요. 이러한 자격 증명은 SSLCommerz API와의 요청을 인증하는 데 사용될 것입니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eSTORE_ID\u003c/span\u003e=your_store_id\n\u003cspan class=\"hljs-variable constant_\"\u003eSTORE_PASSWORD\u003c/span\u003e=your_store_password\n\u003cspan class=\"hljs-variable constant_\"\u003eSERVER_API\u003c/span\u003e=\u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//localhost:3030\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eMONGO_URI\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"mongodb+srv://username:password@cluster0.7ctc5qe.mongodb.net/?retryWrites=true\u0026#x26;w=majority\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e상인 계정을 생성한 후 이메일로 STORE_ID 및 STORE_PASSWORD를 받게 됩니다. SERVER_API는 백엔드 API 주소이며, MONGO_URI는 MongoDB 대시보드에서 얻을 수 있습니다.\u003c/p\u003e\n\u003ch1\u003e단계 3: 익스프레스 서버 설정\u003c/h1\u003e\n\u003cp\u003e이제 익스프레스 서버를 설정하고 결제 작업을 처리하기 위한 필요한 라우트를 정의하세요. app.js 파일을 만들고 다음 코드를 추가하세요:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e express = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'express'\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e bodyParser = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'body-parser'\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSSLCommerzPayment\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'sslcommerz-lts'\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eMongoClient\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eObjectId\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eServerApiVersion\u003c/span\u003e } = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"mongodb\"\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cors = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"cors\"\u003c/span\u003e);\n\u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'dotenv'\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e mongoURI = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eMONGO_URI\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e app = \u003cspan class=\"hljs-title function_\"\u003eexpress\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e port = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePORT\u003c/span\u003e || \u003cspan class=\"hljs-number\"\u003e3030\u003c/span\u003e;\n\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(bodyParser.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e());\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(bodyParser.\u003cspan class=\"hljs-title function_\"\u003eurlencoded\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eextended\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e })); \u003cspan class=\"hljs-comment\"\u003e// SSLCommerz로부터 전송된 폼 데이터 처리를 위해\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// MongoDB 연결\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e client = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMongoClient\u003c/span\u003e(mongoURI, {\n  \u003cspan class=\"hljs-attr\"\u003eserverApi\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eServerApiVersion\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ev1\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003estrict\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003edeprecationErrors\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// CORS 및 JSON 파싱을 위한 미들웨어\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(\n  \u003cspan class=\"hljs-title function_\"\u003ecors\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003eorigin\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\"http://localhost:5173\"\u003c/span\u003e],\n    \u003cspan class=\"hljs-attr\"\u003ecredentials\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  })\n);\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(express.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e());\n\n\u003cspan class=\"hljs-comment\"\u003e// SSLCommerz 구성\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e store_id = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eSTORE_ID\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e store_passwd = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eSTORE_PASSWORD\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e is_live = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// 라이브 모드: true, 샌드박스 모드: false\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erun\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// 데이터베이스 연결\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e client.\u003cspan class=\"hljs-title function_\"\u003econnect\u003c/span\u003e();\n\n    \u003cspan class=\"hljs-comment\"\u003e// 주문 저장을 위한 컬렉션\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e ordersCollection = client.\u003cspan class=\"hljs-title function_\"\u003edb\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"test\"\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ecollection\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"orders\"\u003c/span\u003e);\n\n    \u003cspan class=\"hljs-comment\"\u003e// 결제 생성을 위한 POST 요청\u003c/span\u003e\n    app.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/plans\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n      \u003cspan class=\"hljs-comment\"\u003e// 클라이언트에서 보낸 플랜 세부 정보\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e planDetails = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n\n      \u003cspan class=\"hljs-comment\"\u003e// 가격을 정수로 변환\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e price = \u003cspan class=\"hljs-built_in\"\u003eparseInt\u003c/span\u003e(planDetails.\u003cspan class=\"hljs-property\"\u003eprice\u003c/span\u003e);\n\n      \u003cspan class=\"hljs-comment\"\u003e// ObjectId를 사용하여 트랜잭션 ID 생성\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e tran_id = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eObjectId\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e();\n\n      \u003cspan class=\"hljs-comment\"\u003e// SSLCommerz로 보낼 결제 데이터\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = {\n        \u003cspan class=\"hljs-attr\"\u003etotal_amount\u003c/span\u003e: price,\n        \u003cspan class=\"hljs-attr\"\u003ecurrency\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"BDT\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003etran_id\u003c/span\u003e: tran_id,\n        \u003cspan class=\"hljs-attr\"\u003esuccess_url\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${process.env.SERVER_API}\u003c/span\u003e/payment/success`\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003efail_url\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${process.env.SERVER_API}\u003c/span\u003e/payment/fail`\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecancel_url\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${process.env.SERVER_API}\u003c/span\u003e/payment/cancel`\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eipn_url\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${process.env.SERVER_API}\u003c/span\u003e/payment/ipn`\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eshipping_method\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Courier\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eproduct_name\u003c/span\u003e: planDetails.\u003cspan class=\"hljs-property\"\u003eplan\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eproduct_category\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Electronic\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eproduct_profile\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"general\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_name\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Customer Name\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_email\u003c/span\u003e: planDetails.\u003cspan class=\"hljs-property\"\u003euser_email\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_add1\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Dhaka\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_add2\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Dhaka\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_city\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Dhaka\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_state\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Dhaka\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_postcode\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"1000\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_country\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Bangladesh\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_phone\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"01711111111\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ecus_fax\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"01711111111\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eship_name\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Customer Name\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eship_add1\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Dhaka\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eship_add2\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Dhaka\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eship_city\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Dhaka\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eship_state\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Dhaka\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eship_postcode\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eship_country\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Bangladesh\"\u003c/span\u003e\n      };\n\n      \u003cspan class=\"hljs-comment\"\u003e// SSLCommerz 결제 초기화\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e sslcz = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSSLCommerzPayment\u003c/span\u003e(store_id, store_passwd, is_live);\n      sslcz.\u003cspan class=\"hljs-title function_\"\u003einit\u003c/span\u003e(data).\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eapiResponse\u003c/span\u003e) =\u003e\u003c/span\u003e {\n        \u003cspan class=\"hljs-comment\"\u003e// 결제 게이트웨이 URL 가져오기\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eGatewayPageURL\u003c/span\u003e = apiResponse.\u003cspan class=\"hljs-property\"\u003eGatewayPageURL\u003c/span\u003e;\n        res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eGatewayPageURL\u003c/span\u003e });\n\n        \u003cspan class=\"hljs-comment\"\u003e// 주문 세부 정보를 데이터베이스에 삽입\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e order = { ...planDetails, tran_id, \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'pending'\u003c/span\u003e};\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = ordersCollection.\u003cspan class=\"hljs-title function_\"\u003einsertOne\u003c/span\u003e(order);\n      });\n\n      \u003cspan class=\"hljs-comment\"\u003e// 성공한 결제 처리를 위한 POST 요청\u003c/span\u003e\n      app.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/payment/success\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n\n        \u003cspan class=\"hljs-comment\"\u003e// 데이터베이스에서 주문 상태를 성공으로 업데이트\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ordersCollection.\u003cspan class=\"hljs-title function_\"\u003eupdateOne\u003c/span\u003e(\n          { tran_id },\n          { \u003cspan class=\"hljs-attr\"\u003e$set\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'success'\u003c/span\u003e} }\n        );\n         \u003cspan class=\"hljs-comment\"\u003e// 클라이언트에 결제 성공 페이지로 리디렉션\u003c/span\u003e\n        res.\u003cspan class=\"hljs-title function_\"\u003eredirect\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"http://localhost:5173/payment/success\"\u003c/span\u003e);\n      });\n\n      \u003cspan class=\"hljs-comment\"\u003e// 실패한 결제 처리를 위한 POST 요청\u003c/span\u003e\n      app.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/payment/fail\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n\n        \u003cspan class=\"hljs-comment\"\u003e// 데이터베이스에서 주문 상태를 실패로 업데이트\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ordersCollection.\u003cspan class=\"hljs-title function_\"\u003eupdateOne\u003c/span\u003e(\n          { tran_id },\n          { \u003cspan class=\"hljs-attr\"\u003e$set\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'failed'\u003c/span\u003e} }\n        );\n       \u003cspan class=\"hljs-comment\"\u003e// 클라이언트에 결제 실패 페이지로 리디렉션\u003c/span\u003e\n        res.\u003cspan class=\"hljs-title function_\"\u003eredirect\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"http://localhost:5173/payment/fail\"\u003c/span\u003e);\n      });\n\n      \u003cspan class=\"hljs-comment\"\u003e// 취소된 결제 처리를 위한 POST 요청\u003c/span\u003e\n      app.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/payment/cancel\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n\n        \u003cspan class=\"hljs-comment\"\u003e// 데이터베이스에서 주문 상태를 취소됨으로 업데이트\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ordersCollection.\u003cspan class=\"hljs-title function_\"\u003eupdateOne\u003c/span\u003e(\n          { tran_id },\n          { \u003cspan class=\"hljs-attr\"\u003e$set\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'canceled'\u003c/span\u003e} }\n        );\n        \u003cspan class=\"hljs-comment\"\u003e// 클라이언트에 결제 취소 페이지로 리디렉션\u003c/span\u003e\n        res.\u003cspan class=\"hljs-title function_\"\u003eredirect\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"http://localhost:5173/payment/cancel\"\u003c/span\u003e);\n      });\n\n      \u003cspan class=\"hljs-comment\"\u003e// IPN(즉시 결제 알림) 처리를 위한 POST 요청\u003c/span\u003e\n      app.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/payment/ipn\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n\n        \u003cspan class=\"hljs-comment\"\u003e// IPN 알림에 따라 데이터베이스에서 주문 상태 업데이트\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e ordersCollection.\u003cspan class=\"hljs-title function_\"\u003eupdateOne\u003c/span\u003e(\n          { tran_id },\n          { \u003cspan class=\"hljs-attr\"\u003e$set\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: status === \u003cspan class=\"hljs-string\"\u003e\"VALID\"\u003c/span\u003e } }\n        );\n        res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"IPN received\"\u003c/span\u003e });\n      });\n    });\n  } \u003cspan class=\"hljs-keyword\"\u003efinally\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// 서버가 계속 실행되도록 보장\u003c/span\u003e\n  }\n};\n\n\u003cspan class=\"hljs-comment\"\u003e// 서버 실행\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003erun\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003ecatch\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edir\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 서버 실행 상태 확인을 위한 간단한 루트\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n  res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eserver_status\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Running\"\u003c/span\u003e });\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// Express 서버 시작\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003elisten\u003c/span\u003e(port, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`서버가 \u003cspan class=\"hljs-subst\"\u003e${port}\u003c/span\u003e 포트에서 실행 중입니다.`\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e프론트엔드에서 지불 프로세스를 트리거하기 위해 아래의 코드 스니펫을 사용할 수 있어요. 이 코드는 POST 요청을 /plans 엔드포인트로 보내고, 사용자를 SSLCommerz 지불 페이지로 리디렉션해요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandlePlans\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { data } = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e axios.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'/plans'\u003c/span\u003e, {\n    \u003cspan class=\"hljs-attr\"\u003euser_email\u003c/span\u003e: user.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eplan\u003c/span\u003e: plan,\n    \u003cspan class=\"hljs-attr\"\u003eprice\u003c/span\u003e: price,\n    \u003cspan class=\"hljs-attr\"\u003epurchase_date\u003c/span\u003e: purchaseDate,\n    \u003cspan class=\"hljs-attr\"\u003eexpiration_date\u003c/span\u003e: expirationDate,\n    \u003cspan class=\"hljs-attr\"\u003ecurrency\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'BDT'\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003epayment_method\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'SSLCOMMERZ'\u003c/span\u003e\n  });\n  \u003cspan class=\"hljs-comment\"\u003e// 서버로부터 받은 URL로 리디렉션하기\u003c/span\u003e\n  \u003cspan class=\"hljs-variable language_\"\u003ewindow\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elocation\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereplace\u003c/span\u003e(data.\u003cspan class=\"hljs-property\"\u003eurl\u003c/span\u003e);\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e설명\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003ehandlePlans 함수: 해당 함수는 필요한 플랜 세부 정보와 함께 /plans 엔드포인트로 POST 요청을 보냅니다.\u003c/li\u003e\n\u003cli\u003e리디렉션: 응답을 받은 후, 사용자는 window.location.replace를 사용하여 SSLCommerz 지불 페이지로 리디렉션됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003cp\u003e이 블로그 포스트에서 우리는 SSLCommerz 결제 게이트웨이를 Node.js 어플리케이션에 성공적으로 통합하고 데이터베이스 작업에 대해 직접 MongoDB를 사용했습니다. 이 통합을 통해 안전하게 결제를 처리하고 데이터베이스를 업데이트할 수 있습니다.\u003c/p\u003e\n\u003ch1\u003e주요 포인트\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eSSLCommerz 설정: SSLCommerz와 상점 ID 및 비밀번호를 획득하기 위해 상인 계정을 사용합니다.\u003c/li\u003e\n\u003cli\u003e환경 변수: 환경 변수에 자격 증명을 안전하게 저장합니다.\u003c/li\u003e\n\u003cli\u003eMongoDB 작업: 주문 추적 및 사용자 플랜 업데이트를 위해 데이터베이스 작업에 MongoDB를 사용합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이 단계를 따라하면 Node.js 애플리케이션에 견고하고 안전한 결제 처리 시스템을 설정할 수 있어요. 코딩을 즐기세요!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-20-IntegratingSSLCOMMERZPaymentGatewayinNodejs"},"buildId":"Rv-NbbtWUaja2joH5WkO_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>