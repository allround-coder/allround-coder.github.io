<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Django Rest FrameworkDFR를 사용하여 Mpesa STK 푸시 및 CallbackView 구현하기 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Django Rest FrameworkDFR를 사용하여 Mpesa STK 푸시 및 CallbackView 구현하기 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="Django Rest FrameworkDFR를 사용하여 Mpesa STK 푸시 및 CallbackView 구현하기 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR" data-gatsby-head="true"/><meta name="twitter:title" content="Django Rest FrameworkDFR를 사용하여 Mpesa STK 푸시 및 CallbackView 구현하기 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-19 23:36" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/Y-fCAg8BUV7y2HNFwX9AA/_buildManifest.js" defer=""></script><script src="/_next/static/Y-fCAg8BUV7y2HNFwX9AA/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Django Rest FrameworkDFR를 사용하여 Mpesa STK 푸시 및 CallbackView 구현하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Django Rest FrameworkDFR를 사용하여 Mpesa STK 푸시 및 CallbackView 구현하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 19, 2024</span><span class="posts_reading_time__f7YPP">3<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_0.png" alt="이미지"></p>
<p>Mpesa와 Safaricom은 네트워킹 분야에서 경쟁사들을 능가하는 뛰어난 위치에 있습니다. Mpesa의 주요 목표는 사용자들이 편리하게 거래할 방법을 마련하는 것이었습니다. 기술의 발전으로, 사용자들이 금전 거래를 수행해야 하는 많은 웹 및 모바일 애플리케이션 내에서 사용될 API를 만들 필요가 있었습니다.</p>
<p>MPESA STK PUSH</p>
<p>대부분의 사람들은 대부분 시간에 핸드폰을 가지고 있기 때문에 핸드폰으로 결제하는 것이 합리적일 것입니다. Mpesa 팀은 라이브 및 샌드박스 API를 소개했습니다. mpesa stk push를 사용하려면 액세스 토큰을 생성해야 합니다. 액세스 토큰은 응용 프로그램이 mpesa api를 사용할 수 있는 시간대를 제공하는 코드입니다. 액세스 토큰 생성을 구현하려면 Daraja 계정이 필요합니다. 그런 다음 홈 뷰의 내 애플리케이션 섹션으로 이동하여 앱을 만듭니다. 앱이 생성되면 다음이 생성됩니다:</p>
<div class="content-ad"></div>
<img src="/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_1.png">
<p>여기에 필요한 모든 세부 정보를 제공합니다. 각 앱은 특정 조직을 위해 구축되었기 때문에 거기에 나와 있는 일부 자격 증명은 실제로 필요하지 않을 수 있습니다.</p>
<p>이제 여러분의 views 파일에 액세스 생성 기능을 구현합니다. 참고로, 이 가이드는 여러분이 django와 그 구조를 충분히 숙지하고 있다고 가정합니다. 그러나 보안을 위해, 'pip install python-decouple'을 사용하여 python decouple을 설치하는 것을 강력히 권장합니다. 이는 매개변수를 재배포하지 않고 변경할 수 있도록 설정을 구성하는 데 도움이 됩니다. 다음은 django에서 해당 기능을 구현하는 방법입니다:</p>
<img src="/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_2.png">
<div class="content-ad"></div>
<p>실제로 사용자 키와 시크릿은 보안상의 이유로 소스에 노출되어서는 안 되지만 별도의 .env 파일에 넣어야 합니다. 이는 구성에서 사용자 키와 시크릿을 검색하여 콜론 구분자로 연결한 후 결과를 Base64로 인코딩하고 인코딩된 값으로 HTTP 인증 헤더를 구성합니다. 그런 다음 지정된 API URL로 Authorization 헤더 및 JSON Content-Type 헤더와 함께 GET 요청을 보냅니다. JSON 형식으로 예상되는 API 응답은 "access_token" 값을 추출하여 함수에서 반환됩니다. 액세스 토큰은 mpesa stk push 함수에서 사용될 것입니다.</p>
<p><img src="/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_3.png" alt="image"></p>
<p>알겠어요, 앞에서 언급한 대로 Safaricom에서 생성한 키는 기밀이며 소스 코드에 노출되어서는 안 됩니다. 함수에서 모든 거래에 타임 스탬프를 첨부하기 위해 날짜 형식이 필요하며 위에서 보여준 형식을 따라야 합니다. 그런 다음 위 함수로부터 받은 액세스 토큰을 사용합니다. 그런 다음 mpesa 비밀번호가 필요하며 이 비밀번호는 mpesa 숏코드, mpesa 패스키, 그리고 형식 지정된 날짜를 문자열로 변환하여 비밀번호를 인코딩하는 공식이 필요합니다. 그런 다음 수신한 데이터를 사용하는 페이로드를 구성하고 이 경우에는 전화번호와 금액입니다. 그런 다음 거래가 성공적인지 여부에 대한 JSON 응답을 받습니다.</p>
<p>MPESA CALLBACK VIEW</p>
<div class="content-ad"></div>
<p>mpesa stk 페이로드에서는 모든 stk 푸시 트랜잭션 결과가 전송되는 안전한 콜백URL을 포함해야 합니다. 이를 통해 트랜잭션을 추적할 수 있습니다.</p>
<p><img src="/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_4.png" alt="이미지"></p>
<p>동그라미가 그려진 선은 생성된 모델을 나타냅니다. 모든 거래, 실패한 것도 포함하여 mpesa에서 콜백 URL로 수신된 모든 거래가 거기에 저장됩니다. mpesa에서 수신한 본문은 daraja 웹사이트에서 찾을 수 있는 구조가 있는 딕셔너리입니다. 상태 코드가 200인 응답은 성공적으로 간주되어 SuccessfulResponses 모델에 저장됩니다. POST 메서드를 사용하여 콜백 URL이 데이터를 저장하는 기능에 액세스할 수 있으며, GET 메서드는 모델의 모든 트랜잭션을 볼 수 있는 용도로 사용됩니다. 이 경우 직렬화기를 사용하여 파이썬 객체를 JSON으로 변환합니다. 모든 변환 복잡성은 정의해야 하는 직렬화기에 의해 처리됩니다. 다음은 예시입니다:</p>
<p><img src="/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_5.png" alt="이미지"></p>
<div class="content-ad"></div>
<p>이 시리얼라이저는 데이터베이스의 AllResponses 모델의 모든 레코드를 변환합니다.</p>
<p>요약하자면, 이것은 stk push를 통한 mpesa 거래의 전체 흐름입니다. 데이터의 전체 흐름을 설명할 때 비 기술용어를 사용하지 않으려 노력했지만, 이는 기본적인 장고 패러다임을 전제로 한 것입니다.</p>
<p>즐겁게 코딩하세요.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Django Rest FrameworkDFR를 사용하여 Mpesa STK 푸시 및 CallbackView 구현하기","description":"","date":"2024-06-19 23:36","slug":"2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR","content":"\n\n![이미지](/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_0.png)\n\nMpesa와 Safaricom은 네트워킹 분야에서 경쟁사들을 능가하는 뛰어난 위치에 있습니다. Mpesa의 주요 목표는 사용자들이 편리하게 거래할 방법을 마련하는 것이었습니다. 기술의 발전으로, 사용자들이 금전 거래를 수행해야 하는 많은 웹 및 모바일 애플리케이션 내에서 사용될 API를 만들 필요가 있었습니다.\n\nMPESA STK PUSH\n\n대부분의 사람들은 대부분 시간에 핸드폰을 가지고 있기 때문에 핸드폰으로 결제하는 것이 합리적일 것입니다. Mpesa 팀은 라이브 및 샌드박스 API를 소개했습니다. mpesa stk push를 사용하려면 액세스 토큰을 생성해야 합니다. 액세스 토큰은 응용 프로그램이 mpesa api를 사용할 수 있는 시간대를 제공하는 코드입니다. 액세스 토큰 생성을 구현하려면 Daraja 계정이 필요합니다. 그런 다음 홈 뷰의 내 애플리케이션 섹션으로 이동하여 앱을 만듭니다. 앱이 생성되면 다음이 생성됩니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_1.png\" /\u003e\n\n여기에 필요한 모든 세부 정보를 제공합니다. 각 앱은 특정 조직을 위해 구축되었기 때문에 거기에 나와 있는 일부 자격 증명은 실제로 필요하지 않을 수 있습니다.\n\n이제 여러분의 views 파일에 액세스 생성 기능을 구현합니다. 참고로, 이 가이드는 여러분이 django와 그 구조를 충분히 숙지하고 있다고 가정합니다. 그러나 보안을 위해, 'pip install python-decouple'을 사용하여 python decouple을 설치하는 것을 강력히 권장합니다. 이는 매개변수를 재배포하지 않고 변경할 수 있도록 설정을 구성하는 데 도움이 됩니다. 다음은 django에서 해당 기능을 구현하는 방법입니다:\n\n\u003cimg src=\"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_2.png\" /\u003e\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n실제로 사용자 키와 시크릿은 보안상의 이유로 소스에 노출되어서는 안 되지만 별도의 .env 파일에 넣어야 합니다. 이는 구성에서 사용자 키와 시크릿을 검색하여 콜론 구분자로 연결한 후 결과를 Base64로 인코딩하고 인코딩된 값으로 HTTP 인증 헤더를 구성합니다. 그런 다음 지정된 API URL로 Authorization 헤더 및 JSON Content-Type 헤더와 함께 GET 요청을 보냅니다. JSON 형식으로 예상되는 API 응답은 \"access_token\" 값을 추출하여 함수에서 반환됩니다. 액세스 토큰은 mpesa stk push 함수에서 사용될 것입니다.\n\n![image](/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_3.png)\n\n알겠어요, 앞에서 언급한 대로 Safaricom에서 생성한 키는 기밀이며 소스 코드에 노출되어서는 안 됩니다. 함수에서 모든 거래에 타임 스탬프를 첨부하기 위해 날짜 형식이 필요하며 위에서 보여준 형식을 따라야 합니다. 그런 다음 위 함수로부터 받은 액세스 토큰을 사용합니다. 그런 다음 mpesa 비밀번호가 필요하며 이 비밀번호는 mpesa 숏코드, mpesa 패스키, 그리고 형식 지정된 날짜를 문자열로 변환하여 비밀번호를 인코딩하는 공식이 필요합니다. 그런 다음 수신한 데이터를 사용하는 페이로드를 구성하고 이 경우에는 전화번호와 금액입니다. 그런 다음 거래가 성공적인지 여부에 대한 JSON 응답을 받습니다.\n\nMPESA CALLBACK VIEW\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nmpesa stk 페이로드에서는 모든 stk 푸시 트랜잭션 결과가 전송되는 안전한 콜백URL을 포함해야 합니다. 이를 통해 트랜잭션을 추적할 수 있습니다.\n\n![이미지](/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_4.png)\n\n동그라미가 그려진 선은 생성된 모델을 나타냅니다. 모든 거래, 실패한 것도 포함하여 mpesa에서 콜백 URL로 수신된 모든 거래가 거기에 저장됩니다. mpesa에서 수신한 본문은 daraja 웹사이트에서 찾을 수 있는 구조가 있는 딕셔너리입니다. 상태 코드가 200인 응답은 성공적으로 간주되어 SuccessfulResponses 모델에 저장됩니다. POST 메서드를 사용하여 콜백 URL이 데이터를 저장하는 기능에 액세스할 수 있으며, GET 메서드는 모델의 모든 트랜잭션을 볼 수 있는 용도로 사용됩니다. 이 경우 직렬화기를 사용하여 파이썬 객체를 JSON으로 변환합니다. 모든 변환 복잡성은 정의해야 하는 직렬화기에 의해 처리됩니다. 다음은 예시입니다:\n\n![이미지](/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_5.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이 시리얼라이저는 데이터베이스의 AllResponses 모델의 모든 레코드를 변환합니다.\n\n요약하자면, 이것은 stk push를 통한 mpesa 거래의 전체 흐름입니다. 데이터의 전체 흐름을 설명할 때 비 기술용어를 사용하지 않으려 노력했지만, 이는 기본적인 장고 패러다임을 전제로 한 것입니다.\n\n즐겁게 코딩하세요.","ogImage":{"url":"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_0.png"},"coverImage":"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_0.png","tag":["Tech"],"readingTime":3},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003eMpesa와 Safaricom은 네트워킹 분야에서 경쟁사들을 능가하는 뛰어난 위치에 있습니다. Mpesa의 주요 목표는 사용자들이 편리하게 거래할 방법을 마련하는 것이었습니다. 기술의 발전으로, 사용자들이 금전 거래를 수행해야 하는 많은 웹 및 모바일 애플리케이션 내에서 사용될 API를 만들 필요가 있었습니다.\u003c/p\u003e\n\u003cp\u003eMPESA STK PUSH\u003c/p\u003e\n\u003cp\u003e대부분의 사람들은 대부분 시간에 핸드폰을 가지고 있기 때문에 핸드폰으로 결제하는 것이 합리적일 것입니다. Mpesa 팀은 라이브 및 샌드박스 API를 소개했습니다. mpesa stk push를 사용하려면 액세스 토큰을 생성해야 합니다. 액세스 토큰은 응용 프로그램이 mpesa api를 사용할 수 있는 시간대를 제공하는 코드입니다. 액세스 토큰 생성을 구현하려면 Daraja 계정이 필요합니다. 그런 다음 홈 뷰의 내 애플리케이션 섹션으로 이동하여 앱을 만듭니다. 앱이 생성되면 다음이 생성됩니다:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_1.png\"\u003e\n\u003cp\u003e여기에 필요한 모든 세부 정보를 제공합니다. 각 앱은 특정 조직을 위해 구축되었기 때문에 거기에 나와 있는 일부 자격 증명은 실제로 필요하지 않을 수 있습니다.\u003c/p\u003e\n\u003cp\u003e이제 여러분의 views 파일에 액세스 생성 기능을 구현합니다. 참고로, 이 가이드는 여러분이 django와 그 구조를 충분히 숙지하고 있다고 가정합니다. 그러나 보안을 위해, 'pip install python-decouple'을 사용하여 python decouple을 설치하는 것을 강력히 권장합니다. 이는 매개변수를 재배포하지 않고 변경할 수 있도록 설정을 구성하는 데 도움이 됩니다. 다음은 django에서 해당 기능을 구현하는 방법입니다:\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_2.png\"\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e실제로 사용자 키와 시크릿은 보안상의 이유로 소스에 노출되어서는 안 되지만 별도의 .env 파일에 넣어야 합니다. 이는 구성에서 사용자 키와 시크릿을 검색하여 콜론 구분자로 연결한 후 결과를 Base64로 인코딩하고 인코딩된 값으로 HTTP 인증 헤더를 구성합니다. 그런 다음 지정된 API URL로 Authorization 헤더 및 JSON Content-Type 헤더와 함께 GET 요청을 보냅니다. JSON 형식으로 예상되는 API 응답은 \"access_token\" 값을 추출하여 함수에서 반환됩니다. 액세스 토큰은 mpesa stk push 함수에서 사용될 것입니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_3.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003e알겠어요, 앞에서 언급한 대로 Safaricom에서 생성한 키는 기밀이며 소스 코드에 노출되어서는 안 됩니다. 함수에서 모든 거래에 타임 스탬프를 첨부하기 위해 날짜 형식이 필요하며 위에서 보여준 형식을 따라야 합니다. 그런 다음 위 함수로부터 받은 액세스 토큰을 사용합니다. 그런 다음 mpesa 비밀번호가 필요하며 이 비밀번호는 mpesa 숏코드, mpesa 패스키, 그리고 형식 지정된 날짜를 문자열로 변환하여 비밀번호를 인코딩하는 공식이 필요합니다. 그런 다음 수신한 데이터를 사용하는 페이로드를 구성하고 이 경우에는 전화번호와 금액입니다. 그런 다음 거래가 성공적인지 여부에 대한 JSON 응답을 받습니다.\u003c/p\u003e\n\u003cp\u003eMPESA CALLBACK VIEW\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003empesa stk 페이로드에서는 모든 stk 푸시 트랜잭션 결과가 전송되는 안전한 콜백URL을 포함해야 합니다. 이를 통해 트랜잭션을 추적할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_4.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e동그라미가 그려진 선은 생성된 모델을 나타냅니다. 모든 거래, 실패한 것도 포함하여 mpesa에서 콜백 URL로 수신된 모든 거래가 거기에 저장됩니다. mpesa에서 수신한 본문은 daraja 웹사이트에서 찾을 수 있는 구조가 있는 딕셔너리입니다. 상태 코드가 200인 응답은 성공적으로 간주되어 SuccessfulResponses 모델에 저장됩니다. POST 메서드를 사용하여 콜백 URL이 데이터를 저장하는 기능에 액세스할 수 있으며, GET 메서드는 모델의 모든 트랜잭션을 볼 수 있는 용도로 사용됩니다. 이 경우 직렬화기를 사용하여 파이썬 객체를 JSON으로 변환합니다. 모든 변환 복잡성은 정의해야 하는 직렬화기에 의해 처리됩니다. 다음은 예시입니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR_5.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이 시리얼라이저는 데이터베이스의 AllResponses 모델의 모든 레코드를 변환합니다.\u003c/p\u003e\n\u003cp\u003e요약하자면, 이것은 stk push를 통한 mpesa 거래의 전체 흐름입니다. 데이터의 전체 흐름을 설명할 때 비 기술용어를 사용하지 않으려 노력했지만, 이는 기본적인 장고 패러다임을 전제로 한 것입니다.\u003c/p\u003e\n\u003cp\u003e즐겁게 코딩하세요.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-19-ImplementingMpesaSTKpushandCallbackViewusingDjangoRestFrameworkDFR"},"buildId":"Y-fCAg8BUV7y2HNFwX9AA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>