<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Flutter에서 복잡한 HTML 처리하는 방법 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-06-22-HandlingcomplexHTMLinFlutter" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Flutter에서 복잡한 HTML 처리하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="Flutter에서 복잡한 HTML 처리하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-HandlingcomplexHTMLinFlutter_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-06-22-HandlingcomplexHTMLinFlutter" data-gatsby-head="true"/><meta name="twitter:title" content="Flutter에서 복잡한 HTML 처리하는 방법 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-HandlingcomplexHTMLinFlutter_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 15:30" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/aCCUs-qPrLLLWRnkN0AOd/_buildManifest.js" defer=""></script><script src="/_next/static/aCCUs-qPrLLLWRnkN0AOd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Flutter에서 복잡한 HTML 처리하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Flutter에서 복잡한 HTML 처리하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">5<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-HandlingcomplexHTMLinFlutter&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h2>플러터에서 중첩된 테이블 뷰 표시</h2>
<img src="/assets/img/2024-06-22-HandlingcomplexHTMLinFlutter_0.png">
<p>저는 비즈니스가 모든 메일, SMS, 소셜 미디어 플랫폼을 한 앱에서 연결하고 고객 커뮤니케이션을 관리하는 통합 메시징 수신함 애플리케이션인 Helpwise 애플리케이션을 개발 중입니다.</p>
<p>앱의 기능 중 하나는 Gmail 수신함을 연결하여 모든 이메일을 같은 앱에서 받는 것입니다. Helpwise는 지금까지 모든 이메일 스레드를 표시하기 위해 웹 뷰를 사용해 왔기 때문에 지금까지 어떤 문제도 발생하지 않았습니다.</p>
<div class="content-ad"></div>
<p>웹뷰를 네이티브 플러터 코드로 이동하기로 결정했어요, 즉 앱 자체에서 이메일 데이터를 처리하기로 했어요. 내 지식으로는 HTML 데이터를 쉽게 처리하고 flutter_html 패키지를 사용해 HTML을 렌더링할 수 있다고 생각했어요.</p>
<p>간단해 보이죠? 어떤 문제가 발생할 수 있을까요? 😂</p>
<p>하지만 그렇게 간단하지 않아요. 코드를 구현한 후 대부분의 이메일이 잘 보이지만 뉴스레터, 서명 및 테이블이 전혀 나타나지 않았어요.</p>
<p>전 정말 깜짝 놀랐어요. 웹에 대한 지식이 전혀 없어 어떻게 이를 해결할 수 있을까요?</p>
<div class="content-ad"></div>
<p>저는 전체 웹을 검색해보니 해당 패키지가 복잡한 테이블을 제대로 처리하지 못하는 것을 발견했고, HTML을 렌더링하기 위해 패키지가 TABLE_SECTION을 표시하여 해당 영역을 표시한다는 것을 알았어요.</p>
<p>이 버그는 2021년 3월에 열렸으며 아직 해결되지 않았습니다.</p>
<img src="https://miro.medium.com/v2/resize:fit:888/1*rCkV8LeAQf6Wiizx0ljAsQ.gif">
<p>도와주실 수 있나요? 지금 제가 할 수 있는 일이 무엇인가요?</p>
<div class="content-ad"></div>
<h2>해결책 1</h2>
<p>첫 번째 해결책은 html_editor_enhanced를 사용하는 것이었습니다. 이는 텍스트 편집기로 HTML 코드를 삽입하여 편집기를 뷰 전용 위젯으로 사용하는 방법입니다.</p>
<p>해결책을 시도해보았지만 왜 작동하지 않았을까요?</p>
<p>편집기가 비활성화되어 있더라도 특정한 높이를 지정해주어야 합니다. 필요한 높이를 주면 이메일의 보기 영역이 제한됩니다.</p>
<div class="content-ad"></div>
<p>당신이 없슴을 알겠는데, 함께 수정하면 된다고 생각해요! 😊 계속해서 함께 문제를 해결해 나가보자구요! 🚀</p>
<div class="content-ad"></div>
<img src="https://miro.medium.com/v2/resize:fit:996/1*mEstF6mH4U8BXs7z40YxhA.gif">
<p>저는 선배와 문제를 논의하면서, 합의할 수 있는 해결책을 찾으려고 노력했어요. 그때 갑자기 그가 제안한 것이라구요</p>
<p>이게 뭐야? HTML을 Webview에서 렌더링할 수 있을 줄 몰랐어? Webview를 표시하려면 URL이 필요한 것 아니었어?</p>
<p>지금 알게 된 건가봐요 😅</p>
<div class="content-ad"></div>
<h2>실제 해결책</h2>
<p>그래서 우리가 어떻게 구현했는지 봅시다,</p>
<p>우리는 flutter_inappwebview 패키지를 사용했어요</p>
<p>HTML을 렌더링하고 완벽하게 작동했어요.</p>
<div class="content-ad"></div>
<p>모두 읽어주셔서 감사합니다......😍😍</p>
<p>아직 읽고 계신다면 쉽지 않군요 😅</p>
<p><img src="https://miro.medium.com/v2/resize:fit:996/1*IEsaQG2ZpzqelL3T1bUVQg.gif" alt="image"></p>
<p>HTML을 표시하는 것은 가능했지만 특정 높이를 증명해야 했습니다. 즉, 사용자는 전체 내용을 보려면 이메일 내에서 스크롤해야 하는데, 심지어 리스트뷰 빌더 내에서도 그렇습니다.</p>
<div class="content-ad"></div>
<h2>이제 웹뷰 높이를 동적으로 조절해야 할까요?</h2>
<p>수 시간 동안 검색한 끝에 웹뷰의 높이를 얻기 위해 특정 HTML 코드를 추가하는 StackOverflow 쓰레드를 찾았어요.</p>
<p>하지만 문제는 이 해결책을 적용한 후에, 일부의 경우 높이가 0으로 표시되고 오류도 표시되지 않았어요. 초기 높이를 설정하면 이메일을 볼 수 있지만요.</p>
<p>지금은 HTML 코드가 문제인 것 같아요. 우리는 플러터에 친숙하니까요.</p>
<div class="content-ad"></div>
<h2>단계 2 — 높이 일관되게 가져오기</h2>
<p>웹뷰 높이를 인쇄할 수 있는지 확인할 때 콘솔 로그를 추가하여 높이를 출력했는데, 놀랍게도 매번 올바른 높이를 얻었습니다.</p>
<p>그러자 왜 그냥 로그를 가져와서 두 배로 변환하고 사용하지 않을까 생각했죠. 간단하죠?</p>
<p>결국 그랬더니 딱 맞았습니다 😅</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-title class_">AnimatedContainer</span>(
  <span class="hljs-attr">duration</span>: <span class="hljs-title class_">Duration</span>(<span class="hljs-attr">milliseconds</span>: <span class="hljs-number">500</span>),
  <span class="hljs-attr">height</span>: height + (height == <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">50</span>),
  <span class="hljs-attr">child</span>: <span class="hljs-title class_">InAppWebView</span>(
    <span class="hljs-attr">initialData</span>: <span class="hljs-title class_">InAppWebViewInitialData</span>(<span class="hljs-attr">data</span>: html),
    <span class="hljs-attr">initialOptions</span>: <span class="hljs-title class_">InAppWebViewGroupOptions</span>(
      <span class="hljs-attr">crossPlatform</span>: <span class="hljs-title class_">InAppWebViewOptions</span>(
        <span class="hljs-attr">supportZoom</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">javaScriptEnabled</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">disableHorizontalScroll</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">disableVerticalScroll</span>: <span class="hljs-literal">true</span>,
      ),
    ),
    <span class="hljs-attr">onLoadError</span>: <span class="hljs-function">(<span class="hljs-params">controller, url, code, message</span>) =></span>
        <span class="hljs-title function_">print</span>(<span class="hljs-string">"onLoadError: $url, $code, $message"</span>),
    <span class="hljs-attr">onLoadHttpError</span>:
        <span class="hljs-function">(<span class="hljs-params">controller, url, statusCode, description</span>) =></span> <span class="hljs-title function_">print</span>(
            <span class="hljs-string">"onLoadHttpError: $url, $statusCode, $description"</span>),
    <span class="hljs-attr">onConsoleMessage</span>: (controller, consoleMessage) {
      <span class="hljs-title function_">print</span>(<span class="hljs-string">'height: ${height}'</span>);
      height = double.<span class="hljs-title function_">parse</span>(consoleMessage.<span class="hljs-property">message</span>);
      <span class="hljs-title function_">setState</span>(() {});
    },
  ),
);
</code></pre>
<pre><code class="hljs language-js">html = <span class="hljs-string">""</span><span class="hljs-string">"
&#x3C;html lang="</span>en<span class="hljs-string">">
  &#x3C;meta name="</span>viewport<span class="hljs-string">" content="</span>width=device-width user-scalable=no zoom=<span class="hljs-number">1.1</span><span class="hljs-string">">
  &#x3C;style>img {max-width: 100%; height: auto}&#x3C;/style>
  &#x3C;body>
    &#x3C;div>&#x3C;div class="</span>htmlWrapper container<span class="hljs-string">" id="</span>_flutter_target_do_not_delete<span class="hljs-string">">$html&#x3C;/div>&#x3C;/div>
    &#x3C;script>
      function outputsize() {
        console.log(document.getElementById("</span>_flutter_target_do_not_delete<span class="hljs-string">").offsetHeight);
        window.postMessage('flutterTargetHeight', document.getElementById("</span>_flutter_target_do_not_delete<span class="hljs-string">").offsetHeight);
      }
      new ResizeObserver(outputsize).observe(_flutter_target_do_not_delete)
      outputsize()
    &#x3C;/script>
&#x3C;/html>
"</span><span class="hljs-string">""</span>;
</code></pre>
<p>이렇게하여 HTML이 로드될 때마다 올바른 높이를 얻고 부드러운 애니메이션을 함께 사용할 수 있었습니다.</p>
<p>만세!!! 성공했습니다…….</p>
<div class="content-ad"></div>
<p>위 글 읽어주셔서 감사합니다 ❤️</p>
<p>제 Udemy 과정인 "2023년 Appwrite with Flutter 초급 과정"이 오픈되었습니다. 아래 링크를 통해 강좌를 확인하세요!</p>
<p><a href="https://www.udemy.com/course/appwrite-with-flutter-beginner-course-2023/" rel="nofollow" target="_blank">Appwrite with Flutter 초급 과정 2023</a></p>
<p>감사합니다!</p>
<div class="content-ad"></div>
<p>마크다운 형식으로 표 태그를 변경하세요.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Flutter에서 복잡한 HTML 처리하는 방법","description":"","date":"2024-06-22 15:30","slug":"2024-06-22-HandlingcomplexHTMLinFlutter","content":"\n## 플러터에서 중첩된 테이블 뷰 표시\n\n\u003cimg src=\"/assets/img/2024-06-22-HandlingcomplexHTMLinFlutter_0.png\" /\u003e\n\n저는 비즈니스가 모든 메일, SMS, 소셜 미디어 플랫폼을 한 앱에서 연결하고 고객 커뮤니케이션을 관리하는 통합 메시징 수신함 애플리케이션인 Helpwise 애플리케이션을 개발 중입니다.\n\n앱의 기능 중 하나는 Gmail 수신함을 연결하여 모든 이메일을 같은 앱에서 받는 것입니다. Helpwise는 지금까지 모든 이메일 스레드를 표시하기 위해 웹 뷰를 사용해 왔기 때문에 지금까지 어떤 문제도 발생하지 않았습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n웹뷰를 네이티브 플러터 코드로 이동하기로 결정했어요, 즉 앱 자체에서 이메일 데이터를 처리하기로 했어요. 내 지식으로는 HTML 데이터를 쉽게 처리하고 flutter_html 패키지를 사용해 HTML을 렌더링할 수 있다고 생각했어요.\n\n간단해 보이죠? 어떤 문제가 발생할 수 있을까요? 😂\n\n하지만 그렇게 간단하지 않아요. 코드를 구현한 후 대부분의 이메일이 잘 보이지만 뉴스레터, 서명 및 테이블이 전혀 나타나지 않았어요.\n\n전 정말 깜짝 놀랐어요. 웹에 대한 지식이 전혀 없어 어떻게 이를 해결할 수 있을까요?\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n저는 전체 웹을 검색해보니 해당 패키지가 복잡한 테이블을 제대로 처리하지 못하는 것을 발견했고, HTML을 렌더링하기 위해 패키지가 TABLE_SECTION을 표시하여 해당 영역을 표시한다는 것을 알았어요.\n\n이 버그는 2021년 3월에 열렸으며 아직 해결되지 않았습니다.\n\n\u003cimg src=\"https://miro.medium.com/v2/resize:fit:888/1*rCkV8LeAQf6Wiizx0ljAsQ.gif\" /\u003e\n\n도와주실 수 있나요? 지금 제가 할 수 있는 일이 무엇인가요?\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 해결책 1\n\n첫 번째 해결책은 html_editor_enhanced를 사용하는 것이었습니다. 이는 텍스트 편집기로 HTML 코드를 삽입하여 편집기를 뷰 전용 위젯으로 사용하는 방법입니다.\n\n해결책을 시도해보았지만 왜 작동하지 않았을까요?\n\n편집기가 비활성화되어 있더라도 특정한 높이를 지정해주어야 합니다. 필요한 높이를 주면 이메일의 보기 영역이 제한됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n당신이 없슴을 알겠는데, 함께 수정하면 된다고 생각해요! 😊 계속해서 함께 문제를 해결해 나가보자구요! 🚀\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"https://miro.medium.com/v2/resize:fit:996/1*mEstF6mH4U8BXs7z40YxhA.gif\" /\u003e\n\n저는 선배와 문제를 논의하면서, 합의할 수 있는 해결책을 찾으려고 노력했어요. 그때 갑자기 그가 제안한 것이라구요\n\n이게 뭐야? HTML을 Webview에서 렌더링할 수 있을 줄 몰랐어? Webview를 표시하려면 URL이 필요한 것 아니었어?\n\n지금 알게 된 건가봐요 😅\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 실제 해결책\n\n그래서 우리가 어떻게 구현했는지 봅시다,\n\n우리는 flutter_inappwebview 패키지를 사용했어요\n\nHTML을 렌더링하고 완벽하게 작동했어요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n모두 읽어주셔서 감사합니다......😍😍\n\n아직 읽고 계신다면 쉽지 않군요 😅\n\n![image](https://miro.medium.com/v2/resize:fit:996/1*IEsaQG2ZpzqelL3T1bUVQg.gif)\n\nHTML을 표시하는 것은 가능했지만 특정 높이를 증명해야 했습니다. 즉, 사용자는 전체 내용을 보려면 이메일 내에서 스크롤해야 하는데, 심지어 리스트뷰 빌더 내에서도 그렇습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 이제 웹뷰 높이를 동적으로 조절해야 할까요?\n\n수 시간 동안 검색한 끝에 웹뷰의 높이를 얻기 위해 특정 HTML 코드를 추가하는 StackOverflow 쓰레드를 찾았어요.\n\n하지만 문제는 이 해결책을 적용한 후에, 일부의 경우 높이가 0으로 표시되고 오류도 표시되지 않았어요. 초기 높이를 설정하면 이메일을 볼 수 있지만요.\n\n지금은 HTML 코드가 문제인 것 같아요. 우리는 플러터에 친숙하니까요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 단계 2 — 높이 일관되게 가져오기\n\n웹뷰 높이를 인쇄할 수 있는지 확인할 때 콘솔 로그를 추가하여 높이를 출력했는데, 놀랍게도 매번 올바른 높이를 얻었습니다.\n\n그러자 왜 그냥 로그를 가져와서 두 배로 변환하고 사용하지 않을까 생각했죠. 간단하죠?\n\n결국 그랬더니 딱 맞았습니다 😅\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nAnimatedContainer(\n  duration: Duration(milliseconds: 500),\n  height: height + (height == 0 ? 0 : 50),\n  child: InAppWebView(\n    initialData: InAppWebViewInitialData(data: html),\n    initialOptions: InAppWebViewGroupOptions(\n      crossPlatform: InAppWebViewOptions(\n        supportZoom: false,\n        javaScriptEnabled: true,\n        disableHorizontalScroll: false,\n        disableVerticalScroll: true,\n      ),\n    ),\n    onLoadError: (controller, url, code, message) =\u003e\n        print(\"onLoadError: $url, $code, $message\"),\n    onLoadHttpError:\n        (controller, url, statusCode, description) =\u003e print(\n            \"onLoadHttpError: $url, $statusCode, $description\"),\n    onConsoleMessage: (controller, consoleMessage) {\n      print('height: ${height}');\n      height = double.parse(consoleMessage.message);\n      setState(() {});\n    },\n  ),\n);\n```\n\n```js\nhtml = \"\"\"\n\u003chtml lang=\"en\"\u003e\n  \u003cmeta name=\"viewport\" content=\"width=device-width user-scalable=no zoom=1.1\"\u003e\n  \u003cstyle\u003eimg {max-width: 100%; height: auto}\u003c/style\u003e\n  \u003cbody\u003e\n    \u003cdiv\u003e\u003cdiv class=\"htmlWrapper container\" id=\"_flutter_target_do_not_delete\"\u003e$html\u003c/div\u003e\u003c/div\u003e\n    \u003cscript\u003e\n      function outputsize() {\n        console.log(document.getElementById(\"_flutter_target_do_not_delete\").offsetHeight);\n        window.postMessage('flutterTargetHeight', document.getElementById(\"_flutter_target_do_not_delete\").offsetHeight);\n      }\n      new ResizeObserver(outputsize).observe(_flutter_target_do_not_delete)\n      outputsize()\n    \u003c/script\u003e\n\u003c/html\u003e\n\"\"\";\n```\n\n이렇게하여 HTML이 로드될 때마다 올바른 높이를 얻고 부드러운 애니메이션을 함께 사용할 수 있었습니다.\n\n만세!!! 성공했습니다…….\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n위 글 읽어주셔서 감사합니다 ❤️\n\n제 Udemy 과정인 \"2023년 Appwrite with Flutter 초급 과정\"이 오픈되었습니다. 아래 링크를 통해 강좌를 확인하세요!\n\n[Appwrite with Flutter 초급 과정 2023](https://www.udemy.com/course/appwrite-with-flutter-beginner-course-2023/)\n\n감사합니다!\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n마크다운 형식으로 표 태그를 변경하세요.\n","ogImage":{"url":"/assets/img/2024-06-22-HandlingcomplexHTMLinFlutter_0.png"},"coverImage":"/assets/img/2024-06-22-HandlingcomplexHTMLinFlutter_0.png","tag":["Tech"],"readingTime":5},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch2\u003e플러터에서 중첩된 테이블 뷰 표시\u003c/h2\u003e\n\u003cimg src=\"/assets/img/2024-06-22-HandlingcomplexHTMLinFlutter_0.png\"\u003e\n\u003cp\u003e저는 비즈니스가 모든 메일, SMS, 소셜 미디어 플랫폼을 한 앱에서 연결하고 고객 커뮤니케이션을 관리하는 통합 메시징 수신함 애플리케이션인 Helpwise 애플리케이션을 개발 중입니다.\u003c/p\u003e\n\u003cp\u003e앱의 기능 중 하나는 Gmail 수신함을 연결하여 모든 이메일을 같은 앱에서 받는 것입니다. Helpwise는 지금까지 모든 이메일 스레드를 표시하기 위해 웹 뷰를 사용해 왔기 때문에 지금까지 어떤 문제도 발생하지 않았습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e웹뷰를 네이티브 플러터 코드로 이동하기로 결정했어요, 즉 앱 자체에서 이메일 데이터를 처리하기로 했어요. 내 지식으로는 HTML 데이터를 쉽게 처리하고 flutter_html 패키지를 사용해 HTML을 렌더링할 수 있다고 생각했어요.\u003c/p\u003e\n\u003cp\u003e간단해 보이죠? 어떤 문제가 발생할 수 있을까요? 😂\u003c/p\u003e\n\u003cp\u003e하지만 그렇게 간단하지 않아요. 코드를 구현한 후 대부분의 이메일이 잘 보이지만 뉴스레터, 서명 및 테이블이 전혀 나타나지 않았어요.\u003c/p\u003e\n\u003cp\u003e전 정말 깜짝 놀랐어요. 웹에 대한 지식이 전혀 없어 어떻게 이를 해결할 수 있을까요?\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e저는 전체 웹을 검색해보니 해당 패키지가 복잡한 테이블을 제대로 처리하지 못하는 것을 발견했고, HTML을 렌더링하기 위해 패키지가 TABLE_SECTION을 표시하여 해당 영역을 표시한다는 것을 알았어요.\u003c/p\u003e\n\u003cp\u003e이 버그는 2021년 3월에 열렸으며 아직 해결되지 않았습니다.\u003c/p\u003e\n\u003cimg src=\"https://miro.medium.com/v2/resize:fit:888/1*rCkV8LeAQf6Wiizx0ljAsQ.gif\"\u003e\n\u003cp\u003e도와주실 수 있나요? 지금 제가 할 수 있는 일이 무엇인가요?\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e해결책 1\u003c/h2\u003e\n\u003cp\u003e첫 번째 해결책은 html_editor_enhanced를 사용하는 것이었습니다. 이는 텍스트 편집기로 HTML 코드를 삽입하여 편집기를 뷰 전용 위젯으로 사용하는 방법입니다.\u003c/p\u003e\n\u003cp\u003e해결책을 시도해보았지만 왜 작동하지 않았을까요?\u003c/p\u003e\n\u003cp\u003e편집기가 비활성화되어 있더라도 특정한 높이를 지정해주어야 합니다. 필요한 높이를 주면 이메일의 보기 영역이 제한됩니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e당신이 없슴을 알겠는데, 함께 수정하면 된다고 생각해요! 😊 계속해서 함께 문제를 해결해 나가보자구요! 🚀\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"https://miro.medium.com/v2/resize:fit:996/1*mEstF6mH4U8BXs7z40YxhA.gif\"\u003e\n\u003cp\u003e저는 선배와 문제를 논의하면서, 합의할 수 있는 해결책을 찾으려고 노력했어요. 그때 갑자기 그가 제안한 것이라구요\u003c/p\u003e\n\u003cp\u003e이게 뭐야? HTML을 Webview에서 렌더링할 수 있을 줄 몰랐어? Webview를 표시하려면 URL이 필요한 것 아니었어?\u003c/p\u003e\n\u003cp\u003e지금 알게 된 건가봐요 😅\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e실제 해결책\u003c/h2\u003e\n\u003cp\u003e그래서 우리가 어떻게 구현했는지 봅시다,\u003c/p\u003e\n\u003cp\u003e우리는 flutter_inappwebview 패키지를 사용했어요\u003c/p\u003e\n\u003cp\u003eHTML을 렌더링하고 완벽하게 작동했어요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e모두 읽어주셔서 감사합니다......😍😍\u003c/p\u003e\n\u003cp\u003e아직 읽고 계신다면 쉽지 않군요 😅\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://miro.medium.com/v2/resize:fit:996/1*IEsaQG2ZpzqelL3T1bUVQg.gif\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003eHTML을 표시하는 것은 가능했지만 특정 높이를 증명해야 했습니다. 즉, 사용자는 전체 내용을 보려면 이메일 내에서 스크롤해야 하는데, 심지어 리스트뷰 빌더 내에서도 그렇습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e이제 웹뷰 높이를 동적으로 조절해야 할까요?\u003c/h2\u003e\n\u003cp\u003e수 시간 동안 검색한 끝에 웹뷰의 높이를 얻기 위해 특정 HTML 코드를 추가하는 StackOverflow 쓰레드를 찾았어요.\u003c/p\u003e\n\u003cp\u003e하지만 문제는 이 해결책을 적용한 후에, 일부의 경우 높이가 0으로 표시되고 오류도 표시되지 않았어요. 초기 높이를 설정하면 이메일을 볼 수 있지만요.\u003c/p\u003e\n\u003cp\u003e지금은 HTML 코드가 문제인 것 같아요. 우리는 플러터에 친숙하니까요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e단계 2 — 높이 일관되게 가져오기\u003c/h2\u003e\n\u003cp\u003e웹뷰 높이를 인쇄할 수 있는지 확인할 때 콘솔 로그를 추가하여 높이를 출력했는데, 놀랍게도 매번 올바른 높이를 얻었습니다.\u003c/p\u003e\n\u003cp\u003e그러자 왜 그냥 로그를 가져와서 두 배로 변환하고 사용하지 않을까 생각했죠. 간단하죠?\u003c/p\u003e\n\u003cp\u003e결국 그랬더니 딱 맞았습니다 😅\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title class_\"\u003eAnimatedContainer\u003c/span\u003e(\n  \u003cspan class=\"hljs-attr\"\u003eduration\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDuration\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003emilliseconds\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e),\n  \u003cspan class=\"hljs-attr\"\u003eheight\u003c/span\u003e: height + (height == \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e ? \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e : \u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e),\n  \u003cspan class=\"hljs-attr\"\u003echild\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eInAppWebView\u003c/span\u003e(\n    \u003cspan class=\"hljs-attr\"\u003einitialData\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eInAppWebViewInitialData\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: html),\n    \u003cspan class=\"hljs-attr\"\u003einitialOptions\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eInAppWebViewGroupOptions\u003c/span\u003e(\n      \u003cspan class=\"hljs-attr\"\u003ecrossPlatform\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eInAppWebViewOptions\u003c/span\u003e(\n        \u003cspan class=\"hljs-attr\"\u003esupportZoom\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ejavaScriptEnabled\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003edisableHorizontalScroll\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003edisableVerticalScroll\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n      ),\n    ),\n    \u003cspan class=\"hljs-attr\"\u003eonLoadError\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003econtroller, url, code, message\u003c/span\u003e) =\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"onLoadError: $url, $code, $message\"\u003c/span\u003e),\n    \u003cspan class=\"hljs-attr\"\u003eonLoadHttpError\u003c/span\u003e:\n        \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003econtroller, url, statusCode, description\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\n            \u003cspan class=\"hljs-string\"\u003e\"onLoadHttpError: $url, $statusCode, $description\"\u003c/span\u003e),\n    \u003cspan class=\"hljs-attr\"\u003eonConsoleMessage\u003c/span\u003e: (controller, consoleMessage) {\n      \u003cspan class=\"hljs-title function_\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'height: ${height}'\u003c/span\u003e);\n      height = double.\u003cspan class=\"hljs-title function_\"\u003eparse\u003c/span\u003e(consoleMessage.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e);\n      \u003cspan class=\"hljs-title function_\"\u003esetState\u003c/span\u003e(() {});\n    },\n  ),\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ehtml = \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\n\u0026#x3C;html lang=\"\u003c/span\u003een\u003cspan class=\"hljs-string\"\u003e\"\u003e\n  \u0026#x3C;meta name=\"\u003c/span\u003eviewport\u003cspan class=\"hljs-string\"\u003e\" content=\"\u003c/span\u003ewidth=device-width user-scalable=no zoom=\u003cspan class=\"hljs-number\"\u003e1.1\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\u003e\n  \u0026#x3C;style\u003eimg {max-width: 100%; height: auto}\u0026#x3C;/style\u003e\n  \u0026#x3C;body\u003e\n    \u0026#x3C;div\u003e\u0026#x3C;div class=\"\u003c/span\u003ehtmlWrapper container\u003cspan class=\"hljs-string\"\u003e\" id=\"\u003c/span\u003e_flutter_target_do_not_delete\u003cspan class=\"hljs-string\"\u003e\"\u003e$html\u0026#x3C;/div\u003e\u0026#x3C;/div\u003e\n    \u0026#x3C;script\u003e\n      function outputsize() {\n        console.log(document.getElementById(\"\u003c/span\u003e_flutter_target_do_not_delete\u003cspan class=\"hljs-string\"\u003e\").offsetHeight);\n        window.postMessage('flutterTargetHeight', document.getElementById(\"\u003c/span\u003e_flutter_target_do_not_delete\u003cspan class=\"hljs-string\"\u003e\").offsetHeight);\n      }\n      new ResizeObserver(outputsize).observe(_flutter_target_do_not_delete)\n      outputsize()\n    \u0026#x3C;/script\u003e\n\u0026#x3C;/html\u003e\n\"\u003c/span\u003e\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이렇게하여 HTML이 로드될 때마다 올바른 높이를 얻고 부드러운 애니메이션을 함께 사용할 수 있었습니다.\u003c/p\u003e\n\u003cp\u003e만세!!! 성공했습니다…….\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e위 글 읽어주셔서 감사합니다 ❤️\u003c/p\u003e\n\u003cp\u003e제 Udemy 과정인 \"2023년 Appwrite with Flutter 초급 과정\"이 오픈되었습니다. 아래 링크를 통해 강좌를 확인하세요!\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.udemy.com/course/appwrite-with-flutter-beginner-course-2023/\" rel=\"nofollow\" target=\"_blank\"\u003eAppwrite with Flutter 초급 과정 2023\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e감사합니다!\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e마크다운 형식으로 표 태그를 변경하세요.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-HandlingcomplexHTMLinFlutter"},"buildId":"aCCUs-qPrLLLWRnkN0AOd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>