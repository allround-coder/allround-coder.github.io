<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>AWSì—ì„œ ì´ë ¥ì„œë¥¼ Terraformìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš” I | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-15-GetyourResumeTerraformedinAWSI" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="AWSì—ì„œ ì´ë ¥ì„œë¥¼ Terraformìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš” I | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="AWSì—ì„œ ì´ë ¥ì„œë¥¼ Terraformìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš” I | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-15-GetyourResumeTerraformedinAWSI" data-gatsby-head="true"/><meta name="twitter:title" content="AWSì—ì„œ ì´ë ¥ì„œë¥¼ Terraformìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš” I | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-15 11:08" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_buildManifest.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">AWSì—ì„œ ì´ë ¥ì„œë¥¼ Terraformìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš” I</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="AWSì—ì„œ ì´ë ¥ì„œë¥¼ Terraformìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš” I" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 15, 2024</span><span class="posts_reading_time__f7YPP">9<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-15-GetyourResumeTerraformedinAWSI&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>ì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹ ì—¬ëŸ¬ë¶„! ì˜¤ëœë§Œì´ì£ . ì—¬ê¸°ì— ìœ ìš©í•œ(ì•„ë‹ˆë©´ í¥ë¯¸ë¡œìš´?) ê¸°ì‚¬ ëª‡ ê°œë¥¼ ì˜¬ë¦¬ê³  ì‹¶ë‹¤ê³  ìƒê°í•œ ì§€ ì˜¤ë˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì¢‹ê±°ë‚˜ ìœ ìš©í•œ ì•„ì´ë””ì–´ê°€ ìƒê°ë‚˜ì§€ ì•Šì•˜ì–´ìš”. ëª‡ ì£¼ ì „ ë‚˜ë¥¼ ìœ„í•´ í•œ ì‘ì—…ì„ ë¬¸ì„œí™”í•˜ëŠ” ì•„ì´ë””ì–´ë¥¼ ë§Œë‚¬ëŠ”ë°ìš”: ì´ë ¥ì„œì˜ HTML ë²„ì „ì„ AWSì— Terraformê³¼ GitHub Actionsì„ í†µí•´ ë°°í¬(ìë™í™”)í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ìš”ì¦˜ì—ëŠ” ì´ëŸ° ê¸°ìˆ ì„ ì´ë ¥ì„œì— ë„£ëŠ” ê²ƒì´ í¥ë¯¸ë¡œìš¸ ê²ƒ ê°™ì•„ìš”. ê·¼ë° ì´ë ¥ì„œ ì•ˆì— ê·¸ëŸ° ê¸°ìˆ ì„ ë³´ì—¬ì£¼ë©´ ì–´ë•Œìš”? ğŸ˜œ</p>
<p>ì´ëŸ° ì‘ì—…ì„ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” ë§ì€ ë¹„ë””ì˜¤/íŠœí† ë¦¬ì–¼ì€ AWS ì½˜ì†”ì—ì„œ "í´ë¦­ ë‹¨ê³„ë³„"ë¡œ ì§„í–‰í•˜ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì €ëŠ” Terraform + GithubActions ë°©ë²•ì„ ì†Œê°œí•  ê±°ì—ìš”, ë” í¥ë¯¸ë¡œìš¸ ê²ƒ ê°™ë‹¤ê³  ë´…ë‹ˆë‹¤.</p>
<p>ì´ ê¸€ì€ ë‘ í¸ ì¤‘ ì²« ë²ˆì§¸ ì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ì§€ì—­ (HTML í˜•ì‹)ìœ¼ë¡œ ë°°í¬ëœ ì´ë ¥ì„œë¥¼ AWS(S3)ì— ë³´ê´€í•˜ê³  <a href="https://antonirs.com" rel="nofollow" target="_blank">https://antonirs.com</a> ê°™ì€ URLì„ í†µí•´ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ë°©ë²•ì„ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•  ê±°ì—ìš”. ê·¸ë¦¬ê³  ë˜í•œ ë§¤ í‘¸ì‹œë§ˆë‹¤ ìƒˆ ë²„ì „ì„ ìë™ìœ¼ë¡œ ë°°í¬í•˜ëŠ” âš™ï¸GitHub Actions íŒŒì´í”„ë¼ì¸âš™ï¸ ë„ ì„¤ì •í•  ê±°ì—ìš”. ì´ ìë™í™” ë¶€ë¶„ì€ ì´ ì²« ë²ˆì§¸ ê¸€ì—ì„œ ë‹¤ë£¨ì§€ ì•Šê³  ë‘ ë²ˆì§¸ ê¸€ì—ì„œ ë‹¤ë¤„ìš”.</p>
<p>ì´ ê¸€ì„ ë”°ë¼ê°€ëŠ” ë™ì•ˆ ì œ ê°œì¸ ì´ë ¥ì„œ ì €ì¥ì†Œì—ì„œ ëª¨ë“  ì†ŒìŠ¤ ì½”ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”. ì¦ê²¨ë³´ì„¸ìš”!</p>
<h1>ì¸í”„ë¼ êµ¬ì¡° ì´í•´í•˜ê¸°</h1>
<p><img src="/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_0.png" alt="ì´ë¯¸ì§€"></p>
<p>ìš°ë¦¬ê°€ êµ¬ì¶•í•  ë‚´ìš©ì„ í¬ê²Œ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤. ì²« ë²ˆì§¸ ê¸°ì‚¬ì—ì„œ Terraformì„ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ì¶•í•˜ê³  ì—°ê²°í•˜ë©° í•¨ê»˜ ì‘ë™ì‹œí‚¤ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì•„í‚¤í…ì²˜ëŠ” ì „í˜€ ë³µì¡í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ëª¨ë‘ êµ¬ì¶•í•˜ê¸° ìœ„í•´ AWSì˜ "ë‹¨ì§€" 4ê°€ì§€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
<h1>ì´ì „ ìš”êµ¬ ì‚¬í•­</h1>
<p>ì¼í•  ë•Œ í•„ìš”í•œ ëª‡ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤:</p>
<ol>
<li>AWS ê³„ì •. ê½¤ ëª…ë°±í•œ ğŸ¤·ğŸ¼â€â™‚ï¸ ë‹¹ì—°í•˜ì§€ë§Œ í•„ìˆ˜ì…ë‹ˆë‹¤. AWSëŠ” ì´ ë¬¸ì„œì—ì„œ í•œ ë‹¨ê³„ì”© ì•ˆë‚´í•˜ì—¬ ê³„ì •ì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.</li>
<li>Terraform CLI ì„¤ì¹˜. í„°ë¯¸ë„ì— terraform CLIê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. Hashicorpì—ì„œ ì„¤ì¹˜ ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.</li>
<li>ë“±ë¡ëœ ë„ë©”ì¸. ì´ ë¬¸ì„œì—ì„œëŠ” êµ¬ë§¤ ë° AWSì—ì„œ ì²˜ë¦¬ëœ ë„ë©”ì¸ì„ ê°€ì§€ê³  ìˆë‹¤ê³  ê°€ì •í•˜ì§€ë§Œ, ë°˜ë“œì‹œ ê·¸ë ‡ê²Œ í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.</li>
<li>ì´ë ¥ì„œì˜ HTML ë²„ì „. S3 ë²„í‚·ì— ì €ì¥ë˜ê³  CloudFrontë¥¼ í†µí•´ ì œê³µë  ê²ƒì…ë‹ˆë‹¤.</li>
</ol>
<h1>ì¼í•˜ëŸ¬ ê°€ë³¼ê¹Œìš” ğŸ’ªğŸ»</h1>
<p>ì €ì˜ ì €ì¥ì†Œì—ì„œ ì™„ì „í•œ ì‘ë™ ì†”ë£¨ì…˜ì„ ì œê³µë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ğŸ‘€, ë‹¨ê³„ë³„ë¡œ ìì„¸íˆ ì„¤ëª…í•˜ì§€ëŠ” ì•Šê² ì§€ë§Œ ê° ë¶€ë¶„ì˜ ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œì— ëŒ€í•´ ì£¼ì„ì„ ë‹¬ê² ìŠµë‹ˆë‹¤.</p>
<h2>ë‹¨ê³„ 0: ë„ë©”ì¸ êµ¬ë§¤ ë° í˜¸ìŠ¤íŒ… ì¡´ ìƒì„±</h2>
<p>ë„ë©”ì¸ (ë‚˜ì˜ ê²½ìš°ì—ëŠ” antonirs.com)ì˜ êµ¬ë§¤ì™€ í˜¸ìŠ¤íŒ… ì˜ì—­ ìƒì„±ì€ Terraformìœ¼ë¡œ ë§Œë“¤ì§€ ëª»í•˜ëŠ” ìœ ì¼í•œ ë¶€ë¶„ì´ë©°, ëŒ€ì‹  AWS ì½˜ì†”ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ë‹¤ë¥¸ ì œê³µì—…ì²´ì— ë„ë©”ì¸ì„ í˜¸ìŠ¤íŒ…í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ì¶”ê°€ êµ¬ì„±ì´ í•„ìš”í•  ìˆ˜ ìˆì§€ë§Œ (ê·¸ ì™¸ì—ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤), ì´ ê²½ìš°ì—ëŠ” AWSì—ì„œ í˜¸ìŠ¤íŒ…ë˜ëŠ” ê²½ìš°ë¥¼ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.</p>
<h2>ë‹¨ê³„ 1: Terraformìœ¼ë¡œ ì‹œì‘í•˜ê¸°. AWS ì œê³µì ì„¤ì •</h2>
<p>Terraform í”„ë¡œì íŠ¸ì˜ ì‹œì‘ì ì€ ì¼ë°˜ì ìœ¼ë¡œ AWS ì œê³µì ë° ì‚¬ìš©í•  ë°±ì—”ë“œ êµ¬ì„±ì„ ì„¤ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Terraformì—ê²Œ AWSì™€ì˜ ì¸ì¦ ë°©ë²•, ë¦¬ì†ŒìŠ¤ë¥¼ ë°°í¬í•  ì§€ì—­ ë° ì¸í”„ë¼ì˜ tfstateë¥¼ ì €ì¥í•  ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤. ì´ êµ¬ì„±ì„ provider.tf íŒŒì¼ì— ë„£ì–´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js">provider <span class="hljs-string">"aws"</span> {
  region = <span class="hljs-string">"us-east-1"</span>
  access_key = <span class="hljs-string">"ë‚´ ì•¡ì„¸ìŠ¤ í‚¤"</span>
  secret_key = <span class="hljs-string">"ë‚´ ì‹œí¬ë¦¿ ì•¡ì„¸ìŠ¤ í‚¤"</span>
}
</code></pre>
<p>ì•¡ì„¸ìŠ¤ í‚¤ì™€ ì‹œí¬ë¦¿ í‚¤ëŠ” ì ˆëŒ€ë¡œ ë¦¬í¬ì§€í† ë¦¬ì— í‘¸ì‹œí•´ì„œëŠ” ì•ˆ ë˜ëŠ” ê²ƒì„ ì—¼ë‘ì— ë‘ì„¸ìš”. ì—¬ê¸°ì„œ ë³´ì—¬ì£¼ê³  ìˆì§€ë§Œ, ë‹¤ìŒ ê¸€ì—ì„œ ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì˜ ì‹œí¬ë¦¿ êµ¬ì„±ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤„ ê²ƒì…ë‹ˆë‹¤.</p>
<p>ë°±ì—”ë“œ.tfì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ë³´ì´ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì¸í”„ë¼ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ S3ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">terraform {
  backend <span class="hljs-string">"s3"</span> {
    bucket         = <span class="hljs-string">"antoni-tf-state"</span>
    key            = <span class="hljs-string">"personal-portfolio/terraform.tfstate"</span>
    region         = <span class="hljs-string">"us-east-1"</span>
    encrypt        = <span class="hljs-literal">true</span>
  }
}
</code></pre>
<h2>Step 2: S3 ë° ì•¡ì„¸ìŠ¤ ì •ì±… ìƒì„±</h2>
<p>ì—¬ê¸°ì„œëŠ” antoni-html-cvë¼ëŠ” S3 ë²„í‚·ì„ ìƒì„±í•˜ê³ , ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ìš°ë¦¬ê°€ ì •ì˜í•˜ëŠ” ì •ì±…ì¸ s3_policyì…ë‹ˆë‹¤. Cloudfrontì—ì„œ ì˜¤ëŠ” ìš”ì²­ì„ ì œì™¸í•˜ê³  ëª¨ë“  ìˆ˜ì‹  íŠ¸ë˜í”½ì„ ì°¨ë‹¨í•  ê²ƒì…ë‹ˆë‹¤ â›”.</p>
<pre><code class="hljs language-js">resource <span class="hljs-string">"aws_s3_bucket"</span> <span class="hljs-string">"personal_portfolio_bucket"</span> {
  bucket = <span class="hljs-string">"antoni-html-cv"</span>
}

data <span class="hljs-string">"aws_caller_identity"</span> <span class="hljs-string">"current"</span> {}

data <span class="hljs-string">"aws_iam_policy_document"</span> <span class="hljs-string">"s3_policy"</span> {
  statement {
    sid       = <span class="hljs-string">"AllowCloudFrontServicePrincipal"</span>
    effect    = <span class="hljs-string">"Allow"</span>
    principals {
      type        = <span class="hljs-string">"Service"</span>
      identifiers = [<span class="hljs-string">"cloudfront.amazonaws.com"</span>]
    }
    actions   = [<span class="hljs-string">"s3:GetObject"</span>]
    resources = [<span class="hljs-string">"${aws_s3_bucket.personal_portfolio_bucket.arn}/*"</span>]
    condition {
      test     = <span class="hljs-string">"StringEquals"</span>
      variable = <span class="hljs-string">"AWS:SourceArn"</span>
      values   = [<span class="hljs-string">"arn:aws:cloudfront::${data.aws_caller_identity.current.account_id}:distribution/${aws_cloudfront_distribution.portfolio_distribution.id}"</span>]
    }
  }
}

resource <span class="hljs-string">"aws_s3_bucket_policy"</span> <span class="hljs-string">"s3_policy"</span> {
  bucket = aws_s3_bucket.<span class="hljs-property">personal_portfolio_bucket</span>.<span class="hljs-property">id</span>
  policy = data.<span class="hljs-property">aws_iam_policy_document</span>.<span class="hljs-property">s3_policy</span>.<span class="hljs-property">json</span>
}
</code></pre>
<p>ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€ ì •ì±…ì„ í†µí•´ S3ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³  Cloudfrontê°€ ë‚´ìš©ì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í—ˆìš©í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤ (ê³ ê°ì—ê²Œ ì„œë¹„ìŠ¤í•˜ê¸° ìœ„í•´). ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ë„ ìˆì§€ë§Œ, ì €ëŠ” í˜„ì¬ AWSê°€ ê°€ì¥ ê¶Œì¥í•˜ëŠ” Origin Access Control ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. OACì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” <a href="%EB%A7%81%ED%81%AC">ì—¬ê¸°</a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>ë‹¨ê³„ 3: SSL ì¸ì¦ì„œë¡œ CloudFront ë°°í¬ ì„¤ì •í•˜ê¸°</h2>
<p>CloudFrontëŠ” S3ì—ì„œ ì •ì  ì½˜í…ì¸ ë¥¼ ì œê³µí•˜ëŠ” ë° ì‚¬ìš©í•  AWS ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. CloudFrontëŠ” CDNìœ¼ë¡œ ì‘ë™í•˜ì—¬ ì „ ì„¸ê³„ì˜ ì—¬ëŸ¬ ìœ„ì¹˜(ì—£ì§€ ìœ„ì¹˜)ì— ì½˜í…ì¸ ë¥¼ ìºì‹œí•˜ì—¬ ë” ë¹ ë¥´ê²Œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ë˜í•œ, CloudFrontë¥¼ ì‚¬ìš©í•˜ë©´ ë°°í¬ì— SSL/TLS ì¸ì¦ì„œë¥¼ ì²¨ë¶€í•˜ì—¬ ì›¹ ì‚¬ì´íŠ¸ ì—°ê²°ì„ HTTPSë¡œ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">resource <span class="hljs-string">"aws_cloudfront_origin_access_control"</span> <span class="hljs-string">"portfolio_oac"</span> {
  name        = <span class="hljs-string">"OAC for Portfolio Website"</span>
  description = <span class="hljs-string">"OAC for antonirs portfolio website"</span>
  origin_access_control_origin_type = <span class="hljs-string">"s3"</span>

  signing_behavior = <span class="hljs-string">"always"</span>
  signing_protocol = <span class="hljs-string">"sigv4"</span>
}

resource <span class="hljs-string">"aws_cloudfront_distribution"</span> <span class="hljs-string">"portfolio_distribution"</span> {
  origin {
    domain_name = aws_s3_bucket.<span class="hljs-property">personal_portfolio_bucket</span>.<span class="hljs-property">bucket_regional_domain_name</span>
    origin_id   = <span class="hljs-string">"S3-antonirs-portfolio"</span>
    origin_access_control_id = aws_cloudfront_origin_access_control.<span class="hljs-property">portfolio_oac</span>.<span class="hljs-property">id</span>
  }

  enabled = <span class="hljs-literal">true</span>
  comment = <span class="hljs-string">"Distribution for the antonirs.com static website"</span>
  aliases = [<span class="hljs-string">"antonirs.com"</span>]
  default_root_object = <span class="hljs-string">"index.html"</span>

  default_cache_behavior {
    allowed_methods  = [<span class="hljs-string">"GET"</span>, <span class="hljs-string">"HEAD"</span>, <span class="hljs-string">"OPTIONS"</span>]
    cached_methods   = [<span class="hljs-string">"GET"</span>, <span class="hljs-string">"HEAD"</span>]

    target_origin_id = <span class="hljs-string">"S3-antonirs-portfolio"</span>

    forwarded_values {
      query_string = <span class="hljs-literal">false</span>
      cookies {
        forward = <span class="hljs-string">"none"</span>
      }
    }

    viewer_protocol_policy = <span class="hljs-string">"redirect-to-https"</span>
    min_ttl                = <span class="hljs-number">0</span>
    default_ttl            = <span class="hljs-number">86400</span>
    max_ttl                = <span class="hljs-number">31536000</span>
  }

  viewer_certificate {
    acm_certificate_arn = aws_acm_certificate.<span class="hljs-property">personal_web_portfolio_cert</span>.<span class="hljs-property">arn</span>
    ssl_support_method  = <span class="hljs-string">"sni-only"</span>
    minimum_protocol_version = <span class="hljs-string">"TLSv1.2_2021"</span>
  }

  restrictions {
    geo_restriction {
      restriction_type = <span class="hljs-string">"none"</span>
    }
  }

  tags = {
    <span class="hljs-title class_">Environment</span> = <span class="hljs-string">"production"</span>
  }
}
</code></pre>
<p>ì—¬ê¸°ì—ëŠ” ë§ì€ êµ¬ì„±ì´ í¬í•¨ë˜ì–´ ìˆì§€ë§Œ ì£¼ìš” ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
-<code> ìš°ë¦¬ëŠ” originì„ ì •ì˜í•˜ì—¬ CloudFrontì—ê²Œ ë°ì´í„°ë¥¼ ì–´ë””ì„œ ê°€ì ¸ì™€ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤(S3ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤). -</code> viewer_certificate ì„¹ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë¸Œë¼ìš°ì €ì™€ CloudFront ê°„ì˜ ì•ˆì „í•œ ì—°ê²°(HTTPS)ì„ ì„¤ì •í•˜ëŠ” SSL ì¸ì¦ì„œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
ì¸ì¦ì„œë¥¼ ìƒì„±í•˜ëŠ” ê´€ë ¨ ëª…ë ¹ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ acm.tfì—ì„œ êµ¬ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">resource <span class="hljs-string">"aws_acm_certificate"</span> <span class="hljs-string">"personal_web_portfolio_cert"</span> {
  domain_name       = <span class="hljs-string">"antonirs.com"</span>
  validation_method = <span class="hljs-string">"DNS"</span>

  lifecycle {
    create_before_destroy = <span class="hljs-literal">true</span>
  }
}

resource <span class="hljs-string">"aws_route53_record"</span> <span class="hljs-string">"cert_validation"</span> {
  zone_id = data.<span class="hljs-property">aws_route53_zone</span>.<span class="hljs-property">my_personal_zone</span>.<span class="hljs-property">zone_id</span>
  name    = <span class="hljs-title function_">tolist</span>(aws_acm_certificate.<span class="hljs-property">personal_web_portfolio_cert</span>.<span class="hljs-property">domain_validation_options</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">resource_record_name</span>
  type    = <span class="hljs-title function_">tolist</span>(aws_acm_certificate.<span class="hljs-property">personal_web_portfolio_cert</span>.<span class="hljs-property">domain_validation_options</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">resource_record_type</span>
  records = [<span class="hljs-title function_">tolist</span>(aws_acm_certificate.<span class="hljs-property">personal_web_portfolio_cert</span>.<span class="hljs-property">domain_validation_options</span>)[<span class="hljs-number">0</span>].<span class="hljs-property">resource_record_value</span>]
  ttl     = <span class="hljs-number">60</span>
}

resource <span class="hljs-string">"aws_acm_certificate_validation"</span> <span class="hljs-string">"cert_validation"</span> {
  certificate_arn         = aws_acm_certificate.<span class="hljs-property">personal_web_portfolio_cert</span>.<span class="hljs-property">arn</span>
  validation_record_fqdns = [aws_route53_record.<span class="hljs-property">cert_validation</span>.<span class="hljs-property">fqdn</span>]
}
</code></pre>
<p>ì¸ì¦ì„œ êµ¬ì„± ì¤‘ ì¤‘ìš”í•œ ë¶€ë¶„ì€ aws_acm_certificate_validation ì„¹ì…˜ì…ë‹ˆë‹¤. ì´ ì¸ì¦ì„œë¥¼ antonirs.comì— ì ‘ì†í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ Route53ì— ëŒ€í•´ ì´ ì¸ì¦ì„œë¥¼ ê²€ì¦í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<h2>ë‹¨ê³„ 4: Route 53 ì„¤ì •</h2>
<p>ì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ì—ì„œë§í–ˆë˜ ê²ƒì²˜ëŸ¼ DNS ê´€ë¦¬ë¥¼ ìœ„í•´ Route 53ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ê¸€ì˜ ì‹œì‘ì—ì„œ ë§í–ˆë“¯ì´ ì´ë¯¸ ë„ë©”ì¸(ë‚˜ì˜ ê²½ìš°ì—” antonirs.com)ê³¼ AWSì— ìƒì„±ëœ í˜¸ìŠ¤íŒ…ì¡´ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ êµ¬ì„±(route53.tf)ì„ ë”°ë¼ í˜¸ìŠ¤íŒ…ì¡´ ë‚´ì— A ë ˆì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , CloudFront ë°°í¬ë¡œ ê°€ë¦¬í‚¤ëŠ” ë³„ì¹­ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">data <span class="hljs-string">"aws_route53_zone"</span> <span class="hljs-string">"my_personal_zone"</span> {
  name = <span class="hljs-string">"antonirs.com."</span>
}

resource <span class="hljs-string">"aws_route53_record"</span> <span class="hljs-string">"www"</span> {
  zone_id = data.<span class="hljs-property">aws_route53_zone</span>.<span class="hljs-property">my_personal_zone</span>.<span class="hljs-property">id</span>
  name    = <span class="hljs-string">"antonirs.com"</span>
  type    = <span class="hljs-string">"A"</span>

  alias {
    name                   = aws_cloudfront_distribution.<span class="hljs-property">portfolio_distribution</span>.<span class="hljs-property">domain_name</span>
    zone_id                = aws_cloudfront_distribution.<span class="hljs-property">portfolio_distribution</span>.<span class="hljs-property">hosted_zone_id</span>
    evaluate_target_health = <span class="hljs-literal">false</span>
  }
}
</code></pre>
<h2>ë‹¨ê³„ 5: ëª¨ë“  ê²ƒì´ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸</h2>
<p>ì§€ê¸ˆê¹Œì§€ ë³¸ ê²ƒìœ¼ë¡œ ì¶©ë¶„íˆ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ "í•œ ë²ˆì˜ í´ë¦­"ìœ¼ë¡œ ëª¨ë“  ì¸í”„ë¼ë¥¼ êµ¬ì¶•í•˜ì—¬ <a href="https://antonirs.com" rel="nofollow" target="_blank">https://antonirs.com</a> (ì œ ê²½ìš°)ì„ ë°©ë¬¸í•˜ì—¬ ì´ë ¥ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì¢‹ì•„ìš”, ì´ì¤‘ ë”°ì˜´í‘œë¥¼ ì¡°ê¸ˆ í’€ì–´ë³¼ê²Œìš”. ëª¨ë“  í…Œë¼í¼ íŒŒì¼ì´ ì¤€ë¹„ëœ ìƒíƒœì—ì„œ ì´ì œ í•´ì•¼ í•  ì¼ì€ í„°ë¯¸ë„ì„ ì—´ê³  ë‹¤ìŒì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:</p>
<ol>
<li>terraform init ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì˜ì¡´ì„±ì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ê°„ë‹¨íˆ ë§í•´ì„œ AWSì™€ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.</li>
<li>terraform plan ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì‹¤ì œ ì¸í”„ë¼ì— ë°˜ì˜ë˜ì§€ ì•Šì€ tf íŒŒì¼ì— ìˆëŠ” ëª¨ë“  ë³€ê²½ ì‚¬í•­ì„ ì¶œë ¥í•©ë‹ˆë‹¤.</li>
<li>terraform apply ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì¸í”„ë¼ì—ì„œ ì‹¤ì œ ë³€ê²½ ì‚¬í•­ì„ ë§Œë“­ë‹ˆë‹¤. Terraform íŒŒì¼ì— êµ¬ì„±ëœ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</li>
<li>ì´ë ¥ì„œì˜ HTML ë²„ì „ì„ ìƒì„±í•œ ë²„í‚·ì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.</li>
<li>ë°©ë¬¸(ì œ ê²½ìš°) <a href="https://antonirs.com" rel="nofollow" target="_blank">https://antonirs.com</a> ê·¸ë¦¬ê³ ... ì¦ê¸°ì„¸ìš” ğŸ˜œ ğŸš€</li>
</ol>
<img src="/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_1.png">
<h1>ë§ˆë¬´ë¦¬ ë° ë‹¤ìŒ ë‹¨ê³„</h1>
<p>ì™€ìš°! ì—¬ê¸°ê¹Œì§€ ëª¨ë‘ ì½ì€ ê²ƒì„ ë³´ë‹ˆ ë§¤ìš° ê¸°ë»ìš”ğŸŠ! í•˜í•˜. í•˜ì§€ë§Œ ê¸°ì¨ì€ ì—¬ê¸°ê¹Œì§€ê°€ ì•„ë‹™ë‹ˆë‹¤. ë‹¤ìŒ ê¸°ì‚¬ì—ì„œ ë” í¥ë¯¸ë¡œì›Œì§‘ë‹ˆë‹¤. ì¡°ê¸ˆ ìŠ¤í¬í•˜ê² ìŠµë‹ˆë‹¤:</p>
<p>ì´ì „ì˜ "ë‹¨ê³„ 5"ë¥¼ ë³´ë©´ ì¸í”„ë¼ë¥¼ ë°°í¬í•˜ê¸° ìœ„í•´ "ìƒë‹¹íˆ ë§ì€" ëª…ë ¹ì„ ì‹¤í–‰í•´ì•¼ í•œë‹¤ëŠ” ê²ƒ ê°™ì£ ? ê·¸ëŸ°ë° ë§Œì•½ ì›¹ì‚¬ì´íŠ¸ì— ì´ë ¥ì„œì˜ ìƒˆ ë²„ì „ì„ ì—…ë¡œë“œí•˜ë ¤ë©´ ì–´ë–¨ê¹Œìš”? ìƒˆ ë²„ì „ì„ ì—…ë¡œë“œí•˜ë ¤ë©´ AWS ì½˜ì†”ì— ë¡œê·¸ì¸í•´ì•¼ í•©ë‹ˆë‹¤ (ë˜ëŠ” aws-clië¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤)... ì–´ì°Œ ë³´ë©´ ê·¸ë ‡ê²Œ í¸ë¦¬í•˜ì§€ ì•Šì„ ê±°ì˜ˆìš”.</p>
<p>ë‹¤ìŒ ê¸°ì‚¬ì—ì„œëŠ” GitHub Actionsì—ì„œ ëª¨ë“  ì´ëŸ¬í•œ ë‹¨ê³„ë¥¼ ìë™í™”í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ ë“œë¦´ ê²ƒì´ê¸° ë•Œë¬¸ì— ê¸°ëŒ€í•´ ì£¼ì„¸ìš”. ë‹¤ìŒ ê¸°ì‚¬ì—ì„œëŠ” ë˜í•œ íŒŒì´í”„ë¼ì¸ì— ìš°ë¦¬ì˜ ë¹„ìš©ì„ ì œì–´í•˜ê¸° ìœ„í•œ ğŸ’°infracostğŸ’° í†µí•©ì— ê´€í•œ 'ë³´ë„ˆìŠ¤' ì„¹ì…˜ì„ ê³µìœ í•  ì˜ˆì •ì´ì—ìš”. ìì„¸í•œ ë‚´ìš©ì„ ë” ë‹¤ë£¨ê² ì§€ë§Œ, ì´ëŠ” ìš°ë¦¬ ì¸í”„ë¼ ë¹„ìš©ì„ ê´€ë¦¬í•˜ëŠ” ë° ë§¤ìš° ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤. ê³„ì† ì§€ì¼œë³´ì„¸ìš”! ğŸ˜‰</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"AWSì—ì„œ ì´ë ¥ì„œë¥¼ Terraformìœ¼ë¡œ ë§Œë“¤ì–´ë³´ì„¸ìš” I","description":"","date":"2024-05-15 11:08","slug":"2024-05-15-GetyourResumeTerraformedinAWSI","content":"\n\nì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹ ì—¬ëŸ¬ë¶„! ì˜¤ëœë§Œì´ì£ . ì—¬ê¸°ì— ìœ ìš©í•œ(ì•„ë‹ˆë©´ í¥ë¯¸ë¡œìš´?) ê¸°ì‚¬ ëª‡ ê°œë¥¼ ì˜¬ë¦¬ê³  ì‹¶ë‹¤ê³  ìƒê°í•œ ì§€ ì˜¤ë˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì¢‹ê±°ë‚˜ ìœ ìš©í•œ ì•„ì´ë””ì–´ê°€ ìƒê°ë‚˜ì§€ ì•Šì•˜ì–´ìš”. ëª‡ ì£¼ ì „ ë‚˜ë¥¼ ìœ„í•´ í•œ ì‘ì—…ì„ ë¬¸ì„œí™”í•˜ëŠ” ì•„ì´ë””ì–´ë¥¼ ë§Œë‚¬ëŠ”ë°ìš”: ì´ë ¥ì„œì˜ HTML ë²„ì „ì„ AWSì— Terraformê³¼ GitHub Actionsì„ í†µí•´ ë°°í¬(ìë™í™”)í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ìš”ì¦˜ì—ëŠ” ì´ëŸ° ê¸°ìˆ ì„ ì´ë ¥ì„œì— ë„£ëŠ” ê²ƒì´ í¥ë¯¸ë¡œìš¸ ê²ƒ ê°™ì•„ìš”. ê·¼ë° ì´ë ¥ì„œ ì•ˆì— ê·¸ëŸ° ê¸°ìˆ ì„ ë³´ì—¬ì£¼ë©´ ì–´ë•Œìš”? ğŸ˜œ\n\nì´ëŸ° ì‘ì—…ì„ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” ë§ì€ ë¹„ë””ì˜¤/íŠœí† ë¦¬ì–¼ì€ AWS ì½˜ì†”ì—ì„œ \"í´ë¦­ ë‹¨ê³„ë³„\"ë¡œ ì§„í–‰í•˜ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì €ëŠ” Terraform + GithubActions ë°©ë²•ì„ ì†Œê°œí•  ê±°ì—ìš”, ë” í¥ë¯¸ë¡œìš¸ ê²ƒ ê°™ë‹¤ê³  ë´…ë‹ˆë‹¤.\n\nì´ ê¸€ì€ ë‘ í¸ ì¤‘ ì²« ë²ˆì§¸ ì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ì§€ì—­ (HTML í˜•ì‹)ìœ¼ë¡œ ë°°í¬ëœ ì´ë ¥ì„œë¥¼ AWS(S3)ì— ë³´ê´€í•˜ê³  https://antonirs.com ê°™ì€ URLì„ í†µí•´ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ë°©ë²•ì„ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•  ê±°ì—ìš”. ê·¸ë¦¬ê³  ë˜í•œ ë§¤ í‘¸ì‹œë§ˆë‹¤ ìƒˆ ë²„ì „ì„ ìë™ìœ¼ë¡œ ë°°í¬í•˜ëŠ” âš™ï¸GitHub Actions íŒŒì´í”„ë¼ì¸âš™ï¸ ë„ ì„¤ì •í•  ê±°ì—ìš”. ì´ ìë™í™” ë¶€ë¶„ì€ ì´ ì²« ë²ˆì§¸ ê¸€ì—ì„œ ë‹¤ë£¨ì§€ ì•Šê³  ë‘ ë²ˆì§¸ ê¸€ì—ì„œ ë‹¤ë¤„ìš”.\n\nì´ ê¸€ì„ ë”°ë¼ê°€ëŠ” ë™ì•ˆ ì œ ê°œì¸ ì´ë ¥ì„œ ì €ì¥ì†Œì—ì„œ ëª¨ë“  ì†ŒìŠ¤ ì½”ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”. ì¦ê²¨ë³´ì„¸ìš”!\n\n\n\n# ì¸í”„ë¼ êµ¬ì¡° ì´í•´í•˜ê¸°\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_0.png)\n\nìš°ë¦¬ê°€ êµ¬ì¶•í•  ë‚´ìš©ì„ í¬ê²Œ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤. ì²« ë²ˆì§¸ ê¸°ì‚¬ì—ì„œ Terraformì„ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ì¶•í•˜ê³  ì—°ê²°í•˜ë©° í•¨ê»˜ ì‘ë™ì‹œí‚¤ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì•„í‚¤í…ì²˜ëŠ” ì „í˜€ ë³µì¡í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ëª¨ë‘ êµ¬ì¶•í•˜ê¸° ìœ„í•´ AWSì˜ \"ë‹¨ì§€\" 4ê°€ì§€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤.\n\n# ì´ì „ ìš”êµ¬ ì‚¬í•­\n\n\n\nì¼í•  ë•Œ í•„ìš”í•œ ëª‡ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤:\n1. AWS ê³„ì •. ê½¤ ëª…ë°±í•œ ğŸ¤·ğŸ¼â€â™‚ï¸ ë‹¹ì—°í•˜ì§€ë§Œ í•„ìˆ˜ì…ë‹ˆë‹¤. AWSëŠ” ì´ ë¬¸ì„œì—ì„œ í•œ ë‹¨ê³„ì”© ì•ˆë‚´í•˜ì—¬ ê³„ì •ì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\n2. Terraform CLI ì„¤ì¹˜. í„°ë¯¸ë„ì— terraform CLIê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. Hashicorpì—ì„œ ì„¤ì¹˜ ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.\n3. ë“±ë¡ëœ ë„ë©”ì¸. ì´ ë¬¸ì„œì—ì„œëŠ” êµ¬ë§¤ ë° AWSì—ì„œ ì²˜ë¦¬ëœ ë„ë©”ì¸ì„ ê°€ì§€ê³  ìˆë‹¤ê³  ê°€ì •í•˜ì§€ë§Œ, ë°˜ë“œì‹œ ê·¸ë ‡ê²Œ í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.\n4. ì´ë ¥ì„œì˜ HTML ë²„ì „. S3 ë²„í‚·ì— ì €ì¥ë˜ê³  CloudFrontë¥¼ í†µí•´ ì œê³µë  ê²ƒì…ë‹ˆë‹¤.\n\n# ì¼í•˜ëŸ¬ ê°€ë³¼ê¹Œìš” ğŸ’ªğŸ»\n\nì €ì˜ ì €ì¥ì†Œì—ì„œ ì™„ì „í•œ ì‘ë™ ì†”ë£¨ì…˜ì„ ì œê³µë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ğŸ‘€, ë‹¨ê³„ë³„ë¡œ ìì„¸íˆ ì„¤ëª…í•˜ì§€ëŠ” ì•Šê² ì§€ë§Œ ê° ë¶€ë¶„ì˜ ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œì— ëŒ€í•´ ì£¼ì„ì„ ë‹¬ê² ìŠµë‹ˆë‹¤.\n\n## ë‹¨ê³„ 0: ë„ë©”ì¸ êµ¬ë§¤ ë° í˜¸ìŠ¤íŒ… ì¡´ ìƒì„±\n\n\n\në„ë©”ì¸ (ë‚˜ì˜ ê²½ìš°ì—ëŠ” antonirs.com)ì˜ êµ¬ë§¤ì™€ í˜¸ìŠ¤íŒ… ì˜ì—­ ìƒì„±ì€ Terraformìœ¼ë¡œ ë§Œë“¤ì§€ ëª»í•˜ëŠ” ìœ ì¼í•œ ë¶€ë¶„ì´ë©°, ëŒ€ì‹  AWS ì½˜ì†”ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.\n\në‹¤ë¥¸ ì œê³µì—…ì²´ì— ë„ë©”ì¸ì„ í˜¸ìŠ¤íŒ…í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ì¶”ê°€ êµ¬ì„±ì´ í•„ìš”í•  ìˆ˜ ìˆì§€ë§Œ (ê·¸ ì™¸ì—ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤), ì´ ê²½ìš°ì—ëŠ” AWSì—ì„œ í˜¸ìŠ¤íŒ…ë˜ëŠ” ê²½ìš°ë¥¼ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\n\n## ë‹¨ê³„ 1: Terraformìœ¼ë¡œ ì‹œì‘í•˜ê¸°. AWS ì œê³µì ì„¤ì •\n\nTerraform í”„ë¡œì íŠ¸ì˜ ì‹œì‘ì ì€ ì¼ë°˜ì ìœ¼ë¡œ AWS ì œê³µì ë° ì‚¬ìš©í•  ë°±ì—”ë“œ êµ¬ì„±ì„ ì„¤ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Terraformì—ê²Œ AWSì™€ì˜ ì¸ì¦ ë°©ë²•, ë¦¬ì†ŒìŠ¤ë¥¼ ë°°í¬í•  ì§€ì—­ ë° ì¸í”„ë¼ì˜ tfstateë¥¼ ì €ì¥í•  ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤. ì´ êµ¬ì„±ì„ provider.tf íŒŒì¼ì— ë„£ì–´ì£¼ì„¸ìš”.\n\n\n\n```js\nprovider \"aws\" {\n  region = \"us-east-1\"\n  access_key = \"ë‚´ ì•¡ì„¸ìŠ¤ í‚¤\"\n  secret_key = \"ë‚´ ì‹œí¬ë¦¿ ì•¡ì„¸ìŠ¤ í‚¤\"\n}\n```\n\nì•¡ì„¸ìŠ¤ í‚¤ì™€ ì‹œí¬ë¦¿ í‚¤ëŠ” ì ˆëŒ€ë¡œ ë¦¬í¬ì§€í† ë¦¬ì— í‘¸ì‹œí•´ì„œëŠ” ì•ˆ ë˜ëŠ” ê²ƒì„ ì—¼ë‘ì— ë‘ì„¸ìš”. ì—¬ê¸°ì„œ ë³´ì—¬ì£¼ê³  ìˆì§€ë§Œ, ë‹¤ìŒ ê¸€ì—ì„œ ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì˜ ì‹œí¬ë¦¿ êµ¬ì„±ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤„ ê²ƒì…ë‹ˆë‹¤.\n\në°±ì—”ë“œ.tfì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ë³´ì´ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì¸í”„ë¼ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ S3ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\nterraform {\n  backend \"s3\" {\n    bucket         = \"antoni-tf-state\"\n    key            = \"personal-portfolio/terraform.tfstate\"\n    region         = \"us-east-1\"\n    encrypt        = true\n  }\n}\n```\n\n\n\n## Step 2: S3 ë° ì•¡ì„¸ìŠ¤ ì •ì±… ìƒì„±\n\nì—¬ê¸°ì„œëŠ” antoni-html-cvë¼ëŠ” S3 ë²„í‚·ì„ ìƒì„±í•˜ê³ , ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ìš°ë¦¬ê°€ ì •ì˜í•˜ëŠ” ì •ì±…ì¸ s3_policyì…ë‹ˆë‹¤. Cloudfrontì—ì„œ ì˜¤ëŠ” ìš”ì²­ì„ ì œì™¸í•˜ê³  ëª¨ë“  ìˆ˜ì‹  íŠ¸ë˜í”½ì„ ì°¨ë‹¨í•  ê²ƒì…ë‹ˆë‹¤ â›”.\n\n```js\nresource \"aws_s3_bucket\" \"personal_portfolio_bucket\" {\n  bucket = \"antoni-html-cv\"\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\ndata \"aws_iam_policy_document\" \"s3_policy\" {\n  statement {\n    sid       = \"AllowCloudFrontServicePrincipal\"\n    effect    = \"Allow\"\n    principals {\n      type        = \"Service\"\n      identifiers = [\"cloudfront.amazonaws.com\"]\n    }\n    actions   = [\"s3:GetObject\"]\n    resources = [\"${aws_s3_bucket.personal_portfolio_bucket.arn}/*\"]\n    condition {\n      test     = \"StringEquals\"\n      variable = \"AWS:SourceArn\"\n      values   = [\"arn:aws:cloudfront::${data.aws_caller_identity.current.account_id}:distribution/${aws_cloudfront_distribution.portfolio_distribution.id}\"]\n    }\n  }\n}\n\nresource \"aws_s3_bucket_policy\" \"s3_policy\" {\n  bucket = aws_s3_bucket.personal_portfolio_bucket.id\n  policy = data.aws_iam_policy_document.s3_policy.json\n}\n```\n\nì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€ ì •ì±…ì„ í†µí•´ S3ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³  Cloudfrontê°€ ë‚´ìš©ì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í—ˆìš©í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤ (ê³ ê°ì—ê²Œ ì„œë¹„ìŠ¤í•˜ê¸° ìœ„í•´). ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ë„ ìˆì§€ë§Œ, ì €ëŠ” í˜„ì¬ AWSê°€ ê°€ì¥ ê¶Œì¥í•˜ëŠ” Origin Access Control ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. OACì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” [ì—¬ê¸°](ë§í¬)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\n## ë‹¨ê³„ 3: SSL ì¸ì¦ì„œë¡œ CloudFront ë°°í¬ ì„¤ì •í•˜ê¸°\n\nCloudFrontëŠ” S3ì—ì„œ ì •ì  ì½˜í…ì¸ ë¥¼ ì œê³µí•˜ëŠ” ë° ì‚¬ìš©í•  AWS ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. CloudFrontëŠ” CDNìœ¼ë¡œ ì‘ë™í•˜ì—¬ ì „ ì„¸ê³„ì˜ ì—¬ëŸ¬ ìœ„ì¹˜(ì—£ì§€ ìœ„ì¹˜)ì— ì½˜í…ì¸ ë¥¼ ìºì‹œí•˜ì—¬ ë” ë¹ ë¥´ê²Œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ë˜í•œ, CloudFrontë¥¼ ì‚¬ìš©í•˜ë©´ ë°°í¬ì— SSL/TLS ì¸ì¦ì„œë¥¼ ì²¨ë¶€í•˜ì—¬ ì›¹ ì‚¬ì´íŠ¸ ì—°ê²°ì„ HTTPSë¡œ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\nresource \"aws_cloudfront_origin_access_control\" \"portfolio_oac\" {\n  name        = \"OAC for Portfolio Website\"\n  description = \"OAC for antonirs portfolio website\"\n  origin_access_control_origin_type = \"s3\"\n\n  signing_behavior = \"always\"\n  signing_protocol = \"sigv4\"\n}\n\nresource \"aws_cloudfront_distribution\" \"portfolio_distribution\" {\n  origin {\n    domain_name = aws_s3_bucket.personal_portfolio_bucket.bucket_regional_domain_name\n    origin_id   = \"S3-antonirs-portfolio\"\n    origin_access_control_id = aws_cloudfront_origin_access_control.portfolio_oac.id\n  }\n\n  enabled = true\n  comment = \"Distribution for the antonirs.com static website\"\n  aliases = [\"antonirs.com\"]\n  default_root_object = \"index.html\"\n\n  default_cache_behavior {\n    allowed_methods  = [\"GET\", \"HEAD\", \"OPTIONS\"]\n    cached_methods   = [\"GET\", \"HEAD\"]\n\n    target_origin_id = \"S3-antonirs-portfolio\"\n\n    forwarded_values {\n      query_string = false\n      cookies {\n        forward = \"none\"\n      }\n    }\n\n    viewer_protocol_policy = \"redirect-to-https\"\n    min_ttl                = 0\n    default_ttl            = 86400\n    max_ttl                = 31536000\n  }\n\n  viewer_certificate {\n    acm_certificate_arn = aws_acm_certificate.personal_web_portfolio_cert.arn\n    ssl_support_method  = \"sni-only\"\n    minimum_protocol_version = \"TLSv1.2_2021\"\n  }\n\n  restrictions {\n    geo_restriction {\n      restriction_type = \"none\"\n    }\n  }\n\n  tags = {\n    Environment = \"production\"\n  }\n}\n```\n\nì—¬ê¸°ì—ëŠ” ë§ì€ êµ¬ì„±ì´ í¬í•¨ë˜ì–´ ìˆì§€ë§Œ ì£¼ìš” ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n-` ìš°ë¦¬ëŠ” originì„ ì •ì˜í•˜ì—¬ CloudFrontì—ê²Œ ë°ì´í„°ë¥¼ ì–´ë””ì„œ ê°€ì ¸ì™€ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤(S3ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤).\n-` viewer_certificate ì„¹ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë¸Œë¼ìš°ì €ì™€ CloudFront ê°„ì˜ ì•ˆì „í•œ ì—°ê²°(HTTPS)ì„ ì„¤ì •í•˜ëŠ” SSL ì¸ì¦ì„œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\nì¸ì¦ì„œë¥¼ ìƒì„±í•˜ëŠ” ê´€ë ¨ ëª…ë ¹ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ acm.tfì—ì„œ êµ¬ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\n```js\nresource \"aws_acm_certificate\" \"personal_web_portfolio_cert\" {\n  domain_name       = \"antonirs.com\"\n  validation_method = \"DNS\"\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n\nresource \"aws_route53_record\" \"cert_validation\" {\n  zone_id = data.aws_route53_zone.my_personal_zone.zone_id\n  name    = tolist(aws_acm_certificate.personal_web_portfolio_cert.domain_validation_options)[0].resource_record_name\n  type    = tolist(aws_acm_certificate.personal_web_portfolio_cert.domain_validation_options)[0].resource_record_type\n  records = [tolist(aws_acm_certificate.personal_web_portfolio_cert.domain_validation_options)[0].resource_record_value]\n  ttl     = 60\n}\n\nresource \"aws_acm_certificate_validation\" \"cert_validation\" {\n  certificate_arn         = aws_acm_certificate.personal_web_portfolio_cert.arn\n  validation_record_fqdns = [aws_route53_record.cert_validation.fqdn]\n}\n```\n\nì¸ì¦ì„œ êµ¬ì„± ì¤‘ ì¤‘ìš”í•œ ë¶€ë¶„ì€ aws_acm_certificate_validation ì„¹ì…˜ì…ë‹ˆë‹¤. ì´ ì¸ì¦ì„œë¥¼ antonirs.comì— ì ‘ì†í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ Route53ì— ëŒ€í•´ ì´ ì¸ì¦ì„œë¥¼ ê²€ì¦í•´ì•¼ í•©ë‹ˆë‹¤.\n\n## ë‹¨ê³„ 4: Route 53 ì„¤ì •\n\nì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ì—ì„œë§í–ˆë˜ ê²ƒì²˜ëŸ¼ DNS ê´€ë¦¬ë¥¼ ìœ„í•´ Route 53ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ê¸€ì˜ ì‹œì‘ì—ì„œ ë§í–ˆë“¯ì´ ì´ë¯¸ ë„ë©”ì¸(ë‚˜ì˜ ê²½ìš°ì—” antonirs.com)ê³¼ AWSì— ìƒì„±ëœ í˜¸ìŠ¤íŒ…ì¡´ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ êµ¬ì„±(route53.tf)ì„ ë”°ë¼ í˜¸ìŠ¤íŒ…ì¡´ ë‚´ì— A ë ˆì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , CloudFront ë°°í¬ë¡œ ê°€ë¦¬í‚¤ëŠ” ë³„ì¹­ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\n \n\n\n\n```js\ndata \"aws_route53_zone\" \"my_personal_zone\" {\n  name = \"antonirs.com.\"\n}\n\nresource \"aws_route53_record\" \"www\" {\n  zone_id = data.aws_route53_zone.my_personal_zone.id\n  name    = \"antonirs.com\"\n  type    = \"A\"\n\n  alias {\n    name                   = aws_cloudfront_distribution.portfolio_distribution.domain_name\n    zone_id                = aws_cloudfront_distribution.portfolio_distribution.hosted_zone_id\n    evaluate_target_health = false\n  }\n}\n```\n\n## ë‹¨ê³„ 5: ëª¨ë“  ê²ƒì´ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸\n\nì§€ê¸ˆê¹Œì§€ ë³¸ ê²ƒìœ¼ë¡œ ì¶©ë¶„íˆ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ \"í•œ ë²ˆì˜ í´ë¦­\"ìœ¼ë¡œ ëª¨ë“  ì¸í”„ë¼ë¥¼ êµ¬ì¶•í•˜ì—¬ https://antonirs.com (ì œ ê²½ìš°)ì„ ë°©ë¬¸í•˜ì—¬ ì´ë ¥ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì¢‹ì•„ìš”, ì´ì¤‘ ë”°ì˜´í‘œë¥¼ ì¡°ê¸ˆ í’€ì–´ë³¼ê²Œìš”. ëª¨ë“  í…Œë¼í¼ íŒŒì¼ì´ ì¤€ë¹„ëœ ìƒíƒœì—ì„œ ì´ì œ í•´ì•¼ í•  ì¼ì€ í„°ë¯¸ë„ì„ ì—´ê³  ë‹¤ìŒì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:\n1. terraform init ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì˜ì¡´ì„±ì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ê°„ë‹¨íˆ ë§í•´ì„œ AWSì™€ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.\n2. terraform plan ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì‹¤ì œ ì¸í”„ë¼ì— ë°˜ì˜ë˜ì§€ ì•Šì€ tf íŒŒì¼ì— ìˆëŠ” ëª¨ë“  ë³€ê²½ ì‚¬í•­ì„ ì¶œë ¥í•©ë‹ˆë‹¤.\n3. terraform apply ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì¸í”„ë¼ì—ì„œ ì‹¤ì œ ë³€ê²½ ì‚¬í•­ì„ ë§Œë“­ë‹ˆë‹¤. Terraform íŒŒì¼ì— êµ¬ì„±ëœ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n4. ì´ë ¥ì„œì˜ HTML ë²„ì „ì„ ìƒì„±í•œ ë²„í‚·ì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.\n5. ë°©ë¬¸(ì œ ê²½ìš°) https://antonirs.com ê·¸ë¦¬ê³ ... ì¦ê¸°ì„¸ìš” ğŸ˜œ ğŸš€\n\n\n\n\n\u003cimg src=\"/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_1.png\" /\u003e\n\n# ë§ˆë¬´ë¦¬ ë° ë‹¤ìŒ ë‹¨ê³„\n\nì™€ìš°! ì—¬ê¸°ê¹Œì§€ ëª¨ë‘ ì½ì€ ê²ƒì„ ë³´ë‹ˆ ë§¤ìš° ê¸°ë»ìš”ğŸŠ! í•˜í•˜. í•˜ì§€ë§Œ ê¸°ì¨ì€ ì—¬ê¸°ê¹Œì§€ê°€ ì•„ë‹™ë‹ˆë‹¤. ë‹¤ìŒ ê¸°ì‚¬ì—ì„œ ë” í¥ë¯¸ë¡œì›Œì§‘ë‹ˆë‹¤. ì¡°ê¸ˆ ìŠ¤í¬í•˜ê² ìŠµë‹ˆë‹¤:\n\nì´ì „ì˜ \"ë‹¨ê³„ 5\"ë¥¼ ë³´ë©´ ì¸í”„ë¼ë¥¼ ë°°í¬í•˜ê¸° ìœ„í•´ \"ìƒë‹¹íˆ ë§ì€\" ëª…ë ¹ì„ ì‹¤í–‰í•´ì•¼ í•œë‹¤ëŠ” ê²ƒ ê°™ì£ ? ê·¸ëŸ°ë° ë§Œì•½ ì›¹ì‚¬ì´íŠ¸ì— ì´ë ¥ì„œì˜ ìƒˆ ë²„ì „ì„ ì—…ë¡œë“œí•˜ë ¤ë©´ ì–´ë–¨ê¹Œìš”? ìƒˆ ë²„ì „ì„ ì—…ë¡œë“œí•˜ë ¤ë©´ AWS ì½˜ì†”ì— ë¡œê·¸ì¸í•´ì•¼ í•©ë‹ˆë‹¤ (ë˜ëŠ” aws-clië¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤)... ì–´ì°Œ ë³´ë©´ ê·¸ë ‡ê²Œ í¸ë¦¬í•˜ì§€ ì•Šì„ ê±°ì˜ˆìš”.\n\n\n\në‹¤ìŒ ê¸°ì‚¬ì—ì„œëŠ” GitHub Actionsì—ì„œ ëª¨ë“  ì´ëŸ¬í•œ ë‹¨ê³„ë¥¼ ìë™í™”í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ ë“œë¦´ ê²ƒì´ê¸° ë•Œë¬¸ì— ê¸°ëŒ€í•´ ì£¼ì„¸ìš”. ë‹¤ìŒ ê¸°ì‚¬ì—ì„œëŠ” ë˜í•œ íŒŒì´í”„ë¼ì¸ì— ìš°ë¦¬ì˜ ë¹„ìš©ì„ ì œì–´í•˜ê¸° ìœ„í•œ ğŸ’°infracostğŸ’° í†µí•©ì— ê´€í•œ 'ë³´ë„ˆìŠ¤' ì„¹ì…˜ì„ ê³µìœ í•  ì˜ˆì •ì´ì—ìš”. ìì„¸í•œ ë‚´ìš©ì„ ë” ë‹¤ë£¨ê² ì§€ë§Œ, ì´ëŠ” ìš°ë¦¬ ì¸í”„ë¼ ë¹„ìš©ì„ ê´€ë¦¬í•˜ëŠ” ë° ë§¤ìš° ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤. ê³„ì† ì§€ì¼œë³´ì„¸ìš”! ğŸ˜‰","ogImage":{"url":"/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_0.png"},"coverImage":"/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_0.png","tag":["Tech"],"readingTime":9},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003eì•ˆë…•í•˜ì„¸ìš”! ğŸ‘‹ ì—¬ëŸ¬ë¶„! ì˜¤ëœë§Œì´ì£ . ì—¬ê¸°ì— ìœ ìš©í•œ(ì•„ë‹ˆë©´ í¥ë¯¸ë¡œìš´?) ê¸°ì‚¬ ëª‡ ê°œë¥¼ ì˜¬ë¦¬ê³  ì‹¶ë‹¤ê³  ìƒê°í•œ ì§€ ì˜¤ë˜ë˜ì—ˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë° ì¢‹ê±°ë‚˜ ìœ ìš©í•œ ì•„ì´ë””ì–´ê°€ ìƒê°ë‚˜ì§€ ì•Šì•˜ì–´ìš”. ëª‡ ì£¼ ì „ ë‚˜ë¥¼ ìœ„í•´ í•œ ì‘ì—…ì„ ë¬¸ì„œí™”í•˜ëŠ” ì•„ì´ë””ì–´ë¥¼ ë§Œë‚¬ëŠ”ë°ìš”: ì´ë ¥ì„œì˜ HTML ë²„ì „ì„ AWSì— Terraformê³¼ GitHub Actionsì„ í†µí•´ ë°°í¬(ìë™í™”)í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ìš”ì¦˜ì—ëŠ” ì´ëŸ° ê¸°ìˆ ì„ ì´ë ¥ì„œì— ë„£ëŠ” ê²ƒì´ í¥ë¯¸ë¡œìš¸ ê²ƒ ê°™ì•„ìš”. ê·¼ë° ì´ë ¥ì„œ ì•ˆì— ê·¸ëŸ° ê¸°ìˆ ì„ ë³´ì—¬ì£¼ë©´ ì–´ë•Œìš”? ğŸ˜œ\u003c/p\u003e\n\u003cp\u003eì´ëŸ° ì‘ì—…ì„ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” ë§ì€ ë¹„ë””ì˜¤/íŠœí† ë¦¬ì–¼ì€ AWS ì½˜ì†”ì—ì„œ \"í´ë¦­ ë‹¨ê³„ë³„\"ë¡œ ì§„í–‰í•˜ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì €ëŠ” Terraform + GithubActions ë°©ë²•ì„ ì†Œê°œí•  ê±°ì—ìš”, ë” í¥ë¯¸ë¡œìš¸ ê²ƒ ê°™ë‹¤ê³  ë´…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ê¸€ì€ ë‘ í¸ ì¤‘ ì²« ë²ˆì§¸ ì…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ì´ ì§€ì—­ (HTML í˜•ì‹)ìœ¼ë¡œ ë°°í¬ëœ ì´ë ¥ì„œë¥¼ AWS(S3)ì— ë³´ê´€í•˜ê³  \u003ca href=\"https://antonirs.com\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://antonirs.com\u003c/a\u003e ê°™ì€ URLì„ í†µí•´ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ë°©ë²•ì„ ë‹¨ê³„ë³„ë¡œ ì•ˆë‚´í•  ê±°ì—ìš”. ê·¸ë¦¬ê³  ë˜í•œ ë§¤ í‘¸ì‹œë§ˆë‹¤ ìƒˆ ë²„ì „ì„ ìë™ìœ¼ë¡œ ë°°í¬í•˜ëŠ” âš™ï¸GitHub Actions íŒŒì´í”„ë¼ì¸âš™ï¸ ë„ ì„¤ì •í•  ê±°ì—ìš”. ì´ ìë™í™” ë¶€ë¶„ì€ ì´ ì²« ë²ˆì§¸ ê¸€ì—ì„œ ë‹¤ë£¨ì§€ ì•Šê³  ë‘ ë²ˆì§¸ ê¸€ì—ì„œ ë‹¤ë¤„ìš”.\u003c/p\u003e\n\u003cp\u003eì´ ê¸€ì„ ë”°ë¼ê°€ëŠ” ë™ì•ˆ ì œ ê°œì¸ ì´ë ¥ì„œ ì €ì¥ì†Œì—ì„œ ëª¨ë“  ì†ŒìŠ¤ ì½”ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”. ì¦ê²¨ë³´ì„¸ìš”!\u003c/p\u003e\n\u003ch1\u003eì¸í”„ë¼ êµ¬ì¡° ì´í•´í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_0.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003eìš°ë¦¬ê°€ êµ¬ì¶•í•  ë‚´ìš©ì„ í¬ê²Œ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤. ì²« ë²ˆì§¸ ê¸°ì‚¬ì—ì„œ Terraformì„ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ë¥¼ êµ¬ì¶•í•˜ê³  ì—°ê²°í•˜ë©° í•¨ê»˜ ì‘ë™ì‹œí‚¤ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì•„í‚¤í…ì²˜ëŠ” ì „í˜€ ë³µì¡í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, ëª¨ë‘ êµ¬ì¶•í•˜ê¸° ìœ„í•´ AWSì˜ \"ë‹¨ì§€\" 4ê°€ì§€ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì´ì „ ìš”êµ¬ ì‚¬í•­\u003c/h1\u003e\n\u003cp\u003eì¼í•  ë•Œ í•„ìš”í•œ ëª‡ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eAWS ê³„ì •. ê½¤ ëª…ë°±í•œ ğŸ¤·ğŸ¼â€â™‚ï¸ ë‹¹ì—°í•˜ì§€ë§Œ í•„ìˆ˜ì…ë‹ˆë‹¤. AWSëŠ” ì´ ë¬¸ì„œì—ì„œ í•œ ë‹¨ê³„ì”© ì•ˆë‚´í•˜ì—¬ ê³„ì •ì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eTerraform CLI ì„¤ì¹˜. í„°ë¯¸ë„ì— terraform CLIê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. Hashicorpì—ì„œ ì„¤ì¹˜ ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eë“±ë¡ëœ ë„ë©”ì¸. ì´ ë¬¸ì„œì—ì„œëŠ” êµ¬ë§¤ ë° AWSì—ì„œ ì²˜ë¦¬ëœ ë„ë©”ì¸ì„ ê°€ì§€ê³  ìˆë‹¤ê³  ê°€ì •í•˜ì§€ë§Œ, ë°˜ë“œì‹œ ê·¸ë ‡ê²Œ í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eì´ë ¥ì„œì˜ HTML ë²„ì „. S3 ë²„í‚·ì— ì €ì¥ë˜ê³  CloudFrontë¥¼ í†µí•´ ì œê³µë  ê²ƒì…ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch1\u003eì¼í•˜ëŸ¬ ê°€ë³¼ê¹Œìš” ğŸ’ªğŸ»\u003c/h1\u003e\n\u003cp\u003eì €ì˜ ì €ì¥ì†Œì—ì„œ ì™„ì „í•œ ì‘ë™ ì†”ë£¨ì…˜ì„ ì œê³µë°›ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ğŸ‘€, ë‹¨ê³„ë³„ë¡œ ìì„¸íˆ ì„¤ëª…í•˜ì§€ëŠ” ì•Šê² ì§€ë§Œ ê° ë¶€ë¶„ì˜ ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œì— ëŒ€í•´ ì£¼ì„ì„ ë‹¬ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eë‹¨ê³„ 0: ë„ë©”ì¸ êµ¬ë§¤ ë° í˜¸ìŠ¤íŒ… ì¡´ ìƒì„±\u003c/h2\u003e\n\u003cp\u003eë„ë©”ì¸ (ë‚˜ì˜ ê²½ìš°ì—ëŠ” antonirs.com)ì˜ êµ¬ë§¤ì™€ í˜¸ìŠ¤íŒ… ì˜ì—­ ìƒì„±ì€ Terraformìœ¼ë¡œ ë§Œë“¤ì§€ ëª»í•˜ëŠ” ìœ ì¼í•œ ë¶€ë¶„ì´ë©°, ëŒ€ì‹  AWS ì½˜ì†”ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë‹¤ë¥¸ ì œê³µì—…ì²´ì— ë„ë©”ì¸ì„ í˜¸ìŠ¤íŒ…í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ì¶”ê°€ êµ¬ì„±ì´ í•„ìš”í•  ìˆ˜ ìˆì§€ë§Œ (ê·¸ ì™¸ì—ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤), ì´ ê²½ìš°ì—ëŠ” AWSì—ì„œ í˜¸ìŠ¤íŒ…ë˜ëŠ” ê²½ìš°ë¥¼ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eë‹¨ê³„ 1: Terraformìœ¼ë¡œ ì‹œì‘í•˜ê¸°. AWS ì œê³µì ì„¤ì •\u003c/h2\u003e\n\u003cp\u003eTerraform í”„ë¡œì íŠ¸ì˜ ì‹œì‘ì ì€ ì¼ë°˜ì ìœ¼ë¡œ AWS ì œê³µì ë° ì‚¬ìš©í•  ë°±ì—”ë“œ êµ¬ì„±ì„ ì„¤ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Terraformì—ê²Œ AWSì™€ì˜ ì¸ì¦ ë°©ë²•, ë¦¬ì†ŒìŠ¤ë¥¼ ë°°í¬í•  ì§€ì—­ ë° ì¸í”„ë¼ì˜ tfstateë¥¼ ì €ì¥í•  ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤. ì´ êµ¬ì„±ì„ provider.tf íŒŒì¼ì— ë„£ì–´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eprovider \u003cspan class=\"hljs-string\"\u003e\"aws\"\u003c/span\u003e {\n  region = \u003cspan class=\"hljs-string\"\u003e\"us-east-1\"\u003c/span\u003e\n  access_key = \u003cspan class=\"hljs-string\"\u003e\"ë‚´ ì•¡ì„¸ìŠ¤ í‚¤\"\u003c/span\u003e\n  secret_key = \u003cspan class=\"hljs-string\"\u003e\"ë‚´ ì‹œí¬ë¦¿ ì•¡ì„¸ìŠ¤ í‚¤\"\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì•¡ì„¸ìŠ¤ í‚¤ì™€ ì‹œí¬ë¦¿ í‚¤ëŠ” ì ˆëŒ€ë¡œ ë¦¬í¬ì§€í† ë¦¬ì— í‘¸ì‹œí•´ì„œëŠ” ì•ˆ ë˜ëŠ” ê²ƒì„ ì—¼ë‘ì— ë‘ì„¸ìš”. ì—¬ê¸°ì„œ ë³´ì—¬ì£¼ê³  ìˆì§€ë§Œ, ë‹¤ìŒ ê¸€ì—ì„œ ê¹ƒí—ˆë¸Œ ë¦¬í¬ì§€í† ë¦¬ì˜ ì‹œí¬ë¦¿ êµ¬ì„±ìœ¼ë¡œ ì´ë™í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤„ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë°±ì—”ë“œ.tfì— ëŒ€í•´ ë‹¤ìŒê³¼ ê°™ì´ ë³´ì´ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì¸í”„ë¼ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ S3ë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eterraform {\n  backend \u003cspan class=\"hljs-string\"\u003e\"s3\"\u003c/span\u003e {\n    bucket         = \u003cspan class=\"hljs-string\"\u003e\"antoni-tf-state\"\u003c/span\u003e\n    key            = \u003cspan class=\"hljs-string\"\u003e\"personal-portfolio/terraform.tfstate\"\u003c/span\u003e\n    region         = \u003cspan class=\"hljs-string\"\u003e\"us-east-1\"\u003c/span\u003e\n    encrypt        = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eStep 2: S3 ë° ì•¡ì„¸ìŠ¤ ì •ì±… ìƒì„±\u003c/h2\u003e\n\u003cp\u003eì—¬ê¸°ì„œëŠ” antoni-html-cvë¼ëŠ” S3 ë²„í‚·ì„ ìƒì„±í•˜ê³ , ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ìš°ë¦¬ê°€ ì •ì˜í•˜ëŠ” ì •ì±…ì¸ s3_policyì…ë‹ˆë‹¤. Cloudfrontì—ì„œ ì˜¤ëŠ” ìš”ì²­ì„ ì œì™¸í•˜ê³  ëª¨ë“  ìˆ˜ì‹  íŠ¸ë˜í”½ì„ ì°¨ë‹¨í•  ê²ƒì…ë‹ˆë‹¤ â›”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eresource \u003cspan class=\"hljs-string\"\u003e\"aws_s3_bucket\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"personal_portfolio_bucket\"\u003c/span\u003e {\n  bucket = \u003cspan class=\"hljs-string\"\u003e\"antoni-html-cv\"\u003c/span\u003e\n}\n\ndata \u003cspan class=\"hljs-string\"\u003e\"aws_caller_identity\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"current\"\u003c/span\u003e {}\n\ndata \u003cspan class=\"hljs-string\"\u003e\"aws_iam_policy_document\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"s3_policy\"\u003c/span\u003e {\n  statement {\n    sid       = \u003cspan class=\"hljs-string\"\u003e\"AllowCloudFrontServicePrincipal\"\u003c/span\u003e\n    effect    = \u003cspan class=\"hljs-string\"\u003e\"Allow\"\u003c/span\u003e\n    principals {\n      type        = \u003cspan class=\"hljs-string\"\u003e\"Service\"\u003c/span\u003e\n      identifiers = [\u003cspan class=\"hljs-string\"\u003e\"cloudfront.amazonaws.com\"\u003c/span\u003e]\n    }\n    actions   = [\u003cspan class=\"hljs-string\"\u003e\"s3:GetObject\"\u003c/span\u003e]\n    resources = [\u003cspan class=\"hljs-string\"\u003e\"${aws_s3_bucket.personal_portfolio_bucket.arn}/*\"\u003c/span\u003e]\n    condition {\n      test     = \u003cspan class=\"hljs-string\"\u003e\"StringEquals\"\u003c/span\u003e\n      variable = \u003cspan class=\"hljs-string\"\u003e\"AWS:SourceArn\"\u003c/span\u003e\n      values   = [\u003cspan class=\"hljs-string\"\u003e\"arn:aws:cloudfront::${data.aws_caller_identity.current.account_id}:distribution/${aws_cloudfront_distribution.portfolio_distribution.id}\"\u003c/span\u003e]\n    }\n  }\n}\n\nresource \u003cspan class=\"hljs-string\"\u003e\"aws_s3_bucket_policy\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"s3_policy\"\u003c/span\u003e {\n  bucket = aws_s3_bucket.\u003cspan class=\"hljs-property\"\u003epersonal_portfolio_bucket\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e\n  policy = data.\u003cspan class=\"hljs-property\"\u003eaws_iam_policy_document\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003es3_policy\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€ ì •ì±…ì„ í†µí•´ S3ì— ì§ì ‘ ì•¡ì„¸ìŠ¤í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³  Cloudfrontê°€ ë‚´ìš©ì„ ê°€ì ¸ì˜¤ëŠ” ê²ƒì„ í—ˆìš©í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤ (ê³ ê°ì—ê²Œ ì„œë¹„ìŠ¤í•˜ê¸° ìœ„í•´). ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²•ë„ ìˆì§€ë§Œ, ì €ëŠ” í˜„ì¬ AWSê°€ ê°€ì¥ ê¶Œì¥í•˜ëŠ” Origin Access Control ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤. OACì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” \u003ca href=\"%EB%A7%81%ED%81%AC\"\u003eì—¬ê¸°\u003c/a\u003eì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eë‹¨ê³„ 3: SSL ì¸ì¦ì„œë¡œ CloudFront ë°°í¬ ì„¤ì •í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eCloudFrontëŠ” S3ì—ì„œ ì •ì  ì½˜í…ì¸ ë¥¼ ì œê³µí•˜ëŠ” ë° ì‚¬ìš©í•  AWS ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. CloudFrontëŠ” CDNìœ¼ë¡œ ì‘ë™í•˜ì—¬ ì „ ì„¸ê³„ì˜ ì—¬ëŸ¬ ìœ„ì¹˜(ì—£ì§€ ìœ„ì¹˜)ì— ì½˜í…ì¸ ë¥¼ ìºì‹œí•˜ì—¬ ë” ë¹ ë¥´ê²Œ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ë˜í•œ, CloudFrontë¥¼ ì‚¬ìš©í•˜ë©´ ë°°í¬ì— SSL/TLS ì¸ì¦ì„œë¥¼ ì²¨ë¶€í•˜ì—¬ ì›¹ ì‚¬ì´íŠ¸ ì—°ê²°ì„ HTTPSë¡œ ê°•ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eresource \u003cspan class=\"hljs-string\"\u003e\"aws_cloudfront_origin_access_control\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"portfolio_oac\"\u003c/span\u003e {\n  name        = \u003cspan class=\"hljs-string\"\u003e\"OAC for Portfolio Website\"\u003c/span\u003e\n  description = \u003cspan class=\"hljs-string\"\u003e\"OAC for antonirs portfolio website\"\u003c/span\u003e\n  origin_access_control_origin_type = \u003cspan class=\"hljs-string\"\u003e\"s3\"\u003c/span\u003e\n\n  signing_behavior = \u003cspan class=\"hljs-string\"\u003e\"always\"\u003c/span\u003e\n  signing_protocol = \u003cspan class=\"hljs-string\"\u003e\"sigv4\"\u003c/span\u003e\n}\n\nresource \u003cspan class=\"hljs-string\"\u003e\"aws_cloudfront_distribution\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"portfolio_distribution\"\u003c/span\u003e {\n  origin {\n    domain_name = aws_s3_bucket.\u003cspan class=\"hljs-property\"\u003epersonal_portfolio_bucket\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebucket_regional_domain_name\u003c/span\u003e\n    origin_id   = \u003cspan class=\"hljs-string\"\u003e\"S3-antonirs-portfolio\"\u003c/span\u003e\n    origin_access_control_id = aws_cloudfront_origin_access_control.\u003cspan class=\"hljs-property\"\u003eportfolio_oac\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e\n  }\n\n  enabled = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  comment = \u003cspan class=\"hljs-string\"\u003e\"Distribution for the antonirs.com static website\"\u003c/span\u003e\n  aliases = [\u003cspan class=\"hljs-string\"\u003e\"antonirs.com\"\u003c/span\u003e]\n  default_root_object = \u003cspan class=\"hljs-string\"\u003e\"index.html\"\u003c/span\u003e\n\n  default_cache_behavior {\n    allowed_methods  = [\u003cspan class=\"hljs-string\"\u003e\"GET\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"HEAD\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"OPTIONS\"\u003c/span\u003e]\n    cached_methods   = [\u003cspan class=\"hljs-string\"\u003e\"GET\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"HEAD\"\u003c/span\u003e]\n\n    target_origin_id = \u003cspan class=\"hljs-string\"\u003e\"S3-antonirs-portfolio\"\u003c/span\u003e\n\n    forwarded_values {\n      query_string = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n      cookies {\n        forward = \u003cspan class=\"hljs-string\"\u003e\"none\"\u003c/span\u003e\n      }\n    }\n\n    viewer_protocol_policy = \u003cspan class=\"hljs-string\"\u003e\"redirect-to-https\"\u003c/span\u003e\n    min_ttl                = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n    default_ttl            = \u003cspan class=\"hljs-number\"\u003e86400\u003c/span\u003e\n    max_ttl                = \u003cspan class=\"hljs-number\"\u003e31536000\u003c/span\u003e\n  }\n\n  viewer_certificate {\n    acm_certificate_arn = aws_acm_certificate.\u003cspan class=\"hljs-property\"\u003epersonal_web_portfolio_cert\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003earn\u003c/span\u003e\n    ssl_support_method  = \u003cspan class=\"hljs-string\"\u003e\"sni-only\"\u003c/span\u003e\n    minimum_protocol_version = \u003cspan class=\"hljs-string\"\u003e\"TLSv1.2_2021\"\u003c/span\u003e\n  }\n\n  restrictions {\n    geo_restriction {\n      restriction_type = \u003cspan class=\"hljs-string\"\u003e\"none\"\u003c/span\u003e\n    }\n  }\n\n  tags = {\n    \u003cspan class=\"hljs-title class_\"\u003eEnvironment\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"production\"\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì—¬ê¸°ì—ëŠ” ë§ì€ êµ¬ì„±ì´ í¬í•¨ë˜ì–´ ìˆì§€ë§Œ ì£¼ìš” ë¶€ë¶„ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n-\u003ccode\u003e ìš°ë¦¬ëŠ” originì„ ì •ì˜í•˜ì—¬ CloudFrontì—ê²Œ ë°ì´í„°ë¥¼ ì–´ë””ì„œ ê°€ì ¸ì™€ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤(S3ì—ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤). -\u003c/code\u003e viewer_certificate ì„¹ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë¸Œë¼ìš°ì €ì™€ CloudFront ê°„ì˜ ì•ˆì „í•œ ì—°ê²°(HTTPS)ì„ ì„¤ì •í•˜ëŠ” SSL ì¸ì¦ì„œë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\nì¸ì¦ì„œë¥¼ ìƒì„±í•˜ëŠ” ê´€ë ¨ ëª…ë ¹ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ acm.tfì—ì„œ êµ¬ì„±ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eresource \u003cspan class=\"hljs-string\"\u003e\"aws_acm_certificate\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"personal_web_portfolio_cert\"\u003c/span\u003e {\n  domain_name       = \u003cspan class=\"hljs-string\"\u003e\"antonirs.com\"\u003c/span\u003e\n  validation_method = \u003cspan class=\"hljs-string\"\u003e\"DNS\"\u003c/span\u003e\n\n  lifecycle {\n    create_before_destroy = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  }\n}\n\nresource \u003cspan class=\"hljs-string\"\u003e\"aws_route53_record\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"cert_validation\"\u003c/span\u003e {\n  zone_id = data.\u003cspan class=\"hljs-property\"\u003eaws_route53_zone\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emy_personal_zone\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ezone_id\u003c/span\u003e\n  name    = \u003cspan class=\"hljs-title function_\"\u003etolist\u003c/span\u003e(aws_acm_certificate.\u003cspan class=\"hljs-property\"\u003epersonal_web_portfolio_cert\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edomain_validation_options\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eresource_record_name\u003c/span\u003e\n  type    = \u003cspan class=\"hljs-title function_\"\u003etolist\u003c/span\u003e(aws_acm_certificate.\u003cspan class=\"hljs-property\"\u003epersonal_web_portfolio_cert\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edomain_validation_options\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eresource_record_type\u003c/span\u003e\n  records = [\u003cspan class=\"hljs-title function_\"\u003etolist\u003c/span\u003e(aws_acm_certificate.\u003cspan class=\"hljs-property\"\u003epersonal_web_portfolio_cert\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edomain_validation_options\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eresource_record_value\u003c/span\u003e]\n  ttl     = \u003cspan class=\"hljs-number\"\u003e60\u003c/span\u003e\n}\n\nresource \u003cspan class=\"hljs-string\"\u003e\"aws_acm_certificate_validation\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"cert_validation\"\u003c/span\u003e {\n  certificate_arn         = aws_acm_certificate.\u003cspan class=\"hljs-property\"\u003epersonal_web_portfolio_cert\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003earn\u003c/span\u003e\n  validation_record_fqdns = [aws_route53_record.\u003cspan class=\"hljs-property\"\u003ecert_validation\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003efqdn\u003c/span\u003e]\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì¸ì¦ì„œ êµ¬ì„± ì¤‘ ì¤‘ìš”í•œ ë¶€ë¶„ì€ aws_acm_certificate_validation ì„¹ì…˜ì…ë‹ˆë‹¤. ì´ ì¸ì¦ì„œë¥¼ antonirs.comì— ì ‘ì†í•  ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•´ Route53ì— ëŒ€í•´ ì´ ì¸ì¦ì„œë¥¼ ê²€ì¦í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eë‹¨ê³„ 4: Route 53 ì„¤ì •\u003c/h2\u003e\n\u003cp\u003eì¸í”„ë¼ìŠ¤íŠ¸ëŸ­ì²˜ì—ì„œë§í–ˆë˜ ê²ƒì²˜ëŸ¼ DNS ê´€ë¦¬ë¥¼ ìœ„í•´ Route 53ì„ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. ê¸€ì˜ ì‹œì‘ì—ì„œ ë§í–ˆë“¯ì´ ì´ë¯¸ ë„ë©”ì¸(ë‚˜ì˜ ê²½ìš°ì—” antonirs.com)ê³¼ AWSì— ìƒì„±ëœ í˜¸ìŠ¤íŒ…ì¡´ì´ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ êµ¬ì„±(route53.tf)ì„ ë”°ë¼ í˜¸ìŠ¤íŒ…ì¡´ ë‚´ì— A ë ˆì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , CloudFront ë°°í¬ë¡œ ê°€ë¦¬í‚¤ëŠ” ë³„ì¹­ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003edata \u003cspan class=\"hljs-string\"\u003e\"aws_route53_zone\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"my_personal_zone\"\u003c/span\u003e {\n  name = \u003cspan class=\"hljs-string\"\u003e\"antonirs.com.\"\u003c/span\u003e\n}\n\nresource \u003cspan class=\"hljs-string\"\u003e\"aws_route53_record\"\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"www\"\u003c/span\u003e {\n  zone_id = data.\u003cspan class=\"hljs-property\"\u003eaws_route53_zone\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emy_personal_zone\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e\n  name    = \u003cspan class=\"hljs-string\"\u003e\"antonirs.com\"\u003c/span\u003e\n  type    = \u003cspan class=\"hljs-string\"\u003e\"A\"\u003c/span\u003e\n\n  alias {\n    name                   = aws_cloudfront_distribution.\u003cspan class=\"hljs-property\"\u003eportfolio_distribution\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edomain_name\u003c/span\u003e\n    zone_id                = aws_cloudfront_distribution.\u003cspan class=\"hljs-property\"\u003eportfolio_distribution\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ehosted_zone_id\u003c/span\u003e\n    evaluate_target_health = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eë‹¨ê³„ 5: ëª¨ë“  ê²ƒì´ ì‘ë™í•˜ëŠ” ê²ƒì„ í™•ì¸\u003c/h2\u003e\n\u003cp\u003eì§€ê¸ˆê¹Œì§€ ë³¸ ê²ƒìœ¼ë¡œ ì¶©ë¶„íˆ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ \"í•œ ë²ˆì˜ í´ë¦­\"ìœ¼ë¡œ ëª¨ë“  ì¸í”„ë¼ë¥¼ êµ¬ì¶•í•˜ì—¬ \u003ca href=\"https://antonirs.com\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://antonirs.com\u003c/a\u003e (ì œ ê²½ìš°)ì„ ë°©ë¬¸í•˜ì—¬ ì´ë ¥ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì¢‹ì•„ìš”, ì´ì¤‘ ë”°ì˜´í‘œë¥¼ ì¡°ê¸ˆ í’€ì–´ë³¼ê²Œìš”. ëª¨ë“  í…Œë¼í¼ íŒŒì¼ì´ ì¤€ë¹„ëœ ìƒíƒœì—ì„œ ì´ì œ í•´ì•¼ í•  ì¼ì€ í„°ë¯¸ë„ì„ ì—´ê³  ë‹¤ìŒì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eterraform init ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì˜ì¡´ì„±ì„ ë‹¤ìš´ë¡œë“œí•˜ê³  ê°„ë‹¨íˆ ë§í•´ì„œ AWSì™€ ìƒí˜¸ ì‘ìš©í•  ìˆ˜ ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eterraform plan ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì‹¤ì œ ì¸í”„ë¼ì— ë°˜ì˜ë˜ì§€ ì•Šì€ tf íŒŒì¼ì— ìˆëŠ” ëª¨ë“  ë³€ê²½ ì‚¬í•­ì„ ì¶œë ¥í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eterraform apply ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì¸í”„ë¼ì—ì„œ ì‹¤ì œ ë³€ê²½ ì‚¬í•­ì„ ë§Œë“­ë‹ˆë‹¤. Terraform íŒŒì¼ì— êµ¬ì„±ëœ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eì´ë ¥ì„œì˜ HTML ë²„ì „ì„ ìƒì„±í•œ ë²„í‚·ì— ì—…ë¡œë“œí•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eë°©ë¬¸(ì œ ê²½ìš°) \u003ca href=\"https://antonirs.com\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://antonirs.com\u003c/a\u003e ê·¸ë¦¬ê³ ... ì¦ê¸°ì„¸ìš” ğŸ˜œ ğŸš€\u003c/li\u003e\n\u003c/ol\u003e\n\u003cimg src=\"/assets/img/2024-05-15-GetyourResumeTerraformedinAWSI_1.png\"\u003e\n\u003ch1\u003eë§ˆë¬´ë¦¬ ë° ë‹¤ìŒ ë‹¨ê³„\u003c/h1\u003e\n\u003cp\u003eì™€ìš°! ì—¬ê¸°ê¹Œì§€ ëª¨ë‘ ì½ì€ ê²ƒì„ ë³´ë‹ˆ ë§¤ìš° ê¸°ë»ìš”ğŸŠ! í•˜í•˜. í•˜ì§€ë§Œ ê¸°ì¨ì€ ì—¬ê¸°ê¹Œì§€ê°€ ì•„ë‹™ë‹ˆë‹¤. ë‹¤ìŒ ê¸°ì‚¬ì—ì„œ ë” í¥ë¯¸ë¡œì›Œì§‘ë‹ˆë‹¤. ì¡°ê¸ˆ ìŠ¤í¬í•˜ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003eì´ì „ì˜ \"ë‹¨ê³„ 5\"ë¥¼ ë³´ë©´ ì¸í”„ë¼ë¥¼ ë°°í¬í•˜ê¸° ìœ„í•´ \"ìƒë‹¹íˆ ë§ì€\" ëª…ë ¹ì„ ì‹¤í–‰í•´ì•¼ í•œë‹¤ëŠ” ê²ƒ ê°™ì£ ? ê·¸ëŸ°ë° ë§Œì•½ ì›¹ì‚¬ì´íŠ¸ì— ì´ë ¥ì„œì˜ ìƒˆ ë²„ì „ì„ ì—…ë¡œë“œí•˜ë ¤ë©´ ì–´ë–¨ê¹Œìš”? ìƒˆ ë²„ì „ì„ ì—…ë¡œë“œí•˜ë ¤ë©´ AWS ì½˜ì†”ì— ë¡œê·¸ì¸í•´ì•¼ í•©ë‹ˆë‹¤ (ë˜ëŠ” aws-clië¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤)... ì–´ì°Œ ë³´ë©´ ê·¸ë ‡ê²Œ í¸ë¦¬í•˜ì§€ ì•Šì„ ê±°ì˜ˆìš”.\u003c/p\u003e\n\u003cp\u003eë‹¤ìŒ ê¸°ì‚¬ì—ì„œëŠ” GitHub Actionsì—ì„œ ëª¨ë“  ì´ëŸ¬í•œ ë‹¨ê³„ë¥¼ ìë™í™”í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ ë“œë¦´ ê²ƒì´ê¸° ë•Œë¬¸ì— ê¸°ëŒ€í•´ ì£¼ì„¸ìš”. ë‹¤ìŒ ê¸°ì‚¬ì—ì„œëŠ” ë˜í•œ íŒŒì´í”„ë¼ì¸ì— ìš°ë¦¬ì˜ ë¹„ìš©ì„ ì œì–´í•˜ê¸° ìœ„í•œ ğŸ’°infracostğŸ’° í†µí•©ì— ê´€í•œ 'ë³´ë„ˆìŠ¤' ì„¹ì…˜ì„ ê³µìœ í•  ì˜ˆì •ì´ì—ìš”. ìì„¸í•œ ë‚´ìš©ì„ ë” ë‹¤ë£¨ê² ì§€ë§Œ, ì´ëŠ” ìš°ë¦¬ ì¸í”„ë¼ ë¹„ìš©ì„ ê´€ë¦¬í•˜ëŠ” ë° ë§¤ìš° ìœ ìš©í•œ ë„êµ¬ì…ë‹ˆë‹¤. ê³„ì† ì§€ì¼œë³´ì„¸ìš”! ğŸ˜‰\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-15-GetyourResumeTerraformedinAWSI"},"buildId":"Rv-NbbtWUaja2joH5WkO_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>