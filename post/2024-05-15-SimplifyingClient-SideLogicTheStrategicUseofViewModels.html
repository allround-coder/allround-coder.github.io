<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¡œì§ ê°„ì†Œí™” ë·° ëª¨ë¸ì˜ ì „ëµì  í™œìš© | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¡œì§ ê°„ì†Œí™” ë·° ëª¨ë¸ì˜ ì „ëµì  í™œìš© | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¡œì§ ê°„ì†Œí™” ë·° ëª¨ë¸ì˜ ì „ëµì  í™œìš© | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels" data-gatsby-head="true"/><meta name="twitter:title" content="í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¡œì§ ê°„ì†Œí™” ë·° ëª¨ë¸ì˜ ì „ëµì  í™œìš© | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-15 02:45" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cd012fc8787133d0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cd012fc8787133d0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/551-3069cf29fe274aab.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-985df180e46efe53.js" defer=""></script><script src="/_next/static/uXJWf9GNc_Ux38RlnQJQc/_buildManifest.js" defer=""></script><script src="/_next/static/uXJWf9GNc_Ux38RlnQJQc/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¡œì§ ê°„ì†Œí™” ë·° ëª¨ë¸ì˜ ì „ëµì  í™œìš©</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¡œì§ ê°„ì†Œí™” ë·° ëª¨ë¸ì˜ ì „ëµì  í™œìš©" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/assets/profile.jpg"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 15, 2024</span><span class="posts_reading_time__f7YPP">5<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><p><img src="/assets/img/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels_0.png" alt="User View Model"/></p>
<p>ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì¢…ì¢… ì„œë²„ì—ì„œ ì§ì ‘ ì‚¬ìš© ê°€ëŠ¥í•œ ë°ì´í„° í‘œí˜„ê³¼ëŠ” ë‹¤ë¥¸ ë°ì´í„° í‘œí˜„ì´ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ì ê°ì²´ì—ëŠ” ì—´ê±°í˜• ì—­í• , ì—´ê±°í˜• ìƒíƒœ, ì´ë¦„ ë“±ì˜ ì†ì„±ì´ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë·°ì—ì„œ ì´ëŸ¬í•œ ì„œë²„ ì¸¡ ëª¨ë¸ì„ ì§ì ‘ ì‚¬ìš©í•˜ë©´ ì¢…ì¢… UI ë¡œì§ ì „ì²´ì— ë¶„ì‚°ëœ ë³µì¡í•œ ë³€í™˜ì„ ìœ ë°œí•©ë‹ˆë‹¤.</p>
<p>ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê° ì—”í‹°í‹°ì— ëŒ€í•œ ë·° ëª¨ë¸ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ì£¼ì¥í•©ë‹ˆë‹¤. ì´ ìº¡ìŠí™”ëŠ” ë°ì´í„° ì²˜ë¦¬ë¥¼ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ì£¼ë©° UIê°€ í•„ìš”í•œ ê²ƒë§Œ ë°›ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë‹¤ìŒì€ UserVmì˜ ê°„ë‹¨í•œ ì‹¤ì œ ì˜ˆì‹œì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> rolesMap = <span class="hljs-title function_">fromBeEnum</span>(<span class="hljs-title class_">UserRoleEnum</span>, {
  <span class="hljs-attr">VIEWER</span>: <span class="hljs-string">&#x27;ë·°ì–´&#x27;</span>,
  <span class="hljs-attr">ADMIN</span>: <span class="hljs-string">&#x27;ê´€ë¦¬ì&#x27;</span>,
  <span class="hljs-attr">SIGNER</span>: <span class="hljs-string">&#x27;ì„œëª…ì&#x27;</span>,
  <span class="hljs-attr">OWNER</span>: <span class="hljs-string">&#x27;ì†Œìœ ì&#x27;</span>
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserVm</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">dto: User</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">displayName</span> = dto.<span class="hljs-property">name</span> || dto.<span class="hljs-property">email</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span> = dto.<span class="hljs-property">status</span> === <span class="hljs-title class_">UserStatusEnum</span>.<span class="hljs-property">ACTIVE</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isServiceAccount</span> = dto.<span class="hljs-property">type</span> === <span class="hljs-title class_">UserTypeEnum</span>.<span class="hljs-property">SERVICE_ACCOUNT</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isViewer</span> = dto.<span class="hljs-property">role</span> === <span class="hljs-title class_">UserRoleEnum</span>.<span class="hljs-property">VIEWER</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isOwner</span> = dto.<span class="hljs-property">role</span> === <span class="hljs-title class_">UserRoleEnum</span>.<span class="hljs-property">OWNER</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isActiveAdmin</span> = dto.<span class="hljs-property">isAdmin</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">isActive</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">typeLabel</span> = dto.<span class="hljs-property">isServiceAccount</span> ? <span class="hljs-string">&#x27;ì„œë¹„ìŠ¤ ê³„ì •&#x27;</span> : <span class="hljs-string">&#x27;ì‚¬ìš©ì&#x27;</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">roleLabel</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">userRoleToLabel</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hasAddQuorum</span> = <span class="hljs-title function_">hasQuorum</span>(dto, <span class="hljs-string">&#x27;add&#x27;</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">hasRemoveQuorum</span> = <span class="hljs-title function_">hasQuorum</span>(dto, <span class="hljs-string">&#x27;remove&#x27;</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPendingApproval</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">hasAddQuorum</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">hasRemoveQuorum</span>;
  }
  
  private <span class="hljs-title function_">userRoleToLabel</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> rolesMap[<span class="hljs-variable language_">this</span>.<span class="hljs-property">dto</span>.<span class="hljs-property">role</span>] || <span class="hljs-string">&#x27;ì•Œ ìˆ˜ ì—†ìŒ&#x27;</span>;
  }
}
</code></pre>
<p>getUser ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ë°›ìœ¼ë©´ UserVm í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ë‹µì— ë§ëŠ” ìƒˆ ì‚¬ìš©ì ë·° ëª¨ë¸ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ ì¶”ìƒí™”ë¥¼ í†µí•´ ê¹”ë”í•˜ê³  ìœ ì§€ ê´€ë¦¬ ê°€ëŠ¥í•œ ì½”ë“œ êµ¬ì¡°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { injectQuery, mapResultData } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@ngneat/query&#x27;</span>;

@<span class="hljs-title class_">Injectable</span>({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">&#x27;root&#x27;</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  private query = <span class="hljs-title function_">injectQuery</span>();
  private client = <span class="hljs-title function_">injectApiClient</span>();

  <span class="hljs-title function_">getUser</span>(<span class="hljs-params">{ vaultId }</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">query</span>({
      <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;user&#x27;</span>],
      <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">getAuthenticatedUser</span>({ vaultId })
      }
    }).<span class="hljs-property">result$</span>.<span class="hljs-title function_">pipe</span>(
      <span class="hljs-title function_">mapResultData</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserVm</span>())
    )
  }
}
</code></pre>
<p>ì´ ì›ì¹™ì€ ì—”í‹°í‹° ë°°ì—´ì„ ë‹¤ë£° ë•Œì—ë„ ë™ì¼í•˜ê²Œ ì ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ ê±°ë˜ê°€ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ëŠ”ì§€ ì‚´í´ë³´ë©´ â€” UI ë³€í™˜ì„ ê±°ì¹˜ëŠ” ì¤‘ìš”í•œ ì—”í‹°í‹°ì¸ ê±°ë˜ì— ëŒ€í•´ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ì§€ì— ëŒ€í•´ ìƒê°í•´ ë³´ì„¸ìš”.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { injectQuery, mapResultData } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@ngneat/query&#x27;</span>;

@<span class="hljs-title class_">Injectable</span>({ <span class="hljs-attr">providedIn</span>: <span class="hljs-string">&#x27;root&#x27;</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionsService</span> {
  private query = <span class="hljs-title function_">injectQuery</span>();
  private client = <span class="hljs-title function_">injectApiClient</span>();

  <span class="hljs-title function_">getTransactions</span>(<span class="hljs-params">{ vaultId }</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">query</span>({
      <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">&#x27;transactions&#x27;</span>],
      <span class="hljs-attr">queryFn</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">getTransactions</span>({ vaultId })
      }
    }).<span class="hljs-property">result$</span>.<span class="hljs-title function_">pipe</span>(
      <span class="hljs-title function_">mapResultData</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-property">transactions</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionVm</span>(t)))
    )
  }
}
</code></pre>
<h1>ë·° ëª¨ë¸ ì‚¬ìš©ì˜ ì´ì </h1>
<h2>ëª…í™•ì„±ê³¼ ì‚¬ìš©ì ì •ì˜</h2>
<p>ë°±ì—”ë“œ ë„¤ì´ë° ê·œì¹™ ë•Œë¬¸ì— ë¨¸ë¦¬ë¥¼ ê¸ëŠ” ìˆœê°„ë“¤ì„ ìš°ë¦¬ ëª¨ë‘ ê²ªì–´ë´¤ì£  ğŸ˜›. ë·° ëª¨ë¸ì€ ì†ì„± ì´ë¦„ì„ ë°”ê¿” ë” ì§ê´€ì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. DTO ì´ë¦„ì´ ì• ë§¤í•  ë•Œ, VMì€ DTOë¥¼ ì§ì ‘ ë³€ê²½í•˜ì§€ ì•Šê³  ë” êµ¬ì²´ì ì¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
<h2>ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„±</h2>
<p>VMs(Visual Models)ì€ ë°±ì—”ë“œ êµ¬ì¡°ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê³  DTO ìŠ¤í‚¤ë§ˆë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìš”êµ¬ì— ë” ì˜ ë§ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ìœ ì—°ì„±ì€ ë‹¤ì–‘í•œ ì‚¬ìš© ì¼€ì´ìŠ¤ì— ì ì‘í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
<h2>ì¤‘ì•™í™”ëœ ìˆ˜ì •</h2>
<p>DTOì— ì¤‘ìš”í•œ ë³€ê²½ì´ ìˆê±°ë‚˜ ì˜ˆê¸°ì¹˜ ëª»í•œ ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš°, ì¡°ì •ì€ ë·° ëª¨ë¸ì—ì„œë§Œ í•˜ë©´ ë˜ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì— ìˆ˜ì •ì„ ë°˜ì˜í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ ì¤‘ì•™í™”ëŠ” ë²„ê·¸ì™€ ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ì„ í¬ê²Œ ì¤„ì—¬ì¤ë‹ˆë‹¤.</p>
<h2>ìº¡ìŠí™”</h2>
<p>ë³€í™˜ ë¡œì§ì„ VM ë‚´ë¶€ë¡œ ìº¡ìŠí™”í•˜ë©´ ì»´í¬ë„ŒíŠ¸ ì „ì²´ì—ì„œì˜ íŒŒì´í”„, ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë° ì—´ê±°í˜•ì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ì¤„ì–´ë“¤ì–´ ë” ê¹¨ë—í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš´ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>ì¬ì‚¬ìš©ì„±</h2>
<p>í•œ ë²ˆ ì •ì˜ëœ View Modelì€ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë‹¤ë¥¸ ë¶€ë¶„ ë˜ëŠ” ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì¬ì‚¬ìš©ì„±ì€ ê°œë°œ ì‹œê°„ì„ í¬ê²Œ ë‹¨ì¶•í•˜ê³  ì˜¤ë¥˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ownerVmì„ ì‚¬ìš©í•˜ëŠ” DeviceVmì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeviceVm</span> {
  <span class="hljs-attr">ownerVm</span>: <span class="hljs-title class_">UserVm</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">device: Device</span>) {
    <span class="hljs-comment">// ...device props</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ownerVm</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserVm</span>(device.<span class="hljs-property">owner</span>);
  }
}
</code></pre>
<p>ì´ ì„¤ì •ì„ ì‚¬ìš©í•˜ë©´ ì¥ì¹˜ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì–´ë–¤ ë¶€ë¶„ì´ë“  UserVmì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í’ë¶€í•œ, ì‚¬ì „ ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>Entity ê°„ ê´€ë ¨ì´ ìˆëŠ” ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ëŠ” ì¡°í•©ëœ VMì—ì„œ í¬ê²Œ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ ì¥ì¹˜ë¥¼ ê°€ì§„ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserWithDevicesVm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">UserVm</span> {
  <span class="hljs-attr">devices</span>: <span class="hljs-title class_">DeviceVm</span>[];

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">user: User, devices: Device[]</span>) {
    <span class="hljs-variable language_">super</span>(user); <span class="hljs-comment">// ê¸°ë³¸ UserVm ì´ˆê¸°í™”</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">devices</span> = devices.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">device</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeviceVm</span>(device));
  }
}

<span class="hljs-comment">// ì„œë¹„ìŠ¤ì—ì„œ</span>
<span class="hljs-keyword">import</span> { intersectResults$ } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@ngneat/query&#x27;</span>;

<span class="hljs-title function_">combineLatest</span>([
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">usersService</span>.<span class="hljs-title function_">getUsers</span>({ vaultId }),
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">devicesService</span>.<span class="hljs-title function_">getDevices</span>({ vaultId })
]).<span class="hljs-title function_">pipe</span>(
  <span class="hljs-title function_">intersectResults$</span>(<span class="hljs-function">(<span class="hljs-params">[users, devices]</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> userDevices = devices.<span class="hljs-title function_">filter</span>(...); 
    <span class="hljs-keyword">return</span> users.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserWithDevicesVm</span>(user, userDevices));
  })
)
</code></pre>
<h1>ì—…ë°ì´íŠ¸ìš© ë·° ëª¨ë¸ ë³µì œ</h1>
<p>ê°€ë”ê°€ë‹¤ VMì„ ì—…ë°ì´íŠ¸í•´ì•¼ í•  ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš°ë¥¼ ìœ„í•´ ì›ë³¸ DTOë¥¼ ë³´ì¡´í•˜ê³  ë³µì œ ë°©ë²•ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeviceVm</span> {
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private dto: Device</span>) {
    <span class="hljs-comment">// ì¥ì¹˜ ì†ì„±</span>
  }
  
  <span class="hljs-title function_">clone</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeviceVm</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dto</span>)
  }
}
</code></pre>
<p>ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë³´í†µ VMì„ ì§ì ‘ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  ì„±ëŠ¥ ë¬¸ì œê°€ ì—†ëŠ” í•œ, @ngneat/query(ë‚´ë¶€ì ìœ¼ë¡œ tanstack/queryë¥¼ ì‚¬ìš©)ì˜ invalidateQueries í•¨ìˆ˜ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê³  ìë™ìœ¼ë¡œ ìƒˆ VMì„ ìƒì„±í•˜ì—¬ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.</p>
<h1>ê²°ë¡ </h1>
<p>ë·° ëª¨ë¸ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê°•ë ¥í•œ íŒ¨í„´ìœ¼ë¡œ ì‘ìš©í•©ë‹ˆë‹¤. ì´ë“¤ì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê°œë°œì„ ë‹¨ìˆœí™”í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ë°ì´í„° ì²˜ë¦¬ ë° ë³€í™˜ì„ ì „ìš© í´ë˜ìŠ¤ë¡œ ì¶”ìƒí™”í•¨ìœ¼ë¡œì¨, ê°œë°œìë“¤ì€ ê²¬ê³ í•˜ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>Angular ë° JSì— ëŒ€í•´ ë” ì•Œì•„ë³´ë ¤ë©´ Medium ë˜ëŠ” Twitterì—ì„œ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”!</p></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë¡œì§ ê°„ì†Œí™” ë·° ëª¨ë¸ì˜ ì „ëµì  í™œìš©","description":"","date":"2024-05-15 02:45","slug":"2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels","content":"\n\n\n![User View Model](/assets/img/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels_0.png)\n\nì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì¢…ì¢… ì„œë²„ì—ì„œ ì§ì ‘ ì‚¬ìš© ê°€ëŠ¥í•œ ë°ì´í„° í‘œí˜„ê³¼ëŠ” ë‹¤ë¥¸ ë°ì´í„° í‘œí˜„ì´ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ì ê°ì²´ì—ëŠ” ì—´ê±°í˜• ì—­í• , ì—´ê±°í˜• ìƒíƒœ, ì´ë¦„ ë“±ì˜ ì†ì„±ì´ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë·°ì—ì„œ ì´ëŸ¬í•œ ì„œë²„ ì¸¡ ëª¨ë¸ì„ ì§ì ‘ ì‚¬ìš©í•˜ë©´ ì¢…ì¢… UI ë¡œì§ ì „ì²´ì— ë¶„ì‚°ëœ ë³µì¡í•œ ë³€í™˜ì„ ìœ ë°œí•©ë‹ˆë‹¤.\n\nì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê° ì—”í‹°í‹°ì— ëŒ€í•œ ë·° ëª¨ë¸ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ì£¼ì¥í•©ë‹ˆë‹¤. ì´ ìº¡ìŠí™”ëŠ” ë°ì´í„° ì²˜ë¦¬ë¥¼ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ì£¼ë©° UIê°€ í•„ìš”í•œ ê²ƒë§Œ ë°›ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë‹¤ìŒì€ UserVmì˜ ê°„ë‹¨í•œ ì‹¤ì œ ì˜ˆì‹œì…ë‹ˆë‹¤:\n\n```js\nconst rolesMap = fromBeEnum(UserRoleEnum, {\n  VIEWER: 'ë·°ì–´',\n  ADMIN: 'ê´€ë¦¬ì',\n  SIGNER: 'ì„œëª…ì',\n  OWNER: 'ì†Œìœ ì'\n});\n\nexport class UserVm {\n  constructor(dto: User) {\n    this.displayName = dto.name || dto.email;\n    this.isActive = dto.status === UserStatusEnum.ACTIVE;\n    this.isServiceAccount = dto.type === UserTypeEnum.SERVICE_ACCOUNT;\n    this.isViewer = dto.role === UserRoleEnum.VIEWER;\n    this.isOwner = dto.role === UserRoleEnum.OWNER;\n    this.isActiveAdmin = dto.isAdmin \u0026\u0026 this.isActive;\n    this.typeLabel = dto.isServiceAccount ? 'ì„œë¹„ìŠ¤ ê³„ì •' : 'ì‚¬ìš©ì';\n    this.roleLabel = this.userRoleToLabel();\n    this.hasAddQuorum = hasQuorum(dto, 'add');\n    this.hasRemoveQuorum = hasQuorum(dto, 'remove');\n    this.isPendingApproval = this.hasAddQuorum || this.hasRemoveQuorum;\n  }\n  \n  private userRoleToLabel() {\n    return rolesMap[this.dto.role] || 'ì•Œ ìˆ˜ ì—†ìŒ';\n  }\n}\n```\n\n\n\ngetUser ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ë°›ìœ¼ë©´ UserVm í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ë‹µì— ë§ëŠ” ìƒˆ ì‚¬ìš©ì ë·° ëª¨ë¸ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ ì¶”ìƒí™”ë¥¼ í†µí•´ ê¹”ë”í•˜ê³  ìœ ì§€ ê´€ë¦¬ ê°€ëŠ¥í•œ ì½”ë“œ êµ¬ì¡°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\nimport { injectQuery, mapResultData } from '@ngneat/query';\n\n@Injectable({ providedIn: 'root' })\nexport class UserService {\n  private query = injectQuery();\n  private client = injectApiClient();\n\n  getUser({ vaultId }) {\n    return this.query({\n      queryKey: ['user'],\n      queryFn: () =\u003e {\n        return this.client.getAuthenticatedUser({ vaultId })\n      }\n    }).result$.pipe(\n      mapResultData(user =\u003e new UserVm())\n    )\n  }\n}\n```\n\nì´ ì›ì¹™ì€ ì—”í‹°í‹° ë°°ì—´ì„ ë‹¤ë£° ë•Œì—ë„ ë™ì¼í•˜ê²Œ ì ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ ê±°ë˜ê°€ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ëŠ”ì§€ ì‚´í´ë³´ë©´ â€” UI ë³€í™˜ì„ ê±°ì¹˜ëŠ” ì¤‘ìš”í•œ ì—”í‹°í‹°ì¸ ê±°ë˜ì— ëŒ€í•´ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ì§€ì— ëŒ€í•´ ìƒê°í•´ ë³´ì„¸ìš”.\n\n```js\nimport { injectQuery, mapResultData } from '@ngneat/query';\n\n@Injectable({ providedIn: 'root' })\nexport class TransactionsService {\n  private query = injectQuery();\n  private client = injectApiClient();\n\n  getTransactions({ vaultId }) {\n    return this.query({\n      queryKey: ['transactions'],\n      queryFn: () =\u003e {\n        return this.client.getTransactions({ vaultId })\n      }\n    }).result$.pipe(\n      mapResultData(res =\u003e res.transactions.map(t =\u003e new TransactionVm(t)))\n    )\n  }\n}\n```\n\n\n\n# ë·° ëª¨ë¸ ì‚¬ìš©ì˜ ì´ì \n\n## ëª…í™•ì„±ê³¼ ì‚¬ìš©ì ì •ì˜\n\në°±ì—”ë“œ ë„¤ì´ë° ê·œì¹™ ë•Œë¬¸ì— ë¨¸ë¦¬ë¥¼ ê¸ëŠ” ìˆœê°„ë“¤ì„ ìš°ë¦¬ ëª¨ë‘ ê²ªì–´ë´¤ì£  ğŸ˜›. ë·° ëª¨ë¸ì€ ì†ì„± ì´ë¦„ì„ ë°”ê¿” ë” ì§ê´€ì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. DTO ì´ë¦„ì´ ì• ë§¤í•  ë•Œ, VMì€ DTOë¥¼ ì§ì ‘ ë³€ê²½í•˜ì§€ ì•Šê³  ë” êµ¬ì²´ì ì¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\n\n## ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„±\n\n\n\nVMs(Visual Models)ì€ ë°±ì—”ë“œ êµ¬ì¡°ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê³  DTO ìŠ¤í‚¤ë§ˆë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìš”êµ¬ì— ë” ì˜ ë§ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ìœ ì—°ì„±ì€ ë‹¤ì–‘í•œ ì‚¬ìš© ì¼€ì´ìŠ¤ì— ì ì‘í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n## ì¤‘ì•™í™”ëœ ìˆ˜ì •\n\nDTOì— ì¤‘ìš”í•œ ë³€ê²½ì´ ìˆê±°ë‚˜ ì˜ˆê¸°ì¹˜ ëª»í•œ ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš°, ì¡°ì •ì€ ë·° ëª¨ë¸ì—ì„œë§Œ í•˜ë©´ ë˜ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì— ìˆ˜ì •ì„ ë°˜ì˜í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ ì¤‘ì•™í™”ëŠ” ë²„ê·¸ì™€ ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ì„ í¬ê²Œ ì¤„ì—¬ì¤ë‹ˆë‹¤.\n\n## ìº¡ìŠí™”\n\n\n\në³€í™˜ ë¡œì§ì„ VM ë‚´ë¶€ë¡œ ìº¡ìŠí™”í•˜ë©´ ì»´í¬ë„ŒíŠ¸ ì „ì²´ì—ì„œì˜ íŒŒì´í”„, ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë° ì—´ê±°í˜•ì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ì¤„ì–´ë“¤ì–´ ë” ê¹¨ë—í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš´ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## ì¬ì‚¬ìš©ì„±\n\ní•œ ë²ˆ ì •ì˜ëœ View Modelì€ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë‹¤ë¥¸ ë¶€ë¶„ ë˜ëŠ” ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì¬ì‚¬ìš©ì„±ì€ ê°œë°œ ì‹œê°„ì„ í¬ê²Œ ë‹¨ì¶•í•˜ê³  ì˜¤ë¥˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ownerVmì„ ì‚¬ìš©í•˜ëŠ” DeviceVmì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\nexport class DeviceVm {\n  ownerVm: UserVm;\n\n  constructor(device: Device) {\n    // ...device props\n    this.ownerVm = new UserVm(device.owner);\n  }\n}\n```\n\n\n\nì´ ì„¤ì •ì„ ì‚¬ìš©í•˜ë©´ ì¥ì¹˜ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì–´ë–¤ ë¶€ë¶„ì´ë“  UserVmì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í’ë¶€í•œ, ì‚¬ì „ ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nEntity ê°„ ê´€ë ¨ì´ ìˆëŠ” ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ëŠ” ì¡°í•©ëœ VMì—ì„œ í¬ê²Œ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ ì¥ì¹˜ë¥¼ ê°€ì§„ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\nexport class UserWithDevicesVm extends UserVm {\n  devices: DeviceVm[];\n\n  constructor(user: User, devices: Device[]) {\n    super(user); // ê¸°ë³¸ UserVm ì´ˆê¸°í™”\n    this.devices = devices.map(device =\u003e new DeviceVm(device));\n  }\n}\n\n// ì„œë¹„ìŠ¤ì—ì„œ\nimport { intersectResults$ } from '@ngneat/query';\n\ncombineLatest([\n  this.usersService.getUsers({ vaultId }),\n  this.devicesService.getDevices({ vaultId })\n]).pipe(\n  intersectResults$(([users, devices]) =\u003e {\n    const userDevices = devices.filter(...); \n    return users.map(user =\u003e new UserWithDevicesVm(user, userDevices));\n  })\n)\n```\n\n# ì—…ë°ì´íŠ¸ìš© ë·° ëª¨ë¸ ë³µì œ\n\n\n\nê°€ë”ê°€ë‹¤ VMì„ ì—…ë°ì´íŠ¸í•´ì•¼ í•  ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš°ë¥¼ ìœ„í•´ ì›ë³¸ DTOë¥¼ ë³´ì¡´í•˜ê³  ë³µì œ ë°©ë²•ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\nexport class DeviceVm {\n  \n  constructor(private dto: Device) {\n    // ì¥ì¹˜ ì†ì„±\n  }\n  \n  clone() {\n    return new DeviceVm(this.dto)\n  }\n}\n```\n\nì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë³´í†µ VMì„ ì§ì ‘ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  ì„±ëŠ¥ ë¬¸ì œê°€ ì—†ëŠ” í•œ, @ngneat/query(ë‚´ë¶€ì ìœ¼ë¡œ tanstack/queryë¥¼ ì‚¬ìš©)ì˜ invalidateQueries í•¨ìˆ˜ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê³  ìë™ìœ¼ë¡œ ìƒˆ VMì„ ìƒì„±í•˜ì—¬ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\n\n# ê²°ë¡ \n\n\n\në·° ëª¨ë¸ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê°•ë ¥í•œ íŒ¨í„´ìœ¼ë¡œ ì‘ìš©í•©ë‹ˆë‹¤. ì´ë“¤ì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê°œë°œì„ ë‹¨ìˆœí™”í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ë°ì´í„° ì²˜ë¦¬ ë° ë³€í™˜ì„ ì „ìš© í´ë˜ìŠ¤ë¡œ ì¶”ìƒí™”í•¨ìœ¼ë¡œì¨, ê°œë°œìë“¤ì€ ê²¬ê³ í•˜ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nAngular ë° JSì— ëŒ€í•´ ë” ì•Œì•„ë³´ë ¤ë©´ Medium ë˜ëŠ” Twitterì—ì„œ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”!","ogImage":{"url":"/assets/img/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels_0.png"},"coverImage":"/assets/img/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels_0.png","tag":["Tech"],"readingTime":5},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    h1: \"h1\",\n    h2: \"h2\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels_0.png\",\n        alt: \"User View Model\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì¢…ì¢… ì„œë²„ì—ì„œ ì§ì ‘ ì‚¬ìš© ê°€ëŠ¥í•œ ë°ì´í„° í‘œí˜„ê³¼ëŠ” ë‹¤ë¥¸ ë°ì´í„° í‘œí˜„ì´ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ì ê°ì²´ì—ëŠ” ì—´ê±°í˜• ì—­í• , ì—´ê±°í˜• ìƒíƒœ, ì´ë¦„ ë“±ì˜ ì†ì„±ì´ í¬í•¨ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë·°ì—ì„œ ì´ëŸ¬í•œ ì„œë²„ ì¸¡ ëª¨ë¸ì„ ì§ì ‘ ì‚¬ìš©í•˜ë©´ ì¢…ì¢… UI ë¡œì§ ì „ì²´ì— ë¶„ì‚°ëœ ë³µì¡í•œ ë³€í™˜ì„ ìœ ë°œí•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ê° ì—”í‹°í‹°ì— ëŒ€í•œ ë·° ëª¨ë¸ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ì£¼ì¥í•©ë‹ˆë‹¤. ì´ ìº¡ìŠí™”ëŠ” ë°ì´í„° ì²˜ë¦¬ë¥¼ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ì£¼ë©° UIê°€ í•„ìš”í•œ ê²ƒë§Œ ë°›ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë‹¤ìŒì€ UserVmì˜ ê°„ë‹¨í•œ ì‹¤ì œ ì˜ˆì‹œì…ë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" rolesMap = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"fromBeEnum\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserRoleEnum\"\n        }), \", {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"VIEWER\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'ë·°ì–´'\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"ADMIN\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'ê´€ë¦¬ì'\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"SIGNER\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'ì„œëª…ì'\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"OWNER\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'ì†Œìœ ì'\"\n        }), \"\\n});\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserVm\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"dto: User\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"displayName\"\n        }), \" = dto.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"name\"\n        }), \" || dto.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"email\"\n        }), \";\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"isActive\"\n        }), \" = dto.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"status\"\n        }), \" === \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserStatusEnum\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"ACTIVE\"\n        }), \";\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"isServiceAccount\"\n        }), \" = dto.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"type\"\n        }), \" === \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserTypeEnum\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"SERVICE_ACCOUNT\"\n        }), \";\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"isViewer\"\n        }), \" = dto.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"role\"\n        }), \" === \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserRoleEnum\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"VIEWER\"\n        }), \";\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"isOwner\"\n        }), \" = dto.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"role\"\n        }), \" === \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserRoleEnum\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"OWNER\"\n        }), \";\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"isActiveAdmin\"\n        }), \" = dto.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"isAdmin\"\n        }), \" \u0026\u0026 \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"isActive\"\n        }), \";\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"typeLabel\"\n        }), \" = dto.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"isServiceAccount\"\n        }), \" ? \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'ì„œë¹„ìŠ¤ ê³„ì •'\"\n        }), \" : \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'ì‚¬ìš©ì'\"\n        }), \";\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"roleLabel\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"userRoleToLabel\"\n        }), \"();\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"hasAddQuorum\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"hasQuorum\"\n        }), \"(dto, \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'add'\"\n        }), \");\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"hasRemoveQuorum\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"hasQuorum\"\n        }), \"(dto, \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'remove'\"\n        }), \");\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"isPendingApproval\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"hasAddQuorum\"\n        }), \" || \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"hasRemoveQuorum\"\n        }), \";\\n  }\\n  \\n  private \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"userRoleToLabel\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" rolesMap[\", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"dto\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"role\"\n        }), \"] || \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'ì•Œ ìˆ˜ ì—†ìŒ'\"\n        }), \";\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"getUser ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ë°›ìœ¼ë©´ UserVm í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ë‹µì— ë§ëŠ” ìƒˆ ì‚¬ìš©ì ë·° ëª¨ë¸ì„ ìƒì„±í•©ë‹ˆë‹¤. ì´ ì¶”ìƒí™”ë¥¼ í†µí•´ ê¹”ë”í•˜ê³  ìœ ì§€ ê´€ë¦¬ ê°€ëŠ¥í•œ ì½”ë“œ êµ¬ì¡°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { injectQuery, mapResultData } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@ngneat/query'\"\n        }), \";\\n\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"providedIn\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'root'\"\n        }), \" })\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserService\"\n        }), \" {\\n  private query = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"injectQuery\"\n        }), \"();\\n  private client = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"injectApiClient\"\n        }), \"();\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getUser\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"{ vaultId }\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"query\"\n        }), \"({\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"queryKey\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'user'\"\n        }), \"],\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"queryFn\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =\u003e\"\n        }), \" {\\n        \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"client\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getAuthenticatedUser\"\n        }), \"({ vaultId })\\n      }\\n    }).\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"result$\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"pipe\"\n        }), \"(\\n      \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"mapResultData\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"user\"\n          }), \" =\u003e\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserVm\"\n        }), \"())\\n    )\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ ì›ì¹™ì€ ì—”í‹°í‹° ë°°ì—´ì„ ë‹¤ë£° ë•Œì—ë„ ë™ì¼í•˜ê²Œ ì ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ ê±°ë˜ê°€ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ëŠ”ì§€ ì‚´í´ë³´ë©´ â€” UI ë³€í™˜ì„ ê±°ì¹˜ëŠ” ì¤‘ìš”í•œ ì—”í‹°í‹°ì¸ ê±°ë˜ì— ëŒ€í•´ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ì§€ì— ëŒ€í•´ ìƒê°í•´ ë³´ì„¸ìš”.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { injectQuery, mapResultData } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@ngneat/query'\"\n        }), \";\\n\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"providedIn\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'root'\"\n        }), \" })\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"TransactionsService\"\n        }), \" {\\n  private query = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"injectQuery\"\n        }), \"();\\n  private client = \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"injectApiClient\"\n        }), \"();\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getTransactions\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"{ vaultId }\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"query\"\n        }), \"({\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"queryKey\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'transactions'\"\n        }), \"],\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"queryFn\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-function\",\n          children: \"() =\u003e\"\n        }), \" {\\n        \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"client\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getTransactions\"\n        }), \"({ vaultId })\\n      }\\n    }).\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"result$\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"pipe\"\n        }), \"(\\n      \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"mapResultData\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"res\"\n          }), \" =\u003e\"]\n        }), \" res.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"transactions\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"map\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"t\"\n          }), \" =\u003e\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"TransactionVm\"\n        }), \"(t)))\\n    )\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ë·° ëª¨ë¸ ì‚¬ìš©ì˜ ì´ì \"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ëª…í™•ì„±ê³¼ ì‚¬ìš©ì ì •ì˜\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë°±ì—”ë“œ ë„¤ì´ë° ê·œì¹™ ë•Œë¬¸ì— ë¨¸ë¦¬ë¥¼ ê¸ëŠ” ìˆœê°„ë“¤ì„ ìš°ë¦¬ ëª¨ë‘ ê²ªì–´ë´¤ì£  ğŸ˜›. ë·° ëª¨ë¸ì€ ì†ì„± ì´ë¦„ì„ ë°”ê¿” ë” ì§ê´€ì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. DTO ì´ë¦„ì´ ì• ë§¤í•  ë•Œ, VMì€ DTOë¥¼ ì§ì ‘ ë³€ê²½í•˜ì§€ ì•Šê³  ë” êµ¬ì²´ì ì¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ìŠ¤í‚¤ë§ˆ ìœ ì—°ì„±\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"VMs(Visual Models)ì€ ë°±ì—”ë“œ êµ¬ì¡°ì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šê³  DTO ìŠ¤í‚¤ë§ˆë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìš”êµ¬ì— ë” ì˜ ë§ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ê¸°íšŒë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ìœ ì—°ì„±ì€ ë‹¤ì–‘í•œ ì‚¬ìš© ì¼€ì´ìŠ¤ì— ì ì‘í•˜ëŠ” ë° ì¤‘ìš”í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ì¤‘ì•™í™”ëœ ìˆ˜ì •\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"DTOì— ì¤‘ìš”í•œ ë³€ê²½ì´ ìˆê±°ë‚˜ ì˜ˆê¸°ì¹˜ ëª»í•œ ìˆ˜ì •ì´ í•„ìš”í•œ ê²½ìš°, ì¡°ì •ì€ ë·° ëª¨ë¸ì—ì„œë§Œ í•˜ë©´ ë˜ë©° ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì— ìˆ˜ì •ì„ ë°˜ì˜í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ ì¤‘ì•™í™”ëŠ” ë²„ê·¸ì™€ ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ì„ í¬ê²Œ ì¤„ì—¬ì¤ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ìº¡ìŠí™”\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë³€í™˜ ë¡œì§ì„ VM ë‚´ë¶€ë¡œ ìº¡ìŠí™”í•˜ë©´ ì»´í¬ë„ŒíŠ¸ ì „ì²´ì—ì„œì˜ íŒŒì´í”„, ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ë° ì—´ê±°í˜•ì— ëŒ€í•œ ì˜ì¡´ì„±ì´ ì¤„ì–´ë“¤ì–´ ë” ê¹¨ë—í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ìš´ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ì¬ì‚¬ìš©ì„±\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"í•œ ë²ˆ ì •ì˜ëœ View Modelì€ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë‹¤ë¥¸ ë¶€ë¶„ ë˜ëŠ” ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì¬ì‚¬ìš©ì„±ì€ ê°œë°œ ì‹œê°„ì„ í¬ê²Œ ë‹¨ì¶•í•˜ê³  ì˜¤ë¥˜ë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ownerVmì„ ì‚¬ìš©í•˜ëŠ” DeviceVmì˜ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DeviceVm\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"ownerVm\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserVm\"\n        }), \";\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"device: Device\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// ...device props\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"ownerVm\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserVm\"\n        }), \"(device.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"owner\"\n        }), \");\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ ì„¤ì •ì„ ì‚¬ìš©í•˜ë©´ ì¥ì¹˜ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì–´ë–¤ ë¶€ë¶„ì´ë“  UserVmì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ í’ë¶€í•œ, ì‚¬ì „ ì²˜ë¦¬ëœ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Entity ê°„ ê´€ë ¨ì´ ìˆëŠ” ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ëŠ” ì¡°í•©ëœ VMì—ì„œ í¬ê²Œ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì—¬ëŸ¬ ì¥ì¹˜ë¥¼ ê°€ì§„ ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserWithDevicesVm\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"extends\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_ inherited__\",\n          children: \"UserVm\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"devices\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DeviceVm\"\n        }), \"[];\\n\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"user: User, devices: Device[]\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"super\"\n        }), \"(user); \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// ê¸°ë³¸ UserVm ì´ˆê¸°í™”\"\n        }), \"\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"devices\"\n        }), \" = devices.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"map\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"device\"\n          }), \" =\u003e\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DeviceVm\"\n        }), \"(device));\\n  }\\n}\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// ì„œë¹„ìŠ¤ì—ì„œ\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { intersectResults$ } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@ngneat/query'\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"combineLatest\"\n        }), \"([\\n  \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"usersService\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getUsers\"\n        }), \"({ vaultId }),\\n  \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"devicesService\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getDevices\"\n        }), \"({ vaultId })\\n]).\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"pipe\"\n        }), \"(\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"intersectResults$\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [\"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"[users, devices]\"\n          }), \") =\u003e\"]\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" userDevices = devices.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"filter\"\n        }), \"(...); \\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" users.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"map\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"user\"\n          }), \" =\u003e\"]\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserWithDevicesVm\"\n        }), \"(user, userDevices));\\n  })\\n)\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ì—…ë°ì´íŠ¸ìš© ë·° ëª¨ë¸ ë³µì œ\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ê°€ë”ê°€ë‹¤ VMì„ ì—…ë°ì´íŠ¸í•´ì•¼ í•  ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ê²½ìš°ë¥¼ ìœ„í•´ ì›ë³¸ DTOë¥¼ ë³´ì¡´í•˜ê³  ë³µì œ ë°©ë²•ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DeviceVm\"\n        }), \" {\\n  \\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"private dto: Device\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// ì¥ì¹˜ ì†ì„±\"\n        }), \"\\n  }\\n  \\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"clone\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"DeviceVm\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"dto\"\n        }), \")\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ë³´í†µ VMì„ ì§ì ‘ ì—…ë°ì´íŠ¸í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ëŒ€ì‹  ì„±ëŠ¥ ë¬¸ì œê°€ ì—†ëŠ” í•œ, @ngneat/query(ë‚´ë¶€ì ìœ¼ë¡œ tanstack/queryë¥¼ ì‚¬ìš©)ì˜ invalidateQueries í•¨ìˆ˜ë¥¼ í™œìš©í•©ë‹ˆë‹¤. ì´ ë°©ì‹ì€ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê³  ìë™ìœ¼ë¡œ ìƒˆ VMì„ ìƒì„±í•˜ì—¬ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ê²°ë¡ \"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ë·° ëª¨ë¸ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê°•ë ¥í•œ íŒ¨í„´ìœ¼ë¡œ ì‘ìš©í•©ë‹ˆë‹¤. ì´ë“¤ì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê°œë°œì„ ë‹¨ìˆœí™”í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìœ ì§€ ë³´ìˆ˜ì„±ê³¼ í™•ì¥ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ë°ì´í„° ì²˜ë¦¬ ë° ë³€í™˜ì„ ì „ìš© í´ë˜ìŠ¤ë¡œ ì¶”ìƒí™”í•¨ìœ¼ë¡œì¨, ê°œë°œìë“¤ì€ ê²¬ê³ í•˜ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ëŠ” ë° ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Angular ë° JSì— ëŒ€í•´ ë” ì•Œì•„ë³´ë ¤ë©´ Medium ë˜ëŠ” Twitterì—ì„œ íŒ”ë¡œìš°í•´ì£¼ì„¸ìš”!\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-15-SimplifyingClient-SideLogicTheStrategicUseofViewModels"},"buildId":"uXJWf9GNc_Ux38RlnQJQc","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>