<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>ë„¤ìŠ¤íŠ¸JSì—ì„œ ì¸ì¦ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìƒì„¸ ê°€ì´ë“œ | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="ë„¤ìŠ¤íŠ¸JSì—ì„œ ì¸ì¦ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìƒì„¸ ê°€ì´ë“œ | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="ë„¤ìŠ¤íŠ¸JSì—ì„œ ì¸ì¦ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìƒì„¸ ê°€ì´ë“œ | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS" data-gatsby-head="true"/><meta name="twitter:title" content="ë„¤ìŠ¤íŠ¸JSì—ì„œ ì¸ì¦ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìƒì„¸ ê°€ì´ë“œ | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-14 14:21" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cd012fc8787133d0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cd012fc8787133d0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/551-3069cf29fe274aab.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-985df180e46efe53.js" defer=""></script><script src="/_next/static/z1a6VTi5qHH9JJH7jaxL3/_buildManifest.js" defer=""></script><script src="/_next/static/z1a6VTi5qHH9JJH7jaxL3/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">ë„¤ìŠ¤íŠ¸JSì—ì„œ ì¸ì¦ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìƒì„¸ ê°€ì´ë“œ</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="ë„¤ìŠ¤íŠ¸JSì—ì„œ ì¸ì¦ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìƒì„¸ ê°€ì´ë“œ" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/assets/profile.jpg"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 14, 2024</span><span class="posts_reading_time__f7YPP">11<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><p>ì´ í¬ê´„ì ì¸ ì•ˆë‚´ì„œëŠ” ê°•ë ¥í•œ Node.js í”„ë ˆì„ì›Œí¬ì¸ NestJSì—ì„œ ì¸ì¦ êµ¬í˜„ì— ëŒ€í•œ ë‹¨ê³„ë³„ ì•ˆë‚´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê¸°ë³¸ ê°œë…, ìµœì„ ì˜ ì‹¤ì²œë²• ë° ì‹¤ì „ ì˜ˆì œë¥¼ ë‹¤ë£¨ë©°, ì´ ì•ˆë‚´ì„œëŠ” NestJS ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ê²¬ê³ í•œ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ì§€ì‹ì„ ê°œë°œìë“¤ì—ê²Œ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.</p>
<p><img src="/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_0.png" alt="ì´ë¯¸ì§€"/></p>
<p>ì¸ì¦ì€ ë§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„±ì—ì„œ ì¤‘ìš”í•œ êµ¬ì„± ìš”ì†Œë¡œ ìë¦¬ ì¡ê³  ìˆìŠµë‹ˆë‹¤. ì¸ì¦ ê´€ë¦¬ëŠ” íŠ¹ì • í”„ë¡œì íŠ¸ì˜ íŠ¹ì • ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ë§ì¶˜ ê°ê¸° ë‹¤ë¥¸ ì ‘ê·¼ ë°©ì‹ê³¼ ì „ëµì„ íƒìƒ‰í•˜ëŠ” ê³¼ì •ì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ ì„¹ì…˜ì—ì„œëŠ” ì—¬ëŸ¬ ì¸ì¦ ì ‘ê·¼ ë°©ì‹ì„ ê°œìš”í•˜ì—¬ ë‹¤ì–‘í•œ ì‘ìš©í”„ë¡œê·¸ë¨ì˜ ëª…ë°±í•œ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì‚¬ìš©ì ì •ì˜ ì˜µì…˜ì„ ì„¤ëª…í•©ë‹ˆë‹¤.</p>
<p>íŠ¹ì • ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ì¸ì¦í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì¸ì¦ í›„ì— ì„œë²„ëŠ” JWT(JSON Web Token)ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ ì¸ì¦ í™•ì¸ì„ ìœ„í•œ í›„ì† ìš”ì²­ì˜ ê¶Œí•œ ë¶€ì—¬ í—¤ë”ë¡œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” ë² ì–´ëŸ¬ í† í°ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ë”ë¶ˆì–´, ìœ íš¨í•œ JWTê°€ í¬í•¨ëœ ìš”ì²­ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì•ˆì „í•œ ê²½ë¡œë¥¼ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤.</p>
<h1>ìŠ¤í… ë°”ì´ ìŠ¤í… ê°€ì´ë“œ:</h1>
<p>ì§„í–‰ì€ ì´ˆê¸° ìš”êµ¬ ì‚¬í•­ìœ¼ë¡œ ì‹œì‘ë©ë‹ˆë‹¤: ì‚¬ìš©ì ì¸ì¦. ê·¸ ë‹¤ìŒìœ¼ë¡œëŠ” JWTë¥¼ ìƒì„±í•˜ê³  ë°œê¸‰í•¨ìœ¼ë¡œì¨ ì´ë¥¼ í™•ì¥í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œëŠ” ìˆ˜ì‹  ìš”ì²­ ë‚´ì˜ ìœ íš¨í•œ JWTì˜ ì¡´ì¬ë¥¼ í™•ì¸í•˜ëŠ” ë³´í˜¸ëœ ë¼ìš°íŠ¸ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.</p>
<h2>1. ì¢…ì†ì„± ì„¤ì¹˜</h2>
<pre><code class="hljs language-js">npm install @nestjs/jwt passport-jwt @types/passport-jwt
</code></pre>
<h2>2. ì¸ì¦ ë° ì‚¬ìš©ì ëª¨ë“ˆ ìƒì„±í•˜ê¸°</h2>
<pre><code class="hljs language-js">nest g <span class="hljs-variable language_">module</span> auth
nest g controller auth
nest g service auth
</code></pre>
<p>AuthServiceë¥¼ êµ¬í˜„í•  ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ì ì‘ì—…ì„ ìº¡ìŠí™”í•˜ëŠ” UsersServiceë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆ ë°”ë¡œ í•´ë‹¹ ëª¨ë“ˆê³¼ ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•©ì‹œë‹¤:</p>
<pre><code class="hljs language-js">nest g <span class="hljs-variable language_">module</span> users
nest g service users
</code></pre>
<h2>3. ì‚¬ìš©ì DTO êµ¬í˜„</h2>
<p>Data Transfer Object (DTO)ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë‹¤ë¥¸ ë¶€ë¶„ ê°„ì— ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ì†¡ë  ë°ì´í„°ë¥¼ ì •ì˜í•˜ê³  ìœ íš¨ì„± ê²€ì‚¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/dto/user/base-user.dto.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ApiProperty</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/swagger&#x27;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseUser</span> {
  @<span class="hljs-title class_">ApiProperty</span>()
  id?: string;
  @<span class="hljs-title class_">ApiProperty</span>()
  username?: string;
  @<span class="hljs-title class_">ApiProperty</span>()
  <span class="hljs-attr">email</span>: string;
  @<span class="hljs-title class_">ApiProperty</span>()
  <span class="hljs-attr">password</span>: string;
  @<span class="hljs-title class_">ApiProperty</span>()
  confirmPassword?: string;
  @<span class="hljs-title class_">ApiProperty</span>()
  designation?: string;
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/dto/user/create-user.dto.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BaseUser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./base-user.dto&quot;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateUserDto</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseUser</span> {
  <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>;
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/dto/user/update-user.dto.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BaseUser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./base-user.dto&quot;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpdateUserDto</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseUser</span> {
  <span class="hljs-attr">updatedAt</span>: <span class="hljs-title class_">Date</span>;
}
</code></pre>
<h2>4. ì‚¬ìš©ì ì—”í‹°í‹° êµ¬í˜„</h2>
<p>ì—”í‹°í‹°ë€ TypeScript í´ë˜ìŠ¤ ë˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ê°€ë¦¬í‚¤ë©° ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ë‚˜ ë¬¸ì„œì˜ ëª¨ë¸ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì—”í‹°í‹°ëŠ” TypeORMì´ë‚˜ Sequelizeì™€ ê°™ì€ ORM ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ì–´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•©ë‹ˆë‹¤. ì—”í‹°í‹°ëŠ” ë°ì´í„° êµ¬ì¡°ë¥¼ ì •ì˜í•˜ë©° ì£¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ ì§ì ‘ì ì¸ í‘œí˜„ì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/entities/user.entity.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Column</span>, <span class="hljs-title class_">Entity</span>, <span class="hljs-title class_">ObjectId</span>, <span class="hljs-title class_">ObjectIdColumn</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;typeorm&#x27;</span>;
@<span class="hljs-title class_">Entity</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserEntity</span> {
  @<span class="hljs-title class_">ObjectIdColumn</span>()
  <span class="hljs-attr">id</span>: <span class="hljs-title class_">ObjectId</span>;
  @<span class="hljs-title class_">Column</span>()
  <span class="hljs-attr">username</span>: string;
  @<span class="hljs-title class_">Column</span>()
  <span class="hljs-attr">email</span>: string;
  @<span class="hljs-title class_">Column</span>()
  <span class="hljs-attr">password</span>: string;
  @<span class="hljs-title class_">Column</span>()
  <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>;
  @<span class="hljs-title class_">Column</span>()
  <span class="hljs-attr">updatedAt</span>: <span class="hljs-title class_">Date</span>;
}
</code></pre>
<p><strong>ì‚¬ìš©ì í´ë˜ìŠ¤</strong>ëŠ” <strong>@Entity ë°ì½”ë ˆì´í„°</strong>ë¡œ í‘œì‹œë˜ì–´ ì—”í‹°í‹°ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. í´ë˜ìŠ¤ ì†ì„± (id, username, email, password, confirmPassword, createdAt, updatedAt)ì€ @PrimaryGeneratedColumn ë° @Columnê³¼ ê°™ì€ ë°ì½”ë ˆì´í„°ë¡œ ì£¼ì„ì´ ë‹¬ë ¤ ìˆì–´ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì—ì„œì˜ ì—­í• ì„ ì§€ì •í•©ë‹ˆë‹¤.</p>
<h2>5. Auth Controller êµ¬í˜„</h2>
<p>ì´ NestJS ì»¨íŠ¸ë¡¤ëŸ¬, <strong>AuthController</strong>,ëŠ” ì¸ì¦ ê´€ë ¨ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë¼ìš°íŠ¸ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë°ì½”ë ˆì´í„°ë¥¼ í™œìš©í•˜ê³ , ì„¤ëª…ì„œë¥¼ ìœ„í•´ Swaggerë¥¼ í†µí•©í•˜ë©°, íƒ€ì… í™•ì¸ì„ ìœ„í•´ DTOë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. <strong>@Public ë°ì½”ë ˆì´í„°</strong>ëŠ” íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ê°€ ì¸ì¦ì„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë‚˜íƒ€ë‚´ë©°, <strong>AuthService</strong>ëŠ” ì‹¤ì œ ì¸ì¦ ë¡œì§ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/modules/auth/auth.controller.ts</span>
</code></pre>
<h2>6. ì¸ì¦ ëª¨ë“ˆ êµ¬í˜„</h2>
<p>ì´ NestJS ëª¨ë“ˆì¸ AuthModuleì€ ì»¨íŠ¸ë¡¤ëŸ¬, ì„œë¹„ìŠ¤ ë° ê°€ë“œë¥¼ í¬í•¨í•œ ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ìº¡ìŠí™”í•˜ê³  ì¡°ì§í™”í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ, AuthModuleì€ ì½”ë“œ ì¡°ì§í™”ë¥¼ ì´‰ì§„í•˜ê³  ì¬ì‚¬ìš©ì„±ì„ ì´‰ì§„í•˜ë©° ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” ì¤‘ì•™ ëª¨ë“ˆë¡œ ì‘ìš©í•©ë‹ˆë‹¤. ê°€ë“œ, ì„œë¹„ìŠ¤ì˜ ì‚¬ìš© ë° JwtModule ë° TypeOrmModuleê³¼ ê°™ì€ ì™¸ë¶€ ëª¨ë“ˆì˜ êµ¬ì„±ì€ NestJSì—ì„œ ëª¨ë“ˆí™”ë˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ì— ê°€ì¥ ì í•©í•œ ë°©ë²•ì„ ë”°ë¦…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/modules/auth/auth.module.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./auth.controller&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./auth.service&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UsersModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../users/users.module&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JwtModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/jwt&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TypeOrmModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/typeorm&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserEntity</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;src/entities/user.entity&#x27;</span>;
<span class="hljs-keyword">import</span> { jwtConstants } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./constants&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">APP_GUARD</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthGuard</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./auth.guard&#x27;</span>;
@<span class="hljs-title class_">Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">UsersModule</span>,
    <span class="hljs-title class_">JwtModule</span>.<span class="hljs-title function_">register</span>({
      <span class="hljs-attr">global</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">secret</span>: jwtConstants.<span class="hljs-property">secret</span>,
      <span class="hljs-attr">signOptions</span>: { <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">&#x27;1d&#x27;</span> },
    }),
    <span class="hljs-title class_">TypeOrmModule</span>.<span class="hljs-title function_">forFeature</span>([<span class="hljs-title class_">UserEntity</span>]),
  ],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AuthController</span>],
  <span class="hljs-attr">providers</span>: [
    {
      <span class="hljs-attr">provide</span>: <span class="hljs-variable constant_">APP_GUARD</span>,
      <span class="hljs-attr">useClass</span>: <span class="hljs-title class_">AuthGuard</span>,
    },
    <span class="hljs-title class_">AuthService</span>
  ],
  <span class="hljs-attr">exports</span>: [<span class="hljs-title class_">AuthService</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> {}
</code></pre>
<ul>
<li>JwtModule: JwtModuleì„ êµ¬ì„±í•˜ê³  ê°€ì ¸ì™€ì„œ JSON Web Tokens (JWT)ì„ ë‹¤ë£¨ëŠ” ë° ì‚¬ìš©ë˜ë©° ë¹„ë°€ ë° ë§Œë£Œ ì‹œê°„ê³¼ ê°™ì€ ì§€ì •ëœ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.</li>
<li>TypeOrmModule.forFeature([UserEntity]): TypeORMì„ êµ¬ì„±í•˜ì—¬ ëª¨ë“ˆ ë‚´ì—ì„œ UserEntityë¥¼ ì œê³µí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.</li>
<li>&#x27;provide: APP_GUARD, useClass: AuthGuard&#x27;: APP_GUARD í† í°ì„ ì‚¬ìš©í•˜ì—¬ AuthGuardë¥¼ ê¸€ë¡œë²Œ ê°€ë“œë¡œ ë“±ë¡í•©ë‹ˆë‹¤. í•´ë‹¹ ê°€ë“œëŠ” JWT í† í°ì„ ìœ íš¨ì„± ê²€ì‚¬í•˜ê³  ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœë¥¼ ë³´ì¥í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.</li>
<li>AuthService: í•´ë‹¹ ëª¨ë“ˆ ë‚´ì—ì„œ ì œê³µìë¡œ AuthServiceë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. í•´ë‹¹ ì„œë¹„ìŠ¤ëŠ” ì‚¬ìš©ì ì¸ì¦ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ê³  ìˆì„ ê²ƒì…ë‹ˆë‹¤.</li>
</ul>
<h2>7. ì¸ì¦ ê°€ë“œ êµ¬í˜„:</h2>
<p>NestJSì˜ AuthGuard í´ë˜ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì˜ ë£¨íŠ¸ë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•œ ì‚¬ìš©ì ì •ì˜ ì¸ì¦ ê°€ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ AuthGuardëŠ” ë¯¸ë“¤ì›¨ì–´ë¡œ ì‚¬ìš©ë˜ì–´ ì¸ì¦ì´ í•„ìš”í•œ ë£¨íŠ¸ë¥¼ ë³´í˜¸í•©ë‹ˆë‹¤. ë£¨íŠ¸ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ í™•ì¸í•˜ê³  JWT í† í°ì„ ìœ íš¨ì„± ê²€ì‚¬í•¨ìœ¼ë¡œì¨, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŠ¹ì • ë¶€ë¶„ì—ë§Œ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë˜í•œ, ì‚¬ìš©ì í˜ì´ë¡œë“œëŠ” í¸ë¦¬í•˜ê²Œ ìš”ì²­ ê°ì²´ì— ì²¨ë¶€ë˜ì–´ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì¶”ê°€ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.```</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/modules/auth/auth.guard.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">CanActivate</span>,
  <span class="hljs-title class_">ExecutionContext</span>,
  <span class="hljs-title class_">Injectable</span>,
  <span class="hljs-title class_">UnauthorizedException</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JwtService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/jwt&#x27;</span>;
<span class="hljs-keyword">import</span> { jwtConstants } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./constants&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;express&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Reflector</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">IS_PUBLIC_KEY</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./public-strategy&#x27;</span>;
@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthGuard</span> implements <span class="hljs-title class_">CanActivate</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private jwtService: JwtService, private reflector: Reflector</span>) {}
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">canActivate</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">ExecutionContext</span>): <span class="hljs-title class_">Promise</span>&lt;boolean&gt; {
    <span class="hljs-keyword">const</span> isPublic = <span class="hljs-variable language_">this</span>.<span class="hljs-property">reflector</span>.<span class="hljs-property">getAllAndOverride</span>&lt;boolean&gt;(<span class="hljs-variable constant_">IS_PUBLIC_KEY</span>, [
      context.<span class="hljs-title function_">getHandler</span>(),
      context.<span class="hljs-title function_">getClass</span>(),
    ]);
    <span class="hljs-keyword">if</span> (isPublic) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">const</span> request = context.<span class="hljs-title function_">switchToHttp</span>().<span class="hljs-title function_">getRequest</span>();
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">extractTokenFromHeader</span>(request);
    <span class="hljs-keyword">if</span> (!token) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>();
    }
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> payload = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">jwtService</span>.<span class="hljs-title function_">verifyAsync</span>(
        token,
        {
          <span class="hljs-attr">secret</span>: jwtConstants.<span class="hljs-property">secret</span>
        }
      );
      <span class="hljs-comment">// ğŸ’¡ We&#x27;re assigning the payload to the request object here</span>
      <span class="hljs-comment">// so that we can access it in our route handlers</span>
      request[<span class="hljs-string">&#x27;user&#x27;</span>] = payload;
    } <span class="hljs-keyword">catch</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  private <span class="hljs-title function_">extractTokenFromHeader</span>(<span class="hljs-attr">request</span>: <span class="hljs-title class_">Request</span>): string | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">const</span> [type, token] = request.<span class="hljs-property">headers</span>.<span class="hljs-property">authorization</span>?.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27; &#x27;</span>) ?? [];
    <span class="hljs-keyword">return</span> type === <span class="hljs-string">&#x27;Bearer&#x27;</span> ? token : <span class="hljs-literal">undefined</span>;
  }
}
</code></pre>
<h2>8. Auth Service êµ¬í˜„</h2>
<p>NestJS ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ AuthService í´ë˜ìŠ¤ëŠ” ì‚¬ìš©ì ì¸ì¦ ë° ê°€ì… í”„ë¡œì„¸ìŠ¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.```</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/modules/auth/auth.service.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">UnauthorizedException</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UsersService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../users/users.service&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JwtService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/jwt&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;src/dto/user/create-user.dto&quot;</span>;
@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private usersService: UsersService, private jwtService: JwtService</span>) {}
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">signIn</span>(<span class="hljs-params">email, pass</span>) {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">usersService</span>.<span class="hljs-title function_">findOneBy</span>(email);
    <span class="hljs-keyword">if</span> (user?.<span class="hljs-property">password</span> !== pass) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnauthorizedException</span>();
    }
    <span class="hljs-keyword">const</span> payload = { <span class="hljs-attr">sub</span>: user.<span class="hljs-property">id</span>, <span class="hljs-attr">email</span>: user.<span class="hljs-property">email</span> };
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">access_token</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">jwtService</span>.<span class="hljs-title function_">signAsync</span>(payload),
    };
  }
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">signUp</span>(<span class="hljs-params">payload: CreateUserDto</span>) {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">usersService</span>.<span class="hljs-title function_">create</span>(payload);
    <span class="hljs-keyword">return</span> user;
  }
}
</code></pre>
<h2>9. JWT ì‚¬ìš©í•˜ì—¬ ë¹„ë°€ í‚¤ë¥¼ ë³´ê´€í•˜ëŠ” ìƒìˆ˜ êµ¬í˜„</h2>
<p>JWT ê¸°ë°˜ ì¸ì¦ì—ì„œ, ë¹„ë°€ í‚¤ëŠ” í† í°ì˜ ë¬´ê²°ì„±ê³¼ ì‹ ë¢°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì¤‘ìš”í•œ ì •ë³´ì…ë‹ˆë‹¤. ì´ëŠ” í† í°ì„ ë°œê¸‰í•˜ëŠ” ì„œë²„ì™€ í† í°ì„ ìœ íš¨ì„±ì„ ê²€ì¦í•˜ëŠ” ì„œë²„ ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ì—ì„œ ê³µìœ ë˜ëŠ” ë¹„ë°€ í‚¤ë¡œ ì‘ìš©í•©ë‹ˆë‹¤.```</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/modules/auth/constants.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> jwtConstants = {
  <span class="hljs-attr">secret</span>: <span class="hljs-string">&quot;JWTSecret#@!&quot;</span>,
};
</code></pre>
<h2>10: Implement Public Strategy</h2>
<p>ì´ ì „ëµì€ AuthModuleì—ì„œ ìœ„ì—ì„œ AuthGuardë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ì¸ì¦ì„ í™œì„±í™”í–ˆê¸° ë•Œë¬¸ì— ì¸ì¦ì´ í•„ìš”í•˜ì§€ ì•ŠìŒì„ ë‚˜íƒ€ë‚´ëŠ” ë£¨íŠ¸ ë˜ëŠ” í•¸ë“¤ëŸ¬ë¥¼ í‘œì‹œí•˜ëŠ” ìœ í‹¸ë¦¬í‹°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. route ë˜ëŠ” í•¸ë“¤ëŸ¬ì— ë©”íƒ€ë°ì´í„°ë¥¼ ì²¨ë¶€í•˜ê¸° ìœ„í•´ @nestjs/common ëª¨ë“ˆì—ì„œ SetMetadata í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.```</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/modules/auth/public-strategy.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">SetMetadata</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">IS_PUBLIC_KEY</span> = <span class="hljs-string">&#x27;isPublic&#x27;</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">Public</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title class_">SetMetadata</span>(<span class="hljs-variable constant_">IS_PUBLIC_KEY</span>, <span class="hljs-literal">true</span>);
</code></pre>
<h2>11. ì‚¬ìš©ì ëª¨ë“ˆ êµ¬í˜„</h2>
<p>ì´ ëª¨ë“ˆì¸ UsersModuleì€ ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ ì‚¬ìš©ì ê´€ë¦¬ì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ êµ¬ì„±í•˜ê³  ì œê³µí•˜ëŠ” ë° ì „ë…í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/modules/users/users.module.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UsersService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./users.service&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TypeOrmModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/typeorm&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserEntity</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;src/entities/user.entity&#x27;</span>;

@<span class="hljs-title class_">Module</span>({
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">UsersService</span>],
  <span class="hljs-attr">exports</span>: [<span class="hljs-title class_">UsersService</span>],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">TypeOrmModule</span>.<span class="hljs-title function_">forFeature</span>([<span class="hljs-title class_">UserEntity</span>]),
  ],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UsersModule</span> {}
</code></pre>
<ul>
<li>providers ë°°ì—´: UsersServiceë¥¼ providers ë°°ì—´ì— í¬í•¨í•©ë‹ˆë‹¤. ì´ëŠ” UsersServiceê°€ ëª¨ë“ˆ ì „ë°˜ì— ê±¸ì³ injectableí•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.</li>
</ul>
<ol start="2">
<li>
<p>exports ë°°ì—´: UsersServiceë¥¼ exports ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤. ì¦‰, UsersModuleì„ importí•˜ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ UsersServiceë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</li>
<li>
<p><code>imports</code> ë°°ì—´: Utilizes <code>TypeOrmModule.forFeature([UserEntity])</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ UserEntityë¥¼ ëª¨ë“ˆì— importí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ UserEntityì™€ ê´€ë ¨ëœ TypeORM ê¸°ëŠ¥ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</li>
</ol>
<h2>12. ì‚¬ìš©ì ì„œë¹„ìŠ¤ êµ¬í˜„</h2>
<p>UsersServiceëŠ” ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë° ì±…ì„ì´ ìˆìœ¼ë©°, ì´ë©”ì¼ë¡œ ì‚¬ìš©ìë¥¼ ì°¾ê±°ë‚˜ ìƒˆ ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ì—ì„œ <code>@InjectRepository(UserEntity)</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ MongoRepository<code>UserEntity</code>ë¥¼ ì„œë¹„ìŠ¤ì— ì£¼ì…í•©ë‹ˆë‹¤. ì´ ì €ì¥ì†ŒëŠ” UserEntityì™€ ê´€ë ¨ì´ ìˆìœ¼ë©° ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ì„ ìœ„í•œ ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// backend/src/modules/users/users.service.ts</span>
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/common&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InjectRepository</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@nestjs/typeorm&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BaseUser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;src/dto/user/base-user.dto&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;src/dto/user/create-user.dto&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserEntity</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;src/entities/user.entity&quot;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MongoRepository</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;typeorm&quot;</span>;
@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UsersService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    @InjectRepository(UserEntity)
    private userRepository: MongoRepository&lt;UserEntity&gt;,
</span>) { }
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findOneBy</span>(<span class="hljs-attr">email</span>: string): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UserEntity</span> | <span class="hljs-literal">undefined</span>&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">findOneBy</span>({ <span class="hljs-attr">email</span>: email });
  }
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">createUserDto: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">save</span>({
        ...createUserDto,
        <span class="hljs-attr">createdAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(),
    });
  }
}
</code></pre>
<p>UsersServiceëŠ” ì‚¬ìš©ì ê´€ë ¨ ì‘ì—…ì— ëŒ€í•œ ë¡œì§ì„ ìº¡ìŠí™”í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ê¹”ë”í•˜ê³  ëª¨ë“ˆì‹ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ë¦¬í¬ì§€í† ë¦¬ ì‚¬ìš©, ì˜ì¡´ì„± ì£¼ì…, ê·¸ë¦¬ê³  TypeORMê³¼ì˜ í†µí•©ì€ NestJSë¡œ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ëª¨ë²” ì‚¬ë¡€ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.</p>
<h2>Swaggerì— ë”°ë¼ ëª¨ë“  ê²ƒì´ ì˜ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ˜œ:</h2>
<img src="/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_1.png"/>
<img src="/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_2.png"/>
<h2>ì°¸ê³ ìë£Œ:</h2></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ë„¤ìŠ¤íŠ¸JSì—ì„œ ì¸ì¦ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ìƒì„¸ ê°€ì´ë“œ","description":"","date":"2024-05-14 14:21","slug":"2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS","content":"\n\nì´ í¬ê´„ì ì¸ ì•ˆë‚´ì„œëŠ” ê°•ë ¥í•œ Node.js í”„ë ˆì„ì›Œí¬ì¸ NestJSì—ì„œ ì¸ì¦ êµ¬í˜„ì— ëŒ€í•œ ë‹¨ê³„ë³„ ì•ˆë‚´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê¸°ë³¸ ê°œë…, ìµœì„ ì˜ ì‹¤ì²œë²• ë° ì‹¤ì „ ì˜ˆì œë¥¼ ë‹¤ë£¨ë©°, ì´ ì•ˆë‚´ì„œëŠ” NestJS ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ê²¬ê³ í•œ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ì§€ì‹ì„ ê°œë°œìë“¤ì—ê²Œ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_0.png)\n\nì¸ì¦ì€ ë§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„±ì—ì„œ ì¤‘ìš”í•œ êµ¬ì„± ìš”ì†Œë¡œ ìë¦¬ ì¡ê³  ìˆìŠµë‹ˆë‹¤. ì¸ì¦ ê´€ë¦¬ëŠ” íŠ¹ì • í”„ë¡œì íŠ¸ì˜ íŠ¹ì • ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ë§ì¶˜ ê°ê¸° ë‹¤ë¥¸ ì ‘ê·¼ ë°©ì‹ê³¼ ì „ëµì„ íƒìƒ‰í•˜ëŠ” ê³¼ì •ì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ ì„¹ì…˜ì—ì„œëŠ” ì—¬ëŸ¬ ì¸ì¦ ì ‘ê·¼ ë°©ì‹ì„ ê°œìš”í•˜ì—¬ ë‹¤ì–‘í•œ ì‘ìš©í”„ë¡œê·¸ë¨ì˜ ëª…ë°±í•œ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì‚¬ìš©ì ì •ì˜ ì˜µì…˜ì„ ì„¤ëª…í•©ë‹ˆë‹¤.\n\níŠ¹ì • ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ì¸ì¦í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì¸ì¦ í›„ì— ì„œë²„ëŠ” JWT(JSON Web Token)ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ ì¸ì¦ í™•ì¸ì„ ìœ„í•œ í›„ì† ìš”ì²­ì˜ ê¶Œí•œ ë¶€ì—¬ í—¤ë”ë¡œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” ë² ì–´ëŸ¬ í† í°ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ë”ë¶ˆì–´, ìœ íš¨í•œ JWTê°€ í¬í•¨ëœ ìš”ì²­ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì•ˆì „í•œ ê²½ë¡œë¥¼ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤.\n\n\n\n# ìŠ¤í… ë°”ì´ ìŠ¤í… ê°€ì´ë“œ:\n\nì§„í–‰ì€ ì´ˆê¸° ìš”êµ¬ ì‚¬í•­ìœ¼ë¡œ ì‹œì‘ë©ë‹ˆë‹¤: ì‚¬ìš©ì ì¸ì¦. ê·¸ ë‹¤ìŒìœ¼ë¡œëŠ” JWTë¥¼ ìƒì„±í•˜ê³  ë°œê¸‰í•¨ìœ¼ë¡œì¨ ì´ë¥¼ í™•ì¥í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œëŠ” ìˆ˜ì‹  ìš”ì²­ ë‚´ì˜ ìœ íš¨í•œ JWTì˜ ì¡´ì¬ë¥¼ í™•ì¸í•˜ëŠ” ë³´í˜¸ëœ ë¼ìš°íŠ¸ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.\n\n## 1. ì¢…ì†ì„± ì„¤ì¹˜\n\n```js\nnpm install @nestjs/jwt passport-jwt @types/passport-jwt\n```\n\n\n\n## 2. ì¸ì¦ ë° ì‚¬ìš©ì ëª¨ë“ˆ ìƒì„±í•˜ê¸°\n\n```js\nnest g module auth\nnest g controller auth\nnest g service auth\n```\n\nAuthServiceë¥¼ êµ¬í˜„í•  ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ì ì‘ì—…ì„ ìº¡ìŠí™”í•˜ëŠ” UsersServiceë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆ ë°”ë¡œ í•´ë‹¹ ëª¨ë“ˆê³¼ ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•©ì‹œë‹¤:\n\n```js\nnest g module users\nnest g service users\n```\n\n\n\n## 3. ì‚¬ìš©ì DTO êµ¬í˜„\n\nData Transfer Object (DTO)ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë‹¤ë¥¸ ë¶€ë¶„ ê°„ì— ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ì†¡ë  ë°ì´í„°ë¥¼ ì •ì˜í•˜ê³  ìœ íš¨ì„± ê²€ì‚¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤.\n\n```js\n// backend/src/dto/user/base-user.dto.ts\n```\n\n```js\nimport { ApiProperty } from '@nestjs/swagger';\nexport class BaseUser {\n  @ApiProperty()\n  id?: string;\n  @ApiProperty()\n  username?: string;\n  @ApiProperty()\n  email: string;\n  @ApiProperty()\n  password: string;\n  @ApiProperty()\n  confirmPassword?: string;\n  @ApiProperty()\n  designation?: string;\n}\n```\n\n\n\n```js\n// backend/src/dto/user/create-user.dto.ts\n```\n\n```js\nimport { BaseUser } from \"./base-user.dto\";\nexport class CreateUserDto extends BaseUser {\n  createdAt: Date;\n}\n```\n\n```js\n// backend/src/dto/user/update-user.dto.ts\n```\n\n```js\nimport { BaseUser } from \"./base-user.dto\";\nexport class UpdateUserDto extends BaseUser {\n  updatedAt: Date;\n}\n```\n\n\n\n## 4. ì‚¬ìš©ì ì—”í‹°í‹° êµ¬í˜„\n\nì—”í‹°í‹°ë€ TypeScript í´ë˜ìŠ¤ ë˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ê°€ë¦¬í‚¤ë©° ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ë‚˜ ë¬¸ì„œì˜ ëª¨ë¸ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì—”í‹°í‹°ëŠ” TypeORMì´ë‚˜ Sequelizeì™€ ê°™ì€ ORM ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ì–´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•©ë‹ˆë‹¤. ì—”í‹°í‹°ëŠ” ë°ì´í„° êµ¬ì¡°ë¥¼ ì •ì˜í•˜ë©° ì£¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ ì§ì ‘ì ì¸ í‘œí˜„ì…ë‹ˆë‹¤.\n\n```js\n// backend/src/entities/user.entity.ts\n```\n\n```js\nimport { Column, Entity, ObjectId, ObjectIdColumn } from 'typeorm';\n@Entity()\nexport class UserEntity {\n  @ObjectIdColumn()\n  id: ObjectId;\n  @Column()\n  username: string;\n  @Column()\n  email: string;\n  @Column()\n  password: string;\n  @Column()\n  createdAt: Date;\n  @Column()\n  updatedAt: Date;\n}\n```\n\n\n\n**ì‚¬ìš©ì í´ë˜ìŠ¤**ëŠ” **@Entity ë°ì½”ë ˆì´í„°**ë¡œ í‘œì‹œë˜ì–´ ì—”í‹°í‹°ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. í´ë˜ìŠ¤ ì†ì„± (id, username, email, password, confirmPassword, createdAt, updatedAt)ì€ @PrimaryGeneratedColumn ë° @Columnê³¼ ê°™ì€ ë°ì½”ë ˆì´í„°ë¡œ ì£¼ì„ì´ ë‹¬ë ¤ ìˆì–´ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì—ì„œì˜ ì—­í• ì„ ì§€ì •í•©ë‹ˆë‹¤.\n\n## 5. Auth Controller êµ¬í˜„\n\nì´ NestJS ì»¨íŠ¸ë¡¤ëŸ¬, **AuthController**,ëŠ” ì¸ì¦ ê´€ë ¨ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë¼ìš°íŠ¸ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë°ì½”ë ˆì´í„°ë¥¼ í™œìš©í•˜ê³ , ì„¤ëª…ì„œë¥¼ ìœ„í•´ Swaggerë¥¼ í†µí•©í•˜ë©°, íƒ€ì… í™•ì¸ì„ ìœ„í•´ DTOë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. **@Public ë°ì½”ë ˆì´í„°**ëŠ” íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ê°€ ì¸ì¦ì„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë‚˜íƒ€ë‚´ë©°, **AuthService**ëŠ” ì‹¤ì œ ì¸ì¦ ë¡œì§ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.\n\n```js\n// backend/src/modules/auth/auth.controller.ts\n```\n\n\n\n\n## 6. ì¸ì¦ ëª¨ë“ˆ êµ¬í˜„\n\nì´ NestJS ëª¨ë“ˆì¸ AuthModuleì€ ì»¨íŠ¸ë¡¤ëŸ¬, ì„œë¹„ìŠ¤ ë° ê°€ë“œë¥¼ í¬í•¨í•œ ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ìº¡ìŠí™”í•˜ê³  ì¡°ì§í™”í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ, AuthModuleì€ ì½”ë“œ ì¡°ì§í™”ë¥¼ ì´‰ì§„í•˜ê³  ì¬ì‚¬ìš©ì„±ì„ ì´‰ì§„í•˜ë©° ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” ì¤‘ì•™ ëª¨ë“ˆë¡œ ì‘ìš©í•©ë‹ˆë‹¤. ê°€ë“œ, ì„œë¹„ìŠ¤ì˜ ì‚¬ìš© ë° JwtModule ë° TypeOrmModuleê³¼ ê°™ì€ ì™¸ë¶€ ëª¨ë“ˆì˜ êµ¬ì„±ì€ NestJSì—ì„œ ëª¨ë“ˆí™”ë˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ì— ê°€ì¥ ì í•©í•œ ë°©ë²•ì„ ë”°ë¦…ë‹ˆë‹¤.\n\n```js\n// backend/src/modules/auth/auth.module.ts\n```\n\n\n\n```js\nimport { Module } from '@nestjs/common';\nimport { AuthController } from './auth.controller';\nimport { AuthService } from './auth.service';\nimport { UsersModule } from '../users/users.module';\nimport { JwtModule } from '@nestjs/jwt';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { UserEntity } from 'src/entities/user.entity';\nimport { jwtConstants } from './constants';\nimport { APP_GUARD } from '@nestjs/core';\nimport { AuthGuard } from './auth.guard';\n@Module({\n  imports: [\n    UsersModule,\n    JwtModule.register({\n      global: true,\n      secret: jwtConstants.secret,\n      signOptions: { expiresIn: '1d' },\n    }),\n    TypeOrmModule.forFeature([UserEntity]),\n  ],\n  controllers: [AuthController],\n  providers: [\n    {\n      provide: APP_GUARD,\n      useClass: AuthGuard,\n    },\n    AuthService\n  ],\n  exports: [AuthService]\n})\nexport class AuthModule {}\n```\n\n- JwtModule: JwtModuleì„ êµ¬ì„±í•˜ê³  ê°€ì ¸ì™€ì„œ JSON Web Tokens (JWT)ì„ ë‹¤ë£¨ëŠ” ë° ì‚¬ìš©ë˜ë©° ë¹„ë°€ ë° ë§Œë£Œ ì‹œê°„ê³¼ ê°™ì€ ì§€ì •ëœ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.\n- TypeOrmModule.forFeature([UserEntity]): TypeORMì„ êµ¬ì„±í•˜ì—¬ ëª¨ë“ˆ ë‚´ì—ì„œ UserEntityë¥¼ ì œê³µí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.\n- 'provide: APP_GUARD, useClass: AuthGuard': APP_GUARD í† í°ì„ ì‚¬ìš©í•˜ì—¬ AuthGuardë¥¼ ê¸€ë¡œë²Œ ê°€ë“œë¡œ ë“±ë¡í•©ë‹ˆë‹¤. í•´ë‹¹ ê°€ë“œëŠ” JWT í† í°ì„ ìœ íš¨ì„± ê²€ì‚¬í•˜ê³  ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœë¥¼ ë³´ì¥í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.\n- AuthService: í•´ë‹¹ ëª¨ë“ˆ ë‚´ì—ì„œ ì œê³µìë¡œ AuthServiceë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. í•´ë‹¹ ì„œë¹„ìŠ¤ëŠ” ì‚¬ìš©ì ì¸ì¦ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ê³  ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\n## 7. ì¸ì¦ ê°€ë“œ êµ¬í˜„:\n\nNestJSì˜ AuthGuard í´ë˜ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì˜ ë£¨íŠ¸ë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•œ ì‚¬ìš©ì ì •ì˜ ì¸ì¦ ê°€ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ AuthGuardëŠ” ë¯¸ë“¤ì›¨ì–´ë¡œ ì‚¬ìš©ë˜ì–´ ì¸ì¦ì´ í•„ìš”í•œ ë£¨íŠ¸ë¥¼ ë³´í˜¸í•©ë‹ˆë‹¤. ë£¨íŠ¸ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ í™•ì¸í•˜ê³  JWT í† í°ì„ ìœ íš¨ì„± ê²€ì‚¬í•¨ìœ¼ë¡œì¨, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŠ¹ì • ë¶€ë¶„ì—ë§Œ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë˜í•œ, ì‚¬ìš©ì í˜ì´ë¡œë“œëŠ” í¸ë¦¬í•˜ê²Œ ìš”ì²­ ê°ì²´ì— ì²¨ë¶€ë˜ì–´ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì¶”ê°€ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.```\n\n\n\n```js\n// backend/src/modules/auth/auth.guard.ts\n```\n\n```js\nimport {\n  CanActivate,\n  ExecutionContext,\n  Injectable,\n  UnauthorizedException,\n} from '@nestjs/common';\nimport { JwtService } from '@nestjs/jwt';\nimport { jwtConstants } from './constants';\nimport { Request } from 'express';\nimport { Reflector } from '@nestjs/core';\nimport { IS_PUBLIC_KEY } from './public-strategy';\n@Injectable()\nexport class AuthGuard implements CanActivate {\n  constructor(private jwtService: JwtService, private reflector: Reflector) {}\n  async canActivate(context: ExecutionContext): Promise\u003cboolean\u003e {\n    const isPublic = this.reflector.getAllAndOverride\u003cboolean\u003e(IS_PUBLIC_KEY, [\n      context.getHandler(),\n      context.getClass(),\n    ]);\n    if (isPublic) {\n      return true;\n    }\n    const request = context.switchToHttp().getRequest();\n    const token = this.extractTokenFromHeader(request);\n    if (!token) {\n      throw new UnauthorizedException();\n    }\n    try {\n      const payload = await this.jwtService.verifyAsync(\n        token,\n        {\n          secret: jwtConstants.secret\n        }\n      );\n      // ğŸ’¡ We're assigning the payload to the request object here\n      // so that we can access it in our route handlers\n      request['user'] = payload;\n    } catch {\n      throw new UnauthorizedException();\n    }\n    return true;\n  }\n  private extractTokenFromHeader(request: Request): string | undefined {\n    const [type, token] = request.headers.authorization?.split(' ') ?? [];\n    return type === 'Bearer' ? token : undefined;\n  }\n}\n```\n\n## 8. Auth Service êµ¬í˜„\n\nNestJS ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ AuthService í´ë˜ìŠ¤ëŠ” ì‚¬ìš©ì ì¸ì¦ ë° ê°€ì… í”„ë¡œì„¸ìŠ¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.```\n\n\n\n\n\n```js\n// backend/src/modules/auth/auth.service.ts\n```\n\n```js\nimport { Injectable, UnauthorizedException } from \"@nestjs/common\";\nimport { UsersService } from \"../users/users.service\";\nimport { JwtService } from '@nestjs/jwt';\nimport { CreateUserDto } from \"src/dto/user/create-user.dto\";\n@Injectable()\nexport class AuthService {\n  constructor(private usersService: UsersService, private jwtService: JwtService) {}\n  async signIn(email, pass) {\n    const user = await this.usersService.findOneBy(email);\n    if (user?.password !== pass) {\n      throw new UnauthorizedException();\n    }\n    const payload = { sub: user.id, email: user.email };\n    return {\n      access_token: await this.jwtService.signAsync(payload),\n    };\n  }\n  async signUp(payload: CreateUserDto) {\n    const user = await this.usersService.create(payload);\n    return user;\n  }\n}\n```\n\n## 9. JWT ì‚¬ìš©í•˜ì—¬ ë¹„ë°€ í‚¤ë¥¼ ë³´ê´€í•˜ëŠ” ìƒìˆ˜ êµ¬í˜„\n\nJWT ê¸°ë°˜ ì¸ì¦ì—ì„œ, ë¹„ë°€ í‚¤ëŠ” í† í°ì˜ ë¬´ê²°ì„±ê³¼ ì‹ ë¢°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì¤‘ìš”í•œ ì •ë³´ì…ë‹ˆë‹¤. ì´ëŠ” í† í°ì„ ë°œê¸‰í•˜ëŠ” ì„œë²„ì™€ í† í°ì„ ìœ íš¨ì„±ì„ ê²€ì¦í•˜ëŠ” ì„œë²„ ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ì—ì„œ ê³µìœ ë˜ëŠ” ë¹„ë°€ í‚¤ë¡œ ì‘ìš©í•©ë‹ˆë‹¤.```\n\n\n\n```js\n// backend/src/modules/auth/constants.ts\n```\n\n```js\nexport const jwtConstants = {\n  secret: \"JWTSecret#@!\",\n};\n```\n\n## 10: Implement Public Strategy\n\nì´ ì „ëµì€ AuthModuleì—ì„œ ìœ„ì—ì„œ AuthGuardë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ì¸ì¦ì„ í™œì„±í™”í–ˆê¸° ë•Œë¬¸ì— ì¸ì¦ì´ í•„ìš”í•˜ì§€ ì•ŠìŒì„ ë‚˜íƒ€ë‚´ëŠ” ë£¨íŠ¸ ë˜ëŠ” í•¸ë“¤ëŸ¬ë¥¼ í‘œì‹œí•˜ëŠ” ìœ í‹¸ë¦¬í‹°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. route ë˜ëŠ” í•¸ë“¤ëŸ¬ì— ë©”íƒ€ë°ì´í„°ë¥¼ ì²¨ë¶€í•˜ê¸° ìœ„í•´ @nestjs/common ëª¨ë“ˆì—ì„œ SetMetadata í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.```\n\n\n\n```js\n// backend/src/modules/auth/public-strategy.ts\n```\n\n```js\nimport { SetMetadata } from '@nestjs/common';\nexport const IS_PUBLIC_KEY = 'isPublic';\nexport const Public = () =\u003e SetMetadata(IS_PUBLIC_KEY, true);\n```\n\n## 11. ì‚¬ìš©ì ëª¨ë“ˆ êµ¬í˜„\n\nì´ ëª¨ë“ˆì¸ UsersModuleì€ ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ ì‚¬ìš©ì ê´€ë¦¬ì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ êµ¬ì„±í•˜ê³  ì œê³µí•˜ëŠ” ë° ì „ë…í•©ë‹ˆë‹¤.\n\n\n\n```js\n// backend/src/modules/users/users.module.ts\n```\n\n```js\nimport { Module } from '@nestjs/common';\nimport { UsersService } from './users.service';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { UserEntity } from 'src/entities/user.entity';\n\n@Module({\n  providers: [UsersService],\n  exports: [UsersService],\n  imports: [\n    TypeOrmModule.forFeature([UserEntity]),\n  ],\n})\nexport class UsersModule {}\n```\n\n- providers ë°°ì—´: UsersServiceë¥¼ providers ë°°ì—´ì— í¬í•¨í•©ë‹ˆë‹¤. ì´ëŠ” UsersServiceê°€ ëª¨ë“ˆ ì „ë°˜ì— ê±¸ì³ injectableí•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.\n\n2. exports ë°°ì—´: UsersServiceë¥¼ exports ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤. ì¦‰, UsersModuleì„ importí•˜ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ UsersServiceë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n  \n\n\n\n3. `imports` ë°°ì—´: Utilizes `TypeOrmModule.forFeature([UserEntity])`ë¥¼ ì‚¬ìš©í•˜ì—¬ UserEntityë¥¼ ëª¨ë“ˆì— importí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ UserEntityì™€ ê´€ë ¨ëœ TypeORM ê¸°ëŠ¥ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## 12. ì‚¬ìš©ì ì„œë¹„ìŠ¤ êµ¬í˜„\n\nUsersServiceëŠ” ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë° ì±…ì„ì´ ìˆìœ¼ë©°, ì´ë©”ì¼ë¡œ ì‚¬ìš©ìë¥¼ ì°¾ê±°ë‚˜ ìƒˆ ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ì—ì„œ `@InjectRepository(UserEntity)`ë¥¼ ì‚¬ìš©í•˜ì—¬ MongoRepository`UserEntity`ë¥¼ ì„œë¹„ìŠ¤ì— ì£¼ì…í•©ë‹ˆë‹¤. ì´ ì €ì¥ì†ŒëŠ” UserEntityì™€ ê´€ë ¨ì´ ìˆìœ¼ë©° ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ì„ ìœ„í•œ ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\n```js\n// backend/src/modules/users/users.service.ts\n```\n\n\n\n```js\nimport { Injectable } from \"@nestjs/common\";\nimport { InjectRepository } from \"@nestjs/typeorm\";\nimport { BaseUser } from \"src/dto/user/base-user.dto\";\nimport { CreateUserDto } from \"src/dto/user/create-user.dto\";\nimport { UserEntity } from \"src/entities/user.entity\";\nimport { MongoRepository } from \"typeorm\";\n@Injectable()\nexport class UsersService {\n  constructor(\n    @InjectRepository(UserEntity)\n    private userRepository: MongoRepository\u003cUserEntity\u003e,\n) { }\n  async findOneBy(email: string): Promise\u003cUserEntity | undefined\u003e {\n    return await this.userRepository.findOneBy({ email: email });\n  }\n  async create(createUserDto: CreateUserDto) {\n    return this.userRepository.save({\n        ...createUserDto,\n        createdAt: new Date(),\n    });\n  }\n}\n```\n\nUsersServiceëŠ” ì‚¬ìš©ì ê´€ë ¨ ì‘ì—…ì— ëŒ€í•œ ë¡œì§ì„ ìº¡ìŠí™”í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ê¹”ë”í•˜ê³  ëª¨ë“ˆì‹ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ë¦¬í¬ì§€í† ë¦¬ ì‚¬ìš©, ì˜ì¡´ì„± ì£¼ì…, ê·¸ë¦¬ê³  TypeORMê³¼ì˜ í†µí•©ì€ NestJSë¡œ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ëª¨ë²” ì‚¬ë¡€ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.\n\n## Swaggerì— ë”°ë¼ ëª¨ë“  ê²ƒì´ ì˜ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ˜œ:\n\n\u003cimg src=\"/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_1.png\" /\u003e\n\n\n\n\n\u003cimg src=\"/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_2.png\" /\u003e\n\n## ì°¸ê³ ìë£Œ:","ogImage":{"url":"/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_0.png"},"coverImage":"/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_0.png","tag":["Tech"],"readingTime":11},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    h1: \"h1\",\n    h2: \"h2\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    strong: \"strong\",\n    ul: \"ul\",\n    li: \"li\",\n    ol: \"ol\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"ì´ í¬ê´„ì ì¸ ì•ˆë‚´ì„œëŠ” ê°•ë ¥í•œ Node.js í”„ë ˆì„ì›Œí¬ì¸ NestJSì—ì„œ ì¸ì¦ êµ¬í˜„ì— ëŒ€í•œ ë‹¨ê³„ë³„ ì•ˆë‚´ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê¸°ë³¸ ê°œë…, ìµœì„ ì˜ ì‹¤ì²œë²• ë° ì‹¤ì „ ì˜ˆì œë¥¼ ë‹¤ë£¨ë©°, ì´ ì•ˆë‚´ì„œëŠ” NestJS ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ê²¬ê³ í•œ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ì§€ì‹ì„ ê°œë°œìë“¤ì—ê²Œ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_0.png\",\n        alt: \"ì´ë¯¸ì§€\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì¸ì¦ì€ ë§ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„±ì—ì„œ ì¤‘ìš”í•œ êµ¬ì„± ìš”ì†Œë¡œ ìë¦¬ ì¡ê³  ìˆìŠµë‹ˆë‹¤. ì¸ì¦ ê´€ë¦¬ëŠ” íŠ¹ì • í”„ë¡œì íŠ¸ì˜ íŠ¹ì • ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ë§ì¶˜ ê°ê¸° ë‹¤ë¥¸ ì ‘ê·¼ ë°©ì‹ê³¼ ì „ëµì„ íƒìƒ‰í•˜ëŠ” ê³¼ì •ì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ ì„¹ì…˜ì—ì„œëŠ” ì—¬ëŸ¬ ì¸ì¦ ì ‘ê·¼ ë°©ì‹ì„ ê°œìš”í•˜ì—¬ ë‹¤ì–‘í•œ ì‘ìš©í”„ë¡œê·¸ë¨ì˜ ëª…ë°±í•œ ìš”êµ¬ ì‚¬í•­ì„ ì¶©ì¡±ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì‚¬ìš©ì ì •ì˜ ì˜µì…˜ì„ ì„¤ëª…í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"íŠ¹ì • ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì‚¬ìš©ì ì´ë¦„ê³¼ ë¹„ë°€ë²ˆí˜¸ë¡œ ì¸ì¦í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì¸ì¦ í›„ì— ì„œë²„ëŠ” JWT(JSON Web Token)ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ ì¸ì¦ í™•ì¸ì„ ìœ„í•œ í›„ì† ìš”ì²­ì˜ ê¶Œí•œ ë¶€ì—¬ í—¤ë”ë¡œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” ë² ì–´ëŸ¬ í† í°ìœ¼ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ë”ë¶ˆì–´, ìœ íš¨í•œ JWTê°€ í¬í•¨ëœ ìš”ì²­ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•œ ì•ˆì „í•œ ê²½ë¡œë¥¼ ì„¤ì •í•  ê²ƒì…ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"ìŠ¤í… ë°”ì´ ìŠ¤í… ê°€ì´ë“œ:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì§„í–‰ì€ ì´ˆê¸° ìš”êµ¬ ì‚¬í•­ìœ¼ë¡œ ì‹œì‘ë©ë‹ˆë‹¤: ì‚¬ìš©ì ì¸ì¦. ê·¸ ë‹¤ìŒìœ¼ë¡œëŠ” JWTë¥¼ ìƒì„±í•˜ê³  ë°œê¸‰í•¨ìœ¼ë¡œì¨ ì´ë¥¼ í™•ì¥í•©ë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œëŠ” ìˆ˜ì‹  ìš”ì²­ ë‚´ì˜ ìœ íš¨í•œ JWTì˜ ì¡´ì¬ë¥¼ í™•ì¸í•˜ëŠ” ë³´í˜¸ëœ ë¼ìš°íŠ¸ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"1. ì¢…ì†ì„± ì„¤ì¹˜\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"npm install @nestjs/jwt passport-jwt @types/passport-jwt\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"2. ì¸ì¦ ë° ì‚¬ìš©ì ëª¨ë“ˆ ìƒì„±í•˜ê¸°\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"nest g \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"module\"\n        }), \" auth\\nnest g controller auth\\nnest g service auth\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"AuthServiceë¥¼ êµ¬í˜„í•  ë•Œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ì ì‘ì—…ì„ ìº¡ìŠí™”í•˜ëŠ” UsersServiceë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‹ˆ ë°”ë¡œ í•´ë‹¹ ëª¨ë“ˆê³¼ ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•©ì‹œë‹¤:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"nest g \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"module\"\n        }), \" users\\nnest g service users\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"3. ì‚¬ìš©ì DTO êµ¬í˜„\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Data Transfer Object (DTO)ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë‹¤ë¥¸ ë¶€ë¶„ ê°„ì— ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ì†¡ë  ë°ì´í„°ë¥¼ ì •ì˜í•˜ê³  ìœ íš¨ì„± ê²€ì‚¬í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/dto/user/base-user.dto.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApiProperty\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/swagger'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"BaseUser\"\n        }), \" {\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApiProperty\"\n        }), \"()\\n  id?: string;\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApiProperty\"\n        }), \"()\\n  username?: string;\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApiProperty\"\n        }), \"()\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"email\"\n        }), \": string;\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApiProperty\"\n        }), \"()\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"password\"\n        }), \": string;\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApiProperty\"\n        }), \"()\\n  confirmPassword?: string;\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ApiProperty\"\n        }), \"()\\n  designation?: string;\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/dto/user/create-user.dto.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"BaseUser\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./base-user.dto\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CreateUserDto\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"extends\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_ inherited__\",\n          children: \"BaseUser\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"createdAt\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Date\"\n        }), \";\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/dto/user/update-user.dto.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"BaseUser\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"./base-user.dto\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UpdateUserDto\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"extends\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_ inherited__\",\n          children: \"BaseUser\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"updatedAt\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Date\"\n        }), \";\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"4. ì‚¬ìš©ì ì—”í‹°í‹° êµ¬í˜„\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì—”í‹°í‹°ë€ TypeScript í´ë˜ìŠ¤ ë˜ëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ê°€ë¦¬í‚¤ë©° ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ë‚˜ ë¬¸ì„œì˜ ëª¨ë¸ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì—”í‹°í‹°ëŠ” TypeORMì´ë‚˜ Sequelizeì™€ ê°™ì€ ORM ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ í•¨ê»˜ ì‚¬ìš©ë˜ì–´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ ì‘ìš©í•©ë‹ˆë‹¤. ì—”í‹°í‹°ëŠ” ë°ì´í„° êµ¬ì¡°ë¥¼ ì •ì˜í•˜ë©° ì£¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ ì§ì ‘ì ì¸ í‘œí˜„ì…ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/entities/user.entity.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Column\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Entity\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ObjectId\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ObjectIdColumn\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'typeorm'\"\n        }), \";\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Entity\"\n        }), \"()\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserEntity\"\n        }), \" {\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ObjectIdColumn\"\n        }), \"()\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"id\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ObjectId\"\n        }), \";\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Column\"\n        }), \"()\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"username\"\n        }), \": string;\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Column\"\n        }), \"()\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"email\"\n        }), \": string;\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Column\"\n        }), \"()\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"password\"\n        }), \": string;\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Column\"\n        }), \"()\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"createdAt\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Date\"\n        }), \";\\n  @\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Column\"\n        }), \"()\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"updatedAt\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Date\"\n        }), \";\\n}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"ì‚¬ìš©ì í´ë˜ìŠ¤\"\n      }), \"ëŠ” \", _jsx(_components.strong, {\n        children: \"@Entity ë°ì½”ë ˆì´í„°\"\n      }), \"ë¡œ í‘œì‹œë˜ì–´ ì—”í‹°í‹°ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. í´ë˜ìŠ¤ ì†ì„± (id, username, email, password, confirmPassword, createdAt, updatedAt)ì€ @PrimaryGeneratedColumn ë° @Columnê³¼ ê°™ì€ ë°ì½”ë ˆì´í„°ë¡œ ì£¼ì„ì´ ë‹¬ë ¤ ìˆì–´ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì—ì„œì˜ ì—­í• ì„ ì§€ì •í•©ë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"5. Auth Controller êµ¬í˜„\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"ì´ NestJS ì»¨íŠ¸ë¡¤ëŸ¬, \", _jsx(_components.strong, {\n        children: \"AuthController\"\n      }), \",ëŠ” ì¸ì¦ ê´€ë ¨ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ë¼ìš°íŠ¸ ì²˜ë¦¬ë¥¼ ìœ„í•´ ë°ì½”ë ˆì´í„°ë¥¼ í™œìš©í•˜ê³ , ì„¤ëª…ì„œë¥¼ ìœ„í•´ Swaggerë¥¼ í†µí•©í•˜ë©°, íƒ€ì… í™•ì¸ì„ ìœ„í•´ DTOë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. \", _jsx(_components.strong, {\n        children: \"@Public ë°ì½”ë ˆì´í„°\"\n      }), \"ëŠ” íŠ¹ì • ì—”ë“œí¬ì¸íŠ¸ê°€ ì¸ì¦ì„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë‚˜íƒ€ë‚´ë©°, \", _jsx(_components.strong, {\n        children: \"AuthService\"\n      }), \"ëŠ” ì‹¤ì œ ì¸ì¦ ë¡œì§ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/modules/auth/auth.controller.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"6. ì¸ì¦ ëª¨ë“ˆ êµ¬í˜„\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ NestJS ëª¨ë“ˆì¸ AuthModuleì€ ì»¨íŠ¸ë¡¤ëŸ¬, ì„œë¹„ìŠ¤ ë° ê°€ë“œë¥¼ í¬í•¨í•œ ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ìº¡ìŠí™”í•˜ê³  ì¡°ì§í™”í•˜ê¸° ìœ„í•´ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë°˜ì ìœ¼ë¡œ, AuthModuleì€ ì½”ë“œ ì¡°ì§í™”ë¥¼ ì´‰ì§„í•˜ê³  ì¬ì‚¬ìš©ì„±ì„ ì´‰ì§„í•˜ë©° ì¸ì¦ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” ì¤‘ì•™ ëª¨ë“ˆë¡œ ì‘ìš©í•©ë‹ˆë‹¤. ê°€ë“œ, ì„œë¹„ìŠ¤ì˜ ì‚¬ìš© ë° JwtModule ë° TypeOrmModuleê³¼ ê°™ì€ ì™¸ë¶€ ëª¨ë“ˆì˜ êµ¬ì„±ì€ NestJSì—ì„œ ëª¨ë“ˆí™”ë˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜ì— ê°€ì¥ ì í•©í•œ ë°©ë²•ì„ ë”°ë¦…ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/modules/auth/auth.module.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Module\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/common'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthController\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./auth.controller'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthService\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./auth.service'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'../users/users.module'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"JwtModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/jwt'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"TypeOrmModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/typeorm'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserEntity\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'src/entities/user.entity'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { jwtConstants } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./constants'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"APP_GUARD\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/core'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthGuard\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./auth.guard'\"\n        }), \";\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Module\"\n        }), \"({\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"imports\"\n        }), \": [\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersModule\"\n        }), \",\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"JwtModule\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"register\"\n        }), \"({\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"global\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \",\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"secret\"\n        }), \": jwtConstants.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"secret\"\n        }), \",\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"signOptions\"\n        }), \": { \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"expiresIn\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'1d'\"\n        }), \" },\\n    }),\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"TypeOrmModule\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"forFeature\"\n        }), \"([\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserEntity\"\n        }), \"]),\\n  ],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"controllers\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthController\"\n        }), \"],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"providers\"\n        }), \": [\\n    {\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"provide\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"APP_GUARD\"\n        }), \",\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"useClass\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthGuard\"\n        }), \",\\n    },\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthService\"\n        }), \"\\n  ],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"exports\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthService\"\n        }), \"]\\n})\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthModule\"\n        }), \" {}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"JwtModule: JwtModuleì„ êµ¬ì„±í•˜ê³  ê°€ì ¸ì™€ì„œ JSON Web Tokens (JWT)ì„ ë‹¤ë£¨ëŠ” ë° ì‚¬ìš©ë˜ë©° ë¹„ë°€ ë° ë§Œë£Œ ì‹œê°„ê³¼ ê°™ì€ ì§€ì •ëœ ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"TypeOrmModule.forFeature([UserEntity]): TypeORMì„ êµ¬ì„±í•˜ì—¬ ëª¨ë“ˆ ë‚´ì—ì„œ UserEntityë¥¼ ì œê³µí•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"'provide: APP_GUARD, useClass: AuthGuard': APP_GUARD í† í°ì„ ì‚¬ìš©í•˜ì—¬ AuthGuardë¥¼ ê¸€ë¡œë²Œ ê°€ë“œë¡œ ë“±ë¡í•©ë‹ˆë‹¤. í•´ë‹¹ ê°€ë“œëŠ” JWT í† í°ì„ ìœ íš¨ì„± ê²€ì‚¬í•˜ê³  ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœë¥¼ ë³´ì¥í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"AuthService: í•´ë‹¹ ëª¨ë“ˆ ë‚´ì—ì„œ ì œê³µìë¡œ AuthServiceë¥¼ ë“±ë¡í•©ë‹ˆë‹¤. í•´ë‹¹ ì„œë¹„ìŠ¤ëŠ” ì‚¬ìš©ì ì¸ì¦ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ê³  ìˆì„ ê²ƒì…ë‹ˆë‹¤.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"7. ì¸ì¦ ê°€ë“œ êµ¬í˜„:\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"NestJSì˜ AuthGuard í´ë˜ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì˜ ë£¨íŠ¸ë¥¼ ë³´í˜¸í•˜ê¸° ìœ„í•œ ì‚¬ìš©ì ì •ì˜ ì¸ì¦ ê°€ë“œë¥¼ êµ¬í˜„í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ AuthGuardëŠ” ë¯¸ë“¤ì›¨ì–´ë¡œ ì‚¬ìš©ë˜ì–´ ì¸ì¦ì´ í•„ìš”í•œ ë£¨íŠ¸ë¥¼ ë³´í˜¸í•©ë‹ˆë‹¤. ë£¨íŠ¸ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ í™•ì¸í•˜ê³  JWT í† í°ì„ ìœ íš¨ì„± ê²€ì‚¬í•¨ìœ¼ë¡œì¨, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŠ¹ì • ë¶€ë¶„ì—ë§Œ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼í•˜ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë˜í•œ, ì‚¬ìš©ì í˜ì´ë¡œë“œëŠ” í¸ë¦¬í•˜ê²Œ ìš”ì²­ ê°ì²´ì— ì²¨ë¶€ë˜ì–´ ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ì¶”ê°€ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.```\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/modules/auth/auth.guard.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CanActivate\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ExecutionContext\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UnauthorizedException\"\n        }), \",\\n} \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/common'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"JwtService\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/jwt'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { jwtConstants } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./constants'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Request\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'express'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Reflector\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/core'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"IS_PUBLIC_KEY\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./public-strategy'\"\n        }), \";\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \"()\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthGuard\"\n        }), \" implements \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CanActivate\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"private jwtService: JwtService, private reflector: Reflector\"\n        }), \") {}\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"canActivate\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"context\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ExecutionContext\"\n        }), \"): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Promise\"\n        }), \"\u003cboolean\u003e {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" isPublic = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"reflector\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"getAllAndOverride\"\n        }), \"\u003cboolean\u003e(\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"IS_PUBLIC_KEY\"\n        }), \", [\\n      context.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getHandler\"\n        }), \"(),\\n      context.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getClass\"\n        }), \"(),\\n    ]);\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (isPublic) {\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \";\\n    }\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" request = context.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"switchToHttp\"\n        }), \"().\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getRequest\"\n        }), \"();\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" token = \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"extractTokenFromHeader\"\n        }), \"(request);\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (!token) {\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"throw\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UnauthorizedException\"\n        }), \"();\\n    }\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"try\"\n        }), \" {\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" payload = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"jwtService\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"verifyAsync\"\n        }), \"(\\n        token,\\n        {\\n          \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"secret\"\n        }), \": jwtConstants.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"secret\"\n        }), \"\\n        }\\n      );\\n      \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// ğŸ’¡ We're assigning the payload to the request object here\"\n        }), \"\\n      \", _jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// so that we can access it in our route handlers\"\n        }), \"\\n      request[\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'user'\"\n        }), \"] = payload;\\n    } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"catch\"\n        }), \" {\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"throw\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UnauthorizedException\"\n        }), \"();\\n    }\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \";\\n  }\\n  private \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"extractTokenFromHeader\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"request\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Request\"\n        }), \"): string | \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"undefined\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" [type, token] = request.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"headers\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"authorization\"\n        }), \"?.\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"split\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"' '\"\n        }), \") ?? [];\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" type === \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'Bearer'\"\n        }), \" ? token : \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"undefined\"\n        }), \";\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"8. Auth Service êµ¬í˜„\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"NestJS ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ AuthService í´ë˜ìŠ¤ëŠ” ì‚¬ìš©ì ì¸ì¦ ë° ê°€ì… í”„ë¡œì„¸ìŠ¤ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.```\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/modules/auth/auth.service.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UnauthorizedException\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"@nestjs/common\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersService\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"../users/users.service\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"JwtService\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/jwt'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CreateUserDto\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"src/dto/user/create-user.dto\\\"\"\n        }), \";\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \"()\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthService\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"private usersService: UsersService, private jwtService: JwtService\"\n        }), \") {}\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"signIn\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"email, pass\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" user = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"usersService\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"findOneBy\"\n        }), \"(email);\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"if\"\n        }), \" (user?.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"password\"\n        }), \" !== pass) {\\n      \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"throw\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UnauthorizedException\"\n        }), \"();\\n    }\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" payload = { \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"sub\"\n        }), \": user.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"email\"\n        }), \": user.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"email\"\n        }), \" };\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" {\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"access_token\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"jwtService\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"signAsync\"\n        }), \"(payload),\\n    };\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"signUp\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"payload: CreateUserDto\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" user = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"usersService\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"create\"\n        }), \"(payload);\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" user;\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"9. JWT ì‚¬ìš©í•˜ì—¬ ë¹„ë°€ í‚¤ë¥¼ ë³´ê´€í•˜ëŠ” ìƒìˆ˜ êµ¬í˜„\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"JWT ê¸°ë°˜ ì¸ì¦ì—ì„œ, ë¹„ë°€ í‚¤ëŠ” í† í°ì˜ ë¬´ê²°ì„±ê³¼ ì‹ ë¢°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì¤‘ìš”í•œ ì •ë³´ì…ë‹ˆë‹¤. ì´ëŠ” í† í°ì„ ë°œê¸‰í•˜ëŠ” ì„œë²„ì™€ í† í°ì„ ìœ íš¨ì„±ì„ ê²€ì¦í•˜ëŠ” ì„œë²„ ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ì—ì„œ ê³µìœ ë˜ëŠ” ë¹„ë°€ í‚¤ë¡œ ì‘ìš©í•©ë‹ˆë‹¤.```\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/modules/auth/constants.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" jwtConstants = {\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"secret\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"JWTSecret#@!\\\"\"\n        }), \",\\n};\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"10: Implement Public Strategy\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ ì „ëµì€ AuthModuleì—ì„œ ìœ„ì—ì„œ AuthGuardë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ì¸ì¦ì„ í™œì„±í™”í–ˆê¸° ë•Œë¬¸ì— ì¸ì¦ì´ í•„ìš”í•˜ì§€ ì•ŠìŒì„ ë‚˜íƒ€ë‚´ëŠ” ë£¨íŠ¸ ë˜ëŠ” í•¸ë“¤ëŸ¬ë¥¼ í‘œì‹œí•˜ëŠ” ìœ í‹¸ë¦¬í‹°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤. route ë˜ëŠ” í•¸ë“¤ëŸ¬ì— ë©”íƒ€ë°ì´í„°ë¥¼ ì²¨ë¶€í•˜ê¸° ìœ„í•´ @nestjs/common ëª¨ë“ˆì—ì„œ SetMetadata í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.```\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/modules/auth/public-strategy.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"SetMetadata\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/common'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"IS_PUBLIC_KEY\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'isPublic'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"const\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"Public\"\n        }), \" = (\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") =\u003e \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"SetMetadata\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"IS_PUBLIC_KEY\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \");\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"11. ì‚¬ìš©ì ëª¨ë“ˆ êµ¬í˜„\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ì´ ëª¨ë“ˆì¸ UsersModuleì€ ì‘ìš© í”„ë¡œê·¸ë¨ ë‚´ì—ì„œ ì‚¬ìš©ì ê´€ë¦¬ì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ì„ êµ¬ì„±í•˜ê³  ì œê³µí•˜ëŠ” ë° ì „ë…í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/modules/users/users.module.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Module\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/common'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersService\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./users.service'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"TypeOrmModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@nestjs/typeorm'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserEntity\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'src/entities/user.entity'\"\n        }), \";\\n\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Module\"\n        }), \"({\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"providers\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersService\"\n        }), \"],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"exports\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersService\"\n        }), \"],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"imports\"\n        }), \": [\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"TypeOrmModule\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"forFeature\"\n        }), \"([\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserEntity\"\n        }), \"]),\\n  ],\\n})\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersModule\"\n        }), \" {}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"providers ë°°ì—´: UsersServiceë¥¼ providers ë°°ì—´ì— í¬í•¨í•©ë‹ˆë‹¤. ì´ëŠ” UsersServiceê°€ ëª¨ë“ˆ ì „ë°˜ì— ê±¸ì³ injectableí•˜ê²Œ ë§Œë“­ë‹ˆë‹¤.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"2\",\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.p, {\n          children: \"exports ë°°ì—´: UsersServiceë¥¼ exports ë°°ì—´ì— ì¶”ê°€í•©ë‹ˆë‹¤. ì¦‰, UsersModuleì„ importí•˜ëŠ” ë‹¤ë¥¸ ëª¨ë“ˆì—ì„œ UsersServiceë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.code, {\n            children: \"imports\"\n          }), \" ë°°ì—´: Utilizes \", _jsx(_components.code, {\n            children: \"TypeOrmModule.forFeature([UserEntity])\"\n          }), \"ë¥¼ ì‚¬ìš©í•˜ì—¬ UserEntityë¥¼ ëª¨ë“ˆì— importí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ UserEntityì™€ ê´€ë ¨ëœ TypeORM ê¸°ëŠ¥ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"12. ì‚¬ìš©ì ì„œë¹„ìŠ¤ êµ¬í˜„\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"UsersServiceëŠ” ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë° ì±…ì„ì´ ìˆìœ¼ë©°, ì´ë©”ì¼ë¡œ ì‚¬ìš©ìë¥¼ ì°¾ê±°ë‚˜ ìƒˆ ì‚¬ìš©ìë¥¼ ìƒì„±í•˜ëŠ” ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì´ ì„œë¹„ìŠ¤ì—ì„œ \", _jsx(_components.code, {\n        children: \"@InjectRepository(UserEntity)\"\n      }), \"ë¥¼ ì‚¬ìš©í•˜ì—¬ MongoRepository\", _jsx(_components.code, {\n        children: \"UserEntity\"\n      }), \"ë¥¼ ì„œë¹„ìŠ¤ì— ì£¼ì…í•©ë‹ˆë‹¤. ì´ ì €ì¥ì†ŒëŠ” UserEntityì™€ ê´€ë ¨ì´ ìˆìœ¼ë©° ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ì„ ìœ„í•œ ë©”ì„œë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-comment\",\n          children: \"// backend/src/modules/users/users.service.ts\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"@nestjs/common\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"InjectRepository\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"@nestjs/typeorm\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"BaseUser\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"src/dto/user/base-user.dto\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CreateUserDto\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"src/dto/user/create-user.dto\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserEntity\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"src/entities/user.entity\\\"\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"MongoRepository\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"typeorm\\\"\"\n        }), \";\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \"()\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UsersService\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"\\n    @InjectRepository(UserEntity)\\n    private userRepository: MongoRepository\u003cUserEntity\u003e,\\n\"\n        }), \") { }\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"findOneBy\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"email\"\n        }), \": string): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Promise\"\n        }), \"\u003c\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UserEntity\"\n        }), \" | \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"undefined\"\n        }), \"\u003e {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"await\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"userRepository\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"findOneBy\"\n        }), \"({ \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"email\"\n        }), \": email });\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"async\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"create\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"createUserDto: CreateUserDto\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"userRepository\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"save\"\n        }), \"({\\n        ...createUserDto,\\n        \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"createdAt\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Date\"\n        }), \"(),\\n    });\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"UsersServiceëŠ” ì‚¬ìš©ì ê´€ë ¨ ì‘ì—…ì— ëŒ€í•œ ë¡œì§ì„ ìº¡ìŠí™”í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„°ì™€ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ê¹”ë”í•˜ê³  ëª¨ë“ˆì‹ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ë¦¬í¬ì§€í† ë¦¬ ì‚¬ìš©, ì˜ì¡´ì„± ì£¼ì…, ê·¸ë¦¬ê³  TypeORMê³¼ì˜ í†µí•©ì€ NestJSë¡œ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ëª¨ë²” ì‚¬ë¡€ì™€ ì¼ì¹˜í•©ë‹ˆë‹¤.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Swaggerì— ë”°ë¼ ëª¨ë“  ê²ƒì´ ì˜ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ˜œ:\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_1.png\"\n    }), \"\\n\", _jsx(\"img\", {\n      src: \"/assets/img/2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS_2.png\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"ì°¸ê³ ìë£Œ:\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-14-ADetailedGuideonImplementingAuthenticationinNestJS"},"buildId":"z1a6VTi5qHH9JJH7jaxL3","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>