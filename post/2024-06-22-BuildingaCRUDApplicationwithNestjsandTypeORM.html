<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Nestjs와 TypeORM으로 CRUD 애플리케이션 만드는 방법 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Nestjs와 TypeORM으로 CRUD 애플리케이션 만드는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="Nestjs와 TypeORM으로 CRUD 애플리케이션 만드는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM" data-gatsby-head="true"/><meta name="twitter:title" content="Nestjs와 TypeORM으로 CRUD 애플리케이션 만드는 방법 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 02:22" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/t9N7vwmpvBMQnO2PSctoH/_buildManifest.js" defer=""></script><script src="/_next/static/t9N7vwmpvBMQnO2PSctoH/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Nestjs와 TypeORM으로 CRUD 애플리케이션 만드는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Nestjs와 TypeORM으로 CRUD 애플리케이션 만드는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">9<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM_0.png" alt="그림"></p>
<p>Nest는 효율적이고 확장 가능하며 신뢰할 수 있는 서버 측 애플리케이션(웹사이트)을 구축하기 위한 혁신적인 Node JS 프레임워크입니다. 데코레이터는 이 프레임워크에서 주로 사용되며 Java의 Spring Boot 프레임워크와 유사합니다.</p>
<p>이 안내서에서는 Nest.js 프로젝트 설정, TypeORM을 사용한 데이터 모델 정의 및 기본 CRUD 작업(생성, 읽기, 업데이트, 삭제) 구현 과정을 안내합니다. 이 튜토리얼을 완료하면 확장 가능하고 유지보수 가능한 백엔드 애플리케이션 구축 방법을 명확히 이해하게 될 것입니다.</p>
<h1>필요 조건</h1>
<p>시작하기 전에 먼저 컴퓨터에 Node.js와 npm이 설치되어 있는지 확인해주세요. 다음 명령을 실행하여 Nest CLI를 전역으로 설치할 수 있습니다:</p>
<pre><code class="hljs language-js">npm install -g @nestjs/cli
</code></pre>
<h1>단계 1: 프로젝트 설정</h1>
<p>새로운 Nest.js 프로젝트를 생성해봅시다. 터미널을 열고 다음 명령을 실행해주세요:</p>
<pre><code class="hljs language-js">nest <span class="hljs-keyword">new</span> nest-crud-tutorial
</code></pre>
<pre><code class="hljs language-js">cd nest-crud-tutorial
</code></pre>
<pre><code class="hljs language-js">npm install @nestjs/typeorm typeorm
</code></pre>
<p>우리는 데이터베이스로 PostgreSQL을 사용할 것이기 때문에 해당 패키지를 설치해야 합니다.</p>
<pre><code class="hljs language-js">npm install pg
</code></pre>
<h1>단계 2: 데이터베이스 구성</h1>
<p>프로젝트 루트 디렉토리에 .env 파일을 생성하고 데이터베이스에 맞게 구성해주세요.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">POSTGRES_HOST</span>=<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
<span class="hljs-variable constant_">POSTGRES_PORT</span>=<span class="hljs-number">5432</span>
<span class="hljs-variable constant_">POSTGRES_USER</span>=postgres
<span class="hljs-variable constant_">POSTGRES_PASSWORD</span>=pawan123
<span class="hljs-variable constant_">POSTGRES_DATABASE</span>=nest-crud
<span class="hljs-variable constant_">PORT</span>=<span class="hljs-number">3000</span>
<span class="hljs-variable constant_">MODE</span>=<span class="hljs-variable constant_">DEV</span>
<span class="hljs-variable constant_">RUN_MIGRATIONS</span>=<span class="hljs-literal">true</span>
</code></pre>
<p>기본으로 생성된 파일 app.module.ts에서 TypeORM을 구성하십시오.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TypeOrmModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/typeorm'</span>;

@<span class="hljs-title class_">Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">TypeOrmModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'postgres'</span>,
      <span class="hljs-attr">host</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">POSTGRES_HOST</span>,
      <span class="hljs-attr">port</span>: <span class="hljs-built_in">parseInt</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">POSTGRES_PORT</span>),
      <span class="hljs-attr">password</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">POSTGRES_PASSWORD</span>,
      <span class="hljs-attr">username</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">POSTGRES_USER</span>,
      <span class="hljs-attr">entities</span>: [],
      <span class="hljs-attr">database</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">POSTGRES_DATABASE</span>,
      <span class="hljs-attr">synchronize</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">logging</span>: <span class="hljs-literal">true</span>,
    }),
  ],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<h1>단계 3: 사용자를 위한 리소스 생성</h1>
<p>다음 명령어로 nest-cli를 사용하여 DTO, 엔티티, 컨트롤러 및 서비스를 생성할 것입니다.</p>
<pre><code class="hljs language-js">nest g resource user
</code></pre>
<p>이 명령은 CRUD 기능을 갖는 리소스를 생성하는 데 필요한 파일을 생성합니다.</p>
<h1>단계 4: 엔티티 생성</h1>
<p>이제 TypeORM을 사용하여 엔티티를 생성하여 데이터 모델을 정의해 봅시다. 이 예시에서는 fullName과 email 속성을 갖는 간단한 User 엔티티를 생성할 것입니다.</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Entity</span>,
  <span class="hljs-title class_">PrimaryGeneratedColumn</span>,
  <span class="hljs-title class_">Column</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'typeorm'</span>;

<span class="hljs-meta">@Entity</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-meta">@PrimaryGeneratedColumn</span>()
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;

  <span class="hljs-meta">@Column</span>()
  <span class="hljs-attr">fullName</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-meta">@Column</span>({ <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span> })
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<p>생성된 user.entity.ts 파일에 위 코드를 추가해주세요.</p>
<h1>단계 5: 유효성 검사 추가</h1>
<p>유효성 검사를 위해 nest는 기본적으로 오류 처리를 위한 검증 파이프를 제공합니다. main.ts 파일에서 검증 파이프를 사용할 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ValidationPipe</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);
  app.<span class="hljs-title function_">useGlobalPipes</span>(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationPipe</span>({ <span class="hljs-attr">whitelist</span>: <span class="hljs-literal">true</span> }),
  );
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
}
<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<p>유효성 검사를 위해 class-validator 패키지를 설치해야 합니다. 다음 명령을 사용하여 설치하세요.</p>
<pre><code class="hljs language-js">npm install <span class="hljs-keyword">class</span>-validator
</code></pre>
<p>이제 createUserDto.ts 파일에 DTO를 생성하세요. 이는 사용자의 데이터 스키마를 정의합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">IsEmail</span>,
  <span class="hljs-title class_">IsNotEmpty</span>,
  <span class="hljs-title class_">IsString</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'class-validator'</span>;

<span class="hljs-comment">// create-user-dto</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateUserDto</span> {
  @<span class="hljs-title class_">IsNotEmpty</span>()
  @<span class="hljs-title class_">IsString</span>()
  <span class="hljs-attr">fullName</span>: string;

  @<span class="hljs-title class_">IsNotEmpty</span>()
  @<span class="hljs-title class_">IsEmail</span>()
  <span class="hljs-attr">email</span>: string;
}
</code></pre>
<p>또한 CreateUserDto의 부분 유형인 update-user-dto.ts 파일을 만들고 null 값을 가질 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">PartialType</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/mapped-types'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./create-user.dto'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpdateUserDto</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PartialType</span>(<span class="hljs-title class_">CreateUserDto</span>) {}
</code></pre>
<h1>6단계: 서비스 만들기</h1>
<p>다음으로, TypeORM을 사용하여 데이터베이스와 상호작용하는 서비스를 생성하세요. 유저 서비스에서는 TypeORM에 의해 생성된 엔티티에서 의존성 주입을 통해 만들어진 저장소를 초기화해야 합니다. 서비스 레이어는 애플리케이션의 비즈니스 로직을 처리합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">HttpException</span>,
  <span class="hljs-title class_">Injectable</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/create-user.dto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UpdateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/update-user.dto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InjectRepository</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/typeorm'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Repository</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'typeorm'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserEntity</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./entities/user.entity'</span>;

@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    @InjectRepository(UserEntity)
    private readonly userRepository: Repository&#x3C;UserEntity>,
  </span>) {}

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(
    <span class="hljs-attr">createUserDto</span>: <span class="hljs-title class_">CreateUserDto</span>,
  ): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">UserEntity</span>> {
    <span class="hljs-keyword">const</span> userData =
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">create</span>(
        createUserDto,
      );
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">save</span>(userData);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">UserEntity</span>[]> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">find</span>();
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(<span class="hljs-attr">id</span>: number): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">UserEntity</span>> {
    <span class="hljs-keyword">const</span> userData =
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">findOne</span>(id);
    <span class="hljs-keyword">if</span> (!userData) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpException</span>(
        <span class="hljs-string">'User Not Found'</span>,
        <span class="hljs-number">404</span>,
      );
    }
    <span class="hljs-keyword">return</span> userData;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">update</span>(
    <span class="hljs-attr">id</span>: number,
    <span class="hljs-attr">updateUserDto</span>: <span class="hljs-title class_">UpdateUserDto</span>,
  ): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">UserEntity</span>> {
    <span class="hljs-keyword">const</span> existingUser = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findOne</span>(id);
    <span class="hljs-keyword">const</span> userData = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">merge</span>(
      existingUser,
      updateUserDto,
    );
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">save</span>(
      userData,
    );
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">remove</span>(<span class="hljs-attr">id</span>: number): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">UserEntity</span>> {
    <span class="hljs-keyword">const</span> existingUser = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findOne</span>(id);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userRepository</span>.<span class="hljs-title function_">remove</span>(
      existingUser,
    );
  }
}
</code></pre>
<h1>단계 7: 컨트롤러 생성</h1>
<p>HTTP 요청을 처리하고 서비스와 상호작용하는 컨트롤러를 만들어보세요.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Controller</span>,
  <span class="hljs-title class_">Get</span>,
  <span class="hljs-title class_">Post</span>,
  <span class="hljs-title class_">Body</span>,
  <span class="hljs-title class_">Patch</span>,
  <span class="hljs-title class_">Param</span>,
  <span class="hljs-title class_">Delete</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/create-user.dto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UpdateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/update-user.dto'</span>;

@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'users'</span>) <span class="hljs-comment">// route 그룹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    private readonly userService: UserService,
  </span>) {}

  @<span class="hljs-title class_">Post</span>()
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">
    @Body() createUserDto: CreateUserDto,
  </span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">create</span>(
        createUserDto,
      );

      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'사용자가 성공적으로 생성되었습니다'</span>,
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,
      };
    }
  }

  @<span class="hljs-title class_">Get</span>()
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findAll</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> data =
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">findAll</span>();
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
        data,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'사용자가 성공적으로 검색되었습니다'</span>,
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,
      };
    }
  }

  @<span class="hljs-title class_">Get</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(<span class="hljs-params">@Param(<span class="hljs-string">'id'</span>) id: string</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">findOne</span>(
        +id,
      );
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
        data,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'사용자가 성공적으로 검색되었습니다'</span>,
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,
      };
    }
  }

  @<span class="hljs-title class_">Patch</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">
    @Param(<span class="hljs-string">'id'</span>) id: string,
    @Body() updateUserDto: UpdateUserDto,
  </span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">update</span>(
        +id,
        updateUserDto,
      );
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'사용자가 성공적으로 업데이트되었습니다'</span>,
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,
      };
    }
  }

  @<span class="hljs-title class_">Delete</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">@Param(<span class="hljs-string">'id'</span>) id: string</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">remove</span>(+id);
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'사용자가 성공적으로 삭제되었습니다'</span>,
      };
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">message</span>: error.<span class="hljs-property">message</span>,
      };
    }
  }
}
</code></pre>
<h1>단계 8: 모든 것을 연결하기</h1>
<p>이제 서비스, 컨트롤러 및 엔티티를 연결해보겠습니다. Nest.js는 애플리케이션 구성 요소를 관리하기 위해 의존성 주입을 사용합니다. 서비스 및 컨트롤러를 user.module.ts 파일에 import 및 등록해야 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TypeOrmModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/typeorm'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserEntity</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./entities/user.entity'</span>;

@<span class="hljs-title class_">Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">TypeOrmModule</span>.<span class="hljs-title function_">forFeature</span>([<span class="hljs-title class_">UserEntity</span>]),
  ],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">UserController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">UserService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserModule</span> {}
</code></pre>
<p>축하합니다! Nest.js와 TypeORM을 사용하여 기본 CRUD 애플리케이션을 성공적으로 만드셨군요. 프로젝트 설정, 데이터 모델 정의, 서비스 및 컨트롤러 구현, 애플리케이션 테스트 등을 다뤘습니다. 이것은 시작에 불과합니다. Nest.js와 TypeORM은 견고한 백엔드 애플리케이션을 구축하기 위한 다양한 기능을 제공합니다.</p>
<p>편의를 위해, 이 튜토리얼의 전체 소스 코드는 제 GitHub 저장소에서 찾아볼 수 있습니다. 저장소를 클론하여 코드를 자유롭게 실험해보세요.</p>
<p>Nest.js와 TypeORM CRUD 튜토리얼을 따라주셔서 감사합니다. 이 튜토리얼이 숙련된 백엔드 개발자가 되는 여정에서 도움이 되셨기를 바랍니다. 즐거운 코딩되시길 바라겠습니다!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Nestjs와 TypeORM으로 CRUD 애플리케이션 만드는 방법","description":"","date":"2024-06-22 02:22","slug":"2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM","content":"\n\n![그림](/assets/img/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM_0.png)\n\nNest는 효율적이고 확장 가능하며 신뢰할 수 있는 서버 측 애플리케이션(웹사이트)을 구축하기 위한 혁신적인 Node JS 프레임워크입니다. 데코레이터는 이 프레임워크에서 주로 사용되며 Java의 Spring Boot 프레임워크와 유사합니다.\n\n이 안내서에서는 Nest.js 프로젝트 설정, TypeORM을 사용한 데이터 모델 정의 및 기본 CRUD 작업(생성, 읽기, 업데이트, 삭제) 구현 과정을 안내합니다. 이 튜토리얼을 완료하면 확장 가능하고 유지보수 가능한 백엔드 애플리케이션 구축 방법을 명확히 이해하게 될 것입니다.\n\n# 필요 조건\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n시작하기 전에 먼저 컴퓨터에 Node.js와 npm이 설치되어 있는지 확인해주세요. 다음 명령을 실행하여 Nest CLI를 전역으로 설치할 수 있습니다:\n\n```js\nnpm install -g @nestjs/cli\n```\n\n# 단계 1: 프로젝트 설정\n\n새로운 Nest.js 프로젝트를 생성해봅시다. 터미널을 열고 다음 명령을 실행해주세요:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnest new nest-crud-tutorial\n```\n\n```js\ncd nest-crud-tutorial\n```\n\n```js\nnpm install @nestjs/typeorm typeorm\n```\n\n우리는 데이터베이스로 PostgreSQL을 사용할 것이기 때문에 해당 패키지를 설치해야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnpm install pg\n```\n\n# 단계 2: 데이터베이스 구성\n\n프로젝트 루트 디렉토리에 .env 파일을 생성하고 데이터베이스에 맞게 구성해주세요.\n\n```js\nPOSTGRES_HOST=127.0.0.1\nPOSTGRES_PORT=5432\nPOSTGRES_USER=postgres\nPOSTGRES_PASSWORD=pawan123\nPOSTGRES_DATABASE=nest-crud\nPORT=3000\nMODE=DEV\nRUN_MIGRATIONS=true\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n기본으로 생성된 파일 app.module.ts에서 TypeORM을 구성하십시오.\n\n```js\nimport { Module } from '@nestjs/common';\nimport { AppController } from './app.controller';\nimport { AppService } from './app.service';\nimport { TypeOrmModule } from '@nestjs/typeorm';\n\n@Module({\n  imports: [\n    TypeOrmModule.forRoot({\n      type: 'postgres',\n      host: process.env.POSTGRES_HOST,\n      port: parseInt(process.env.POSTGRES_PORT),\n      password: process.env.POSTGRES_PASSWORD,\n      username: process.env.POSTGRES_USER,\n      entities: [],\n      database: process.env.POSTGRES_DATABASE,\n      synchronize: false,\n      logging: true,\n    }),\n  ],\n  controllers: [AppController],\n  providers: [AppService],\n})\nexport class AppModule {}\n```\n\n# 단계 3: 사용자를 위한 리소스 생성\n\n다음 명령어로 nest-cli를 사용하여 DTO, 엔티티, 컨트롤러 및 서비스를 생성할 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnest g resource user\n```\n\n이 명령은 CRUD 기능을 갖는 리소스를 생성하는 데 필요한 파일을 생성합니다.\n\n# 단계 4: 엔티티 생성\n\n이제 TypeORM을 사용하여 엔티티를 생성하여 데이터 모델을 정의해 봅시다. 이 예시에서는 fullName과 email 속성을 갖는 간단한 User 엔티티를 생성할 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```ts\nimport {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n} from 'typeorm';\n\n@Entity()\nexport class User {\n  @PrimaryGeneratedColumn()\n  id: number;\n\n  @Column()\n  fullName: string;\n\n  @Column({ unique: true })\n  email: string;\n}\n```\n\n생성된 user.entity.ts 파일에 위 코드를 추가해주세요.\n\n# 단계 5: 유효성 검사 추가\n\n유효성 검사를 위해 nest는 기본적으로 오류 처리를 위한 검증 파이프를 제공합니다. main.ts 파일에서 검증 파이프를 사용할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\r\nimport { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app.module';\nimport { ValidationPipe } from '@nestjs/common';\n\nasync function bootstrap() {\n  const app = await NestFactory.create(AppModule);\n  app.useGlobalPipes(\n    new ValidationPipe({ whitelist: true }),\n  );\n  await app.listen(3000);\n}\nbootstrap();\r\n```\n\n유효성 검사를 위해 class-validator 패키지를 설치해야 합니다. 다음 명령을 사용하여 설치하세요.\n\n```js\r\nnpm install class-validator\r\n```\n\n이제 createUserDto.ts 파일에 DTO를 생성하세요. 이는 사용자의 데이터 스키마를 정의합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport {\n  IsEmail,\n  IsNotEmpty,\n  IsString,\n} from 'class-validator';\n\n// create-user-dto\nexport class CreateUserDto {\n  @IsNotEmpty()\n  @IsString()\n  fullName: string;\n\n  @IsNotEmpty()\n  @IsEmail()\n  email: string;\n}\n```\n\n또한 CreateUserDto의 부분 유형인 update-user-dto.ts 파일을 만들고 null 값을 가질 수 있습니다.\n\n```js\nimport { PartialType } from '@nestjs/mapped-types';\nimport { CreateUserDto } from './create-user.dto';\n\nexport class UpdateUserDto extends PartialType(CreateUserDto) {}\n```\n\n# 6단계: 서비스 만들기\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n다음으로, TypeORM을 사용하여 데이터베이스와 상호작용하는 서비스를 생성하세요. 유저 서비스에서는 TypeORM에 의해 생성된 엔티티에서 의존성 주입을 통해 만들어진 저장소를 초기화해야 합니다. 서비스 레이어는 애플리케이션의 비즈니스 로직을 처리합니다.\n\n```js\nimport {\n  HttpException,\n  Injectable,\n} from '@nestjs/common';\nimport { CreateUserDto } from './dto/create-user.dto';\nimport { UpdateUserDto } from './dto/update-user.dto';\nimport { InjectRepository } from '@nestjs/typeorm';\nimport { Repository } from 'typeorm';\nimport { UserEntity } from './entities/user.entity';\n\n@Injectable()\nexport class UserService {\n  constructor(\n    @InjectRepository(UserEntity)\n    private readonly userRepository: Repository\u003cUserEntity\u003e,\n  ) {}\n\n  async create(\n    createUserDto: CreateUserDto,\n  ): Promise\u003cUserEntity\u003e {\n    const userData =\n      await this.userRepository.create(\n        createUserDto,\n      );\n    return this.userRepository.save(userData);\n  }\n\n  async findAll(): Promise\u003cUserEntity[]\u003e {\n    return await this.userRepository.find();\n  }\n\n  async findOne(id: number): Promise\u003cUserEntity\u003e {\n    const userData =\n      await this.userRepository.findOne(id);\n    if (!userData) {\n      throw new HttpException(\n        'User Not Found',\n        404,\n      );\n    }\n    return userData;\n  }\n\n  async update(\n    id: number,\n    updateUserDto: UpdateUserDto,\n  ): Promise\u003cUserEntity\u003e {\n    const existingUser = await this.findOne(id);\n    const userData = this.userRepository.merge(\n      existingUser,\n      updateUserDto,\n    );\n    return await this.userRepository.save(\n      userData,\n    );\n  }\n\n  async remove(id: number): Promise\u003cUserEntity\u003e {\n    const existingUser = await this.findOne(id);\n    return await this.userRepository.remove(\n      existingUser,\n    );\n  }\n}\n```\n\n# 단계 7: 컨트롤러 생성\n\nHTTP 요청을 처리하고 서비스와 상호작용하는 컨트롤러를 만들어보세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport {\n  Controller,\n  Get,\n  Post,\n  Body,\n  Patch,\n  Param,\n  Delete,\n} from '@nestjs/common';\nimport { UserService } from './user.service';\nimport { CreateUserDto } from './dto/create-user.dto';\nimport { UpdateUserDto } from './dto/update-user.dto';\n\n@Controller('users') // route 그룹\nexport class UserController {\n  constructor(\n    private readonly userService: UserService,\n  ) {}\n\n  @Post()\n  async create(\n    @Body() createUserDto: CreateUserDto,\n  ) {\n    try {\n      await this.userService.create(\n        createUserDto,\n      );\n\n      return {\n        success: true,\n        message: '사용자가 성공적으로 생성되었습니다',\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message,\n      };\n    }\n  }\n\n  @Get()\n  async findAll() {\n    try {\n      const data =\n        await this.userService.findAll();\n      return {\n        success: true,\n        data,\n        message: '사용자가 성공적으로 검색되었습니다',\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message,\n      };\n    }\n  }\n\n  @Get(':id')\n  async findOne(@Param('id') id: string) {\n    try {\n      const data = await this.userService.findOne(\n        +id,\n      );\n      return {\n        success: true,\n        data,\n        message: '사용자가 성공적으로 검색되었습니다',\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message,\n      };\n    }\n  }\n\n  @Patch(':id')\n  async update(\n    @Param('id') id: string,\n    @Body() updateUserDto: UpdateUserDto,\n  ) {\n    try {\n      await this.userService.update(\n        +id,\n        updateUserDto,\n      );\n      return {\n        success: true,\n        message: '사용자가 성공적으로 업데이트되었습니다',\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message,\n      };\n    }\n  }\n\n  @Delete(':id')\n  async remove(@Param('id') id: string) {\n    try {\n      await this.userService.remove(+id);\n      return {\n        success: true,\n        message: '사용자가 성공적으로 삭제되었습니다',\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message,\n      };\n    }\n  }\n}\n```\n\n# 단계 8: 모든 것을 연결하기\n\n이제 서비스, 컨트롤러 및 엔티티를 연결해보겠습니다. Nest.js는 애플리케이션 구성 요소를 관리하기 위해 의존성 주입을 사용합니다. 서비스 및 컨트롤러를 user.module.ts 파일에 import 및 등록해야 합니다.\n\n```js\nimport { Module } from '@nestjs/common';\nimport { UserService } from './user.service';\nimport { UserController } from './user.controller';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { UserEntity } from './entities/user.entity';\n\n@Module({\n  imports: [\n    TypeOrmModule.forFeature([UserEntity]),\n  ],\n  controllers: [UserController],\n  providers: [UserService],\n})\nexport class UserModule {}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n축하합니다! Nest.js와 TypeORM을 사용하여 기본 CRUD 애플리케이션을 성공적으로 만드셨군요. 프로젝트 설정, 데이터 모델 정의, 서비스 및 컨트롤러 구현, 애플리케이션 테스트 등을 다뤘습니다. 이것은 시작에 불과합니다. Nest.js와 TypeORM은 견고한 백엔드 애플리케이션을 구축하기 위한 다양한 기능을 제공합니다.\n\n편의를 위해, 이 튜토리얼의 전체 소스 코드는 제 GitHub 저장소에서 찾아볼 수 있습니다. 저장소를 클론하여 코드를 자유롭게 실험해보세요.\n\nNest.js와 TypeORM CRUD 튜토리얼을 따라주셔서 감사합니다. 이 튜토리얼이 숙련된 백엔드 개발자가 되는 여정에서 도움이 되셨기를 바랍니다. 즐거운 코딩되시길 바라겠습니다!","ogImage":{"url":"/assets/img/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM_0.png"},"coverImage":"/assets/img/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM_0.png","tag":["Tech"],"readingTime":9},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM_0.png\" alt=\"그림\"\u003e\u003c/p\u003e\n\u003cp\u003eNest는 효율적이고 확장 가능하며 신뢰할 수 있는 서버 측 애플리케이션(웹사이트)을 구축하기 위한 혁신적인 Node JS 프레임워크입니다. 데코레이터는 이 프레임워크에서 주로 사용되며 Java의 Spring Boot 프레임워크와 유사합니다.\u003c/p\u003e\n\u003cp\u003e이 안내서에서는 Nest.js 프로젝트 설정, TypeORM을 사용한 데이터 모델 정의 및 기본 CRUD 작업(생성, 읽기, 업데이트, 삭제) 구현 과정을 안내합니다. 이 튜토리얼을 완료하면 확장 가능하고 유지보수 가능한 백엔드 애플리케이션 구축 방법을 명확히 이해하게 될 것입니다.\u003c/p\u003e\n\u003ch1\u003e필요 조건\u003c/h1\u003e\n\u003cp\u003e시작하기 전에 먼저 컴퓨터에 Node.js와 npm이 설치되어 있는지 확인해주세요. 다음 명령을 실행하여 Nest CLI를 전역으로 설치할 수 있습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install -g @nestjs/cli\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 1: 프로젝트 설정\u003c/h1\u003e\n\u003cp\u003e새로운 Nest.js 프로젝트를 생성해봅시다. 터미널을 열고 다음 명령을 실행해주세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enest \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e nest-crud-tutorial\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd nest-crud-tutorial\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install @nestjs/typeorm typeorm\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e우리는 데이터베이스로 PostgreSQL을 사용할 것이기 때문에 해당 패키지를 설치해야 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install pg\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 2: 데이터베이스 구성\u003c/h1\u003e\n\u003cp\u003e프로젝트 루트 디렉토리에 .env 파일을 생성하고 데이터베이스에 맞게 구성해주세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003ePOSTGRES_HOST\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e127.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.1\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003ePOSTGRES_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e5432\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003ePOSTGRES_USER\u003c/span\u003e=postgres\n\u003cspan class=\"hljs-variable constant_\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e=pawan123\n\u003cspan class=\"hljs-variable constant_\"\u003ePOSTGRES_DATABASE\u003c/span\u003e=nest-crud\n\u003cspan class=\"hljs-variable constant_\"\u003ePORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e3000\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eMODE\u003c/span\u003e=\u003cspan class=\"hljs-variable constant_\"\u003eDEV\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eRUN_MIGRATIONS\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e기본으로 생성된 파일 app.module.ts에서 TypeORM을 구성하십시오.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppController\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./app.controller'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppService\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./app.service'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eTypeOrmModule\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/typeorm'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003eimports\u003c/span\u003e: [\n    \u003cspan class=\"hljs-title class_\"\u003eTypeOrmModule\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eforRoot\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'postgres'\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003ehost\u003c/span\u003e: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePOSTGRES_HOST\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003eport\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eparseInt\u003c/span\u003e(process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePOSTGRES_PORT\u003c/span\u003e),\n      \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePOSTGRES_USER\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003eentities\u003c/span\u003e: [],\n      \u003cspan class=\"hljs-attr\"\u003edatabase\u003c/span\u003e: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ePOSTGRES_DATABASE\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003esynchronize\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003elogging\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n    }),\n  ],\n  \u003cspan class=\"hljs-attr\"\u003econtrollers\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003eAppController\u003c/span\u003e],\n  \u003cspan class=\"hljs-attr\"\u003eproviders\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003eAppService\u003c/span\u003e],\n})\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAppModule\u003c/span\u003e {}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 3: 사용자를 위한 리소스 생성\u003c/h1\u003e\n\u003cp\u003e다음 명령어로 nest-cli를 사용하여 DTO, 엔티티, 컨트롤러 및 서비스를 생성할 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enest g resource user\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 명령은 CRUD 기능을 갖는 리소스를 생성하는 데 필요한 파일을 생성합니다.\u003c/p\u003e\n\u003ch1\u003e단계 4: 엔티티 생성\u003c/h1\u003e\n\u003cp\u003e이제 TypeORM을 사용하여 엔티티를 생성하여 데이터 모델을 정의해 봅시다. 이 예시에서는 fullName과 email 속성을 갖는 간단한 User 엔티티를 생성할 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003eEntity\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003ePrimaryGeneratedColumn\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'typeorm'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-meta\"\u003e@Entity\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e {\n  \u003cspan class=\"hljs-meta\"\u003e@PrimaryGeneratedColumn\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-meta\"\u003e@Column\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003efullName\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-meta\"\u003e@Column\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eunique\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e생성된 user.entity.ts 파일에 위 코드를 추가해주세요.\u003c/p\u003e\n\u003ch1\u003e단계 5: 유효성 검사 추가\u003c/h1\u003e\n\u003cp\u003e유효성 검사를 위해 nest는 기본적으로 오류 처리를 위한 검증 파이프를 제공합니다. main.ts 파일에서 검증 파이프를 사용할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNestFactory\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/core'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppModule\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./app.module'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eValidationPipe\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ebootstrap\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e app = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNestFactory\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eAppModule\u003c/span\u003e);\n  app.\u003cspan class=\"hljs-title function_\"\u003euseGlobalPipes\u003c/span\u003e(\n    \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eValidationPipe\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ewhitelist\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e }),\n  );\n  \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e app.\u003cspan class=\"hljs-title function_\"\u003elisten\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e3000\u003c/span\u003e);\n}\n\u003cspan class=\"hljs-title function_\"\u003ebootstrap\u003c/span\u003e();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e유효성 검사를 위해 class-validator 패키지를 설치해야 합니다. 다음 명령을 사용하여 설치하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e-validator\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이제 createUserDto.ts 파일에 DTO를 생성하세요. 이는 사용자의 데이터 스키마를 정의합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003eIsEmail\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eIsNotEmpty\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eIsString\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'class-validator'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// create-user-dto\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e {\n  @\u003cspan class=\"hljs-title class_\"\u003eIsNotEmpty\u003c/span\u003e()\n  @\u003cspan class=\"hljs-title class_\"\u003eIsString\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003efullName\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eIsNotEmpty\u003c/span\u003e()\n  @\u003cspan class=\"hljs-title class_\"\u003eIsEmail\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: string;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e또한 CreateUserDto의 부분 유형인 update-user-dto.ts 파일을 만들고 null 값을 가질 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003ePartialType\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/mapped-types'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./create-user.dto'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUpdateUserDto\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003ePartialType\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e) {}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e6단계: 서비스 만들기\u003c/h1\u003e\n\u003cp\u003e다음으로, TypeORM을 사용하여 데이터베이스와 상호작용하는 서비스를 생성하세요. 유저 서비스에서는 TypeORM에 의해 생성된 엔티티에서 의존성 주입을 통해 만들어진 저장소를 초기화해야 합니다. 서비스 레이어는 애플리케이션의 비즈니스 로직을 처리합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003eHttpException\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./dto/create-user.dto'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUpdateUserDto\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./dto/update-user.dto'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eInjectRepository\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/typeorm'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRepository\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'typeorm'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUserEntity\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./entities/user.entity'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eInjectable\u003c/span\u003e()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserService\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    @InjectRepository(UserEntity)\n    private readonly userRepository: Repository\u0026#x3C;UserEntity\u003e,\n  \u003c/span\u003e) {}\n\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n    \u003cspan class=\"hljs-attr\"\u003ecreateUserDto\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e,\n  ): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eUserEntity\u003c/span\u003e\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userData =\n      \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserRepository\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n        createUserDto,\n      );\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserRepository\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esave\u003c/span\u003e(userData);\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efindAll\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eUserEntity\u003c/span\u003e[]\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserRepository\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efind\u003c/span\u003e();\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: number): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eUserEntity\u003c/span\u003e\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userData =\n      \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserRepository\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e(id);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!userData) {\n      \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHttpException\u003c/span\u003e(\n        \u003cspan class=\"hljs-string\"\u003e'User Not Found'\u003c/span\u003e,\n        \u003cspan class=\"hljs-number\"\u003e404\u003c/span\u003e,\n      );\n    }\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e userData;\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdate\u003c/span\u003e(\n    \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: number,\n    \u003cspan class=\"hljs-attr\"\u003eupdateUserDto\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUpdateUserDto\u003c/span\u003e,\n  ): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eUserEntity\u003c/span\u003e\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e existingUser = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e(id);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userData = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserRepository\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003emerge\u003c/span\u003e(\n      existingUser,\n      updateUserDto,\n    );\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserRepository\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esave\u003c/span\u003e(\n      userData,\n    );\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eremove\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: number): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eUserEntity\u003c/span\u003e\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e existingUser = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e(id);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserRepository\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eremove\u003c/span\u003e(\n      existingUser,\n    );\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 7: 컨트롤러 생성\u003c/h1\u003e\n\u003cp\u003eHTTP 요청을 처리하고 서비스와 상호작용하는 컨트롤러를 만들어보세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003eController\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003ePost\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eBody\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003ePatch\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eParam\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eDelete\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUserService\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./user.service'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCreateUserDto\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./dto/create-user.dto'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUpdateUserDto\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./dto/update-user.dto'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eController\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'users'\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// route 그룹\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    private readonly userService: UserService,\n  \u003c/span\u003e) {}\n\n  @\u003cspan class=\"hljs-title class_\"\u003ePost\u003c/span\u003e()\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    @Body() createUserDto: CreateUserDto,\n  \u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n        createUserDto,\n      );\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'사용자가 성공적으로 생성되었습니다'\u003c/span\u003e,\n      };\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e,\n      };\n    }\n  }\n\n  @\u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e()\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efindAll\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data =\n        \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindAll\u003c/span\u003e();\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n        data,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'사용자가 성공적으로 검색되었습니다'\u003c/span\u003e,\n      };\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e,\n      };\n    }\n  }\n\n  @\u003cspan class=\"hljs-title class_\"\u003eGet\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e':id'\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e@Param(\u003cspan class=\"hljs-string\"\u003e'id'\u003c/span\u003e) id: string\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e(\n        +id,\n      );\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n        data,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'사용자가 성공적으로 검색되었습니다'\u003c/span\u003e,\n      };\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e,\n      };\n    }\n  }\n\n  @\u003cspan class=\"hljs-title class_\"\u003ePatch\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e':id'\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdate\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    @Param(\u003cspan class=\"hljs-string\"\u003e'id'\u003c/span\u003e) id: string,\n    @Body() updateUserDto: UpdateUserDto,\n  \u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eupdate\u003c/span\u003e(\n        +id,\n        updateUserDto,\n      );\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'사용자가 성공적으로 업데이트되었습니다'\u003c/span\u003e,\n      };\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e,\n      };\n    }\n  }\n\n  @\u003cspan class=\"hljs-title class_\"\u003eDelete\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e':id'\u003c/span\u003e)\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eremove\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e@Param(\u003cspan class=\"hljs-string\"\u003e'id'\u003c/span\u003e) id: string\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserService\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eremove\u003c/span\u003e(+id);\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'사용자가 성공적으로 삭제되었습니다'\u003c/span\u003e,\n      };\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e,\n      };\n    }\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 8: 모든 것을 연결하기\u003c/h1\u003e\n\u003cp\u003e이제 서비스, 컨트롤러 및 엔티티를 연결해보겠습니다. Nest.js는 애플리케이션 구성 요소를 관리하기 위해 의존성 주입을 사용합니다. 서비스 및 컨트롤러를 user.module.ts 파일에 import 및 등록해야 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUserService\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./user.service'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./user.controller'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eTypeOrmModule\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/typeorm'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUserEntity\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./entities/user.entity'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003eimports\u003c/span\u003e: [\n    \u003cspan class=\"hljs-title class_\"\u003eTypeOrmModule\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eforFeature\u003c/span\u003e([\u003cspan class=\"hljs-title class_\"\u003eUserEntity\u003c/span\u003e]),\n  ],\n  \u003cspan class=\"hljs-attr\"\u003econtrollers\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e],\n  \u003cspan class=\"hljs-attr\"\u003eproviders\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003eUserService\u003c/span\u003e],\n})\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserModule\u003c/span\u003e {}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e축하합니다! Nest.js와 TypeORM을 사용하여 기본 CRUD 애플리케이션을 성공적으로 만드셨군요. 프로젝트 설정, 데이터 모델 정의, 서비스 및 컨트롤러 구현, 애플리케이션 테스트 등을 다뤘습니다. 이것은 시작에 불과합니다. Nest.js와 TypeORM은 견고한 백엔드 애플리케이션을 구축하기 위한 다양한 기능을 제공합니다.\u003c/p\u003e\n\u003cp\u003e편의를 위해, 이 튜토리얼의 전체 소스 코드는 제 GitHub 저장소에서 찾아볼 수 있습니다. 저장소를 클론하여 코드를 자유롭게 실험해보세요.\u003c/p\u003e\n\u003cp\u003eNest.js와 TypeORM CRUD 튜토리얼을 따라주셔서 감사합니다. 이 튜토리얼이 숙련된 백엔드 개발자가 되는 여정에서 도움이 되셨기를 바랍니다. 즐거운 코딩되시길 바라겠습니다!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-BuildingaCRUDApplicationwithNestjsandTypeORM"},"buildId":"t9N7vwmpvBMQnO2PSctoH","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>