<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>SQL 트리거 이해하는 방법 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-17-UnderstandingSQLTriggers" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="SQL 트리거 이해하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="SQL 트리거 이해하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-17-UnderstandingSQLTriggers_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-17-UnderstandingSQLTriggers" data-gatsby-head="true"/><meta name="twitter:title" content="SQL 트리거 이해하는 방법 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-17-UnderstandingSQLTriggers_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-17 04:02" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_buildManifest.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">SQL 트리거 이해하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="SQL 트리거 이해하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 17, 2024</span><span class="posts_reading_time__f7YPP">10<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-17-UnderstandingSQLTriggers&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<h2>Microsoft SQL Server 트리거 탐색</h2>
<p><img src="/assets/img/2024-05-17-UnderstandingSQLTriggers_0.png" alt="이미지"></p>
<p>데이터베이스 관리에서 트리거는 데이터베이스에서 특정 이벤트가 발생할 때 자동으로 실행되는 특수 유형의 저장 프로시저입니다. Microsoft SQL Server(MS SQL)에서의 트리거는 비즈니스 규칙 강제, 데이터 무결성 유지 및 데이터베이스 수준에서 복잡한 비즈니스 논리 구현에 사용됩니다. 데이터가 데이터베이스에 커밋되기 전에 특정 조건이나 규칙이 충족되도록 보장하는 데 중요한 역할을 합니다.</p>
<h2>트리거 중요성</h2>
<div class="content-ad"></div>
<p>현대 데이터베이스 시스템에서 트리거는 중요한 역할을 합니다. 트리거는 반복적인 작업을 자동화하고 비즈니스 규칙을 준수하며 여러 테이블 간의 데이터 무결성을 유지하는 데 도움을 줄 수 있습니다. 트리거를 활용하면 데이터베이스 관리자와 개발자가 데이터의 변경에 동적으로 반응하는 견고하고 신뢰할 수 있는 데이터베이스 애플리케이션을 만들 수 있습니다.</p>
<h1>MS SQL Server의 트리거 유형</h1>
<h1>DML 트리거</h1>
<p>DML(데이터 조작 언어) 트리거는 MS SQL Server에서 가장 일반적인 유형의 트리거입니다. 이러한 트리거는 테이블이나 뷰에 대한 INSERT, UPDATE 또는 DELETE 작업과 같은 DML 이벤트에 응답하여 발생합니다.</p>
<div class="content-ad"></div>
<h2>후 트리거</h2>
<p>후 트리거 또는 "for" 트리거는 연관된 DML 이벤트가 완료된 후에 실행됩니다. 이러한 트리거는 비즈니스 규칙 및 데이터 무결성을 강제하는 데 유용합니다. 왜냐하면 이벤트 후 데이터의 최종 상태에서 작동하기 때문입니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TRIGGER</span> trgAfterInsert
<span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Employees</span>
<span class="hljs-variable constant_">AFTER</span> <span class="hljs-variable constant_">INSERT</span>
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">BEGIN</span>
    <span class="hljs-variable constant_">PRINT</span> <span class="hljs-string">'After Insert Trigger Fired'</span>
    -- 여기에 추가 로직 작성
<span class="hljs-variable constant_">END</span>
</code></pre>
<h2>대신 트리거</h2>
<div class="content-ad"></div>
<p>트리거 대신 트리거를 사용하여 트리거 이벤트의 기본 작업을 재정의합니다. 이들은 원래 이벤트 대신 실행되어 개발자가 데이터 수정 작업의 동작을 사용자 정의할 수 있게 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TRIGGER</span> trgInsteadOfUpdate
<span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Employees</span>
<span class="hljs-variable constant_">INSTEAD</span> <span class="hljs-variable constant_">OF</span> <span class="hljs-variable constant_">UPDATE</span>
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">BEGIN</span>
    <span class="hljs-variable constant_">PRINT</span> <span class="hljs-string">'대신 업데이트 트리거 발동됨'</span>
    -- 여기에 사용자 정의 로직 작성
<span class="hljs-variable constant_">END</span>
</code></pre>
<h1>DDL 트리거</h1>
<p>DDL(데이터 정의 언어) 트리거는 CREATE, ALTER 또는 DROP 문과 같은 DDL 이벤트에 응답하여 실행됩니다. 이들은 데이터베이스나 서버 수준에서 스키마 변경을 감사하고 정책을 강제하는 데 사용됩니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TRIGGER</span> trgDDLTrigger
<span class="hljs-variable constant_">ON</span> <span class="hljs-variable constant_">DATABASE</span>
<span class="hljs-variable constant_">FOR</span> <span class="hljs-variable constant_">CREATE_TABLE</span>
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">BEGIN</span>
    <span class="hljs-variable constant_">PRINT</span> <span class="hljs-string">'테이블 생성을 위해 DDL 트리거가 발동되었습니다.'</span>
    -- 감사 기록 로직 추가
<span class="hljs-variable constant_">END</span>
</code></pre>
<h1>로그인 트리거</h1>
<p>로그인 트리거는 MS SQL Server에서 LOGON 이벤트에 응답하여 발동됩니다. 로그인 시 사용자 세션을 제어하거나 모니터링하는 데 사용되며, 연결 제한이나 보안 정책 강화 등이 가능합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TRIGGER</span> trgLogonTrigger
<span class="hljs-variable constant_">ON</span> <span class="hljs-variable constant_">ALL</span> <span class="hljs-variable constant_">SERVER</span>
<span class="hljs-variable constant_">FOR</span> <span class="hljs-variable constant_">LOGON</span>
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">BEGIN</span>
    <span class="hljs-variable constant_">PRINT</span> <span class="hljs-string">'로그인 트리거가 발동되었습니다.'</span>
    -- 보안 확인 로직 추가
<span class="hljs-variable constant_">END</span>
</code></pre>
<div class="content-ad"></div>
<h1>트리거 생성 및 관리</h1>
<h1>트리거 생성</h1>
<p>MS SQL Server에서 트리거를 생성하는 것은 트리거의 이벤트, 범위 및 수행할 작업을 정의하는 과정을 포함합니다. CREATE TRIGGER 문을 사용하여 트리거를 정의합니다.</p>
<h2>예시: 삽입 후 트리거 생성</h2>
<div class="content-ad"></div>
<pre><code class="hljs language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> trgAfterInsert
<span class="hljs-keyword">ON</span> Orders
AFTER <span class="hljs-keyword">INSERT</span>
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> AuditLog (Action, Description, ActionDate)
    <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'INSERT'</span>, <span class="hljs-string">'Record inserted into Orders'</span>, GETDATE())
<span class="hljs-keyword">END</span>
</code></pre>
<h2>트리거 수정</h2>
<p>기존 트리거를 수정하는 것은 ALTER TRIGGER 문을 사용하는 것을 포함합니다. 이를 통해 개발자는 트리거의 논리를 업데이트할 수 있습니다.</p>
<h3>예: After Insert 트리거 수정하기</h3>
<div class="content-ad"></div>
<p>md</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">ALTER</span> <span class="hljs-variable constant_">TRIGGER</span> trgAfterInsert
<span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Orders</span>
<span class="hljs-variable constant_">AFTER</span> <span class="hljs-variable constant_">INSERT</span>
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">BEGIN</span>
    <span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> <span class="hljs-title class_">AuditLog</span> (<span class="hljs-title class_">Action</span>, <span class="hljs-title class_">Description</span>, <span class="hljs-title class_">ActionDate</span>)
    <span class="hljs-variable constant_">VALUES</span> (<span class="hljs-string">'INSERT'</span>, <span class="hljs-string">'New record inserted into Orders'</span>, <span class="hljs-title function_">GETDATE</span>())
    <span class="hljs-variable constant_">PRINT</span> <span class="hljs-string">'Trigger modified'</span>
<span class="hljs-variable constant_">END</span>
</code></pre>
<h1>트리거 삭제</h1>
<p>트리거를 삭제하면 데이터베이스에서 해당 트리거가 삭제되어, 미래 이벤트에 대한 응답으로 실행되지 않습니다. DROP TRIGGER 문을 사용하여 트리거를 삭제할 수 있습니다.</p>
<h2>예시: After Insert 트리거 삭제</h2>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">DROP</span> <span class="hljs-variable constant_">TRIGGER</span> trgAfterInsert
<span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Orders</span>
</code></pre>
<h1>트리거의 실제 응용</h1>
<h1>비즈니스 규칙 강제</h1>
<p>트리거는 제약 조건만으로 구현할 수 없는 비즈니스 규칙을 강제하는 데 일반적으로 사용됩니다. 예를 들어 주문의 총액이 특정 한도를 초과하지 않도록 하는 것과 같은 경우가 있습니다.</p>
<div class="content-ad"></div>
<h2>예시: 트리거를 사용하여 비즈니스 규칙 강제하기</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TRIGGER</span> trgCheckOrderAmount
<span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Orders</span>
<span class="hljs-variable constant_">AFTER</span> <span class="hljs-variable constant_">INSERT</span>, <span class="hljs-variable constant_">UPDATE</span>
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">BEGIN</span>
    <span class="hljs-variable constant_">DECLARE</span> @<span class="hljs-title class_">TotalAmount</span> <span class="hljs-title function_">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)
    <span class="hljs-variable constant_">SELECT</span> @<span class="hljs-title class_">TotalAmount</span> = <span class="hljs-title function_">SUM</span>(<span class="hljs-title class_">OrderAmount</span>) <span class="hljs-variable constant_">FROM</span> inserted
    <span class="hljs-variable constant_">IF</span> @<span class="hljs-title class_">TotalAmount</span> > <span class="hljs-number">10000</span>
    <span class="hljs-variable constant_">BEGIN</span>
        <span class="hljs-title function_">RAISERROR</span>(<span class="hljs-string">'주문 금액이 한도를 초과합니다'</span>, <span class="hljs-number">16</span>, <span class="hljs-number">1</span>)
        <span class="hljs-variable constant_">ROLLBACK</span> <span class="hljs-variable constant_">TRANSACTION</span>
    <span class="hljs-variable constant_">END</span>
<span class="hljs-variable constant_">END</span>
</code></pre>
<h1>데이터 무결성 유지</h1>
<p>트리거는 관련된 테이블 간의 일관성을 보장하여 데이터 무결성을 유지하는 데 도움을 줍니다. 예를 들어, 외래키 무결성을 유지하기 위해 연쇄 업데이트 또는 삭제를 수행할 수 있습니다.</p>
<div class="content-ad"></div>
<h2>예시: 트리거를 사용하여 데이터 무결성 유지하기</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TRIGGER</span> trgCascadeDelete
<span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Customers</span>
<span class="hljs-variable constant_">AFTER</span> <span class="hljs-variable constant_">DELETE</span>
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">BEGIN</span>
    <span class="hljs-variable constant_">DELETE</span> <span class="hljs-variable constant_">FROM</span> <span class="hljs-title class_">Orders</span> <span class="hljs-variable constant_">WHERE</span> <span class="hljs-title class_">CustomerID</span> <span class="hljs-variable constant_">IN</span> (<span class="hljs-variable constant_">SELECT</span> <span class="hljs-title class_">CustomerID</span> <span class="hljs-variable constant_">FROM</span> deleted)
<span class="hljs-variable constant_">END</span>
</code></pre>
<h1>감사 및 로깅</h1>
<p>트리거는 중요 데이터의 변경 사항을 감사하고 로깅하는 데 널리 사용됩니다. 이를 통해 규정 준수 및 문제 해결 목적으로 데이터 수정에 대한 이력 기록이 제공됩니다.</p>
<div class="content-ad"></div>
<h2>예제: 트리거를 사용한 데이터 변경 감사</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TRIGGER</span> trgAuditOrderChanges 
<span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Orders</span> 
<span class="hljs-variable constant_">AFTER</span> <span class="hljs-variable constant_">INSERT</span>, <span class="hljs-variable constant_">UPDATE</span>, <span class="hljs-variable constant_">DELETE</span> 
<span class="hljs-variable constant_">AS</span> 
<span class="hljs-variable constant_">BEGIN</span> 
    <span class="hljs-variable constant_">DECLARE</span> @<span class="hljs-title class_">Action</span> <span class="hljs-title function_">CHAR</span>(<span class="hljs-number">6</span>) 
    <span class="hljs-variable constant_">IF</span> <span class="hljs-variable constant_">EXISTS</span> (<span class="hljs-variable constant_">SELECT</span> * <span class="hljs-variable constant_">FROM</span> inserted) <span class="hljs-variable constant_">AND</span> <span class="hljs-variable constant_">EXISTS</span> (<span class="hljs-variable constant_">SELECT</span> * <span class="hljs-variable constant_">FROM</span> deleted) 
        <span class="hljs-variable constant_">SET</span> @<span class="hljs-title class_">Action</span> = <span class="hljs-string">'UPDATE'</span> 
    <span class="hljs-variable constant_">ELSE</span> <span class="hljs-variable constant_">IF</span> <span class="hljs-variable constant_">EXISTS</span> (<span class="hljs-variable constant_">SELECT</span> * <span class="hljs-variable constant_">FROM</span> inserted) 
        <span class="hljs-variable constant_">SET</span> @<span class="hljs-title class_">Action</span> = <span class="hljs-string">'INSERT'</span> 
    <span class="hljs-variable constant_">ELSE</span> 
        <span class="hljs-variable constant_">SET</span> @<span class="hljs-title class_">Action</span> = <span class="hljs-string">'DELETE'</span> 

    <span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> <span class="hljs-title class_">AuditLog</span> (<span class="hljs-title class_">Action</span>, <span class="hljs-title class_">TableName</span>, <span class="hljs-title class_">ActionDate</span>) 
    <span class="hljs-variable constant_">VALUES</span> (@<span class="hljs-title class_">Action</span>, <span class="hljs-string">'Orders'</span>, <span class="hljs-title function_">GETDATE</span>()) 
<span class="hljs-variable constant_">END</span> 
</code></pre>
<h1>복잡한 비즈니스 로직 구현</h1>
<p>트리거를 사용하여 여러 단계 또는 조건을 포함하는 복잡한 비즈니스 로직을 구현할 수 있습니다. 이는 데이터베이스 수준에서 비즈니스 규칙을 캡슐화하는 데 도움이 됩니다.</p>
<div class="content-ad"></div>
<h2>예시: 트리거를 사용하여 복잡한 비즈니스 로직 구현</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TRIGGER</span> trgComplexLogic
<span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Sales</span>
<span class="hljs-variable constant_">AFTER</span> <span class="hljs-variable constant_">INSERT</span>, <span class="hljs-variable constant_">UPDATE</span>
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">BEGIN</span>
    <span class="hljs-variable constant_">DECLARE</span> @<span class="hljs-title class_">TotalSales</span> <span class="hljs-title function_">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)
    <span class="hljs-variable constant_">SELECT</span> @<span class="hljs-title class_">TotalSales</span> = <span class="hljs-title function_">SUM</span>(<span class="hljs-title class_">SaleAmount</span>) <span class="hljs-variable constant_">FROM</span> <span class="hljs-title class_">Sales</span>

    <span class="hljs-variable constant_">IF</span> @<span class="hljs-title class_">TotalSales</span> > <span class="hljs-number">50000</span>
    <span class="hljs-variable constant_">BEGIN</span>
        -- 할인 로직 적용
        <span class="hljs-variable constant_">UPDATE</span> <span class="hljs-title class_">Sales</span>
        <span class="hljs-variable constant_">SET</span> <span class="hljs-title class_">Discount</span> = <span class="hljs-number">0.1</span>
        <span class="hljs-variable constant_">WHERE</span> <span class="hljs-title class_">SaleAmount</span> > <span class="hljs-number">1000</span>
    <span class="hljs-variable constant_">END</span>
<span class="hljs-variable constant_">END</span>
</code></pre>
<h1>트리거 사용에 대한 Best Practices</h1>
<h1>신중하게 트리거 사용하기</h1>
<div class="content-ad"></div>
<p>트리거는 복잡성과 성능 부담을 야기할 수 있습니다. 중요한 비즈니스 규칙을 시행하거나 데이터 무결성을 유지해야 할 때에만 신중하게 사용하세요.</p>
<h2>트리거에서 복잡한 로직 피하기</h2>
<p>트리거 내의 로직을 간단하고 효율적으로 유지하세요. 복잡한 로직은 성능 문제를 일으키고 디버깅을 어렵게 만들 수 있습니다.</p>
<h2>중첩 트리거 사용 최소화하기</h2>
<div class="content-ad"></div>
<p>테이블 태그를 마크다운 형식으로 변경해보세요.</p>













<table><thead><tr><th>Header1</th><th>Header2</th></tr></thead><tbody><tr><td>Data1</td><td>Data2</td></tr></tbody></table>
<div class="content-ad"></div>
<p>각 트리거의 목적과 논리를 문서화하여 코드를 이해하고 유지 관리하기 쉽도록 하세요.</p>
<h1>성능 고려사항</h1>
<h1>성능에 미치는 영향</h1>
<p>트리거는 DML 작업의 성능에 영향을 줄 수 있습니다. 왜냐하면 추가적인 처리 단계를 도입하기 때문입니다. 트리거의 성능 영향을 특히 높은 트랜잭션 환경에서는 평가하는 것이 중요합니다.</p>
<div class="content-ad"></div>
<h1>색인 및 트리거</h1>
<p>적절한 색인을 사용하면 트리거의 성능을 향상시킬 수 있습니다. 트리거 로직 내의 쿼리 실행 속도를 높이기 위해 관련 열을 적절히 색인화하십시오.</p>
<h1>모니터링 및 조정</h1>
<p>정기적으로 트리거의 성능을 모니터링하고 필요에 따라 튜닝하십시오. SQL Server Profiler 및 Extended Events와 같은 도구를 사용하여 데이터베이스 성능에 미치는 트리거의 영향을 분석하십시오.</p>
<div class="content-ad"></div>
<h1>고급 주제</h1>
<h1>재귀 트리거</h1>
<p>재귀 트리거는 자신을 직접 또는간접적으로 호출하는 트리거입니다. MS SQL Server에서는 재귀 트리거를 허용하지만 무한 루프와 성능 문제를 피하기 위해 주의해서 사용해야 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">ALTER</span> <span class="hljs-variable constant_">DATABASE</span> <span class="hljs-title class_">AdventureWorks2012</span>
<span class="hljs-variable constant_">SET</span> <span class="hljs-variable constant_">RECURSIVE_TRIGGERS</span> <span class="hljs-variable constant_">ON</span>
</code></pre>
<div class="content-ad"></div>
<h1>트리거 비활성화 및 활성화</h1>
<p>DISABLE TRIGGER와 ENABLE TRIGGER 문을 사용하여 트리거를 일시적으로 비활성화하고 활성화할 수 있습니다. 이는 유지보수 작업이나 대량 데이터 작업에 유용합니다.</p>
<h2>예시: 트리거 비활성화와 활성화</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">DISABLE</span> <span class="hljs-variable constant_">TRIGGER</span> trgAuditOrderChanges <span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Orders</span>
-- 유지보수 작업 수행
<span class="hljs-variable constant_">ENABLE</span> <span class="hljs-variable constant_">TRIGGER</span> trgAuditOrderChanges <span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Orders</span>
</code></pre>
<div class="content-ad"></div>
<h1>대신에 뷰에서의 트리거</h1>
<p>표준 DML 작업으로 직접 수행할 수 없는 복잡한 업데이트 작업을 지원하기 위해 뷰에 대신에 트리거를 생성할 수 있습니다.</p>
<h2>예시: 뷰에 대신에 트리거 생성</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">VIEW</span> vwOrders
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">SELECT</span> <span class="hljs-title class_">OrderID</span>, <span class="hljs-title class_">CustomerID</span>, <span class="hljs-title class_">OrderDate</span>, <span class="hljs-title class_">TotalAmount</span>
<span class="hljs-variable constant_">FROM</span> <span class="hljs-title class_">Orders</span>

<span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TRIGGER</span> trgInsteadOfInsertOnView
<span class="hljs-variable constant_">ON</span> vwOrders
<span class="hljs-variable constant_">INSTEAD</span> <span class="hljs-variable constant_">OF</span> <span class="hljs-variable constant_">INSERT</span>
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">BEGIN</span>
    <span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> <span class="hljs-title class_">Orders</span> (<span class="hljs-title class_">OrderID</span>, <span class="hljs-title class_">CustomerID</span>, <span class="hljs-title class_">OrderDate</span>, <span class="hljs-title class_">TotalAmount</span>)
    <span class="hljs-variable constant_">SELECT</span> <span class="hljs-title class_">OrderID</span>, <span class="hljs-title class_">CustomerID</span>, <span class="hljs-title class_">OrderDate</span>, <span class="hljs-title class_">TotalAmount</span>
    <span class="hljs-variable constant_">FROM</span> inserted
<span class="hljs-variable constant_">END</span>
</code></pre>
<div class="content-ad"></div>
<h1>스키마</h1>
<h2>직원 테이블</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TABLE</span> <span class="hljs-title class_">Employees</span> (
    <span class="hljs-title class_">EmployeeID</span> <span class="hljs-variable constant_">INT</span> <span class="hljs-variable constant_">PRIMARY</span> <span class="hljs-variable constant_">KEY</span> <span class="hljs-variable constant_">IDENTITY</span>,
    <span class="hljs-title class_">FirstName</span> <span class="hljs-title function_">NVARCHAR</span>(<span class="hljs-number">50</span>),
    <span class="hljs-title class_">LastName</span> <span class="hljs-title function_">NVARCHAR</span>(<span class="hljs-number">50</span>),
    <span class="hljs-title class_">HireDate</span> <span class="hljs-variable constant_">DATE</span>,
    <span class="hljs-title class_">JobTitle</span> <span class="hljs-title function_">NVARCHAR</span>(<span class="hljs-number">50</span>)
);
</code></pre>
<h2>주문 테이블</h2>
<div class="content-ad"></div>
<pre><code class="hljs language-javascript"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TABLE</span> <span class="hljs-title class_">Orders</span> (
    <span class="hljs-title class_">OrderID</span> <span class="hljs-variable constant_">INT</span> <span class="hljs-variable constant_">PRIMARY</span> <span class="hljs-variable constant_">KEY</span> <span class="hljs-variable constant_">IDENTITY</span>,
    <span class="hljs-title class_">CustomerID</span> <span class="hljs-variable constant_">INT</span>,
    <span class="hljs-title class_">OrderDate</span> <span class="hljs-variable constant_">DATE</span>,
    <span class="hljs-title class_">OrderAmount</span> <span class="hljs-title function_">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>)
);
</code></pre>
<h2>AuditLog Table</h2>
<pre><code class="hljs language-javascript"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">TABLE</span> <span class="hljs-title class_">AuditLog</span> (
    <span class="hljs-title class_">AuditID</span> <span class="hljs-variable constant_">INT</span> <span class="hljs-variable constant_">PRIMARY</span> <span class="hljs-variable constant_">KEY</span> <span class="hljs-variable constant_">IDENTITY</span>,
    <span class="hljs-title class_">Action</span> <span class="hljs-title function_">NVARCHAR</span>(<span class="hljs-number">50</span>),
    <span class="hljs-title class_">Description</span> <span class="hljs-title function_">NVARCHAR</span>(<span class="hljs-number">255</span>),
    <span class="hljs-title class_">ActionDate</span> <span class="hljs-variable constant_">DATETIME</span>
);
</code></pre>
<h2>Customers Table</h2>
<div class="content-ad"></div>
<pre><code class="hljs language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Customers (
    CustomerID <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY <span class="hljs-keyword">IDENTITY</span>,
    FirstName NVARCHAR(<span class="hljs-number">50</span>),
    LastName NVARCHAR(<span class="hljs-number">50</span>),
    Email NVARCHAR(<span class="hljs-number">100</span>)
);
</code></pre>
<h2>Sales Table</h2>
<pre><code class="hljs language-sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Sales (
    SaleID <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY <span class="hljs-keyword">IDENTITY</span>,
    ProductID <span class="hljs-type">INT</span>,
    SaleDate <span class="hljs-type">DATE</span>,
    SaleAmount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>, <span class="hljs-number">2</span>),
    Discount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>
);
</code></pre>
<h1>Creating Views</h1>
<div class="content-ad"></div>
<h2>주문 보기</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">VIEW</span> vwOrders
<span class="hljs-variable constant_">AS</span>
<span class="hljs-variable constant_">SELECT</span> <span class="hljs-title class_">OrderID</span>, <span class="hljs-title class_">CustomerID</span>, <span class="hljs-title class_">OrderDate</span>, <span class="hljs-title class_">TotalAmount</span>
<span class="hljs-variable constant_">FROM</span> <span class="hljs-title class_">Orders</span>;
</code></pre>
<h1>인덱스</h1>
<p>트리거의 성능을 최적화하기 위해 Orders 및 Customers 테이블의 CustomerID 및 Orders 테이블의 OrderAmount와 같은 트리거 논리에서 자주 사용되는 열에 인덱스를 생성하는 것이 좋습니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">INDEX</span> idxOrders_CustomerID <span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Orders</span>(<span class="hljs-title class_">CustomerID</span>);
<span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">INDEX</span> idxOrders_OrderAmount <span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Orders</span>(<span class="hljs-title class_">OrderAmount</span>);
<span class="hljs-variable constant_">CREATE</span> <span class="hljs-variable constant_">INDEX</span> idxSales_SaleAmount <span class="hljs-variable constant_">ON</span> <span class="hljs-title class_">Sales</span>(<span class="hljs-title class_">SaleAmount</span>);
</code></pre>
<h1>테스트용 데이터 삽입</h1>
<p>트리거를 테스트하려면 이러한 테이블에 샘플 데이터를 삽입할 수 있습니다.</p>
<h2>직원 테이블에 샘플 데이터 삽입</h2>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> 직원 (이름, 성, 입사일, 직책)
<span class="hljs-variable constant_">VALUES</span>
(<span class="hljs-string">'바바르'</span>, <span class="hljs-string">'아자임'</span>, <span class="hljs-string">'2020-01-15'</span>, <span class="hljs-string">'개발자'</span>),
(<span class="hljs-string">'알리'</span>, <span class="hljs-string">'라자'</span>, <span class="hljs-string">'2019-03-10'</span>, <span class="hljs-string">'매니저'</span>);
</code></pre>
<h2>고객 테이블에 샘플 데이터 삽입</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> 고객 (이름, 성, 이메일)
<span class="hljs-variable constant_">VALUES</span>
(<span class="hljs-string">'앨리스'</span>, <span class="hljs-string">'존슨'</span>, <span class="hljs-string">'alice.johnson@example.com'</span>),
(<span class="hljs-string">'밥'</span>, <span class="hljs-string">'브라운'</span>, <span class="hljs-string">'bob.brown@example.com'</span>);
</code></pre>
<h2>주문 테이블에 샘플 데이터 삽입</h2>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> <span class="hljs-title class_">Orders</span> (<span class="hljs-title class_">CustomerID</span>, <span class="hljs-title class_">OrderDate</span>, <span class="hljs-title class_">OrderAmount</span>)
<span class="hljs-variable constant_">VALUES</span>
(<span class="hljs-number">1</span>, <span class="hljs-string">'2024-05-10'</span>, <span class="hljs-number">250.00</span>),
(<span class="hljs-number">2</span>, <span class="hljs-string">'2024-05-11'</span>, <span class="hljs-number">450.00</span>);
</code></pre>
<h2>Sales 테이블에 샘플 데이터 삽입</h2>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">INSERT</span> <span class="hljs-variable constant_">INTO</span> <span class="hljs-title class_">Sales</span> (<span class="hljs-title class_">ProductID</span>, <span class="hljs-title class_">SaleDate</span>, <span class="hljs-title class_">SaleAmount</span>)
<span class="hljs-variable constant_">VALUES</span>
(<span class="hljs-number">1</span>, <span class="hljs-string">'2024-05-10'</span>, <span class="hljs-number">1500.00</span>),
(<span class="hljs-number">2</span>, <span class="hljs-string">'2024-05-11'</span>, <span class="hljs-number">3000.00</span>);
</code></pre>
<p>이러한 테이블을 생성하고 샘플 데이터를 삽입함으로써, 기사에서 설명한 트리거를 효과적으로 구현하고 테스트할 수 있습니다. 이 스키마는 데이터베이스 환경에서 다양한 유형의 트리거와 실제 적용에 대한 포괄적인 기초를 제공합니다.</p>
<div class="content-ad"></div>
<h1>결론</h1>
<h1>요약</h1>
<p>Microsoft SQL Server의 트리거는 작업 자동화, 비즈니스 규칙 강제, 데이터 무결성 유지 및 복잡한 비즈니스 논리 구현을 위한 강력한 도구입니다. 다른 유형의 트리거와 그 적용 방법을 이해함으로써, 데이터베이스 관리자와 개발자는 견고하고 효율적인 데이터베이스 시스템을 만들 수 있습니다.</p>
<h1>마지막으로 생각해 볼 점</h1>
<div class="content-ad"></div>
<p>트리거는 중요한 이점을 제공하지만, 성능 및 유지 관리에 미치는 영향을 신중히 고려하여 신중하게 사용되어야 합니다. 최상의 모범 사례를 따르고 트리거를 철저히 테스트함으로써 기관은 데이터베이스 응용 프로그램의 기능성과 신뢰성을 향상시키는 데 그들의 전체 잠재력을 활용할 수 있습니다.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"SQL 트리거 이해하는 방법","description":"","date":"2024-05-17 04:02","slug":"2024-05-17-UnderstandingSQLTriggers","content":"\n\n## Microsoft SQL Server 트리거 탐색\n\n![이미지](/assets/img/2024-05-17-UnderstandingSQLTriggers_0.png)\n\n데이터베이스 관리에서 트리거는 데이터베이스에서 특정 이벤트가 발생할 때 자동으로 실행되는 특수 유형의 저장 프로시저입니다. Microsoft SQL Server(MS SQL)에서의 트리거는 비즈니스 규칙 강제, 데이터 무결성 유지 및 데이터베이스 수준에서 복잡한 비즈니스 논리 구현에 사용됩니다. 데이터가 데이터베이스에 커밋되기 전에 특정 조건이나 규칙이 충족되도록 보장하는 데 중요한 역할을 합니다.\n\n## 트리거 중요성\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n현대 데이터베이스 시스템에서 트리거는 중요한 역할을 합니다. 트리거는 반복적인 작업을 자동화하고 비즈니스 규칙을 준수하며 여러 테이블 간의 데이터 무결성을 유지하는 데 도움을 줄 수 있습니다. 트리거를 활용하면 데이터베이스 관리자와 개발자가 데이터의 변경에 동적으로 반응하는 견고하고 신뢰할 수 있는 데이터베이스 애플리케이션을 만들 수 있습니다.\n\n# MS SQL Server의 트리거 유형\n\n# DML 트리거\n\nDML(데이터 조작 언어) 트리거는 MS SQL Server에서 가장 일반적인 유형의 트리거입니다. 이러한 트리거는 테이블이나 뷰에 대한 INSERT, UPDATE 또는 DELETE 작업과 같은 DML 이벤트에 응답하여 발생합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 후 트리거\n\n후 트리거 또는 \"for\" 트리거는 연관된 DML 이벤트가 완료된 후에 실행됩니다. 이러한 트리거는 비즈니스 규칙 및 데이터 무결성을 강제하는 데 유용합니다. 왜냐하면 이벤트 후 데이터의 최종 상태에서 작동하기 때문입니다.\n\n```js\nCREATE TRIGGER trgAfterInsert\nON Employees\nAFTER INSERT\nAS\nBEGIN\n    PRINT 'After Insert Trigger Fired'\n    -- 여기에 추가 로직 작성\nEND\n```\n\n## 대신 트리거\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n트리거 대신 트리거를 사용하여 트리거 이벤트의 기본 작업을 재정의합니다. 이들은 원래 이벤트 대신 실행되어 개발자가 데이터 수정 작업의 동작을 사용자 정의할 수 있게 합니다.\n\n```js\nCREATE TRIGGER trgInsteadOfUpdate\nON Employees\nINSTEAD OF UPDATE\nAS\nBEGIN\n    PRINT '대신 업데이트 트리거 발동됨'\n    -- 여기에 사용자 정의 로직 작성\nEND\n```\n\n# DDL 트리거\n\nDDL(데이터 정의 언어) 트리거는 CREATE, ALTER 또는 DROP 문과 같은 DDL 이벤트에 응답하여 실행됩니다. 이들은 데이터베이스나 서버 수준에서 스키마 변경을 감사하고 정책을 강제하는 데 사용됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nCREATE TRIGGER trgDDLTrigger\nON DATABASE\nFOR CREATE_TABLE\nAS\nBEGIN\n    PRINT '테이블 생성을 위해 DDL 트리거가 발동되었습니다.'\n    -- 감사 기록 로직 추가\nEND\n```\n\n# 로그인 트리거\n\n로그인 트리거는 MS SQL Server에서 LOGON 이벤트에 응답하여 발동됩니다. 로그인 시 사용자 세션을 제어하거나 모니터링하는 데 사용되며, 연결 제한이나 보안 정책 강화 등이 가능합니다.\n\n```js\nCREATE TRIGGER trgLogonTrigger\nON ALL SERVER\nFOR LOGON\nAS\nBEGIN\n    PRINT '로그인 트리거가 발동되었습니다.'\n    -- 보안 확인 로직 추가\nEND\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 트리거 생성 및 관리\n\n# 트리거 생성\n\nMS SQL Server에서 트리거를 생성하는 것은 트리거의 이벤트, 범위 및 수행할 작업을 정의하는 과정을 포함합니다. CREATE TRIGGER 문을 사용하여 트리거를 정의합니다.\n\n## 예시: 삽입 후 트리거 생성\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```sql\nCREATE TRIGGER trgAfterInsert\nON Orders\nAFTER INSERT\nAS\nBEGIN\n    INSERT INTO AuditLog (Action, Description, ActionDate)\n    VALUES ('INSERT', 'Record inserted into Orders', GETDATE())\nEND\n```\n\n## 트리거 수정\n\n기존 트리거를 수정하는 것은 ALTER TRIGGER 문을 사용하는 것을 포함합니다. 이를 통해 개발자는 트리거의 논리를 업데이트할 수 있습니다.\n\n### 예: After Insert 트리거 수정하기\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nmd\n```js\nALTER TRIGGER trgAfterInsert\nON Orders\nAFTER INSERT\nAS\nBEGIN\n    INSERT INTO AuditLog (Action, Description, ActionDate)\n    VALUES ('INSERT', 'New record inserted into Orders', GETDATE())\n    PRINT 'Trigger modified'\nEND\n```\n\n# 트리거 삭제\n\n트리거를 삭제하면 데이터베이스에서 해당 트리거가 삭제되어, 미래 이벤트에 대한 응답으로 실행되지 않습니다. DROP TRIGGER 문을 사용하여 트리거를 삭제할 수 있습니다.\n\n## 예시: After Insert 트리거 삭제\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nDROP TRIGGER trgAfterInsert\nON Orders\n```\n\n# 트리거의 실제 응용\n\n# 비즈니스 규칙 강제\n\n트리거는 제약 조건만으로 구현할 수 없는 비즈니스 규칙을 강제하는 데 일반적으로 사용됩니다. 예를 들어 주문의 총액이 특정 한도를 초과하지 않도록 하는 것과 같은 경우가 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 예시: 트리거를 사용하여 비즈니스 규칙 강제하기\n\n```js\nCREATE TRIGGER trgCheckOrderAmount\nON Orders\nAFTER INSERT, UPDATE\nAS\nBEGIN\n    DECLARE @TotalAmount DECIMAL(10, 2)\n    SELECT @TotalAmount = SUM(OrderAmount) FROM inserted\n    IF @TotalAmount \u003e 10000\n    BEGIN\n        RAISERROR('주문 금액이 한도를 초과합니다', 16, 1)\n        ROLLBACK TRANSACTION\n    END\nEND\n```\n\n# 데이터 무결성 유지\n\n트리거는 관련된 테이블 간의 일관성을 보장하여 데이터 무결성을 유지하는 데 도움을 줍니다. 예를 들어, 외래키 무결성을 유지하기 위해 연쇄 업데이트 또는 삭제를 수행할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 예시: 트리거를 사용하여 데이터 무결성 유지하기\n\n```js\nCREATE TRIGGER trgCascadeDelete\nON Customers\nAFTER DELETE\nAS\nBEGIN\n    DELETE FROM Orders WHERE CustomerID IN (SELECT CustomerID FROM deleted)\nEND\n```\n\n# 감사 및 로깅\n\n트리거는 중요 데이터의 변경 사항을 감사하고 로깅하는 데 널리 사용됩니다. 이를 통해 규정 준수 및 문제 해결 목적으로 데이터 수정에 대한 이력 기록이 제공됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 예제: 트리거를 사용한 데이터 변경 감사\n\n```js\nCREATE TRIGGER trgAuditOrderChanges \nON Orders \nAFTER INSERT, UPDATE, DELETE \nAS \nBEGIN \n    DECLARE @Action CHAR(6) \n    IF EXISTS (SELECT * FROM inserted) AND EXISTS (SELECT * FROM deleted) \n        SET @Action = 'UPDATE' \n    ELSE IF EXISTS (SELECT * FROM inserted) \n        SET @Action = 'INSERT' \n    ELSE \n        SET @Action = 'DELETE' \n\n    INSERT INTO AuditLog (Action, TableName, ActionDate) \n    VALUES (@Action, 'Orders', GETDATE()) \nEND \n```\n\n# 복잡한 비즈니스 로직 구현\n\n트리거를 사용하여 여러 단계 또는 조건을 포함하는 복잡한 비즈니스 로직을 구현할 수 있습니다. 이는 데이터베이스 수준에서 비즈니스 규칙을 캡슐화하는 데 도움이 됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 예시: 트리거를 사용하여 복잡한 비즈니스 로직 구현\n\n```js\nCREATE TRIGGER trgComplexLogic\nON Sales\nAFTER INSERT, UPDATE\nAS\nBEGIN\n    DECLARE @TotalSales DECIMAL(10, 2)\n    SELECT @TotalSales = SUM(SaleAmount) FROM Sales\n\n    IF @TotalSales \u003e 50000\n    BEGIN\n        -- 할인 로직 적용\n        UPDATE Sales\n        SET Discount = 0.1\n        WHERE SaleAmount \u003e 1000\n    END\nEND\n```\n\n# 트리거 사용에 대한 Best Practices\n\n# 신중하게 트리거 사용하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n트리거는 복잡성과 성능 부담을 야기할 수 있습니다. 중요한 비즈니스 규칙을 시행하거나 데이터 무결성을 유지해야 할 때에만 신중하게 사용하세요.\n\n## 트리거에서 복잡한 로직 피하기\n\n트리거 내의 로직을 간단하고 효율적으로 유지하세요. 복잡한 로직은 성능 문제를 일으키고 디버깅을 어렵게 만들 수 있습니다.\n\n## 중첩 트리거 사용 최소화하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n테이블 태그를 마크다운 형식으로 변경해보세요.\n\n\n| Header1 | Header2 |\n|---------|---------|\n| Data1   | Data2   |\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n각 트리거의 목적과 논리를 문서화하여 코드를 이해하고 유지 관리하기 쉽도록 하세요.\n\n# 성능 고려사항\n\n# 성능에 미치는 영향\n\n트리거는 DML 작업의 성능에 영향을 줄 수 있습니다. 왜냐하면 추가적인 처리 단계를 도입하기 때문입니다. 트리거의 성능 영향을 특히 높은 트랜잭션 환경에서는 평가하는 것이 중요합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 색인 및 트리거\n\n적절한 색인을 사용하면 트리거의 성능을 향상시킬 수 있습니다. 트리거 로직 내의 쿼리 실행 속도를 높이기 위해 관련 열을 적절히 색인화하십시오.\n\n# 모니터링 및 조정\n\n정기적으로 트리거의 성능을 모니터링하고 필요에 따라 튜닝하십시오. SQL Server Profiler 및 Extended Events와 같은 도구를 사용하여 데이터베이스 성능에 미치는 트리거의 영향을 분석하십시오.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 고급 주제\n\n# 재귀 트리거\n\n재귀 트리거는 자신을 직접 또는간접적으로 호출하는 트리거입니다. MS SQL Server에서는 재귀 트리거를 허용하지만 무한 루프와 성능 문제를 피하기 위해 주의해서 사용해야 합니다.\n\n```js\nALTER DATABASE AdventureWorks2012\nSET RECURSIVE_TRIGGERS ON\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 트리거 비활성화 및 활성화\n\nDISABLE TRIGGER와 ENABLE TRIGGER 문을 사용하여 트리거를 일시적으로 비활성화하고 활성화할 수 있습니다. 이는 유지보수 작업이나 대량 데이터 작업에 유용합니다.\n\n## 예시: 트리거 비활성화와 활성화\n\n```js\nDISABLE TRIGGER trgAuditOrderChanges ON Orders\n-- 유지보수 작업 수행\nENABLE TRIGGER trgAuditOrderChanges ON Orders\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 대신에 뷰에서의 트리거\n\n표준 DML 작업으로 직접 수행할 수 없는 복잡한 업데이트 작업을 지원하기 위해 뷰에 대신에 트리거를 생성할 수 있습니다.\n\n## 예시: 뷰에 대신에 트리거 생성\n\n```js\nCREATE VIEW vwOrders\nAS\nSELECT OrderID, CustomerID, OrderDate, TotalAmount\nFROM Orders\n\nCREATE TRIGGER trgInsteadOfInsertOnView\nON vwOrders\nINSTEAD OF INSERT\nAS\nBEGIN\n    INSERT INTO Orders (OrderID, CustomerID, OrderDate, TotalAmount)\n    SELECT OrderID, CustomerID, OrderDate, TotalAmount\n    FROM inserted\nEND\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 스키마\n\n## 직원 테이블\n\n```js\nCREATE TABLE Employees (\n    EmployeeID INT PRIMARY KEY IDENTITY,\n    FirstName NVARCHAR(50),\n    LastName NVARCHAR(50),\n    HireDate DATE,\n    JobTitle NVARCHAR(50)\n);\n```\n\n## 주문 테이블\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n```javascript\nCREATE TABLE Orders (\n    OrderID INT PRIMARY KEY IDENTITY,\n    CustomerID INT,\n    OrderDate DATE,\n    OrderAmount DECIMAL(10, 2)\n);\n```\n\n## AuditLog Table\n\n```javascript\nCREATE TABLE AuditLog (\n    AuditID INT PRIMARY KEY IDENTITY,\n    Action NVARCHAR(50),\n    Description NVARCHAR(255),\n    ActionDate DATETIME\n);\n```\n\n## Customers Table\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```sql\nCREATE TABLE Customers (\n    CustomerID INT PRIMARY KEY IDENTITY,\n    FirstName NVARCHAR(50),\n    LastName NVARCHAR(50),\n    Email NVARCHAR(100)\n);\n```\n\n## Sales Table\n\n```sql\nCREATE TABLE Sales (\n    SaleID INT PRIMARY KEY IDENTITY,\n    ProductID INT,\n    SaleDate DATE,\n    SaleAmount DECIMAL(10, 2),\n    Discount DECIMAL(5, 2) DEFAULT 0\n);\n```\n\n# Creating Views\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 주문 보기\n\n```js\nCREATE VIEW vwOrders\nAS\nSELECT OrderID, CustomerID, OrderDate, TotalAmount\nFROM Orders;\n```\n\n# 인덱스\n\n트리거의 성능을 최적화하기 위해 Orders 및 Customers 테이블의 CustomerID 및 Orders 테이블의 OrderAmount와 같은 트리거 논리에서 자주 사용되는 열에 인덱스를 생성하는 것이 좋습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nCREATE INDEX idxOrders_CustomerID ON Orders(CustomerID);\nCREATE INDEX idxOrders_OrderAmount ON Orders(OrderAmount);\nCREATE INDEX idxSales_SaleAmount ON Sales(SaleAmount);\n```\n\n# 테스트용 데이터 삽입\n\n트리거를 테스트하려면 이러한 테이블에 샘플 데이터를 삽입할 수 있습니다.\n\n## 직원 테이블에 샘플 데이터 삽입\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nINSERT INTO 직원 (이름, 성, 입사일, 직책)\nVALUES\n('바바르', '아자임', '2020-01-15', '개발자'),\n('알리', '라자', '2019-03-10', '매니저');\n```\n\n## 고객 테이블에 샘플 데이터 삽입\n\n```js\nINSERT INTO 고객 (이름, 성, 이메일)\nVALUES\n('앨리스', '존슨', 'alice.johnson@example.com'),\n('밥', '브라운', 'bob.brown@example.com');\n```\n\n## 주문 테이블에 샘플 데이터 삽입\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nINSERT INTO Orders (CustomerID, OrderDate, OrderAmount)\nVALUES\n(1, '2024-05-10', 250.00),\n(2, '2024-05-11', 450.00);\n```\n\n## Sales 테이블에 샘플 데이터 삽입\n\n```js\nINSERT INTO Sales (ProductID, SaleDate, SaleAmount)\nVALUES\n(1, '2024-05-10', 1500.00),\n(2, '2024-05-11', 3000.00);\n```\n\n이러한 테이블을 생성하고 샘플 데이터를 삽입함으로써, 기사에서 설명한 트리거를 효과적으로 구현하고 테스트할 수 있습니다. 이 스키마는 데이터베이스 환경에서 다양한 유형의 트리거와 실제 적용에 대한 포괄적인 기초를 제공합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 결론\n\n# 요약\n\nMicrosoft SQL Server의 트리거는 작업 자동화, 비즈니스 규칙 강제, 데이터 무결성 유지 및 복잡한 비즈니스 논리 구현을 위한 강력한 도구입니다. 다른 유형의 트리거와 그 적용 방법을 이해함으로써, 데이터베이스 관리자와 개발자는 견고하고 효율적인 데이터베이스 시스템을 만들 수 있습니다.\n\n# 마지막으로 생각해 볼 점\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n트리거는 중요한 이점을 제공하지만, 성능 및 유지 관리에 미치는 영향을 신중히 고려하여 신중하게 사용되어야 합니다. 최상의 모범 사례를 따르고 트리거를 철저히 테스트함으로써 기관은 데이터베이스 응용 프로그램의 기능성과 신뢰성을 향상시키는 데 그들의 전체 잠재력을 활용할 수 있습니다.","ogImage":{"url":"/assets/img/2024-05-17-UnderstandingSQLTriggers_0.png"},"coverImage":"/assets/img/2024-05-17-UnderstandingSQLTriggers_0.png","tag":["Tech"],"readingTime":10},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003ch2\u003eMicrosoft SQL Server 트리거 탐색\u003c/h2\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-17-UnderstandingSQLTriggers_0.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e데이터베이스 관리에서 트리거는 데이터베이스에서 특정 이벤트가 발생할 때 자동으로 실행되는 특수 유형의 저장 프로시저입니다. Microsoft SQL Server(MS SQL)에서의 트리거는 비즈니스 규칙 강제, 데이터 무결성 유지 및 데이터베이스 수준에서 복잡한 비즈니스 논리 구현에 사용됩니다. 데이터가 데이터베이스에 커밋되기 전에 특정 조건이나 규칙이 충족되도록 보장하는 데 중요한 역할을 합니다.\u003c/p\u003e\n\u003ch2\u003e트리거 중요성\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e현대 데이터베이스 시스템에서 트리거는 중요한 역할을 합니다. 트리거는 반복적인 작업을 자동화하고 비즈니스 규칙을 준수하며 여러 테이블 간의 데이터 무결성을 유지하는 데 도움을 줄 수 있습니다. 트리거를 활용하면 데이터베이스 관리자와 개발자가 데이터의 변경에 동적으로 반응하는 견고하고 신뢰할 수 있는 데이터베이스 애플리케이션을 만들 수 있습니다.\u003c/p\u003e\n\u003ch1\u003eMS SQL Server의 트리거 유형\u003c/h1\u003e\n\u003ch1\u003eDML 트리거\u003c/h1\u003e\n\u003cp\u003eDML(데이터 조작 언어) 트리거는 MS SQL Server에서 가장 일반적인 유형의 트리거입니다. 이러한 트리거는 테이블이나 뷰에 대한 INSERT, UPDATE 또는 DELETE 작업과 같은 DML 이벤트에 응답하여 발생합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e후 트리거\u003c/h2\u003e\n\u003cp\u003e후 트리거 또는 \"for\" 트리거는 연관된 DML 이벤트가 완료된 후에 실행됩니다. 이러한 트리거는 비즈니스 규칙 및 데이터 무결성을 강제하는 데 유용합니다. 왜냐하면 이벤트 후 데이터의 최종 상태에서 작동하기 때문입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgAfterInsert\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEmployees\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003ePRINT\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'After Insert Trigger Fired'\u003c/span\u003e\n    -- 여기에 추가 로직 작성\n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e대신 트리거\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e트리거 대신 트리거를 사용하여 트리거 이벤트의 기본 작업을 재정의합니다. 이들은 원래 이벤트 대신 실행되어 개발자가 데이터 수정 작업의 동작을 사용자 정의할 수 있게 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgInsteadOfUpdate\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEmployees\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eINSTEAD\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eOF\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eUPDATE\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003ePRINT\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'대신 업데이트 트리거 발동됨'\u003c/span\u003e\n    -- 여기에 사용자 정의 로직 작성\n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eDDL 트리거\u003c/h1\u003e\n\u003cp\u003eDDL(데이터 정의 언어) 트리거는 CREATE, ALTER 또는 DROP 문과 같은 DDL 이벤트에 응답하여 실행됩니다. 이들은 데이터베이스나 서버 수준에서 스키마 변경을 감사하고 정책을 강제하는 데 사용됩니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgDDLTrigger\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eDATABASE\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eFOR\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eCREATE_TABLE\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003ePRINT\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'테이블 생성을 위해 DDL 트리거가 발동되었습니다.'\u003c/span\u003e\n    -- 감사 기록 로직 추가\n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e로그인 트리거\u003c/h1\u003e\n\u003cp\u003e로그인 트리거는 MS SQL Server에서 LOGON 이벤트에 응답하여 발동됩니다. 로그인 시 사용자 세션을 제어하거나 모니터링하는 데 사용되며, 연결 제한이나 보안 정책 강화 등이 가능합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgLogonTrigger\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eALL\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eSERVER\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eFOR\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eLOGON\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003ePRINT\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'로그인 트리거가 발동되었습니다.'\u003c/span\u003e\n    -- 보안 확인 로직 추가\n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e트리거 생성 및 관리\u003c/h1\u003e\n\u003ch1\u003e트리거 생성\u003c/h1\u003e\n\u003cp\u003eMS SQL Server에서 트리거를 생성하는 것은 트리거의 이벤트, 범위 및 수행할 작업을 정의하는 과정을 포함합니다. CREATE TRIGGER 문을 사용하여 트리거를 정의합니다.\u003c/p\u003e\n\u003ch2\u003e예시: 삽입 후 트리거 생성\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTRIGGER\u003c/span\u003e trgAfterInsert\n\u003cspan class=\"hljs-keyword\"\u003eON\u003c/span\u003e Orders\nAFTER \u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e AuditLog (Action, Description, ActionDate)\n    \u003cspan class=\"hljs-keyword\"\u003eVALUES\u003c/span\u003e (\u003cspan class=\"hljs-string\"\u003e'INSERT'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Record inserted into Orders'\u003c/span\u003e, GETDATE())\n\u003cspan class=\"hljs-keyword\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e트리거 수정\u003c/h2\u003e\n\u003cp\u003e기존 트리거를 수정하는 것은 ALTER TRIGGER 문을 사용하는 것을 포함합니다. 이를 통해 개발자는 트리거의 논리를 업데이트할 수 있습니다.\u003c/p\u003e\n\u003ch3\u003e예: After Insert 트리거 수정하기\u003c/h3\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003emd\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eALTER\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgAfterInsert\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINTO\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuditLog\u003c/span\u003e (\u003cspan class=\"hljs-title class_\"\u003eAction\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eDescription\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eActionDate\u003c/span\u003e)\n    \u003cspan class=\"hljs-variable constant_\"\u003eVALUES\u003c/span\u003e (\u003cspan class=\"hljs-string\"\u003e'INSERT'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'New record inserted into Orders'\u003c/span\u003e, \u003cspan class=\"hljs-title function_\"\u003eGETDATE\u003c/span\u003e())\n    \u003cspan class=\"hljs-variable constant_\"\u003ePRINT\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'Trigger modified'\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e트리거 삭제\u003c/h1\u003e\n\u003cp\u003e트리거를 삭제하면 데이터베이스에서 해당 트리거가 삭제되어, 미래 이벤트에 대한 응답으로 실행되지 않습니다. DROP TRIGGER 문을 사용하여 트리거를 삭제할 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e예시: After Insert 트리거 삭제\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eDROP\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgAfterInsert\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e트리거의 실제 응용\u003c/h1\u003e\n\u003ch1\u003e비즈니스 규칙 강제\u003c/h1\u003e\n\u003cp\u003e트리거는 제약 조건만으로 구현할 수 없는 비즈니스 규칙을 강제하는 데 일반적으로 사용됩니다. 예를 들어 주문의 총액이 특정 한도를 초과하지 않도록 하는 것과 같은 경우가 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e예시: 트리거를 사용하여 비즈니스 규칙 강제하기\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgCheckOrderAmount\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eUPDATE\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eDECLARE\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eTotalAmount\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n    \u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eTotalAmount\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003eSUM\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eOrderAmount\u003c/span\u003e) \u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e inserted\n    \u003cspan class=\"hljs-variable constant_\"\u003eIF\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eTotalAmount\u003c/span\u003e \u003e \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n        \u003cspan class=\"hljs-title function_\"\u003eRAISERROR\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'주문 금액이 한도를 초과합니다'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n        \u003cspan class=\"hljs-variable constant_\"\u003eROLLBACK\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRANSACTION\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e데이터 무결성 유지\u003c/h1\u003e\n\u003cp\u003e트리거는 관련된 테이블 간의 일관성을 보장하여 데이터 무결성을 유지하는 데 도움을 줍니다. 예를 들어, 외래키 무결성을 유지하기 위해 연쇄 업데이트 또는 삭제를 수행할 수 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e예시: 트리거를 사용하여 데이터 무결성 유지하기\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgCascadeDelete\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCustomers\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eDELETE\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eDELETE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eWHERE\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCustomerID\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eIN\u003c/span\u003e (\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eCustomerID\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e deleted)\n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e감사 및 로깅\u003c/h1\u003e\n\u003cp\u003e트리거는 중요 데이터의 변경 사항을 감사하고 로깅하는 데 널리 사용됩니다. 이를 통해 규정 준수 및 문제 해결 목적으로 데이터 수정에 대한 이력 기록이 제공됩니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e예제: 트리거를 사용한 데이터 변경 감사\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgAuditOrderChanges \n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e \n\u003cspan class=\"hljs-variable constant_\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eUPDATE\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eDELETE\u003c/span\u003e \n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e \n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e \n    \u003cspan class=\"hljs-variable constant_\"\u003eDECLARE\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eAction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e) \n    \u003cspan class=\"hljs-variable constant_\"\u003eIF\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eEXISTS\u003c/span\u003e (\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e * \u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e inserted) \u003cspan class=\"hljs-variable constant_\"\u003eAND\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eEXISTS\u003c/span\u003e (\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e * \u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e deleted) \n        \u003cspan class=\"hljs-variable constant_\"\u003eSET\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eAction\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e'UPDATE'\u003c/span\u003e \n    \u003cspan class=\"hljs-variable constant_\"\u003eELSE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eIF\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eEXISTS\u003c/span\u003e (\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e * \u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e inserted) \n        \u003cspan class=\"hljs-variable constant_\"\u003eSET\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eAction\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e'INSERT'\u003c/span\u003e \n    \u003cspan class=\"hljs-variable constant_\"\u003eELSE\u003c/span\u003e \n        \u003cspan class=\"hljs-variable constant_\"\u003eSET\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eAction\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e'DELETE'\u003c/span\u003e \n\n    \u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINTO\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuditLog\u003c/span\u003e (\u003cspan class=\"hljs-title class_\"\u003eAction\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eTableName\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eActionDate\u003c/span\u003e) \n    \u003cspan class=\"hljs-variable constant_\"\u003eVALUES\u003c/span\u003e (@\u003cspan class=\"hljs-title class_\"\u003eAction\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'Orders'\u003c/span\u003e, \u003cspan class=\"hljs-title function_\"\u003eGETDATE\u003c/span\u003e()) \n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e \n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e복잡한 비즈니스 로직 구현\u003c/h1\u003e\n\u003cp\u003e트리거를 사용하여 여러 단계 또는 조건을 포함하는 복잡한 비즈니스 로직을 구현할 수 있습니다. 이는 데이터베이스 수준에서 비즈니스 규칙을 캡슐화하는 데 도움이 됩니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e예시: 트리거를 사용하여 복잡한 비즈니스 로직 구현\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgComplexLogic\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSales\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAFTER\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eUPDATE\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eDECLARE\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eTotalSales\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n    \u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eTotalSales\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003eSUM\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eSaleAmount\u003c/span\u003e) \u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSales\u003c/span\u003e\n\n    \u003cspan class=\"hljs-variable constant_\"\u003eIF\u003c/span\u003e @\u003cspan class=\"hljs-title class_\"\u003eTotalSales\u003c/span\u003e \u003e \u003cspan class=\"hljs-number\"\u003e50000\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n        -- 할인 로직 적용\n        \u003cspan class=\"hljs-variable constant_\"\u003eUPDATE\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSales\u003c/span\u003e\n        \u003cspan class=\"hljs-variable constant_\"\u003eSET\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDiscount\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e0.1\u003c/span\u003e\n        \u003cspan class=\"hljs-variable constant_\"\u003eWHERE\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSaleAmount\u003c/span\u003e \u003e \u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e트리거 사용에 대한 Best Practices\u003c/h1\u003e\n\u003ch1\u003e신중하게 트리거 사용하기\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e트리거는 복잡성과 성능 부담을 야기할 수 있습니다. 중요한 비즈니스 규칙을 시행하거나 데이터 무결성을 유지해야 할 때에만 신중하게 사용하세요.\u003c/p\u003e\n\u003ch2\u003e트리거에서 복잡한 로직 피하기\u003c/h2\u003e\n\u003cp\u003e트리거 내의 로직을 간단하고 효율적으로 유지하세요. 복잡한 로직은 성능 문제를 일으키고 디버깅을 어렵게 만들 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e중첩 트리거 사용 최소화하기\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e테이블 태그를 마크다운 형식으로 변경해보세요.\u003c/p\u003e\n\n\n\n\n\n\n\n\n\n\n\n\n\n\u003ctable\u003e\u003cthead\u003e\u003ctr\u003e\u003cth\u003eHeader1\u003c/th\u003e\u003cth\u003eHeader2\u003c/th\u003e\u003c/tr\u003e\u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\u003ctd\u003eData1\u003c/td\u003e\u003ctd\u003eData2\u003c/td\u003e\u003c/tr\u003e\u003c/tbody\u003e\u003c/table\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e각 트리거의 목적과 논리를 문서화하여 코드를 이해하고 유지 관리하기 쉽도록 하세요.\u003c/p\u003e\n\u003ch1\u003e성능 고려사항\u003c/h1\u003e\n\u003ch1\u003e성능에 미치는 영향\u003c/h1\u003e\n\u003cp\u003e트리거는 DML 작업의 성능에 영향을 줄 수 있습니다. 왜냐하면 추가적인 처리 단계를 도입하기 때문입니다. 트리거의 성능 영향을 특히 높은 트랜잭션 환경에서는 평가하는 것이 중요합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e색인 및 트리거\u003c/h1\u003e\n\u003cp\u003e적절한 색인을 사용하면 트리거의 성능을 향상시킬 수 있습니다. 트리거 로직 내의 쿼리 실행 속도를 높이기 위해 관련 열을 적절히 색인화하십시오.\u003c/p\u003e\n\u003ch1\u003e모니터링 및 조정\u003c/h1\u003e\n\u003cp\u003e정기적으로 트리거의 성능을 모니터링하고 필요에 따라 튜닝하십시오. SQL Server Profiler 및 Extended Events와 같은 도구를 사용하여 데이터베이스 성능에 미치는 트리거의 영향을 분석하십시오.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e고급 주제\u003c/h1\u003e\n\u003ch1\u003e재귀 트리거\u003c/h1\u003e\n\u003cp\u003e재귀 트리거는 자신을 직접 또는간접적으로 호출하는 트리거입니다. MS SQL Server에서는 재귀 트리거를 허용하지만 무한 루프와 성능 문제를 피하기 위해 주의해서 사용해야 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eALTER\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eDATABASE\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAdventureWorks2012\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eSET\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eRECURSIVE_TRIGGERS\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e트리거 비활성화 및 활성화\u003c/h1\u003e\n\u003cp\u003eDISABLE TRIGGER와 ENABLE TRIGGER 문을 사용하여 트리거를 일시적으로 비활성화하고 활성화할 수 있습니다. 이는 유지보수 작업이나 대량 데이터 작업에 유용합니다.\u003c/p\u003e\n\u003ch2\u003e예시: 트리거 비활성화와 활성화\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eDISABLE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgAuditOrderChanges \u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e\n-- 유지보수 작업 수행\n\u003cspan class=\"hljs-variable constant_\"\u003eENABLE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgAuditOrderChanges \u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e대신에 뷰에서의 트리거\u003c/h1\u003e\n\u003cp\u003e표준 DML 작업으로 직접 수행할 수 없는 복잡한 업데이트 작업을 지원하기 위해 뷰에 대신에 트리거를 생성할 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e예시: 뷰에 대신에 트리거 생성\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eVIEW\u003c/span\u003e vwOrders\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrderID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eCustomerID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eOrderDate\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eTotalAmount\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTRIGGER\u003c/span\u003e trgInsteadOfInsertOnView\n\u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e vwOrders\n\u003cspan class=\"hljs-variable constant_\"\u003eINSTEAD\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eOF\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eBEGIN\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINTO\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e (\u003cspan class=\"hljs-title class_\"\u003eOrderID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eCustomerID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eOrderDate\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eTotalAmount\u003c/span\u003e)\n    \u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrderID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eCustomerID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eOrderDate\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eTotalAmount\u003c/span\u003e\n    \u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e inserted\n\u003cspan class=\"hljs-variable constant_\"\u003eEND\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e스키마\u003c/h1\u003e\n\u003ch2\u003e직원 테이블\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEmployees\u003c/span\u003e (\n    \u003cspan class=\"hljs-title class_\"\u003eEmployeeID\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003ePRIMARY\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eKEY\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eIDENTITY\u003c/span\u003e,\n    \u003cspan class=\"hljs-title class_\"\u003eFirstName\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eNVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e),\n    \u003cspan class=\"hljs-title class_\"\u003eLastName\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eNVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e),\n    \u003cspan class=\"hljs-title class_\"\u003eHireDate\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eDATE\u003c/span\u003e,\n    \u003cspan class=\"hljs-title class_\"\u003eJobTitle\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eNVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e)\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e주문 테이블\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e (\n    \u003cspan class=\"hljs-title class_\"\u003eOrderID\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003ePRIMARY\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eKEY\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eIDENTITY\u003c/span\u003e,\n    \u003cspan class=\"hljs-title class_\"\u003eCustomerID\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINT\u003c/span\u003e,\n    \u003cspan class=\"hljs-title class_\"\u003eOrderDate\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eDATE\u003c/span\u003e,\n    \u003cspan class=\"hljs-title class_\"\u003eOrderAmount\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e)\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eAuditLog Table\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuditLog\u003c/span\u003e (\n    \u003cspan class=\"hljs-title class_\"\u003eAuditID\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003ePRIMARY\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eKEY\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eIDENTITY\u003c/span\u003e,\n    \u003cspan class=\"hljs-title class_\"\u003eAction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eNVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e),\n    \u003cspan class=\"hljs-title class_\"\u003eDescription\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eNVARCHAR\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e255\u003c/span\u003e),\n    \u003cspan class=\"hljs-title class_\"\u003eActionDate\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eDATETIME\u003c/span\u003e\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eCustomers Table\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e Customers (\n    CustomerID \u003cspan class=\"hljs-type\"\u003eINT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ePRIMARY\u003c/span\u003e KEY \u003cspan class=\"hljs-keyword\"\u003eIDENTITY\u003c/span\u003e,\n    FirstName NVARCHAR(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e),\n    LastName NVARCHAR(\u003cspan class=\"hljs-number\"\u003e50\u003c/span\u003e),\n    Email NVARCHAR(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e)\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSales Table\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e Sales (\n    SaleID \u003cspan class=\"hljs-type\"\u003eINT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ePRIMARY\u003c/span\u003e KEY \u003cspan class=\"hljs-keyword\"\u003eIDENTITY\u003c/span\u003e,\n    ProductID \u003cspan class=\"hljs-type\"\u003eINT\u003c/span\u003e,\n    SaleDate \u003cspan class=\"hljs-type\"\u003eDATE\u003c/span\u003e,\n    SaleAmount \u003cspan class=\"hljs-type\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e),\n    Discount \u003cspan class=\"hljs-type\"\u003eDECIMAL\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eDEFAULT\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eCreating Views\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e주문 보기\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eVIEW\u003c/span\u003e vwOrders\n\u003cspan class=\"hljs-variable constant_\"\u003eAS\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrderID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eCustomerID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eOrderDate\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eTotalAmount\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e인덱스\u003c/h1\u003e\n\u003cp\u003e트리거의 성능을 최적화하기 위해 Orders 및 Customers 테이블의 CustomerID 및 Orders 테이블의 OrderAmount와 같은 트리거 논리에서 자주 사용되는 열에 인덱스를 생성하는 것이 좋습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINDEX\u003c/span\u003e idxOrders_CustomerID \u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eCustomerID\u003c/span\u003e);\n\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINDEX\u003c/span\u003e idxOrders_OrderAmount \u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eOrderAmount\u003c/span\u003e);\n\u003cspan class=\"hljs-variable constant_\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINDEX\u003c/span\u003e idxSales_SaleAmount \u003cspan class=\"hljs-variable constant_\"\u003eON\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSales\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eSaleAmount\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e테스트용 데이터 삽입\u003c/h1\u003e\n\u003cp\u003e트리거를 테스트하려면 이러한 테이블에 샘플 데이터를 삽입할 수 있습니다.\u003c/p\u003e\n\u003ch2\u003e직원 테이블에 샘플 데이터 삽입\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINTO\u003c/span\u003e 직원 (이름, 성, 입사일, 직책)\n\u003cspan class=\"hljs-variable constant_\"\u003eVALUES\u003c/span\u003e\n(\u003cspan class=\"hljs-string\"\u003e'바바르'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'아자임'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2020-01-15'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'개발자'\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'알리'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'라자'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2019-03-10'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'매니저'\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e고객 테이블에 샘플 데이터 삽입\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINTO\u003c/span\u003e 고객 (이름, 성, 이메일)\n\u003cspan class=\"hljs-variable constant_\"\u003eVALUES\u003c/span\u003e\n(\u003cspan class=\"hljs-string\"\u003e'앨리스'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'존슨'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'alice.johnson@example.com'\u003c/span\u003e),\n(\u003cspan class=\"hljs-string\"\u003e'밥'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'브라운'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'bob.brown@example.com'\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e주문 테이블에 샘플 데이터 삽입\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINTO\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOrders\u003c/span\u003e (\u003cspan class=\"hljs-title class_\"\u003eCustomerID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eOrderDate\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eOrderAmount\u003c/span\u003e)\n\u003cspan class=\"hljs-variable constant_\"\u003eVALUES\u003c/span\u003e\n(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-05-10'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e250.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-05-11'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e450.00\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eSales 테이블에 샘플 데이터 삽입\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eINTO\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSales\u003c/span\u003e (\u003cspan class=\"hljs-title class_\"\u003eProductID\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eSaleDate\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eSaleAmount\u003c/span\u003e)\n\u003cspan class=\"hljs-variable constant_\"\u003eVALUES\u003c/span\u003e\n(\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-05-10'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e1500.00\u003c/span\u003e),\n(\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'2024-05-11'\u003c/span\u003e, \u003cspan class=\"hljs-number\"\u003e3000.00\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이러한 테이블을 생성하고 샘플 데이터를 삽입함으로써, 기사에서 설명한 트리거를 효과적으로 구현하고 테스트할 수 있습니다. 이 스키마는 데이터베이스 환경에서 다양한 유형의 트리거와 실제 적용에 대한 포괄적인 기초를 제공합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003ch1\u003e요약\u003c/h1\u003e\n\u003cp\u003eMicrosoft SQL Server의 트리거는 작업 자동화, 비즈니스 규칙 강제, 데이터 무결성 유지 및 복잡한 비즈니스 논리 구현을 위한 강력한 도구입니다. 다른 유형의 트리거와 그 적용 방법을 이해함으로써, 데이터베이스 관리자와 개발자는 견고하고 효율적인 데이터베이스 시스템을 만들 수 있습니다.\u003c/p\u003e\n\u003ch1\u003e마지막으로 생각해 볼 점\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e트리거는 중요한 이점을 제공하지만, 성능 및 유지 관리에 미치는 영향을 신중히 고려하여 신중하게 사용되어야 합니다. 최상의 모범 사례를 따르고 트리거를 철저히 테스트함으로써 기관은 데이터베이스 응용 프로그램의 기능성과 신뢰성을 향상시키는 데 그들의 전체 잠재력을 활용할 수 있습니다.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-17-UnderstandingSQLTriggers"},"buildId":"Rv-NbbtWUaja2joH5WkO_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>