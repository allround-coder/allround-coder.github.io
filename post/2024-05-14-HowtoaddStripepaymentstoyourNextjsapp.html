<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Nextjs ì•±ì— Stripe ê²°ì œ ì¶”ê°€í•˜ëŠ” ë°©ë²• | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Nextjs ì•±ì— Stripe ê²°ì œ ì¶”ê°€í•˜ëŠ” ë°©ë²• | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="Nextjs ì•±ì— Stripe ê²°ì œ ì¶”ê°€í•˜ëŠ” ë°©ë²• | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp" data-gatsby-head="true"/><meta name="twitter:title" content="Nextjs ì•±ì— Stripe ê²°ì œ ì¶”ê°€í•˜ëŠ” ë°©ë²• | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-14 16:09" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/Y-fCAg8BUV7y2HNFwX9AA/_buildManifest.js" defer=""></script><script src="/_next/static/Y-fCAg8BUV7y2HNFwX9AA/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Nextjs ì•±ì— Stripe ê²°ì œ ì¶”ê°€í•˜ëŠ” ë°©ë²•</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Nextjs ì•±ì— Stripe ê²°ì œ ì¶”ê°€í•˜ëŠ” ë°©ë²•" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 14, 2024</span><span class="posts_reading_time__f7YPP">10<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_0.png">
<p>ì™€! ë‚´ ë§¤ì²´ ì•”í˜¸ë¥¼ ì°¾ì•˜ì–´ìš”!</p>
<p>ì´ì œ, ë‚´ ì²« ë²ˆì§¸ ê¸°ì‚¬ì—ì„œ Stripeë¥¼ Next.js ì•±ì— í†µí•©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ë ¤ê³  í•´ìš”.</p>
<p>ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë„ˆë¬´ ë³µì¡í•œ ê²ƒì„ ë§Œë“œëŠ” ë° ì£¼ì˜ë¥¼ ê¸°ìš¸ì´ì§€ ì•Šì„ ê±°ì—ìš”. ëŒ€ì‹ ì— ìš°ë¦¬ëŠ” ê°„í¸í•œ Next.js 13.4 ì•±ì„ ê°œë°œí•˜ì—¬ ì¼íšŒì„± Stripe ê²°ì œë¥¼ ê°€ëŠ¥í•˜ê²Œ í•  ê±°ì—ìš”.</p>
<h2>ì„¤ì •í•˜ê¸°</h2>
<p>í„°ë¯¸ë„ì„ ì—´ê³  ë‚˜ì˜ ê²½ìš°ì—ëŠ” Workspace ì•ˆì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js">npx create-next-app@latest
</code></pre>
<p>ìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ "create-next-app@13.4.1"ì„ ì„¤ì¹˜í•˜ë¼ëŠ” ë©”ì‹œì§€ê°€ í‘œì‹œë˜ë©° ëª‡ ê°€ì§€ ì§ˆë¬¸ì´ ìˆì„ ê²ë‹ˆë‹¤.</p>
<ul>
<li>í”„ë¡œì íŠ¸ ì´ë¦„ì€ ë¬´ì—‡ì¸ê°€ìš”? stripe-nextjs</li>
<li>TypeScriptë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ë„¤</li>
<li>ESLintë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ë„¤</li>
<li>ì´ í”„ë¡œì íŠ¸ì— Tailwind CSSë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ì•„ë‹ˆìš”, ìŠ¤íƒ€ì¼ ì‘ì—…ì„ í•˜ì§€ ì•Šì„ ì˜ˆì •ì´ê¸° ë•Œë¬¸ì—</li>
<li><code>src/</code> ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ë„¤</li>
<li>App Routerë¥¼ ì‚¬ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ë„¤</li>
<li>ê¸°ë³¸ import ë³„ì¹­ì„ ì‚¬ìš©ì ì •ì˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì•„ë‹ˆìš”</li>
</ul>
<p>ì§ˆë¬¸ì— ëª¨ë‘ ë‹µí–ˆë‹¤ë©´, ì„¤ì¹˜ê°€ ì‹œì‘ë©ë‹ˆë‹¤!</p>
<p>ì´ì œ ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ì´ì œ ì‹¤ì œë¡œ Next.js ì•±ì„ ë³´ë ¤ë©´ í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”. Next.js ì•± ë‚´ë¶€ì— ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
<pre><code class="hljs language-js">yarn run dev
</code></pre>
<p>ë” ë‚˜ì•„ê°€ê¸° ì „ì—, Stripe ê³„ì •ì„ ìƒì„±í•˜ê³  API í‚¤ë¥¼ ë°›ì•„ë´ìš”.</p>
<p>Stripe ê³„ì •ì„ ë§Œë“  í›„ì—, dashboard.stripe.com/test/apikeysë¡œ ì´ë™í•´ì„œ API í‚¤ë¥¼ ë°›ì•„ìš”.</p>
<h2>í™˜ê²½ íŒŒì¼ ì„¤ì •í•˜ê¸°</h2>
<p>ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì•ˆì—, .env.localì´ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.</p>
<p>.env.local íŒŒì¼ ì•ˆì— ë‹¤ìŒì„ ì¶”ê°€í•´ì£¼ì„¸ìš”:</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</span>=<span class="hljs-string">""</span>
<span class="hljs-variable constant_">STRIPE_SECRET_KEY</span>=<span class="hljs-string">""</span>
</code></pre>
<p>ì—¬ê¸°ì„œ ê¸°ì–µí•´ì•¼ í•  ì¤‘ìš”í•œ ì ì´ ëª‡ ê°€ì§€ ìˆì–´ìš”. ë¨¼ì €, """ë¥¼ Stripe í‚¤ë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤. ë‘˜ì§¸ë¡œ, ë‘ ë³€ìˆ˜ ê°„ì˜ ì°¨ì´ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. í•˜ë‚˜ëŠ” "NEXT_PUBLIC"ì„ í¬í•¨í•˜ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•´ì„œ, "NEXT_PUBLIC"ì„ ì‚¬ìš©í•˜ì—¬ STRIPE_PUBLISHABLE_KEYë¥¼ ë…¸ì¶œì‹œí‚¤ëŠ” ê²ƒì€ ê´œì°®ì§€ë§Œ ì‹œí¬ë¦¿ í‚¤ëŠ” ì ˆëŒ€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— ë…¸ì¶œë˜ì–´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.</p>
<p>ì•Œì•˜ì–´ìš”, ì´í•´í–ˆì–´ìš”? ê·¸ëŸ¼ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°‘ì‹œë‹¤!</p>
<h2>í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜í•˜ê¸°</h2>
<p>ë‹¹ì‹ ì˜ Next.js ì•± ë‚´ë¶€ì— ë‹¤ìŒ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ë³´ì„¸ìš”:</p>
<pre><code class="hljs language-js">@stripe/react-stripe-js @stripe/stripe-js stripe axios
</code></pre>
<h2>ë°±ì—”ë“œ ì‘ì—…ì„ ì‹œì‘í•´ë´…ì‹œë‹¤</h2>
<p>ìš°ë¦¬ ì•± í´ë” ì•ˆì— apië¼ëŠ” ìƒˆ í´ë”ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ì´ê³³ì— ëª¨ë“  ë°±ì—”ë“œ ì½”ë“œê°€ ìœ„ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
<p>api í´ë” ì•ˆì— create-payment-intentë¼ëŠ” ìƒˆ í´ë”ë¥¼ ë§Œë“¤ê³ , ê·¸ ì•ˆì— route.ts ë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•´ì£¼ì„¸ìš”.</p>
<p><img src="/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_1.png" alt="ì´ë¯¸ì§€"></p>
<p>"create-payment-intent" í´ë” ì•ˆì— "route"ë¼ëŠ” íŒŒì¼ì„ ë§Œë“œëŠ” ì´ìœ ëŠ” Next.jsì— API ìš”ì²­ì„ ë‹¤ë£¨ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë¦¬ëŠ” ê²ƒì…ë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì— ë”°ë¥´ë©´, routeëŠ” ë¼ìš°íŒ…ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ìˆ˜ì¤€ìœ¼ë¡œ, í˜ì´ì§€ê°€ í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë ˆì´ì•„ì›ƒì´ë‚˜ í´ë¼ì´ì–¸íŠ¸ ì¸¡ íƒìƒ‰ì— ì˜í–¥ì„ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. "route.ts" íŒŒì¼ì´ "page.ts" íŒŒì¼ì´ ìˆëŠ” ê³³ì— ì¡´ì¬í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì„ ëª…ì‹¬í•´ì•¼ í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ëŠ” ê²ƒì„ ê°•ë ¥íˆ ê¶Œì¥í•©ë‹ˆë‹¤.</p>
<p>ì—¬ê¸°ëŠ” route.ts íŒŒì¼ì˜ ì½”ë“œì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span>, <span class="hljs-title class_">NextRequest</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Stripe</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"stripe"</span>;

<span class="hljs-keyword">const</span> stripe = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stripe</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">STRIPE_SECRET_KEY</span>!, {
  <span class="hljs-attr">typescript</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">apiVersion</span>: <span class="hljs-string">"2022-11-15"</span>,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">req: NextRequest</span>) {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> req.<span class="hljs-title function_">json</span>();
  <span class="hljs-keyword">const</span> { amount } = data;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> paymentIntent = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">paymentIntents</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">amount</span>: <span class="hljs-title class_">Number</span>(amount) * <span class="hljs-number">100</span>,
      <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>,
    });

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NextResponse</span>(paymentIntent.<span class="hljs-property">client_secret</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">200</span> });
  } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: any) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NextResponse</span>(error, {
      <span class="hljs-attr">status</span>: <span class="hljs-number">400</span>,
    });
  }
}
</code></pre>
<p>ì´ê²ƒì„ ìì„¸íˆ ì‚´í´ë³´ê³  ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ì§€ ì´í•´í•´ ë´…ì‹œë‹¤.</p>
<p>ì²«ì§¸ë¡œ, ìš°ë¦¬ëŠ” íƒ€ì…ê³¼ stripeë¥¼ import í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextResponse</span>, <span class="hljs-title class_">NextRequest</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/server"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Stripe</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"stripe"</span>;
</code></pre>
<p>ë‹¤ìŒìœ¼ë¡œ stripe ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> stripe = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stripe</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">STRIPE_SECRET_KEY</span>!, {
  <span class="hljs-attr">typescript</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">apiVersion</span>: <span class="hljs-string">"2022-11-15"</span>,
});
</code></pre>
<p>ìš°ë¦¬ì˜ Stripe ì¸ìŠ¤í„´ìŠ¤ëŠ” env.local íŒŒì¼ì—ì„œ Stripe ë¹„ë°€í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë” ë‚˜ì•„ê°€, ìš°ë¦¬ëŠ” Stripe ì¸ìŠ¤í„´ìŠ¤ì— TypeScriptë¥¼ í™œì„±í™”í•˜ê³  ì¸ìŠ¤í„´ìŠ¤ìš© Stripe API ë²„ì „ì„ ì§€ì •í–ˆìŠµë‹ˆë‹¤.</p>
<p>ê³„ì† ì§„í–‰í•˜ê¸° ì „ì— Next.js 13.4ì—ì„œ API ê²½ë¡œë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²•ì— ëŒ€í•´ ì´ì•¼ê¸°í•´ ë´…ì‹œë‹¤.</p>
<p>ì•„ë§ˆ ì´ë¯¸ ì£¼ëª©í–ˆì„ ê²ƒì´ì§€ë§Œ, í•¨ìˆ˜ì˜ ì œëª©ì´ "POST"ì™€ ê°™ì´ ëª¨ë‘ ëŒ€ë¬¸ìë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë„¤ì´ë° ê·œì¹™ì€ Next.jsê°€ ì‹¤í–‰í•  í•´ë‹¹ HTTP ë©”ì†Œë“œë¥¼ ê²°ì •í•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, GET ìš”ì²­ì„ ìˆ˜í–‰í•˜ë ¤ë©´ í•¨ìˆ˜ì˜ ì œëª©ì„ "GET"ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•˜ë©°, ìˆ˜í–‰í•˜ë ¤ëŠ” ë‹¤ë¥¸ ì‘ì—…ì— ëŒ€í•´ì„œë„ ìœ ì‚¬í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ì•Œê² ìŠµë‹ˆë‹¤, ì´í•´í–ˆìŠµë‹ˆë‹¤, ì¢‹ì•„ìš”! ê³„ì† ì§„í–‰í•©ì‹œë‹¤!</p>
<p>ìš°ë¦¬ í•¨ìˆ˜ ë‚´ì—ì„œëŠ” ìš”ì²­ì—ì„œ ë°ì´í„°ë¥¼ ë¹„êµ¬ì¡°í™”í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤. ê·¸ í›„ì—ëŠ” ë°ì´í„° ê°ì²´ì—ì„œ ê¸ˆì•¡ì„ ë”ìš± ì„¸ë¶„í™”í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> req.<span class="hljs-title function_">json</span>();
<span class="hljs-keyword">const</span> { amount } = data;
</code></pre>
<p>ì´ì œ ëª¨ë“  í¥ë¯¸ë¡œìš´ ë¡œì§ì´ ë°œìƒí•˜ëŠ” trycatch ë¸”ë¡ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤!</p>
<p>íŒŒê³ ë“¤ì–´ ë´…ì‹œë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> paymentIntent = <span class="hljs-keyword">await</span> stripe.<span class="hljs-property">paymentIntents</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">amount</span>: <span class="hljs-title class_">Number</span>(price) * <span class="hljs-number">100</span>,
      <span class="hljs-attr">currency</span>: <span class="hljs-string">"USD"</span>,
    });

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NextResponse</span>(paymentIntent.<span class="hljs-property">client_secret</span>, { <span class="hljs-attr">status</span>: <span class="hljs-number">200</span> });
</code></pre>
<p>ìš°ë¦¬ì˜ try ë¸”ë¡ ì•ˆì—ì„œ, ê²°ì œ ì¸í…íŠ¸ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ê²°ì œ ì¸í…íŠ¸ì— ëŒ€í•´ ì˜ ëª¨ë¥´ì‹ ë‹¤ë©´ ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”. ê±°ë˜ì— ê´€í•œ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆì£ . ì§€ì›ë˜ëŠ” ê²°ì œ ë°©ë²•, ì§•ìˆ˜í•  ê¸ˆì•¡, ê·¸ë¦¬ê³  í¬ë§í•˜ëŠ” í†µí™”ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, Stripeë¡œë¶€í„° ì–»ì€ í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ì„ í¬í•¨í•œ ì‘ë‹µì„ ë°˜í™˜í•  ê²ƒì…ë‹ˆë‹¤. ì´ ë‹¨ê³„ëŠ” ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ìš°ë¦¬ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ Stripeê°€ ê²°ì œë¥¼ í™•ì¸í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê¸° ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ì„ í™œìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì´ì£ .</p>
<pre><code class="hljs language-js">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NextResponse</span>(error, {
      <span class="hljs-attr">status</span>: <span class="hljs-number">400</span>,
    });
</code></pre>
<p>ìš°ë¦¬ì˜ catch ë¸”ë¡ ì•ˆì—ì„œëŠ” ê°„ë‹¨íˆ ì˜¤ë¥˜ë¥¼ í¬í•¨í•œ ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.</p>
<p>ì´ ì‹œì ì—ì„œ ë°±ì—”ë“œ ê°œë°œì€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ìƒˆë¡œ ë§Œë“  ì—”ë“œí¬ì¸íŠ¸ì™€ ìƒí˜¸ ì‘ìš©í•  í´ë¼ì´ì–¸íŠ¸ ì¸¡ìœ¼ë¡œ ì´ë™í•´ ë´…ì‹œë‹¤.</p>
<h2>í”„ë¡ íŠ¸ì—”ë“œ</h2>
<p>ë§ˆë²•ì„ ì‹œì‘í•˜ê¸° ì „ì— ì •ë¦¬í•´ ë´…ì‹œë‹¤!</p>
<p>layout.tsx íŒŒì¼ì—ì„œ global.cssë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤„ì„ ì‚­ì œí•˜ì„¸ìš”. ìŠ¤íƒ€ì¼ì— ëŒ€í•´ì„œëŠ” ë‹¤ë£¨ì§€ ì•Šì„ ê±°ì—ìš”.</p>
<p>ì•±.tsx íŒŒì¼ì—ì„œ <code>main</code> íƒœê·¸ ë‚´ë¶€ì˜ ëª¨ë“  ë‚´ìš©ì„ ì‚­ì œí•˜ê³ , Image ì»´í¬ë„ŒíŠ¸ import êµ¬ë¬¸ì„ ì‚­ì œí•´ì£¼ì„¸ìš”.</p>
<p>ì¢‹ì•„ìš”, ì´ ì‹œì ì—ì„œ layout.tsx íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Inter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"next/font/google"</span>;

<span class="hljs-keyword">const</span> inter = <span class="hljs-title class_">Inter</span>({ <span class="hljs-attr">subsets</span>: [<span class="hljs-string">"latin"</span>] });

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> metadata = {
  <span class="hljs-attr">title</span>: <span class="hljs-string">"Create Next App"</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"Generated by create next app"</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{
  children,
}: {
  children: React.ReactNode;
}</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">body</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{inter.className}</span>></span>{children}<span class="hljs-tag">&#x3C;/<span class="hljs-name">body</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">html</span>></span></span>
  );
}
</code></pre>
<p>ê·¸ë¦¬ê³  app.tsx íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;></span><span class="hljs-tag">&#x3C;/></span></span>
  );
}
</code></pre>
<p>ì—¬ê¸° ë©‹ì§„ ê³³ì—ìš”, ê²°ì œ ì–‘ì‹ì„ ì„¤ì •í•´ ë´…ì‹œë‹¤!</p>
<p>"src" í´ë”ì—ì„œ "components"ë¼ëŠ” ìƒˆ í´ë”ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. "components" í´ë” ì•ˆì— "PaymentForm"ì´ë¼ëŠ” ë˜ ë‹¤ë¥¸ í´ë”ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. "PaymentForm" í´ë” ì•ˆì— "PaymentForm.tsx"ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. ê±°ê¸°ì— ìš°ë¦¬ì˜ ê²°ì œ ì–‘ì‹ì´ ìœ„ì¹˜í•˜ê³  ëŒ€ë¶€ë¶„ì˜ ë¡œì§ì´ ì—¬ê¸°ì„œ ì‹¤í–‰ë  ê±°ì—ìš”.</p>
<p>ì‹œì‘í•´ ë´…ì‹œë‹¤!</p>
<p>ìš°ë¦¬ê°€ ì»´í¬ë„ŒíŠ¸ ì‘ì„±ì„ ì‹œì‘í•˜ê¸° ì „ì—, Next.jsì—ê²Œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ë£¨ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì£¼ì–´ì•¼ í•´ìš”.</p>
<p>PaymentForm.tsx íŒŒì¼ì˜ ë§¨ ìœ„ì— ë‹¤ìŒì„ ì¶”ê°€í•´ì£¼ì„¸ìš”:</p>
<pre><code class="hljs language-js"><span class="hljs-string">"use client"</span>;
</code></pre>
<p>ê·¸ ë‹¤ìŒì— ë‹¤ìŒê³¼ ê°™ì€ import ë¬¸ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CardElement</span>, useElements, useStripe } <span class="hljs-keyword">from</span> <span class="hljs-string">"@stripe/react-stripe-js"</span>;
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">"axios"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
</code></pre>
<p>ì´ì œ ë¹ˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë´…ì‹œë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PaymentForm</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;></span><span class="hljs-tag">&#x3C;/></span></span>;
}
</code></pre>
<p>ì§€ê¸ˆê¹Œì§€ì˜ íŒŒì¼ì€ ì´ë ‡ê²Œ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-string">"ì‚¬ìš©ììš©"</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CardElement</span>, useElements, useStripe } <span class="hljs-keyword">from</span> <span class="hljs-string">"@stripe/react-stripe-js"</span>;
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">"axios"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PaymentForm</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;></span><span class="hljs-tag">&#x3C;/></span></span>;
}
</code></pre>
<p>ìš°ë¦¬ ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ ì²˜ìŒìœ¼ë¡œ í•´ì•¼ í•  ì¼ì€ Stripe í›…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì¸ë°, ìš°ë¦¬ê°€ ì‚¬ìš©í•  í›…ì€ useStripeì™€ useElements ì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">  <span class="hljs-keyword">const</span> stripe = <span class="hljs-title function_">useStripe</span>();
  <span class="hljs-keyword">const</span> elements = <span class="hljs-title function_">useElements</span>();
</code></pre>
<p>fromì„ ì œì¶œí•  ìˆ˜ ìˆëŠ” onSubmitì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤.</p>
<pre><code class="hljs language-js">  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">e: React.FormEvent&#x3C;HTMLFormElement></span>) => {}
</code></pre>
<p>onSubmit í•¨ìˆ˜ ì•ˆì—ì„œ e.preventDefault(); ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ ë™ì‘ì„ ë§‰ì•„ì¤ì‹œë‹¤.</p>
<p>ë‹¤ìŒìœ¼ë¡œ, stripe ì¹´ë“œ ì—˜ë¦¬ë¨¼íŠ¸ì— ë‹¤ìŒ ìŠ¤ë‹ˆí«ì„ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">    <span class="hljs-keyword">const</span> cardElement = elements?.<span class="hljs-title function_">getElement</span>(<span class="hljs-string">"card"</span>);
</code></pre>
<p>ì§€ê¸ˆë¶€í„° ì‹¤ì œ ë§ˆë²•ì„ ì‹œë„í•´ ë´…ì‹œë‹¤!</p>
<p>try-catch ë¸”ë¡ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤. try ë¸”ë¡ ì•ˆì—ëŠ” stripeì™€ cardElementì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì¡°ê±´ë¬¸ì„ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤. ë‘˜ ì¤‘ í•˜ë‚˜ë¼ë„ ëˆ„ë½ëœ ê²½ìš°, onSubmit í•¨ìˆ˜ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì¤‘ë‹¨ì‹œí‚¤ê³  ë” ì´ìƒì˜ ì‘ì—…ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ nullì„ ë°˜í™˜í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>catch ë¸”ë¡ì—ì„œëŠ” ë‹¨ìˆœíˆ errorë¥¼ console.log í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<p>ë‹¤ìŒì€ ì½”ë“œ ì¡°ê°ì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (!stripe || !cardElement) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);
    }
</code></pre>
<p>ì•ˆë…•í•˜ì„¸ìš” ì—¬ëŸ¬ë¶„, ì§€ê¸ˆ ì¢‹ì€ ìœ„ì¹˜ì— ìˆì–´ìš”. ê³„ì† ì§„í–‰í•˜ì£ .</p>
<p>Stripeì™€ cardElementê°€ ëª¨ë‘ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„ì—, ì´ì „ì— ë°±ì—”ë“œì—ì„œ ì„¤ì •í•œ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ì œ ì˜ë„ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. APIì— ì „ë‹¬í•  ë°ì´í„°ëŠ” ê¸ˆì•¡ì´ í¬í•¨ë˜ë©°, ì €ì˜ ê²½ìš°ì—ëŠ” 89ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ìš”.</p>
<pre><code class="hljs language-js">    <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/api/create-payment-intent"</span>, {
        <span class="hljs-attr">data</span>: { <span class="hljs-attr">amount</span>: <span class="hljs-number">89</span> },
      });
</code></pre>
<p>ì‘ë‹µì„ clientSecretë¼ëŠ” ë³€ìˆ˜ì— í• ë‹¹í•´ë³´ì„¸ìš”.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> clientSecret = data;
</code></pre>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ìš°ë¦¬ê°€ í•´ì•¼ í•  ì¼ì€ stripeì—ì„œ ì œê³µí•˜ëŠ” confirmCardPayment ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ì œë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì•„ë˜ëŠ” ì˜ˆì‹œ ì½”ë“œ ì¡°ê°ì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">await</span> stripe?.<span class="hljs-title function_">confirmCardPayment</span>(clientSecret, {
  <span class="hljs-attr">payment_method</span>: { <span class="hljs-attr">card</span>: cardElement },
});
</code></pre>
<p>ì§€ê¸ˆê¹Œì§€ onSubmit í•¨ìˆ˜ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ì˜ ì»´í¬ë„ŒíŠ¸ê°€ stripeì—ì„œ ì œê³µí•˜ëŠ” CardElement ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” í¼ì„ ë°˜í™˜í•˜ë„ë¡ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">    &#x3C;form onSubmit={onSubmit}>
      <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">CardElement</span> /></span></span>
      <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>></span>ì œì¶œí•˜ê¸°<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span></span>
    &#x3C;/form>
</code></pre>
<p>ìµœì¢… ê²°ê³¼:</p>
<pre><code class="hljs language-js"><span class="hljs-string">"ì‚¬ìš©ì ì‚¬ìš©"</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CardElement</span>, useElements, useStripe } <span class="hljs-keyword">from</span> <span class="hljs-string">"@stripe/react-stripe-js"</span>;
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">"axios"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">PaymentForm</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> stripe = <span class="hljs-title function_">useStripe</span>();
  <span class="hljs-keyword">const</span> elements = <span class="hljs-title function_">useElements</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">e: React.FormEvent&#x3C;HTMLFormElement></span>) => {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">const</span> cardElement = elements?.<span class="hljs-title function_">getElement</span>(<span class="hljs-string">"card"</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (!stripe || !cardElement) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">const</span> { data } = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/api/create-payment-intent"</span>, {
        <span class="hljs-attr">data</span>: { <span class="hljs-attr">amount</span>: <span class="hljs-number">89</span> },
      });
      <span class="hljs-keyword">const</span> clientSecret = data;

      <span class="hljs-keyword">await</span> stripe?.<span class="hljs-title function_">confirmCardPayment</span>(clientSecret, {
        <span class="hljs-attr">payment_method</span>: { <span class="hljs-attr">card</span>: cardElement },
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{onSubmit}</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">CardElement</span> /></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>></span>ì œì¶œ<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">form</span>></span></span>
  );
}
</code></pre>
<p>ì¢‹ì€ ì†Œì‹ì…ë‹ˆë‹¤! ìš°ë¦¬ì˜ PaymentForm ì»´í¬ë„ŒíŠ¸ê°€ ì´ì œ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë§Œì„¸! ì´ì œ ë§ˆì§€ë§‰ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ì„œ, ìƒˆë¡­ê²Œ ìƒì„±ëœ PaymentForm ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì•±ì˜ app.tsx íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì„ ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>PaymentForm ì»´í¬ë„ŒíŠ¸ê°€ app.tsx ì•ˆì—ì„œ ì‚¬ìš©ë˜ê¸° ì „ì—, ëª‡ ê°€ì§€ë¥¼ importí•˜ê³  stripeë¥¼ ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-string">"ì‚¬ìš©ì ì‚¬ìš©"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Elements</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@stripe/react-stripe-js"</span>;
<span class="hljs-keyword">import</span> { loadStripe } <span class="hljs-keyword">from</span> <span class="hljs-string">"@stripe/stripe-js"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PaymentForm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"@/components/PaymentForm/PaymentForm"</span>;
</code></pre>
<p>stripeë¥¼ ë¶ˆëŸ¬ì™€ë³´ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> stripePromise = <span class="hljs-title function_">loadStripe</span>(
  process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</span>!
);
</code></pre>
<p>stripeë¥¼ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œ ë¡œë“œí•˜ëŠ” ê²ƒì„ í™•ì¸í•´ì£¼ì„¸ìš”. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ stripeê°€ ë§¤ë²ˆ ë Œë”ë§ë˜ì–´ ì›í•˜ì§€ ì•ŠëŠ” ê²°ê³¼ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, return ë¬¸ ì•ˆì—ì„œ ìš°ë¦¬ì—ê²Œ ì œê³µëœ Element ê³µê¸‰ìë¥¼ í™œìš©í•´ë´…ì‹œë‹¤. PaymentForm ì»´í¬ë„ŒíŠ¸ë¥¼ í•´ë‹¹ ê³µê¸‰ìë¡œ ê°ì‹¸ê² ìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤:</p>
<p>ì—¬ê¸° ì™„ì„±ëœ ê²°ê³¼ì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-string">"use client"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Elements</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@stripe/react-stripe-js"</span>;
<span class="hljs-keyword">import</span> { loadStripe } <span class="hljs-keyword">from</span> <span class="hljs-string">"@stripe/stripe-js"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">PaymentForm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"@/components/PaymentForm/PaymentForm"</span>;
<span class="hljs-comment">// ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì‹œì— `Stripe` ê°ì²´ë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ëŠ” ê²ƒì„ í”¼í•˜ê¸° ìœ„í•´</span>
<span class="hljs-comment">// `loadStripe`ë¥¼ ì»´í¬ë„ŒíŠ¸ ë°–ì—ì„œ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ í™•ì¸í•´ì£¼ì„¸ìš”.</span>
<span class="hljs-keyword">const</span> stripePromise = <span class="hljs-title function_">loadStripe</span>(
  process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY</span>!
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">Elements</span> <span class="hljs-attr">stripe</span>=<span class="hljs-string">{stripePromise}</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">PaymentForm</span> /></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">Elements</span>></span></span>
  );
}
</code></pre>
<p>ì™€! Stripeë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ì œ í¼ì„ ë§Œë“¤ì—ˆë„¤ìš”. ì˜ í–ˆì–´ìš”!</p>
<p>ì´ ê¸€ì´ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ì–´ìš”! ì•ìœ¼ë¡œ ì—¬ê¸°ì„œ ë” í™œë°œí•˜ê²Œ í™œë™í•  ê±°ì—ìš”. ê¸°ëŒ€ë¼ìš” ğŸ¤”</p>
<p>ì—¬ê¸° git ë ˆí¬ì§€í† ë¦¬ ë§í¬ì—ìš”. ì¦ê²¨ë³´ì„¸ìš”!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Nextjs ì•±ì— Stripe ê²°ì œ ì¶”ê°€í•˜ëŠ” ë°©ë²•","description":"","date":"2024-05-14 16:09","slug":"2024-05-14-HowtoaddStripepaymentstoyourNextjsapp","content":"\n\n\u003cimg src=\"/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_0.png\" /\u003e\n\nì™€! ë‚´ ë§¤ì²´ ì•”í˜¸ë¥¼ ì°¾ì•˜ì–´ìš”!\n\nì´ì œ, ë‚´ ì²« ë²ˆì§¸ ê¸°ì‚¬ì—ì„œ Stripeë¥¼ Next.js ì•±ì— í†µí•©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ë ¤ê³  í•´ìš”.\n\nì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë„ˆë¬´ ë³µì¡í•œ ê²ƒì„ ë§Œë“œëŠ” ë° ì£¼ì˜ë¥¼ ê¸°ìš¸ì´ì§€ ì•Šì„ ê±°ì—ìš”. ëŒ€ì‹ ì— ìš°ë¦¬ëŠ” ê°„í¸í•œ Next.js 13.4 ì•±ì„ ê°œë°œí•˜ì—¬ ì¼íšŒì„± Stripe ê²°ì œë¥¼ ê°€ëŠ¥í•˜ê²Œ í•  ê±°ì—ìš”.\n\n\n\n## ì„¤ì •í•˜ê¸°\n\ní„°ë¯¸ë„ì„ ì—´ê³  ë‚˜ì˜ ê²½ìš°ì—ëŠ” Workspace ì•ˆì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.\n\n```js\nnpx create-next-app@latest\n```\n\nìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ \"create-next-app@13.4.1\"ì„ ì„¤ì¹˜í•˜ë¼ëŠ” ë©”ì‹œì§€ê°€ í‘œì‹œë˜ë©° ëª‡ ê°€ì§€ ì§ˆë¬¸ì´ ìˆì„ ê²ë‹ˆë‹¤.\n\n\n\n- í”„ë¡œì íŠ¸ ì´ë¦„ì€ ë¬´ì—‡ì¸ê°€ìš”? stripe-nextjs\n- TypeScriptë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ë„¤\n- ESLintë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ë„¤\n- ì´ í”„ë¡œì íŠ¸ì— Tailwind CSSë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ì•„ë‹ˆìš”, ìŠ¤íƒ€ì¼ ì‘ì—…ì„ í•˜ì§€ ì•Šì„ ì˜ˆì •ì´ê¸° ë•Œë¬¸ì—\n- `src/` ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ë„¤\n- App Routerë¥¼ ì‚¬ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ë„¤\n- ê¸°ë³¸ import ë³„ì¹­ì„ ì‚¬ìš©ì ì •ì˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì•„ë‹ˆìš”\n\nì§ˆë¬¸ì— ëª¨ë‘ ë‹µí–ˆë‹¤ë©´, ì„¤ì¹˜ê°€ ì‹œì‘ë©ë‹ˆë‹¤!\n\nì´ì œ ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ì´ì œ ì‹¤ì œë¡œ Next.js ì•±ì„ ë³´ë ¤ë©´ í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”. Next.js ì•± ë‚´ë¶€ì— ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\n\n```js\nyarn run dev\n```\n\n\n\në” ë‚˜ì•„ê°€ê¸° ì „ì—, Stripe ê³„ì •ì„ ìƒì„±í•˜ê³  API í‚¤ë¥¼ ë°›ì•„ë´ìš”.\n\nStripe ê³„ì •ì„ ë§Œë“  í›„ì—, dashboard.stripe.com/test/apikeysë¡œ ì´ë™í•´ì„œ API í‚¤ë¥¼ ë°›ì•„ìš”.\n\n## í™˜ê²½ íŒŒì¼ ì„¤ì •í•˜ê¸°\n\në£¨íŠ¸ ë””ë ‰í† ë¦¬ ì•ˆì—, .env.localì´ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.\n\n\n\n.env.local íŒŒì¼ ì•ˆì— ë‹¤ìŒì„ ì¶”ê°€í•´ì£¼ì„¸ìš”:\n\n```js\nNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=\"\"\nSTRIPE_SECRET_KEY=\"\"\n```\n\nì—¬ê¸°ì„œ ê¸°ì–µí•´ì•¼ í•  ì¤‘ìš”í•œ ì ì´ ëª‡ ê°€ì§€ ìˆì–´ìš”. ë¨¼ì €, \"\"\"ë¥¼ Stripe í‚¤ë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤. ë‘˜ì§¸ë¡œ, ë‘ ë³€ìˆ˜ ê°„ì˜ ì°¨ì´ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. í•˜ë‚˜ëŠ” \"NEXT_PUBLIC\"ì„ í¬í•¨í•˜ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•´ì„œ, \"NEXT_PUBLIC\"ì„ ì‚¬ìš©í•˜ì—¬ STRIPE_PUBLISHABLE_KEYë¥¼ ë…¸ì¶œì‹œí‚¤ëŠ” ê²ƒì€ ê´œì°®ì§€ë§Œ ì‹œí¬ë¦¿ í‚¤ëŠ” ì ˆëŒ€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— ë…¸ì¶œë˜ì–´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.\n\nì•Œì•˜ì–´ìš”, ì´í•´í–ˆì–´ìš”? ê·¸ëŸ¼ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°‘ì‹œë‹¤!\n\n\n\n## í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜í•˜ê¸°\n\në‹¹ì‹ ì˜ Next.js ì•± ë‚´ë¶€ì— ë‹¤ìŒ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ë³´ì„¸ìš”:\n\n```js\n@stripe/react-stripe-js @stripe/stripe-js stripe axios\n```\n\n## ë°±ì—”ë“œ ì‘ì—…ì„ ì‹œì‘í•´ë´…ì‹œë‹¤\n\n\n\nìš°ë¦¬ ì•± í´ë” ì•ˆì— apië¼ëŠ” ìƒˆ í´ë”ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ì´ê³³ì— ëª¨ë“  ë°±ì—”ë“œ ì½”ë“œê°€ ìœ„ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤.\n\napi í´ë” ì•ˆì— create-payment-intentë¼ëŠ” ìƒˆ í´ë”ë¥¼ ë§Œë“¤ê³ , ê·¸ ì•ˆì— route.ts ë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•´ì£¼ì„¸ìš”.\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_1.png)\n\n\"create-payment-intent\" í´ë” ì•ˆì— \"route\"ë¼ëŠ” íŒŒì¼ì„ ë§Œë“œëŠ” ì´ìœ ëŠ” Next.jsì— API ìš”ì²­ì„ ë‹¤ë£¨ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë¦¬ëŠ” ê²ƒì…ë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì— ë”°ë¥´ë©´, routeëŠ” ë¼ìš°íŒ…ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ìˆ˜ì¤€ìœ¼ë¡œ, í˜ì´ì§€ê°€ í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë ˆì´ì•„ì›ƒì´ë‚˜ í´ë¼ì´ì–¸íŠ¸ ì¸¡ íƒìƒ‰ì— ì˜í–¥ì„ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. \"route.ts\" íŒŒì¼ì´ \"page.ts\" íŒŒì¼ì´ ìˆëŠ” ê³³ì— ì¡´ì¬í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì„ ëª…ì‹¬í•´ì•¼ í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ëŠ” ê²ƒì„ ê°•ë ¥íˆ ê¶Œì¥í•©ë‹ˆë‹¤.\n\n\n\nì—¬ê¸°ëŠ” route.ts íŒŒì¼ì˜ ì½”ë“œì…ë‹ˆë‹¤:\n\n```js\nimport { NextResponse, NextRequest } from \"next/server\";\nimport Stripe from \"stripe\";\n\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\n  typescript: true,\n  apiVersion: \"2022-11-15\",\n});\n\nexport async function POST(req: NextRequest) {\n  const { data } = await req.json();\n  const { amount } = data;\n  try {\n    const paymentIntent = await stripe.paymentIntents.create({\n      amount: Number(amount) * 100,\n      currency: \"USD\",\n    });\n\n    return new NextResponse(paymentIntent.client_secret, { status: 200 });\n  } catch (error: any) {\n    return new NextResponse(error, {\n      status: 400,\n    });\n  }\n}\n```\n\nì´ê²ƒì„ ìì„¸íˆ ì‚´í´ë³´ê³  ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ì§€ ì´í•´í•´ ë´…ì‹œë‹¤.\n\nì²«ì§¸ë¡œ, ìš°ë¦¬ëŠ” íƒ€ì…ê³¼ stripeë¥¼ import í•©ë‹ˆë‹¤:\n\n\n\n```js\nimport { NextResponse, NextRequest } from \"next/server\";\nimport Stripe from \"stripe\";\n```\n\në‹¤ìŒìœ¼ë¡œ stripe ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤:\n\n```js\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\n  typescript: true,\n  apiVersion: \"2022-11-15\",\n});\n```\n\nìš°ë¦¬ì˜ Stripe ì¸ìŠ¤í„´ìŠ¤ëŠ” env.local íŒŒì¼ì—ì„œ Stripe ë¹„ë°€í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë” ë‚˜ì•„ê°€, ìš°ë¦¬ëŠ” Stripe ì¸ìŠ¤í„´ìŠ¤ì— TypeScriptë¥¼ í™œì„±í™”í•˜ê³  ì¸ìŠ¤í„´ìŠ¤ìš© Stripe API ë²„ì „ì„ ì§€ì •í–ˆìŠµë‹ˆë‹¤.\n\n\n\nê³„ì† ì§„í–‰í•˜ê¸° ì „ì— Next.js 13.4ì—ì„œ API ê²½ë¡œë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²•ì— ëŒ€í•´ ì´ì•¼ê¸°í•´ ë´…ì‹œë‹¤.\n\nì•„ë§ˆ ì´ë¯¸ ì£¼ëª©í–ˆì„ ê²ƒì´ì§€ë§Œ, í•¨ìˆ˜ì˜ ì œëª©ì´ \"POST\"ì™€ ê°™ì´ ëª¨ë‘ ëŒ€ë¬¸ìë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë„¤ì´ë° ê·œì¹™ì€ Next.jsê°€ ì‹¤í–‰í•  í•´ë‹¹ HTTP ë©”ì†Œë“œë¥¼ ê²°ì •í•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, GET ìš”ì²­ì„ ìˆ˜í–‰í•˜ë ¤ë©´ í•¨ìˆ˜ì˜ ì œëª©ì„ \"GET\"ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•˜ë©°, ìˆ˜í–‰í•˜ë ¤ëŠ” ë‹¤ë¥¸ ì‘ì—…ì— ëŒ€í•´ì„œë„ ìœ ì‚¬í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì•Œê² ìŠµë‹ˆë‹¤, ì´í•´í–ˆìŠµë‹ˆë‹¤, ì¢‹ì•„ìš”! ê³„ì† ì§„í–‰í•©ì‹œë‹¤!\n\nìš°ë¦¬ í•¨ìˆ˜ ë‚´ì—ì„œëŠ” ìš”ì²­ì—ì„œ ë°ì´í„°ë¥¼ ë¹„êµ¬ì¡°í™”í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤. ê·¸ í›„ì—ëŠ” ë°ì´í„° ê°ì²´ì—ì„œ ê¸ˆì•¡ì„ ë”ìš± ì„¸ë¶„í™”í•©ë‹ˆë‹¤.\n\n\n\n```js\nconst { data } = await req.json();\nconst { amount } = data;\n```\n\nì´ì œ ëª¨ë“  í¥ë¯¸ë¡œìš´ ë¡œì§ì´ ë°œìƒí•˜ëŠ” trycatch ë¸”ë¡ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤!\n\níŒŒê³ ë“¤ì–´ ë´…ì‹œë‹¤.\n\n```js\nconst paymentIntent = await stripe.paymentIntents.create({\n      amount: Number(price) * 100,\n      currency: \"USD\",\n    });\n\n    return new NextResponse(paymentIntent.client_secret, { status: 200 });\n```\n\n\n\nìš°ë¦¬ì˜ try ë¸”ë¡ ì•ˆì—ì„œ, ê²°ì œ ì¸í…íŠ¸ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ê²°ì œ ì¸í…íŠ¸ì— ëŒ€í•´ ì˜ ëª¨ë¥´ì‹ ë‹¤ë©´ ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”. ê±°ë˜ì— ê´€í•œ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆì£ . ì§€ì›ë˜ëŠ” ê²°ì œ ë°©ë²•, ì§•ìˆ˜í•  ê¸ˆì•¡, ê·¸ë¦¬ê³  í¬ë§í•˜ëŠ” í†µí™”ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ, Stripeë¡œë¶€í„° ì–»ì€ í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ì„ í¬í•¨í•œ ì‘ë‹µì„ ë°˜í™˜í•  ê²ƒì…ë‹ˆë‹¤. ì´ ë‹¨ê³„ëŠ” ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ìš°ë¦¬ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ Stripeê°€ ê²°ì œë¥¼ í™•ì¸í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê¸° ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ì„ í™œìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì´ì£ .\n\n```js\n    return new NextResponse(error, {\n      status: 400,\n    });\n```\n\nìš°ë¦¬ì˜ catch ë¸”ë¡ ì•ˆì—ì„œëŠ” ê°„ë‹¨íˆ ì˜¤ë¥˜ë¥¼ í¬í•¨í•œ ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.\n\n\n\nì´ ì‹œì ì—ì„œ ë°±ì—”ë“œ ê°œë°œì€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ìƒˆë¡œ ë§Œë“  ì—”ë“œí¬ì¸íŠ¸ì™€ ìƒí˜¸ ì‘ìš©í•  í´ë¼ì´ì–¸íŠ¸ ì¸¡ìœ¼ë¡œ ì´ë™í•´ ë´…ì‹œë‹¤.\n\n## í”„ë¡ íŠ¸ì—”ë“œ\n\në§ˆë²•ì„ ì‹œì‘í•˜ê¸° ì „ì— ì •ë¦¬í•´ ë´…ì‹œë‹¤!\n\nlayout.tsx íŒŒì¼ì—ì„œ global.cssë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤„ì„ ì‚­ì œí•˜ì„¸ìš”. ìŠ¤íƒ€ì¼ì— ëŒ€í•´ì„œëŠ” ë‹¤ë£¨ì§€ ì•Šì„ ê±°ì—ìš”.\n\n\n\nì•±.tsx íŒŒì¼ì—ì„œ `main` íƒœê·¸ ë‚´ë¶€ì˜ ëª¨ë“  ë‚´ìš©ì„ ì‚­ì œí•˜ê³ , Image ì»´í¬ë„ŒíŠ¸ import êµ¬ë¬¸ì„ ì‚­ì œí•´ì£¼ì„¸ìš”.\n\nì¢‹ì•„ìš”, ì´ ì‹œì ì—ì„œ layout.tsx íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤:\n\n```js\nimport { Inter } from \"next/font/google\";\n\nconst inter = Inter({ subsets: [\"latin\"] });\n\nexport const metadata = {\n  title: \"Create Next App\",\n  description: \"Generated by create next app\",\n};\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    \u003chtml lang=\"en\"\u003e\n      \u003cbody className={inter.className}\u003e{children}\u003c/body\u003e\n    \u003c/html\u003e\n  );\n}\n```\n\nê·¸ë¦¬ê³  app.tsx íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤:\n\n\n\n```js\nexport default function Home() {\n  return (\n    \u003c\u003e\u003c/\u003e\n  );\n}\n```\n\nì—¬ê¸° ë©‹ì§„ ê³³ì—ìš”, ê²°ì œ ì–‘ì‹ì„ ì„¤ì •í•´ ë´…ì‹œë‹¤!\n\n\"src\" í´ë”ì—ì„œ \"components\"ë¼ëŠ” ìƒˆ í´ë”ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. \"components\" í´ë” ì•ˆì— \"PaymentForm\"ì´ë¼ëŠ” ë˜ ë‹¤ë¥¸ í´ë”ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. \"PaymentForm\" í´ë” ì•ˆì— \"PaymentForm.tsx\"ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. ê±°ê¸°ì— ìš°ë¦¬ì˜ ê²°ì œ ì–‘ì‹ì´ ìœ„ì¹˜í•˜ê³  ëŒ€ë¶€ë¶„ì˜ ë¡œì§ì´ ì—¬ê¸°ì„œ ì‹¤í–‰ë  ê±°ì—ìš”.\n\nì‹œì‘í•´ ë´…ì‹œë‹¤!\n\n\n\nìš°ë¦¬ê°€ ì»´í¬ë„ŒíŠ¸ ì‘ì„±ì„ ì‹œì‘í•˜ê¸° ì „ì—, Next.jsì—ê²Œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ë£¨ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì£¼ì–´ì•¼ í•´ìš”.\n\nPaymentForm.tsx íŒŒì¼ì˜ ë§¨ ìœ„ì— ë‹¤ìŒì„ ì¶”ê°€í•´ì£¼ì„¸ìš”:\n\n```js\n\"use client\";\n```\n\nê·¸ ë‹¤ìŒì— ë‹¤ìŒê³¼ ê°™ì€ import ë¬¸ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”:\n\n\n\n```js\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\nimport axios from \"axios\";\nimport React from \"react\";\n```\n\nì´ì œ ë¹ˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë´…ì‹œë‹¤:\n\n```js\nexport default function PaymentForm() {\n  return \u003c\u003e\u003c/\u003e;\n}\n```\n\nì§€ê¸ˆê¹Œì§€ì˜ íŒŒì¼ì€ ì´ë ‡ê²Œ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤:\n\n\n\n```js\n\"ì‚¬ìš©ììš©\";\n\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\nimport axios from \"axios\";\nimport React from \"react\";\n\nexport default function PaymentForm() {\n  return \u003c\u003e\u003c/\u003e;\n}\n```\n\nìš°ë¦¬ ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ ì²˜ìŒìœ¼ë¡œ í•´ì•¼ í•  ì¼ì€ Stripe í›…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì¸ë°, ìš°ë¦¬ê°€ ì‚¬ìš©í•  í›…ì€ useStripeì™€ useElements ì…ë‹ˆë‹¤.\n\n```js\n  const stripe = useStripe();\n  const elements = useElements();\n```\n\nfromì„ ì œì¶œí•  ìˆ˜ ìˆëŠ” onSubmitì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤.\n\n\n\n```js\n  const onSubmit = async (e: React.FormEvent\u003cHTMLFormElement\u003e) =\u003e {}\n```\n\nonSubmit í•¨ìˆ˜ ì•ˆì—ì„œ e.preventDefault(); ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ ë™ì‘ì„ ë§‰ì•„ì¤ì‹œë‹¤.\n\në‹¤ìŒìœ¼ë¡œ, stripe ì¹´ë“œ ì—˜ë¦¬ë¨¼íŠ¸ì— ë‹¤ìŒ ìŠ¤ë‹ˆí«ì„ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤:\n\n```js\n    const cardElement = elements?.getElement(\"card\");\n```\n\n\n\nì§€ê¸ˆë¶€í„° ì‹¤ì œ ë§ˆë²•ì„ ì‹œë„í•´ ë´…ì‹œë‹¤!\n\ntry-catch ë¸”ë¡ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤. try ë¸”ë¡ ì•ˆì—ëŠ” stripeì™€ cardElementì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì¡°ê±´ë¬¸ì„ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤. ë‘˜ ì¤‘ í•˜ë‚˜ë¼ë„ ëˆ„ë½ëœ ê²½ìš°, onSubmit í•¨ìˆ˜ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì¤‘ë‹¨ì‹œí‚¤ê³  ë” ì´ìƒì˜ ì‘ì—…ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ nullì„ ë°˜í™˜í•  ê²ƒì…ë‹ˆë‹¤.\n\ncatch ë¸”ë¡ì—ì„œëŠ” ë‹¨ìˆœíˆ errorë¥¼ console.log í•˜ë©´ ë©ë‹ˆë‹¤.\n\në‹¤ìŒì€ ì½”ë“œ ì¡°ê°ì…ë‹ˆë‹¤:\n\n\n\n```js\n    try {\n      if (!stripe || !cardElement) return null;\n    } catch (error) {\n      console.log(error);\n    }\n```\n\nì•ˆë…•í•˜ì„¸ìš” ì—¬ëŸ¬ë¶„, ì§€ê¸ˆ ì¢‹ì€ ìœ„ì¹˜ì— ìˆì–´ìš”. ê³„ì† ì§„í–‰í•˜ì£ .\n\nStripeì™€ cardElementê°€ ëª¨ë‘ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„ì—, ì´ì „ì— ë°±ì—”ë“œì—ì„œ ì„¤ì •í•œ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ì œ ì˜ë„ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. APIì— ì „ë‹¬í•  ë°ì´í„°ëŠ” ê¸ˆì•¡ì´ í¬í•¨ë˜ë©°, ì €ì˜ ê²½ìš°ì—ëŠ” 89ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ìš”.\n\n```js\n    const { data } = await axios.post(\"/api/create-payment-intent\", {\n        data: { amount: 89 },\n      });\n```\n\n\n\nì‘ë‹µì„ clientSecretë¼ëŠ” ë³€ìˆ˜ì— í• ë‹¹í•´ë³´ì„¸ìš”.\n\n```js\nconst clientSecret = data;\n```\n\në§ˆì§€ë§‰ìœ¼ë¡œ ìš°ë¦¬ê°€ í•´ì•¼ í•  ì¼ì€ stripeì—ì„œ ì œê³µí•˜ëŠ” confirmCardPayment ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ì œë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì•„ë˜ëŠ” ì˜ˆì‹œ ì½”ë“œ ì¡°ê°ì…ë‹ˆë‹¤:\n\n```js\nawait stripe?.confirmCardPayment(clientSecret, {\n  payment_method: { card: cardElement },\n});\n```\n\n\n\nì§€ê¸ˆê¹Œì§€ onSubmit í•¨ìˆ˜ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.\n\nìš°ë¦¬ì˜ ì»´í¬ë„ŒíŠ¸ê°€ stripeì—ì„œ ì œê³µí•˜ëŠ” CardElement ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” í¼ì„ ë°˜í™˜í•˜ë„ë¡ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\n\n```js\n    \u003cform onSubmit={onSubmit}\u003e\n      \u003cCardElement /\u003e\n      \u003cbutton type=\"submit\"\u003eì œì¶œí•˜ê¸°\u003c/button\u003e\n    \u003c/form\u003e\n```\n\nìµœì¢… ê²°ê³¼:\n\n\n\n```js\n\"ì‚¬ìš©ì ì‚¬ìš©\";\n\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\nimport axios from \"axios\";\nimport React from \"react\";\n\nexport default function PaymentForm() {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const onSubmit = async (e: React.FormEvent\u003cHTMLFormElement\u003e) =\u003e {\n    e.preventDefault();\n    const cardElement = elements?.getElement(\"card\");\n\n    try {\n      if (!stripe || !cardElement) return null;\n      const { data } = await axios.post(\"/api/create-payment-intent\", {\n        data: { amount: 89 },\n      });\n      const clientSecret = data;\n\n      await stripe?.confirmCardPayment(clientSecret, {\n        payment_method: { card: cardElement },\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    \u003cform onSubmit={onSubmit}\u003e\n      \u003cCardElement /\u003e\n      \u003cbutton type=\"submit\"\u003eì œì¶œ\u003c/button\u003e\n    \u003c/form\u003e\n  );\n}\n```\n\nì¢‹ì€ ì†Œì‹ì…ë‹ˆë‹¤! ìš°ë¦¬ì˜ PaymentForm ì»´í¬ë„ŒíŠ¸ê°€ ì´ì œ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë§Œì„¸! ì´ì œ ë§ˆì§€ë§‰ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ì„œ, ìƒˆë¡­ê²Œ ìƒì„±ëœ PaymentForm ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì•±ì˜ app.tsx íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì„ ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\nPaymentForm ì»´í¬ë„ŒíŠ¸ê°€ app.tsx ì•ˆì—ì„œ ì‚¬ìš©ë˜ê¸° ì „ì—, ëª‡ ê°€ì§€ë¥¼ importí•˜ê³  stripeë¥¼ ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.\n\n```js\n\"ì‚¬ìš©ì ì‚¬ìš©\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport PaymentForm from \"@/components/PaymentForm/PaymentForm\";\n```\n\n\n\nstripeë¥¼ ë¶ˆëŸ¬ì™€ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\nconst stripePromise = loadStripe(\n  process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY!\n);\n```\n\nstripeë¥¼ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œ ë¡œë“œí•˜ëŠ” ê²ƒì„ í™•ì¸í•´ì£¼ì„¸ìš”. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ stripeê°€ ë§¤ë²ˆ ë Œë”ë§ë˜ì–´ ì›í•˜ì§€ ì•ŠëŠ” ê²°ê³¼ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ, return ë¬¸ ì•ˆì—ì„œ ìš°ë¦¬ì—ê²Œ ì œê³µëœ Element ê³µê¸‰ìë¥¼ í™œìš©í•´ë´…ì‹œë‹¤. PaymentForm ì»´í¬ë„ŒíŠ¸ë¥¼ í•´ë‹¹ ê³µê¸‰ìë¡œ ê°ì‹¸ê² ìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤:\n\n\n\nì—¬ê¸° ì™„ì„±ëœ ê²°ê³¼ì…ë‹ˆë‹¤:\n\n```js\n\"use client\";\nimport { Elements } from \"@stripe/react-stripe-js\";\nimport { loadStripe } from \"@stripe/stripe-js\";\nimport PaymentForm from \"@/components/PaymentForm/PaymentForm\";\n// ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì‹œì— `Stripe` ê°ì²´ë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ëŠ” ê²ƒì„ í”¼í•˜ê¸° ìœ„í•´\n// `loadStripe`ë¥¼ ì»´í¬ë„ŒíŠ¸ ë°–ì—ì„œ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ í™•ì¸í•´ì£¼ì„¸ìš”.\nconst stripePromise = loadStripe(\n  process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY!\n);\n\nexport default function Home() {\n  return (\n    \u003cElements stripe={stripePromise}\u003e\n      \u003cPaymentForm /\u003e\n    \u003c/Elements\u003e\n  );\n}\n```\n\nì™€! Stripeë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ì œ í¼ì„ ë§Œë“¤ì—ˆë„¤ìš”. ì˜ í–ˆì–´ìš”!\n\n\n\nì´ ê¸€ì´ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ì–´ìš”! ì•ìœ¼ë¡œ ì—¬ê¸°ì„œ ë” í™œë°œí•˜ê²Œ í™œë™í•  ê±°ì—ìš”. ê¸°ëŒ€ë¼ìš” ğŸ¤”\n\nì—¬ê¸° git ë ˆí¬ì§€í† ë¦¬ ë§í¬ì—ìš”. ì¦ê²¨ë³´ì„¸ìš”!","ogImage":{"url":"/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_0.png"},"coverImage":"/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_0.png","tag":["Tech"],"readingTime":10},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_0.png\"\u003e\n\u003cp\u003eì™€! ë‚´ ë§¤ì²´ ì•”í˜¸ë¥¼ ì°¾ì•˜ì–´ìš”!\u003c/p\u003e\n\u003cp\u003eì´ì œ, ë‚´ ì²« ë²ˆì§¸ ê¸°ì‚¬ì—ì„œ Stripeë¥¼ Next.js ì•±ì— í†µí•©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ë ¤ê³  í•´ìš”.\u003c/p\u003e\n\u003cp\u003eì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë„ˆë¬´ ë³µì¡í•œ ê²ƒì„ ë§Œë“œëŠ” ë° ì£¼ì˜ë¥¼ ê¸°ìš¸ì´ì§€ ì•Šì„ ê±°ì—ìš”. ëŒ€ì‹ ì— ìš°ë¦¬ëŠ” ê°„í¸í•œ Next.js 13.4 ì•±ì„ ê°œë°œí•˜ì—¬ ì¼íšŒì„± Stripe ê²°ì œë¥¼ ê°€ëŠ¥í•˜ê²Œ í•  ê±°ì—ìš”.\u003c/p\u003e\n\u003ch2\u003eì„¤ì •í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eí„°ë¯¸ë„ì„ ì—´ê³  ë‚˜ì˜ ê²½ìš°ì—ëŠ” Workspace ì•ˆì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•´ ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpx create-next-app@latest\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ \"create-next-app@13.4.1\"ì„ ì„¤ì¹˜í•˜ë¼ëŠ” ë©”ì‹œì§€ê°€ í‘œì‹œë˜ë©° ëª‡ ê°€ì§€ ì§ˆë¬¸ì´ ìˆì„ ê²ë‹ˆë‹¤.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eí”„ë¡œì íŠ¸ ì´ë¦„ì€ ë¬´ì—‡ì¸ê°€ìš”? stripe-nextjs\u003c/li\u003e\n\u003cli\u003eTypeScriptë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ë„¤\u003c/li\u003e\n\u003cli\u003eESLintë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ë„¤\u003c/li\u003e\n\u003cli\u003eì´ í”„ë¡œì íŠ¸ì— Tailwind CSSë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ì•„ë‹ˆìš”, ìŠ¤íƒ€ì¼ ì‘ì—…ì„ í•˜ì§€ ì•Šì„ ì˜ˆì •ì´ê¸° ë•Œë¬¸ì—\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003esrc/\u003c/code\u003e ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ë‚˜ìš”? ë„¤\u003c/li\u003e\n\u003cli\u003eApp Routerë¥¼ ì‚¬ìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ë„¤\u003c/li\u003e\n\u003cli\u003eê¸°ë³¸ import ë³„ì¹­ì„ ì‚¬ìš©ì ì •ì˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì•„ë‹ˆìš”\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eì§ˆë¬¸ì— ëª¨ë‘ ë‹µí–ˆë‹¤ë©´, ì„¤ì¹˜ê°€ ì‹œì‘ë©ë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003eì´ì œ ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ì´ì œ ì‹¤ì œë¡œ Next.js ì•±ì„ ë³´ë ¤ë©´ í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”. Next.js ì•± ë‚´ë¶€ì— ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eyarn run dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë” ë‚˜ì•„ê°€ê¸° ì „ì—, Stripe ê³„ì •ì„ ìƒì„±í•˜ê³  API í‚¤ë¥¼ ë°›ì•„ë´ìš”.\u003c/p\u003e\n\u003cp\u003eStripe ê³„ì •ì„ ë§Œë“  í›„ì—, dashboard.stripe.com/test/apikeysë¡œ ì´ë™í•´ì„œ API í‚¤ë¥¼ ë°›ì•„ìš”.\u003c/p\u003e\n\u003ch2\u003eí™˜ê²½ íŒŒì¼ ì„¤ì •í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eë£¨íŠ¸ ë””ë ‰í† ë¦¬ ì•ˆì—, .env.localì´ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e.env.local íŒŒì¼ ì•ˆì— ë‹¤ìŒì„ ì¶”ê°€í•´ì£¼ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eSTRIPE_SECRET_KEY\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì—¬ê¸°ì„œ ê¸°ì–µí•´ì•¼ í•  ì¤‘ìš”í•œ ì ì´ ëª‡ ê°€ì§€ ìˆì–´ìš”. ë¨¼ì €, \"\"\"ë¥¼ Stripe í‚¤ë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤. ë‘˜ì§¸ë¡œ, ë‘ ë³€ìˆ˜ ê°„ì˜ ì°¨ì´ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. í•˜ë‚˜ëŠ” \"NEXT_PUBLIC\"ì„ í¬í•¨í•˜ê³  ë‹¤ë¥¸ í•˜ë‚˜ëŠ” í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•´ì„œ, \"NEXT_PUBLIC\"ì„ ì‚¬ìš©í•˜ì—¬ STRIPE_PUBLISHABLE_KEYë¥¼ ë…¸ì¶œì‹œí‚¤ëŠ” ê²ƒì€ ê´œì°®ì§€ë§Œ ì‹œí¬ë¦¿ í‚¤ëŠ” ì ˆëŒ€ë¡œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— ë…¸ì¶œë˜ì–´ì„œëŠ” ì•ˆ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì•Œì•˜ì–´ìš”, ì´í•´í–ˆì–´ìš”? ê·¸ëŸ¼ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°‘ì‹œë‹¤!\u003c/p\u003e\n\u003ch2\u003eí•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eë‹¹ì‹ ì˜ Next.js ì•± ë‚´ë¶€ì— ë‹¤ìŒ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ë³´ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e@stripe/react-stripe-js @stripe/stripe-js stripe axios\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eë°±ì—”ë“œ ì‘ì—…ì„ ì‹œì‘í•´ë´…ì‹œë‹¤\u003c/h2\u003e\n\u003cp\u003eìš°ë¦¬ ì•± í´ë” ì•ˆì— apië¼ëŠ” ìƒˆ í´ë”ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ì´ê³³ì— ëª¨ë“  ë°±ì—”ë“œ ì½”ë“œê°€ ìœ„ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eapi í´ë” ì•ˆì— create-payment-intentë¼ëŠ” ìƒˆ í´ë”ë¥¼ ë§Œë“¤ê³ , ê·¸ ì•ˆì— route.ts ë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-14-HowtoaddStripepaymentstoyourNextjsapp_1.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003e\"create-payment-intent\" í´ë” ì•ˆì— \"route\"ë¼ëŠ” íŒŒì¼ì„ ë§Œë“œëŠ” ì´ìœ ëŠ” Next.jsì— API ìš”ì²­ì„ ë‹¤ë£¨ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë¦¬ëŠ” ê²ƒì…ë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì— ë”°ë¥´ë©´, routeëŠ” ë¼ìš°íŒ…ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ìˆ˜ì¤€ìœ¼ë¡œ, í˜ì´ì§€ê°€ í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë ˆì´ì•„ì›ƒì´ë‚˜ í´ë¼ì´ì–¸íŠ¸ ì¸¡ íƒìƒ‰ì— ì˜í–¥ì„ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. \"route.ts\" íŒŒì¼ì´ \"page.ts\" íŒŒì¼ì´ ìˆëŠ” ê³³ì— ì¡´ì¬í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì„ ëª…ì‹¬í•´ì•¼ í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ëŠ” ê²ƒì„ ê°•ë ¥íˆ ê¶Œì¥í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì—¬ê¸°ëŠ” route.ts íŒŒì¼ì˜ ì½”ë“œì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNextResponse\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eNextRequest\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/server\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eStripe\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"stripe\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e stripe = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eStripe\u003c/span\u003e(process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eSTRIPE_SECRET_KEY\u003c/span\u003e!, {\n  \u003cspan class=\"hljs-attr\"\u003etypescript\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eapiVersion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"2022-11-15\"\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePOST\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: NextRequest\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { data } = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e req.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { amount } = data;\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e paymentIntent = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e stripe.\u003cspan class=\"hljs-property\"\u003epaymentIntents\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003eamount\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNumber\u003c/span\u003e(amount) * \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003ecurrency\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"USD\"\u003c/span\u003e,\n    });\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNextResponse\u003c/span\u003e(paymentIntent.\u003cspan class=\"hljs-property\"\u003eclient_secret\u003c/span\u003e, { \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e });\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: any) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNextResponse\u003c/span\u003e(error, {\n      \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e,\n    });\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ê²ƒì„ ìì„¸íˆ ì‚´í´ë³´ê³  ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ì§€ ì´í•´í•´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cp\u003eì²«ì§¸ë¡œ, ìš°ë¦¬ëŠ” íƒ€ì…ê³¼ stripeë¥¼ import í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNextResponse\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eNextRequest\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/server\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eStripe\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"stripe\"\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë‹¤ìŒìœ¼ë¡œ stripe ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“­ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e stripe = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eStripe\u003c/span\u003e(process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eSTRIPE_SECRET_KEY\u003c/span\u003e!, {\n  \u003cspan class=\"hljs-attr\"\u003etypescript\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eapiVersion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"2022-11-15\"\u003c/span\u003e,\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìš°ë¦¬ì˜ Stripe ì¸ìŠ¤í„´ìŠ¤ëŠ” env.local íŒŒì¼ì—ì„œ Stripe ë¹„ë°€í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë” ë‚˜ì•„ê°€, ìš°ë¦¬ëŠ” Stripe ì¸ìŠ¤í„´ìŠ¤ì— TypeScriptë¥¼ í™œì„±í™”í•˜ê³  ì¸ìŠ¤í„´ìŠ¤ìš© Stripe API ë²„ì „ì„ ì§€ì •í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê³„ì† ì§„í–‰í•˜ê¸° ì „ì— Next.js 13.4ì—ì„œ API ê²½ë¡œë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²•ì— ëŒ€í•´ ì´ì•¼ê¸°í•´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cp\u003eì•„ë§ˆ ì´ë¯¸ ì£¼ëª©í–ˆì„ ê²ƒì´ì§€ë§Œ, í•¨ìˆ˜ì˜ ì œëª©ì´ \"POST\"ì™€ ê°™ì´ ëª¨ë‘ ëŒ€ë¬¸ìë¡œ ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë„¤ì´ë° ê·œì¹™ì€ Next.jsê°€ ì‹¤í–‰í•  í•´ë‹¹ HTTP ë©”ì†Œë“œë¥¼ ê²°ì •í•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, GET ìš”ì²­ì„ ìˆ˜í–‰í•˜ë ¤ë©´ í•¨ìˆ˜ì˜ ì œëª©ì„ \"GET\"ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•˜ë©°, ìˆ˜í–‰í•˜ë ¤ëŠ” ë‹¤ë¥¸ ì‘ì—…ì— ëŒ€í•´ì„œë„ ìœ ì‚¬í•˜ê²Œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì•Œê² ìŠµë‹ˆë‹¤, ì´í•´í–ˆìŠµë‹ˆë‹¤, ì¢‹ì•„ìš”! ê³„ì† ì§„í–‰í•©ì‹œë‹¤!\u003c/p\u003e\n\u003cp\u003eìš°ë¦¬ í•¨ìˆ˜ ë‚´ì—ì„œëŠ” ìš”ì²­ì—ì„œ ë°ì´í„°ë¥¼ ë¹„êµ¬ì¡°í™”í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•©ë‹ˆë‹¤. ê·¸ í›„ì—ëŠ” ë°ì´í„° ê°ì²´ì—ì„œ ê¸ˆì•¡ì„ ë”ìš± ì„¸ë¶„í™”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { data } = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e req.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { amount } = data;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ëª¨ë“  í¥ë¯¸ë¡œìš´ ë¡œì§ì´ ë°œìƒí•˜ëŠ” trycatch ë¸”ë¡ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003eíŒŒê³ ë“¤ì–´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e paymentIntent = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e stripe.\u003cspan class=\"hljs-property\"\u003epaymentIntents\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003eamount\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNumber\u003c/span\u003e(price) * \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003ecurrency\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"USD\"\u003c/span\u003e,\n    });\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNextResponse\u003c/span\u003e(paymentIntent.\u003cspan class=\"hljs-property\"\u003eclient_secret\u003c/span\u003e, { \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìš°ë¦¬ì˜ try ë¸”ë¡ ì•ˆì—ì„œ, ê²°ì œ ì¸í…íŠ¸ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ê²°ì œ ì¸í…íŠ¸ì— ëŒ€í•´ ì˜ ëª¨ë¥´ì‹ ë‹¤ë©´ ê±±ì •í•˜ì§€ ë§ˆì„¸ìš”. ê±°ë˜ì— ê´€í•œ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆì£ . ì§€ì›ë˜ëŠ” ê²°ì œ ë°©ë²•, ì§•ìˆ˜í•  ê¸ˆì•¡, ê·¸ë¦¬ê³  í¬ë§í•˜ëŠ” í†µí™”ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ, Stripeë¡œë¶€í„° ì–»ì€ í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ì„ í¬í•¨í•œ ì‘ë‹µì„ ë°˜í™˜í•  ê²ƒì…ë‹ˆë‹¤. ì´ ë‹¨ê³„ëŠ” ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ìš°ë¦¬ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ Stripeê°€ ê²°ì œë¥¼ í™•ì¸í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê¸° ìœ„í•´ í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ì„ í™œìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì´ì£ .\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNextResponse\u003c/span\u003e(error, {\n      \u003cspan class=\"hljs-attr\"\u003estatus\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e,\n    });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìš°ë¦¬ì˜ catch ë¸”ë¡ ì•ˆì—ì„œëŠ” ê°„ë‹¨íˆ ì˜¤ë¥˜ë¥¼ í¬í•¨í•œ ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ì‹œì ì—ì„œ ë°±ì—”ë“œ ê°œë°œì€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ìƒˆë¡œ ë§Œë“  ì—”ë“œí¬ì¸íŠ¸ì™€ ìƒí˜¸ ì‘ìš©í•  í´ë¼ì´ì–¸íŠ¸ ì¸¡ìœ¼ë¡œ ì´ë™í•´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003ch2\u003eí”„ë¡ íŠ¸ì—”ë“œ\u003c/h2\u003e\n\u003cp\u003eë§ˆë²•ì„ ì‹œì‘í•˜ê¸° ì „ì— ì •ë¦¬í•´ ë´…ì‹œë‹¤!\u003c/p\u003e\n\u003cp\u003elayout.tsx íŒŒì¼ì—ì„œ global.cssë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤„ì„ ì‚­ì œí•˜ì„¸ìš”. ìŠ¤íƒ€ì¼ì— ëŒ€í•´ì„œëŠ” ë‹¤ë£¨ì§€ ì•Šì„ ê±°ì—ìš”.\u003c/p\u003e\n\u003cp\u003eì•±.tsx íŒŒì¼ì—ì„œ \u003ccode\u003emain\u003c/code\u003e íƒœê·¸ ë‚´ë¶€ì˜ ëª¨ë“  ë‚´ìš©ì„ ì‚­ì œí•˜ê³ , Image ì»´í¬ë„ŒíŠ¸ import êµ¬ë¬¸ì„ ì‚­ì œí•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003eì¢‹ì•„ìš”, ì´ ì‹œì ì—ì„œ layout.tsx íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eInter\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"next/font/google\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e inter = \u003cspan class=\"hljs-title class_\"\u003eInter\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003esubsets\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e\"latin\"\u003c/span\u003e] });\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e metadata = {\n  \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Create Next App\"\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Generated by create next app\"\u003c/span\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eRootLayout\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e{\n  children,\n}: {\n  children: React.ReactNode;\n}\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003elang\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"en\"\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{inter.className}\u003c/span\u003e\u003e\u003c/span\u003e{children}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebody\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ehtml\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê·¸ë¦¬ê³  app.tsx íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eHome\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003e\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì—¬ê¸° ë©‹ì§„ ê³³ì—ìš”, ê²°ì œ ì–‘ì‹ì„ ì„¤ì •í•´ ë´…ì‹œë‹¤!\u003c/p\u003e\n\u003cp\u003e\"src\" í´ë”ì—ì„œ \"components\"ë¼ëŠ” ìƒˆ í´ë”ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. \"components\" í´ë” ì•ˆì— \"PaymentForm\"ì´ë¼ëŠ” ë˜ ë‹¤ë¥¸ í´ë”ë¥¼ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. \"PaymentForm\" í´ë” ì•ˆì— \"PaymentForm.tsx\"ë¼ëŠ” íŒŒì¼ì„ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. ê±°ê¸°ì— ìš°ë¦¬ì˜ ê²°ì œ ì–‘ì‹ì´ ìœ„ì¹˜í•˜ê³  ëŒ€ë¶€ë¶„ì˜ ë¡œì§ì´ ì—¬ê¸°ì„œ ì‹¤í–‰ë  ê±°ì—ìš”.\u003c/p\u003e\n\u003cp\u003eì‹œì‘í•´ ë´…ì‹œë‹¤!\u003c/p\u003e\n\u003cp\u003eìš°ë¦¬ê°€ ì»´í¬ë„ŒíŠ¸ ì‘ì„±ì„ ì‹œì‘í•˜ê¸° ì „ì—, Next.jsì—ê²Œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ë£¨ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë ¤ì£¼ì–´ì•¼ í•´ìš”.\u003c/p\u003e\n\u003cp\u003ePaymentForm.tsx íŒŒì¼ì˜ ë§¨ ìœ„ì— ë‹¤ìŒì„ ì¶”ê°€í•´ì£¼ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e\"use client\"\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê·¸ ë‹¤ìŒì— ë‹¤ìŒê³¼ ê°™ì€ import ë¬¸ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCardElement\u003c/span\u003e, useElements, useStripe } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@stripe/react-stripe-js\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e axios \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"axios\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ë¹ˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë´…ì‹œë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePaymentForm\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003e\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003e\u003c/span\u003e\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì§€ê¸ˆê¹Œì§€ì˜ íŒŒì¼ì€ ì´ë ‡ê²Œ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e\"ì‚¬ìš©ììš©\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCardElement\u003c/span\u003e, useElements, useStripe } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@stripe/react-stripe-js\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e axios \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"axios\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePaymentForm\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003e\u003c/span\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003e\u003c/span\u003e\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìš°ë¦¬ ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ ì²˜ìŒìœ¼ë¡œ í•´ì•¼ í•  ì¼ì€ Stripe í›…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì¸ë°, ìš°ë¦¬ê°€ ì‚¬ìš©í•  í›…ì€ useStripeì™€ useElements ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e stripe = \u003cspan class=\"hljs-title function_\"\u003euseStripe\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e elements = \u003cspan class=\"hljs-title function_\"\u003euseElements\u003c/span\u003e();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003efromì„ ì œì¶œí•  ìˆ˜ ìˆëŠ” onSubmitì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eonSubmit\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003ee: React.FormEvent\u0026#x3C;HTMLFormElement\u003e\u003c/span\u003e) =\u003e {}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eonSubmit í•¨ìˆ˜ ì•ˆì—ì„œ e.preventDefault(); ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ë³¸ ë™ì‘ì„ ë§‰ì•„ì¤ì‹œë‹¤.\u003c/p\u003e\n\u003cp\u003eë‹¤ìŒìœ¼ë¡œ, stripe ì¹´ë“œ ì—˜ë¦¬ë¨¼íŠ¸ì— ë‹¤ìŒ ìŠ¤ë‹ˆí«ì„ ì‚¬ìš©í•˜ì—¬ ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cardElement = elements?.\u003cspan class=\"hljs-title function_\"\u003egetElement\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"card\"\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì§€ê¸ˆë¶€í„° ì‹¤ì œ ë§ˆë²•ì„ ì‹œë„í•´ ë´…ì‹œë‹¤!\u003c/p\u003e\n\u003cp\u003etry-catch ë¸”ë¡ì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤. try ë¸”ë¡ ì•ˆì—ëŠ” stripeì™€ cardElementì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì¡°ê±´ë¬¸ì„ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤. ë‘˜ ì¤‘ í•˜ë‚˜ë¼ë„ ëˆ„ë½ëœ ê²½ìš°, onSubmit í•¨ìˆ˜ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì¤‘ë‹¨ì‹œí‚¤ê³  ë” ì´ìƒì˜ ì‘ì—…ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ nullì„ ë°˜í™˜í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003ecatch ë¸”ë¡ì—ì„œëŠ” ë‹¨ìˆœíˆ errorë¥¼ console.log í•˜ë©´ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë‹¤ìŒì€ ì½”ë“œ ì¡°ê°ì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!stripe || !cardElement) \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e;\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(error);\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì•ˆë…•í•˜ì„¸ìš” ì—¬ëŸ¬ë¶„, ì§€ê¸ˆ ì¢‹ì€ ìœ„ì¹˜ì— ìˆì–´ìš”. ê³„ì† ì§„í–‰í•˜ì£ .\u003c/p\u003e\n\u003cp\u003eStripeì™€ cardElementê°€ ëª¨ë‘ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„ì—, ì´ì „ì— ë°±ì—”ë“œì—ì„œ ì„¤ì •í•œ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ì œ ì˜ë„ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. APIì— ì „ë‹¬í•  ë°ì´í„°ëŠ” ê¸ˆì•¡ì´ í¬í•¨ë˜ë©°, ì €ì˜ ê²½ìš°ì—ëŠ” 89ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { data } = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e axios.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/api/create-payment-intent\"\u003c/span\u003e, {\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003eamount\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e89\u003c/span\u003e },\n      });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì‘ë‹µì„ clientSecretë¼ëŠ” ë³€ìˆ˜ì— í• ë‹¹í•´ë³´ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e clientSecret = data;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ ìš°ë¦¬ê°€ í•´ì•¼ í•  ì¼ì€ stripeì—ì„œ ì œê³µí•˜ëŠ” confirmCardPayment ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ì œë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì•„ë˜ëŠ” ì˜ˆì‹œ ì½”ë“œ ì¡°ê°ì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e stripe?.\u003cspan class=\"hljs-title function_\"\u003econfirmCardPayment\u003c/span\u003e(clientSecret, {\n  \u003cspan class=\"hljs-attr\"\u003epayment_method\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003ecard\u003c/span\u003e: cardElement },\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì§€ê¸ˆê¹Œì§€ onSubmit í•¨ìˆ˜ë¥¼ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eìš°ë¦¬ì˜ ì»´í¬ë„ŒíŠ¸ê°€ stripeì—ì„œ ì œê³µí•˜ëŠ” CardElement ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” í¼ì„ ë°˜í™˜í•˜ë„ë¡ ë§Œë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e    \u0026#x3C;form onSubmit={onSubmit}\u003e\n      \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eCardElement\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n      \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"submit\"\u003c/span\u003e\u003e\u003c/span\u003eì œì¶œí•˜ê¸°\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n    \u0026#x3C;/form\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìµœì¢… ê²°ê³¼:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e\"ì‚¬ìš©ì ì‚¬ìš©\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eCardElement\u003c/span\u003e, useElements, useStripe } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@stripe/react-stripe-js\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e axios \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"axios\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ePaymentForm\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e stripe = \u003cspan class=\"hljs-title function_\"\u003euseStripe\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e elements = \u003cspan class=\"hljs-title function_\"\u003euseElements\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eonSubmit\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003ee: React.FormEvent\u0026#x3C;HTMLFormElement\u003e\u003c/span\u003e) =\u003e {\n    e.\u003cspan class=\"hljs-title function_\"\u003epreventDefault\u003c/span\u003e();\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cardElement = elements?.\u003cspan class=\"hljs-title function_\"\u003egetElement\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"card\"\u003c/span\u003e);\n\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!stripe || !cardElement) \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e;\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { data } = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e axios.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/api/create-payment-intent\"\u003c/span\u003e, {\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003eamount\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e89\u003c/span\u003e },\n      });\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e clientSecret = data;\n\n      \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e stripe?.\u003cspan class=\"hljs-title function_\"\u003econfirmCardPayment\u003c/span\u003e(clientSecret, {\n        \u003cspan class=\"hljs-attr\"\u003epayment_method\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003ecard\u003c/span\u003e: cardElement },\n      });\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(error);\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonSubmit\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{onSubmit}\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eCardElement\u003c/span\u003e /\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"submit\"\u003c/span\u003e\u003e\u003c/span\u003eì œì¶œ\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì¢‹ì€ ì†Œì‹ì…ë‹ˆë‹¤! ìš°ë¦¬ì˜ PaymentForm ì»´í¬ë„ŒíŠ¸ê°€ ì´ì œ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë§Œì„¸! ì´ì œ ë§ˆì§€ë§‰ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ì„œ, ìƒˆë¡­ê²Œ ìƒì„±ëœ PaymentForm ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì•±ì˜ app.tsx íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒì„ ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003ePaymentForm ì»´í¬ë„ŒíŠ¸ê°€ app.tsx ì•ˆì—ì„œ ì‚¬ìš©ë˜ê¸° ì „ì—, ëª‡ ê°€ì§€ë¥¼ importí•˜ê³  stripeë¥¼ ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e\"ì‚¬ìš©ì ì‚¬ìš©\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eElements\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@stripe/react-stripe-js\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { loadStripe } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@stripe/stripe-js\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePaymentForm\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@/components/PaymentForm/PaymentForm\"\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003estripeë¥¼ ë¶ˆëŸ¬ì™€ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e stripePromise = \u003cspan class=\"hljs-title function_\"\u003eloadStripe\u003c/span\u003e(\n  process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY\u003c/span\u003e!\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003estripeë¥¼ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œ ë¡œë“œí•˜ëŠ” ê²ƒì„ í™•ì¸í•´ì£¼ì„¸ìš”. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ stripeê°€ ë§¤ë²ˆ ë Œë”ë§ë˜ì–´ ì›í•˜ì§€ ì•ŠëŠ” ê²°ê³¼ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ, return ë¬¸ ì•ˆì—ì„œ ìš°ë¦¬ì—ê²Œ ì œê³µëœ Element ê³µê¸‰ìë¥¼ í™œìš©í•´ë´…ì‹œë‹¤. PaymentForm ì»´í¬ë„ŒíŠ¸ë¥¼ í•´ë‹¹ ê³µê¸‰ìë¡œ ê°ì‹¸ê² ìŠµë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì´ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003eì—¬ê¸° ì™„ì„±ëœ ê²°ê³¼ì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e\"use client\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eElements\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@stripe/react-stripe-js\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { loadStripe } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@stripe/stripe-js\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePaymentForm\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"@/components/PaymentForm/PaymentForm\"\u003c/span\u003e;\n\u003cspan class=\"hljs-comment\"\u003e// ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì‹œì— `Stripe` ê°ì²´ë¥¼ ë‹¤ì‹œ ìƒì„±í•˜ëŠ” ê²ƒì„ í”¼í•˜ê¸° ìœ„í•´\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// `loadStripe`ë¥¼ ì»´í¬ë„ŒíŠ¸ ë°–ì—ì„œ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ í™•ì¸í•´ì£¼ì„¸ìš”.\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e stripePromise = \u003cspan class=\"hljs-title function_\"\u003eloadStripe\u003c/span\u003e(\n  process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY\u003c/span\u003e!\n);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eHome\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eElements\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estripe\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{stripePromise}\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ePaymentForm\u003c/span\u003e /\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eElements\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì™€! Stripeë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ì œ í¼ì„ ë§Œë“¤ì—ˆë„¤ìš”. ì˜ í–ˆì–´ìš”!\u003c/p\u003e\n\u003cp\u003eì´ ê¸€ì´ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ì–´ìš”! ì•ìœ¼ë¡œ ì—¬ê¸°ì„œ ë” í™œë°œí•˜ê²Œ í™œë™í•  ê±°ì—ìš”. ê¸°ëŒ€ë¼ìš” ğŸ¤”\u003c/p\u003e\n\u003cp\u003eì—¬ê¸° git ë ˆí¬ì§€í† ë¦¬ ë§í¬ì—ìš”. ì¦ê²¨ë³´ì„¸ìš”!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-14-HowtoaddStripepaymentstoyourNextjsapp"},"buildId":"Y-fCAg8BUV7y2HNFwX9AA","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>