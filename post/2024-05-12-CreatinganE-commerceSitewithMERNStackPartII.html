<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>MERN 스택으로 전자 상거래 사이트 만들기 - Part II | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="MERN 스택으로 전자 상거래 사이트 만들기 - Part II | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="MERN 스택으로 전자 상거래 사이트 만들기 - Part II | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII" data-gatsby-head="true"/><meta name="twitter:title" content="MERN 스택으로 전자 상거래 사이트 만들기 - Part II | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-12 19:45" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/acd99c507555fdc6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/acd99c507555fdc6.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/162-4172e84c8e2aa747.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-742e6c91a18eb160.js" defer=""></script><script src="/_next/static/6w6Yg3qJxLtqeXNguENru/_buildManifest.js" defer=""></script><script src="/_next/static/6w6Yg3qJxLtqeXNguENru/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">MERN 스택으로 전자 상거래 사이트 만들기 - Part II</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="MERN 스택으로 전자 상거래 사이트 만들기 - Part II" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 12, 2024</span><span class="posts_reading_time__f7YPP">7<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>회고</p>
<p>이전 기사에서 환경을 설정했고 기본 프로젝트를 설정했습니다.</p>
<p>지금은 React 프론트엔드 프로젝트와 Node.js 백엔드 프로젝트가 있습니다. 이 기사에서는 백엔드를 Mongo DB에 연결하고 Mongo DB 기본 사항을 학습하는 것에 초점을 맞추고 있습니다.</p>
<p>만약 이 기술들이 처음이라면 첫 부분을 읽어보세요. 익숙하다면 즐겁게 즉시 시작하세요. :)</p>
<p>소개</p>
<p>Node.js와 MongoDB를 연결하는 것은 백엔드 데이터베이스가 필요한 애플리케이션을 개발하는 중요한 단계입니다.</p>
<p>이 두 기술을 결합함으로써 우리는 대량의 데이터를 처리하고 빠른 응답 시간을 제공할 수 있는 강력하고 효율적인 애플리케이션을 만들 수 있습니다. 이 글에서는 Mongoose 패키지를 사용하여 Node.js와 MongoDB를 어떻게 연결하는지 살펴볼 것입니다. Mongoose는 MongoDB 위에 높은 수준의 추상화를 제공하며 데이터 모델을 구조화된 방법으로 정의할 수 있게 해줍니다. 또한 Node.js에서 MongoDB를 다루는 데 도움이 되는 몇 가지 모법과 팁을 알려드리겠습니다.</p>
<p>연결 설정하기</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);

<span class="hljs-comment">//mongoose 패키지를 불러옵니다</span>

<span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">"mongoose"</span>);

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-keyword">const</span> port = <span class="hljs-number">5000</span>;

<span class="hljs-comment">//연결 생성하기</span>

mongoose

.<span class="hljs-title function_">connect</span>(<span class="hljs-string">"mongodb://127.0.0.1/ECommerce"</span>)

.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =></span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"MongoDB에 연결되었습니다..."</span>))

.<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =></span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"MongoDB에 연결할 수 없습니다..."</span>));

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/"</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =></span> {

res.<span class="hljs-title function_">send</span>(<span class="hljs-string">"안녕, 세계!"</span>);

});

app.<span class="hljs-title function_">listen</span>(port, <span class="hljs-function">() =></span> {

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`포트 <span class="hljs-subst">${port}</span>에서 서버가 실행 중입니다`</span>);

});
</code></pre>
<p>위 코드에서는 로컬호스트에서 실행 중인 MongoDB 데이터베이스에 연결합니다. 연결이 설정되면 mongoose 객체를 사용하여 데이터베이스와 상호 작용할 수 있습니다.</p>
<p>추가 설치 및 설정</p>
<p>크로스 오리진 리소스 공유(CORS)는 웹 애플리케이션에서 다른 도메인으로의 HTTP 요청을 제한하는 보안 메커니즘입니다. 기본적으로 웹 브라우저는 이러한 요청을 차단하여 사용자 데이터에 무단 접근을 방지합니다. Node.js Express 서버와 React 애플리케이션의 경우, 서버가 React 앱 도메인에서의 요청을 허용하지 않으면 CORS 오류가 발생할 수 있습니다. 이 오류를 피하기 위해 Express 서버를 설정하여 React 앱 도메인에서의 요청을 허용하도록 cors 미들웨어를 추가하고 적절한 출처를 허용하도록 구성할 수 있습니다. 이렇게 하면 React 앱이 서버로 요청을 보내고 CORS 오류 없이 데이터를 검색할 수 있습니다.</p>
<p>cors 패키지를 다음 명령어로 설치하고:</p>
<pre><code class="hljs language-js">npm install cors
</code></pre>
<p>그리고 몽구스 연결 다음에 다음 코드를 추가하고 파일 상단에 패키지를 import하세요:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">"cors"</span>);
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>()); 
</code></pre>
<p>우리 제품 모델 정의하기</p>
<p>MongoDB에서 데이터는 JSON 객체와 유사한 문서 형식으로 저장됩니다. 모델은 이러한 문서의 구조를 정의하는 방법을 제공하며, 필드와 데이터 유형을 포함합니다. 모델을 정의함으로써 데이터가 일관되고 유효하며 쉽게 관리되도록 할 수 있습니다. 또한 서로 다른 모델 간의 관계를 정의할 수 있으므로 여러 컬렉션 간에 효율적으로 데이터를 쿼리하고 조작할 수 있습니다.</p>
<p>전자 상거래 웹사이트를 구축하는 동안 먼저 제품 모델을 정의합니다. 우리는 스키마 정의, 데이터 유효성 검사, 쿼리 및 Node.js에서 MongoDB 모델을 사용하는 데 가장 좋은 방법을 다룰 것입니다.</p>
<p>백엔드 폴더 안에 Models 폴더를 생성하고 product.js 파일을 만들어주세요. 그리고 product.js 파일 안에 다음 코드를 추가해주세요:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">"mongoose"</span>);

<span class="hljs-keyword">const</span> productSchema = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-title class_">Schema</span>({
  <span class="hljs-attr">title</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">description</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">price</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">discountPercentage</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">rating</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">stock</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">brand</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">category</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">thumbnail</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">images</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
  },
});

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Product</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">"Product"</span>, productSchema);

<span class="hljs-built_in">exports</span>.<span class="hljs-property">Product</span> = <span class="hljs-title class_">Product</span>;
</code></pre>
<p>위 코드에서는 Mongoose 패키지를 사용해 제품에 대한 모델을 정의하고 있어요. 이 모델은 제품이 가질 수 있는 속성을 정의하는데, title, description, price, discount percentage, rating, stock, brand, category, thumbnail, images가 포함돼요. 첫 줄은 스키마를 만들기 위해 필요한 Mongoose 패키지를 가져오는 것이에요. 그리고 mongoose.Schema() 메소드를 사용해 제품을 위한 새로운 스키마를 만들어요. 이 메소드는 키-값 쌍을 가진 객체를 전달받는데, 키는 속성의 이름이고 값은 속성을 설명하는 객체에요.</p>
<p>각 속성은 type과 required 필드를 가지고 있어요. type 필드는 속성의 데이터 타입을 지정하고, required 필드는 제품에 대해 필수인지를 나타내요.</p>
<p>스키마를 정의한 후에는 mongoose.model() 메서드를 사용하여 모델을 만듭니다. 이 메서드는 두 개의 인수, 즉 모델의 이름과 이전에 만든 스키마를 사용합니다. 이 경우 모델의 이름은 Product이며 스키마는 productSchema에 할당됩니다.</p>
<p>마지막으로, Product 모델을 내보내어 응용 프로그램의 다른 부분에서 사용할 수 있도록 합니다.</p>
<p>기본 CRUD 함수</p>
<p>기본 CRUD 함수는 데이터베이스 시스템의 영속 저장을 위한 네 가지 기본 작업인 Create, Read, Update 및 Delete를 의미합니다. 이러한 함수는 데이터베이스에서 데이터를 조작하는 데 사용됩니다.</p>
<ul>
<li>"Create" 작업은 데이터베이스에 새 데이터를 추가하는 데 사용됩니다.</li>
<li>"Read" 작업은 데이터베이스에서 기존 데이터를 검색하는 데 사용됩니다.</li>
<li>"Update" 작업은 데이터베이스의 기존 데이터를 수정하는 데 사용됩니다.</li>
<li>"Delete" 작업은 데이터베이스에서 데이터를 제거하는 데 사용됩니다.</li>
</ul>
<p>CRUD 함수는 데이터 관리와 관련된 웹 애플리케이션이나 소프트웨어를 개발할 때 필수적입니다. 이를 통해 데이터를 효과적으로 관리하고 효율적으로 처리하여 사용자가 올바른 정보에 올바른 시간에 액세스할 수 있도록 합니다.</p>
<p>우리의 제품 모델을 기반으로 index.js에 다음 라우트를 추가해주세요:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">//새 제품을 생성합니다.</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/create"</span>, <span class="hljs-keyword">async</span> (req, res) => {
  <span class="hljs-keyword">const</span> newProduct = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>({
    <span class="hljs-attr">title</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">title</span>,
    <span class="hljs-attr">description</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">description</span>,
    <span class="hljs-attr">price</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">price</span>,
    <span class="hljs-attr">discountPercentage</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">discountPercentage</span>,
    <span class="hljs-attr">rating</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">rating</span>,
    <span class="hljs-attr">stock</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">stock</span>,
    <span class="hljs-attr">brand</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">brand</span>,
    <span class="hljs-attr">category</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">category</span>,
    <span class="hljs-attr">thumbnail</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">thumbnail</span>,
    <span class="hljs-attr">images</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">images</span>,
  });

  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Product</span>.<span class="hljs-title function_">create</span>(newProduct);
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">"제품이 데이터베이스에 저장되었습니다!"</span>);
});
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">// 모든 제품 목록 가져오기</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/read"</span>, <span class="hljs-keyword">async</span> (req, res) => {
  <span class="hljs-keyword">const</span> productList = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Product</span>.<span class="hljs-title function_">find</span>();
  res.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(productList));
});
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">// id를 기반으로 제품 업데이트</span>
app.<span class="hljs-title function_">put</span>(<span class="hljs-string">"/update/:id"</span>, <span class="hljs-keyword">async</span> (req, res) => {
  <span class="hljs-keyword">const</span> product_id = req.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>;
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Product</span>.<span class="hljs-title function_">findByIdAndUpdate</span>(product_id, {
    <span class="hljs-attr">title</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">title</span>,
    <span class="hljs-attr">description</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">description</span>,
    <span class="hljs-attr">price</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">price</span>,
    <span class="hljs-attr">discountPercentage</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">discountPercentage</span>,
    <span class="hljs-attr">rating</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">rating</span>,
    <span class="hljs-attr">stock</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">stock</span>,
    <span class="hljs-attr">brand</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">brand</span>,
    <span class="hljs-attr">category</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">category</span>,
    <span class="hljs-attr">thumbnail</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">thumbnail</span>,
    <span class="hljs-attr">images</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">images</span>,
  });

  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">"제품이 성공적으로 업데이트되었습니다!"</span>);
});
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">// id를 기반으로 제품 삭제</span>
app.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"/delete/:id"</span>, <span class="hljs-keyword">async</span> (req, res) => {
  <span class="hljs-keyword">const</span> product_id = req.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>;
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Product</span>.<span class="hljs-title function_">findByIdAndDelete</span>(product_id);
  res.<span class="hljs-title function_">send</span>(<span class="hljs-string">"제품이 삭제되었습니다!"</span>);
});
</code></pre>
<p>위 코드에서 제품을 조작하는 네 가지 기본 라우트를 볼 수 있습니다. 프론트엔드 없이 테스트하려면 API 테스트 도구가 필요합니다. 저는 Postman(<a href="https://www.postman.com/)%EC%9D%84" rel="nofollow" target="_blank">https://www.postman.com/)을</a> 사용할 예정이지만, 다른 API 테스트 도구를 잘 알고 있다면 사용해도 좋습니다!</p>
<pre><code>


테스트해 봐요!

create 메서드를 사용하면 데이터베이스에 새 제품을 추가할 수 있고 성공적인 응답을 받을 수 있어요!

&#x3C;img src="/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_1.png" />

update 메서드를 사용하면 특정 제품을 업데이트할 수 있어요.



&#x3C;img src="/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_2.png" />

삭제 메소드를 사용하여 데이터베이스에서 ID별 제품을 삭제할 수 있습니다.

&#x3C;img src="/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_3.png" />

get 메소드를 사용하여 데이터베이스에서 모든 제품을 검색할 수 있습니다.



![이미지](/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_4.png)

체크를 수행하려면 Mongo DB Compass에서 다음 단계를 따르기만 하면 됩니다:

- Mongo DB Compass를 엽니다.
- 확인하려는 데이터베이스에 연결합니다.
- 확인하려는 컬렉션을 선택합니다.
- 컬렉션의 문서를 보고 데이터가 올바른지 확인합니다.

Mongo DB Compass에서 정기적인 확인을 수행함으로써 데이터의 정확성과 최신 상태를 보장할 수 있습니다. 특히 전자 상거래 웹사이트와 같이 대량의 데이터를 처리할 때 이 기능은 매우 중요합니다. 애플리케이션이 원활하게 작동하는지 확인하려면 꾸준한 확인을 잊지 마세요!



![이미지](/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_5.png)

단일 제품을 가져오는 방법은 업데이트 함수와 매우 유사합니다. 단순히 id를 포함하고 .findById() 함수를 사용하면 됩니다. 마지막에 제품 객체를 반환합니다.

이 연습을 좋은 도전으로 생각해보고 혼자서 작성해 보세요. 한번 시도해보고 어떻게 진행되는지 확인해보세요! 만약 잘 되지 않는다면 걱정하지 마세요! 항상 GitHub에서 해결책을 찾을 수 있습니다.

마무리



이 글에서는 Node.js로 MongoDB 데이터베이스를 조회하는 기본적인 내용을 다뤘어요. 우리는 기본 CRUD 함수를 생성하고 활용했는데, 이에 대해 더 깊이 들어가는 내용은 다음 글에서 다룰 예정이에요. 저희의 GitHub 저장소에서 코드를 확인하지 않으시면 안돼요! 다음 파트에서 뵙겠습니다!
</code></pre>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"MERN 스택으로 전자 상거래 사이트 만들기 - Part II","description":"","date":"2024-05-12 19:45","slug":"2024-05-12-CreatinganE-commerceSitewithMERNStackPartII","content":"\n\n\u003cimg src=\"/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_0.png\" /\u003e\n\n회고\n\n이전 기사에서 환경을 설정했고 기본 프로젝트를 설정했습니다.\n\n지금은 React 프론트엔드 프로젝트와 Node.js 백엔드 프로젝트가 있습니다. 이 기사에서는 백엔드를 Mongo DB에 연결하고 Mongo DB 기본 사항을 학습하는 것에 초점을 맞추고 있습니다.\n\n\n\n만약 이 기술들이 처음이라면 첫 부분을 읽어보세요. 익숙하다면 즐겁게 즉시 시작하세요. :)\n\n소개\n\nNode.js와 MongoDB를 연결하는 것은 백엔드 데이터베이스가 필요한 애플리케이션을 개발하는 중요한 단계입니다.\n\n이 두 기술을 결합함으로써 우리는 대량의 데이터를 처리하고 빠른 응답 시간을 제공할 수 있는 강력하고 효율적인 애플리케이션을 만들 수 있습니다. 이 글에서는 Mongoose 패키지를 사용하여 Node.js와 MongoDB를 어떻게 연결하는지 살펴볼 것입니다. Mongoose는 MongoDB 위에 높은 수준의 추상화를 제공하며 데이터 모델을 구조화된 방법으로 정의할 수 있게 해줍니다. 또한 Node.js에서 MongoDB를 다루는 데 도움이 되는 몇 가지 모법과 팁을 알려드리겠습니다.\n\n\n\n연결 설정하기\n\n```js\nconst express = require(\"express\");\n\n//mongoose 패키지를 불러옵니다\n\nconst mongoose = require(\"mongoose\");\n\nconst app = express();\n\nconst port = 5000;\n\n//연결 생성하기\n\nmongoose\n\n.connect(\"mongodb://127.0.0.1/ECommerce\")\n\n.then(() =\u003e console.log(\"MongoDB에 연결되었습니다...\"))\n\n.catch((err) =\u003e console.error(\"MongoDB에 연결할 수 없습니다...\"));\n\napp.get(\"/\", (req, res) =\u003e {\n\nres.send(\"안녕, 세계!\");\n\n});\n\napp.listen(port, () =\u003e {\n\nconsole.log(`포트 ${port}에서 서버가 실행 중입니다`);\n\n});\n```\n\n위 코드에서는 로컬호스트에서 실행 중인 MongoDB 데이터베이스에 연결합니다. 연결이 설정되면 mongoose 객체를 사용하여 데이터베이스와 상호 작용할 수 있습니다.\n\n추가 설치 및 설정\n\n\n\n크로스 오리진 리소스 공유(CORS)는 웹 애플리케이션에서 다른 도메인으로의 HTTP 요청을 제한하는 보안 메커니즘입니다. 기본적으로 웹 브라우저는 이러한 요청을 차단하여 사용자 데이터에 무단 접근을 방지합니다. Node.js Express 서버와 React 애플리케이션의 경우, 서버가 React 앱 도메인에서의 요청을 허용하지 않으면 CORS 오류가 발생할 수 있습니다. 이 오류를 피하기 위해 Express 서버를 설정하여 React 앱 도메인에서의 요청을 허용하도록 cors 미들웨어를 추가하고 적절한 출처를 허용하도록 구성할 수 있습니다. 이렇게 하면 React 앱이 서버로 요청을 보내고 CORS 오류 없이 데이터를 검색할 수 있습니다.\n\ncors 패키지를 다음 명령어로 설치하고:\n\n```js\nnpm install cors\n```\n\n그리고 몽구스 연결 다음에 다음 코드를 추가하고 파일 상단에 패키지를 import하세요:\n\n\n\n```js\nconst cors = require(\"cors\");\napp.use(cors()); \n```\n\n우리 제품 모델 정의하기\n\nMongoDB에서 데이터는 JSON 객체와 유사한 문서 형식으로 저장됩니다. 모델은 이러한 문서의 구조를 정의하는 방법을 제공하며, 필드와 데이터 유형을 포함합니다. 모델을 정의함으로써 데이터가 일관되고 유효하며 쉽게 관리되도록 할 수 있습니다. 또한 서로 다른 모델 간의 관계를 정의할 수 있으므로 여러 컬렉션 간에 효율적으로 데이터를 쿼리하고 조작할 수 있습니다.\n\n전자 상거래 웹사이트를 구축하는 동안 먼저 제품 모델을 정의합니다. 우리는 스키마 정의, 데이터 유효성 검사, 쿼리 및 Node.js에서 MongoDB 모델을 사용하는 데 가장 좋은 방법을 다룰 것입니다.\n\n\n\n백엔드 폴더 안에 Models 폴더를 생성하고 product.js 파일을 만들어주세요. 그리고 product.js 파일 안에 다음 코드를 추가해주세요:\n\n```js\nconst mongoose = require(\"mongoose\");\n\nconst productSchema = new mongoose.Schema({\n  title: {\n    type: String,\n    required: true,\n  },\n  description: {\n    type: String,\n    required: true,\n  },\n  price: {\n    type: Number,\n    required: true,\n  },\n  discountPercentage: {\n    type: Number,\n    required: true,\n  },\n  rating: {\n    type: Number,\n    required: true,\n  },\n  stock: {\n    type: Number,\n    required: true,\n  },\n  brand: {\n    type: String,\n    required: true,\n  },\n  category: {\n    type: String,\n    required: true,\n  },\n  thumbnail: {\n    type: String,\n    required: true,\n  },\n  images: {\n    type: String,\n    required: true,\n  },\n});\n\nconst Product = mongoose.model(\"Product\", productSchema);\n\nexports.Product = Product;\n```\n\n위 코드에서는 Mongoose 패키지를 사용해 제품에 대한 모델을 정의하고 있어요. 이 모델은 제품이 가질 수 있는 속성을 정의하는데, title, description, price, discount percentage, rating, stock, brand, category, thumbnail, images가 포함돼요. 첫 줄은 스키마를 만들기 위해 필요한 Mongoose 패키지를 가져오는 것이에요. 그리고 mongoose.Schema() 메소드를 사용해 제품을 위한 새로운 스키마를 만들어요. 이 메소드는 키-값 쌍을 가진 객체를 전달받는데, 키는 속성의 이름이고 값은 속성을 설명하는 객체에요.\n\n각 속성은 type과 required 필드를 가지고 있어요. type 필드는 속성의 데이터 타입을 지정하고, required 필드는 제품에 대해 필수인지를 나타내요.\n\n\n\n스키마를 정의한 후에는 mongoose.model() 메서드를 사용하여 모델을 만듭니다. 이 메서드는 두 개의 인수, 즉 모델의 이름과 이전에 만든 스키마를 사용합니다. 이 경우 모델의 이름은 Product이며 스키마는 productSchema에 할당됩니다.\n\n마지막으로, Product 모델을 내보내어 응용 프로그램의 다른 부분에서 사용할 수 있도록 합니다.\n\n기본 CRUD 함수\n\n기본 CRUD 함수는 데이터베이스 시스템의 영속 저장을 위한 네 가지 기본 작업인 Create, Read, Update 및 Delete를 의미합니다. 이러한 함수는 데이터베이스에서 데이터를 조작하는 데 사용됩니다.\n\n\n\n- \"Create\" 작업은 데이터베이스에 새 데이터를 추가하는 데 사용됩니다.\n- \"Read\" 작업은 데이터베이스에서 기존 데이터를 검색하는 데 사용됩니다.\n- \"Update\" 작업은 데이터베이스의 기존 데이터를 수정하는 데 사용됩니다.\n- \"Delete\" 작업은 데이터베이스에서 데이터를 제거하는 데 사용됩니다.\n\nCRUD 함수는 데이터 관리와 관련된 웹 애플리케이션이나 소프트웨어를 개발할 때 필수적입니다. 이를 통해 데이터를 효과적으로 관리하고 효율적으로 처리하여 사용자가 올바른 정보에 올바른 시간에 액세스할 수 있도록 합니다.\n\n우리의 제품 모델을 기반으로 index.js에 다음 라우트를 추가해주세요:\n\n```js\n//새 제품을 생성합니다.\napp.post(\"/create\", async (req, res) =\u003e {\n  const newProduct = new Product({\n    title: req.body.title,\n    description: req.body.description,\n    price: req.body.price,\n    discountPercentage: req.body.discountPercentage,\n    rating: req.body.rating,\n    stock: req.body.stock,\n    brand: req.body.brand,\n    category: req.body.category,\n    thumbnail: req.body.thumbnail,\n    images: req.body.images,\n  });\n\n  await Product.create(newProduct);\n  res.send(\"제품이 데이터베이스에 저장되었습니다!\");\n});\n```\n\n\n\n```js\n// 모든 제품 목록 가져오기\napp.get(\"/read\", async (req, res) =\u003e {\n  const productList = await Product.find();\n  res.send(JSON.stringify(productList));\n});\n```\n\n```js\n// id를 기반으로 제품 업데이트\napp.put(\"/update/:id\", async (req, res) =\u003e {\n  const product_id = req.params.id;\n  await Product.findByIdAndUpdate(product_id, {\n    title: req.body.title,\n    description: req.body.description,\n    price: req.body.price,\n    discountPercentage: req.body.discountPercentage,\n    rating: req.body.rating,\n    stock: req.body.stock,\n    brand: req.body.brand,\n    category: req.body.category,\n    thumbnail: req.body.thumbnail,\n    images: req.body.images,\n  });\n\n  res.send(\"제품이 성공적으로 업데이트되었습니다!\");\n});\n``` \n\n```js\n// id를 기반으로 제품 삭제\napp.delete(\"/delete/:id\", async (req, res) =\u003e {\n  const product_id = req.params.id;\n  await Product.findByIdAndDelete(product_id);\n  res.send(\"제품이 삭제되었습니다!\");\n});\n```\n\n위 코드에서 제품을 조작하는 네 가지 기본 라우트를 볼 수 있습니다. 프론트엔드 없이 테스트하려면 API 테스트 도구가 필요합니다. 저는 Postman(https://www.postman.com/)을 사용할 예정이지만, 다른 API 테스트 도구를 잘 알고 있다면 사용해도 좋습니다!\n```\n\n\n\n테스트해 봐요!\n\ncreate 메서드를 사용하면 데이터베이스에 새 제품을 추가할 수 있고 성공적인 응답을 받을 수 있어요!\n\n\u003cimg src=\"/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_1.png\" /\u003e\n\nupdate 메서드를 사용하면 특정 제품을 업데이트할 수 있어요.\n\n\n\n\u003cimg src=\"/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_2.png\" /\u003e\n\n삭제 메소드를 사용하여 데이터베이스에서 ID별 제품을 삭제할 수 있습니다.\n\n\u003cimg src=\"/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_3.png\" /\u003e\n\nget 메소드를 사용하여 데이터베이스에서 모든 제품을 검색할 수 있습니다.\n\n\n\n![이미지](/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_4.png)\n\n체크를 수행하려면 Mongo DB Compass에서 다음 단계를 따르기만 하면 됩니다:\n\n- Mongo DB Compass를 엽니다.\n- 확인하려는 데이터베이스에 연결합니다.\n- 확인하려는 컬렉션을 선택합니다.\n- 컬렉션의 문서를 보고 데이터가 올바른지 확인합니다.\n\nMongo DB Compass에서 정기적인 확인을 수행함으로써 데이터의 정확성과 최신 상태를 보장할 수 있습니다. 특히 전자 상거래 웹사이트와 같이 대량의 데이터를 처리할 때 이 기능은 매우 중요합니다. 애플리케이션이 원활하게 작동하는지 확인하려면 꾸준한 확인을 잊지 마세요!\n\n\n\n![이미지](/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_5.png)\n\n단일 제품을 가져오는 방법은 업데이트 함수와 매우 유사합니다. 단순히 id를 포함하고 .findById() 함수를 사용하면 됩니다. 마지막에 제품 객체를 반환합니다.\n\n이 연습을 좋은 도전으로 생각해보고 혼자서 작성해 보세요. 한번 시도해보고 어떻게 진행되는지 확인해보세요! 만약 잘 되지 않는다면 걱정하지 마세요! 항상 GitHub에서 해결책을 찾을 수 있습니다.\n\n마무리\n\n\n\n이 글에서는 Node.js로 MongoDB 데이터베이스를 조회하는 기본적인 내용을 다뤘어요. 우리는 기본 CRUD 함수를 생성하고 활용했는데, 이에 대해 더 깊이 들어가는 내용은 다음 글에서 다룰 예정이에요. 저희의 GitHub 저장소에서 코드를 확인하지 않으시면 안돼요! 다음 파트에서 뵙겠습니다!","ogImage":{"url":"/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_0.png"},"coverImage":"/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_0.png","tag":["Tech"],"readingTime":7},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e회고\u003c/p\u003e\n\u003cp\u003e이전 기사에서 환경을 설정했고 기본 프로젝트를 설정했습니다.\u003c/p\u003e\n\u003cp\u003e지금은 React 프론트엔드 프로젝트와 Node.js 백엔드 프로젝트가 있습니다. 이 기사에서는 백엔드를 Mongo DB에 연결하고 Mongo DB 기본 사항을 학습하는 것에 초점을 맞추고 있습니다.\u003c/p\u003e\n\u003cp\u003e만약 이 기술들이 처음이라면 첫 부분을 읽어보세요. 익숙하다면 즐겁게 즉시 시작하세요. :)\u003c/p\u003e\n\u003cp\u003e소개\u003c/p\u003e\n\u003cp\u003eNode.js와 MongoDB를 연결하는 것은 백엔드 데이터베이스가 필요한 애플리케이션을 개발하는 중요한 단계입니다.\u003c/p\u003e\n\u003cp\u003e이 두 기술을 결합함으로써 우리는 대량의 데이터를 처리하고 빠른 응답 시간을 제공할 수 있는 강력하고 효율적인 애플리케이션을 만들 수 있습니다. 이 글에서는 Mongoose 패키지를 사용하여 Node.js와 MongoDB를 어떻게 연결하는지 살펴볼 것입니다. Mongoose는 MongoDB 위에 높은 수준의 추상화를 제공하며 데이터 모델을 구조화된 방법으로 정의할 수 있게 해줍니다. 또한 Node.js에서 MongoDB를 다루는 데 도움이 되는 몇 가지 모법과 팁을 알려드리겠습니다.\u003c/p\u003e\n\u003cp\u003e연결 설정하기\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e express = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e//mongoose 패키지를 불러옵니다\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e mongoose = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"mongoose\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e app = \u003cspan class=\"hljs-title function_\"\u003eexpress\u003c/span\u003e();\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e port = \u003cspan class=\"hljs-number\"\u003e5000\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e//연결 생성하기\u003c/span\u003e\n\nmongoose\n\n.\u003cspan class=\"hljs-title function_\"\u003econnect\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"mongodb://127.0.0.1/ECommerce\"\u003c/span\u003e)\n\n.\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"MongoDB에 연결되었습니다...\"\u003c/span\u003e))\n\n.\u003cspan class=\"hljs-title function_\"\u003ecatch\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerr\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"MongoDB에 연결할 수 없습니다...\"\u003c/span\u003e));\n\napp.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ereq, res\u003c/span\u003e) =\u003e\u003c/span\u003e {\n\nres.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"안녕, 세계!\"\u003c/span\u003e);\n\n});\n\napp.\u003cspan class=\"hljs-title function_\"\u003elisten\u003c/span\u003e(port, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`포트 \u003cspan class=\"hljs-subst\"\u003e${port}\u003c/span\u003e에서 서버가 실행 중입니다`\u003c/span\u003e);\n\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 코드에서는 로컬호스트에서 실행 중인 MongoDB 데이터베이스에 연결합니다. 연결이 설정되면 mongoose 객체를 사용하여 데이터베이스와 상호 작용할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e추가 설치 및 설정\u003c/p\u003e\n\u003cp\u003e크로스 오리진 리소스 공유(CORS)는 웹 애플리케이션에서 다른 도메인으로의 HTTP 요청을 제한하는 보안 메커니즘입니다. 기본적으로 웹 브라우저는 이러한 요청을 차단하여 사용자 데이터에 무단 접근을 방지합니다. Node.js Express 서버와 React 애플리케이션의 경우, 서버가 React 앱 도메인에서의 요청을 허용하지 않으면 CORS 오류가 발생할 수 있습니다. 이 오류를 피하기 위해 Express 서버를 설정하여 React 앱 도메인에서의 요청을 허용하도록 cors 미들웨어를 추가하고 적절한 출처를 허용하도록 구성할 수 있습니다. 이렇게 하면 React 앱이 서버로 요청을 보내고 CORS 오류 없이 데이터를 검색할 수 있습니다.\u003c/p\u003e\n\u003cp\u003ecors 패키지를 다음 명령어로 설치하고:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install cors\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그리고 몽구스 연결 다음에 다음 코드를 추가하고 파일 상단에 패키지를 import하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e cors = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"cors\"\u003c/span\u003e);\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003ecors\u003c/span\u003e()); \n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e우리 제품 모델 정의하기\u003c/p\u003e\n\u003cp\u003eMongoDB에서 데이터는 JSON 객체와 유사한 문서 형식으로 저장됩니다. 모델은 이러한 문서의 구조를 정의하는 방법을 제공하며, 필드와 데이터 유형을 포함합니다. 모델을 정의함으로써 데이터가 일관되고 유효하며 쉽게 관리되도록 할 수 있습니다. 또한 서로 다른 모델 간의 관계를 정의할 수 있으므로 여러 컬렉션 간에 효율적으로 데이터를 쿼리하고 조작할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e전자 상거래 웹사이트를 구축하는 동안 먼저 제품 모델을 정의합니다. 우리는 스키마 정의, 데이터 유효성 검사, 쿼리 및 Node.js에서 MongoDB 모델을 사용하는 데 가장 좋은 방법을 다룰 것입니다.\u003c/p\u003e\n\u003cp\u003e백엔드 폴더 안에 Models 폴더를 생성하고 product.js 파일을 만들어주세요. 그리고 product.js 파일 안에 다음 코드를 추가해주세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e mongoose = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"mongoose\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e productSchema = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e mongoose.\u003cspan class=\"hljs-title class_\"\u003eSchema\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003eprice\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNumber\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ediscountPercentage\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNumber\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003erating\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNumber\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003estock\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNumber\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ebrand\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ecategory\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ethumbnail\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003eimages\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n});\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProduct\u003c/span\u003e = mongoose.\u003cspan class=\"hljs-title function_\"\u003emodel\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Product\"\u003c/span\u003e, productSchema);\n\n\u003cspan class=\"hljs-built_in\"\u003eexports\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eProduct\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eProduct\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 코드에서는 Mongoose 패키지를 사용해 제품에 대한 모델을 정의하고 있어요. 이 모델은 제품이 가질 수 있는 속성을 정의하는데, title, description, price, discount percentage, rating, stock, brand, category, thumbnail, images가 포함돼요. 첫 줄은 스키마를 만들기 위해 필요한 Mongoose 패키지를 가져오는 것이에요. 그리고 mongoose.Schema() 메소드를 사용해 제품을 위한 새로운 스키마를 만들어요. 이 메소드는 키-값 쌍을 가진 객체를 전달받는데, 키는 속성의 이름이고 값은 속성을 설명하는 객체에요.\u003c/p\u003e\n\u003cp\u003e각 속성은 type과 required 필드를 가지고 있어요. type 필드는 속성의 데이터 타입을 지정하고, required 필드는 제품에 대해 필수인지를 나타내요.\u003c/p\u003e\n\u003cp\u003e스키마를 정의한 후에는 mongoose.model() 메서드를 사용하여 모델을 만듭니다. 이 메서드는 두 개의 인수, 즉 모델의 이름과 이전에 만든 스키마를 사용합니다. 이 경우 모델의 이름은 Product이며 스키마는 productSchema에 할당됩니다.\u003c/p\u003e\n\u003cp\u003e마지막으로, Product 모델을 내보내어 응용 프로그램의 다른 부분에서 사용할 수 있도록 합니다.\u003c/p\u003e\n\u003cp\u003e기본 CRUD 함수\u003c/p\u003e\n\u003cp\u003e기본 CRUD 함수는 데이터베이스 시스템의 영속 저장을 위한 네 가지 기본 작업인 Create, Read, Update 및 Delete를 의미합니다. 이러한 함수는 데이터베이스에서 데이터를 조작하는 데 사용됩니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\"Create\" 작업은 데이터베이스에 새 데이터를 추가하는 데 사용됩니다.\u003c/li\u003e\n\u003cli\u003e\"Read\" 작업은 데이터베이스에서 기존 데이터를 검색하는 데 사용됩니다.\u003c/li\u003e\n\u003cli\u003e\"Update\" 작업은 데이터베이스의 기존 데이터를 수정하는 데 사용됩니다.\u003c/li\u003e\n\u003cli\u003e\"Delete\" 작업은 데이터베이스에서 데이터를 제거하는 데 사용됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eCRUD 함수는 데이터 관리와 관련된 웹 애플리케이션이나 소프트웨어를 개발할 때 필수적입니다. 이를 통해 데이터를 효과적으로 관리하고 효율적으로 처리하여 사용자가 올바른 정보에 올바른 시간에 액세스할 수 있도록 합니다.\u003c/p\u003e\n\u003cp\u003e우리의 제품 모델을 기반으로 index.js에 다음 라우트를 추가해주세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e//새 제품을 생성합니다.\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/create\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e newProduct = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProduct\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etitle\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edescription\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eprice\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eprice\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ediscountPercentage\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ediscountPercentage\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erating\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003erating\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003estock\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estock\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ebrand\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebrand\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ecategory\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecategory\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ethumbnail\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ethumbnail\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eimages\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eimages\u003c/span\u003e,\n  });\n\n  \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProduct\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(newProduct);\n  res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"제품이 데이터베이스에 저장되었습니다!\"\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 모든 제품 목록 가져오기\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/read\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e productList = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProduct\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efind\u003c/span\u003e();\n  res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(productList));\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// id를 기반으로 제품 업데이트\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/update/:id\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e product_id = req.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProduct\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindByIdAndUpdate\u003c/span\u003e(product_id, {\n    \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etitle\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edescription\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eprice\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eprice\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ediscountPercentage\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ediscountPercentage\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003erating\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003erating\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003estock\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estock\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ebrand\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebrand\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ecategory\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecategory\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ethumbnail\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ethumbnail\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eimages\u003c/span\u003e: req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eimages\u003c/span\u003e,\n  });\n\n  res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"제품이 성공적으로 업데이트되었습니다!\"\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// id를 기반으로 제품 삭제\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/delete/:id\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e product_id = req.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eProduct\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindByIdAndDelete\u003c/span\u003e(product_id);\n  res.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"제품이 삭제되었습니다!\"\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 코드에서 제품을 조작하는 네 가지 기본 라우트를 볼 수 있습니다. 프론트엔드 없이 테스트하려면 API 테스트 도구가 필요합니다. 저는 Postman(\u003ca href=\"https://www.postman.com/)%EC%9D%84\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://www.postman.com/)을\u003c/a\u003e 사용할 예정이지만, 다른 API 테스트 도구를 잘 알고 있다면 사용해도 좋습니다!\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n\n\n테스트해 봐요!\n\ncreate 메서드를 사용하면 데이터베이스에 새 제품을 추가할 수 있고 성공적인 응답을 받을 수 있어요!\n\n\u0026#x3C;img src=\"/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_1.png\" /\u003e\n\nupdate 메서드를 사용하면 특정 제품을 업데이트할 수 있어요.\n\n\n\n\u0026#x3C;img src=\"/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_2.png\" /\u003e\n\n삭제 메소드를 사용하여 데이터베이스에서 ID별 제품을 삭제할 수 있습니다.\n\n\u0026#x3C;img src=\"/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_3.png\" /\u003e\n\nget 메소드를 사용하여 데이터베이스에서 모든 제품을 검색할 수 있습니다.\n\n\n\n![이미지](/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_4.png)\n\n체크를 수행하려면 Mongo DB Compass에서 다음 단계를 따르기만 하면 됩니다:\n\n- Mongo DB Compass를 엽니다.\n- 확인하려는 데이터베이스에 연결합니다.\n- 확인하려는 컬렉션을 선택합니다.\n- 컬렉션의 문서를 보고 데이터가 올바른지 확인합니다.\n\nMongo DB Compass에서 정기적인 확인을 수행함으로써 데이터의 정확성과 최신 상태를 보장할 수 있습니다. 특히 전자 상거래 웹사이트와 같이 대량의 데이터를 처리할 때 이 기능은 매우 중요합니다. 애플리케이션이 원활하게 작동하는지 확인하려면 꾸준한 확인을 잊지 마세요!\n\n\n\n![이미지](/assets/img/2024-05-12-CreatinganE-commerceSitewithMERNStackPartII_5.png)\n\n단일 제품을 가져오는 방법은 업데이트 함수와 매우 유사합니다. 단순히 id를 포함하고 .findById() 함수를 사용하면 됩니다. 마지막에 제품 객체를 반환합니다.\n\n이 연습을 좋은 도전으로 생각해보고 혼자서 작성해 보세요. 한번 시도해보고 어떻게 진행되는지 확인해보세요! 만약 잘 되지 않는다면 걱정하지 마세요! 항상 GitHub에서 해결책을 찾을 수 있습니다.\n\n마무리\n\n\n\n이 글에서는 Node.js로 MongoDB 데이터베이스를 조회하는 기본적인 내용을 다뤘어요. 우리는 기본 CRUD 함수를 생성하고 활용했는데, 이에 대해 더 깊이 들어가는 내용은 다음 글에서 다룰 예정이에요. 저희의 GitHub 저장소에서 코드를 확인하지 않으시면 안돼요! 다음 파트에서 뵙겠습니다!\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-12-CreatinganE-commerceSitewithMERNStackPartII"},"buildId":"6w6Yg3qJxLtqeXNguENru","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>