<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>파이썬, Jinja2, Weasyprint를 사용한 인보이스 생성기 만들기 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="파이썬, Jinja2, Weasyprint를 사용한 인보이스 생성기 만들기 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="파이썬, Jinja2, Weasyprint를 사용한 인보이스 생성기 만들기 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint" data-gatsby-head="true"/><meta name="twitter:title" content="파이썬, Jinja2, Weasyprint를 사용한 인보이스 생성기 만들기 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-23 14:41" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/t9N7vwmpvBMQnO2PSctoH/_buildManifest.js" defer=""></script><script src="/_next/static/t9N7vwmpvBMQnO2PSctoH/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">파이썬, Jinja2, Weasyprint를 사용한 인보이스 생성기 만들기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="파이썬, Jinja2, Weasyprint를 사용한 인보이스 생성기 만들기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 23, 2024</span><span class="posts_reading_time__f7YPP">7<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>프리랜서 프로젝트로 작은 작업을 부탁받을 때는 어떻게 하시나요?</p>
<p>고객에게 할 작업과 해당 작업에 대한 비용을 나열한 송장을 작성합니다. 이를 통해 작업 범위를 세부적으로 설명하고 해당 비용에 대해 투명하게 고객에게 알림을 줍니다. 이는 비즈니스 거래에서 명확성과 공정성에 대한 당신의 헌신을 보여줍니다.</p>
<p>프리랜서 고객과 거래할 때 전문성에 기여하는 다른 요소들이 많지만, 실제로 신경 쓸 필요가 없는 기능으로 여러 기능이 넘치는 완벽한 송장 솔루션 대신 사용할 도구로 이것을 선택했습니다.</p>
<p>이 작업을 위한 빠르고 간편한 솔루션이 필요했기 때문에 이 스크립트를 만들었고, 정확히 어떻게 만들었는지 보여드릴게요.</p>
<h1>랜드스케이프</h1>
<p>저는 단순함을 유지하고 싶었어요... 정말 한없이 단순하게. 보통 제가 하는 것과 같이 OOP 방식을 선택하는 대신 함수를 만들었어요. 그러나 다소 사용자 정의할 수 있도록 하기 위해 invoice를 설정하는 방법에 대한 구성이 담긴 settings.py를 추가했어요.</p>
<p>invoice 자체는 jinja2 구문으로 작성된 HTML 파일입니다. 이 템플릿에 렌더링되는 데이터는 data.json에서 제공됩니다.</p>
<p>당연히 나는 render_template()를 팩토리로 사용하는 원시적인 팩토리 디자인 패턴을 선택했고 이는 invoice_gen.py 내에 있습니다.</p>
<p>각 파일이 의도된 용도는 다음과 같습니다:</p>
<ul>
<li>data.json 👉 Jinja 템플릿으로 렌더링 될 데이터를 포함합니다.</li>
<li>invoice_gen.py 👉 팩토리로 작용하여 송장을 생성하는 스크립트 파일입니다.</li>
<li>settings.py 👉 HTML 템플릿의 구성을 포함합니다.</li>
</ul>
<p>조금 더 이해하기 쉽게 하기 위해 아래 다이어그램에서 어떻게 작동하는지 설명했습니다:</p>
<h1>기술</h1>
<p>다음을 사용하고 있습니다:</p>
<ul>
<li>Jinja</li>
<li>WeasyPrint</li>
</ul>
<h1>데이터 파일</h1>
<p>이건 저희가 템플릿에 렌더링하려는 모든 정보를 포함한 JSON 파일입니다. 제 파일은 다음과 같은 형식을 가지고 있어요:</p>
<pre><code class="hljs language-js">{
    <span class="hljs-string">"title"</span>: <span class="hljs-string">"서비스 청구서"</span>,
    <span class="hljs-string">"invoiceNumber"</span>: <span class="hljs-number">13</span>,
    <span class="hljs-string">"issueDate"</span>: <span class="hljs-string">"2023년 11월 12일"</span>,
    <span class="hljs-string">"dueDate"</span>: <span class="hljs-string">"2023년 12월 18일"</span>,
    <span class="hljs-string">"status"</span>: <span class="hljs-string">"만기"</span>,

...

    <span class="hljs-string">"server"</span>: {
        <span class="hljs-string">"logo"</span>: <span class="hljs-string">"로고/경로.png"</span>,
        <span class="hljs-string">"companyName"</span>: <span class="hljs-string">"Hammad의 회사"</span>,
        <span class="hljs-string">"firstName"</span>: <span class="hljs-string">"M. Hammad"</span>,
        <span class="hljs-string">"lastName"</span>: <span class="hljs-string">"Hassan"</span>,
        <span class="hljs-string">"address"</span>: {
            <span class="hljs-string">"city"</span>: <span class="hljs-string">"신드주 카라치"</span>,
            <span class="hljs-string">"country"</span>: <span class="hljs-string">"파키스탄"</span>
        },
        <span class="hljs-string">"email"</span>: <span class="hljs-string">"hammad.hassan@localhost.com"</span>,
        <span class="hljs-string">"profileURL"</span>: {
            <span class="hljs-string">"url"</span>: <span class="hljs-string">"https://www.upwork.com/freelancers/~01f9b5bc6f481f0385"</span>,
            <span class="hljs-string">"displayText"</span>: <span class="hljs-string">"Upwork의 Hammad"</span>
        }
    },
    <span class="hljs-string">"itemList"</span>: [
        {
            <span class="hljs-string">"title"</span>: <span class="hljs-string">"파이썬 코스"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"시작하기에 좋은 파이썬 기초 코스"</span>,
            <span class="hljs-string">"isFixedPrice"</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">"rate"</span>: <span class="hljs-number">10</span>,
            <span class="hljs-string">"hours"</span>: <span class="hljs-number">15</span>
        },
        {
            <span class="hljs-string">"title"</span>: <span class="hljs-string">"HTML/CSS/JS"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"초보자용 프론트엔드 코스"</span>,
            <span class="hljs-string">"isFixedPrice"</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-string">"rate"</span>: <span class="hljs-number">6</span>,
            <span class="hljs-string">"hours"</span>: <span class="hljs-number">10</span>
        }
    ],
    <span class="hljs-string">"moderatorCharges"</span>: <span class="hljs-number">0.1</span>,
    <span class="hljs-string">"percentIncreaseAfterDueDate"</span>: <span class="hljs-number">0.05</span>

...

}
</code></pre>
<p>위의 JSON 파일은 제가 사용하는 실제 파일의 간략한 버전입니다.</p>
<h1>주요 스크립트</h1>
<p>data.json 파일에 정의된 데이터 세트에서 송장을 생성하는 프로세스는 송장을 만들기 위해 여러 리소스를 사용합니다. 클라이언트에게 보낼 수 있는 송장을 생성합니다.</p>
<p>먼저 의존성을 가져와야 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">from</span> jinja2 <span class="hljs-keyword">import</span> <span class="hljs-title class_">Template</span>
<span class="hljs-keyword">import</span> json
</code></pre>
<p>그런 다음, Jinja HTML 템플릿에 일부 컨텍스트를 삽입하는 함수를 작성하고 나중에 이러한 템플릿을 pdf로 변환할 것입니다.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">render_template</span>(<span class="hljs-params">
    template_file: <span class="hljs-built_in">str</span>, 
    context: <span class="hljs-built_in">dict</span>, 
    styles: <span class="hljs-built_in">list</span>, 
    output_filename: <span class="hljs-built_in">str</span>
</span>) -> <span class="hljs-built_in">str</span>:
    
    <span class="hljs-comment"># 템플릿 파일을 가져와 컨텍스트 변수를 사용하여 렌더링합니다.</span>
    template = Template(template_file)
    rendered_html = template.render(context)

    <span class="hljs-comment"># 출력 파일의 이름을 설정합니다.</span>
    html_file = <span class="hljs-string">f"<span class="hljs-subst">{output_filename}</span>.html"</span>
    pdf_file = <span class="hljs-string">f"<span class="hljs-subst">{output_filename}</span>.pdf"</span>

    <span class="hljs-comment"># HTML 콘텐츠를 파일에 기록합니다.</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(html_file, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> file:
        file.write(rendered_html)

    <span class="hljs-comment"># WeasyPrint를 사용하여 HTML을 PDF로 변환합니다.</span>
    HTML(html_file).write_pdf(pdf_file, stylesheets=styles)

    <span class="hljs-comment"># 파일 이름을 반환합니다.</span>
    <span class="hljs-keyword">return</span> pdf_file
</code></pre>
<p>이제 동일한 스크립트 파일 내에서 템플릿을 렌더링하는 데 필요한 에셋을 로드합니다.</p>
<pre><code class="hljs language-python"><span class="hljs-comment"># 컨텍스트 데이터 로드</span>
context_data = {}
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"./data.json"</span>) <span class="hljs-keyword">as</span> data:
    context_data = get_context_data(json.load(data))
    
<span class="hljs-comment"># Jinja 템플릿 로드</span>
template_html = <span class="hljs-string">""</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(TEMPLATE_HTML_PATH) <span class="hljs-keyword">as</span> template:
    template_html = template.read()

<span class="hljs-comment"># 템플릿을 렌더링하고 PDF를 생성합니다.</span>
pdf_filename = render_template(template_html, context_data, TEMPLATE_CSS, OUTPUT_FILENAME)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"PDF 생성됨: <span class="hljs-subst">{pdf_filename}</span>"</span>)
</code></pre>
<p>get_context_data() 함수에서 컨텍스트 데이터를 불러오고, 이 함수는 settings.py에 위치합니다. 이 함수는 파이썬 딕셔너리 하나를 매개변수로 받습니다. 이 딕셔너리는 data.json에서 가져옵니다.</p>
<p>우리는 또한 Jinja 템플릿(HTML 파일)을 로드하고 'with' 키워드와 'open' 함수를 사용하여 내용을 읽습니다. TEMPLATE_HTML_PATH는 settings.py에서 왔는데, 이는 다음 섹션에서 설명됩니다.</p>
<p>마지막으로, 우리는 render_template() 함수를 호출하여 그 마법을 일으킵니다.</p>
<h1>설정 파일</h1>
<p>이 파일에는 스크립트의 모든 사용자 정의 가능한 부분이 포함되어 있습니다. 따라서 위에서 언급한 스크립트의 결과를 변경하고 싶다면, 이 파일을 변경하면 됩니다.</p>
<p>의존성을 가져오세요. 이제 weasyprint가 포함되어 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">from</span> weasyprint <span class="hljs-keyword">import</span> <span class="hljs-variable constant_">HTML</span>, <span class="hljs-variable constant_">CSS</span>
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
</code></pre>
<p>이 파일에는 변수 3개와 함수 하나만 포함되어 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">OUTPUT_FILENAME</span> = f<span class="hljs-string">"output-{datetime.now().strftime('%d-%b-%Y')}"</span>
<span class="hljs-variable constant_">TEMPLATE_HTML_PATH</span> = <span class="hljs-string">"./invoice_template_002.html"</span>

<span class="hljs-variable constant_">TEMPLATE_CSS</span> = [
    <span class="hljs-title function_">CSS</span>(<span class="hljs-string">"./invoice_template_002.css"</span>),
    <span class="hljs-title function_">CSS</span>(<span class="hljs-string">"https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"</span> ),
    <span class="hljs-title function_">CSS</span>(<span class="hljs-string">"https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"</span> )
]
</code></pre>
<p>첫 두 변수는 설명이 분명하기 때문에 그에 대해 많은 시간을 낭비하지 않을 겁니다.</p>
<p>그러나 TEMPLATE_CSS는 weasyprint 라이브러리에서 가져온 CSS 개체의 목록입니다.</p>
<p>이 목록에는 필요한 만큼 많은 CSS 모듈을 추가할 수 있으며 모두 HTML 템플릿에 적용됩니다.</p>
<p>이 목록의 첫 번째 요소는 제 개인적인 사용자 정의 CSS이므로 상대 경로를 갖고 있습니다. 다른 두 개는 Bootstrap 및 Font Awesome CDNs에서 가져온 링크입니다.</p>
<pre><code class="hljs language-python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_context_data</span>(<span class="hljs-params">context_json:<span class="hljs-built_in">dict</span></span>)-><span class="hljs-built_in">dict</span>:
    <span class="hljs-string">"""이 함수는 data.json에서 가져온 컨텍스트를 조작합니다."""</span>
    context_json[<span class="hljs-string">'issueDate'</span>] = datetime.strptime(context_json[<span class="hljs-string">'issueDate'</span>], <span class="hljs-string">'%d-%m-%Y'</span>).strftime(<span class="hljs-string">'%d-%m-%Y'</span>)
    context_json[<span class="hljs-string">'dueDate'</span>] = datetime.strptime(context_json[<span class="hljs-string">'dueDate'</span>], <span class="hljs-string">'%d-%m-%Y'</span>).strftime(<span class="hljs-string">'%d-%m-%Y'</span>)
    context_json[<span class="hljs-string">'invoiceDate'</span>] = datetime.strptime(context_json[<span class="hljs-string">'issueDate'</span>], <span class="hljs-string">'%d-%m-%Y'</span>).strftime(<span class="hljs-string">'%B'</span>)
    <span class="hljs-keyword">return</span> context_json
</code></pre>
<p>get_context_data()는 정확히 그 이름이 의미하는 대로 동작합니다. 이 함수는 컨텍스트 데이터를 가져오고, 사용자가 해당 데이터를 조작할 수 있도록 해주며, 수식을 적용하고 계산을 수행한 다음 데이터를 Python 사전 형태로 반환합니다.</p>
<p>나는 이 함수를 사용했는데, data.json에는 많은 정보가 있지만, 계산이 필요한 데이터를 넣지 않았기 때문이다. 예를 들어, 송장에 판매 중인 다양한 제품이 있을 수 있지만, 고객에게 청구하는 총 금액은 하드 코딩하는 대신 계산되어야 합니다.</p>
<p>하지만 위의 함수에서 그중 어떤 것도 계산하지는 않았습니다. 그 이유는 저는 계산을 Jinja 템플릿 내에서 수행하기로 선택했기 때문입니다.</p>
<p>어찌되었든, 여기저기 숫자를 하드 코딩하진 않아요.</p>
<p>너무 많은 공간을 차지하기 때문에 템플릿 파일은 여기에 포함하지 않겠습니다. 그러나 완전한 코드를 확인하려면 내 GitHub 저장소를 확인해주세요.</p>
<h1>GitHub 저장소</h1>
<h1>샘플 미리보기</h1>
<p>위는 제가 제공한 공장 코드로 할 수 있는 가능성 중 하나입니다. 예를 들어, 인증서를 만들거나 CSS로 스타일을 지정하고 data.json에 수령인의 이름을 넣을 수도 있습니다.</p>
<p>즐겁게 사용하시기 바랍니다.</p>
<p>만약 이 글이 도움이 되었고 새로운 것을 배웠다면 👏을 남겨주시거나 제게 알려주셔요 📣. 여러분의 피드백을 듣고 싶어합니다.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"파이썬, Jinja2, Weasyprint를 사용한 인보이스 생성기 만들기","description":"","date":"2024-06-23 14:41","slug":"2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint","content":"\n\n프리랜서 프로젝트로 작은 작업을 부탁받을 때는 어떻게 하시나요?\n\n고객에게 할 작업과 해당 작업에 대한 비용을 나열한 송장을 작성합니다. 이를 통해 작업 범위를 세부적으로 설명하고 해당 비용에 대해 투명하게 고객에게 알림을 줍니다. 이는 비즈니스 거래에서 명확성과 공정성에 대한 당신의 헌신을 보여줍니다.\n\n프리랜서 고객과 거래할 때 전문성에 기여하는 다른 요소들이 많지만, 실제로 신경 쓸 필요가 없는 기능으로 여러 기능이 넘치는 완벽한 송장 솔루션 대신 사용할 도구로 이것을 선택했습니다.\n\n이 작업을 위한 빠르고 간편한 솔루션이 필요했기 때문에 이 스크립트를 만들었고, 정확히 어떻게 만들었는지 보여드릴게요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint_0.png\" /\u003e\n\n# 랜드스케이프\n\n저는 단순함을 유지하고 싶었어요... 정말 한없이 단순하게. 보통 제가 하는 것과 같이 OOP 방식을 선택하는 대신 함수를 만들었어요. 그러나 다소 사용자 정의할 수 있도록 하기 위해 invoice를 설정하는 방법에 대한 구성이 담긴 settings.py를 추가했어요.\n\ninvoice 자체는 jinja2 구문으로 작성된 HTML 파일입니다. 이 템플릿에 렌더링되는 데이터는 data.json에서 제공됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n당연히 나는 render_template()를 팩토리로 사용하는 원시적인 팩토리 디자인 패턴을 선택했고 이는 invoice_gen.py 내에 있습니다.\n\n각 파일이 의도된 용도는 다음과 같습니다:\n\n- data.json 👉 Jinja 템플릿으로 렌더링 될 데이터를 포함합니다.\n- invoice_gen.py 👉 팩토리로 작용하여 송장을 생성하는 스크립트 파일입니다.\n- settings.py 👉 HTML 템플릿의 구성을 포함합니다.\n\n조금 더 이해하기 쉽게 하기 위해 아래 다이어그램에서 어떻게 작동하는지 설명했습니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 기술\n\n다음을 사용하고 있습니다:\n\n- Jinja\n- WeasyPrint\n\n# 데이터 파일\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이건 저희가 템플릿에 렌더링하려는 모든 정보를 포함한 JSON 파일입니다. 제 파일은 다음과 같은 형식을 가지고 있어요:\n\n```js\n{\n    \"title\": \"서비스 청구서\",\n    \"invoiceNumber\": 13,\n    \"issueDate\": \"2023년 11월 12일\",\n    \"dueDate\": \"2023년 12월 18일\",\n    \"status\": \"만기\",\n\n...\n\n    \"server\": {\n        \"logo\": \"로고/경로.png\",\n        \"companyName\": \"Hammad의 회사\",\n        \"firstName\": \"M. Hammad\",\n        \"lastName\": \"Hassan\",\n        \"address\": {\n            \"city\": \"신드주 카라치\",\n            \"country\": \"파키스탄\"\n        },\n        \"email\": \"hammad.hassan@localhost.com\",\n        \"profileURL\": {\n            \"url\": \"https://www.upwork.com/freelancers/~01f9b5bc6f481f0385\",\n            \"displayText\": \"Upwork의 Hammad\"\n        }\n    },\n    \"itemList\": [\n        {\n            \"title\": \"파이썬 코스\",\n            \"description\": \"시작하기에 좋은 파이썬 기초 코스\",\n            \"isFixedPrice\": false,\n            \"rate\": 10,\n            \"hours\": 15\n        },\n        {\n            \"title\": \"HTML/CSS/JS\",\n            \"description\": \"초보자용 프론트엔드 코스\",\n            \"isFixedPrice\": false,\n            \"rate\": 6,\n            \"hours\": 10\n        }\n    ],\n    \"moderatorCharges\": 0.1,\n    \"percentIncreaseAfterDueDate\": 0.05\n\n...\n\n}\n```\n\n위의 JSON 파일은 제가 사용하는 실제 파일의 간략한 버전입니다.\n\n# 주요 스크립트\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\ndata.json 파일에 정의된 데이터 세트에서 송장을 생성하는 프로세스는 송장을 만들기 위해 여러 리소스를 사용합니다. 클라이언트에게 보낼 수 있는 송장을 생성합니다.\n\n먼저 의존성을 가져와야 합니다.\n\n```js\nfrom jinja2 import Template\nimport json\n```\n\n그런 다음, Jinja HTML 템플릿에 일부 컨텍스트를 삽입하는 함수를 작성하고 나중에 이러한 템플릿을 pdf로 변환할 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```python\ndef render_template(\n    template_file: str, \n    context: dict, \n    styles: list, \n    output_filename: str\n) -\u003e str:\n    \n    # 템플릿 파일을 가져와 컨텍스트 변수를 사용하여 렌더링합니다.\n    template = Template(template_file)\n    rendered_html = template.render(context)\n\n    # 출력 파일의 이름을 설정합니다.\n    html_file = f\"{output_filename}.html\"\n    pdf_file = f\"{output_filename}.pdf\"\n\n    # HTML 콘텐츠를 파일에 기록합니다.\n    with open(html_file, 'w') as file:\n        file.write(rendered_html)\n\n    # WeasyPrint를 사용하여 HTML을 PDF로 변환합니다.\n    HTML(html_file).write_pdf(pdf_file, stylesheets=styles)\n\n    # 파일 이름을 반환합니다.\n    return pdf_file\n```\n\n이제 동일한 스크립트 파일 내에서 템플릿을 렌더링하는 데 필요한 에셋을 로드합니다.\n\n```python\n# 컨텍스트 데이터 로드\ncontext_data = {}\nwith open(\"./data.json\") as data:\n    context_data = get_context_data(json.load(data))\n    \n# Jinja 템플릿 로드\ntemplate_html = \"\"\nwith open(TEMPLATE_HTML_PATH) as template:\n    template_html = template.read()\n\n# 템플릿을 렌더링하고 PDF를 생성합니다.\npdf_filename = render_template(template_html, context_data, TEMPLATE_CSS, OUTPUT_FILENAME)\nprint(f\"PDF 생성됨: {pdf_filename}\")\n```\n\nget_context_data() 함수에서 컨텍스트 데이터를 불러오고, 이 함수는 settings.py에 위치합니다. 이 함수는 파이썬 딕셔너리 하나를 매개변수로 받습니다. 이 딕셔너리는 data.json에서 가져옵니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n우리는 또한 Jinja 템플릿(HTML 파일)을 로드하고 'with' 키워드와 'open' 함수를 사용하여 내용을 읽습니다. TEMPLATE_HTML_PATH는 settings.py에서 왔는데, 이는 다음 섹션에서 설명됩니다.\n\n마지막으로, 우리는 render_template() 함수를 호출하여 그 마법을 일으킵니다.\n\n# 설정 파일\n\n이 파일에는 스크립트의 모든 사용자 정의 가능한 부분이 포함되어 있습니다. 따라서 위에서 언급한 스크립트의 결과를 변경하고 싶다면, 이 파일을 변경하면 됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n의존성을 가져오세요. 이제 weasyprint가 포함되어 있습니다.\n\n```js\nfrom weasyprint import HTML, CSS\nfrom datetime import datetime\n```\n\n이 파일에는 변수 3개와 함수 하나만 포함되어 있습니다.\n\n```js\nOUTPUT_FILENAME = f\"output-{datetime.now().strftime('%d-%b-%Y')}\"\nTEMPLATE_HTML_PATH = \"./invoice_template_002.html\"\n\nTEMPLATE_CSS = [\n    CSS(\"./invoice_template_002.css\"),\n    CSS(\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css\" ),\n    CSS(\"https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css\" )\n]\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n첫 두 변수는 설명이 분명하기 때문에 그에 대해 많은 시간을 낭비하지 않을 겁니다.\n\n그러나 TEMPLATE_CSS는 weasyprint 라이브러리에서 가져온 CSS 개체의 목록입니다.\n\n이 목록에는 필요한 만큼 많은 CSS 모듈을 추가할 수 있으며 모두 HTML 템플릿에 적용됩니다.\n\n이 목록의 첫 번째 요소는 제 개인적인 사용자 정의 CSS이므로 상대 경로를 갖고 있습니다. 다른 두 개는 Bootstrap 및 Font Awesome CDNs에서 가져온 링크입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```python\ndef get_context_data(context_json:dict)-\u003edict:\n    \"\"\"이 함수는 data.json에서 가져온 컨텍스트를 조작합니다.\"\"\"\n    context_json['issueDate'] = datetime.strptime(context_json['issueDate'], '%d-%m-%Y').strftime('%d-%m-%Y')\n    context_json['dueDate'] = datetime.strptime(context_json['dueDate'], '%d-%m-%Y').strftime('%d-%m-%Y')\n    context_json['invoiceDate'] = datetime.strptime(context_json['issueDate'], '%d-%m-%Y').strftime('%B')\n    return context_json\n```\n\nget_context_data()는 정확히 그 이름이 의미하는 대로 동작합니다. 이 함수는 컨텍스트 데이터를 가져오고, 사용자가 해당 데이터를 조작할 수 있도록 해주며, 수식을 적용하고 계산을 수행한 다음 데이터를 Python 사전 형태로 반환합니다.\n\n나는 이 함수를 사용했는데, data.json에는 많은 정보가 있지만, 계산이 필요한 데이터를 넣지 않았기 때문이다. 예를 들어, 송장에 판매 중인 다양한 제품이 있을 수 있지만, 고객에게 청구하는 총 금액은 하드 코딩하는 대신 계산되어야 합니다.\n\n하지만 위의 함수에서 그중 어떤 것도 계산하지는 않았습니다. 그 이유는 저는 계산을 Jinja 템플릿 내에서 수행하기로 선택했기 때문입니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n어찌되었든, 여기저기 숫자를 하드 코딩하진 않아요.\n\n너무 많은 공간을 차지하기 때문에 템플릿 파일은 여기에 포함하지 않겠습니다. 그러나 완전한 코드를 확인하려면 내 GitHub 저장소를 확인해주세요.\n\n# GitHub 저장소\n\n# 샘플 미리보기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint_1.png\" /\u003e\n\n위는 제가 제공한 공장 코드로 할 수 있는 가능성 중 하나입니다. 예를 들어, 인증서를 만들거나 CSS로 스타일을 지정하고 data.json에 수령인의 이름을 넣을 수도 있습니다.\n\n즐겁게 사용하시기 바랍니다.\n\n만약 이 글이 도움이 되었고 새로운 것을 배웠다면 👏을 남겨주시거나 제게 알려주셔요 📣. 여러분의 피드백을 듣고 싶어합니다.","ogImage":{"url":"/assets/img/2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint_0.png"},"coverImage":"/assets/img/2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint_0.png","tag":["Tech"],"readingTime":7},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e프리랜서 프로젝트로 작은 작업을 부탁받을 때는 어떻게 하시나요?\u003c/p\u003e\n\u003cp\u003e고객에게 할 작업과 해당 작업에 대한 비용을 나열한 송장을 작성합니다. 이를 통해 작업 범위를 세부적으로 설명하고 해당 비용에 대해 투명하게 고객에게 알림을 줍니다. 이는 비즈니스 거래에서 명확성과 공정성에 대한 당신의 헌신을 보여줍니다.\u003c/p\u003e\n\u003cp\u003e프리랜서 고객과 거래할 때 전문성에 기여하는 다른 요소들이 많지만, 실제로 신경 쓸 필요가 없는 기능으로 여러 기능이 넘치는 완벽한 송장 솔루션 대신 사용할 도구로 이것을 선택했습니다.\u003c/p\u003e\n\u003cp\u003e이 작업을 위한 빠르고 간편한 솔루션이 필요했기 때문에 이 스크립트를 만들었고, 정확히 어떻게 만들었는지 보여드릴게요.\u003c/p\u003e\n\u003ch1\u003e랜드스케이프\u003c/h1\u003e\n\u003cp\u003e저는 단순함을 유지하고 싶었어요... 정말 한없이 단순하게. 보통 제가 하는 것과 같이 OOP 방식을 선택하는 대신 함수를 만들었어요. 그러나 다소 사용자 정의할 수 있도록 하기 위해 invoice를 설정하는 방법에 대한 구성이 담긴 settings.py를 추가했어요.\u003c/p\u003e\n\u003cp\u003einvoice 자체는 jinja2 구문으로 작성된 HTML 파일입니다. 이 템플릿에 렌더링되는 데이터는 data.json에서 제공됩니다.\u003c/p\u003e\n\u003cp\u003e당연히 나는 render_template()를 팩토리로 사용하는 원시적인 팩토리 디자인 패턴을 선택했고 이는 invoice_gen.py 내에 있습니다.\u003c/p\u003e\n\u003cp\u003e각 파일이 의도된 용도는 다음과 같습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003edata.json 👉 Jinja 템플릿으로 렌더링 될 데이터를 포함합니다.\u003c/li\u003e\n\u003cli\u003einvoice_gen.py 👉 팩토리로 작용하여 송장을 생성하는 스크립트 파일입니다.\u003c/li\u003e\n\u003cli\u003esettings.py 👉 HTML 템플릿의 구성을 포함합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e조금 더 이해하기 쉽게 하기 위해 아래 다이어그램에서 어떻게 작동하는지 설명했습니다:\u003c/p\u003e\n\u003ch1\u003e기술\u003c/h1\u003e\n\u003cp\u003e다음을 사용하고 있습니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eJinja\u003c/li\u003e\n\u003cli\u003eWeasyPrint\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e데이터 파일\u003c/h1\u003e\n\u003cp\u003e이건 저희가 템플릿에 렌더링하려는 모든 정보를 포함한 JSON 파일입니다. 제 파일은 다음과 같은 형식을 가지고 있어요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e{\n    \u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"서비스 청구서\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"invoiceNumber\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e13\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"issueDate\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"2023년 11월 12일\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"dueDate\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"2023년 12월 18일\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"status\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"만기\"\u003c/span\u003e,\n\n...\n\n    \u003cspan class=\"hljs-string\"\u003e\"server\"\u003c/span\u003e: {\n        \u003cspan class=\"hljs-string\"\u003e\"logo\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"로고/경로.png\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\"companyName\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Hammad의 회사\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\"firstName\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"M. Hammad\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\"lastName\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Hassan\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\"address\"\u003c/span\u003e: {\n            \u003cspan class=\"hljs-string\"\u003e\"city\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"신드주 카라치\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"country\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"파키스탄\"\u003c/span\u003e\n        },\n        \u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"hammad.hassan@localhost.com\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-string\"\u003e\"profileURL\"\u003c/span\u003e: {\n            \u003cspan class=\"hljs-string\"\u003e\"url\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"https://www.upwork.com/freelancers/~01f9b5bc6f481f0385\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"displayText\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Upwork의 Hammad\"\u003c/span\u003e\n        }\n    },\n    \u003cspan class=\"hljs-string\"\u003e\"itemList\"\u003c/span\u003e: [\n        {\n            \u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"파이썬 코스\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"description\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"시작하기에 좋은 파이썬 기초 코스\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"isFixedPrice\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"rate\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"hours\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e15\u003c/span\u003e\n        },\n        {\n            \u003cspan class=\"hljs-string\"\u003e\"title\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"HTML/CSS/JS\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"description\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"초보자용 프론트엔드 코스\"\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"isFixedPrice\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"rate\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e6\u003c/span\u003e,\n            \u003cspan class=\"hljs-string\"\u003e\"hours\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e\n        }\n    ],\n    \u003cspan class=\"hljs-string\"\u003e\"moderatorCharges\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0.1\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"percentIncreaseAfterDueDate\"\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e0.05\u003c/span\u003e\n\n...\n\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위의 JSON 파일은 제가 사용하는 실제 파일의 간략한 버전입니다.\u003c/p\u003e\n\u003ch1\u003e주요 스크립트\u003c/h1\u003e\n\u003cp\u003edata.json 파일에 정의된 데이터 세트에서 송장을 생성하는 프로세스는 송장을 만들기 위해 여러 리소스를 사용합니다. 클라이언트에게 보낼 수 있는 송장을 생성합니다.\u003c/p\u003e\n\u003cp\u003e먼저 의존성을 가져와야 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e jinja2 \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eTemplate\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e json\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그런 다음, Jinja HTML 템플릿에 일부 컨텍스트를 삽입하는 함수를 작성하고 나중에 이러한 템플릿을 pdf로 변환할 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erender_template\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    template_file: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e, \n    context: \u003cspan class=\"hljs-built_in\"\u003edict\u003c/span\u003e, \n    styles: \u003cspan class=\"hljs-built_in\"\u003elist\u003c/span\u003e, \n    output_filename: \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e\n\u003c/span\u003e) -\u003e \u003cspan class=\"hljs-built_in\"\u003estr\u003c/span\u003e:\n    \n    \u003cspan class=\"hljs-comment\"\u003e# 템플릿 파일을 가져와 컨텍스트 변수를 사용하여 렌더링합니다.\u003c/span\u003e\n    template = Template(template_file)\n    rendered_html = template.render(context)\n\n    \u003cspan class=\"hljs-comment\"\u003e# 출력 파일의 이름을 설정합니다.\u003c/span\u003e\n    html_file = \u003cspan class=\"hljs-string\"\u003ef\"\u003cspan class=\"hljs-subst\"\u003e{output_filename}\u003c/span\u003e.html\"\u003c/span\u003e\n    pdf_file = \u003cspan class=\"hljs-string\"\u003ef\"\u003cspan class=\"hljs-subst\"\u003e{output_filename}\u003c/span\u003e.pdf\"\u003c/span\u003e\n\n    \u003cspan class=\"hljs-comment\"\u003e# HTML 콘텐츠를 파일에 기록합니다.\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e(html_file, \u003cspan class=\"hljs-string\"\u003e'w'\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e file:\n        file.write(rendered_html)\n\n    \u003cspan class=\"hljs-comment\"\u003e# WeasyPrint를 사용하여 HTML을 PDF로 변환합니다.\u003c/span\u003e\n    HTML(html_file).write_pdf(pdf_file, stylesheets=styles)\n\n    \u003cspan class=\"hljs-comment\"\u003e# 파일 이름을 반환합니다.\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e pdf_file\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이제 동일한 스크립트 파일 내에서 템플릿을 렌더링하는 데 필요한 에셋을 로드합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-comment\"\u003e# 컨텍스트 데이터 로드\u003c/span\u003e\ncontext_data = {}\n\u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"./data.json\"\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e data:\n    context_data = get_context_data(json.load(data))\n    \n\u003cspan class=\"hljs-comment\"\u003e# Jinja 템플릿 로드\u003c/span\u003e\ntemplate_html = \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003ewith\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eopen\u003c/span\u003e(TEMPLATE_HTML_PATH) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e template:\n    template_html = template.read()\n\n\u003cspan class=\"hljs-comment\"\u003e# 템플릿을 렌더링하고 PDF를 생성합니다.\u003c/span\u003e\npdf_filename = render_template(template_html, context_data, TEMPLATE_CSS, OUTPUT_FILENAME)\n\u003cspan class=\"hljs-built_in\"\u003eprint\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003ef\"PDF 생성됨: \u003cspan class=\"hljs-subst\"\u003e{pdf_filename}\u003c/span\u003e\"\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eget_context_data() 함수에서 컨텍스트 데이터를 불러오고, 이 함수는 settings.py에 위치합니다. 이 함수는 파이썬 딕셔너리 하나를 매개변수로 받습니다. 이 딕셔너리는 data.json에서 가져옵니다.\u003c/p\u003e\n\u003cp\u003e우리는 또한 Jinja 템플릿(HTML 파일)을 로드하고 'with' 키워드와 'open' 함수를 사용하여 내용을 읽습니다. TEMPLATE_HTML_PATH는 settings.py에서 왔는데, 이는 다음 섹션에서 설명됩니다.\u003c/p\u003e\n\u003cp\u003e마지막으로, 우리는 render_template() 함수를 호출하여 그 마법을 일으킵니다.\u003c/p\u003e\n\u003ch1\u003e설정 파일\u003c/h1\u003e\n\u003cp\u003e이 파일에는 스크립트의 모든 사용자 정의 가능한 부분이 포함되어 있습니다. 따라서 위에서 언급한 스크립트의 결과를 변경하고 싶다면, 이 파일을 변경하면 됩니다.\u003c/p\u003e\n\u003cp\u003e의존성을 가져오세요. 이제 weasyprint가 포함되어 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e weasyprint \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eHTML\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eCSS\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e datetime \u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e datetime\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 파일에는 변수 3개와 함수 하나만 포함되어 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eOUTPUT_FILENAME\u003c/span\u003e = f\u003cspan class=\"hljs-string\"\u003e\"output-{datetime.now().strftime('%d-%b-%Y')}\"\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eTEMPLATE_HTML_PATH\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"./invoice_template_002.html\"\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eTEMPLATE_CSS\u003c/span\u003e = [\n    \u003cspan class=\"hljs-title function_\"\u003eCSS\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"./invoice_template_002.css\"\u003c/span\u003e),\n    \u003cspan class=\"hljs-title function_\"\u003eCSS\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css\"\u003c/span\u003e ),\n    \u003cspan class=\"hljs-title function_\"\u003eCSS\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css\"\u003c/span\u003e )\n]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e첫 두 변수는 설명이 분명하기 때문에 그에 대해 많은 시간을 낭비하지 않을 겁니다.\u003c/p\u003e\n\u003cp\u003e그러나 TEMPLATE_CSS는 weasyprint 라이브러리에서 가져온 CSS 개체의 목록입니다.\u003c/p\u003e\n\u003cp\u003e이 목록에는 필요한 만큼 많은 CSS 모듈을 추가할 수 있으며 모두 HTML 템플릿에 적용됩니다.\u003c/p\u003e\n\u003cp\u003e이 목록의 첫 번째 요소는 제 개인적인 사용자 정의 CSS이므로 상대 경로를 갖고 있습니다. 다른 두 개는 Bootstrap 및 Font Awesome CDNs에서 가져온 링크입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003e\u003cspan class=\"hljs-keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eget_context_data\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003econtext_json:\u003cspan class=\"hljs-built_in\"\u003edict\u003c/span\u003e\u003c/span\u003e)-\u003e\u003cspan class=\"hljs-built_in\"\u003edict\u003c/span\u003e:\n    \u003cspan class=\"hljs-string\"\u003e\"\"\"이 함수는 data.json에서 가져온 컨텍스트를 조작합니다.\"\"\"\u003c/span\u003e\n    context_json[\u003cspan class=\"hljs-string\"\u003e'issueDate'\u003c/span\u003e] = datetime.strptime(context_json[\u003cspan class=\"hljs-string\"\u003e'issueDate'\u003c/span\u003e], \u003cspan class=\"hljs-string\"\u003e'%d-%m-%Y'\u003c/span\u003e).strftime(\u003cspan class=\"hljs-string\"\u003e'%d-%m-%Y'\u003c/span\u003e)\n    context_json[\u003cspan class=\"hljs-string\"\u003e'dueDate'\u003c/span\u003e] = datetime.strptime(context_json[\u003cspan class=\"hljs-string\"\u003e'dueDate'\u003c/span\u003e], \u003cspan class=\"hljs-string\"\u003e'%d-%m-%Y'\u003c/span\u003e).strftime(\u003cspan class=\"hljs-string\"\u003e'%d-%m-%Y'\u003c/span\u003e)\n    context_json[\u003cspan class=\"hljs-string\"\u003e'invoiceDate'\u003c/span\u003e] = datetime.strptime(context_json[\u003cspan class=\"hljs-string\"\u003e'issueDate'\u003c/span\u003e], \u003cspan class=\"hljs-string\"\u003e'%d-%m-%Y'\u003c/span\u003e).strftime(\u003cspan class=\"hljs-string\"\u003e'%B'\u003c/span\u003e)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e context_json\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eget_context_data()는 정확히 그 이름이 의미하는 대로 동작합니다. 이 함수는 컨텍스트 데이터를 가져오고, 사용자가 해당 데이터를 조작할 수 있도록 해주며, 수식을 적용하고 계산을 수행한 다음 데이터를 Python 사전 형태로 반환합니다.\u003c/p\u003e\n\u003cp\u003e나는 이 함수를 사용했는데, data.json에는 많은 정보가 있지만, 계산이 필요한 데이터를 넣지 않았기 때문이다. 예를 들어, 송장에 판매 중인 다양한 제품이 있을 수 있지만, 고객에게 청구하는 총 금액은 하드 코딩하는 대신 계산되어야 합니다.\u003c/p\u003e\n\u003cp\u003e하지만 위의 함수에서 그중 어떤 것도 계산하지는 않았습니다. 그 이유는 저는 계산을 Jinja 템플릿 내에서 수행하기로 선택했기 때문입니다.\u003c/p\u003e\n\u003cp\u003e어찌되었든, 여기저기 숫자를 하드 코딩하진 않아요.\u003c/p\u003e\n\u003cp\u003e너무 많은 공간을 차지하기 때문에 템플릿 파일은 여기에 포함하지 않겠습니다. 그러나 완전한 코드를 확인하려면 내 GitHub 저장소를 확인해주세요.\u003c/p\u003e\n\u003ch1\u003eGitHub 저장소\u003c/h1\u003e\n\u003ch1\u003e샘플 미리보기\u003c/h1\u003e\n\u003cp\u003e위는 제가 제공한 공장 코드로 할 수 있는 가능성 중 하나입니다. 예를 들어, 인증서를 만들거나 CSS로 스타일을 지정하고 data.json에 수령인의 이름을 넣을 수도 있습니다.\u003c/p\u003e\n\u003cp\u003e즐겁게 사용하시기 바랍니다.\u003c/p\u003e\n\u003cp\u003e만약 이 글이 도움이 되었고 새로운 것을 배웠다면 👏을 남겨주시거나 제게 알려주셔요 📣. 여러분의 피드백을 듣고 싶어합니다.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-23-CreateAnInvoiceGeneratorUsingPythonJinja2Weasyprint"},"buildId":"t9N7vwmpvBMQnO2PSctoH","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>