<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>TypeScript, Express, TypeORM, ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° Postgresë¥¼ í™œìš©í•œ REST API êµ¬ì¶•í•˜ê¸° | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="TypeScript, Express, TypeORM, ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° Postgresë¥¼ í™œìš©í•œ REST API êµ¬ì¶•í•˜ê¸° | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="TypeScript, Express, TypeORM, ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° Postgresë¥¼ í™œìš©í•œ REST API êµ¬ì¶•í•˜ê¸° | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres" data-gatsby-head="true"/><meta name="twitter:title" content="TypeScript, Express, TypeORM, ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° Postgresë¥¼ í™œìš©í•œ REST API êµ¬ì¶•í•˜ê¸° | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-20 05:21" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/t9N7vwmpvBMQnO2PSctoH/_buildManifest.js" defer=""></script><script src="/_next/static/t9N7vwmpvBMQnO2PSctoH/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">TypeScript, Express, TypeORM, ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° Postgresë¥¼ í™œìš©í•œ REST API êµ¬ì¶•í•˜ê¸°</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="TypeScript, Express, TypeORM, ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° Postgresë¥¼ í™œìš©í•œ REST API êµ¬ì¶•í•˜ê¸°" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 20, 2024</span><span class="posts_reading_time__f7YPP">25<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>ì•ˆë…•í•˜ì„¸ìš”! TypeScript, Express.js, ê·¸ë¦¬ê³  TypeORMì„ í™œìš©í•˜ì—¬ REST APIë¥¼ ë§Œë“œëŠ” ì´ íŠœí† ë¦¬ì–¼ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì€ JWT ì¸ì¦, ë°ì´í„° ìºì‹±, ê·¸ë¦¬ê³  ì—­í•  ê¸°ë°˜ ê¶Œí•œ ë¶€ì—¬ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí•˜ë©´ ì´ëŸ¬í•œ í•µì‹¬ ê°œë…ê³¼ ê¸°ìˆ ì— ëŒ€í•œ íŠ¼íŠ¼í•œ ì´í•´ë¥¼ ê°–ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.</p>
<h2>ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­:</h2>
<p>ì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ë„êµ¬ì— ëŒ€í•œ ê²½í—˜ì´ë‚˜ ì´í•´ê°€ í•„ìš”í•©ë‹ˆë‹¤:</p>
<ul>
<li>TypeScript</li>
<li>TypeORM</li>
<li>SQL</li>
<li>Node.js &#x26; NPM</li>
<li>JSON Web Tokens (JWT)</li>
<li>Caching</li>
</ul>
<h2>ORMê³¼ TypeORMì´ ë¬´ì—‡ì´ë©° ì™œ ì¤‘ìš”í•œê°€ìš”?</h2>
<p>ORMì€ Object-Relational Mappingì˜ ì•½ìë¡œ, ê°ì²´ ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ì„ ì‚¬ìš©í•˜ì—¬ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©ì„ ìš©ì´í•˜ê²Œ í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ìˆ  ë° í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. ORMì€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ (ì˜ˆ: MySQL, PostgreSQL, SQLite)ì™€ ì‘ìš© í”„ë¡œê·¸ë¨ ì½”ë“œ ì‚¬ì´ì˜ ë‹¤ë¦¬ ì—­í• ì„ í•˜ë©° ë³µì¡í•œ SQL ì¿¼ë¦¬ì™€ ì €ìˆ˜ì¤€ ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ì‘ìš©ì„ ì¶”ìƒí™”í•©ë‹ˆë‹¤.</p>
<p>TypeORMì€ Node.js ë° ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ ì‘ë™í•˜ëŠ” ë‹¤ì¬ë‹¤ëŠ¥í•œ ORMì…ë‹ˆë‹¤. TypeScript ì‘ìš© í”„ë¡œê·¸ë¨ì— ë§¤ìš° ì í•©í•˜ë©°, ì—”í‹°í‹° ë° ì—´ì„ ì •ì˜í•˜ê¸° ìœ„í•´ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ì ì´ íŠ¹íˆ ì˜ ì–´ìš¸ë¦½ë‹ˆë‹¤.</p>
<h2>ìºì‹œ(ìºì‹±)ë€ ë¬´ì—‡ì¸ê°€ìš”?</h2>
<p>ìºì‹±ì€ ì»´í“¨í„° ê³¼í•™ê³¼ ì •ë³´ ê¸°ìˆ ì—ì„œ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ë¡œ, ì£¼ë¡œ ì•¡ì„¸ìŠ¤ë˜ê±°ë‚˜ ê³„ì‚°ëœ ë°ì´í„°ë¥¼ "ìºì‹œ"ë¼ê³  ë¶ˆë¦¬ëŠ” ì„ì‹œ ì €ì¥ ì˜ì—­ì— ì €ì¥í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ìºì‹±ì˜ ì£¼ìš” ëª©ì ì€ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë° ê²€ìƒ‰ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¤ê³ , ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì´ë©°, ì „ë°˜ì ì¸ ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<p>ì´ë¡ ì€ ì´ë§Œí•˜ê³ , ì´ì œ ì§ì ‘ í•´ë³´ì! ğŸ˜</p>
<h1>í”„ë¡œì íŠ¸ ì„¤ì •</h1>
<p>í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ë ¤ë©´ TypeORM CLIë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”:</p>
<pre><code class="hljs language-js">npx typeorm init --name restAPi --database postgres
</code></pre>
<p>ì´ ê°•ì¢Œì—ì„œëŠ” Postgresë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ mysql, mariadb, postgres, cockroachdb, sqlite, mssql, sap, spanner, oracle, mongodb, cordova, react-native, expo, nativescript ê°™ì€ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.</p>
<p>ì°¸ê³ : ìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ì»´í“¨í„°ì— TypeORMì´ ì „ì—­ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ë§Œì•½ ì—†ë‹¤ë©´ ê°„ë‹¨íˆ ì•„ë˜ ëª…ë ¹ì„ ì‹¤í–‰í•´ë³´ì„¸ìš”:</p>
<pre><code class="hljs language-js">npm i -g typeorm
</code></pre>
<p>Typeorm init ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ íŒŒì¼ë“¤ì´ ìƒì„±ë©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">restApi
â”œâ”€â”€ src                   <span class="hljs-comment">// TypeScript ì½”ë“œê°€ ì €ì¥ë˜ëŠ” ìœ„ì¹˜</span>
â”‚   â”œâ”€â”€ entity            <span class="hljs-comment">// ì—”í‹°í‹°(ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸)ê°€ ì €ì¥ë˜ëŠ” ìœ„ì¹˜</span>
â”‚   â”‚   â””â”€â”€ <span class="hljs-title class_">User</span>.<span class="hljs-property">ts</span>       <span class="hljs-comment">// ìƒ˜í”Œ ì—”í‹°í‹°</span>
â”‚   â”œâ”€â”€ migration         <span class="hljs-comment">// ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì €ì¥ë˜ëŠ” ìœ„ì¹˜</span>
â”‚   â”œâ”€â”€ data-source.<span class="hljs-property">ts</span>    <span class="hljs-comment">// ë°ì´í„° ì†ŒìŠ¤ ë° ëª¨ë“  ì—°ê²° êµ¬ì„±</span>
â”‚   â””â”€â”€ index.<span class="hljs-property">ts</span>          <span class="hljs-comment">// ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹œì‘ì </span>
â”œâ”€â”€ .<span class="hljs-property">gitignore</span>            <span class="hljs-comment">// í‘œì¤€ gitignore íŒŒì¼</span>
â”œâ”€â”€ package.<span class="hljs-property">json</span>          <span class="hljs-comment">// ë…¸ë“œ ëª¨ë“ˆ ì˜ì¡´ì„±</span>
â”œâ”€â”€ <span class="hljs-variable constant_">README</span>.<span class="hljs-property">md</span>             <span class="hljs-comment">// ê°„ë‹¨í•œ readme íŒŒì¼</span>
â””â”€â”€ tsconfig.<span class="hljs-property">json</span>         <span class="hljs-comment">// TypeScript ì»´íŒŒì¼ëŸ¬ ì˜µì…˜</span>
</code></pre>
<p>ì´ì œ ì¶”ê°€ì ì¸ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js">npm install express dotenv bcrypt jsonwebtoken concurrently memory-cache
</code></pre>
<p>ìœ„ì— ì–¸ê¸‰ëœ ê° íŒ¨í‚¤ì§€ê°€ í•˜ëŠ” ì¼ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<ul>
<li>Express: Node.jsë¥¼ ìœ„í•œ ì›¹ í”„ë ˆì„ì›Œí¬ë¡œ, ì„œë²„ë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</li>
<li>dotenv: ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.</li>
<li>bcrypt: ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</li>
<li>jsonwebtoken: ì‚¬ìš©ìë¥¼ ì‹ë³„í•˜ê±°ë‚˜ ì‚¬ìš©ìì— ëŒ€í•œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ë° ìì£¼ ì‚¬ìš©ë˜ë©°, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ì— í† í°ì´ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.</li>
<li>concurrently: ë‹¨ì¼ í„°ë¯¸ë„ì—ì„œ ì—¬ëŸ¬ npm ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” Node.js ìœ í‹¸ë¦¬í‹°ì…ë‹ˆë‹¤.</li>
<li>memory-cache: Node.jsë¥¼ ìœ„í•œ ê°„ë‹¨í•œ ë©”ëª¨ë¦¬ ìºì‹± ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ì—¬ ë¹ ë¥´ê²Œ ì•¡ì„¸ìŠ¤í•˜ê³  ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.</li>
</ul>
<h2>ì´ëŸ¬í•œ ì¢…ì†ì„±ë“¤ì— ëŒ€í•œ TypeScript íƒ€ì… ì •ì˜ ì„¤ì¹˜:</h2>
<p>TypeScriptë¡œ ì‘ì—…í•˜ê³  ìˆìœ¼ë‹ˆ ì˜ì¡´ì„±ì— ëŒ€í•œ @typesë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">npm i @types/express @types/bcrypt @types/jsonwebtoken @types/memory-cache
</code></pre>
<p>ì´ì œ ìƒì„±ëœ íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<h1>í”„ë¡œì íŠ¸ íŒŒì¼ ìˆ˜ì •í•˜ê¸°</h1>
<p>ìƒˆ í´ë” êµ¬ì¡°:</p>
<pre><code class="hljs language-js">step-by-step
 â”£ src
 â”ƒ â”£ controllers
 â”ƒ â”ƒ â”£ auth.<span class="hljs-property">controller</span>.<span class="hljs-property">ts</span>
 â”ƒ â”ƒ â”£ movie.<span class="hljs-property">controllers</span>.<span class="hljs-property">ts</span>
 â”ƒ â”ƒ â”— user.<span class="hljs-property">controllers</span>.<span class="hljs-property">ts</span>
 â”ƒ â”£ dto
 â”ƒ â”ƒ â”— user.<span class="hljs-property">dto</span>.<span class="hljs-property">ts</span>
 â”ƒ â”£ entity
 â”ƒ â”ƒ â”£ <span class="hljs-title class_">Movies</span>.<span class="hljs-property">entity</span>.<span class="hljs-property">ts</span>
 â”ƒ â”ƒ â”— <span class="hljs-title class_">User</span>.<span class="hljs-property">entity</span>.<span class="hljs-property">ts</span>
 â”ƒ â”£ helpers
 â”ƒ â”ƒ â”— encrypt.<span class="hljs-property">ts</span>
 â”ƒ â”£ middleware
 â”ƒ â”ƒ â”£ errorHandler.<span class="hljs-property">ts</span>
 â”ƒ â”ƒ â”£ authentification.<span class="hljs-property">ts</span>
 â”ƒ â”ƒ â”— authorization.<span class="hljs-property">ts</span>
 â”ƒ â”£ migration
 â”ƒ â”ƒ â”£ <span class="hljs-number">1698321500514</span>-user.<span class="hljs-property">ts</span>
 â”ƒ â”ƒ â”— <span class="hljs-number">1698321512351</span>-movie.<span class="hljs-property">ts</span>
 â”ƒ â”£ routes
 â”ƒ â”ƒ â”£ movie.<span class="hljs-property">routes</span>.<span class="hljs-property">ts</span>
 â”ƒ â”ƒ â”— user.<span class="hljs-property">routes</span>.<span class="hljs-property">ts</span>
 â”ƒ â”£ data-source.<span class="hljs-property">ts</span>
 â”ƒ â”— index.<span class="hljs-property">ts</span>
 â”£ .<span class="hljs-property">env</span>
 â”£ .<span class="hljs-property">gitignore</span>
 â”£ package-lock.<span class="hljs-property">json</span>
 â”£ package.<span class="hljs-property">json</span>
 â”£ <span class="hljs-variable constant_">README</span>.<span class="hljs-property">md</span>
 â”— tsconfig.<span class="hljs-property">json</span>
</code></pre>
<h1>package.json</h1>
<p>ë‹¤ìŒ ì¢…ì†ì„±ì„ í¬í•¨í•˜ì—¬ package.json íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"restTye"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.0.1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"TypeORMìœ¼ë¡œ ê°œë°œëœ ë©‹ì§„ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤."</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"commonjs"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/bcrypt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.0.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/express"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.17.20"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/jsonwebtoken"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^9.0.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/memory-cache"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^0.2.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^16.11.10"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"concurrently"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.2.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ts-node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"10.7.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"4.5.2"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/cors"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.8.15"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"bcrypt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.1.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dotenv"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^16.3.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"express"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.18.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"jsonwebtoken"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^9.0.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"memory-cache"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^0.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.4.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"reflect-metadata"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^0.1.13"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typeorm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.3.17"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"watch"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsc -w"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nodemon build/index.js"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start:dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"concurrently \"tsc -w\" \"nodemon build/index.js\""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tsc"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ts-node src/index.ts"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typeorm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"typeorm-ts-node-commonjs"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"migration"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">" npm run typeorm migration:run -- -d ./src/data-source.ts"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>í•„ìš”í•œ ì¢…ì†ì„±ê³¼ ê°œë°œì— í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<p>concurrentlyë¥¼ ì‚¬ìš©í•˜ì—¬ "tsc -w" ë° "nodemon build/index.js"ë¥¼ ë™ì‹œì— ì‹¤í–‰í•˜ë¯€ë¡œ ì•±ì„ ì‹¤í–‰í•˜ë ¤ë©´ npm run start:devë¥¼ ì‹¤í–‰í•˜ë©´ ts íŒŒì¼ì„ jsë¡œ ì»´íŒŒì¼í•œ ë‹¤ìŒ nodemonì„ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤.</p>
<h1>src/index.ts</h1>
<p>ì—¬ê¸°ì— í–¥ìƒëœ src/index.ts íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppDataSource</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./data-source"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> { userRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">"./routes/user.routes"</span>;
<span class="hljs-keyword">import</span> { movieRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">"./routes/movie.routes"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"reflect-metadata"</span>;
dotenv.<span class="hljs-title function_">config</span>();

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());
app.<span class="hljs-title function_">use</span>(errorHandler);
<span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">PORT</span> = <span class="hljs-number">3000</span> } = process.<span class="hljs-property">env</span>;
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">"/auth"</span>, userRouter);
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">"/api"</span>, movieRouter);

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">"*"</span>, <span class="hljs-function">(<span class="hljs-params">req: Request, res: Response</span>) =></span> {
  res.<span class="hljs-title function_">status</span>(<span class="hljs-number">505</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"Bad Request"</span> });
});

<span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">initialize</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () => {
    app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =></span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Server is running on http://localhost:"</span> + <span class="hljs-variable constant_">PORT</span>);
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Data Source has been initialized!"</span>);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =></span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error));
</code></pre>
<p>ì´ index.ts íŒŒì¼ì€ Express.js ì„œë²„ë¥¼ ì„¤ì •í•˜ê³  ê²½ë¡œë¥¼ ì ìš©í•˜ë©° ì„œë²„ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì‚¬ìš©ì ê´€ë ¨ ë° ì˜í™” ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìœ„í•œ ë¼ìš°íŠ¸ë„ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<h1>src/data-source.ts</h1>
<p>ì•„ë˜ëŠ” ì—…ë°ì´íŠ¸ëœ src/data-source.ts íŒŒì¼ì…ë‹ˆë‹¤:</p>
<p>ì´ íŒŒì¼ì€ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½ëŠ” ë“± ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. .env íŒŒì¼ì— í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¸ë¶€ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> <span class="hljs-string">"reflect-metadata"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">DataSource</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"typeorm"</span>;

<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./entity/User.entity"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Movie</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./entity/Movies.entity"</span>;

dotenv.<span class="hljs-title function_">config</span>();

<span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">DB_HOST</span>, <span class="hljs-variable constant_">DB_PORT</span>, <span class="hljs-variable constant_">DB_USERNAME</span>, <span class="hljs-variable constant_">DB_PASSWORD</span>, <span class="hljs-variable constant_">DB_DATABASE</span>, <span class="hljs-variable constant_">NODE_ENV</span> } =
  process.<span class="hljs-property">env</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AppDataSource</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSource</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">"postgres"</span>,
  <span class="hljs-attr">host</span>: <span class="hljs-variable constant_">DB_HOST</span>,
  <span class="hljs-attr">port</span>: <span class="hljs-built_in">parseInt</span>(<span class="hljs-variable constant_">DB_PORT</span> || <span class="hljs-string">"5432"</span>),
  <span class="hljs-attr">username</span>: <span class="hljs-variable constant_">DB_USERNAME</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-variable constant_">DB_PASSWORD</span>,
  <span class="hljs-attr">database</span>: <span class="hljs-variable constant_">DB_DATABASE</span>,

  <span class="hljs-attr">synchronize</span>: <span class="hljs-variable constant_">NODE_ENV</span> === <span class="hljs-string">"dev"</span> ? <span class="hljs-literal">false</span> : <span class="hljs-literal">false</span>,
<span class="hljs-comment">//logging logs sql command on the treminal</span>
  <span class="hljs-attr">logging</span>: <span class="hljs-variable constant_">NODE_ENV</span> === <span class="hljs-string">"dev"</span> ? <span class="hljs-literal">false</span> : <span class="hljs-literal">false</span>,
  <span class="hljs-attr">entities</span>: [<span class="hljs-title class_">User</span>, <span class="hljs-title class_">Movie</span>],
  <span class="hljs-attr">migrations</span>: [__dirname + <span class="hljs-string">"/migration/*.ts"</span>],
  <span class="hljs-attr">subscribers</span>: [],
});
</code></pre>
<h1>Entities</h1>
<p>ì´ê²ƒë“¤ì€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ êµ¬ì¡°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤:</p>
<h1>ì‚¬ìš©ì ì—”í„°í‹°</h1>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Entity</span>,
  <span class="hljs-title class_">PrimaryGeneratedColumn</span>,
  <span class="hljs-title class_">Column</span>,
  <span class="hljs-title class_">CreateDateColumn</span>,
  <span class="hljs-title class_">UpdateDateColumn</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"typeorm"</span>;

@<span class="hljs-title class_">Entity</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"users"</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
  @<span class="hljs-title class_">PrimaryGeneratedColumn</span>(<span class="hljs-string">"uuid"</span>)
  <span class="hljs-attr">id</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">name</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">email</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">password</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">default</span>: <span class="hljs-string">"user"</span> })
  <span class="hljs-attr">role</span>: string;

  @<span class="hljs-title class_">CreateDateColumn</span>()
  <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>;

  @<span class="hljs-title class_">UpdateDateColumn</span>()
  <span class="hljs-attr">updatedAt</span>: <span class="hljs-title class_">Date</span>;
}
</code></pre>
<h1>ì˜í™” ì—”í„°í‹°</h1>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Column</span>,
  <span class="hljs-title class_">CreateDateColumn</span>,
  <span class="hljs-title class_">Entity</span>,
  <span class="hljs-title class_">PrimaryGeneratedColumn</span>,
  <span class="hljs-title class_">UpdateDateColumn</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">"typeorm"</span>;

@<span class="hljs-title class_">Entity</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">"movies"</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Movie</span> {
  @<span class="hljs-title class_">PrimaryGeneratedColumn</span>(<span class="hljs-string">"uuid"</span>)
  <span class="hljs-attr">id</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">title</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">description</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">director</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">year</span>: number;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">rating</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">image</span>: string;

  @<span class="hljs-title class_">Column</span>({ <span class="hljs-attr">nullable</span>: <span class="hljs-literal">false</span> })
  <span class="hljs-attr">cast</span>: string;

  @<span class="hljs-title class_">CreateDateColumn</span>()
  <span class="hljs-attr">createdAt</span>: <span class="hljs-title class_">Date</span>;

  @<span class="hljs-title class_">UpdateDateColumn</span>()
  <span class="hljs-attr">updatedAt</span>: <span class="hljs-title class_">Date</span>;
}
</code></pre>
<p>ë‚˜ëŠ” uuidë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ rowidë‚˜ incremental ë“± ë‹¤ë¥¸ ê²ƒì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆê³ , í•„ë“œê°€ ë¹„ì–´ìˆì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ nullable ì˜µì…˜ì„ falseë¡œ ì „ë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
<p>src/helpers/helpers.ts</p>
<p>Encrypt í´ë˜ìŠ¤ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ê³ , ë¡œê·¸ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ìœ„í•´ ë¹„êµí•˜ë©° í† í°ì„ ìƒì„±í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> jwt <span class="hljs-keyword">from</span> <span class="hljs-string">"jsonwebtoken"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> bcrypt <span class="hljs-keyword">from</span> <span class="hljs-string">"bcrypt"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>;
<span class="hljs-keyword">import</span> { payload } <span class="hljs-keyword">from</span> <span class="hljs-string">"../dto/user.dto"</span>;

dotenv.<span class="hljs-title function_">config</span>();
<span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">JWT_SECRET</span> = <span class="hljs-string">""</span> } = process.<span class="hljs-property">env</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">encrypt</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">encryptpass</span>(<span class="hljs-params">password: string</span>) {
    <span class="hljs-keyword">return</span> bcrypt.<span class="hljs-title function_">hashSync</span>(password, <span class="hljs-number">12</span>);
  }
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">comparepassword</span>(<span class="hljs-params">hashPassword: string, password: string</span>) {
    <span class="hljs-keyword">return</span> bcrypt.<span class="hljs-title function_">compareSync</span>(password, hashPassword);
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">generateToken</span>(<span class="hljs-params">payload: payload</span>) {
    <span class="hljs-keyword">return</span> jwt.<span class="hljs-title function_">sign</span>(payload, <span class="hljs-variable constant_">JWT_SECRET</span>, { <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">"1d"</span> });
  }
}
</code></pre>
<h1>Middleware</h1>
<h1>Error Handling</h1>
<p>src/middlewares/error.middleware.tsì—ì„œ ì „ì—­ ì˜¤ë¥˜ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì„¤ì •í•´ë³´ì„¸ìš”.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextFunction</span>, <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">errorHandler</span> = (<span class="hljs-params">
  error: <span class="hljs-built_in">Error</span>,
  req: Request,
  res: Response,
  next: NextFunction
</span>) => {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error: <span class="hljs-subst">${error.message}</span>`</span>);
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"ë‚´ë¶€ ì„œë²„ ì˜¤ë¥˜"</span> });
};
</code></pre>
<h1>ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë¯¸ë“¤ì›¨ì–´</h1>
<p>src/middlewares/auth.middleware.tsì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ êµ¬í˜„í•˜ì‹­ì‹œì˜¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextFunction</span>, <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> jwt <span class="hljs-keyword">from</span> <span class="hljs-string">"jsonwebtoken"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>;
dotenv.<span class="hljs-title function_">config</span>();

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">authentification</span> = (<span class="hljs-params">
  req: Request,
  res: Response,
  next: NextFunction
</span>) => {
  <span class="hljs-keyword">const</span> header = req.<span class="hljs-property">headers</span>.<span class="hljs-property">authorization</span>;
  <span class="hljs-keyword">if</span> (!header) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">401</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"ì¸ê°€ë˜ì§€ ì•ŠìŒ"</span> });
  }
  <span class="hljs-keyword">const</span> token = header.<span class="hljs-title function_">split</span>(<span class="hljs-string">" "</span>)[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">if</span> (!token) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">401</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"ì¸ê°€ë˜ì§€ ì•ŠìŒ"</span> });
  }
  <span class="hljs-keyword">const</span> decode = jwt.<span class="hljs-title function_">verify</span>(token, process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span>);
  <span class="hljs-keyword">if</span> (!decode) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">401</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"ì¸ê°€ë˜ì§€ ì•ŠìŒ"</span> });
  }
  req[<span class="hljs-string">"currentUser"</span>] = decode;
  <span class="hljs-title function_">next</span>();
};
</code></pre>
<p>ìš”ì²­ì— ì¸ì¦ ì†ì„±ì„ í¬í•¨í•˜ëŠ” í—¤ë”ê°€ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ê·¸ëŸ° ì†ì„±ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” ê¶Œí•œì´ ì—†ìŒì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” íŠ¹ì • ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì†ì„±ì´ ìˆëŠ” ê²½ìš°ì—ëŠ” í•´ë‹¹ í† í°ì„ ì¶”ì¶œí•œ ë‹¤ìŒ ê·¸ í† í°ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í•œ ë¹„ë°€ í‚¤ë¡œ ë³µí˜¸í™”í•©ë‹ˆë‹¤. ê·¸ í† í°ì˜ ë°ì´í„°ê°€ ì˜¬ë°”ë¥¸ ê²½ìš° í† í°ì— ìˆëŠ” ë°ì´í„°ë¥¼ ìš”ì²­ì— ì „ë‹¬í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í† í°ì´ ë³µí˜¸í™”ë˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextFunction</span>, <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppDataSource</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../data-source"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../entity/User.entity"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">authorization</span> = (<span class="hljs-params">roles: string[]</span>) => {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (<span class="hljs-attr">req</span>: <span class="hljs-title class_">Request</span>, <span class="hljs-attr">res</span>: <span class="hljs-title class_">Response</span>, <span class="hljs-attr">next</span>: <span class="hljs-title class_">NextFunction</span>) => {
    <span class="hljs-keyword">const</span> userRepo = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">User</span>);
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> userRepo.<span class="hljs-title function_">findOne</span>({
      <span class="hljs-attr">where</span>: { <span class="hljs-attr">id</span>: req[<span class="hljs-string">" currentUser"</span>].<span class="hljs-property">id</span> },
    });
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user);
    <span class="hljs-keyword">if</span> (!roles.<span class="hljs-title function_">includes</span>(user.<span class="hljs-property">role</span>)) {
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">403</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"Forbidden"</span> });
    }
    <span class="hljs-title function_">next</span>();
  };
};
</code></pre>
<h1>ì‚¬ìš©ì ë°ì´í„°ë¥¼ user.dto.tsë¡œ ì‚¬ìš©ì ì •ì˜í•˜ê¸°</h1>
<p>API ì‘ë‹µì— ì „ì†¡ëœ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë§ì¶¤ ì„¤ì •í•˜ëŠ” ë° user.dto.ts íŒŒì¼ì„ í™œìš©í•˜ê³ ì í•˜ëŠ” ê´€ì‹¬ì´ í‘œí˜„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ íŠ¹ì • íŒŒì¼ì€ ì œê³µëœ ì½”ë“œ ìƒ˜í”Œì— ëª…ì‹œì ìœ¼ë¡œ í¬í•¨ë˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ, API ì‘ë‹µì„ ìœ„í•´ êµ¬ì¡°í™”í•˜ê³  ìˆ˜ì •í•  ë°ì´í„°ë¥¼ í˜•ì„±í•˜ëŠ” ê°•ë ¥í•œ ë„êµ¬ë¡œ ì‘ìš©í•©ë‹ˆë‹¤.</p>
<h2>user.dto.tsì´ ë¬´ì—‡ì¸ê°€ìš”?</h2>
<p>user.dto.ts íŒŒì¼ì€ Data Transfer Objectì˜ ì•½ìë¡œ, APIë¡œë¶€í„° ì‘ë‹µìœ¼ë¡œ ì „ì†¡ë˜ê¸° ì „ ì‚¬ìš©ì ë°ì´í„°ì˜ í˜•ì‹ê³¼ ë‚´ìš©ì„ ì •ë°€í•˜ê²Œ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì´ íŒŒì¼ ì•ˆì— íŠ¹ì • ì¸í„°í˜ì´ìŠ¤, êµ¬ì¡° ë˜ëŠ” ë³€í™˜ ë¡œì§ì„ ì •ì˜í•¨ìœ¼ë¡œì¨, ê°œë°œìëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë˜ëŠ” APIë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”êµ¬ ì‚¬í•­ê³¼ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ë§ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¼ë¶€ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë³´ì•ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h2>user.dto.ts í™œìš©í•˜ê¸°</h2>
<p>ë‹¤ìŒì€ user.dto.ts íŒŒì¼ì„ êµ¬ì¡°í™”í•˜ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserResponce</span> {
  <span class="hljs-attr">name</span>: string;
  <span class="hljs-attr">email</span>: string;
  <span class="hljs-attr">role</span>: string;
}
</code></pre>
<h2>ì‚¬ìš© ë°©ë²•</h2>
<p>API ì‘ë‹µì—ì„œ ì‚¬ìš©ì ë°ì´í„°ì˜ ì‚¬ìš©ì ì •ì˜ê°€ í•„ìš”í•œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” user.dto.ts íŒŒì¼ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ë‹µìœ¼ë¡œ ë³´ë‚¼ ì›í•˜ëŠ” í˜•ì‹ì— ë§ëŠ” UserDTO ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬ì¡°ë¥¼ ì •ì˜í•œ í›„ ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ì„¸ìš”.</p>
<p>ì´ ì ‘ê·¼ ë°©ì‹ì€ API ì‘ë‹µì„ íŠ¹ì • ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ìœ ì—°í•˜ê²Œ ì¡°ì •í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ìƒí˜¸ ìš´ìš©ì„±ê³¼ íš¨ìœ¨ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.</p>
<p>í”„ë¡œì íŠ¸ì— ë§ê²Œ user.dto.ts íŒŒì¼ì„ í†µí•© ë° ì¡°ì •í•˜ê³ , API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ í”„ë¡œì íŠ¸ì˜ ê²½ìš°, ì €ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í–ˆì„ ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppDataSource</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../data-source"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../entity/User.entity"</span>;
<span class="hljs-keyword">import</span> { encrypt } <span class="hljs-keyword">from</span> <span class="hljs-string">"../helpers/encrypt"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserResponce</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../dto/user.dto"</span>; <span class="hljs-comment">// ì˜¬ë°”ë¥¸ ê²½ë¡œì—ì„œ UserDtoë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> cache <span class="hljs-keyword">from</span> <span class="hljs-string">"memory-cache"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">signup</span>(<span class="hljs-params">req: Request, res: Response</span>) {
    <span class="hljs-keyword">const</span> { name, email, password, role } = req.<span class="hljs-property">body</span>;
    <span class="hljs-keyword">const</span> encryptedPassword = <span class="hljs-keyword">await</span> encrypt.<span class="hljs-title function_">encryptpass</span>(password);
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
    user.<span class="hljs-property">name</span> = name;
    user.<span class="hljs-property">email</span> = email;
    user.<span class="hljs-property">password</span> = encryptedPassword;
    user.<span class="hljs-property">role</span> = role;

    <span class="hljs-keyword">const</span> userRepository = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">User</span>);
    <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">save</span>(user);
    
    <span class="hljs-comment">// ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ëŠ” ë°ì´í„° êµ¬ì¡°í™”ë¥¼ ìœ„í•´ UserResponse DTO ì‚¬ìš©</span>
    <span class="hljs-keyword">const</span> userDataSent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserResponce</span>();
    userDataSent.<span class="hljs-property">name</span> = user.<span class="hljs-property">name</span>;
    userDataSent.<span class="hljs-property">email</span>= user.<span class="hljs-property">email</span>;
    userDataSent.<span class="hljs-property">role</span> = user.<span class="hljs-property">role</span>;
    
    <span class="hljs-keyword">const</span> token = encrypt.<span class="hljs-title function_">generateToken</span>({ <span class="hljs-attr">id</span>: user.<span class="hljs-property">id</span> });

    <span class="hljs-keyword">return</span> res
      .<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>)
      .<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤"</span>, token, userDataSent });
  }
}
</code></pre>
<p>UserResponse í´ë˜ìŠ¤ê°€ UserController íŒŒì¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ê°€ì ¸ì™€ì§€ê³  ì†ì„±ë“¤ì´ API ì‘ë‹µì— ì „ì†¡í•  ë°ì´í„°ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì´ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1>ì»¨íŠ¸ë¡¤ëŸ¬</h1>
<p>ì‚¬ìš©ì ë° ì˜í™” ì—”í‹°í‹°ì— ëŒ€í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œë¥¼ ì •ì˜í•˜ì„¸ìš”:</p>
<p>ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í´ë¼ì´ì–¸íŠ¸(ì¼ë°˜ì ìœ¼ë¡œ ì›¹ ë¸Œë¼ìš°ì €)ë¡œë¶€í„° ìˆ˜ì‹ í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë¡œì§ì„ ì¡°ì •í•˜ëŠ” êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•˜ë©°, ì½”ë“œë¥¼ êµ¬ì„±í•˜ê³  ìœ ì§€ë³´ìˆ˜í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. ìš°ë¦¬ì˜ getalluser ë° getmoviesì—ì„œ ìºì‹œ ë©”ëª¨ë¦¬ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë ¤ê³  í•˜ëŠ” ë°, ì¡´ì¬í•œë‹¤ë©´ ìºì‹œì—ì„œ ê°€ì ¸ì˜¤ê³ , ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ í›„ ìºì‹œì— ì¼ì • ì‹œê°„ ë™ì•ˆ ë„£ìŠµë‹ˆë‹¤.</p>
<h1>Auth Controller (src/controllers/Auth.controller.ts)</h1>
<h2>ì‚¬ìš©ì ì»¨íŠ¸ë¡¤ëŸ¬ (src/controllers/user.controller.ts)</h2>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppDataSource</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../data-source"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">User</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../entity/User.entity"</span>;
<span class="hljs-keyword">import</span> { encrypt } <span class="hljs-keyword">from</span> <span class="hljs-string">"../helpers/encrypt"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> cache <span class="hljs-keyword">from</span> <span class="hljs-string">"memory-cache"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">signup</span>(<span class="hljs-params">req: Request, res: Response</span>) {
    <span class="hljs-keyword">const</span> { name, email, password, role } = req.<span class="hljs-property">body</span>;
    <span class="hljs-keyword">const</span> encryptedPassword = <span class="hljs-keyword">await</span> encrypt.<span class="hljs-title function_">encryptpass</span>(password);
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();
    user.<span class="hljs-property">name</span> = name;
    user.<span class="hljs-property">email</span> = email;
    user.<span class="hljs-property">password</span> = encryptedPassword;
    user.<span class="hljs-property">role</span> = role;

    <span class="hljs-keyword">const</span> userRepository = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">User</span>);
    <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">save</span>(user);

    <span class="hljs-comment">// userRepository.create({ Name, email, password });</span>
    <span class="hljs-keyword">const</span> token = encrypt.<span class="hljs-title function_">generateToken</span>({ <span class="hljs-attr">id</span>: user.<span class="hljs-property">id</span> });

    <span class="hljs-keyword">return</span> res
      .<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>)
      .<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"User created successfully"</span>, token, user });
  }
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getUsers</span>(<span class="hljs-params">req: Request, res: Response</span>) {
    <span class="hljs-keyword">const</span> data = cache.<span class="hljs-title function_">get</span>(<span class="hljs-string">"data"</span>);
    <span class="hljs-keyword">if</span> (data) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"serving from cache"</span>);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({
        data,
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"serving from db"</span>);
      <span class="hljs-keyword">const</span> userRepository = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">User</span>);
      <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">find</span>();

      cache.<span class="hljs-title function_">put</span>(<span class="hljs-string">"data"</span>, users, <span class="hljs-number">6000</span>);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({
        <span class="hljs-attr">data</span>: users,
      });
    }
  }
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">updateUser</span>(<span class="hljs-params">req: Request, res: Response</span>) {
    <span class="hljs-keyword">const</span> { id } = req.<span class="hljs-property">params</span>;
    <span class="hljs-keyword">const</span> { name, email } = req.<span class="hljs-property">body</span>;
    <span class="hljs-keyword">const</span> userRepository = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">User</span>);
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">findOne</span>({
      <span class="hljs-attr">where</span>: { id },
    });
    user.<span class="hljs-property">name</span> = name;
    user.<span class="hljs-property">email</span> = email;
    <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">save</span>(user);
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"udpdate"</span>, user });
  }

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">deleteUser</span>(<span class="hljs-params">req: Request, res: Response</span>) {
    <span class="hljs-keyword">const</span> { id } = req.<span class="hljs-property">params</span>;
    <span class="hljs-keyword">const</span> userRepository = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">User</span>);
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">findOne</span>({
      <span class="hljs-attr">where</span>: { id },
    });
    <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">remove</span>(user);
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"ok"</span> });
  }
}
</code></pre>
<h1>ì˜í™” ì»¨íŠ¸ë¡¤ëŸ¬ (src/controllers/movie.controller.ts)</h1>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> cache <span class="hljs-keyword">from</span> <span class="hljs-string">"memory-cache"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppDataSource</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../data-source"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Movie</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../entity/Movies.entity"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MovieController</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAllMovies</span>(<span class="hljs-params">req: Request, res: Response</span>) {
    <span class="hljs-keyword">const</span> data = cache.<span class="hljs-title function_">get</span>(<span class="hljs-string">"data"</span>);
    <span class="hljs-keyword">if</span> (data) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ìºì‹œì—ì„œ ì œê³µ ì¤‘"</span>);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({
        data,
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì œê³µ ì¤‘"</span>);
      <span class="hljs-keyword">const</span> movieRepository = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">Movie</span>);
      <span class="hljs-keyword">const</span> movies = <span class="hljs-keyword">await</span> movieRepository.<span class="hljs-title function_">find</span>();
      cache.<span class="hljs-title function_">put</span>(<span class="hljs-string">"data"</span>, movies, <span class="hljs-number">10000</span>);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({
        <span class="hljs-attr">data</span>: movies,
      });
    }
  }
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">createMovie</span>(<span class="hljs-params">req: Request, res: Response</span>) {
    <span class="hljs-keyword">const</span> { title, description, director, year, rating, image, cast } =
      req.<span class="hljs-property">body</span>;
    <span class="hljs-keyword">const</span> movie = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Movie</span>();
    movie.<span class="hljs-property">title</span> = title;
    movie.<span class="hljs-property">description</span> = description;
    movie.<span class="hljs-property">director</span> = director;
    movie.<span class="hljs-property">year</span> = year;
    movie.<span class="hljs-property">rating</span> = rating;
    movie.<span class="hljs-property">image</span> = image;
    movie.<span class="hljs-property">cast</span> = cast;
    <span class="hljs-keyword">const</span> movieRepository = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">Movie</span>);
    <span class="hljs-keyword">await</span> movieRepository.<span class="hljs-title function_">save</span>(movie);
    <span class="hljs-keyword">return</span> res
      .<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>)
      .<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"ì˜í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤"</span>, movie });
  }

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">updateMovie</span>(<span class="hljs-params">req: Request, res: Response</span>) {
    <span class="hljs-keyword">const</span> { id } = req.<span class="hljs-property">params</span>;
    <span class="hljs-keyword">const</span> { title, description, director, year, rating, image, cast } =
      req.<span class="hljs-property">body</span>;
    <span class="hljs-keyword">const</span> movieRepository = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">Movie</span>);
    <span class="hljs-keyword">const</span> movie = <span class="hljs-keyword">await</span> movieRepository.<span class="hljs-title function_">findOne</span>({
      <span class="hljs-attr">where</span>: { id },
    });
    movie.<span class="hljs-property">title</span> = title;
    movie.<span class="hljs-property">description</span> = description;
    movie.<span class="hljs-property">director</span> = director;
    movie.<span class="hljs-property">year</span> = year;
    movie.<span class="hljs-property">rating</span> = rating;
    movie.<span class="hljs-property">image</span> = image;
    movie.<span class="hljs-property">cast</span> = cast;
    <span class="hljs-keyword">await</span> movieRepository.<span class="hljs-title function_">save</span>(movie);
    <span class="hljs-keyword">return</span> res
      .<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>)
      .<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"ì˜í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤"</span>, movie });
  }

  <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">deleteMovie</span>(<span class="hljs-params">req: Request, res: Response</span>) {
    <span class="hljs-keyword">const</span> { id } = req.<span class="hljs-property">params</span>;
    <span class="hljs-keyword">const</span> movieRepository = <span class="hljs-title class_">AppDataSource</span>.<span class="hljs-title function_">getRepository</span>(<span class="hljs-title class_">Movie</span>);
    <span class="hljs-keyword">const</span> movie = <span class="hljs-keyword">await</span> movieRepository.<span class="hljs-title function_">findOne</span>({
      <span class="hljs-attr">where</span>: { id },
    });
    <span class="hljs-keyword">await</span> movieRepository.<span class="hljs-title function_">remove</span>(movie);
    <span class="hljs-keyword">return</span> res
      .<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>)
      .<span class="hljs-title function_">json</span>({ <span class="hljs-attr">message</span>: <span class="hljs-string">"ì˜í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤"</span>, movie });
  }
}
</code></pre>
<h1>ì‚¬ìš©ì ë¼ìš°íŒ…</h1>
<p>src/routes/user.routes.ts íŒŒì¼ì— ì‚¬ìš©ì ê´€ë¦¬ì™€ ê´€ë ¨ëœ ë¼ìš°íŠ¸ë¥¼ ì •ì˜í•˜ì‹­ì‹œì˜¤:</p>
<p>ë¼ìš°íŠ¸ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì–‘í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ íŠ¹ì • ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆëŠ” íŠ¹ì • URL ë˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤. ë¼ìš°íŠ¸ëŠ” ìˆ˜ì‹ ëœ HTTP ìš”ì²­ì— ëŒ€í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‘ë‹µí•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ë° ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> { authentification } <span class="hljs-keyword">from</span> <span class="hljs-string">"../middleware/authentification"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../controllers/user.controllers"</span>;
<span class="hljs-keyword">import</span> { authorization } <span class="hljs-keyword">from</span> <span class="hljs-string">"../middleware/authorization"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../controllers/auth.controller"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Router</span> = express.<span class="hljs-title class_">Router</span>();

<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">get</span>(
  <span class="hljs-string">"/users"</span>,
  authentification,
  <span class="hljs-title function_">authorization</span>([<span class="hljs-string">"admin"</span>]),
  <span class="hljs-title class_">UserController</span>.<span class="hljs-property">getUsers</span>
);
<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">get</span>(
  <span class="hljs-string">"/profile"</span>,
  authentification,
  <span class="hljs-title function_">authorization</span>([<span class="hljs-string">"user"</span>, <span class="hljs-string">"admin"</span>]),
  <span class="hljs-title class_">AuthController</span>.<span class="hljs-property">getProfile</span>
);
<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/signup"</span>, <span class="hljs-title class_">UserController</span>.<span class="hljs-property">signup</span>);
<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/login"</span>, <span class="hljs-title class_">AuthController</span>.<span class="hljs-property">login</span>);
<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">put</span>(
  <span class="hljs-string">"/update/:id"</span>,
  authentification,
  <span class="hljs-title function_">authorization</span>([<span class="hljs-string">"user"</span>, <span class="hljs-string">"admin"</span>]),
  <span class="hljs-title class_">UserController</span>.<span class="hljs-property">updateUser</span>
);
<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">delete</span>(
  <span class="hljs-string">"/delete/:id"</span>,
  authentification,
  <span class="hljs-title function_">authorization</span>([<span class="hljs-string">"admin"</span>]),
  <span class="hljs-title class_">UserController</span>.<span class="hljs-property">deleteUser</span>
);
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Router</span> <span class="hljs-keyword">as</span> userRouter };
</code></pre>
<h1>ì˜í™” ë¼ìš°íŠ¸</h1>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">import</span> { authentification } <span class="hljs-keyword">from</span> <span class="hljs-string">"../middleware/authentification"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MovieController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../controllers/movie.controllers"</span>;
<span class="hljs-keyword">import</span> { authorization } <span class="hljs-keyword">from</span> <span class="hljs-string">"../middleware/authorization"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Router</span> = express.<span class="hljs-title class_">Router</span>();

<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/movies"</span>, authentification, <span class="hljs-title class_">MovieController</span>.<span class="hljs-property">getAllMovies</span>);
<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/movies"</span>, authentification, <span class="hljs-title class_">MovieController</span>.<span class="hljs-property">createMovie</span>);

<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">put</span>(
  <span class="hljs-string">"/movies/:id"</span>,
  authentification,
  <span class="hljs-title function_">authorization</span>([<span class="hljs-string">"admin"</span>]),
  <span class="hljs-title class_">MovieController</span>.<span class="hljs-property">updateMovie</span>
);
<span class="hljs-title class_">Router</span>.<span class="hljs-title function_">delete</span>(
  <span class="hljs-string">"/movies/:id"</span>,
  authentification,
  <span class="hljs-title function_">authorization</span>([<span class="hljs-string">"admin"</span>]),
  <span class="hljs-title class_">MovieController</span>.<span class="hljs-property">deleteMovie</span>
);
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Router</span> <span class="hljs-keyword">as</span> movieRouter };
</code></pre>
<h1>ë¯¸ë“¤ì›¨ì–´ ìˆœì„œ ì„¤ì •</h1>
<p>Express.jsëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ì •ì˜ëœ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. ë¼ìš°íŠ¸ ì •ì˜ ì‹œì— ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë°°ì¹˜í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
<p>ì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ì ë¼ìš°íŠ¸ì˜ ê²½ìš°, ìš°ë¦¬ëŠ” ë‘ ê°œì˜ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ì¸ authenticateì™€ authorizeê°€ ìˆìŠµë‹ˆë‹¤. authenticateëŠ” ì‚¬ìš©ìì˜ ì‹ ì›ì„ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— ë¨¼ì € ì™€ì•¼ í•©ë‹ˆë‹¤. authorizeëŠ” ê·¸ ë‹¤ìŒì— ìœ„ì¹˜í•˜ì—¬ ì‚¬ìš©ìê°€ ì ì ˆí•œ ì—­í• ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
<h1>ì´ì£¼</h1>
<p>ìš°ë¦¬ëŠ” ì—”í‹°í‹°ì— ëŒ€í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•˜ê³  ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¡œì¨ í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ ìƒì„±ë©ë‹ˆë‹¤. ë¬¸ì„œì— ë‚˜ì™€ ìˆëŠ” ëŒ€ë¡œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ì´ ëª…ë ¹ì–´ëŠ” src/migration ë””ë ‰í† ë¦¬ì— ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ í…Œì´ë¸” êµ¬ì¡°ë¥¼ ì •ì˜í•˜ê³  ì•„ë˜ ì½”ë“œì— ë‚˜ì™€ ìˆëŠ” ëŒ€ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ì„¸ìš”.</p>
<pre><code class="hljs language-js">typeorm <span class="hljs-attr">migration</span>:create ./migrations/users
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MigrationInterface</span>, <span class="hljs-title class_">QueryRunner</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"typeorm"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User1698321500514</span> implements <span class="hljs-title class_">MigrationInterface</span> {
  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">up</span>(<span class="hljs-attr">queryRunner</span>: <span class="hljs-title class_">QueryRunner</span>): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>> {
<span class="hljs-comment">// ì—¬ê¸°ì— ì§ì ‘ ì¶”ê°€í•  ë¶€ë¶„</span>
    <span class="hljs-keyword">await</span> queryRunner.<span class="hljs-title function_">query</span>(
      <span class="hljs-string">` 
          --í…Œì´ë¸” ì •ì˜
          CREATE TABLE "users"  (
            "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
            "name" character varying NOT NULL,
            "email" character varying NOT NULL,
            "password" character varying NOT NULL,
            "role"  character varying NOT NULL DEFAULT 'user',
            "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
            "updatedAt" TIMESTAMP NOT NULL DEFAULT now(),
            CONSTRAINT "PK_cace4a159ff9f2512dd42373760" PRIMARY KEY ("id")
          )

          
          
          
          
          `</span>
    ),
      <span class="hljs-literal">undefined</span>;
  }

  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">down</span>(<span class="hljs-attr">queryRunner</span>: <span class="hljs-title class_">QueryRunner</span>): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>> {
<span class="hljs-comment">// ê·¸ë¦¬ê³  ì´ ë¶€ë¶„</span>
    <span class="hljs-keyword">await</span> queryRunner.<span class="hljs-title function_">query</span>(<span class="hljs-string">`DROP TABLE "users"`</span>, <span class="hljs-literal">undefined</span>);
  }
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MigrationInterface</span>, <span class="hljs-title class_">QueryRunner</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"typeorm"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Movie1698321512351</span> implements <span class="hljs-title class_">MigrationInterface</span> {
  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">up</span>(<span class="hljs-attr">queryRunner</span>: <span class="hljs-title class_">QueryRunner</span>): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>> {
    <span class="hljs-keyword">await</span> queryRunner.<span class="hljs-title function_">query</span>(<span class="hljs-string">`
        --í…Œì´ë¸” ì •ì˜
        CREATE TABLE "movies"  (
            "id" uuid NOT NULL DEFAULT uuid_generate_v4(),
            "title" character varying NOT NULL,
            "description" character varying NOT NULL,
            "director" character varying NOT NULL,
            "year" integer NOT NULL,
            "rating" character varying NOT NULL,
            "image" character varying NOT NULL,
            "cast" character varying NOT NULL,
            "createdAt" TIMESTAMP NOT NULL DEFAULT now(),
            "updatedAt" TIMESTAMP NOT NULL DEFAULT now(),
            CONSTRAINT "PK_1031171c13130102495201e3e20" PRIMARY KEY ("id")
          )
          
          
          
          
          
          `</span>),
      <span class="hljs-literal">undefined</span>;
  }

  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">down</span>(<span class="hljs-attr">queryRunner</span>: <span class="hljs-title class_">QueryRunner</span>): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>> {
    <span class="hljs-keyword">await</span> queryRunner.<span class="hljs-title function_">query</span>(<span class="hljs-string">`DROP TABLE "movies"`</span>, <span class="hljs-literal">undefined</span>);
  }
}
</code></pre>
<p>íŒ¨í‚¤ì§€ JSON íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">   <span class="hljs-string">"migration"</span>: <span class="hljs-string">" npm run typeorm migration:run -- -d ./src/data-source.ts"</span>
</code></pre>
<p>data-source.ts íŒŒì¼ì€ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±ì´ ì €ì¥ëœ ìœ„ì¹˜ì…ë‹ˆë‹¤.</p>
<h1>í…ŒìŠ¤íŠ¸</h1>
<p>APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ Postman, cURL ë˜ëŠ” ë‹¤ë¥¸ HTTP í´ë¼ì´ì–¸íŠ¸ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. API ì—”ë“œí¬ì¸íŠ¸ì— ìš”ì²­ì„ ë³´ë‚´ì–´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1>ì˜¤ë¥˜ ì²˜ë¦¬</h1>
<p>ì œê³µëœ errorHandler ë¯¸ë“¤ì›¨ì–´ì—ì„œ ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ í•´ë‹¹ ì˜¤ë¥˜ê°€ ê¸°ë¡ë˜ê³  ì¼ë°˜ì ì¸ ì˜¤ë¥˜ ì‘ë‹µì´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡ë©ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©ì ì •ì˜í•˜ì—¬ ì˜¤ë¥˜ ì²˜ë¦¬ ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë§ºìŒë§</p>
<p>ì´ë²ˆ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” TypeScript, Express.js ë° TypeORMì„ ì‚¬ìš©í•˜ì—¬ ê°•ë ¥í•œ REST APIë¥¼ ë§Œë“œëŠ” ì—¬ì •ì— ì¶œë°œí–ˆìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ê³¼ ê°™ì€ ê¸°ë³¸ ê°œë…ì„ íƒí—˜í–ˆìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ë°°ìš´ ë‚´ìš©ì„ ë˜ì§šì–´ë´…ì‹œë‹¤:</p>
<ul>
<li>Object-Relational Mapping (ORM)ì˜ ì¤‘ìš”ì„±ê³¼ íŠ¹íˆ TypeScript ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ì„ ê°„ì†Œí™”í•˜ëŠ” TypeORMì— ëŒ€í•´ ì´í•´í–ˆìŠµë‹ˆë‹¤.</li>
<li>ìºì‹±ì€ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë° ê²€ìƒ‰ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¤ëŠ” ê¸°ìˆ ë¡œ ëª…ë£Œí•˜ê²Œ ì„¤ëª…ë˜ì—ˆìœ¼ë©° ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ í–¥ìƒí–ˆìŠµë‹ˆë‹¤.</li>
<li>í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê³  ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ê³  ì¤‘ìš”í•œ êµ¬ì„± íŒŒì¼ì„ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.</li>
</ul>
<p>ì´ì œ ì´ ì§€ì‹ì„ ë°”íƒ•ìœ¼ë¡œ ê²¬ê³ í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê¸°ì–µí•˜ì„¸ìš”, ì´ê²ƒì€ ì‹œì‘ì— ë¶ˆê³¼í•©ë‹ˆë‹¤. íƒí—˜í•  ê±°ëŒ€í•œ ì›¹ ê°œë°œ ì„¸ê³„ê°€ ê¸°ë‹¤ë¦¬ê³  ìˆìœ¼ë©° ë” ê¹Šì´ íŒŒê³ ë“¤ê³  ê³ ê¸‰ ì£¼ì œë¥¼ ë” íƒêµ¬í•˜ê³  API ê¸°ëŠ¥ì„ í™•ì¥í•˜ëŠ” ê²ƒì„ ì¥ë ¤í•©ë‹ˆë‹¤.</p>
<p>ì´ í•™ìŠµ ì—¬ì •ì— í•¨ê»˜í•´ ì£¼ì…”ì„œ ê¸°ì©ë‹ˆë‹¤. ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ í”¼ë“œë°±ì´ë‚˜ ê²½í—˜ì„ ê³µìœ í•˜ê³  ì‹¶ë‹¤ë©´ ë§ì„¤ì´ì§€ ë§ê³  ì—°ë½í•´ì£¼ì„¸ìš”.</p>
<p>ì›¹ ê°œë°œì˜ ëŠì„ì—†ì´ ë°œì „í•˜ëŠ” ì„¸ê³„ì—ì„œëŠ” í•­ìƒ ë°°ìš¸ ê²ƒì´ ë” ë§ê³  ë§Œë“¤ ê²ƒì´ ë” ë§ìŠµë‹ˆë‹¤. ê³„ì† ì½”ë”©í•˜ê³ , ê³„ì† íƒí—˜í•˜ê³ , ë†€ë¼ìš´ ê²ƒì„ ê³„ì† ë§Œë“¤ì–´ ë³´ì„¸ìš”. ì›¹ì€ ë‹¹ì‹ ì˜ ìº”ë²„ìŠ¤ì´ë©°, ë‹¹ì‹ ì´ ì•„í‹°ìŠ¤íŠ¸ì…ë‹ˆë‹¤.</p>
<p>ì´ íŠœí† ë¦¬ì–¼ì˜ ì¼ë¶€ê°€ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œì˜ í”„ë¡œì íŠ¸ì—ì„œ í–‰ìš´ì„ ë¹•ë‹ˆë‹¤!</p>
<p>ì œ GitHubì—ì„œ ì „ì²´ í”„ë¡œì íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì´ê²ƒìœ¼ë¡œ ìš°ë¦¬ì˜ íŠœí† ë¦¬ì–¼ì„ ë§ˆì¹©ë‹ˆë‹¤. ìœ ìš©í•˜ê²Œ í™œìš©í•˜ì…¨ë‹¤ë©´ ë°•ìˆ˜ë¥¼ ì¹˜ê±°ë‚˜ ëŒ“ê¸€ì„ ë‚¨ê²¨ì£¼ì„¸ìš”. ì œì•ˆì´ë‚˜ í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤. ë˜í•œ Twitter, LinkedIn, GitHubì—ì„œ ì €ì™€ ì†Œí†µí•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"TypeScript, Express, TypeORM, ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° Postgresë¥¼ í™œìš©í•œ REST API êµ¬ì¶•í•˜ê¸°","description":"","date":"2024-06-20 05:21","slug":"2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres","content":"\n\n\u003cimg src=\"/assets/img/2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres_0.png\" /\u003e\n\nì•ˆë…•í•˜ì„¸ìš”! TypeScript, Express.js, ê·¸ë¦¬ê³  TypeORMì„ í™œìš©í•˜ì—¬ REST APIë¥¼ ë§Œë“œëŠ” ì´ íŠœí† ë¦¬ì–¼ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì€ JWT ì¸ì¦, ë°ì´í„° ìºì‹±, ê·¸ë¦¬ê³  ì—­í•  ê¸°ë°˜ ê¶Œí•œ ë¶€ì—¬ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí•˜ë©´ ì´ëŸ¬í•œ í•µì‹¬ ê°œë…ê³¼ ê¸°ìˆ ì— ëŒ€í•œ íŠ¼íŠ¼í•œ ì´í•´ë¥¼ ê°–ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.\n\n## ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­:\n\nì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ë„êµ¬ì— ëŒ€í•œ ê²½í—˜ì´ë‚˜ ì´í•´ê°€ í•„ìš”í•©ë‹ˆë‹¤:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- TypeScript\n- TypeORM\n- SQL\n- Node.js \u0026 NPM\n- JSON Web Tokens (JWT)\n- Caching\n\n## ORMê³¼ TypeORMì´ ë¬´ì—‡ì´ë©° ì™œ ì¤‘ìš”í•œê°€ìš”?\n\nORMì€ Object-Relational Mappingì˜ ì•½ìë¡œ, ê°ì²´ ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ì„ ì‚¬ìš©í•˜ì—¬ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©ì„ ìš©ì´í•˜ê²Œ í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ìˆ  ë° í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. ORMì€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ (ì˜ˆ: MySQL, PostgreSQL, SQLite)ì™€ ì‘ìš© í”„ë¡œê·¸ë¨ ì½”ë“œ ì‚¬ì´ì˜ ë‹¤ë¦¬ ì—­í• ì„ í•˜ë©° ë³µì¡í•œ SQL ì¿¼ë¦¬ì™€ ì €ìˆ˜ì¤€ ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ì‘ìš©ì„ ì¶”ìƒí™”í•©ë‹ˆë‹¤.\n\nTypeORMì€ Node.js ë° ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ ì‘ë™í•˜ëŠ” ë‹¤ì¬ë‹¤ëŠ¥í•œ ORMì…ë‹ˆë‹¤. TypeScript ì‘ìš© í”„ë¡œê·¸ë¨ì— ë§¤ìš° ì í•©í•˜ë©°, ì—”í‹°í‹° ë° ì—´ì„ ì •ì˜í•˜ê¸° ìœ„í•´ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ì ì´ íŠ¹íˆ ì˜ ì–´ìš¸ë¦½ë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## ìºì‹œ(ìºì‹±)ë€ ë¬´ì—‡ì¸ê°€ìš”?\n\nìºì‹±ì€ ì»´í“¨í„° ê³¼í•™ê³¼ ì •ë³´ ê¸°ìˆ ì—ì„œ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ë¡œ, ì£¼ë¡œ ì•¡ì„¸ìŠ¤ë˜ê±°ë‚˜ ê³„ì‚°ëœ ë°ì´í„°ë¥¼ \"ìºì‹œ\"ë¼ê³  ë¶ˆë¦¬ëŠ” ì„ì‹œ ì €ì¥ ì˜ì—­ì— ì €ì¥í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ìºì‹±ì˜ ì£¼ìš” ëª©ì ì€ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë° ê²€ìƒ‰ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¤ê³ , ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì´ë©°, ì „ë°˜ì ì¸ ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ë¡ ì€ ì´ë§Œí•˜ê³ , ì´ì œ ì§ì ‘ í•´ë³´ì! ğŸ˜\n\n# í”„ë¡œì íŠ¸ ì„¤ì •\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\ní”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ë ¤ë©´ TypeORM CLIë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”:\n\n```js\nnpx typeorm init --name restAPi --database postgres\n```\n\nì´ ê°•ì¢Œì—ì„œëŠ” Postgresë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ mysql, mariadb, postgres, cockroachdb, sqlite, mssql, sap, spanner, oracle, mongodb, cordova, react-native, expo, nativescript ê°™ì€ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.\n\nì°¸ê³ : ìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ì»´í“¨í„°ì— TypeORMì´ ì „ì—­ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ë§Œì•½ ì—†ë‹¤ë©´ ê°„ë‹¨íˆ ì•„ë˜ ëª…ë ¹ì„ ì‹¤í–‰í•´ë³´ì„¸ìš”:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnpm i -g typeorm\n```\n\nTypeorm init ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ íŒŒì¼ë“¤ì´ ìƒì„±ë©ë‹ˆë‹¤:\n\n```js\nrestApi\nâ”œâ”€â”€ src                   // TypeScript ì½”ë“œê°€ ì €ì¥ë˜ëŠ” ìœ„ì¹˜\nâ”‚   â”œâ”€â”€ entity            // ì—”í‹°í‹°(ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸)ê°€ ì €ì¥ë˜ëŠ” ìœ„ì¹˜\nâ”‚   â”‚   â””â”€â”€ User.ts       // ìƒ˜í”Œ ì—”í‹°í‹°\nâ”‚   â”œâ”€â”€ migration         // ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì €ì¥ë˜ëŠ” ìœ„ì¹˜\nâ”‚   â”œâ”€â”€ data-source.ts    // ë°ì´í„° ì†ŒìŠ¤ ë° ëª¨ë“  ì—°ê²° êµ¬ì„±\nâ”‚   â””â”€â”€ index.ts          // ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹œì‘ì \nâ”œâ”€â”€ .gitignore            // í‘œì¤€ gitignore íŒŒì¼\nâ”œâ”€â”€ package.json          // ë…¸ë“œ ëª¨ë“ˆ ì˜ì¡´ì„±\nâ”œâ”€â”€ README.md             // ê°„ë‹¨í•œ readme íŒŒì¼\nâ””â”€â”€ tsconfig.json         // TypeScript ì»´íŒŒì¼ëŸ¬ ì˜µì…˜\n```\n\nì´ì œ ì¶”ê°€ì ì¸ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•´ì£¼ì„¸ìš”.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\r\nnpm install express dotenv bcrypt jsonwebtoken concurrently memory-cache\r\n```\n\nìœ„ì— ì–¸ê¸‰ëœ ê° íŒ¨í‚¤ì§€ê°€ í•˜ëŠ” ì¼ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n- Express: Node.jsë¥¼ ìœ„í•œ ì›¹ í”„ë ˆì„ì›Œí¬ë¡œ, ì„œë²„ë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n- dotenv: ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\n- bcrypt: ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n- jsonwebtoken: ì‚¬ìš©ìë¥¼ ì‹ë³„í•˜ê±°ë‚˜ ì‚¬ìš©ìì— ëŒ€í•œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ë° ìì£¼ ì‚¬ìš©ë˜ë©°, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ì— í† í°ì´ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.\n- concurrently: ë‹¨ì¼ í„°ë¯¸ë„ì—ì„œ ì—¬ëŸ¬ npm ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” Node.js ìœ í‹¸ë¦¬í‹°ì…ë‹ˆë‹¤.\n- memory-cache: Node.jsë¥¼ ìœ„í•œ ê°„ë‹¨í•œ ë©”ëª¨ë¦¬ ìºì‹± ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ì—¬ ë¹ ë¥´ê²Œ ì•¡ì„¸ìŠ¤í•˜ê³  ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\n\n## ì´ëŸ¬í•œ ì¢…ì†ì„±ë“¤ì— ëŒ€í•œ TypeScript íƒ€ì… ì •ì˜ ì„¤ì¹˜:  \n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nTypeScriptë¡œ ì‘ì—…í•˜ê³  ìˆìœ¼ë‹ˆ ì˜ì¡´ì„±ì— ëŒ€í•œ @typesë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n```js\nnpm i @types/express @types/bcrypt @types/jsonwebtoken @types/memory-cache\n```\n\nì´ì œ ìƒì„±ëœ íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n\n# í”„ë¡œì íŠ¸ íŒŒì¼ ìˆ˜ì •í•˜ê¸°\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nìƒˆ í´ë” êµ¬ì¡°:\n\n```js\nstep-by-step\n â”£ src\n â”ƒ â”£ controllers\n â”ƒ â”ƒ â”£ auth.controller.ts\n â”ƒ â”ƒ â”£ movie.controllers.ts\n â”ƒ â”ƒ â”— user.controllers.ts\n â”ƒ â”£ dto\n â”ƒ â”ƒ â”— user.dto.ts\n â”ƒ â”£ entity\n â”ƒ â”ƒ â”£ Movies.entity.ts\n â”ƒ â”ƒ â”— User.entity.ts\n â”ƒ â”£ helpers\n â”ƒ â”ƒ â”— encrypt.ts\n â”ƒ â”£ middleware\n â”ƒ â”ƒ â”£ errorHandler.ts\n â”ƒ â”ƒ â”£ authentification.ts\n â”ƒ â”ƒ â”— authorization.ts\n â”ƒ â”£ migration\n â”ƒ â”ƒ â”£ 1698321500514-user.ts\n â”ƒ â”ƒ â”— 1698321512351-movie.ts\n â”ƒ â”£ routes\n â”ƒ â”ƒ â”£ movie.routes.ts\n â”ƒ â”ƒ â”— user.routes.ts\n â”ƒ â”£ data-source.ts\n â”ƒ â”— index.ts\n â”£ .env\n â”£ .gitignore\n â”£ package-lock.json\n â”£ package.json\n â”£ README.md\n â”— tsconfig.json\n```\n\n# package.json\n\në‹¤ìŒ ì¢…ì†ì„±ì„ í¬í•¨í•˜ì—¬ package.json íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```json\n{\n  \"name\": \"restTye\",\n  \"version\": \"0.0.1\",\n  \"description\": \"TypeORMìœ¼ë¡œ ê°œë°œëœ ë©‹ì§„ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.\",\n  \"type\": \"commonjs\",\n  \"devDependencies\": {\n    \"@types/bcrypt\": \"^5.0.1\",\n    \"@types/express\": \"^4.17.20\",\n    \"@types/jsonwebtoken\": \"^9.0.4\",\n    \"@types/memory-cache\": \"^0.2.4\",\n    \"@types/node\": \"^16.11.10\",\n    \"concurrently\": \"^8.2.2\",\n    \"ts-node\": \"10.7.0\",\n    \"typescript\": \"4.5.2\"\n  },\n  \"dependencies\": {\n    \"@types/cors\": \"^2.8.15\",\n    \"bcrypt\": \"^5.1.1\",\n    \"dotenv\": \"^16.3.1\",\n    \"express\": \"^4.18.2\",\n    \"jsonwebtoken\": \"^9.0.2\",\n    \"memory-cache\": \"^0.2.0\",\n    \"pg\": \"^8.4.0\",\n    \"reflect-metadata\": \"^0.1.13\",\n    \"typeorm\": \"0.3.17\"\n  },\n  \"scripts\": {\n    \"watch\": \"tsc -w\",\n    \"dev\": \"nodemon build/index.js\",\n    \"start:dev\": \"concurrently \\\"tsc -w\\\" \\\"nodemon build/index.js\\\"\",\n    \"build\": \"tsc\",\n    \"start\": \"ts-node src/index.ts\",\n    \"typeorm\": \"typeorm-ts-node-commonjs\",\n    \"migration\": \" npm run typeorm migration:run -- -d ./src/data-source.ts\"\n  }\n}\n```\n\ní•„ìš”í•œ ì¢…ì†ì„±ê³¼ ê°œë°œì— í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. \n\nconcurrentlyë¥¼ ì‚¬ìš©í•˜ì—¬ \"tsc -w\" ë° \"nodemon build/index.js\"ë¥¼ ë™ì‹œì— ì‹¤í–‰í•˜ë¯€ë¡œ ì•±ì„ ì‹¤í–‰í•˜ë ¤ë©´ npm run start:devë¥¼ ì‹¤í–‰í•˜ë©´ ts íŒŒì¼ì„ jsë¡œ ì»´íŒŒì¼í•œ ë‹¤ìŒ nodemonì„ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤.\n\n# src/index.ts\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì—¬ê¸°ì— í–¥ìƒëœ src/index.ts íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤:\n\n```js\nimport { AppDataSource } from \"./data-source\";\nimport * as express from \"express\";\nimport * as dotenv from \"dotenv\";\nimport { Request, Response } from \"express\";\nimport { userRouter } from \"./routes/user.routes\";\nimport { movieRouter } from \"./routes/movie.routes\";\nimport \"reflect-metadata\";\ndotenv.config();\n\nconst app = express();\napp.use(express.json());\napp.use(errorHandler);\nconst { PORT = 3000 } = process.env;\napp.use(\"/auth\", userRouter);\napp.use(\"/api\", movieRouter);\n\napp.get(\"*\", (req: Request, res: Response) =\u003e {\n  res.status(505).json({ message: \"Bad Request\" });\n});\n\nAppDataSource.initialize()\n  .then(async () =\u003e {\n    app.listen(PORT, () =\u003e {\n      console.log(\"Server is running on http://localhost:\" + PORT);\n    });\n    console.log(\"Data Source has been initialized!\");\n  })\n  .catch((error) =\u003e console.log(error));\n```\n\nì´ index.ts íŒŒì¼ì€ Express.js ì„œë²„ë¥¼ ì„¤ì •í•˜ê³  ê²½ë¡œë¥¼ ì ìš©í•˜ë©° ì„œë²„ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì‚¬ìš©ì ê´€ë ¨ ë° ì˜í™” ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìœ„í•œ ë¼ìš°íŠ¸ë„ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n# src/data-source.ts\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì•„ë˜ëŠ” ì—…ë°ì´íŠ¸ëœ src/data-source.ts íŒŒì¼ì…ë‹ˆë‹¤:\n\nì´ íŒŒì¼ì€ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½ëŠ” ë“± ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. .env íŒŒì¼ì— í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¸ë¶€ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\n\n```js\nimport \"reflect-metadata\";\nimport { DataSource } from \"typeorm\";\n\nimport * as dotenv from \"dotenv\";\nimport { User } from \"./entity/User.entity\";\nimport { Movie } from \"./entity/Movies.entity\";\n\ndotenv.config();\n\nconst { DB_HOST, DB_PORT, DB_USERNAME, DB_PASSWORD, DB_DATABASE, NODE_ENV } =\n  process.env;\n\nexport const AppDataSource = new DataSource({\n  type: \"postgres\",\n  host: DB_HOST,\n  port: parseInt(DB_PORT || \"5432\"),\n  username: DB_USERNAME,\n  password: DB_PASSWORD,\n  database: DB_DATABASE,\n\n  synchronize: NODE_ENV === \"dev\" ? false : false,\n//logging logs sql command on the treminal\n  logging: NODE_ENV === \"dev\" ? false : false,\n  entities: [User, Movie],\n  migrations: [__dirname + \"/migration/*.ts\"],\n  subscribers: [],\n});\n```\n\n# Entities\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì´ê²ƒë“¤ì€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ êµ¬ì¡°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤:\n\n# ì‚¬ìš©ì ì—”í„°í‹°\n\n```js\nimport {\n  Entity,\n  PrimaryGeneratedColumn,\n  Column,\n  CreateDateColumn,\n  UpdateDateColumn,\n} from \"typeorm\";\n\n@Entity({ name: \"users\" })\nexport class User {\n  @PrimaryGeneratedColumn(\"uuid\")\n  id: string;\n\n  @Column({ nullable: false })\n  name: string;\n\n  @Column({ nullable: false })\n  email: string;\n\n  @Column({ nullable: false })\n  password: string;\n\n  @Column({ default: \"user\" })\n  role: string;\n\n  @CreateDateColumn()\n  createdAt: Date;\n\n  @UpdateDateColumn()\n  updatedAt: Date;\n}\n```\n\n# ì˜í™” ì—”í„°í‹°\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport {\n  Column,\n  CreateDateColumn,\n  Entity,\n  PrimaryGeneratedColumn,\n  UpdateDateColumn,\n} from \"typeorm\";\n\n@Entity({ name: \"movies\" })\nexport class Movie {\n  @PrimaryGeneratedColumn(\"uuid\")\n  id: string;\n\n  @Column({ nullable: false })\n  title: string;\n\n  @Column({ nullable: false })\n  description: string;\n\n  @Column({ nullable: false })\n  director: string;\n\n  @Column({ nullable: false })\n  year: number;\n\n  @Column({ nullable: false })\n  rating: string;\n\n  @Column({ nullable: false })\n  image: string;\n\n  @Column({ nullable: false })\n  cast: string;\n\n  @CreateDateColumn()\n  createdAt: Date;\n\n  @UpdateDateColumn()\n  updatedAt: Date;\n}\n```\n\në‚˜ëŠ” uuidë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ rowidë‚˜ incremental ë“± ë‹¤ë¥¸ ê²ƒì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆê³ , í•„ë“œê°€ ë¹„ì–´ìˆì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ nullable ì˜µì…˜ì„ falseë¡œ ì „ë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\nsrc/helpers/helpers.ts\n\nEncrypt í´ë˜ìŠ¤ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ê³ , ë¡œê·¸ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ìœ„í•´ ë¹„êµí•˜ë©° í† í°ì„ ìƒì„±í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport * as jwt from \"jsonwebtoken\";\nimport * as bcrypt from \"bcrypt\";\nimport * as dotenv from \"dotenv\";\nimport { payload } from \"../dto/user.dto\";\n\ndotenv.config();\nconst { JWT_SECRET = \"\" } = process.env;\nexport class encrypt {\n  static async encryptpass(password: string) {\n    return bcrypt.hashSync(password, 12);\n  }\n  static comparepassword(hashPassword: string, password: string) {\n    return bcrypt.compareSync(password, hashPassword);\n  }\n\n  static generateToken(payload: payload) {\n    return jwt.sign(payload, JWT_SECRET, { expiresIn: \"1d\" });\n  }\n}\n```\n\n# Middleware\n\n# Error Handling\n\nsrc/middlewares/error.middleware.tsì—ì„œ ì „ì—­ ì˜¤ë¥˜ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì„¤ì •í•´ë³´ì„¸ìš”.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { NextFunction, Request, Response } from \"express\";\n\nexport const errorHandler = (\n  error: Error,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) =\u003e {\n  console.error(`Error: ${error.message}`);\n  return res.status(500).json({ message: \"ë‚´ë¶€ ì„œë²„ ì˜¤ë¥˜\" });\n};\n```\n\n# ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë¯¸ë“¤ì›¨ì–´\n\nsrc/middlewares/auth.middleware.tsì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ êµ¬í˜„í•˜ì‹­ì‹œì˜¤:\n\n```js\nimport { NextFunction, Request, Response } from \"express\";\nimport * as jwt from \"jsonwebtoken\";\nimport * as dotenv from \"dotenv\";\ndotenv.config();\n\nexport const authentification = (\n  req: Request,\n  res: Response,\n  next: NextFunction\n) =\u003e {\n  const header = req.headers.authorization;\n  if (!header) {\n    return res.status(401).json({ message: \"ì¸ê°€ë˜ì§€ ì•ŠìŒ\" });\n  }\n  const token = header.split(\" \")[1];\n  if (!token) {\n    return res.status(401).json({ message: \"ì¸ê°€ë˜ì§€ ì•ŠìŒ\" });\n  }\n  const decode = jwt.verify(token, process.env.JWT_SECRET);\n  if (!decode) {\n    return res.status(401).json({ message: \"ì¸ê°€ë˜ì§€ ì•ŠìŒ\" });\n  }\n  req[\"currentUser\"] = decode;\n  next();\n};\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nìš”ì²­ì— ì¸ì¦ ì†ì„±ì„ í¬í•¨í•˜ëŠ” í—¤ë”ê°€ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ê·¸ëŸ° ì†ì„±ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” ê¶Œí•œì´ ì—†ìŒì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” íŠ¹ì • ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì†ì„±ì´ ìˆëŠ” ê²½ìš°ì—ëŠ” í•´ë‹¹ í† í°ì„ ì¶”ì¶œí•œ ë‹¤ìŒ ê·¸ í† í°ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í•œ ë¹„ë°€ í‚¤ë¡œ ë³µí˜¸í™”í•©ë‹ˆë‹¤. ê·¸ í† í°ì˜ ë°ì´í„°ê°€ ì˜¬ë°”ë¥¸ ê²½ìš° í† í°ì— ìˆëŠ” ë°ì´í„°ë¥¼ ìš”ì²­ì— ì „ë‹¬í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í† í°ì´ ë³µí˜¸í™”ë˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n```js\nimport { NextFunction, Request, Response } from \"express\";\nimport { AppDataSource } from \"../data-source\";\nimport { User } from \"../entity/User.entity\";\n\nexport const authorization = (roles: string[]) =\u003e {\n  return async (req: Request, res: Response, next: NextFunction) =\u003e {\n    const userRepo = AppDataSource.getRepository(User);\n    const user = await userRepo.findOne({\n      where: { id: req[\" currentUser\"].id },\n    });\n    console.log(user);\n    if (!roles.includes(user.role)) {\n      return res.status(403).json({ message: \"Forbidden\" });\n    }\n    next();\n  };\n};\n```\n\n# ì‚¬ìš©ì ë°ì´í„°ë¥¼ user.dto.tsë¡œ ì‚¬ìš©ì ì •ì˜í•˜ê¸°\n\nAPI ì‘ë‹µì— ì „ì†¡ëœ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë§ì¶¤ ì„¤ì •í•˜ëŠ” ë° user.dto.ts íŒŒì¼ì„ í™œìš©í•˜ê³ ì í•˜ëŠ” ê´€ì‹¬ì´ í‘œí˜„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ íŠ¹ì • íŒŒì¼ì€ ì œê³µëœ ì½”ë“œ ìƒ˜í”Œì— ëª…ì‹œì ìœ¼ë¡œ í¬í•¨ë˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ, API ì‘ë‹µì„ ìœ„í•´ êµ¬ì¡°í™”í•˜ê³  ìˆ˜ì •í•  ë°ì´í„°ë¥¼ í˜•ì„±í•˜ëŠ” ê°•ë ¥í•œ ë„êµ¬ë¡œ ì‘ìš©í•©ë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## user.dto.tsì´ ë¬´ì—‡ì¸ê°€ìš”?\n\nuser.dto.ts íŒŒì¼ì€ Data Transfer Objectì˜ ì•½ìë¡œ, APIë¡œë¶€í„° ì‘ë‹µìœ¼ë¡œ ì „ì†¡ë˜ê¸° ì „ ì‚¬ìš©ì ë°ì´í„°ì˜ í˜•ì‹ê³¼ ë‚´ìš©ì„ ì •ë°€í•˜ê²Œ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì´ íŒŒì¼ ì•ˆì— íŠ¹ì • ì¸í„°í˜ì´ìŠ¤, êµ¬ì¡° ë˜ëŠ” ë³€í™˜ ë¡œì§ì„ ì •ì˜í•¨ìœ¼ë¡œì¨, ê°œë°œìëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë˜ëŠ” APIë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”êµ¬ ì‚¬í•­ê³¼ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ë§ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¼ë¶€ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë³´ì•ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## user.dto.ts í™œìš©í•˜ê¸°\n\në‹¤ìŒì€ user.dto.ts íŒŒì¼ì„ êµ¬ì¡°í™”í•˜ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nexport class UserResponce {\n  name: string;\n  email: string;\n  role: string;\n}\n```\n\n## ì‚¬ìš© ë°©ë²•\n\nAPI ì‘ë‹µì—ì„œ ì‚¬ìš©ì ë°ì´í„°ì˜ ì‚¬ìš©ì ì •ì˜ê°€ í•„ìš”í•œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” user.dto.ts íŒŒì¼ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ë‹µìœ¼ë¡œ ë³´ë‚¼ ì›í•˜ëŠ” í˜•ì‹ì— ë§ëŠ” UserDTO ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬ì¡°ë¥¼ ì •ì˜í•œ í›„ ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ì„¸ìš”.\n\nì´ ì ‘ê·¼ ë°©ì‹ì€ API ì‘ë‹µì„ íŠ¹ì • ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ìœ ì—°í•˜ê²Œ ì¡°ì •í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ìƒí˜¸ ìš´ìš©ì„±ê³¼ íš¨ìœ¨ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\ní”„ë¡œì íŠ¸ì— ë§ê²Œ user.dto.ts íŒŒì¼ì„ í†µí•© ë° ì¡°ì •í•˜ê³ , API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ í”„ë¡œì íŠ¸ì˜ ê²½ìš°, ì €ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í–ˆì„ ê²ƒì…ë‹ˆë‹¤:\n\n```js\nimport { Request, Response } from \"express\";\nimport { AppDataSource } from \"../data-source\";\nimport { User } from \"../entity/User.entity\";\nimport { encrypt } from \"../helpers/encrypt\";\nimport { UserResponce } from \"../dto/user.dto\"; // ì˜¬ë°”ë¥¸ ê²½ë¡œì—ì„œ UserDtoë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤\nimport * as cache from \"memory-cache\";\n\nexport class UserController {\n  static async signup(req: Request, res: Response) {\n    const { name, email, password, role } = req.body;\n    const encryptedPassword = await encrypt.encryptpass(password);\n    const user = new User();\n    user.name = name;\n    user.email = email;\n    user.password = encryptedPassword;\n    user.role = role;\n\n    const userRepository = AppDataSource.getRepository(User);\n    await userRepository.save(user);\n    \n    // ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ëŠ” ë°ì´í„° êµ¬ì¡°í™”ë¥¼ ìœ„í•´ UserResponse DTO ì‚¬ìš©\n    const userDataSent = new UserResponce();\n    userDataSent.name = user.name;\n    userDataSent.email= user.email;\n    userDataSent.role = user.role;\n    \n    const token = encrypt.generateToken({ id: user.id });\n\n    return res\n      .status(200)\n      .json({ message: \"ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤\", token, userDataSent });\n  }\n}\n```\n\nUserResponse í´ë˜ìŠ¤ê°€ UserController íŒŒì¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ê°€ì ¸ì™€ì§€ê³  ì†ì„±ë“¤ì´ API ì‘ë‹µì— ì „ì†¡í•  ë°ì´í„°ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì´ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# ì»¨íŠ¸ë¡¤ëŸ¬\n\nì‚¬ìš©ì ë° ì˜í™” ì—”í‹°í‹°ì— ëŒ€í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œë¥¼ ì •ì˜í•˜ì„¸ìš”:\n\nì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í´ë¼ì´ì–¸íŠ¸(ì¼ë°˜ì ìœ¼ë¡œ ì›¹ ë¸Œë¼ìš°ì €)ë¡œë¶€í„° ìˆ˜ì‹ í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë¡œì§ì„ ì¡°ì •í•˜ëŠ” êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•˜ë©°, ì½”ë“œë¥¼ êµ¬ì„±í•˜ê³  ìœ ì§€ë³´ìˆ˜í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. ìš°ë¦¬ì˜ getalluser ë° getmoviesì—ì„œ ìºì‹œ ë©”ëª¨ë¦¬ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë ¤ê³  í•˜ëŠ” ë°, ì¡´ì¬í•œë‹¤ë©´ ìºì‹œì—ì„œ ê°€ì ¸ì˜¤ê³ , ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ í›„ ìºì‹œì— ì¼ì • ì‹œê°„ ë™ì•ˆ ë„£ìŠµë‹ˆë‹¤.\n\n# Auth Controller (src/controllers/Auth.controller.ts)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n## ì‚¬ìš©ì ì»¨íŠ¸ë¡¤ëŸ¬ (src/controllers/user.controller.ts)\n\n```js\nimport { Request, Response } from \"express\";\nimport { AppDataSource } from \"../data-source\";\nimport { User } from \"../entity/User.entity\";\nimport { encrypt } from \"../helpers/encrypt\";\nimport * as cache from \"memory-cache\";\n\nexport class UserController {\n  static async signup(req: Request, res: Response) {\n    const { name, email, password, role } = req.body;\n    const encryptedPassword = await encrypt.encryptpass(password);\n    const user = new User();\n    user.name = name;\n    user.email = email;\n    user.password = encryptedPassword;\n    user.role = role;\n\n    const userRepository = AppDataSource.getRepository(User);\n    await userRepository.save(user);\n\n    // userRepository.create({ Name, email, password });\n    const token = encrypt.generateToken({ id: user.id });\n\n    return res\n      .status(200)\n      .json({ message: \"User created successfully\", token, user });\n  }\n  static async getUsers(req: Request, res: Response) {\n    const data = cache.get(\"data\");\n    if (data) {\n      console.log(\"serving from cache\");\n      return res.status(200).json({\n        data,\n      });\n    } else {\n      console.log(\"serving from db\");\n      const userRepository = AppDataSource.getRepository(User);\n      const users = await userRepository.find();\n\n      cache.put(\"data\", users, 6000);\n      return res.status(200).json({\n        data: users,\n      });\n    }\n  }\n  static async updateUser(req: Request, res: Response) {\n    const { id } = req.params;\n    const { name, email } = req.body;\n    const userRepository = AppDataSource.getRepository(User);\n    const user = await userRepository.findOne({\n      where: { id },\n    });\n    user.name = name;\n    user.email = email;\n    await userRepository.save(user);\n    res.status(200).json({ message: \"udpdate\", user });\n  }\n\n  static async deleteUser(req: Request, res: Response) {\n    const { id } = req.params;\n    const userRepository = AppDataSource.getRepository(User);\n    const user = await userRepository.findOne({\n      where: { id },\n    });\n    await userRepository.remove(user);\n    res.status(200).json({ message: \"ok\" });\n  }\n}\n```\n\n# ì˜í™” ì»¨íŠ¸ë¡¤ëŸ¬ (src/controllers/movie.controller.ts)\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { Request, Response } from \"express\";\nimport * as cache from \"memory-cache\";\nimport { AppDataSource } from \"../data-source\";\nimport { Movie } from \"../entity/Movies.entity\";\n\nexport class MovieController {\n  static async getAllMovies(req: Request, res: Response) {\n    const data = cache.get(\"data\");\n    if (data) {\n      console.log(\"ìºì‹œì—ì„œ ì œê³µ ì¤‘\");\n      return res.status(200).json({\n        data,\n      });\n    } else {\n      console.log(\"ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì œê³µ ì¤‘\");\n      const movieRepository = AppDataSource.getRepository(Movie);\n      const movies = await movieRepository.find();\n      cache.put(\"data\", movies, 10000);\n      return res.status(200).json({\n        data: movies,\n      });\n    }\n  }\n  static async createMovie(req: Request, res: Response) {\n    const { title, description, director, year, rating, image, cast } =\n      req.body;\n    const movie = new Movie();\n    movie.title = title;\n    movie.description = description;\n    movie.director = director;\n    movie.year = year;\n    movie.rating = rating;\n    movie.image = image;\n    movie.cast = cast;\n    const movieRepository = AppDataSource.getRepository(Movie);\n    await movieRepository.save(movie);\n    return res\n      .status(200)\n      .json({ message: \"ì˜í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤\", movie });\n  }\n\n  static async updateMovie(req: Request, res: Response) {\n    const { id } = req.params;\n    const { title, description, director, year, rating, image, cast } =\n      req.body;\n    const movieRepository = AppDataSource.getRepository(Movie);\n    const movie = await movieRepository.findOne({\n      where: { id },\n    });\n    movie.title = title;\n    movie.description = description;\n    movie.director = director;\n    movie.year = year;\n    movie.rating = rating;\n    movie.image = image;\n    movie.cast = cast;\n    await movieRepository.save(movie);\n    return res\n      .status(200)\n      .json({ message: \"ì˜í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤\", movie });\n  }\n\n  static async deleteMovie(req: Request, res: Response) {\n    const { id } = req.params;\n    const movieRepository = AppDataSource.getRepository(Movie);\n    const movie = await movieRepository.findOne({\n      where: { id },\n    });\n    await movieRepository.remove(movie);\n    return res\n      .status(200)\n      .json({ message: \"ì˜í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤\", movie });\n  }\n}\n```\n\n# ì‚¬ìš©ì ë¼ìš°íŒ…\n\nsrc/routes/user.routes.ts íŒŒì¼ì— ì‚¬ìš©ì ê´€ë¦¬ì™€ ê´€ë ¨ëœ ë¼ìš°íŠ¸ë¥¼ ì •ì˜í•˜ì‹­ì‹œì˜¤:\n\në¼ìš°íŠ¸ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì–‘í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ íŠ¹ì • ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆëŠ” íŠ¹ì • URL ë˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤. ë¼ìš°íŠ¸ëŠ” ìˆ˜ì‹ ëœ HTTP ìš”ì²­ì— ëŒ€í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‘ë‹µí•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ë° ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```javascript\nimport * as express from \"express\";\nimport { authentification } from \"../middleware/authentification\";\nimport { UserController } from \"../controllers/user.controllers\";\nimport { authorization } from \"../middleware/authorization\";\nimport { AuthController } from \"../controllers/auth.controller\";\nconst Router = express.Router();\n\nRouter.get(\n  \"/users\",\n  authentification,\n  authorization([\"admin\"]),\n  UserController.getUsers\n);\nRouter.get(\n  \"/profile\",\n  authentification,\n  authorization([\"user\", \"admin\"]),\n  AuthController.getProfile\n);\nRouter.post(\"/signup\", UserController.signup);\nRouter.post(\"/login\", AuthController.login);\nRouter.put(\n  \"/update/:id\",\n  authentification,\n  authorization([\"user\", \"admin\"]),\n  UserController.updateUser\n);\nRouter.delete(\n  \"/delete/:id\",\n  authentification,\n  authorization([\"admin\"]),\n  UserController.deleteUser\n);\nexport { Router as userRouter };\n```\n\n# ì˜í™” ë¼ìš°íŠ¸\n\n```javascript\nimport * as express from \"express\";\nimport { authentification } from \"../middleware/authentification\";\nimport { MovieController } from \"../controllers/movie.controllers\";\nimport { authorization } from \"../middleware/authorization\";\n\nconst Router = express.Router();\n\nRouter.get(\"/movies\", authentification, MovieController.getAllMovies);\nRouter.post(\"/movies\", authentification, MovieController.createMovie);\n\nRouter.put(\n  \"/movies/:id\",\n  authentification,\n  authorization([\"admin\"]),\n  MovieController.updateMovie\n);\nRouter.delete(\n  \"/movies/:id\",\n  authentification,\n  authorization([\"admin\"]),\n  MovieController.deleteMovie\n);\nexport { Router as movieRouter };\n```\n\n# ë¯¸ë“¤ì›¨ì–´ ìˆœì„œ ì„¤ì •\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nExpress.jsëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ì •ì˜ëœ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. ë¼ìš°íŠ¸ ì •ì˜ ì‹œì— ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë°°ì¹˜í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\n\nì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ì ë¼ìš°íŠ¸ì˜ ê²½ìš°, ìš°ë¦¬ëŠ” ë‘ ê°œì˜ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ì¸ authenticateì™€ authorizeê°€ ìˆìŠµë‹ˆë‹¤. authenticateëŠ” ì‚¬ìš©ìì˜ ì‹ ì›ì„ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— ë¨¼ì € ì™€ì•¼ í•©ë‹ˆë‹¤. authorizeëŠ” ê·¸ ë‹¤ìŒì— ìœ„ì¹˜í•˜ì—¬ ì‚¬ìš©ìê°€ ì ì ˆí•œ ì—­í• ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\n\n# ì´ì£¼\n\nìš°ë¦¬ëŠ” ì—”í‹°í‹°ì— ëŒ€í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•˜ê³  ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¡œì¨ í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ ìƒì„±ë©ë‹ˆë‹¤. ë¬¸ì„œì— ë‚˜ì™€ ìˆëŠ” ëŒ€ë¡œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì´ ëª…ë ¹ì–´ëŠ” src/migration ë””ë ‰í† ë¦¬ì— ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ í…Œì´ë¸” êµ¬ì¡°ë¥¼ ì •ì˜í•˜ê³  ì•„ë˜ ì½”ë“œì— ë‚˜ì™€ ìˆëŠ” ëŒ€ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ì„¸ìš”.\n\n```js\ntypeorm migration:create ./migrations/users\n```\n\n```js\nimport { MigrationInterface, QueryRunner } from \"typeorm\";\n\nexport class User1698321500514 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise\u003cvoid\u003e {\n// ì—¬ê¸°ì— ì§ì ‘ ì¶”ê°€í•  ë¶€ë¶„\n    await queryRunner.query(\n      ` \n          --í…Œì´ë¸” ì •ì˜\n          CREATE TABLE \"users\"  (\n            \"id\" uuid NOT NULL DEFAULT uuid_generate_v4(),\n            \"name\" character varying NOT NULL,\n            \"email\" character varying NOT NULL,\n            \"password\" character varying NOT NULL,\n            \"role\"  character varying NOT NULL DEFAULT 'user',\n            \"createdAt\" TIMESTAMP NOT NULL DEFAULT now(),\n            \"updatedAt\" TIMESTAMP NOT NULL DEFAULT now(),\n            CONSTRAINT \"PK_cace4a159ff9f2512dd42373760\" PRIMARY KEY (\"id\")\n          )\n\n          \n          \n          \n          \n          `\n    ),\n      undefined;\n  }\n\n  public async down(queryRunner: QueryRunner): Promise\u003cvoid\u003e {\n// ê·¸ë¦¬ê³  ì´ ë¶€ë¶„\n    await queryRunner.query(`DROP TABLE \"users\"`, undefined);\n  }\n}\n```\n\n```js\nimport { MigrationInterface, QueryRunner } from \"typeorm\";\n\nexport class Movie1698321512351 implements MigrationInterface {\n  public async up(queryRunner: QueryRunner): Promise\u003cvoid\u003e {\n    await queryRunner.query(`\n        --í…Œì´ë¸” ì •ì˜\n        CREATE TABLE \"movies\"  (\n            \"id\" uuid NOT NULL DEFAULT uuid_generate_v4(),\n            \"title\" character varying NOT NULL,\n            \"description\" character varying NOT NULL,\n            \"director\" character varying NOT NULL,\n            \"year\" integer NOT NULL,\n            \"rating\" character varying NOT NULL,\n            \"image\" character varying NOT NULL,\n            \"cast\" character varying NOT NULL,\n            \"createdAt\" TIMESTAMP NOT NULL DEFAULT now(),\n            \"updatedAt\" TIMESTAMP NOT NULL DEFAULT now(),\n            CONSTRAINT \"PK_1031171c13130102495201e3e20\" PRIMARY KEY (\"id\")\n          )\n          \n          \n          \n          \n          \n          `),\n      undefined;\n  }\n\n  public async down(queryRunner: QueryRunner): Promise\u003cvoid\u003e {\n    await queryRunner.query(`DROP TABLE \"movies\"`, undefined);\n  }\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\níŒ¨í‚¤ì§€ JSON íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:\n\n```js\n   \"migration\": \" npm run typeorm migration:run -- -d ./src/data-source.ts\"\n```\n\ndata-source.ts íŒŒì¼ì€ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±ì´ ì €ì¥ëœ ìœ„ì¹˜ì…ë‹ˆë‹¤.\n\n# í…ŒìŠ¤íŠ¸\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nAPIë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ Postman, cURL ë˜ëŠ” ë‹¤ë¥¸ HTTP í´ë¼ì´ì–¸íŠ¸ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. API ì—”ë“œí¬ì¸íŠ¸ì— ìš”ì²­ì„ ë³´ë‚´ì–´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ì˜¤ë¥˜ ì²˜ë¦¬\n\nì œê³µëœ errorHandler ë¯¸ë“¤ì›¨ì–´ì—ì„œ ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ í•´ë‹¹ ì˜¤ë¥˜ê°€ ê¸°ë¡ë˜ê³  ì¼ë°˜ì ì¸ ì˜¤ë¥˜ ì‘ë‹µì´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡ë©ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©ì ì •ì˜í•˜ì—¬ ì˜¤ë¥˜ ì²˜ë¦¬ ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në§ºìŒë§\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì´ë²ˆ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” TypeScript, Express.js ë° TypeORMì„ ì‚¬ìš©í•˜ì—¬ ê°•ë ¥í•œ REST APIë¥¼ ë§Œë“œëŠ” ì—¬ì •ì— ì¶œë°œí–ˆìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ê³¼ ê°™ì€ ê¸°ë³¸ ê°œë…ì„ íƒí—˜í–ˆìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ë°°ìš´ ë‚´ìš©ì„ ë˜ì§šì–´ë´…ì‹œë‹¤:\n\n- Object-Relational Mapping (ORM)ì˜ ì¤‘ìš”ì„±ê³¼ íŠ¹íˆ TypeScript ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ì„ ê°„ì†Œí™”í•˜ëŠ” TypeORMì— ëŒ€í•´ ì´í•´í–ˆìŠµë‹ˆë‹¤.\n- ìºì‹±ì€ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë° ê²€ìƒ‰ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¤ëŠ” ê¸°ìˆ ë¡œ ëª…ë£Œí•˜ê²Œ ì„¤ëª…ë˜ì—ˆìœ¼ë©° ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ í–¥ìƒí–ˆìŠµë‹ˆë‹¤.\n- í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê³  ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ê³  ì¤‘ìš”í•œ êµ¬ì„± íŒŒì¼ì„ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.\n\nì´ì œ ì´ ì§€ì‹ì„ ë°”íƒ•ìœ¼ë¡œ ê²¬ê³ í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê¸°ì–µí•˜ì„¸ìš”, ì´ê²ƒì€ ì‹œì‘ì— ë¶ˆê³¼í•©ë‹ˆë‹¤. íƒí—˜í•  ê±°ëŒ€í•œ ì›¹ ê°œë°œ ì„¸ê³„ê°€ ê¸°ë‹¤ë¦¬ê³  ìˆìœ¼ë©° ë” ê¹Šì´ íŒŒê³ ë“¤ê³  ê³ ê¸‰ ì£¼ì œë¥¼ ë” íƒêµ¬í•˜ê³  API ê¸°ëŠ¥ì„ í™•ì¥í•˜ëŠ” ê²ƒì„ ì¥ë ¤í•©ë‹ˆë‹¤.\n\nì´ í•™ìŠµ ì—¬ì •ì— í•¨ê»˜í•´ ì£¼ì…”ì„œ ê¸°ì©ë‹ˆë‹¤. ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ í”¼ë“œë°±ì´ë‚˜ ê²½í—˜ì„ ê³µìœ í•˜ê³  ì‹¶ë‹¤ë©´ ë§ì„¤ì´ì§€ ë§ê³  ì—°ë½í•´ì£¼ì„¸ìš”.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì›¹ ê°œë°œì˜ ëŠì„ì—†ì´ ë°œì „í•˜ëŠ” ì„¸ê³„ì—ì„œëŠ” í•­ìƒ ë°°ìš¸ ê²ƒì´ ë” ë§ê³  ë§Œë“¤ ê²ƒì´ ë” ë§ìŠµë‹ˆë‹¤. ê³„ì† ì½”ë”©í•˜ê³ , ê³„ì† íƒí—˜í•˜ê³ , ë†€ë¼ìš´ ê²ƒì„ ê³„ì† ë§Œë“¤ì–´ ë³´ì„¸ìš”. ì›¹ì€ ë‹¹ì‹ ì˜ ìº”ë²„ìŠ¤ì´ë©°, ë‹¹ì‹ ì´ ì•„í‹°ìŠ¤íŠ¸ì…ë‹ˆë‹¤.\n\nì´ íŠœí† ë¦¬ì–¼ì˜ ì¼ë¶€ê°€ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œì˜ í”„ë¡œì íŠ¸ì—ì„œ í–‰ìš´ì„ ë¹•ë‹ˆë‹¤!\n\nì œ GitHubì—ì„œ ì „ì²´ í”„ë¡œì íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ê²ƒìœ¼ë¡œ ìš°ë¦¬ì˜ íŠœí† ë¦¬ì–¼ì„ ë§ˆì¹©ë‹ˆë‹¤. ìœ ìš©í•˜ê²Œ í™œìš©í•˜ì…¨ë‹¤ë©´ ë°•ìˆ˜ë¥¼ ì¹˜ê±°ë‚˜ ëŒ“ê¸€ì„ ë‚¨ê²¨ì£¼ì„¸ìš”. ì œì•ˆì´ë‚˜ í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤. ë˜í•œ Twitter, LinkedIn, GitHubì—ì„œ ì €ì™€ ì†Œí†µí•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.","ogImage":{"url":"/assets/img/2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres_0.png"},"coverImage":"/assets/img/2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres_0.png","tag":["Tech"],"readingTime":25},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003eì•ˆë…•í•˜ì„¸ìš”! TypeScript, Express.js, ê·¸ë¦¬ê³  TypeORMì„ í™œìš©í•˜ì—¬ REST APIë¥¼ ë§Œë“œëŠ” ì´ íŠœí† ë¦¬ì–¼ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì€ JWT ì¸ì¦, ë°ì´í„° ìºì‹±, ê·¸ë¦¬ê³  ì—­í•  ê¸°ë°˜ ê¶Œí•œ ë¶€ì—¬ë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí•˜ë©´ ì´ëŸ¬í•œ í•µì‹¬ ê°œë…ê³¼ ê¸°ìˆ ì— ëŒ€í•œ íŠ¼íŠ¼í•œ ì´í•´ë¥¼ ê°–ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eì‚¬ì „ ì¤€ë¹„ ì‚¬í•­:\u003c/h2\u003e\n\u003cp\u003eì‹œì‘í•˜ê¸° ì „ì— ë‹¤ìŒ ë„êµ¬ì— ëŒ€í•œ ê²½í—˜ì´ë‚˜ ì´í•´ê°€ í•„ìš”í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTypeScript\u003c/li\u003e\n\u003cli\u003eTypeORM\u003c/li\u003e\n\u003cli\u003eSQL\u003c/li\u003e\n\u003cli\u003eNode.js \u0026#x26; NPM\u003c/li\u003e\n\u003cli\u003eJSON Web Tokens (JWT)\u003c/li\u003e\n\u003cli\u003eCaching\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eORMê³¼ TypeORMì´ ë¬´ì—‡ì´ë©° ì™œ ì¤‘ìš”í•œê°€ìš”?\u003c/h2\u003e\n\u003cp\u003eORMì€ Object-Relational Mappingì˜ ì•½ìë¡œ, ê°ì²´ ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ì„ ì‚¬ìš©í•˜ì—¬ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©ì„ ìš©ì´í•˜ê²Œ í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê¸°ìˆ  ë° í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. ORMì€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ (ì˜ˆ: MySQL, PostgreSQL, SQLite)ì™€ ì‘ìš© í”„ë¡œê·¸ë¨ ì½”ë“œ ì‚¬ì´ì˜ ë‹¤ë¦¬ ì—­í• ì„ í•˜ë©° ë³µì¡í•œ SQL ì¿¼ë¦¬ì™€ ì €ìˆ˜ì¤€ ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ì‘ìš©ì„ ì¶”ìƒí™”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eTypeORMì€ Node.js ë° ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ ì‘ë™í•˜ëŠ” ë‹¤ì¬ë‹¤ëŠ¥í•œ ORMì…ë‹ˆë‹¤. TypeScript ì‘ìš© í”„ë¡œê·¸ë¨ì— ë§¤ìš° ì í•©í•˜ë©°, ì—”í‹°í‹° ë° ì—´ì„ ì •ì˜í•˜ê¸° ìœ„í•´ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ì ì´ íŠ¹íˆ ì˜ ì–´ìš¸ë¦½ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eìºì‹œ(ìºì‹±)ë€ ë¬´ì—‡ì¸ê°€ìš”?\u003c/h2\u003e\n\u003cp\u003eìºì‹±ì€ ì»´í“¨í„° ê³¼í•™ê³¼ ì •ë³´ ê¸°ìˆ ì—ì„œ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ë¡œ, ì£¼ë¡œ ì•¡ì„¸ìŠ¤ë˜ê±°ë‚˜ ê³„ì‚°ëœ ë°ì´í„°ë¥¼ \"ìºì‹œ\"ë¼ê³  ë¶ˆë¦¬ëŠ” ì„ì‹œ ì €ì¥ ì˜ì—­ì— ì €ì¥í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ìºì‹±ì˜ ì£¼ìš” ëª©ì ì€ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë° ê²€ìƒ‰ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¤ê³ , ëŒ€ê¸° ì‹œê°„ì„ ì¤„ì´ë©°, ì „ë°˜ì ì¸ ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ë¡ ì€ ì´ë§Œí•˜ê³ , ì´ì œ ì§ì ‘ í•´ë³´ì! ğŸ˜\u003c/p\u003e\n\u003ch1\u003eí”„ë¡œì íŠ¸ ì„¤ì •\u003c/h1\u003e\n\u003cp\u003eí”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ë ¤ë©´ TypeORM CLIë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpx typeorm init --name restAPi --database postgres\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ê°•ì¢Œì—ì„œëŠ” Postgresë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ mysql, mariadb, postgres, cockroachdb, sqlite, mssql, sap, spanner, oracle, mongodb, cordova, react-native, expo, nativescript ê°™ì€ ë‹¤ë¥¸ ë°ì´í„°ë² ì´ìŠ¤ë„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003cp\u003eì°¸ê³ : ìœ„ ëª…ë ¹ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ì»´í“¨í„°ì— TypeORMì´ ì „ì—­ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ë§Œì•½ ì—†ë‹¤ë©´ ê°„ë‹¨íˆ ì•„ë˜ ëª…ë ¹ì„ ì‹¤í–‰í•´ë³´ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm i -g typeorm\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTypeorm init ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ì•„ë˜ íŒŒì¼ë“¤ì´ ìƒì„±ë©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003erestApi\nâ”œâ”€â”€ src                   \u003cspan class=\"hljs-comment\"\u003e// TypeScript ì½”ë“œê°€ ì €ì¥ë˜ëŠ” ìœ„ì¹˜\u003c/span\u003e\nâ”‚   â”œâ”€â”€ entity            \u003cspan class=\"hljs-comment\"\u003e// ì—”í‹°í‹°(ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸)ê°€ ì €ì¥ë˜ëŠ” ìœ„ì¹˜\u003c/span\u003e\nâ”‚   â”‚   â””â”€â”€ \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e       \u003cspan class=\"hljs-comment\"\u003e// ìƒ˜í”Œ ì—”í‹°í‹°\u003c/span\u003e\nâ”‚   â”œâ”€â”€ migration         \u003cspan class=\"hljs-comment\"\u003e// ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì €ì¥ë˜ëŠ” ìœ„ì¹˜\u003c/span\u003e\nâ”‚   â”œâ”€â”€ data-source.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e    \u003cspan class=\"hljs-comment\"\u003e// ë°ì´í„° ì†ŒìŠ¤ ë° ëª¨ë“  ì—°ê²° êµ¬ì„±\u003c/span\u003e\nâ”‚   â””â”€â”€ index.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e          \u003cspan class=\"hljs-comment\"\u003e// ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹œì‘ì \u003c/span\u003e\nâ”œâ”€â”€ .\u003cspan class=\"hljs-property\"\u003egitignore\u003c/span\u003e            \u003cspan class=\"hljs-comment\"\u003e// í‘œì¤€ gitignore íŒŒì¼\u003c/span\u003e\nâ”œâ”€â”€ package.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e          \u003cspan class=\"hljs-comment\"\u003e// ë…¸ë“œ ëª¨ë“ˆ ì˜ì¡´ì„±\u003c/span\u003e\nâ”œâ”€â”€ \u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emd\u003c/span\u003e             \u003cspan class=\"hljs-comment\"\u003e// ê°„ë‹¨í•œ readme íŒŒì¼\u003c/span\u003e\nâ””â”€â”€ tsconfig.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e         \u003cspan class=\"hljs-comment\"\u003e// TypeScript ì»´íŒŒì¼ëŸ¬ ì˜µì…˜\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ì¶”ê°€ì ì¸ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install express dotenv bcrypt jsonwebtoken concurrently memory-cache\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ì— ì–¸ê¸‰ëœ ê° íŒ¨í‚¤ì§€ê°€ í•˜ëŠ” ì¼ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eExpress: Node.jsë¥¼ ìœ„í•œ ì›¹ í”„ë ˆì„ì›Œí¬ë¡œ, ì„œë²„ë¥¼ ìƒì„±í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003edotenv: ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003ebcrypt: ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003ejsonwebtoken: ì‚¬ìš©ìë¥¼ ì‹ë³„í•˜ê±°ë‚˜ ì‚¬ìš©ìì— ëŒ€í•œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ë° ìì£¼ ì‚¬ìš©ë˜ë©°, ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ì— í† í°ì´ ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003econcurrently: ë‹¨ì¼ í„°ë¯¸ë„ì—ì„œ ì—¬ëŸ¬ npm ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” Node.js ìœ í‹¸ë¦¬í‹°ì…ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003ememory-cache: Node.jsë¥¼ ìœ„í•œ ê°„ë‹¨í•œ ë©”ëª¨ë¦¬ ìºì‹± ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ì—¬ ë¹ ë¥´ê²Œ ì•¡ì„¸ìŠ¤í•˜ê³  ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eì´ëŸ¬í•œ ì¢…ì†ì„±ë“¤ì— ëŒ€í•œ TypeScript íƒ€ì… ì •ì˜ ì„¤ì¹˜:\u003c/h2\u003e\n\u003cp\u003eTypeScriptë¡œ ì‘ì—…í•˜ê³  ìˆìœ¼ë‹ˆ ì˜ì¡´ì„±ì— ëŒ€í•œ @typesë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm i @types/express @types/bcrypt @types/jsonwebtoken @types/memory-cache\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ìƒì„±ëœ íŒŒì¼ì„ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eí”„ë¡œì íŠ¸ íŒŒì¼ ìˆ˜ì •í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eìƒˆ í´ë” êµ¬ì¡°:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003estep-by-step\n â”£ src\n â”ƒ â”£ controllers\n â”ƒ â”ƒ â”£ auth.\u003cspan class=\"hljs-property\"\u003econtroller\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”ƒ â”£ movie.\u003cspan class=\"hljs-property\"\u003econtrollers\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”ƒ â”— user.\u003cspan class=\"hljs-property\"\u003econtrollers\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”£ dto\n â”ƒ â”ƒ â”— user.\u003cspan class=\"hljs-property\"\u003edto\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”£ entity\n â”ƒ â”ƒ â”£ \u003cspan class=\"hljs-title class_\"\u003eMovies\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eentity\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”ƒ â”— \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eentity\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”£ helpers\n â”ƒ â”ƒ â”— encrypt.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”£ middleware\n â”ƒ â”ƒ â”£ errorHandler.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”ƒ â”£ authentification.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”ƒ â”— authorization.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”£ migration\n â”ƒ â”ƒ â”£ \u003cspan class=\"hljs-number\"\u003e1698321500514\u003c/span\u003e-user.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”ƒ â”— \u003cspan class=\"hljs-number\"\u003e1698321512351\u003c/span\u003e-movie.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”£ routes\n â”ƒ â”ƒ â”£ movie.\u003cspan class=\"hljs-property\"\u003eroutes\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”ƒ â”— user.\u003cspan class=\"hljs-property\"\u003eroutes\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”£ data-source.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”ƒ â”— index.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n â”£ .\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e\n â”£ .\u003cspan class=\"hljs-property\"\u003egitignore\u003c/span\u003e\n â”£ package-lock.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n â”£ package.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n â”£ \u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emd\u003c/span\u003e\n â”— tsconfig.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003epackage.json\u003c/h1\u003e\n\u003cp\u003eë‹¤ìŒ ì¢…ì†ì„±ì„ í¬í•¨í•˜ì—¬ package.json íŒŒì¼ì„ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"restTye\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"version\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"0.0.1\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"description\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"TypeORMìœ¼ë¡œ ê°œë°œëœ ë©‹ì§„ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"type\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"commonjs\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"devDependencies\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/bcrypt\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^5.0.1\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/express\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^4.17.20\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/jsonwebtoken\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^9.0.4\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/memory-cache\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^0.2.4\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/node\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^16.11.10\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"concurrently\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^8.2.2\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"ts-node\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"10.7.0\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"typescript\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"4.5.2\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"dependencies\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/cors\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^2.8.15\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"bcrypt\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^5.1.1\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"dotenv\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^16.3.1\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"express\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^4.18.2\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"jsonwebtoken\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^9.0.2\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"memory-cache\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^0.2.0\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"pg\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^8.4.0\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"reflect-metadata\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^0.1.13\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"typeorm\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"0.3.17\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"scripts\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"watch\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"tsc -w\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"dev\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"nodemon build/index.js\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"start:dev\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"concurrently \\\"tsc -w\\\" \\\"nodemon build/index.js\\\"\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"build\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"tsc\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"start\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"ts-node src/index.ts\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"typeorm\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"typeorm-ts-node-commonjs\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"migration\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\" npm run typeorm migration:run -- -d ./src/data-source.ts\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eí•„ìš”í•œ ì¢…ì†ì„±ê³¼ ê°œë°œì— í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ ë° ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003econcurrentlyë¥¼ ì‚¬ìš©í•˜ì—¬ \"tsc -w\" ë° \"nodemon build/index.js\"ë¥¼ ë™ì‹œì— ì‹¤í–‰í•˜ë¯€ë¡œ ì•±ì„ ì‹¤í–‰í•˜ë ¤ë©´ npm run start:devë¥¼ ì‹¤í–‰í•˜ë©´ ts íŒŒì¼ì„ jsë¡œ ì»´íŒŒì¼í•œ ë‹¤ìŒ nodemonì„ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003esrc/index.ts\u003c/h1\u003e\n\u003cp\u003eì—¬ê¸°ì— í–¥ìƒëœ src/index.ts íŒŒì¼ì´ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./data-source\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e express \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"dotenv\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { userRouter } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./routes/user.routes\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { movieRouter } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./routes/movie.routes\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"reflect-metadata\"\u003c/span\u003e;\ndotenv.\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e();\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e app = \u003cspan class=\"hljs-title function_\"\u003eexpress\u003c/span\u003e();\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(express.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e());\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(errorHandler);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-variable constant_\"\u003ePORT\u003c/span\u003e = \u003cspan class=\"hljs-number\"\u003e3000\u003c/span\u003e } = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e;\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/auth\"\u003c/span\u003e, userRouter);\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/api\"\u003c/span\u003e, movieRouter);\n\napp.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"*\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) =\u003e\u003c/span\u003e {\n  res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e505\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Bad Request\"\u003c/span\u003e });\n});\n\n\u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einitialize\u003c/span\u003e()\n  .\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e () =\u003e {\n    app.\u003cspan class=\"hljs-title function_\"\u003elisten\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003ePORT\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Server is running on http://localhost:\"\u003c/span\u003e + \u003cspan class=\"hljs-variable constant_\"\u003ePORT\u003c/span\u003e);\n    });\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"Data Source has been initialized!\"\u003c/span\u003e);\n  })\n  .\u003cspan class=\"hljs-title function_\"\u003ecatch\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerror\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(error));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ index.ts íŒŒì¼ì€ Express.js ì„œë²„ë¥¼ ì„¤ì •í•˜ê³  ê²½ë¡œë¥¼ ì ìš©í•˜ë©° ì„œë²„ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤. ì‚¬ìš©ì ê´€ë ¨ ë° ì˜í™” ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìœ„í•œ ë¼ìš°íŠ¸ë„ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003esrc/data-source.ts\u003c/h1\u003e\n\u003cp\u003eì•„ë˜ëŠ” ì—…ë°ì´íŠ¸ëœ src/data-source.ts íŒŒì¼ì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cp\u003eì´ íŒŒì¼ì€ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì½ëŠ” ë“± ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. .env íŒŒì¼ì— í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¸ë¶€ ì •ë³´ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"reflect-metadata\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eDataSource\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"typeorm\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"dotenv\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./entity/User.entity\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eMovie\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./entity/Movies.entity\"\u003c/span\u003e;\n\ndotenv.\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e();\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-variable constant_\"\u003eDB_HOST\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eDB_PORT\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eDB_USERNAME\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eDB_PASSWORD\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eDB_DATABASE\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eNODE_ENV\u003c/span\u003e } =\n  process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDataSource\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"postgres\"\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003ehost\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eDB_HOST\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eport\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003eparseInt\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eDB_PORT\u003c/span\u003e || \u003cspan class=\"hljs-string\"\u003e\"5432\"\u003c/span\u003e),\n  \u003cspan class=\"hljs-attr\"\u003eusername\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eDB_USERNAME\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eDB_PASSWORD\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003edatabase\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eDB_DATABASE\u003c/span\u003e,\n\n  \u003cspan class=\"hljs-attr\"\u003esynchronize\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eNODE_ENV\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e\"dev\"\u003c/span\u003e ? \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e : \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n\u003cspan class=\"hljs-comment\"\u003e//logging logs sql command on the treminal\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003elogging\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eNODE_ENV\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e\"dev\"\u003c/span\u003e ? \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e : \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eentities\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eMovie\u003c/span\u003e],\n  \u003cspan class=\"hljs-attr\"\u003emigrations\u003c/span\u003e: [__dirname + \u003cspan class=\"hljs-string\"\u003e\"/migration/*.ts\"\u003c/span\u003e],\n  \u003cspan class=\"hljs-attr\"\u003esubscribers\u003c/span\u003e: [],\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eEntities\u003c/h1\u003e\n\u003cp\u003eì´ê²ƒë“¤ì€ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì˜ êµ¬ì¡°ë¥¼ ì •ì˜í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003ch1\u003eì‚¬ìš©ì ì—”í„°í‹°\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003eEntity\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003ePrimaryGeneratedColumn\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eCreateDateColumn\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eUpdateDateColumn\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"typeorm\"\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eEntity\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"users\"\u003c/span\u003e })\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e {\n  @\u003cspan class=\"hljs-title class_\"\u003ePrimaryGeneratedColumn\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"uuid\"\u003c/span\u003e)\n  \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003edefault\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eCreateDateColumn\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003ecreatedAt\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eUpdateDateColumn\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003eupdatedAt\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eì˜í™” ì—”í„°í‹°\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n  \u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eCreateDateColumn\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eEntity\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003ePrimaryGeneratedColumn\u003c/span\u003e,\n  \u003cspan class=\"hljs-title class_\"\u003eUpdateDateColumn\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"typeorm\"\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eEntity\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"movies\"\u003c/span\u003e })\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMovie\u003c/span\u003e {\n  @\u003cspan class=\"hljs-title class_\"\u003ePrimaryGeneratedColumn\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"uuid\"\u003c/span\u003e)\n  \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003edirector\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003eyear\u003c/span\u003e: number;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003erating\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eColumn\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003enullable\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e })\n  \u003cspan class=\"hljs-attr\"\u003ecast\u003c/span\u003e: string;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eCreateDateColumn\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003ecreatedAt\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n\n  @\u003cspan class=\"hljs-title class_\"\u003eUpdateDateColumn\u003c/span\u003e()\n  \u003cspan class=\"hljs-attr\"\u003eupdatedAt\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë‚˜ëŠ” uuidë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ rowidë‚˜ incremental ë“± ë‹¤ë¥¸ ê²ƒì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆê³ , í•„ë“œê°€ ë¹„ì–´ìˆì§€ ì•Šë„ë¡ í•˜ê¸° ìœ„í•´ nullable ì˜µì…˜ì„ falseë¡œ ì „ë‹¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003esrc/helpers/helpers.ts\u003c/p\u003e\n\u003cp\u003eEncrypt í´ë˜ìŠ¤ëŠ” ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ê³ , ë¡œê·¸ì¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ìœ„í•´ ë¹„êµí•˜ë©° í† í°ì„ ìƒì„±í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e jwt \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"jsonwebtoken\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e bcrypt \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"bcrypt\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"dotenv\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { payload } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../dto/user.dto\"\u003c/span\u003e;\n\ndotenv.\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-variable constant_\"\u003eJWT_SECRET\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e } = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eencrypt\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eencryptpass\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003epassword: string\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e bcrypt.\u003cspan class=\"hljs-title function_\"\u003ehashSync\u003c/span\u003e(password, \u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e);\n  }\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecomparepassword\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ehashPassword: string, password: string\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e bcrypt.\u003cspan class=\"hljs-title function_\"\u003ecompareSync\u003c/span\u003e(password, hashPassword);\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egenerateToken\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003epayload: payload\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e jwt.\u003cspan class=\"hljs-title function_\"\u003esign\u003c/span\u003e(payload, \u003cspan class=\"hljs-variable constant_\"\u003eJWT_SECRET\u003c/span\u003e, { \u003cspan class=\"hljs-attr\"\u003eexpiresIn\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"1d\"\u003c/span\u003e });\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eMiddleware\u003c/h1\u003e\n\u003ch1\u003eError Handling\u003c/h1\u003e\n\u003cp\u003esrc/middlewares/error.middleware.tsì—ì„œ ì „ì—­ ì˜¤ë¥˜ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì„¤ì •í•´ë³´ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNextFunction\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eerrorHandler\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\n  error: \u003cspan class=\"hljs-built_in\"\u003eError\u003c/span\u003e,\n  req: Request,\n  res: Response,\n  next: NextFunction\n\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`Error: \u003cspan class=\"hljs-subst\"\u003e${error.message}\u003c/span\u003e`\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ë‚´ë¶€ ì„œë²„ ì˜¤ë¥˜\"\u003c/span\u003e });\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë¯¸ë“¤ì›¨ì–´\u003c/h1\u003e\n\u003cp\u003esrc/middlewares/auth.middleware.tsì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë¯¸ë“¤ì›¨ì–´ë¥¼ êµ¬í˜„í•˜ì‹­ì‹œì˜¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNextFunction\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e jwt \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"jsonwebtoken\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"dotenv\"\u003c/span\u003e;\ndotenv.\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e();\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eauthentification\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\n  req: Request,\n  res: Response,\n  next: NextFunction\n\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e header = req.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthorization\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!header) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e401\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ì¸ê°€ë˜ì§€ ì•ŠìŒ\"\u003c/span\u003e });\n  }\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e token = header.\u003cspan class=\"hljs-title function_\"\u003esplit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\" \"\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e];\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!token) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e401\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ì¸ê°€ë˜ì§€ ì•ŠìŒ\"\u003c/span\u003e });\n  }\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e decode = jwt.\u003cspan class=\"hljs-title function_\"\u003everify\u003c/span\u003e(token, process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eJWT_SECRET\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!decode) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e401\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ì¸ê°€ë˜ì§€ ì•ŠìŒ\"\u003c/span\u003e });\n  }\n  req[\u003cspan class=\"hljs-string\"\u003e\"currentUser\"\u003c/span\u003e] = decode;\n  \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìš”ì²­ì— ì¸ì¦ ì†ì„±ì„ í¬í•¨í•˜ëŠ” í—¤ë”ê°€ ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ê·¸ëŸ° ì†ì„±ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” ê¶Œí•œì´ ì—†ìŒì„ ë°˜í™˜í•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” íŠ¹ì • ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì†ì„±ì´ ìˆëŠ” ê²½ìš°ì—ëŠ” í•´ë‹¹ í† í°ì„ ì¶”ì¶œí•œ ë‹¤ìŒ ê·¸ í† í°ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í•œ ë¹„ë°€ í‚¤ë¡œ ë³µí˜¸í™”í•©ë‹ˆë‹¤. ê·¸ í† í°ì˜ ë°ì´í„°ê°€ ì˜¬ë°”ë¥¸ ê²½ìš° í† í°ì— ìˆëŠ” ë°ì´í„°ë¥¼ ìš”ì²­ì— ì „ë‹¬í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í† í°ì´ ë³µí˜¸í™”ë˜ì§€ ì•Šìœ¼ë©´ ë‹¤ìŒ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNextFunction\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../data-source\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../entity/User.entity\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eauthorization\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eroles: string[]\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003ereq\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eres\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003enext\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNextFunction\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userRepo = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepo.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003ewhere\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: req[\u003cspan class=\"hljs-string\"\u003e\" currentUser\"\u003c/span\u003e].\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e },\n    });\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(user);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!roles.\u003cspan class=\"hljs-title function_\"\u003eincludes\u003c/span\u003e(user.\u003cspan class=\"hljs-property\"\u003erole\u003c/span\u003e)) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"Forbidden\"\u003c/span\u003e });\n    }\n    \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n  };\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eì‚¬ìš©ì ë°ì´í„°ë¥¼ user.dto.tsë¡œ ì‚¬ìš©ì ì •ì˜í•˜ê¸°\u003c/h1\u003e\n\u003cp\u003eAPI ì‘ë‹µì— ì „ì†¡ëœ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë§ì¶¤ ì„¤ì •í•˜ëŠ” ë° user.dto.ts íŒŒì¼ì„ í™œìš©í•˜ê³ ì í•˜ëŠ” ê´€ì‹¬ì´ í‘œí˜„ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ íŠ¹ì • íŒŒì¼ì€ ì œê³µëœ ì½”ë“œ ìƒ˜í”Œì— ëª…ì‹œì ìœ¼ë¡œ í¬í•¨ë˜ì§€ëŠ” ì•Šì•˜ì§€ë§Œ, API ì‘ë‹µì„ ìœ„í•´ êµ¬ì¡°í™”í•˜ê³  ìˆ˜ì •í•  ë°ì´í„°ë¥¼ í˜•ì„±í•˜ëŠ” ê°•ë ¥í•œ ë„êµ¬ë¡œ ì‘ìš©í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003euser.dto.tsì´ ë¬´ì—‡ì¸ê°€ìš”?\u003c/h2\u003e\n\u003cp\u003euser.dto.ts íŒŒì¼ì€ Data Transfer Objectì˜ ì•½ìë¡œ, APIë¡œë¶€í„° ì‘ë‹µìœ¼ë¡œ ì „ì†¡ë˜ê¸° ì „ ì‚¬ìš©ì ë°ì´í„°ì˜ í˜•ì‹ê³¼ ë‚´ìš©ì„ ì •ë°€í•˜ê²Œ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì´ íŒŒì¼ ì•ˆì— íŠ¹ì • ì¸í„°í˜ì´ìŠ¤, êµ¬ì¡° ë˜ëŠ” ë³€í™˜ ë¡œì§ì„ ì •ì˜í•¨ìœ¼ë¡œì¨, ê°œë°œìëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ ë˜ëŠ” APIë¥¼ ì‚¬ìš©í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”êµ¬ ì‚¬í•­ê³¼ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ë§ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¼ë¶€ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë³´ì•ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003euser.dto.ts í™œìš©í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eë‹¤ìŒì€ user.dto.ts íŒŒì¼ì„ êµ¬ì¡°í™”í•˜ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserResponce\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: string;\n  \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: string;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eì‚¬ìš© ë°©ë²•\u003c/h2\u003e\n\u003cp\u003eAPI ì‘ë‹µì—ì„œ ì‚¬ìš©ì ë°ì´í„°ì˜ ì‚¬ìš©ì ì •ì˜ê°€ í•„ìš”í•œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” user.dto.ts íŒŒì¼ì„ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‘ë‹µìœ¼ë¡œ ë³´ë‚¼ ì›í•˜ëŠ” í˜•ì‹ì— ë§ëŠ” UserDTO ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬ì¡°ë¥¼ ì •ì˜í•œ í›„ ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003eì´ ì ‘ê·¼ ë°©ì‹ì€ API ì‘ë‹µì„ íŠ¹ì • ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ìœ ì—°í•˜ê²Œ ì¡°ì •í•˜ì—¬ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ìƒí˜¸ ìš´ìš©ì„±ê³¼ íš¨ìœ¨ì„±ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eí”„ë¡œì íŠ¸ì— ë§ê²Œ user.dto.ts íŒŒì¼ì„ í†µí•© ë° ì¡°ì •í•˜ê³ , API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ í”„ë¡œì íŠ¸ì˜ ê²½ìš°, ì €ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í–ˆì„ ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../data-source\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../entity/User.entity\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { encrypt } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../helpers/encrypt\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUserResponce\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../dto/user.dto\"\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// ì˜¬ë°”ë¥¸ ê²½ë¡œì—ì„œ UserDtoë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e cache \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"memory-cache\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esignup\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { name, email, password, role } = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e encryptedPassword = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e encrypt.\u003cspan class=\"hljs-title function_\"\u003eencryptpass\u003c/span\u003e(password);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e();\n    user.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e = name;\n    user.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e = email;\n    user.\u003cspan class=\"hljs-property\"\u003epassword\u003c/span\u003e = encryptedPassword;\n    user.\u003cspan class=\"hljs-property\"\u003erole\u003c/span\u003e = role;\n\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userRepository = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003esave\u003c/span\u003e(user);\n    \n    \u003cspan class=\"hljs-comment\"\u003e// ì‘ë‹µìœ¼ë¡œ ë³´ë‚´ëŠ” ë°ì´í„° êµ¬ì¡°í™”ë¥¼ ìœ„í•´ UserResponse DTO ì‚¬ìš©\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userDataSent = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserResponce\u003c/span\u003e();\n    userDataSent.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e = user.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e;\n    userDataSent.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e= user.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e;\n    userDataSent.\u003cspan class=\"hljs-property\"\u003erole\u003c/span\u003e = user.\u003cspan class=\"hljs-property\"\u003erole\u003c/span\u003e;\n    \n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e token = encrypt.\u003cspan class=\"hljs-title function_\"\u003egenerateToken\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: user.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e });\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res\n      .\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤\"\u003c/span\u003e, token, userDataSent });\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUserResponse í´ë˜ìŠ¤ê°€ UserController íŒŒì¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ê°€ì ¸ì™€ì§€ê³  ì†ì„±ë“¤ì´ API ì‘ë‹µì— ì „ì†¡í•  ë°ì´í„°ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ì´ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì •í™•í•˜ê²Œ ì‚¬ìš©ì ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì»¨íŠ¸ë¡¤ëŸ¬\u003c/h1\u003e\n\u003cp\u003eì‚¬ìš©ì ë° ì˜í™” ì—”í‹°í‹°ì— ëŒ€í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œë¥¼ ì •ì˜í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cp\u003eì»¨íŠ¸ë¡¤ëŸ¬ëŠ” í´ë¼ì´ì–¸íŠ¸(ì¼ë°˜ì ìœ¼ë¡œ ì›¹ ë¸Œë¼ìš°ì €)ë¡œë¶€í„° ìˆ˜ì‹ í•œ ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³  ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ë¡œì§ì„ ì¡°ì •í•˜ëŠ” êµ¬ì„± ìš”ì†Œì…ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•˜ë©°, ì½”ë“œë¥¼ êµ¬ì„±í•˜ê³  ìœ ì§€ë³´ìˆ˜í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤. ìš°ë¦¬ì˜ getalluser ë° getmoviesì—ì„œ ìºì‹œ ë©”ëª¨ë¦¬ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë ¤ê³  í•˜ëŠ” ë°, ì¡´ì¬í•œë‹¤ë©´ ìºì‹œì—ì„œ ê°€ì ¸ì˜¤ê³ , ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ í›„ ìºì‹œì— ì¼ì • ì‹œê°„ ë™ì•ˆ ë„£ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eAuth Controller (src/controllers/Auth.controller.ts)\u003c/h1\u003e\n\u003ch2\u003eì‚¬ìš©ì ì»¨íŠ¸ë¡¤ëŸ¬ (src/controllers/user.controller.ts)\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../data-source\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../entity/User.entity\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { encrypt } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../helpers/encrypt\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e cache \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"memory-cache\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esignup\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { name, email, password, role } = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e encryptedPassword = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e encrypt.\u003cspan class=\"hljs-title function_\"\u003eencryptpass\u003c/span\u003e(password);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e();\n    user.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e = name;\n    user.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e = email;\n    user.\u003cspan class=\"hljs-property\"\u003epassword\u003c/span\u003e = encryptedPassword;\n    user.\u003cspan class=\"hljs-property\"\u003erole\u003c/span\u003e = role;\n\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userRepository = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003esave\u003c/span\u003e(user);\n\n    \u003cspan class=\"hljs-comment\"\u003e// userRepository.create({ Name, email, password });\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e token = encrypt.\u003cspan class=\"hljs-title function_\"\u003egenerateToken\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: user.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e });\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res\n      .\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"User created successfully\"\u003c/span\u003e, token, user });\n  }\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetUsers\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = cache.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"data\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (data) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"serving from cache\"\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({\n        data,\n      });\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"serving from db\"\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userRepository = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e users = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003efind\u003c/span\u003e();\n\n      cache.\u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"data\"\u003c/span\u003e, users, \u003cspan class=\"hljs-number\"\u003e6000\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: users,\n      });\n    }\n  }\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdateUser\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { id } = req.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { name, email } = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userRepository = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003ewhere\u003c/span\u003e: { id },\n    });\n    user.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e = name;\n    user.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e = email;\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003esave\u003c/span\u003e(user);\n    res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"udpdate\"\u003c/span\u003e, user });\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edeleteUser\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { id } = req.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userRepository = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003ewhere\u003c/span\u003e: { id },\n    });\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003eremove\u003c/span\u003e(user);\n    res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ok\"\u003c/span\u003e });\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eì˜í™” ì»¨íŠ¸ë¡¤ëŸ¬ (src/controllers/movie.controller.ts)\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e cache \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"memory-cache\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../data-source\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eMovie\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../entity/Movies.entity\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMovieController\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetAllMovies\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = cache.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"data\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (data) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ìºì‹œì—ì„œ ì œê³µ ì¤‘\"\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({\n        data,\n      });\n    } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì œê³µ ì¤‘\"\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e movieRepository = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eMovie\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e movies = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e movieRepository.\u003cspan class=\"hljs-title function_\"\u003efind\u003c/span\u003e();\n      cache.\u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"data\"\u003c/span\u003e, movies, \u003cspan class=\"hljs-number\"\u003e10000\u003c/span\u003e);\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({\n        \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: movies,\n      });\n    }\n  }\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreateMovie\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { title, description, director, year, rating, image, cast } =\n      req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e movie = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMovie\u003c/span\u003e();\n    movie.\u003cspan class=\"hljs-property\"\u003etitle\u003c/span\u003e = title;\n    movie.\u003cspan class=\"hljs-property\"\u003edescription\u003c/span\u003e = description;\n    movie.\u003cspan class=\"hljs-property\"\u003edirector\u003c/span\u003e = director;\n    movie.\u003cspan class=\"hljs-property\"\u003eyear\u003c/span\u003e = year;\n    movie.\u003cspan class=\"hljs-property\"\u003erating\u003c/span\u003e = rating;\n    movie.\u003cspan class=\"hljs-property\"\u003eimage\u003c/span\u003e = image;\n    movie.\u003cspan class=\"hljs-property\"\u003ecast\u003c/span\u003e = cast;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e movieRepository = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eMovie\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e movieRepository.\u003cspan class=\"hljs-title function_\"\u003esave\u003c/span\u003e(movie);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res\n      .\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ì˜í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤\"\u003c/span\u003e, movie });\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdateMovie\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { id } = req.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { title, description, director, year, rating, image, cast } =\n      req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e movieRepository = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eMovie\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e movie = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e movieRepository.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003ewhere\u003c/span\u003e: { id },\n    });\n    movie.\u003cspan class=\"hljs-property\"\u003etitle\u003c/span\u003e = title;\n    movie.\u003cspan class=\"hljs-property\"\u003edescription\u003c/span\u003e = description;\n    movie.\u003cspan class=\"hljs-property\"\u003edirector\u003c/span\u003e = director;\n    movie.\u003cspan class=\"hljs-property\"\u003eyear\u003c/span\u003e = year;\n    movie.\u003cspan class=\"hljs-property\"\u003erating\u003c/span\u003e = rating;\n    movie.\u003cspan class=\"hljs-property\"\u003eimage\u003c/span\u003e = image;\n    movie.\u003cspan class=\"hljs-property\"\u003ecast\u003c/span\u003e = cast;\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e movieRepository.\u003cspan class=\"hljs-title function_\"\u003esave\u003c/span\u003e(movie);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res\n      .\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ì˜í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤\"\u003c/span\u003e, movie });\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edeleteMovie\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { id } = req.\u003cspan class=\"hljs-property\"\u003eparams\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e movieRepository = \u003cspan class=\"hljs-title class_\"\u003eAppDataSource\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetRepository\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eMovie\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e movie = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e movieRepository.\u003cspan class=\"hljs-title function_\"\u003efindOne\u003c/span\u003e({\n      \u003cspan class=\"hljs-attr\"\u003ewhere\u003c/span\u003e: { id },\n    });\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e movieRepository.\u003cspan class=\"hljs-title function_\"\u003eremove\u003c/span\u003e(movie);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res\n      .\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e)\n      .\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"ì˜í™”ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤\"\u003c/span\u003e, movie });\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eì‚¬ìš©ì ë¼ìš°íŒ…\u003c/h1\u003e\n\u003cp\u003esrc/routes/user.routes.ts íŒŒì¼ì— ì‚¬ìš©ì ê´€ë¦¬ì™€ ê´€ë ¨ëœ ë¼ìš°íŠ¸ë¥¼ ì •ì˜í•˜ì‹­ì‹œì˜¤:\u003c/p\u003e\n\u003cp\u003eë¼ìš°íŠ¸ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ë‹¤ì–‘í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ íŠ¹ì • ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆëŠ” íŠ¹ì • URL ë˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê°€ë¦¬í‚µë‹ˆë‹¤. ë¼ìš°íŠ¸ëŠ” ìˆ˜ì‹ ëœ HTTP ìš”ì²­ì— ëŒ€í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‘ë‹µí•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ë° ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e express \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { authentification } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../middleware/authentification\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../controllers/user.controllers\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { authorization } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../middleware/authorization\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAuthController\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../controllers/auth.controller\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e = express.\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e();\n\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\"/users\"\u003c/span\u003e,\n  authentification,\n  \u003cspan class=\"hljs-title function_\"\u003eauthorization\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\"admin\"\u003c/span\u003e]),\n  \u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egetUsers\u003c/span\u003e\n);\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\"/profile\"\u003c/span\u003e,\n  authentification,\n  \u003cspan class=\"hljs-title function_\"\u003eauthorization\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"admin\"\u003c/span\u003e]),\n  \u003cspan class=\"hljs-title class_\"\u003eAuthController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egetProfile\u003c/span\u003e\n);\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/signup\"\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003esignup\u003c/span\u003e);\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/login\"\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eAuthController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003elogin\u003c/span\u003e);\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\"/update/:id\"\u003c/span\u003e,\n  authentification,\n  \u003cspan class=\"hljs-title function_\"\u003eauthorization\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"admin\"\u003c/span\u003e]),\n  \u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eupdateUser\u003c/span\u003e\n);\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\"/delete/:id\"\u003c/span\u003e,\n  authentification,\n  \u003cspan class=\"hljs-title function_\"\u003eauthorization\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\"admin\"\u003c/span\u003e]),\n  \u003cspan class=\"hljs-title class_\"\u003eUserController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edeleteUser\u003c/span\u003e\n);\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e userRouter };\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eì˜í™” ë¼ìš°íŠ¸\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e express \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { authentification } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../middleware/authentification\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eMovieController\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../controllers/movie.controllers\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { authorization } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../middleware/authorization\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e = express.\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e();\n\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/movies\"\u003c/span\u003e, authentification, \u003cspan class=\"hljs-title class_\"\u003eMovieController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egetAllMovies\u003c/span\u003e);\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/movies\"\u003c/span\u003e, authentification, \u003cspan class=\"hljs-title class_\"\u003eMovieController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecreateMovie\u003c/span\u003e);\n\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eput\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\"/movies/:id\"\u003c/span\u003e,\n  authentification,\n  \u003cspan class=\"hljs-title function_\"\u003eauthorization\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\"admin\"\u003c/span\u003e]),\n  \u003cspan class=\"hljs-title class_\"\u003eMovieController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eupdateMovie\u003c/span\u003e\n);\n\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\"/movies/:id\"\u003c/span\u003e,\n  authentification,\n  \u003cspan class=\"hljs-title function_\"\u003eauthorization\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\"admin\"\u003c/span\u003e]),\n  \u003cspan class=\"hljs-title class_\"\u003eMovieController\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edeleteMovie\u003c/span\u003e\n);\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e movieRouter };\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë¯¸ë“¤ì›¨ì–´ ìˆœì„œ ì„¤ì •\u003c/h1\u003e\n\u003cp\u003eExpress.jsëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ì •ì˜ëœ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. ë¼ìš°íŠ¸ ì •ì˜ ì‹œì— ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë°°ì¹˜í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì˜ˆë¥¼ ë“¤ì–´ ì‚¬ìš©ì ë¼ìš°íŠ¸ì˜ ê²½ìš°, ìš°ë¦¬ëŠ” ë‘ ê°œì˜ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ì¸ authenticateì™€ authorizeê°€ ìˆìŠµë‹ˆë‹¤. authenticateëŠ” ì‚¬ìš©ìì˜ ì‹ ì›ì„ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— ë¨¼ì € ì™€ì•¼ í•©ë‹ˆë‹¤. authorizeëŠ” ê·¸ ë‹¤ìŒì— ìœ„ì¹˜í•˜ì—¬ ì‚¬ìš©ìê°€ ì ì ˆí•œ ì—­í• ì„ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì´ì£¼\u003c/h1\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” ì—”í‹°í‹°ì— ëŒ€í•œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•˜ê³  ì‹¤í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¡œì¨ í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ ìƒì„±ë©ë‹ˆë‹¤. ë¬¸ì„œì— ë‚˜ì™€ ìˆëŠ” ëŒ€ë¡œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ ëª…ë ¹ì–´ëŠ” src/migration ë””ë ‰í† ë¦¬ì— ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤. ìƒì„±ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ì„ í¸ì§‘í•˜ì—¬ í…Œì´ë¸” êµ¬ì¡°ë¥¼ ì •ì˜í•˜ê³  ì•„ë˜ ì½”ë“œì— ë‚˜ì™€ ìˆëŠ” ëŒ€ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003etypeorm \u003cspan class=\"hljs-attr\"\u003emigration\u003c/span\u003e:create ./migrations/users\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eMigrationInterface\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eQueryRunner\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"typeorm\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUser1698321500514\u003c/span\u003e implements \u003cspan class=\"hljs-title class_\"\u003eMigrationInterface\u003c/span\u003e {\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eup\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003equeryRunner\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eQueryRunner\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e {\n\u003cspan class=\"hljs-comment\"\u003e// ì—¬ê¸°ì— ì§ì ‘ ì¶”ê°€í•  ë¶€ë¶„\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e queryRunner.\u003cspan class=\"hljs-title function_\"\u003equery\u003c/span\u003e(\n      \u003cspan class=\"hljs-string\"\u003e` \n          --í…Œì´ë¸” ì •ì˜\n          CREATE TABLE \"users\"  (\n            \"id\" uuid NOT NULL DEFAULT uuid_generate_v4(),\n            \"name\" character varying NOT NULL,\n            \"email\" character varying NOT NULL,\n            \"password\" character varying NOT NULL,\n            \"role\"  character varying NOT NULL DEFAULT 'user',\n            \"createdAt\" TIMESTAMP NOT NULL DEFAULT now(),\n            \"updatedAt\" TIMESTAMP NOT NULL DEFAULT now(),\n            CONSTRAINT \"PK_cace4a159ff9f2512dd42373760\" PRIMARY KEY (\"id\")\n          )\n\n          \n          \n          \n          \n          `\u003c/span\u003e\n    ),\n      \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e;\n  }\n\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edown\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003equeryRunner\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eQueryRunner\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e {\n\u003cspan class=\"hljs-comment\"\u003e// ê·¸ë¦¬ê³  ì´ ë¶€ë¶„\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e queryRunner.\u003cspan class=\"hljs-title function_\"\u003equery\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`DROP TABLE \"users\"`\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eMigrationInterface\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eQueryRunner\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"typeorm\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eMovie1698321512351\u003c/span\u003e implements \u003cspan class=\"hljs-title class_\"\u003eMigrationInterface\u003c/span\u003e {\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eup\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003equeryRunner\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eQueryRunner\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e queryRunner.\u003cspan class=\"hljs-title function_\"\u003equery\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`\n        --í…Œì´ë¸” ì •ì˜\n        CREATE TABLE \"movies\"  (\n            \"id\" uuid NOT NULL DEFAULT uuid_generate_v4(),\n            \"title\" character varying NOT NULL,\n            \"description\" character varying NOT NULL,\n            \"director\" character varying NOT NULL,\n            \"year\" integer NOT NULL,\n            \"rating\" character varying NOT NULL,\n            \"image\" character varying NOT NULL,\n            \"cast\" character varying NOT NULL,\n            \"createdAt\" TIMESTAMP NOT NULL DEFAULT now(),\n            \"updatedAt\" TIMESTAMP NOT NULL DEFAULT now(),\n            CONSTRAINT \"PK_1031171c13130102495201e3e20\" PRIMARY KEY (\"id\")\n          )\n          \n          \n          \n          \n          \n          `\u003c/span\u003e),\n      \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e;\n  }\n\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edown\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003equeryRunner\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eQueryRunner\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e queryRunner.\u003cspan class=\"hljs-title function_\"\u003equery\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`DROP TABLE \"movies\"`\u003c/span\u003e, \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e);\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eíŒ¨í‚¤ì§€ JSON íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e   \u003cspan class=\"hljs-string\"\u003e\"migration\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\" npm run typeorm migration:run -- -d ./src/data-source.ts\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003edata-source.ts íŒŒì¼ì€ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì„±ì´ ì €ì¥ëœ ìœ„ì¹˜ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eí…ŒìŠ¤íŠ¸\u003c/h1\u003e\n\u003cp\u003eAPIë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ Postman, cURL ë˜ëŠ” ë‹¤ë¥¸ HTTP í´ë¼ì´ì–¸íŠ¸ì™€ ê°™ì€ ë„êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. API ì—”ë“œí¬ì¸íŠ¸ì— ìš”ì²­ì„ ë³´ë‚´ì–´ ì œëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì˜¤ë¥˜ ì²˜ë¦¬\u003c/h1\u003e\n\u003cp\u003eì œê³µëœ errorHandler ë¯¸ë“¤ì›¨ì–´ì—ì„œ ì²˜ë¦¬ë˜ì§€ ì•Šì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ í•´ë‹¹ ì˜¤ë¥˜ê°€ ê¸°ë¡ë˜ê³  ì¼ë°˜ì ì¸ ì˜¤ë¥˜ ì‘ë‹µì´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì „ì†¡ë©ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©ì ì •ì˜í•˜ì—¬ ì˜¤ë¥˜ ì²˜ë¦¬ ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë§ºìŒë§\u003c/p\u003e\n\u003cp\u003eì´ë²ˆ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” TypeScript, Express.js ë° TypeORMì„ ì‚¬ìš©í•˜ì—¬ ê°•ë ¥í•œ REST APIë¥¼ ë§Œë“œëŠ” ì—¬ì •ì— ì¶œë°œí–ˆìŠµë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ ì¸ì¦, ê¶Œí•œ ë¶€ì—¬ ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ê³¼ ê°™ì€ ê¸°ë³¸ ê°œë…ì„ íƒí—˜í–ˆìŠµë‹ˆë‹¤. ìš°ë¦¬ê°€ ë°°ìš´ ë‚´ìš©ì„ ë˜ì§šì–´ë´…ì‹œë‹¤:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eObject-Relational Mapping (ORM)ì˜ ì¤‘ìš”ì„±ê³¼ íŠ¹íˆ TypeScript ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ìƒí˜¸ ì‘ìš©ì„ ê°„ì†Œí™”í•˜ëŠ” TypeORMì— ëŒ€í•´ ì´í•´í–ˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eìºì‹±ì€ ë°ì´í„° ì•¡ì„¸ìŠ¤ ë° ê²€ìƒ‰ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¤ëŠ” ê¸°ìˆ ë¡œ ëª…ë£Œí•˜ê²Œ ì„¤ëª…ë˜ì—ˆìœ¼ë©° ì‹œìŠ¤í…œ ì„±ëŠ¥ì„ í–¥ìƒí–ˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eí”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê³  ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ê³  ì¤‘ìš”í•œ êµ¬ì„± íŒŒì¼ì„ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eì´ì œ ì´ ì§€ì‹ì„ ë°”íƒ•ìœ¼ë¡œ ê²¬ê³ í•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê¸°ì–µí•˜ì„¸ìš”, ì´ê²ƒì€ ì‹œì‘ì— ë¶ˆê³¼í•©ë‹ˆë‹¤. íƒí—˜í•  ê±°ëŒ€í•œ ì›¹ ê°œë°œ ì„¸ê³„ê°€ ê¸°ë‹¤ë¦¬ê³  ìˆìœ¼ë©° ë” ê¹Šì´ íŒŒê³ ë“¤ê³  ê³ ê¸‰ ì£¼ì œë¥¼ ë” íƒêµ¬í•˜ê³  API ê¸°ëŠ¥ì„ í™•ì¥í•˜ëŠ” ê²ƒì„ ì¥ë ¤í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ í•™ìŠµ ì—¬ì •ì— í•¨ê»˜í•´ ì£¼ì…”ì„œ ê¸°ì©ë‹ˆë‹¤. ê¶ê¸ˆí•œ ì ì´ ìˆê±°ë‚˜ í”¼ë“œë°±ì´ë‚˜ ê²½í—˜ì„ ê³µìœ í•˜ê³  ì‹¶ë‹¤ë©´ ë§ì„¤ì´ì§€ ë§ê³  ì—°ë½í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cp\u003eì›¹ ê°œë°œì˜ ëŠì„ì—†ì´ ë°œì „í•˜ëŠ” ì„¸ê³„ì—ì„œëŠ” í•­ìƒ ë°°ìš¸ ê²ƒì´ ë” ë§ê³  ë§Œë“¤ ê²ƒì´ ë” ë§ìŠµë‹ˆë‹¤. ê³„ì† ì½”ë”©í•˜ê³ , ê³„ì† íƒí—˜í•˜ê³ , ë†€ë¼ìš´ ê²ƒì„ ê³„ì† ë§Œë“¤ì–´ ë³´ì„¸ìš”. ì›¹ì€ ë‹¹ì‹ ì˜ ìº”ë²„ìŠ¤ì´ë©°, ë‹¹ì‹ ì´ ì•„í‹°ìŠ¤íŠ¸ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ íŠœí† ë¦¬ì–¼ì˜ ì¼ë¶€ê°€ ë˜ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œì˜ í”„ë¡œì íŠ¸ì—ì„œ í–‰ìš´ì„ ë¹•ë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003eì œ GitHubì—ì„œ ì „ì²´ í”„ë¡œì íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ê²ƒìœ¼ë¡œ ìš°ë¦¬ì˜ íŠœí† ë¦¬ì–¼ì„ ë§ˆì¹©ë‹ˆë‹¤. ìœ ìš©í•˜ê²Œ í™œìš©í•˜ì…¨ë‹¤ë©´ ë°•ìˆ˜ë¥¼ ì¹˜ê±°ë‚˜ ëŒ“ê¸€ì„ ë‚¨ê²¨ì£¼ì„¸ìš”. ì œì•ˆì´ë‚˜ í”¼ë“œë°±ì€ ì–¸ì œë‚˜ í™˜ì˜í•©ë‹ˆë‹¤. ë˜í•œ Twitter, LinkedIn, GitHubì—ì„œ ì €ì™€ ì†Œí†µí•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-20-BuildingaRESTAPIwithTypeScriptExpressTypeORMAuthenticationAuthorizationandPostgres"},"buildId":"t9N7vwmpvBMQnO2PSctoH","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>