<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Angular 애플리케이션과 Net Web API를 Auth0로 안전하게 보호하기 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Angular 애플리케이션과 Net Web API를 Auth0로 안전하게 보호하기 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="Angular 애플리케이션과 Net Web API를 Auth0로 안전하게 보호하기 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0" data-gatsby-head="true"/><meta name="twitter:title" content="Angular 애플리케이션과 Net Web API를 Auth0로 안전하게 보호하기 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-17 03:31" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cd012fc8787133d0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cd012fc8787133d0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/551-3069cf29fe274aab.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-985df180e46efe53.js" defer=""></script><script src="/_next/static/z1a6VTi5qHH9JJH7jaxL3/_buildManifest.js" defer=""></script><script src="/_next/static/z1a6VTi5qHH9JJH7jaxL3/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Angular 애플리케이션과 Net Web API를 Auth0로 안전하게 보호하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Angular 애플리케이션과 Net Web API를 Auth0로 안전하게 보호하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/assets/profile.jpg"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 17, 2024</span><span class="posts_reading_time__f7YPP">13<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><img src="/assets/img/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0_0.png"/>
<p>이 튜토리얼에서는 Angular 애플리케이션에 로그인 시스템을 추가하고 .Net Web API를 Auth0로 보호하는 방법을 배워보겠습니다.</p>
<p>먼저 무료 Auth0 계정을 생성하고 설정할 것입니다. 그 후 .Net 7 Web API를 생성하고 보호된 엔드포인트를 설정할 것입니다. 그런 다음 Angular 애플리케이션을 생성하고 JWT 베어러를 사용하여 Web API를 호출할 수 있는 로그인 시스템을 추가할 것입니다.</p>
<p>보안에 대해 잘 모르더라도, Auth0를 사용하면 보안 서비스를 처음부터 만들 필요 없이 응용 프로그램에 인증/권한 부여를 추가할 수 있는 좋은 방법입니다.</p>
<div class="content-ad"></div>
<h1>Auth0</h1>
<h2>Auth0 계정 생성</h2>
<p>https://auth0.com으로 이동하여 무료로 가입하고 계정을 설정하세요.</p>
<h2>Auth0 싱글 페이지 애플리케이션 구성</h2>
<div class="content-ad"></div>
<p>왼쪽 메뉴에서 Applications &gt; Applications로 이동하여 Default App을 선택하십시오. 설정 탭으로 이동하여 이름을 변경하십시오. 또한 새 응용 프로그램을 만들 수 있습니다.</p>
<p>설정에서 Angular 앱과 통신할 때 사용할 응용 프로그램 도메인, 클라이언트 ID 및 클라이언트 비밀번호를 확인할 수 있습니다.</p>
<p>앱 속성 아래로 스크롤하면 Application Type을 Single Page Application으로 변경할 수 있습니다.</p>
<p>Application URIs 섹션에서 Allowed Callback, Logout URLs 및 Allowed Web Origins에 URL http://localhost:4200/을 제공하십시오.</p>
<div class="content-ad"></div>
<p>http://localhost:4200/은 우리 Angular 애플리케이션의 로컬 URL이 되겠습니다.</p>
<h1>.Net 7 웹 API를 생성하고 보안 설정하기</h1>
<h2>새 .Net Web API 프로젝트 만들기</h2>
<p>Visual Studio를 열고 ASP.NET Core Web API 프로젝트 템플릿에서 새 프로젝트를 만드세요. .Net 6 프레임워크를 선택하세요. 이 튜토리얼에서는 이 템플릿에서 생성된 WeatherForcastController를 사용할 것입니다. 이 컨트롤러에는 사용 예제에서 사용할 HTTP Get 엔드포인트가 포함되어 있습니다.</p>
<div class="content-ad"></div>
<p>프로젝트를 생성한 후 프로그램을 실행하고 https://localhost:7202/weatherforecast (포트 번호가 다를 수 있습니다)으로 JSON 형식의 WeatherForecast 목록이 반환되는지 확인해주세요.</p>
<h2>교차 도메인 요청 허용</h2>
<p>우리의 Angular 애플리케이션에서 모든 HTTP 요청을 허용해야 합니다. Program.cs 또는 Startup.cs 파일을 열어주세요.</p>
<p>builder.Services를 services로 바꿔주세요. 그리고 var builder = WebApplication.CreateBuilder(args); 다음에 services 변수를 만들어주세요:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">var</span> services = builder.<span class="hljs-property">Services</span>;<span class="hljs-title class_">Copy</span>
</code></pre>
<p>그 후에, CORS 미들웨어를 추가하세요.</p>
<pre><code class="hljs language-js">app.<span class="hljs-title class_">UseCors</span>(<span class="hljs-string">&quot;CorsPolicy&quot;</span>);<span class="hljs-title class_">Copy</span>
</code></pre>
<p>CORS 정책을 등록하고 http://localhost:4200 출처를 허용하세요.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">services.<span class="hljs-title class_">AddCors</span>(<span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span>
{
    options.<span class="hljs-title class_">AddPolicy</span>(<span class="hljs-string">&quot;CorsPolicy&quot;</span>, <span class="hljs-function"><span class="hljs-params">builder</span> =&gt;</span> builder
    .<span class="hljs-title class_">WithOrigins</span>(<span class="hljs-string">&quot;http://localhost:4200&quot;</span>)
    .<span class="hljs-title class_">AllowAnyMethod</span>()
    .<span class="hljs-title class_">AllowAnyHeader</span>()
    .<span class="hljs-title class_">AllowCredentials</span>());
});
</code></pre>
<h2>Auth0에 API 추가하기</h2>
<p>Auth0 계정으로 돌아가서 Applications &amp; APIs로 이동하여 새 API를 생성하세요.</p>
<p>API 이름과 식별자 URL(https://localhost:7202/로 포트 번호를 변경)을 입력하세요. RS256 알고리즘을 선택하세요.</p>
<div class="content-ad"></div>
<h2>API 엔드포인트 보안하기</h2>
<p>이제 우리는 엔드포인트를 보안하고, 인증된 사용자만이 이에 액세스하고 반환된 콘텐츠와 함께 성공적인 HTTP 응답을 받을 수 있도록하려고합니다.</p>
<p>먼저, Get() 메서드에 Microsoft.AspNetCore.Authorization에서 [Authorize] 속성을 추가하십시오.</p>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">using</span> Microsoft.AspNetCore.Authorization;
<span class="hljs-keyword">using</span> Microsoft.AspNetCore.Mvc;
</code></pre>
<div class="content-ad"></div>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">namespace</span> <span class="hljs-title">Auth0WebApi.Controllers</span>
{
    [<span class="hljs-meta">ApiController</span>]
    [<span class="hljs-meta">Route(<span class="hljs-string">&quot;[controller]&quot;</span>)</span>]
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">WeatherForecastController</span> : <span class="hljs-title">ControllerBase</span>
    {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span>[] Summaries = <span class="hljs-keyword">new</span>[]
        {
            <span class="hljs-string">&quot;Freezing&quot;</span>, <span class="hljs-string">&quot;Bracing&quot;</span>, <span class="hljs-string">&quot;Chilly&quot;</span>, <span class="hljs-string">&quot;Cool&quot;</span>, <span class="hljs-string">&quot;Mild&quot;</span>, <span class="hljs-string">&quot;Warm&quot;</span>, <span class="hljs-string">&quot;Balmy&quot;</span>, <span class="hljs-string">&quot;Hot&quot;</span>, <span class="hljs-string">&quot;Sweltering&quot;</span>, <span class="hljs-string">&quot;Scorching&quot;</span>
        };
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ILogger&lt;WeatherForecastController&gt; _logger;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">WeatherForecastController</span>(<span class="hljs-params">ILogger&lt;WeatherForecastController&gt; logger</span>)</span>
        {
            _logger = logger;
        }
        [<span class="hljs-meta">HttpGet</span>]
        [<span class="hljs-meta">Authorize</span>]
        <span class="hljs-function"><span class="hljs-keyword">public</span> IEnumerable&lt;WeatherForecast&gt; <span class="hljs-title">Get</span>()</span>
        {
            <span class="hljs-keyword">return</span> Enumerable.Range(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>).Select(index =&gt; <span class="hljs-keyword">new</span> WeatherForecast
            {
                Date = DateTime.Now.AddDays(index),
                TemperatureC = Random.Shared.Next(<span class="hljs-number">-20</span>, <span class="hljs-number">55</span>),
                Summary = Summaries[Random.Shared.Next(Summaries.Length)]
            })
            .ToArray();
        }
    }
}
</code></pre>
<p>우리는 ConfigurationManager를 통해 Audience 및 Domain 값을 액세스하고 싶어해요.</p>
<p>따라서 appsettings.json에 Audience와 Domain을 추가해주세요.</p>
<pre><code class="hljs language-json"><span class="hljs-attr">&quot;Auth0&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">&quot;Audience&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://localhost:7202/&quot;</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">&quot;Domain&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;auth0tuto.eu.auth0.com&quot;</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<div class="content-ad"></div>
<p>그러면 &quot;테이블&quot; 태그를 Markdown 형식으로 변경해주세요.</p>
<p>| 아이템 | 가격 |
|---|---|
| 사과 | 1.99 |
| 바나나 | 0.99 |
| 수박 | 5.99 |</p>
<div class="content-ad"></div>
<p>아래 코드를 추가하여 인증을 구성하십시오.</p>
<pre><code class="hljs language-js">services.<span class="hljs-title class_">AddAuthentication</span>(<span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span>
{
    options.<span class="hljs-property">DefaultAuthenticateScheme</span> = <span class="hljs-title class_">JwtBearerDefaults</span>.<span class="hljs-property">AuthenticationScheme</span>;
    options.<span class="hljs-property">DefaultChallengeScheme</span> = <span class="hljs-title class_">JwtBearerDefaults</span>.<span class="hljs-property">AuthenticationScheme</span>;
}).<span class="hljs-title class_">AddJwtBearer</span>(<span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span>
{
    options.<span class="hljs-property">Authority</span> = $<span class="hljs-string">&quot;https://{auth0.Domain}/&quot;</span>;
    options.<span class="hljs-property">Audience</span> = auth0.<span class="hljs-property">Audience</span>;
});
</code></pre>
<p>저희는 인증 토큰을 활용한 JWT 베어러 인증을 사용할 것입니다. 해당 인증은 Authorization HTTP 헤더에서 추출되고 유효성이 검사될 것입니다.</p>
<p>토큰을 유효성 검사하려면, Auth0 애플리케이션에서 구성한 도메인을 지정해야 합니다. 이 정보는 설정에서 찾을 수 있으며, 방금 생성한 Auth0 API의 식별자인 Audience(청중)도 지정해야 합니다.</p>
<div class="content-ad"></div>
<p>다음과 같이 AuthenticationMiddleware을 추가해 주세요:</p>
<pre><code class="hljs language-js">app.<span class="hljs-title class_">UseAuthentication</span>();<span class="hljs-title class_">Copy</span>
</code></pre>
<p>프로그램을 다시 실행하면 HTTP ERROR 401 (Unauthorized)를 받게 됩니다.</p>
<h1>Angular 애플리케이션을 만들어 로그인 시스템을 구축하세요</h1>
<div class="content-ad"></div>
<h2>Angular CLI 설치</h2>
<p>이미 시스템에 Angular이 설치되어 있는 경우, 이 단계를 건너뛰세요.</p>
<p>먼저, Node.js를 다운로드하고 설치해야 합니다 - ` https://nodejs.org/en/download</p>
<p>그런 다음, 명령 프롬프트에 이 명령을 입력하여 Angular CLI를 설치하세요.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">npm install -g @angular/cli
</code></pre>
<p>만약 Windows를 사용 중이라면, PowerShell 스크립트 실행을 허용하기 위해 다음 명령을 실행해주세요.</p>
<pre><code class="hljs language-js"><span class="hljs-title class_">Set</span>-<span class="hljs-title class_">ExecutionPolicy</span> -<span class="hljs-title class_">Scope</span> <span class="hljs-title class_">CurrentUser</span> -<span class="hljs-title class_">ExecutionPolicy</span> <span class="hljs-title class_">RemoteSigned</span>
</code></pre>
<h2>Angular 애플리케이션 생성하기</h2>
<div class="content-ad"></div>
<p>새로운 Angular 애플리케이션을 생성하려면 ng new CLI 명령어를 실행하세요.</p>
<pre><code class="hljs language-js">ng <span class="hljs-keyword">new</span> auth0-angular-appCopy
</code></pre>
<p>앱에 포함할 기본 기능을 선택하세요.</p>
<p>애플리케이션이 생성되면 ng serve -o를 실행하여 브라우저에서 앱을 실행하고 엽니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">ng serve --oCopy
</code></pre>
<p>이제 기본 Angular 애플리케이션을 실행하는 것을 확인할 수 있습니다.</p>
<h2>Auth0 SDK 설치</h2>
<p>좋아하는 텍스트 편집기나 IDE로 애플리케이션을 열어보세요. 여기서는 VS Code를 사용하겠습니다.</p>
<div class="content-ad"></div>
<p>프로젝트 디렉토리 내에서 터미널을 열고 Auth0 Angular SDK를 설치하려면 다음 명령을 실행해주세요.</p>
<pre><code class="hljs language-js">npm install @auth0/auth0-angularCopy
</code></pre>
<p>app.module.ts를 열어서 AuthModule 패키지를 가져와서 AuthModule.forRoot를 호출하여 imports 목록에 추가해주세요. Auth0 애플리케이션 설정에서 Domain 및 ClientId 값을 복사해주세요.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/platform-browser&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@auth0/auth0-angular&#x27;</span>
</code></pre>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppRoutingModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./app-routing.module&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./app.component&#x27;</span>;
@<span class="hljs-title class_">NgModule</span>({
  <span class="hljs-attr">declarations</span>: [<span class="hljs-title class_">AppComponent</span>],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">BrowserModule</span>,
    <span class="hljs-title class_">AppRoutingModule</span>,
    <span class="hljs-title class_">HttpClientModule</span>,
    <span class="hljs-title class_">AuthModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">domain</span>: <span class="hljs-string">&#x27;auth0tuto.eu.auth0.com&#x27;</span>,
      <span class="hljs-attr">clientId</span>: <span class="hljs-string">&#x27;aJZmQXUxWhl4arU5ZhN2FJ38YUQgNYbf&#x27;</span>
    }),
  ],
  <span class="hljs-attr">providers</span>: [],
  <span class="hljs-attr">bootstrap</span>: [<span class="hljs-title class_">AppComponent</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<h2>로그인/로그아웃 추가하기</h2>
<p>app.component.ts 파일을 열고 AuthService 클래스에 대한 종속성을 생성자에 추가하고 &#x27;@auth0/auth0-angular&#x27;에서 AuthService를 가져와주세요.</p>
<p>귀하의 코드는 다음과 같아야 합니다:```</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@auth0/auth0-angular&#x27;</span>;
</code></pre>
<pre><code class="hljs language-js">@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">&#x27;app-root&#x27;</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">&#x27;./app.component.html&#x27;</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">&#x27;./app.component.css&#x27;</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> {
  title = <span class="hljs-string">&#x27;auth0-angular-app&#x27;</span>;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">public auth: AuthService</span>) {}
}
</code></pre>
<p>이제 app.component.html 파일을 열어서 배너에 Twitter 버튼 바로 전에 다음 코드를 추가하세요.</p>
<pre><code class="hljs language-js">&lt;ng-template #loggedOut&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn-login&quot;</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">&quot;auth.loginWithRedirect()&quot;</span>&gt;</span>
    로그인
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/ng-template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn-login&quot;</span> (<span class="hljs-attr">click</span>)=<span class="hljs-string">&quot;auth.logout()&quot;</span> *<span class="hljs-attr">ngIf</span>=<span class="hljs-string">&quot;auth.isAuthenticated$ | async; else loggedOut&quot;</span>&gt;</span>
  로그아웃
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<div class="content-ad"></div>
<p>loginWithRedirect() 메소드를 호출하면 사용자가 Auth0 Universal 로그인 페이지로 리디렉션되어 해당 페이지에서 애플리케이션으로 이동하기 전에 로그인 또는 회원 가입을 할 수 있습니다.</p>
<p>그런 다음, 다음 CSS를 <code>&lt;style&gt;&lt;/style&gt;</code> 사이에 추가해주세요.</p>
<pre><code class="hljs language-js">.<span class="hljs-property">btn</span>-login {
  border-<span class="hljs-attr">radius</span>: 4px;
  <span class="hljs-attr">border</span>: 1px solid #eee;
  background-<span class="hljs-attr">color</span>: #fafafa;
  <span class="hljs-attr">color</span>: #<span class="hljs-number">333</span>;
  <span class="hljs-attr">padding</span>: 10px 25px;
  text-<span class="hljs-attr">decoration</span>: none;
  <span class="hljs-attr">cursor</span>: pointer;
}
</code></pre>
<p>이제 배너에 로그인 버튼이 표시될 것입니다.</p>
<div class="content-ad"></div>
<p><code>div class = &quot;content&quot; role = &quot;main&quot;</code>와 <code>/div</code> 사이의 모든 것을 삭제하고 다음 코드를 복사하여 붙여넣으십시오.</p>
<pre><code class="hljs language-js">&lt;p *ngFor=<span class="hljs-string">&quot;let item of weatherForecasts&quot;</span>&gt;
  {item.<span class="hljs-property">date</span>} |
  {item.<span class="hljs-property">temperatureC</span>} °C |
  {item.<span class="hljs-property">temperatureF</span>} °F |
  {item.<span class="hljs-property">summary</span>}
&lt;/p&gt;
</code></pre>
<h2>회원 가입</h2>
<p>로그인 버튼을 클릭하세요.</p>
<div class="content-ad"></div>
<p>지금은 Auth0 로그인 페이지로 이동되었습니다.</p>
<p>새 계정을 만들려면 가입하세요. 계정을 확인하기 위해 이메일을 받아야 합니다.</p>
<p>이제 Auth0 대시보드로 돌아가서, 왼쪽 메뉴에서 사용자 관리 <code>사용자</code>로 이동하여 사용자가 생성되었는지 확인하세요.</p>
<h2>로그아웃</h2>
<div class="content-ad"></div>
<p>가입한 후에는 로그인 버튼이 로그아웃 버튼으로 대체된 것을 볼 수 있습니다.</p>
<p>로그아웃하려면 클릭하십시오.</p>
<h2>로그인</h2>
<p>이제 다시 로그인 버튼을 클릭하여 응용 프로그램에 로그인하십시오.</p>
<div class="content-ad"></div>
<p>사용자 로그인 시스템이 작동되었으니, 이제 보안된 웹 API에 HTTP 호출을 만들어 날씨 예보 목록을 가져와 표시하고 싶어요.</p>
<h2>HTTP 서비스 생성</h2>
<p>새 서비스를 만들기 위해 다음 Angular CLI 명령어를 실행해줘.</p>
<pre><code class="hljs language-js">ng g s weatherforecastCopy
</code></pre>
<div class="content-ad"></div>
<p>app.module.ts에 WeatherForecastService와 HttpClientModule를 providers 배열에 추가해주세요. &#x27;./weatherforecast.service&#x27;에서 WeatherForecastService를 import하고, @angular/common/http에서 HttpClientModule를 import해주세요.</p>
<p>api.service.ts를 열어서 constructor에 HttpClient 의존성을 추가하고, @angular/common/http에서 클래스를 import하고 get() 메소드를 생성해주세요.</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/common/http&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rxjs&#x27;</span>;

<span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> http: HttpClient</span>) {}

<span class="hljs-title function_">get</span>(): <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-built_in">number</span>&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-string">&quot;https://localhost:7202/weatherforecast/&quot;</span>);
}
</code></pre>
<p>이 메소드는 우리 Web API의 weatherforecast 엔드포인트로 GET http 호출을 하게 됩니다.</p>
<div class="content-ad"></div>
<p>귀하는 다음과 같이 서비스 클래스를 작성하셔야 합니다:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HttpClient</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/common/http&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;rxjs&#x27;</span>;
</code></pre>
<pre><code class="hljs language-js">@<span class="hljs-title class_">Injectable</span>({
  <span class="hljs-attr">providedIn</span>: <span class="hljs-string">&#x27;root&#x27;</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherForecastService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private http: HttpClient</span>) { }
  <span class="hljs-title function_">get</span>(): <span class="hljs-title class_">Observable</span>&lt;any[]&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">http</span>.<span class="hljs-property">get</span>&lt;any[]&gt;(<span class="hljs-string">&quot;https://localhost:7202/weatherforecast&quot;</span>);
  }
}
</code></pre>
<h2>날씨 예보 표시하기</h2>
<div class="content-ad"></div>
<p>app.components.ts로 돌아가서 생성자에 WeatherForecastService 종속성을 추가하고 ./weatherforecast.service에서 해당 클래스를 import하세요.</p>
<p>weatherForecasts 변수를 생성하고 초기화하세요.</p>
<pre><code class="hljs language-js"><span class="hljs-attr">weatherForecast</span>: any[] = [];
</code></pre>
<p>getWeatherForecasts() 메서드를 생성하여 날씨 예보 목록을 로드하세요.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-title function_">getWeatherForecasts</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">weatherForecastService</span>.<span class="hljs-title function_">get</span>().<span class="hljs-title function_">subscribe</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">weatherForecast</span> = data;
  })
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span>, <span class="hljs-title class_">OnInit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@auth0/auth0-angular&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WeatherForecastService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./weatherforecast.service&#x27;</span>;
</code></pre>
<pre><code class="hljs language-js">@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">&#x27;app-root&#x27;</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">&#x27;./app.component.html&#x27;</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">&#x27;./app.component.css&#x27;</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppComponent</span> implements <span class="hljs-title class_">OnInit</span>{
  title = <span class="hljs-string">&#x27;auth0-angular-app&#x27;</span>;
  <span class="hljs-attr">weatherForecasts</span>: any[] = [];
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    public auth: AuthService,
    private weatherForecastService: WeatherForecastService
  </span>) {}
  <span class="hljs-title function_">ngOnInit</span>(): <span class="hljs-keyword">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getWeatherForecasts</span>();
  }
  <span class="hljs-title function_">getWeatherForecasts</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">weatherForecastService</span>.<span class="hljs-title function_">get</span>().<span class="hljs-title function_">subscribe</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">weatherForecasts</span> = data;
    })
  }
}
</code></pre>
<h2>Add JWT to the HTTP requests</h2>
<div class="content-ad"></div>
<p>이전에 언급한 대로, 저희 웹 API는 HTTP 요청의 Authorization 헤더에서 JWT bearer를 디코딩하여 클라이언트의 엔드포인트 접근을 승인합니다.</p>
<p>Auth0 SDK를 사용하면 각 요청에 JWT를 수동으로 추가할 필요가 없습니다. 대신에, 우리를 대신해서 일을 처리해줄 Auth0 HTTP 인터셉터를 사용하겠습니다.</p>
<p>app.module.ts에서 AuthHttpInterceptor와 HTTP_INTERCEPTORS를 다음과 같이 providers 배열에 추가하세요:</p>
<pre><code class="hljs language-js"><span class="hljs-attr">providers</span>: [
  <span class="hljs-title class_">WeatherForecastService</span>,
  { <span class="hljs-attr">provide</span>: <span class="hljs-variable constant_">HTTP_INTERCEPTORS</span>, <span class="hljs-attr">useClass</span>: <span class="hljs-title class_">AuthHttpInterceptor</span>, <span class="hljs-attr">multi</span>: <span class="hljs-literal">true</span> },
],<span class="hljs-title class_">Copy</span>
</code></pre>
<div class="content-ad"></div>
<p>@angular/common/http에 HTTP_INTERCEPTORS와 @auth0/auth0-angular에 AuthHttpInterceptor을 추가해주세요.</p>
<p>AuthModule.forRoot()에서 audience와 httpInterceptor를 추가하고, 허용된 API 경로 목록에 API URL을 추가해주세요.</p>
<p>우리의 app.module.ts는 이제 다음과 같이 보입니다:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HttpClientModule</span>, <span class="hljs-variable constant_">HTTP_INTERCEPTORS</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/common/http&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/core&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@angular/platform-browser&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthHttpInterceptor</span>, <span class="hljs-title class_">AuthModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@auth0/auth0-angular&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">WeatherForecastService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./weatherforecast.service&#x27;</span>;
</code></pre>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppRoutingModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./app-routing.module&#x27;</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./app.component&#x27;</span>;
@<span class="hljs-title class_">NgModule</span>({
  <span class="hljs-attr">declarations</span>: [<span class="hljs-title class_">AppComponent</span>],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">BrowserModule</span>,
    <span class="hljs-title class_">AppRoutingModule</span>,
    <span class="hljs-title class_">HttpClientModule</span>,
    <span class="hljs-title class_">AuthModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">domain</span>: <span class="hljs-string">&#x27;auth0tuto.eu.auth0.com&#x27;</span>,
      <span class="hljs-attr">clientId</span>: <span class="hljs-string">&#x27;aJZmQXUxWhl4arU5ZhN2FJ38YUQgNYbf&#x27;</span>,
      <span class="hljs-attr">audience</span>: <span class="hljs-string">&#x27;https://localhost:7202/&#x27;</span>,
      <span class="hljs-attr">httpInterceptor</span>: {
        <span class="hljs-attr">allowedList</span>: [ <span class="hljs-string">&#x27;https://localhost:7202/*&#x27;</span> ],
      },
    }),
  ],
  <span class="hljs-attr">providers</span>: [
    <span class="hljs-title class_">WeatherForecastService</span>,
    { <span class="hljs-attr">provide</span>: <span class="hljs-variable constant_">HTTP_INTERCEPTORS</span>, <span class="hljs-attr">useClass</span>: <span class="hljs-title class_">AuthHttpInterceptor</span>, <span class="hljs-attr">multi</span>: <span class="hljs-literal">true</span> },
  ],
  <span class="hljs-attr">bootstrap</span>: [<span class="hljs-title class_">AppComponent</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<h1>모두 테스트하기</h1>
<p>이제 웹 API를 실행하고 Angular 애플리케이션에 로그인하세요.</p>
<p>이제 페이지에 표시되는 날씨 예보 목록을 볼 수 있어야 합니다.</p></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Angular 애플리케이션과 Net Web API를 Auth0로 안전하게 보호하기","description":"","date":"2024-05-17 03:31","slug":"2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0","content":"\n\n\u003cimg src=\"/assets/img/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0_0.png\" /\u003e\n\n이 튜토리얼에서는 Angular 애플리케이션에 로그인 시스템을 추가하고 .Net Web API를 Auth0로 보호하는 방법을 배워보겠습니다.\n\n먼저 무료 Auth0 계정을 생성하고 설정할 것입니다. 그 후 .Net 7 Web API를 생성하고 보호된 엔드포인트를 설정할 것입니다. 그런 다음 Angular 애플리케이션을 생성하고 JWT 베어러를 사용하여 Web API를 호출할 수 있는 로그인 시스템을 추가할 것입니다.\n\n보안에 대해 잘 모르더라도, Auth0를 사용하면 보안 서비스를 처음부터 만들 필요 없이 응용 프로그램에 인증/권한 부여를 추가할 수 있는 좋은 방법입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# Auth0\n\n## Auth0 계정 생성\n\nhttps://auth0.com으로 이동하여 무료로 가입하고 계정을 설정하세요.\n\n## Auth0 싱글 페이지 애플리케이션 구성\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n왼쪽 메뉴에서 Applications \u003e Applications로 이동하여 Default App을 선택하십시오. 설정 탭으로 이동하여 이름을 변경하십시오. 또한 새 응용 프로그램을 만들 수 있습니다.\n\n설정에서 Angular 앱과 통신할 때 사용할 응용 프로그램 도메인, 클라이언트 ID 및 클라이언트 비밀번호를 확인할 수 있습니다.\n\n앱 속성 아래로 스크롤하면 Application Type을 Single Page Application으로 변경할 수 있습니다.\n\nApplication URIs 섹션에서 Allowed Callback, Logout URLs 및 Allowed Web Origins에 URL http://localhost:4200/을 제공하십시오.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nhttp://localhost:4200/은 우리 Angular 애플리케이션의 로컬 URL이 되겠습니다.\n\n# .Net 7 웹 API를 생성하고 보안 설정하기\n\n## 새 .Net Web API 프로젝트 만들기\n\nVisual Studio를 열고 ASP.NET Core Web API 프로젝트 템플릿에서 새 프로젝트를 만드세요. .Net 6 프레임워크를 선택하세요. 이 튜토리얼에서는 이 템플릿에서 생성된 WeatherForcastController를 사용할 것입니다. 이 컨트롤러에는 사용 예제에서 사용할 HTTP Get 엔드포인트가 포함되어 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n프로젝트를 생성한 후 프로그램을 실행하고 https://localhost:7202/weatherforecast (포트 번호가 다를 수 있습니다)으로 JSON 형식의 WeatherForecast 목록이 반환되는지 확인해주세요.\n\n## 교차 도메인 요청 허용\n\n우리의 Angular 애플리케이션에서 모든 HTTP 요청을 허용해야 합니다. Program.cs 또는 Startup.cs 파일을 열어주세요.\n\nbuilder.Services를 services로 바꿔주세요. 그리고 var builder = WebApplication.CreateBuilder(args); 다음에 services 변수를 만들어주세요:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nvar services = builder.Services;Copy\n```\n\n그 후에, CORS 미들웨어를 추가하세요.\n\n```js\napp.UseCors(\"CorsPolicy\");Copy\n```\n\nCORS 정책을 등록하고 http://localhost:4200 출처를 허용하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n```js\nservices.AddCors(options =\u003e\n{\n    options.AddPolicy(\"CorsPolicy\", builder =\u003e builder\n    .WithOrigins(\"http://localhost:4200\")\n    .AllowAnyMethod()\n    .AllowAnyHeader()\n    .AllowCredentials());\n});\n```\n\n## Auth0에 API 추가하기\n\nAuth0 계정으로 돌아가서 Applications \u0026 APIs로 이동하여 새 API를 생성하세요.\n\nAPI 이름과 식별자 URL(https://localhost:7202/로 포트 번호를 변경)을 입력하세요. RS256 알고리즘을 선택하세요.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## API 엔드포인트 보안하기\n\n이제 우리는 엔드포인트를 보안하고, 인증된 사용자만이 이에 액세스하고 반환된 콘텐츠와 함께 성공적인 HTTP 응답을 받을 수 있도록하려고합니다.\n\n먼저, Get() 메서드에 Microsoft.AspNetCore.Authorization에서 [Authorize] 속성을 추가하십시오.\n\n```csharp\nusing Microsoft.AspNetCore.Authorization;\nusing Microsoft.AspNetCore.Mvc;\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```csharp\nnamespace Auth0WebApi.Controllers\n{\n    [ApiController]\n    [Route(\"[controller]\")]\n    public class WeatherForecastController : ControllerBase\n    {\n        private static readonly string[] Summaries = new[]\n        {\n            \"Freezing\", \"Bracing\", \"Chilly\", \"Cool\", \"Mild\", \"Warm\", \"Balmy\", \"Hot\", \"Sweltering\", \"Scorching\"\n        };\n        private readonly ILogger\u003cWeatherForecastController\u003e _logger;\n        public WeatherForecastController(ILogger\u003cWeatherForecastController\u003e logger)\n        {\n            _logger = logger;\n        }\n        [HttpGet]\n        [Authorize]\n        public IEnumerable\u003cWeatherForecast\u003e Get()\n        {\n            return Enumerable.Range(1, 5).Select(index =\u003e new WeatherForecast\n            {\n                Date = DateTime.Now.AddDays(index),\n                TemperatureC = Random.Shared.Next(-20, 55),\n                Summary = Summaries[Random.Shared.Next(Summaries.Length)]\n            })\n            .ToArray();\n        }\n    }\n}\n```\n\n우리는 ConfigurationManager를 통해 Audience 및 Domain 값을 액세스하고 싶어해요.\n\n따라서 appsettings.json에 Audience와 Domain을 추가해주세요.\n\n```json\n\"Auth0\": {\n  \"Audience\": \"https://localhost:7202/\",\n  \"Domain\": \"auth0tuto.eu.auth0.com\"\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n그러면 \"테이블\" 태그를 Markdown 형식으로 변경해주세요.\n\n\n| 아이템 | 가격 |\n|---|---|\n| 사과 | 1.99 |\n| 바나나 | 0.99 |\n| 수박 | 5.99 |\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n아래 코드를 추가하여 인증을 구성하십시오.\n\n```js\nservices.AddAuthentication(options =\u003e\n{\n    options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme;\n    options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme;\n}).AddJwtBearer(options =\u003e\n{\n    options.Authority = $\"https://{auth0.Domain}/\";\n    options.Audience = auth0.Audience;\n});\n```\n\n저희는 인증 토큰을 활용한 JWT 베어러 인증을 사용할 것입니다. 해당 인증은 Authorization HTTP 헤더에서 추출되고 유효성이 검사될 것입니다.\n\n토큰을 유효성 검사하려면, Auth0 애플리케이션에서 구성한 도메인을 지정해야 합니다. 이 정보는 설정에서 찾을 수 있으며, 방금 생성한 Auth0 API의 식별자인 Audience(청중)도 지정해야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n다음과 같이 AuthenticationMiddleware을 추가해 주세요:\n\n```js\napp.UseAuthentication();Copy\n```\n\n프로그램을 다시 실행하면 HTTP ERROR 401 (Unauthorized)를 받게 됩니다.\n\n# Angular 애플리케이션을 만들어 로그인 시스템을 구축하세요\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## Angular CLI 설치\n\n이미 시스템에 Angular이 설치되어 있는 경우, 이 단계를 건너뛰세요.\n\n먼저, Node.js를 다운로드하고 설치해야 합니다 - ` https://nodejs.org/en/download\n\n그런 다음, 명령 프롬프트에 이 명령을 입력하여 Angular CLI를 설치하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnpm install -g @angular/cli\n```\n\n만약 Windows를 사용 중이라면, PowerShell 스크립트 실행을 허용하기 위해 다음 명령을 실행해주세요.\n\n```js\nSet-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned\n```\n\n## Angular 애플리케이션 생성하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n새로운 Angular 애플리케이션을 생성하려면 ng new CLI 명령어를 실행하세요.\n\n```js\nng new auth0-angular-appCopy\n```\n\n앱에 포함할 기본 기능을 선택하세요.\n\n애플리케이션이 생성되면 ng serve -o를 실행하여 브라우저에서 앱을 실행하고 엽니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nng serve --oCopy\n```\n\n이제 기본 Angular 애플리케이션을 실행하는 것을 확인할 수 있습니다.\n\n## Auth0 SDK 설치\n\n좋아하는 텍스트 편집기나 IDE로 애플리케이션을 열어보세요. 여기서는 VS Code를 사용하겠습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n프로젝트 디렉토리 내에서 터미널을 열고 Auth0 Angular SDK를 설치하려면 다음 명령을 실행해주세요.\n\n```js\nnpm install @auth0/auth0-angularCopy\n```\n\napp.module.ts를 열어서 AuthModule 패키지를 가져와서 AuthModule.forRoot를 호출하여 imports 목록에 추가해주세요. Auth0 애플리케이션 설정에서 Domain 및 ClientId 값을 복사해주세요.\n\n```js\nimport { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { AuthModule } from '@auth0/auth0-angular'\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    AuthModule.forRoot({\n      domain: 'auth0tuto.eu.auth0.com',\n      clientId: 'aJZmQXUxWhl4arU5ZhN2FJ38YUQgNYbf'\n    }),\n  ],\n  providers: [],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n```\n\n## 로그인/로그아웃 추가하기\n\napp.component.ts 파일을 열고 AuthService 클래스에 대한 종속성을 생성자에 추가하고 '@auth0/auth0-angular'에서 AuthService를 가져와주세요.\n\n귀하의 코드는 다음과 같아야 합니다:```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { Component } from '@angular/core';\nimport { AuthService } from '@auth0/auth0-angular';\n```\n\n```js\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'auth0-angular-app';\n  constructor(public auth: AuthService) {}\n}\n```\n\n이제 app.component.html 파일을 열어서 배너에 Twitter 버튼 바로 전에 다음 코드를 추가하세요.\n\n```js\n\u003cng-template #loggedOut\u003e\n  \u003cbutton class=\"btn-login\" (click)=\"auth.loginWithRedirect()\"\u003e\n    로그인\n  \u003c/button\u003e\n\u003c/ng-template\u003e\n\u003cbutton class=\"btn-login\" (click)=\"auth.logout()\" *ngIf=\"auth.isAuthenticated$ | async; else loggedOut\"\u003e\n  로그아웃\n\u003c/button\u003e\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nloginWithRedirect() 메소드를 호출하면 사용자가 Auth0 Universal 로그인 페이지로 리디렉션되어 해당 페이지에서 애플리케이션으로 이동하기 전에 로그인 또는 회원 가입을 할 수 있습니다.\n\n그런 다음, 다음 CSS를 `\u003cstyle\u003e\u003c/style\u003e` 사이에 추가해주세요.\n\n```js\n.btn-login {\n  border-radius: 4px;\n  border: 1px solid #eee;\n  background-color: #fafafa;\n  color: #333;\n  padding: 10px 25px;\n  text-decoration: none;\n  cursor: pointer;\n}\n```\n\n이제 배너에 로그인 버튼이 표시될 것입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n`div class = \"content\" role = \"main\"`와 `/div` 사이의 모든 것을 삭제하고 다음 코드를 복사하여 붙여넣으십시오.\n\n```js\n\u003cp *ngFor=\"let item of weatherForecasts\"\u003e\n  {item.date} |\n  {item.temperatureC} °C |\n  {item.temperatureF} °F |\n  {item.summary}\n\u003c/p\u003e\n```\n\n## 회원 가입\n\n로그인 버튼을 클릭하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n지금은 Auth0 로그인 페이지로 이동되었습니다.\n\n새 계정을 만들려면 가입하세요. 계정을 확인하기 위해 이메일을 받아야 합니다.\n\n이제 Auth0 대시보드로 돌아가서, 왼쪽 메뉴에서 사용자 관리 `사용자`로 이동하여 사용자가 생성되었는지 확인하세요.\n\n## 로그아웃\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n가입한 후에는 로그인 버튼이 로그아웃 버튼으로 대체된 것을 볼 수 있습니다.\n\n로그아웃하려면 클릭하십시오.\n\n## 로그인\n\n이제 다시 로그인 버튼을 클릭하여 응용 프로그램에 로그인하십시오.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n사용자 로그인 시스템이 작동되었으니, 이제 보안된 웹 API에 HTTP 호출을 만들어 날씨 예보 목록을 가져와 표시하고 싶어요.\n\n## HTTP 서비스 생성\n\n새 서비스를 만들기 위해 다음 Angular CLI 명령어를 실행해줘.\n\n```js\nng g s weatherforecastCopy\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\napp.module.ts에 WeatherForecastService와 HttpClientModule를 providers 배열에 추가해주세요. './weatherforecast.service'에서 WeatherForecastService를 import하고, @angular/common/http에서 HttpClientModule를 import해주세요.\n\napi.service.ts를 열어서 constructor에 HttpClient 의존성을 추가하고, @angular/common/http에서 클래스를 import하고 get() 메소드를 생성해주세요.\n\n```typescript\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nconstructor(private http: HttpClient) {}\n\nget(): Observable\u003cnumber\u003e {\n  return this.http.get\u003cnumber\u003e(\"https://localhost:7202/weatherforecast/\");\n}\n```\n\n이 메소드는 우리 Web API의 weatherforecast 엔드포인트로 GET http 호출을 하게 됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n귀하는 다음과 같이 서비스 클래스를 작성하셔야 합니다:\n\n```js\nimport { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n```\n\n```js\n@Injectable({\n  providedIn: 'root'\n})\nexport class WeatherForecastService {\n  constructor(private http: HttpClient) { }\n  get(): Observable\u003cany[]\u003e {\n    return this.http.get\u003cany[]\u003e(\"https://localhost:7202/weatherforecast\");\n  }\n}\n```\n\n## 날씨 예보 표시하기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\napp.components.ts로 돌아가서 생성자에 WeatherForecastService 종속성을 추가하고 ./weatherforecast.service에서 해당 클래스를 import하세요.\n\nweatherForecasts 변수를 생성하고 초기화하세요.\n\n```js\nweatherForecast: any[] = [];\n```\n\ngetWeatherForecasts() 메서드를 생성하여 날씨 예보 목록을 로드하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n```js\ngetWeatherForecasts() {\n  this.weatherForecastService.get().subscribe(data =\u003e {\n    this.weatherForecast = data;\n  })\n}\n```\n\n```js\nimport { Component, OnInit } from '@angular/core';\nimport { AuthService } from '@auth0/auth0-angular';\nimport { WeatherForecastService } from './weatherforecast.service';\n```\n\n```js\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit{\n  title = 'auth0-angular-app';\n  weatherForecasts: any[] = [];\n  constructor(\n    public auth: AuthService,\n    private weatherForecastService: WeatherForecastService\n  ) {}\n  ngOnInit(): void {\n    this.getWeatherForecasts();\n  }\n  getWeatherForecasts() {\n    this.weatherForecastService.get().subscribe(data =\u003e {\n      this.weatherForecasts = data;\n    })\n  }\n}\n```\n\n## Add JWT to the HTTP requests\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이전에 언급한 대로, 저희 웹 API는 HTTP 요청의 Authorization 헤더에서 JWT bearer를 디코딩하여 클라이언트의 엔드포인트 접근을 승인합니다.\n\nAuth0 SDK를 사용하면 각 요청에 JWT를 수동으로 추가할 필요가 없습니다. 대신에, 우리를 대신해서 일을 처리해줄 Auth0 HTTP 인터셉터를 사용하겠습니다.\n\napp.module.ts에서 AuthHttpInterceptor와 HTTP_INTERCEPTORS를 다음과 같이 providers 배열에 추가하세요:\n\n```js\nproviders: [\n  WeatherForecastService,\n  { provide: HTTP_INTERCEPTORS, useClass: AuthHttpInterceptor, multi: true },\n],Copy\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n@angular/common/http에 HTTP_INTERCEPTORS와 @auth0/auth0-angular에 AuthHttpInterceptor을 추가해주세요.\n\nAuthModule.forRoot()에서 audience와 httpInterceptor를 추가하고, 허용된 API 경로 목록에 API URL을 추가해주세요.\n\n우리의 app.module.ts는 이제 다음과 같이 보입니다:\n\n```js\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { AuthHttpInterceptor, AuthModule } from '@auth0/auth0-angular';\nimport { WeatherForecastService } from './weatherforecast.service';\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n```js\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    AuthModule.forRoot({\n      domain: 'auth0tuto.eu.auth0.com',\n      clientId: 'aJZmQXUxWhl4arU5ZhN2FJ38YUQgNYbf',\n      audience: 'https://localhost:7202/',\n      httpInterceptor: {\n        allowedList: [ 'https://localhost:7202/*' ],\n      },\n    }),\n  ],\n  providers: [\n    WeatherForecastService,\n    { provide: HTTP_INTERCEPTORS, useClass: AuthHttpInterceptor, multi: true },\n  ],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n```\n\n# 모두 테스트하기\n\n이제 웹 API를 실행하고 Angular 애플리케이션에 로그인하세요.\n\n이제 페이지에 표시되는 날씨 예보 목록을 볼 수 있어야 합니다.\n","ogImage":{"url":"/assets/img/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0_0.png"},"coverImage":"/assets/img/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0_0.png","tag":["Tech"],"readingTime":13},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h1: \"h1\",\n    h2: \"h2\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(\"img\", {\n      src: \"/assets/img/2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0_0.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 튜토리얼에서는 Angular 애플리케이션에 로그인 시스템을 추가하고 .Net Web API를 Auth0로 보호하는 방법을 배워보겠습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"먼저 무료 Auth0 계정을 생성하고 설정할 것입니다. 그 후 .Net 7 Web API를 생성하고 보호된 엔드포인트를 설정할 것입니다. 그런 다음 Angular 애플리케이션을 생성하고 JWT 베어러를 사용하여 Web API를 호출할 수 있는 로그인 시스템을 추가할 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"보안에 대해 잘 모르더라도, Auth0를 사용하면 보안 서비스를 처음부터 만들 필요 없이 응용 프로그램에 인증/권한 부여를 추가할 수 있는 좋은 방법입니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"Auth0\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Auth0 계정 생성\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"https://auth0.com으로 이동하여 무료로 가입하고 계정을 설정하세요.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Auth0 싱글 페이지 애플리케이션 구성\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"왼쪽 메뉴에서 Applications \u003e Applications로 이동하여 Default App을 선택하십시오. 설정 탭으로 이동하여 이름을 변경하십시오. 또한 새 응용 프로그램을 만들 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"설정에서 Angular 앱과 통신할 때 사용할 응용 프로그램 도메인, 클라이언트 ID 및 클라이언트 비밀번호를 확인할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"앱 속성 아래로 스크롤하면 Application Type을 Single Page Application으로 변경할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Application URIs 섹션에서 Allowed Callback, Logout URLs 및 Allowed Web Origins에 URL http://localhost:4200/을 제공하십시오.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"http://localhost:4200/은 우리 Angular 애플리케이션의 로컬 URL이 되겠습니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \".Net 7 웹 API를 생성하고 보안 설정하기\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"새 .Net Web API 프로젝트 만들기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Visual Studio를 열고 ASP.NET Core Web API 프로젝트 템플릿에서 새 프로젝트를 만드세요. .Net 6 프레임워크를 선택하세요. 이 튜토리얼에서는 이 템플릿에서 생성된 WeatherForcastController를 사용할 것입니다. 이 컨트롤러에는 사용 예제에서 사용할 HTTP Get 엔드포인트가 포함되어 있습니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"프로젝트를 생성한 후 프로그램을 실행하고 https://localhost:7202/weatherforecast (포트 번호가 다를 수 있습니다)으로 JSON 형식의 WeatherForecast 목록이 반환되는지 확인해주세요.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"교차 도메인 요청 허용\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리의 Angular 애플리케이션에서 모든 HTTP 요청을 허용해야 합니다. Program.cs 또는 Startup.cs 파일을 열어주세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"builder.Services를 services로 바꿔주세요. 그리고 var builder = WebApplication.CreateBuilder(args); 다음에 services 변수를 만들어주세요:\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"var\"\n        }), \" services = builder.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"Services\"\n        }), \";\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Copy\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그 후에, CORS 미들웨어를 추가하세요.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"app.\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UseCors\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"CorsPolicy\\\"\"\n        }), \");\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Copy\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"CORS 정책을 등록하고 http://localhost:4200 출처를 허용하세요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"services.\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AddCors\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"options\"\n          }), \" =\u003e\"]\n        }), \"\\n{\\n    options.\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AddPolicy\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"CorsPolicy\\\"\"\n        }), \", \", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"builder\"\n          }), \" =\u003e\"]\n        }), \" builder\\n    .\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WithOrigins\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"http://localhost:4200\\\"\"\n        }), \")\\n    .\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AllowAnyMethod\"\n        }), \"()\\n    .\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AllowAnyHeader\"\n        }), \"()\\n    .\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AllowCredentials\"\n        }), \"());\\n});\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Auth0에 API 추가하기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Auth0 계정으로 돌아가서 Applications \u0026 APIs로 이동하여 새 API를 생성하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"API 이름과 식별자 URL(https://localhost:7202/로 포트 번호를 변경)을 입력하세요. RS256 알고리즘을 선택하세요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"API 엔드포인트 보안하기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 우리는 엔드포인트를 보안하고, 인증된 사용자만이 이에 액세스하고 반환된 콘텐츠와 함께 성공적인 HTTP 응답을 받을 수 있도록하려고합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"먼저, Get() 메서드에 Microsoft.AspNetCore.Authorization에서 [Authorize] 속성을 추가하십시오.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-csharp\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"using\"\n        }), \" Microsoft.AspNetCore.Authorization;\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"using\"\n        }), \" Microsoft.AspNetCore.Mvc;\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-csharp\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"namespace\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title\",\n          children: \"Auth0WebApi.Controllers\"\n        }), \"\\n{\\n    [\", _jsx(_components.span, {\n          className: \"hljs-meta\",\n          children: \"ApiController\"\n        }), \"]\\n    [\", _jsxs(_components.span, {\n          className: \"hljs-meta\",\n          children: [\"Route(\", _jsx(_components.span, {\n            className: \"hljs-string\",\n            children: \"\\\"[controller]\\\"\"\n          }), \")\"]\n        }), \"]\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"public\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title\",\n          children: \"WeatherForecastController\"\n        }), \" : \", _jsx(_components.span, {\n          className: \"hljs-title\",\n          children: \"ControllerBase\"\n        }), \"\\n    {\\n        \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"private\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"static\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"readonly\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"string\"\n        }), \"[] Summaries = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \"[]\\n        {\\n            \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Freezing\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Bracing\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Chilly\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Cool\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Mild\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Warm\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Balmy\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Hot\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Sweltering\\\"\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Scorching\\\"\"\n        }), \"\\n        };\\n        \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"private\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"readonly\"\n        }), \" ILogger\u003cWeatherForecastController\u003e _logger;\\n        \", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-keyword\",\n            children: \"public\"\n          }), \" \", _jsx(_components.span, {\n            className: \"hljs-title\",\n            children: \"WeatherForecastController\"\n          }), \"(\", _jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"ILogger\u003cWeatherForecastController\u003e logger\"\n          }), \")\"]\n        }), \"\\n        {\\n            _logger = logger;\\n        }\\n        [\", _jsx(_components.span, {\n          className: \"hljs-meta\",\n          children: \"HttpGet\"\n        }), \"]\\n        [\", _jsx(_components.span, {\n          className: \"hljs-meta\",\n          children: \"Authorize\"\n        }), \"]\\n        \", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-keyword\",\n            children: \"public\"\n          }), \" IEnumerable\u003cWeatherForecast\u003e \", _jsx(_components.span, {\n            className: \"hljs-title\",\n            children: \"Get\"\n          }), \"()\"]\n        }), \"\\n        {\\n            \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" Enumerable.Range(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"5\"\n        }), \").Select(index =\u003e \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" WeatherForecast\\n            {\\n                Date = DateTime.Now.AddDays(index),\\n                TemperatureC = Random.Shared.Next(\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"-20\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"55\"\n        }), \"),\\n                Summary = Summaries[Random.Shared.Next(Summaries.Length)]\\n            })\\n            .ToArray();\\n        }\\n    }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리는 ConfigurationManager를 통해 Audience 및 Domain 값을 액세스하고 싶어해요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"따라서 appsettings.json에 Audience와 Domain을 추가해주세요.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-json\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"\\\"Auth0\\\"\"\n        }), _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"{\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"\\\"Audience\\\"\"\n        }), _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"https://localhost:7202/\\\"\"\n        }), _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \",\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"\\\"Domain\\\"\"\n        }), _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \":\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"auth0tuto.eu.auth0.com\\\"\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그러면 \\\"테이블\\\" 태그를 Markdown 형식으로 변경해주세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"| 아이템 | 가격 |\\n|---|---|\\n| 사과 | 1.99 |\\n| 바나나 | 0.99 |\\n| 수박 | 5.99 |\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"아래 코드를 추가하여 인증을 구성하십시오.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"services.\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AddAuthentication\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"options\"\n          }), \" =\u003e\"]\n        }), \"\\n{\\n    options.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"DefaultAuthenticateScheme\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"JwtBearerDefaults\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"AuthenticationScheme\"\n        }), \";\\n    options.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"DefaultChallengeScheme\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"JwtBearerDefaults\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"AuthenticationScheme\"\n        }), \";\\n}).\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AddJwtBearer\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"options\"\n          }), \" =\u003e\"]\n        }), \"\\n{\\n    options.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"Authority\"\n        }), \" = $\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"https://{auth0.Domain}/\\\"\"\n        }), \";\\n    options.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"Audience\"\n        }), \" = auth0.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"Audience\"\n        }), \";\\n});\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"저희는 인증 토큰을 활용한 JWT 베어러 인증을 사용할 것입니다. 해당 인증은 Authorization HTTP 헤더에서 추출되고 유효성이 검사될 것입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"토큰을 유효성 검사하려면, Auth0 애플리케이션에서 구성한 도메인을 지정해야 합니다. 이 정보는 설정에서 찾을 수 있으며, 방금 생성한 Auth0 API의 식별자인 Audience(청중)도 지정해야 합니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음과 같이 AuthenticationMiddleware을 추가해 주세요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"app.\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"UseAuthentication\"\n        }), \"();\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Copy\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"프로그램을 다시 실행하면 HTTP ERROR 401 (Unauthorized)를 받게 됩니다.\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"Angular 애플리케이션을 만들어 로그인 시스템을 구축하세요\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Angular CLI 설치\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이미 시스템에 Angular이 설치되어 있는 경우, 이 단계를 건너뛰세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"먼저, Node.js를 다운로드하고 설치해야 합니다 - ` https://nodejs.org/en/download\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"그런 다음, 명령 프롬프트에 이 명령을 입력하여 Angular CLI를 설치하세요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"npm install -g @angular/cli\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"만약 Windows를 사용 중이라면, PowerShell 스크립트 실행을 허용하기 위해 다음 명령을 실행해주세요.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Set\"\n        }), \"-\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ExecutionPolicy\"\n        }), \" -\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Scope\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"CurrentUser\"\n        }), \" -\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"ExecutionPolicy\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"RemoteSigned\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Angular 애플리케이션 생성하기\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"새로운 Angular 애플리케이션을 생성하려면 ng new CLI 명령어를 실행하세요.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"ng \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"new\"\n        }), \" auth0-angular-appCopy\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"앱에 포함할 기본 기능을 선택하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"애플리케이션이 생성되면 ng serve -o를 실행하여 브라우저에서 앱을 실행하고 엽니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"ng serve --oCopy\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 기본 Angular 애플리케이션을 실행하는 것을 확인할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Auth0 SDK 설치\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"좋아하는 텍스트 편집기나 IDE로 애플리케이션을 열어보세요. 여기서는 VS Code를 사용하겠습니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"프로젝트 디렉토리 내에서 터미널을 열고 Auth0 Angular SDK를 설치하려면 다음 명령을 실행해주세요.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"npm install @auth0/auth0-angularCopy\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"app.module.ts를 열어서 AuthModule 패키지를 가져와서 AuthModule.forRoot를 호출하여 imports 목록에 추가해주세요. Auth0 애플리케이션 설정에서 Domain 및 ClientId 값을 복사해주세요.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"NgModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/core'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"BrowserModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/platform-browser'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@auth0/auth0-angular'\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppRoutingModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./app-routing.module'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppComponent\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./app.component'\"\n        }), \";\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"NgModule\"\n        }), \"({\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"declarations\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppComponent\"\n        }), \"],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"imports\"\n        }), \": [\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"BrowserModule\"\n        }), \",\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppRoutingModule\"\n        }), \",\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"HttpClientModule\"\n        }), \",\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthModule\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"forRoot\"\n        }), \"({\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"domain\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'auth0tuto.eu.auth0.com'\"\n        }), \",\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"clientId\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'aJZmQXUxWhl4arU5ZhN2FJ38YUQgNYbf'\"\n        }), \"\\n    }),\\n  ],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"providers\"\n        }), \": [],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"bootstrap\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppComponent\"\n        }), \"],\\n})\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppModule\"\n        }), \" {}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"로그인/로그아웃 추가하기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"app.component.ts 파일을 열고 AuthService 클래스에 대한 종속성을 생성자에 추가하고 '@auth0/auth0-angular'에서 AuthService를 가져와주세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"귀하의 코드는 다음과 같아야 합니다:```\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Component\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/core'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthService\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@auth0/auth0-angular'\"\n        }), \";\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Component\"\n        }), \"({\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"selector\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'app-root'\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"templateUrl\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./app.component.html'\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"styleUrls\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./app.component.css'\"\n        }), \"]\\n})\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppComponent\"\n        }), \" {\\n  title = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'auth0-angular-app'\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"public auth: AuthService\"\n        }), \") {}\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 app.component.html 파일을 열어서 배너에 Twitter 버튼 바로 전에 다음 코드를 추가하세요.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"\u003cng-template #loggedOut\u003e\\n  \", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"\u003c\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"button\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"class\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"btn-login\\\"\"\n            }), \" (\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"click\"\n            }), \")=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"auth.loginWithRedirect()\\\"\"\n            }), \"\u003e\"]\n          }), \"\\n    로그인\\n  \", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"\u003c/\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"button\"\n            }), \"\u003e\"]\n          })]\n        }), \"\\n\u003c/ng-template\u003e\\n\", _jsxs(_components.span, {\n          className: \"xml\",\n          children: [_jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"\u003c\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"button\"\n            }), \" \", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"class\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"btn-login\\\"\"\n            }), \" (\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"click\"\n            }), \")=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"auth.logout()\\\"\"\n            }), \" *\", _jsx(_components.span, {\n              className: \"hljs-attr\",\n              children: \"ngIf\"\n            }), \"=\", _jsx(_components.span, {\n              className: \"hljs-string\",\n              children: \"\\\"auth.isAuthenticated$ | async; else loggedOut\\\"\"\n            }), \"\u003e\"]\n          }), \"\\n  로그아웃\\n\", _jsxs(_components.span, {\n            className: \"hljs-tag\",\n            children: [\"\u003c/\", _jsx(_components.span, {\n              className: \"hljs-name\",\n              children: \"button\"\n            }), \"\u003e\"]\n          })]\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"loginWithRedirect() 메소드를 호출하면 사용자가 Auth0 Universal 로그인 페이지로 리디렉션되어 해당 페이지에서 애플리케이션으로 이동하기 전에 로그인 또는 회원 가입을 할 수 있습니다.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"그런 다음, 다음 CSS를 \", _jsx(_components.code, {\n        children: \"\u003cstyle\u003e\u003c/style\u003e\"\n      }), \" 사이에 추가해주세요.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"btn\"\n        }), \"-login {\\n  border-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"radius\"\n        }), \": 4px;\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"border\"\n        }), \": 1px solid #eee;\\n  background-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"color\"\n        }), \": #fafafa;\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"color\"\n        }), \": #\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"333\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"padding\"\n        }), \": 10px 25px;\\n  text-\", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"decoration\"\n        }), \": none;\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"cursor\"\n        }), \": pointer;\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 배너에 로그인 버튼이 표시될 것입니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"div class = \\\"content\\\" role = \\\"main\\\"\"\n      }), \"와 \", _jsx(_components.code, {\n        children: \"/div\"\n      }), \" 사이의 모든 것을 삭제하고 다음 코드를 복사하여 붙여넣으십시오.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"\u003cp *ngFor=\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"let item of weatherForecasts\\\"\"\n        }), \"\u003e\\n  {item.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"date\"\n        }), \"} |\\n  {item.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"temperatureC\"\n        }), \"} °C |\\n  {item.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"temperatureF\"\n        }), \"} °F |\\n  {item.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"summary\"\n        }), \"}\\n\u003c/p\u003e\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"회원 가입\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"로그인 버튼을 클릭하세요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"지금은 Auth0 로그인 페이지로 이동되었습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"새 계정을 만들려면 가입하세요. 계정을 확인하기 위해 이메일을 받아야 합니다.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"이제 Auth0 대시보드로 돌아가서, 왼쪽 메뉴에서 사용자 관리 \", _jsx(_components.code, {\n        children: \"사용자\"\n      }), \"로 이동하여 사용자가 생성되었는지 확인하세요.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"로그아웃\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"가입한 후에는 로그인 버튼이 로그아웃 버튼으로 대체된 것을 볼 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"로그아웃하려면 클릭하십시오.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"로그인\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 다시 로그인 버튼을 클릭하여 응용 프로그램에 로그인하십시오.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"사용자 로그인 시스템이 작동되었으니, 이제 보안된 웹 API에 HTTP 호출을 만들어 날씨 예보 목록을 가져와 표시하고 싶어요.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"HTTP 서비스 생성\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"새 서비스를 만들기 위해 다음 Angular CLI 명령어를 실행해줘.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"hljs language-js\",\n        children: \"ng g s weatherforecastCopy\\n\"\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"app.module.ts에 WeatherForecastService와 HttpClientModule를 providers 배열에 추가해주세요. './weatherforecast.service'에서 WeatherForecastService를 import하고, @angular/common/http에서 HttpClientModule를 import해주세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"api.service.ts를 열어서 constructor에 HttpClient 의존성을 추가하고, @angular/common/http에서 클래스를 import하고 get() 메소드를 생성해주세요.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-typescript\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"HttpClient\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/common/http'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Observable\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'rxjs'\"\n        }), \";\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-params\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-keyword\",\n            children: \"private\"\n          }), \" http: HttpClient\"]\n        }), \") {}\\n\\n\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"get\"\n        }), \"(): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Observable\"\n        }), \"\u003c\", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \"\u003e {\\n  \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"http\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"get\"\n        }), \"\u003c\", _jsx(_components.span, {\n          className: \"hljs-built_in\",\n          children: \"number\"\n        }), \"\u003e(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"https://localhost:7202/weatherforecast/\\\"\"\n        }), \");\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 메소드는 우리 Web API의 weatherforecast 엔드포인트로 GET http 호출을 하게 됩니다.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"귀하는 다음과 같이 서비스 클래스를 작성하셔야 합니다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"HttpClient\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/common/http'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/core'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Observable\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'rxjs'\"\n        }), \";\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Injectable\"\n        }), \"({\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"providedIn\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'root'\"\n        }), \"\\n})\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WeatherForecastService\"\n        }), \" {\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"private http: HttpClient\"\n        }), \") { }\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"get\"\n        }), \"(): \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Observable\"\n        }), \"\u003cany[]\u003e {\\n    \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"return\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"http\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"get\"\n        }), \"\u003cany[]\u003e(\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"https://localhost:7202/weatherforecast\\\"\"\n        }), \");\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"날씨 예보 표시하기\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"app.components.ts로 돌아가서 생성자에 WeatherForecastService 종속성을 추가하고 ./weatherforecast.service에서 해당 클래스를 import하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"weatherForecasts 변수를 생성하고 초기화하세요.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"weatherForecast\"\n        }), \": any[] = [];\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"getWeatherForecasts() 메서드를 생성하여 날씨 예보 목록을 로드하세요.\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getWeatherForecasts\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n  \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"weatherForecastService\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"get\"\n        }), \"().\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"subscribe\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"data\"\n          }), \" =\u003e\"]\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"weatherForecast\"\n        }), \" = data;\\n  })\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Component\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"OnInit\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/core'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthService\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@auth0/auth0-angular'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WeatherForecastService\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./weatherforecast.service'\"\n        }), \";\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Component\"\n        }), \"({\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"selector\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'app-root'\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"templateUrl\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./app.component.html'\"\n        }), \",\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"styleUrls\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./app.component.css'\"\n        }), \"]\\n})\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppComponent\"\n        }), \" implements \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"OnInit\"\n        }), \"{\\n  title = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'auth0-angular-app'\"\n        }), \";\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"weatherForecasts\"\n        }), \": any[] = [];\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"constructor\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\",\n          children: \"\\n    public auth: AuthService,\\n    private weatherForecastService: WeatherForecastService\\n  \"\n        }), \") {}\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"ngOnInit\"\n        }), \"(): \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"void\"\n        }), \" {\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getWeatherForecasts\"\n        }), \"();\\n  }\\n  \", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"getWeatherForecasts\"\n        }), \"(\", _jsx(_components.span, {\n          className: \"hljs-params\"\n        }), \") {\\n    \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"weatherForecastService\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"get\"\n        }), \"().\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"subscribe\"\n        }), \"(\", _jsxs(_components.span, {\n          className: \"hljs-function\",\n          children: [_jsx(_components.span, {\n            className: \"hljs-params\",\n            children: \"data\"\n          }), \" =\u003e\"]\n        }), \" {\\n      \", _jsx(_components.span, {\n          className: \"hljs-variable language_\",\n          children: \"this\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"weatherForecasts\"\n        }), \" = data;\\n    })\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Add JWT to the HTTP requests\"\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이전에 언급한 대로, 저희 웹 API는 HTTP 요청의 Authorization 헤더에서 JWT bearer를 디코딩하여 클라이언트의 엔드포인트 접근을 승인합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Auth0 SDK를 사용하면 각 요청에 JWT를 수동으로 추가할 필요가 없습니다. 대신에, 우리를 대신해서 일을 처리해줄 Auth0 HTTP 인터셉터를 사용하겠습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"app.module.ts에서 AuthHttpInterceptor와 HTTP_INTERCEPTORS를 다음과 같이 providers 배열에 추가하세요:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"providers\"\n        }), \": [\\n  \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WeatherForecastService\"\n        }), \",\\n  { \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"provide\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"HTTP_INTERCEPTORS\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"useClass\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthHttpInterceptor\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"multi\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \" },\\n],\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Copy\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"@angular/common/http에 HTTP_INTERCEPTORS와 @auth0/auth0-angular에 AuthHttpInterceptor을 추가해주세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"AuthModule.forRoot()에서 audience와 httpInterceptor를 추가하고, 허용된 API 경로 목록에 API URL을 추가해주세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"우리의 app.module.ts는 이제 다음과 같이 보입니다:\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"HttpClientModule\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"HTTP_INTERCEPTORS\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/common/http'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"NgModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/core'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"BrowserModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@angular/platform-browser'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthHttpInterceptor\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'@auth0/auth0-angular'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WeatherForecastService\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./weatherforecast.service'\"\n        }), \";\\n\"]\n      })\n    }), \"\\n\", _jsx(\"div\", {\n      class: \"content-ad\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [_jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppRoutingModule\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./app-routing.module'\"\n        }), \";\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"import\"\n        }), \" { \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppComponent\"\n        }), \" } \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"from\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'./app.component'\"\n        }), \";\\n@\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"NgModule\"\n        }), \"({\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"declarations\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppComponent\"\n        }), \"],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"imports\"\n        }), \": [\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"BrowserModule\"\n        }), \",\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppRoutingModule\"\n        }), \",\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"HttpClientModule\"\n        }), \",\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthModule\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-title function_\",\n          children: \"forRoot\"\n        }), \"({\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"domain\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'auth0tuto.eu.auth0.com'\"\n        }), \",\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"clientId\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'aJZmQXUxWhl4arU5ZhN2FJ38YUQgNYbf'\"\n        }), \",\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"audience\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'https://localhost:7202/'\"\n        }), \",\\n      \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"httpInterceptor\"\n        }), \": {\\n        \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"allowedList\"\n        }), \": [ \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"'https://localhost:7202/*'\"\n        }), \" ],\\n      },\\n    }),\\n  ],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"providers\"\n        }), \": [\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"WeatherForecastService\"\n        }), \",\\n    { \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"provide\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"HTTP_INTERCEPTORS\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"useClass\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AuthHttpInterceptor\"\n        }), \", \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"multi\"\n        }), \": \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \" },\\n  ],\\n  \", _jsx(_components.span, {\n          className: \"hljs-attr\",\n          children: \"bootstrap\"\n        }), \": [\", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppComponent\"\n        }), \"],\\n})\\n\", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"export\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"class\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"AppModule\"\n        }), \" {}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"모두 테스트하기\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 웹 API를 실행하고 Angular 애플리케이션에 로그인하세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 페이지에 표시되는 날씨 예보 목록을 볼 수 있어야 합니다.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-17-SecureanAngularapplicationandNetWebAPIwithAuth0"},"buildId":"z1a6VTi5qHH9JJH7jaxL3","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>