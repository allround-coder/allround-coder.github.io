<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>이미지에서 표를 JSON으로 추출하는 GPT-4 사용 방법 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="이미지에서 표를 JSON으로 추출하는 GPT-4 사용 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="이미지에서 표를 JSON으로 추출하는 GPT-4 사용 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4" data-gatsby-head="true"/><meta name="twitter:title" content="이미지에서 표를 JSON으로 추출하는 GPT-4 사용 방법 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-23 13:17" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/aCCUs-qPrLLLWRnkN0AOd/_buildManifest.js" defer=""></script><script src="/_next/static/aCCUs-qPrLLLWRnkN0AOd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">이미지에서 표를 JSON으로 추출하는 GPT-4 사용 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="이미지에서 표를 JSON으로 추출하는 GPT-4 사용 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 23, 2024</span><span class="posts_reading_time__f7YPP">8<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_0.png">
<p>OpenAI는 모든 인류에 이익을 제공하는 인공 일반 지능(AGI)을 보장하기 위해 헌신하는 선구적인 인공 지능 연구 기관입니다. 2015년 12월 일론 머스크, 샘 알트만, 그리고 다른 유명한 기술 리더들에 의해 설립된 OpenAI는 안전하고 높은 능력을 가진 AI 시스템을 만드는 것을 목표로 합니다.</p>
<p>GPT(생성 사전 학습 트랜스포머)는 OpenAI가 개발한 일련의 언어 모델로, 인간과 유사한 텍스트를 이해하고 생성하는 데 사용됩니다. GPT-1부터 시작해 각 버전은 규모, 정확도, 성능 면에서 점진적으로 개선되었습니다. GPT-2는 더 긴 단락을 통해 일관된 및 맥락에 맞는 텍스트를 생성할 수 있는 능력을 보여주었으며, GPT-3는 1750억 개의 매개변수로 이를 크게 확장하여 극소량의 훈련으로 여러 언어 작업을 수행할 수 있는 능력을 가졌습니다.</p>
<p>최신 버전인 GPT-4는 더 높은 정확도, 일관성, 다재다능성을 가진 이러한 능력을 더욱 향상시킵니다. 이는 콘텐츠 생성부터 고객 서비스, 복잡한 문제 해결까지 다양한 응용 분야에서 뛰어난 성과를 내며, AI 기술의 주요 발전을 대표합니다.</p>
<div class="content-ad"></div>
<h2>실제 시나리오</h2>
<p>우리의 목표는 이미지에서 테이블 데이터를 읽어와 Node.js를 사용하여 JSON으로 변환하는 것입니다.</p>
<p>입력:</p>
<p><img src="/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_1.png" alt="이미지"></p>
<div class="content-ad"></div>
<p>이상적인 결과는</p>
<pre><code class="hljs language-js"> <span class="hljs-attr">message</span>: {
      <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">"이미지에서 인간이 읽을 수 있는 JSON 형식으로 상세 정보를 보여드립니다:\n"</span> +
        <span class="hljs-string">'\n'</span> +
        <span class="hljs-string">'json\n'</span> +
        <span class="hljs-string">'{\n'</span> +
        <span class="hljs-string">'  "transactions": [\n'</span> +
        <span class="hljs-string">'    {\n'</span> +
        <span class="hljs-string">'      "date": "01-04-2023",\n'</span> +
        <span class="hljs-string">'      "particulars": "B/F",\n'</span> +
        <span class="hljs-string">'      "cheque_no": "",\n'</span> +
        <span class="hljs-string">'      "withdrawals": 0.00,\n'</span> +
        <span class="hljs-string">'      "deposits": 0.00,\n'</span> +
        <span class="hljs-string">'      "autosweep": 0.00,\n'</span> +
        <span class="hljs-string">'      "reverse_sweep": 0.00,\n'</span> +
        <span class="hljs-string">'      "balance": "35,024.54 잔액"\n'</span> +
        <span class="hljs-string">'    },\n'</span> +
        ...
        <span class="hljs-string">'    {\n'</span> +
        <span class="hljs-string">'      "date": "29-04-2023",\n'</span> +
        <span class="hljs-string">'      "particulars": "UPI/311976583935/Net Bank/8460615089@ybI/Karur Vysya",\n'</span> +
        <span class="hljs-string">'      "cheque_no": "",\n'</span> +
        <span class="hljs-string">'      "withdrawals": 0.00,\n'</span> +
        <span class="hljs-string">'      "deposits": 5,000.00,\n'</span> +
        <span class="hljs-string">'      "autosweep": 0.00,\n'</span> +
        <span class="hljs-string">'      "reverse_sweep": 0.00,\n'</span> +
        <span class="hljs-string">'      "balance": "21,104.54 잔액"\n'</span> +
        <span class="hljs-string">'    }\n'</span> +
        <span class="hljs-string">'  ],\n'</span> +
        <span class="hljs-string">'  "totals": {\n'</span> +
        <span class="hljs-string">'    "withdrawals": 27600.00,\n'</span> +
        <span class="hljs-string">'    "deposits": 13680.00,\n'</span> +
        <span class="hljs-string">'    "autosweep": 0.00,\n'</span> +
        <span class="hljs-string">'    "reverse_sweep": 0.00,\n'</span> +
        <span class="hljs-string">'    "balance": "21,104.54 잔액"\n'</span> +
        <span class="hljs-string">'  }\n'</span> +
        <span class="hljs-string">'}\n'</span> +
        <span class="hljs-string">''</span>
    },
</code></pre>
<p>단계별로 진행해 봅시다:</p>
<p>단계 1: 시스템에 Node.js를 설치하세요.</p>
<div class="content-ad"></div>
<p>Step 2: 새 디렉토리를 만들고 프로젝트를 설정하십시오.</p>
<pre><code class="hljs language-js">mkdir image-analysis
cd image-analysis
npm init -y
npm install openai
</code></pre>
<p>Step 3: 새 파일 index.js를 만드세요.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">OpenAI</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">"openai"</span>);
<span class="hljs-comment">//더 나은 보안을 위해 API 키는 .env 파일에 보관하십시오.</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">OPENAI_API_KEY</span> = <span class="hljs-string">"your-api-key"</span>;
<span class="hljs-keyword">const</span> openai = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({
  <span class="hljs-attr">apiKey</span>: <span class="hljs-variable constant_">OPENAI_API_KEY</span>,
});

<span class="hljs-comment">// 이미지를 base64 문자열로 읽는 함수</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">encodeImage</span>(<span class="hljs-params">imagePath</span>) {
  <span class="hljs-keyword">const</span> imageData = fs.<span class="hljs-title function_">readFileSync</span>(imagePath);
  <span class="hljs-keyword">return</span> imageData.<span class="hljs-title function_">toString</span>(<span class="hljs-string">'base64'</span>);
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> imagePath = <span class="hljs-string">"path-of-your-image"</span>;
  <span class="hljs-keyword">const</span> base64Image = <span class="hljs-title function_">encodeImage</span>(imagePath);

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> openai.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span>, 
    <span class="hljs-attr">messages</span>: [
      {
        <span class="hljs-attr">role</span>: <span class="hljs-string">"system"</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">"이미지의 각 행과 열의 자세한 정보를 인간이 읽기 쉬운 형식의 멋진 JSON 형식으로 공유해 주세요."</span>,
      },
      {
        <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>,
        <span class="hljs-attr">content</span>: [
          { <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">"이 이미지를 분석해 주세요:"</span> },
          { <span class="hljs-attr">type</span>: <span class="hljs-string">"image_url"</span>, <span class="hljs-attr">image_url</span>: { <span class="hljs-attr">url</span>: <span class="hljs-string">`data:image/png;base64,<span class="hljs-subst">${base64Image}</span>`</span> } },
        ],
      },
    ],
  });

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">choices</span>);
}
</code></pre>
<div class="content-ad"></div>
<p>4단계: 스크립트 실행하기</p>
<pre><code class="hljs language-js">node index.<span class="hljs-property">js</span>
</code></pre>
<p>출력:</p>
<img src="/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_2.png">
<div class="content-ad"></div>
<p>최종 솔루션에 도달하기 전 직면한 문제들:</p>
<p>문제 1 - openai.createImage이(가) 함수가 아닙니다
이 문제는 GPT-4에서 createImage 메서드가 사용되지 않기 때문에 발생합니다. OpenAI API에서는 더 이상 이미지를 처리하거나 생성하기 위해 이 메서드를 지원하지 않습니다. 대신, createCompletion 또는 createChatCompletion과 같은 다른 메서드를 사용하여 GPT-4 모델과 상호 작용할 수 있습니다. 이러한 메서드를 사용하면 이미지 데이터를 base64 문자열로 인코딩하여 텍스트 프롬프트 내에서 전달할 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> openai.<span class="hljs-title function_">createImage</span>({
^

<span class="hljs-title class_">TypeError</span>: openai.<span class="hljs-property">createImage</span> is not a <span class="hljs-keyword">function</span>
</code></pre>
<p>문제 2: openai 버전 4 변환.</p>
<div class="content-ad"></div>
<p>오픈AI의 버전 4 변환 문제와 이전 버전 방법이 작동하지 않는 문제는 버전 간의 기반이 되는 아키텍처 및 API 기능에 중요한 변화가 있기 때문에 발생합니다. 이러한 변화로 인해 호환성 문제가 발생할 수 있으며, 이전 버전과 작동했던 기존 방법 및 통합이 버전 4에서 작동하지 않을 수 있습니다. 결과적으로 개발자들은 기존 방법을 사용하려고 할 때 오류나 예상치 못한 동작을 만날 수 있으며, 이에 대응하기 위해 코드를 업데이트하고 새 버전의 사양 및 모범 사례에 적응해야 할 수도 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> { <span class="hljs-title class_">Configuration</span>, <span class="hljs-title class_">OpenAIApi</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"openai"</span>);

<span class="hljs-comment">// const readline = require("readline");</span>

<span class="hljs-keyword">const</span> configuration = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>({
<span class="hljs-attr">apiKey</span>: <span class="hljs-string">"API_KEY"</span>,
});

<span class="hljs-title class_">TypeError</span>: <span class="hljs-title class_">Configuration</span> is not a constructor
at <span class="hljs-title class_">Object</span>. (<span class="hljs-attr">D</span>:\nodeJS-chatBot\index.<span class="hljs-property">cjs</span>:<span class="hljs-number">5</span>:<span class="hljs-number">23</span>)
at <span class="hljs-title class_">Module</span>.<span class="hljs-property">_compile</span> (<span class="hljs-attr">node</span>:internal/modules/cjs/<span class="hljs-attr">loader</span>:<span class="hljs-number">1226</span>:<span class="hljs-number">14</span>)
at <span class="hljs-title class_">Module</span>.<span class="hljs-property">_extensions</span>…js (<span class="hljs-attr">node</span>:internal/modules/cjs/<span class="hljs-attr">loader</span>:<span class="hljs-number">1280</span>:<span class="hljs-number">10</span>)
at <span class="hljs-title class_">Module</span>.<span class="hljs-property">load</span> (<span class="hljs-attr">node</span>:internal/modules/cjs/<span class="hljs-attr">loader</span>:<span class="hljs-number">1089</span>:<span class="hljs-number">32</span>)
at <span class="hljs-title class_">Module</span>.<span class="hljs-property">_load</span> (<span class="hljs-attr">node</span>:internal/modules/cjs/<span class="hljs-attr">loader</span>:<span class="hljs-number">930</span>:<span class="hljs-number">12</span>)
at <span class="hljs-title class_">Function</span>.<span class="hljs-property">executeUserEntryPoint</span> [<span class="hljs-keyword">as</span> runMain] (<span class="hljs-attr">node</span>:internal/modules/<span class="hljs-attr">run_main</span>:<span class="hljs-number">81</span>:<span class="hljs-number">12</span>)
at <span class="hljs-attr">node</span>:internal/main/<span class="hljs-attr">run_main_module</span>:<span class="hljs-number">23</span>:<span class="hljs-number">47</span>
</code></pre>
<p>이 문제에 대한 해결책을 오픈AI 커뮤니티에서 찾았습니다
<a href="https://chatgpt.com/share/b175130a-0d77-465e-8187-59b92590df8b" rel="nofollow" target="_blank">https://chatgpt.com/share/b175130a-0d77-465e-8187-59b92590df8b</a></p>
<p>문제점 3- gpt-4-vision-preview 모델이 더 이상 사용되지 않습니다</p>
<div class="content-ad"></div>
<p><img src="/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_3.png" alt="이미지 추출 표"></p>
<p>문제 4 - GPT-4로 이미지를 직접 업로드할 수 없어 GPT-3.5-turbo로 전환해야 하는 이유는, GPT-4가 이미지 데이터 입력을 처리하는 현재 능력 부족 때문입니다. 이 제한으로 인해 GPT-4를 통해 포괄적인 데이터 처리에 의존하는 개발자는 직접 이미지 업로드가 필요한 작업에는 모델을 전환해야 합니다. 이러한 전환은 작업 흐름을 복잡하게 만들고 개발 복잡성을 증가시키며 두 모델 간 데이터 처리 및 응답 생성에 불일치 가능성을 가져올 수 있습니다. 이러한 중단은 지연을 유발하고 원활한 사용자 경험을 유지하는 데 노력이 더 필요할 수 있습니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadRequestError</span>(status, error, message, headers); ^ <span class="hljs-title class_">BadRequestError</span>: <span class="hljs-number">400</span> <span class="hljs-string">'image'</span>가 잘못된 값입니다. 지원되는 값은 <span class="hljs-string">'text'</span>, <span class="hljs-string">'image_url'</span>, <span class="hljs-string">'audio_url'</span>입니다.
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>); <span class="hljs-keyword">const</span> <span class="hljs-title class_">OpenAI</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">"openai"</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">OPENAI_API_KEY</span> = <span class="hljs-string">""</span>; <span class="hljs-keyword">const</span> openai = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({ <span class="hljs-attr">apiKey</span>: <span class="hljs-variable constant_">OPENAI_API_KEY</span>, });
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) { <span class="hljs-keyword">const</span> imageData = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"/home/akash/Downloads/test.png"</span>);
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> openai.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span>, <span class="hljs-attr">instructions</span>: <span class="hljs-string">"이미지의 각 행과 열에 대한 자세한 정보를 아름답게 JSON 형식으로 공유해주세요."</span>, <span class="hljs-attr">messages</span>: [ { <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>, <span class="hljs-attr">content</span>: [ { <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">"이 이미지를 분석해주세요:"</span> }, { <span class="hljs-attr">type</span>: <span class="hljs-string">"image"</span>, <span class="hljs-attr">image</span>: imageData }, ], }, ], });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">result</span>); }
<span class="hljs-title function_">main</span>();
경로 대신 이미지 <span class="hljs-variable constant_">URL</span>을 제공하십시오: <span class="hljs-attr">https</span>:<span class="hljs-comment">//www.perfectxl.com/wp-content/uploads/2020/07/pivot-table-excel-source-data.png.webp</span>
</code></pre>
<p>문제 5: 이미지에서 JSON으로 변환하기 위해 GPT-3.5-turbo를 사용하는 것은 여러 문제를 발생시킬 수 있습니다. 이미지 데이터 처리에 대한 이 모델의 본래 한계로 인해 변환 과정에서 정확성 문제가 발생할 수 있어 JSON 출력물이 불완전하거나 잘못될 수 있습니다.</p>
<div class="content-ad"></div>
<h1>5 문제 1 해결책</h1>
<p><strong>L’Oreal Paris❌</strong></p>
<p><strong>gpt-4o✅</strong></p>
<p>GPT-4은 로컬 이미지를 효율적으로 Base64 인코딩으로 변환한 다음 데이터를 구문 분석하여 이미지를 JSON으로 변환하는 도구입니다. Base64 인코딩을 사용함으로써 GPT-4은 이미지 데이터가 텍스트 친화적 형식으로 정확하게 표현되어 후속 처리 단계가 간단해지도록 보장합니다. 이 방법을 통해 다른 모델 간 전환을 줄이고 개발 워크플로우를 최적화하여 일관성을 향상시킵니다. 또한 GPT-4의 강건성은 변환 프로세스의 신뢰성과 정확성을 향상시켜 보다 정확한 JSON 출력물을 제공합니다. 이 방식은 코드 유지보수를 간편화할 뿐만 아니라 응용 프로그램 내에서 이미지 데이터를 처리하는 효율성과 효과성을 향상시킵니다.</p>
<div class="content-ad"></div>
<p>GitHub에서 예제 프로젝트를 찾을 수 있어요.</p>
<p>제 글을 읽어 주셔서 감사합니다. 추가로 더 얘기 나 질문이 있으시면 언제든지 연락해 주세요!</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"이미지에서 표를 JSON으로 추출하는 GPT-4 사용 방법","description":"","date":"2024-06-23 13:17","slug":"2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4","content":"\n\n\u003cimg src=\"/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_0.png\" /\u003e\n\nOpenAI는 모든 인류에 이익을 제공하는 인공 일반 지능(AGI)을 보장하기 위해 헌신하는 선구적인 인공 지능 연구 기관입니다. 2015년 12월 일론 머스크, 샘 알트만, 그리고 다른 유명한 기술 리더들에 의해 설립된 OpenAI는 안전하고 높은 능력을 가진 AI 시스템을 만드는 것을 목표로 합니다.\n\nGPT(생성 사전 학습 트랜스포머)는 OpenAI가 개발한 일련의 언어 모델로, 인간과 유사한 텍스트를 이해하고 생성하는 데 사용됩니다. GPT-1부터 시작해 각 버전은 규모, 정확도, 성능 면에서 점진적으로 개선되었습니다. GPT-2는 더 긴 단락을 통해 일관된 및 맥락에 맞는 텍스트를 생성할 수 있는 능력을 보여주었으며, GPT-3는 1750억 개의 매개변수로 이를 크게 확장하여 극소량의 훈련으로 여러 언어 작업을 수행할 수 있는 능력을 가졌습니다.\n\n최신 버전인 GPT-4는 더 높은 정확도, 일관성, 다재다능성을 가진 이러한 능력을 더욱 향상시킵니다. 이는 콘텐츠 생성부터 고객 서비스, 복잡한 문제 해결까지 다양한 응용 분야에서 뛰어난 성과를 내며, AI 기술의 주요 발전을 대표합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 실제 시나리오\n\n우리의 목표는 이미지에서 테이블 데이터를 읽어와 Node.js를 사용하여 JSON으로 변환하는 것입니다.\n\n입력:\n\n![이미지](/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_1.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이상적인 결과는\n\n```js\n message: {\n      role: 'assistant',\n      content: \"이미지에서 인간이 읽을 수 있는 JSON 형식으로 상세 정보를 보여드립니다:\\n\" +\n        '\\n' +\n        'json\\n' +\n        '{\\n' +\n        '  \"transactions\": [\\n' +\n        '    {\\n' +\n        '      \"date\": \"01-04-2023\",\\n' +\n        '      \"particulars\": \"B/F\",\\n' +\n        '      \"cheque_no\": \"\",\\n' +\n        '      \"withdrawals\": 0.00,\\n' +\n        '      \"deposits\": 0.00,\\n' +\n        '      \"autosweep\": 0.00,\\n' +\n        '      \"reverse_sweep\": 0.00,\\n' +\n        '      \"balance\": \"35,024.54 잔액\"\\n' +\n        '    },\\n' +\n        ...\n        '    {\\n' +\n        '      \"date\": \"29-04-2023\",\\n' +\n        '      \"particulars\": \"UPI/311976583935/Net Bank/8460615089@ybI/Karur Vysya\",\\n' +\n        '      \"cheque_no\": \"\",\\n' +\n        '      \"withdrawals\": 0.00,\\n' +\n        '      \"deposits\": 5,000.00,\\n' +\n        '      \"autosweep\": 0.00,\\n' +\n        '      \"reverse_sweep\": 0.00,\\n' +\n        '      \"balance\": \"21,104.54 잔액\"\\n' +\n        '    }\\n' +\n        '  ],\\n' +\n        '  \"totals\": {\\n' +\n        '    \"withdrawals\": 27600.00,\\n' +\n        '    \"deposits\": 13680.00,\\n' +\n        '    \"autosweep\": 0.00,\\n' +\n        '    \"reverse_sweep\": 0.00,\\n' +\n        '    \"balance\": \"21,104.54 잔액\"\\n' +\n        '  }\\n' +\n        '}\\n' +\n        ''\n    },\n```\n\n단계별로 진행해 봅시다:\n\n단계 1: 시스템에 Node.js를 설치하세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nStep 2: 새 디렉토리를 만들고 프로젝트를 설정하십시오.\n\n```js\nmkdir image-analysis\ncd image-analysis\nnpm init -y\nnpm install openai\n```\n\nStep 3: 새 파일 index.js를 만드세요.\n\n```js\nconst fs = require(\"fs\");\nconst OpenAI = require(\"openai\");\n//더 나은 보안을 위해 API 키는 .env 파일에 보관하십시오.\nconst OPENAI_API_KEY = \"your-api-key\";\nconst openai = new OpenAI({\n  apiKey: OPENAI_API_KEY,\n});\n\n// 이미지를 base64 문자열로 읽는 함수\nfunction encodeImage(imagePath) {\n  const imageData = fs.readFileSync(imagePath);\n  return imageData.toString('base64');\n}\n\nasync function main() {\n  const imagePath = \"path-of-your-image\";\n  const base64Image = encodeImage(imagePath);\n\n  const response = await openai.chat.completions.create({\n    model: \"gpt-4o\", \n    messages: [\n      {\n        role: \"system\",\n        content: \"이미지의 각 행과 열의 자세한 정보를 인간이 읽기 쉬운 형식의 멋진 JSON 형식으로 공유해 주세요.\",\n      },\n      {\n        role: \"user\",\n        content: [\n          { type: \"text\", text: \"이 이미지를 분석해 주세요:\" },\n          { type: \"image_url\", image_url: { url: `data:image/png;base64,${base64Image}` } },\n        ],\n      },\n    ],\n  });\n\n  console.log(response.choices);\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n4단계: 스크립트 실행하기\n\n```js\nnode index.js\n```\n\n출력:\n\n\u003cimg src=\"/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_2.png\" /\u003e\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n최종 솔루션에 도달하기 전 직면한 문제들:\n\n문제 1 - openai.createImage이(가) 함수가 아닙니다\n이 문제는 GPT-4에서 createImage 메서드가 사용되지 않기 때문에 발생합니다. OpenAI API에서는 더 이상 이미지를 처리하거나 생성하기 위해 이 메서드를 지원하지 않습니다. 대신, createCompletion 또는 createChatCompletion과 같은 다른 메서드를 사용하여 GPT-4 모델과 상호 작용할 수 있습니다. 이러한 메서드를 사용하면 이미지 데이터를 base64 문자열로 인코딩하여 텍스트 프롬프트 내에서 전달할 수 있습니다.\n\n```js\nconst response = await openai.createImage({\n^\n\nTypeError: openai.createImage is not a function\n```\n\n문제 2: openai 버전 4 변환.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n오픈AI의 버전 4 변환 문제와 이전 버전 방법이 작동하지 않는 문제는 버전 간의 기반이 되는 아키텍처 및 API 기능에 중요한 변화가 있기 때문에 발생합니다. 이러한 변화로 인해 호환성 문제가 발생할 수 있으며, 이전 버전과 작동했던 기존 방법 및 통합이 버전 4에서 작동하지 않을 수 있습니다. 결과적으로 개발자들은 기존 방법을 사용하려고 할 때 오류나 예상치 못한 동작을 만날 수 있으며, 이에 대응하기 위해 코드를 업데이트하고 새 버전의 사양 및 모범 사례에 적응해야 할 수도 있습니다.\n\n```js\nconst { Configuration, OpenAIApi } = require(\"openai\");\n\n// const readline = require(\"readline\");\n\nconst configuration = new Configuration({\napiKey: \"API_KEY\",\n});\n\nTypeError: Configuration is not a constructor\nat Object. (D:\\nodeJS-chatBot\\index.cjs:5:23)\nat Module._compile (node:internal/modules/cjs/loader:1226:14)\nat Module._extensions…js (node:internal/modules/cjs/loader:1280:10)\nat Module.load (node:internal/modules/cjs/loader:1089:32)\nat Module._load (node:internal/modules/cjs/loader:930:12)\nat Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)\nat node:internal/main/run_main_module:23:47\n```\n\n이 문제에 대한 해결책을 오픈AI 커뮤니티에서 찾았습니다\nhttps://chatgpt.com/share/b175130a-0d77-465e-8187-59b92590df8b\n\n문제점 3- gpt-4-vision-preview 모델이 더 이상 사용되지 않습니다\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![이미지 추출 표](/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_3.png)\n\n문제 4 - GPT-4로 이미지를 직접 업로드할 수 없어 GPT-3.5-turbo로 전환해야 하는 이유는, GPT-4가 이미지 데이터 입력을 처리하는 현재 능력 부족 때문입니다. 이 제한으로 인해 GPT-4를 통해 포괄적인 데이터 처리에 의존하는 개발자는 직접 이미지 업로드가 필요한 작업에는 모델을 전환해야 합니다. 이러한 전환은 작업 흐름을 복잡하게 만들고 개발 복잡성을 증가시키며 두 모델 간 데이터 처리 및 응답 생성에 불일치 가능성을 가져올 수 있습니다. 이러한 중단은 지연을 유발하고 원활한 사용자 경험을 유지하는 데 노력이 더 필요할 수 있습니다.\n\n```js\nreturn new BadRequestError(status, error, message, headers); ^ BadRequestError: 400 'image'가 잘못된 값입니다. 지원되는 값은 'text', 'image_url', 'audio_url'입니다.\nconst fs = require(\"fs\"); const OpenAI = require(\"openai\");\nconst OPENAI_API_KEY = \"\"; const openai = new OpenAI({ apiKey: OPENAI_API_KEY, });\nasync function main() { const imageData = fs.readFileSync(\"/home/akash/Downloads/test.png\");\nconst response = await openai.chat.completions.create({ model: \"gpt-4o\", instructions: \"이미지의 각 행과 열에 대한 자세한 정보를 아름답게 JSON 형식으로 공유해주세요.\", messages: [ { role: \"user\", content: [ { type: \"text\", text: \"이 이미지를 분석해주세요:\" }, { type: \"image\", image: imageData }, ], }, ], });\nconsole.log(response.data.result); }\nmain();\n경로 대신 이미지 URL을 제공하십시오: https://www.perfectxl.com/wp-content/uploads/2020/07/pivot-table-excel-source-data.png.webp\n```\n\n문제 5: 이미지에서 JSON으로 변환하기 위해 GPT-3.5-turbo를 사용하는 것은 여러 문제를 발생시킬 수 있습니다. 이미지 데이터 처리에 대한 이 모델의 본래 한계로 인해 변환 과정에서 정확성 문제가 발생할 수 있어 JSON 출력물이 불완전하거나 잘못될 수 있습니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 5 문제 1 해결책\n\n**L’Oreal Paris❌**\n\n**gpt-4o✅**\n\nGPT-4은 로컬 이미지를 효율적으로 Base64 인코딩으로 변환한 다음 데이터를 구문 분석하여 이미지를 JSON으로 변환하는 도구입니다. Base64 인코딩을 사용함으로써 GPT-4은 이미지 데이터가 텍스트 친화적 형식으로 정확하게 표현되어 후속 처리 단계가 간단해지도록 보장합니다. 이 방법을 통해 다른 모델 간 전환을 줄이고 개발 워크플로우를 최적화하여 일관성을 향상시킵니다. 또한 GPT-4의 강건성은 변환 프로세스의 신뢰성과 정확성을 향상시켜 보다 정확한 JSON 출력물을 제공합니다. 이 방식은 코드 유지보수를 간편화할 뿐만 아니라 응용 프로그램 내에서 이미지 데이터를 처리하는 효율성과 효과성을 향상시킵니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nGitHub에서 예제 프로젝트를 찾을 수 있어요.\n\n제 글을 읽어 주셔서 감사합니다. 추가로 더 얘기 나 질문이 있으시면 언제든지 연락해 주세요!","ogImage":{"url":"/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_0.png"},"coverImage":"/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_0.png","tag":["Tech"],"readingTime":8},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_0.png\"\u003e\n\u003cp\u003eOpenAI는 모든 인류에 이익을 제공하는 인공 일반 지능(AGI)을 보장하기 위해 헌신하는 선구적인 인공 지능 연구 기관입니다. 2015년 12월 일론 머스크, 샘 알트만, 그리고 다른 유명한 기술 리더들에 의해 설립된 OpenAI는 안전하고 높은 능력을 가진 AI 시스템을 만드는 것을 목표로 합니다.\u003c/p\u003e\n\u003cp\u003eGPT(생성 사전 학습 트랜스포머)는 OpenAI가 개발한 일련의 언어 모델로, 인간과 유사한 텍스트를 이해하고 생성하는 데 사용됩니다. GPT-1부터 시작해 각 버전은 규모, 정확도, 성능 면에서 점진적으로 개선되었습니다. GPT-2는 더 긴 단락을 통해 일관된 및 맥락에 맞는 텍스트를 생성할 수 있는 능력을 보여주었으며, GPT-3는 1750억 개의 매개변수로 이를 크게 확장하여 극소량의 훈련으로 여러 언어 작업을 수행할 수 있는 능력을 가졌습니다.\u003c/p\u003e\n\u003cp\u003e최신 버전인 GPT-4는 더 높은 정확도, 일관성, 다재다능성을 가진 이러한 능력을 더욱 향상시킵니다. 이는 콘텐츠 생성부터 고객 서비스, 복잡한 문제 해결까지 다양한 응용 분야에서 뛰어난 성과를 내며, AI 기술의 주요 발전을 대표합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e실제 시나리오\u003c/h2\u003e\n\u003cp\u003e우리의 목표는 이미지에서 테이블 데이터를 읽어와 Node.js를 사용하여 JSON으로 변환하는 것입니다.\u003c/p\u003e\n\u003cp\u003e입력:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_1.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이상적인 결과는\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e \u003cspan class=\"hljs-attr\"\u003emessage\u003c/span\u003e: {\n      \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'assistant'\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"이미지에서 인간이 읽을 수 있는 JSON 형식으로 상세 정보를 보여드립니다:\\n\"\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'json\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'{\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'  \"transactions\": [\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'    {\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"date\": \"01-04-2023\",\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"particulars\": \"B/F\",\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"cheque_no\": \"\",\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"withdrawals\": 0.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"deposits\": 0.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"autosweep\": 0.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"reverse_sweep\": 0.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"balance\": \"35,024.54 잔액\"\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'    },\\n'\u003c/span\u003e +\n        ...\n        \u003cspan class=\"hljs-string\"\u003e'    {\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"date\": \"29-04-2023\",\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"particulars\": \"UPI/311976583935/Net Bank/8460615089@ybI/Karur Vysya\",\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"cheque_no\": \"\",\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"withdrawals\": 0.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"deposits\": 5,000.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"autosweep\": 0.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"reverse_sweep\": 0.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'      \"balance\": \"21,104.54 잔액\"\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'    }\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'  ],\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'  \"totals\": {\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'    \"withdrawals\": 27600.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'    \"deposits\": 13680.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'    \"autosweep\": 0.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'    \"reverse_sweep\": 0.00,\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'    \"balance\": \"21,104.54 잔액\"\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'  }\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e'}\\n'\u003c/span\u003e +\n        \u003cspan class=\"hljs-string\"\u003e''\u003c/span\u003e\n    },\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e단계별로 진행해 봅시다:\u003c/p\u003e\n\u003cp\u003e단계 1: 시스템에 Node.js를 설치하세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eStep 2: 새 디렉토리를 만들고 프로젝트를 설정하십시오.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emkdir image-analysis\ncd image-analysis\nnpm init -y\nnpm install openai\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eStep 3: 새 파일 index.js를 만드세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e fs = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"fs\"\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOpenAI\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"openai\"\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e//더 나은 보안을 위해 API 키는 .env 파일에 보관하십시오.\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eOPENAI_API_KEY\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"your-api-key\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e openai = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOpenAI\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003eapiKey\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eOPENAI_API_KEY\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// 이미지를 base64 문자열로 읽는 함수\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eencodeImage\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eimagePath\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e imageData = fs.\u003cspan class=\"hljs-title function_\"\u003ereadFileSync\u003c/span\u003e(imagePath);\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e imageData.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'base64'\u003c/span\u003e);\n}\n\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emain\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e imagePath = \u003cspan class=\"hljs-string\"\u003e\"path-of-your-image\"\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e base64Image = \u003cspan class=\"hljs-title function_\"\u003eencodeImage\u003c/span\u003e(imagePath);\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e openai.\u003cspan class=\"hljs-property\"\u003echat\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecompletions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003emodel\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"gpt-4o\"\u003c/span\u003e, \n    \u003cspan class=\"hljs-attr\"\u003emessages\u003c/span\u003e: [\n      {\n        \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"system\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"이미지의 각 행과 열의 자세한 정보를 인간이 읽기 쉬운 형식의 멋진 JSON 형식으로 공유해 주세요.\"\u003c/span\u003e,\n      },\n      {\n        \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [\n          { \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"text\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"이 이미지를 분석해 주세요:\"\u003c/span\u003e },\n          { \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"image_url\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eimage_url\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`data:image/png;base64,\u003cspan class=\"hljs-subst\"\u003e${base64Image}\u003c/span\u003e`\u003c/span\u003e } },\n        ],\n      },\n    ],\n  });\n\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(response.\u003cspan class=\"hljs-property\"\u003echoices\u003c/span\u003e);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e4단계: 스크립트 실행하기\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enode index.\u003cspan class=\"hljs-property\"\u003ejs\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e출력:\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_2.png\"\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e최종 솔루션에 도달하기 전 직면한 문제들:\u003c/p\u003e\n\u003cp\u003e문제 1 - openai.createImage이(가) 함수가 아닙니다\n이 문제는 GPT-4에서 createImage 메서드가 사용되지 않기 때문에 발생합니다. OpenAI API에서는 더 이상 이미지를 처리하거나 생성하기 위해 이 메서드를 지원하지 않습니다. 대신, createCompletion 또는 createChatCompletion과 같은 다른 메서드를 사용하여 GPT-4 모델과 상호 작용할 수 있습니다. 이러한 메서드를 사용하면 이미지 데이터를 base64 문자열로 인코딩하여 텍스트 프롬프트 내에서 전달할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e openai.\u003cspan class=\"hljs-title function_\"\u003ecreateImage\u003c/span\u003e({\n^\n\n\u003cspan class=\"hljs-title class_\"\u003eTypeError\u003c/span\u003e: openai.\u003cspan class=\"hljs-property\"\u003ecreateImage\u003c/span\u003e is not a \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e문제 2: openai 버전 4 변환.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e오픈AI의 버전 4 변환 문제와 이전 버전 방법이 작동하지 않는 문제는 버전 간의 기반이 되는 아키텍처 및 API 기능에 중요한 변화가 있기 때문에 발생합니다. 이러한 변화로 인해 호환성 문제가 발생할 수 있으며, 이전 버전과 작동했던 기존 방법 및 통합이 버전 4에서 작동하지 않을 수 있습니다. 결과적으로 개발자들은 기존 방법을 사용하려고 할 때 오류나 예상치 못한 동작을 만날 수 있으며, 이에 대응하기 위해 코드를 업데이트하고 새 버전의 사양 및 모범 사례에 적응해야 할 수도 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eConfiguration\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eOpenAIApi\u003c/span\u003e } = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"openai\"\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// const readline = require(\"readline\");\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e configuration = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eConfiguration\u003c/span\u003e({\n\u003cspan class=\"hljs-attr\"\u003eapiKey\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"API_KEY\"\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-title class_\"\u003eTypeError\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eConfiguration\u003c/span\u003e is not a constructor\nat \u003cspan class=\"hljs-title class_\"\u003eObject\u003c/span\u003e. (\u003cspan class=\"hljs-attr\"\u003eD\u003c/span\u003e:\\nodeJS-chatBot\\index.\u003cspan class=\"hljs-property\"\u003ecjs\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e)\nat \u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_compile\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003enode\u003c/span\u003e:internal/modules/cjs/\u003cspan class=\"hljs-attr\"\u003eloader\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1226\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e14\u003c/span\u003e)\nat \u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_extensions\u003c/span\u003e…js (\u003cspan class=\"hljs-attr\"\u003enode\u003c/span\u003e:internal/modules/cjs/\u003cspan class=\"hljs-attr\"\u003eloader\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1280\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e10\u003c/span\u003e)\nat \u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eload\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003enode\u003c/span\u003e:internal/modules/cjs/\u003cspan class=\"hljs-attr\"\u003eloader\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e1089\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e)\nat \u003cspan class=\"hljs-title class_\"\u003eModule\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_load\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003enode\u003c/span\u003e:internal/modules/cjs/\u003cspan class=\"hljs-attr\"\u003eloader\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e930\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\nat \u003cspan class=\"hljs-title class_\"\u003eFunction\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eexecuteUserEntryPoint\u003c/span\u003e [\u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e runMain] (\u003cspan class=\"hljs-attr\"\u003enode\u003c/span\u003e:internal/modules/\u003cspan class=\"hljs-attr\"\u003erun_main\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e81\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e)\nat \u003cspan class=\"hljs-attr\"\u003enode\u003c/span\u003e:internal/main/\u003cspan class=\"hljs-attr\"\u003erun_main_module\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e23\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e47\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e이 문제에 대한 해결책을 오픈AI 커뮤니티에서 찾았습니다\n\u003ca href=\"https://chatgpt.com/share/b175130a-0d77-465e-8187-59b92590df8b\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://chatgpt.com/share/b175130a-0d77-465e-8187-59b92590df8b\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e문제점 3- gpt-4-vision-preview 모델이 더 이상 사용되지 않습니다\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4_3.png\" alt=\"이미지 추출 표\"\u003e\u003c/p\u003e\n\u003cp\u003e문제 4 - GPT-4로 이미지를 직접 업로드할 수 없어 GPT-3.5-turbo로 전환해야 하는 이유는, GPT-4가 이미지 데이터 입력을 처리하는 현재 능력 부족 때문입니다. 이 제한으로 인해 GPT-4를 통해 포괄적인 데이터 처리에 의존하는 개발자는 직접 이미지 업로드가 필요한 작업에는 모델을 전환해야 합니다. 이러한 전환은 작업 흐름을 복잡하게 만들고 개발 복잡성을 증가시키며 두 모델 간 데이터 처리 및 응답 생성에 불일치 가능성을 가져올 수 있습니다. 이러한 중단은 지연을 유발하고 원활한 사용자 경험을 유지하는 데 노력이 더 필요할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBadRequestError\u003c/span\u003e(status, error, message, headers); ^ \u003cspan class=\"hljs-title class_\"\u003eBadRequestError\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'image'\u003c/span\u003e가 잘못된 값입니다. 지원되는 값은 \u003cspan class=\"hljs-string\"\u003e'text'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'image_url'\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'audio_url'\u003c/span\u003e입니다.\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e fs = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"fs\"\u003c/span\u003e); \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOpenAI\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003erequire\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"openai\"\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eOPENAI_API_KEY\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e; \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e openai = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOpenAI\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eapiKey\u003c/span\u003e: \u003cspan class=\"hljs-variable constant_\"\u003eOPENAI_API_KEY\u003c/span\u003e, });\n\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emain\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) { \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e imageData = fs.\u003cspan class=\"hljs-title function_\"\u003ereadFileSync\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/home/akash/Downloads/test.png\"\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e openai.\u003cspan class=\"hljs-property\"\u003echat\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecompletions\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003emodel\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"gpt-4o\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003einstructions\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"이미지의 각 행과 열에 대한 자세한 정보를 아름답게 JSON 형식으로 공유해주세요.\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emessages\u003c/span\u003e: [ { \u003cspan class=\"hljs-attr\"\u003erole\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003econtent\u003c/span\u003e: [ { \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"text\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003etext\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"이 이미지를 분석해주세요:\"\u003c/span\u003e }, { \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"image\"\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: imageData }, ], }, ], });\n\u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(response.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eresult\u003c/span\u003e); }\n\u003cspan class=\"hljs-title function_\"\u003emain\u003c/span\u003e();\n경로 대신 이미지 \u003cspan class=\"hljs-variable constant_\"\u003eURL\u003c/span\u003e을 제공하십시오: \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//www.perfectxl.com/wp-content/uploads/2020/07/pivot-table-excel-source-data.png.webp\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e문제 5: 이미지에서 JSON으로 변환하기 위해 GPT-3.5-turbo를 사용하는 것은 여러 문제를 발생시킬 수 있습니다. 이미지 데이터 처리에 대한 이 모델의 본래 한계로 인해 변환 과정에서 정확성 문제가 발생할 수 있어 JSON 출력물이 불완전하거나 잘못될 수 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e5 문제 1 해결책\u003c/h1\u003e\n\u003cp\u003e\u003cstrong\u003eL’Oreal Paris❌\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003egpt-4o✅\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eGPT-4은 로컬 이미지를 효율적으로 Base64 인코딩으로 변환한 다음 데이터를 구문 분석하여 이미지를 JSON으로 변환하는 도구입니다. Base64 인코딩을 사용함으로써 GPT-4은 이미지 데이터가 텍스트 친화적 형식으로 정확하게 표현되어 후속 처리 단계가 간단해지도록 보장합니다. 이 방법을 통해 다른 모델 간 전환을 줄이고 개발 워크플로우를 최적화하여 일관성을 향상시킵니다. 또한 GPT-4의 강건성은 변환 프로세스의 신뢰성과 정확성을 향상시켜 보다 정확한 JSON 출력물을 제공합니다. 이 방식은 코드 유지보수를 간편화할 뿐만 아니라 응용 프로그램 내에서 이미지 데이터를 처리하는 효율성과 효과성을 향상시킵니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eGitHub에서 예제 프로젝트를 찾을 수 있어요.\u003c/p\u003e\n\u003cp\u003e제 글을 읽어 주셔서 감사합니다. 추가로 더 얘기 나 질문이 있으시면 언제든지 연락해 주세요!\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-23-ExtractingTablesfromImagestoJSONUsingGPT-4"},"buildId":"aCCUs-qPrLLLWRnkN0AOd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>