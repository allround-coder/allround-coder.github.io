<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>도커 없이 Optimism 노드 실행하는 방법 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-17-RunningOptimismNodewithoutDocker" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="도커 없이 Optimism 노드 실행하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="도커 없이 Optimism 노드 실행하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-17-RunningOptimismNodewithoutDocker" data-gatsby-head="true"/><meta name="twitter:title" content="도커 없이 Optimism 노드 실행하는 방법 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-17 03:55" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/t9N7vwmpvBMQnO2PSctoH/_buildManifest.js" defer=""></script><script src="/_next/static/t9N7vwmpvBMQnO2PSctoH/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">도커 없이 Optimism 노드 실행하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="도커 없이 Optimism 노드 실행하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 17, 2024</span><span class="posts_reading_time__f7YPP">13<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-17-RunningOptimismNodewithoutDocker&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_0.png" alt="Optimism node"></p>
<p>Optimism 노드를 설치하는 것은 매우 간단합니다. 다른 슈퍼체인과 달리 많은 설정이 기본값으로 설정되어 있기 때문입니다.</p>
<p>그래서 Docker 없이 스냅 동기화 모드로 Optimism 노드를 실행하는 방법을 설명하겠습니다. "Docker 없이 베이스 노드 실행하기: 파트 2"에서 파생된 글입니다.</p>
<p>본 문서에서는 다음과 같은 설정을 하게 됩니다:</p>
<ul>
<li><code>/etc/environment</code>에 환경 변수 설정하기</li>
<li>op-node 및 op-geth용 systemd 파일 생성하기</li>
<li>op-node 및 op-geth 로그를 보존하기 위한 rsyslog 구성 파일 생성하기</li>
<li>op-node 및 op-geth용 로그 회전 파일 생성하기</li>
</ul>
<h1>1. op-node 및 op-geth 설치하기</h1>
<p>다음 단계로 진행하기 전에 "Running Base Node without Docker: Part 1" 글을 참고하여 op-geth와 op-node를 설치해야 합니다.</p>
<h1>2. <code>/etc/environment</code>에 Optimism 노드 환경 변수 추가 및 데이터 디렉토리 생성</h1>
<h2>2–1. 당신의 노드에 <code>/etc/environment</code> 파일에 다음 템플릿을 추가해주세요.</h2>
<pre><code class="hljs language-js">##########################
#### <span class="hljs-variable constant_">OPTIMISM</span> <span class="hljs-variable constant_">SETTING</span> ####
##########################
<span class="hljs-variable constant_">OP_GETH_SEQUENCER_HTTP</span>=<span class="hljs-attr">https</span>:<span class="hljs-comment">//mainnet-sequencer.optimism.io</span>
# [필수] 선호하는 <span class="hljs-variable constant_">L1</span> 노드 <span class="hljs-variable constant_">RPC</span> <span class="hljs-variable constant_">URL</span>로 변경해주세요:
<span class="hljs-variable constant_">OP_NODE_L1_ETH_RPC</span>=[귀하의 <span class="hljs-variable constant_">L1</span> <span class="hljs-variable constant_">ETH</span> <span class="hljs-variable constant_">RPC</span>]
# [필수] 선호하는 <span class="hljs-variable constant_">L1</span> <span class="hljs-variable constant_">CL</span> 비컨 엔드포인트로 변경해주세요:
<span class="hljs-variable constant_">OP_NODE_L1_BEACON</span>=[귀하의 <span class="hljs-variable constant_">L1</span> <span class="hljs-variable constant_">BEACON</span> <span class="hljs-variable constant_">RPC</span>]
# [필수] 공용 <span class="hljs-variable constant_">IP</span> 주소로 변경해주세요:
<span class="hljs-variable constant_">OP_NODE_P2P_ADVERTISE_IP</span>=[귀하의 공용 <span class="hljs-variable constant_">IP</span> 주소]
<span class="hljs-variable constant_">OP_NODE_BETA_EXTRA_NETWORKS</span>=<span class="hljs-literal">true</span>
<span class="hljs-variable constant_">OP_NODE_L2_ENGINE_AUTH</span>=<span class="hljs-regexp">/home/</span>ethereum/data/engine-auth-jwt
<span class="hljs-variable constant_">OP_NODE_L2_ENGINE_RPC</span>=<span class="hljs-attr">ws</span>:<span class="hljs-comment">//localhost:8551</span>
<span class="hljs-variable constant_">OP_NODE_LOG_LEVEL</span>=info
<span class="hljs-variable constant_">OP_NODE_METRICS_ADDR</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-variable constant_">OP_NODE_METRICS_ENABLED</span>=<span class="hljs-literal">true</span>
<span class="hljs-variable constant_">OP_NODE_METRICS_PORT</span>=<span class="hljs-number">7300</span>
<span class="hljs-variable constant_">OP_NODE_NETWORK</span>=op-mainnet
<span class="hljs-variable constant_">OP_NODE_P2P_LISTEN_IP</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-variable constant_">OP_NODE_P2P_LISTEN_TCP_PORT</span>=<span class="hljs-number">9001</span>
<span class="hljs-variable constant_">OP_NODE_P2P_LISTEN_UDP_PORT</span>=<span class="hljs-number">9001</span>
<span class="hljs-variable constant_">OP_NODE_P2P_PRIV_PATH</span>=<span class="hljs-regexp">/home/</span>ethereum/data/opnode_p2p_priv.<span class="hljs-property">txt</span>
<span class="hljs-variable constant_">OP_NODE_P2P_DISCOVERY_PATH</span>=<span class="hljs-regexp">/home/</span>ethereum/data/opnode_discovery_db
<span class="hljs-variable constant_">OP_NODE_P2P_PEERSTORE_PATH</span>=<span class="hljs-regexp">/home/</span>ethereum/data/opnode_peerstore_db
<span class="hljs-variable constant_">OP_NODE_RPC_ADDR</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-variable constant_">OP_NODE_RPC_PORT</span>=<span class="hljs-number">8547</span>
<span class="hljs-variable constant_">OP_NODE_SNAPSHOT_LOG</span>=<span class="hljs-regexp">/home/</span>ethereum/data/op-node-snapshot-log
<span class="hljs-variable constant_">OP_NODE_VERIFIER_L1_CONFS</span>=<span class="hljs-number">4</span>
<span class="hljs-variable constant_">OP_NODE_ROLLUP_LOAD_PROTOCOL_VERSIONS</span>=<span class="hljs-literal">true</span>
<span class="hljs-variable constant_">OP_NODE_SYNCMODE</span>=execution-layer
# <span class="hljs-variable constant_">OP_NODE_L1_TRUST_RPC</span> 는 더 빠른 동기화를 지원하지만, 사용 시 반드시 <span class="hljs-variable constant_">L1</span> <span class="hljs-variable constant_">RPC</span> 노드가 완전히 신뢰성 있는 경우에만 사용해야 합니다.
# 또한 이는 저장 증명을 지원하지 않는 <span class="hljs-title class_">Erigon</span>과 같은 클라이언트와 함께 작동할 수 있도록 합니다:
<span class="hljs-variable constant_">OP_NODE_L1_TRUST_RPC</span>=<span class="hljs-literal">true</span>
<span class="hljs-variable constant_">GETH_DATA_DIR</span>=<span class="hljs-regexp">/home/</span>ethereum/data
<span class="hljs-variable constant_">VERBOSITY</span>=<span class="hljs-number">3</span>
<span class="hljs-variable constant_">RPC_PORT</span>=<span class="hljs-number">8545</span>
<span class="hljs-variable constant_">WS_PORT</span>=<span class="hljs-number">8546</span>
<span class="hljs-variable constant_">AUTHRPC_PORT</span>=<span class="hljs-number">8551</span>
<span class="hljs-variable constant_">METRICS_PORT</span>=<span class="hljs-number">6060</span>
<span class="hljs-variable constant_">HOST_IP</span>=<span class="hljs-string">"0.0.0.0"</span>
<span class="hljs-variable constant_">P2P_PORT</span>=<span class="hljs-number">30304</span>
<span class="hljs-variable constant_">OP_GETH_GCMODE</span>=full
<span class="hljs-variable constant_">OP_GETH_SYNCMODE</span>=snap
</code></pre>
<h2>2–2. 당신의 네트워크에 대한 값 변경하기</h2>
<p>아래 세 가지 변수를 변경해야 합니다.</p>
<p>OP_NODE_L1_ETH_RPC: 귀하의 L1 노드 (이더리움) RPC URL 또는 L1 PRC 노드 공급 업체 URL입니다.</p>
<ul>
<li>예시 (게속 RPC)</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">OP_NODE_L1_ETH_RPC</span>=<span class="hljs-attr">http</span>:<span class="hljs-comment">//192.168.1.2:8545</span>
</code></pre>
<p>OP_NODE_L1_BEACON: 귀하의 L1 노드 (이더리움) Beacon RPC URL 또는 L1 Beacon 노드 공급 업체 URL입니다.</p>
<ul>
<li>예시 (등대 비콘 rpc)</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">OP_NODE_L1_BEACON</span>=<span class="hljs-attr">http</span>:<span class="hljs-comment">//192.168.1.2:5052</span>
</code></pre>
<p>OP_NODE_P2P_ADVERTISE_IP: 공용 IP 주소(개인 IP 주소가 아닙니다!)</p>
<ul>
<li>예시</li>
</ul>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">OP_NODE_P2P_ADVERTISE_IP</span>=<span class="hljs-number">34.149</span><span class="hljs-number">.58</span><span class="hljs-number">.211</span>
</code></pre>
<p>참고:
공개 IP 주소를 모르는 경우 노드에서 다음 명령을 사용하여 찾을 수 있습니다.</p>
<pre><code class="hljs language-js">$ curl <span class="hljs-attr">http</span>:<span class="hljs-comment">//api.ipify.org</span>
<span class="hljs-number">34.149</span><span class="hljs-number">.58</span><span class="hljs-number">.211</span>
</code></pre>
<p>(선택 사항) 다른 P2P 포트를 사용하거나 L1 RPC를 신뢰하지 않는 경우 환경에 맞게 변경해야 합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">P2P_PORT</span>=<span class="hljs-number">30304</span> # op-geth용 <span class="hljs-variable constant_">P2P</span> 포트
<span class="hljs-variable constant_">OP_NODE_P2P_LISTEN_TCP_PORT</span>=<span class="hljs-number">9001</span> # op-node용 <span class="hljs-variable constant_">TCP</span> <span class="hljs-variable constant_">P2P</span> 수신 포트
<span class="hljs-variable constant_">OP_NODE_P2P_LISTEN_UDP_PORT</span>=<span class="hljs-number">9001</span> # op-node용 <span class="hljs-variable constant_">UDP</span> <span class="hljs-variable constant_">P2P</span> 수신 포트
<span class="hljs-variable constant_">OP_NODE_L1_TRUST_RPC</span>=<span class="hljs-literal">true</span> # <span class="hljs-variable constant_">L1</span> <span class="hljs-variable constant_">RPC</span>를 신뢰하는 경우 <span class="hljs-literal">true</span>로 설정합니다.
</code></pre>
<p>위의 변경 사항을 기반으로 예시 /etc/environment 파일은 다음과 같습니다:</p>
<pre><code class="hljs language-js">sudo vim /etc/environments
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">PATH</span>=<span class="hljs-string">"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin"</span>

##########################
#### <span class="hljs-variable constant_">OPTIMISM</span> 설정 ####
##########################
<span class="hljs-variable constant_">OP_GETH_SEQUENCER_HTTP</span>=<span class="hljs-attr">https</span>:<span class="hljs-comment">//mainnet-sequencer.optimism.io</span>
# [필수] 선호하는 <span class="hljs-variable constant_">L1</span> 노드 <span class="hljs-variable constant_">RPC</span> <span class="hljs-variable constant_">URL</span>로 교체:
<span class="hljs-variable constant_">OP_NODE_L1_ETH_RPC</span>=<span class="hljs-attr">http</span>:<span class="hljs-comment">//192.168.1.2:8545</span>
# [필수] 선호하는 <span class="hljs-variable constant_">L1</span> <span class="hljs-variable constant_">CL</span> beacon 엔드포인트로 교체:
<span class="hljs-variable constant_">OP_NODE_L1_BEACON</span>=<span class="hljs-attr">http</span>:<span class="hljs-comment">//192.168.1.2:5052</span>
# 공인 <span class="hljs-variable constant_">IP</span> 주소로 교체
<span class="hljs-variable constant_">OP_NODE_P2P_ADVERTISE_IP</span>=<span class="hljs-number">34.149</span><span class="hljs-number">.58</span><span class="hljs-number">.211</span>
<span class="hljs-variable constant_">OP_NODE_BETA_EXTRA_NETWORKS</span>=<span class="hljs-literal">true</span>
<span class="hljs-variable constant_">OP_NODE_L2_ENGINE_AUTH</span>=<span class="hljs-regexp">/home/</span>ethereum/data/engine-auth-jwt
<span class="hljs-variable constant_">OP_NODE_L2_ENGINE_RPC</span>=<span class="hljs-attr">ws</span>:<span class="hljs-comment">//localhost:8551</span>
<span class="hljs-variable constant_">OP_NODE_LOG_LEVEL</span>=info
<span class="hljs-variable constant_">OP_NODE_METRICS_ADDR</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-variable constant_">OP_NODE_METRICS_ENABLED</span>=<span class="hljs-literal">true</span>
<span class="hljs-variable constant_">OP_NODE_METRICS_PORT</span>=<span class="hljs-number">7300</span>
<span class="hljs-variable constant_">OP_NODE_NETWORK</span>=op-mainnet
<span class="hljs-variable constant_">OP_NODE_P2P_LISTEN_IP</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-variable constant_">OP_NODE_P2P_LISTEN_TCP_PORT</span>=<span class="hljs-number">9001</span>
<span class="hljs-variable constant_">OP_NODE_P2P_LISTEN_UDP_PORT</span>=<span class="hljs-number">9001</span>
<span class="hljs-variable constant_">OP_NODE_P2P_PRIV_PATH</span>=<span class="hljs-regexp">/home/</span>ethereum/data/opnode_p2p_priv.<span class="hljs-property">txt</span>
<span class="hljs-variable constant_">OP_NODE_P2P_DISCOVERY_PATH</span>=<span class="hljs-regexp">/home/</span>ethereum/data/opnode_discovery_db
<span class="hljs-variable constant_">OP_NODE_P2P_PEERSTORE_PATH</span>=<span class="hljs-regexp">/home/</span>ethereum/data/opnode_peerstore_db
<span class="hljs-variable constant_">OP_NODE_RPC_ADDR</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-variable constant_">OP_NODE_RPC_PORT</span>=<span class="hljs-number">8547</span>
<span class="hljs-variable constant_">OP_NODE_SNAPSHOT_LOG</span>=<span class="hljs-regexp">/home/</span>ethereum/data/op-node-snapshot-log
<span class="hljs-variable constant_">OP_NODE_VERIFIER_L1_CONFS</span>=<span class="hljs-number">4</span>
<span class="hljs-variable constant_">OP_NODE_ROLLUP_LOAD_PROTOCOL_VERSIONS</span>=<span class="hljs-literal">true</span>
<span class="hljs-variable constant_">OP_NODE_SYNCMODE</span>=execution-layer

# <span class="hljs-variable constant_">OP_NODE_L1_TRUST_RPC</span>를 사용하면 더 빠른 동기화가 가능하지만, <span class="hljs-variable constant_">L1</span> <span class="hljs-variable constant_">RPC</span> 노드를
# 완전히 신뢰하는 경우에만 사용해야 합니다.
# 또한 storage proofs를 지원하지 않는 <span class="hljs-title class_">Erigon</span>과 같은 클라이언트와 상호 작용하도록 합니다:
<span class="hljs-variable constant_">OP_NODE_L1_TRUST_RPC</span>=<span class="hljs-literal">true</span>

<span class="hljs-variable constant_">OP_NODE_SYNCMODE</span>=execution-layer
<span class="hljs-variable constant_">GETH_DATA_DIR</span>=<span class="hljs-regexp">/home/</span>ethereum/data
<span class="hljs-variable constant_">VERBOSITY</span>=<span class="hljs-number">3</span>
<span class="hljs-variable constant_">RPC_PORT</span>=<span class="hljs-number">8545</span>
<span class="hljs-variable constant_">WS_PORT</span>=<span class="hljs-number">8546</span>
<span class="hljs-variable constant_">AUTHRPC_PORT</span>=<span class="hljs-number">8551</span>
<span class="hljs-variable constant_">METRICS_PORT</span>=<span class="hljs-number">6060</span>
<span class="hljs-variable constant_">HOST_IP</span>=<span class="hljs-string">"0.0.0.0"</span>
<span class="hljs-variable constant_">P2P_PORT</span>=<span class="hljs-number">30304</span>
<span class="hljs-variable constant_">OP_GETH_GCMODE</span>=full
<span class="hljs-variable constant_">OP_GETH_SYNCMODE</span>=snap
</code></pre>
<h2>2-3. 블록체인 데이터를 보존하기 위한 data 디렉토리 생성</h2>
<pre><code class="hljs language-js">$ cd ~
$ mkdir data
</code></pre>
<p>당신의 환경에 기반하여 Optimism 노드 환경 변수를 성공적으로 설정하셨습니다.</p>
<h1>3. op-node systemd 파일 생성</h1>
<pre><code class="hljs language-bash">$ sudo <span class="hljs-built_in">touch</span> /etc/systemd/system/op-node.service
$ sudo vim /etc/systemd/system/op-node.service
</code></pre>
<p>다음 내용을 붙여넣고 저장하세요.</p>
<pre><code class="hljs language-bash">[Unit]
Description=Optimistic Node Client
After=network.target

[Service]
User=ethereum
Group=ethereum
Environment=HOME=/home/ethereum
EnvironmentFile=/etc/environment
Type=simple
ExecStart=/usr/bin/op-node
KillMode=process
KillSignal=SIGINT
TimeoutStopSec=90
Restart=on-failure
RestartSec=10s
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=op-node

[Install]
WantedBy=multi-user.target
</code></pre>
<p>op-node systemd 파일을 성공적으로 생성했습니다.</p>
<h1>4. op-geth systemd 파일 만들기</h1>
<pre><code class="hljs language-js">$ sudo touch /etc/systemd/system/op-geth.<span class="hljs-property">service</span>
$ sudo vim /etc/systemd/system/op-geth.<span class="hljs-property">service</span>
</code></pre>
<p>다음 내용을 붙여 넣고 저장하세요.</p>
<pre><code class="hljs language-js">[<span class="hljs-title class_">Unit</span>]
<span class="hljs-title class_">Description</span>=옵티미즘 <span class="hljs-title class_">Go</span>-이더리움 클라이언트
<span class="hljs-title class_">After</span>=network.<span class="hljs-property">target</span>

[<span class="hljs-title class_">Service</span>]
<span class="hljs-title class_">User</span>=ethereum
<span class="hljs-title class_">Group</span>=ethereum
<span class="hljs-title class_">Environment</span>=<span class="hljs-variable constant_">HOME</span>=<span class="hljs-regexp">/home/</span>ethereum
<span class="hljs-title class_">EnvironmentFile</span>=<span class="hljs-regexp">/etc/</span>environment
<span class="hljs-title class_">Type</span>=simple
<span class="hljs-title class_">ExecStart</span>=<span class="hljs-regexp">/usr/</span>bin/op-geth --datadir=<span class="hljs-string">"${GETH_DATA_DIR}"</span> \
--verbosity=<span class="hljs-string">"${VERBOSITY}"</span> \
--http --http.<span class="hljs-property">corsdomain</span>=<span class="hljs-string">"*"</span> \
--http.<span class="hljs-property">vhosts</span>=<span class="hljs-string">"*"</span> \
--http.<span class="hljs-property">addr</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> \
--http.<span class="hljs-property">port</span>=<span class="hljs-string">"${RPC_PORT}"</span> \
--http.<span class="hljs-property">api</span>=web3,debug,eth,net,engine \
--authrpc.<span class="hljs-property">addr</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> \
--authrpc.<span class="hljs-property">port</span>=<span class="hljs-string">"${AUTHRPC_PORT}"</span> \
--authrpc.<span class="hljs-property">vhosts</span>=<span class="hljs-string">"*"</span> \
--authrpc.<span class="hljs-property">jwtsecret</span>=<span class="hljs-string">"${OP_NODE_L2_ENGINE_AUTH}"</span> \
--ws \
--ws.<span class="hljs-property">addr</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> \
--ws.<span class="hljs-property">port</span>=<span class="hljs-string">"${WS_PORT}"</span> \
--ws.<span class="hljs-property">origins</span>=<span class="hljs-string">"*"</span> \
--ws.<span class="hljs-property">api</span>=debug,eth,net,engine \
--metrics \
--metrics.<span class="hljs-property">addr</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span> \
--metrics.<span class="hljs-property">port</span>=<span class="hljs-string">"${METRICS_PORT}"</span> \
--syncmode=<span class="hljs-string">"${OP_GETH_SYNCMODE}"</span> \
--gcmode=<span class="hljs-string">"${OP_GETH_GCMODE}"</span> \
--maxpeers=<span class="hljs-number">100</span> \
--nat=<span class="hljs-attr">extip</span>:${<span class="hljs-variable constant_">HOST_IP</span>} \
--rollup.<span class="hljs-property">sequencerhttp</span>=<span class="hljs-string">"${OP_GETH_SEQUENCER_HTTP}"</span> \
--rollup.<span class="hljs-property">halt</span>=major \
--op-network=<span class="hljs-string">"${OP_NODE_NETWORK}"</span> \
--port=<span class="hljs-string">"${P2P_PORT}"</span> \
--rollup.<span class="hljs-property">disabletxpoolgossip</span>=<span class="hljs-literal">true</span> \
--state.<span class="hljs-property">scheme</span>=path

<span class="hljs-title class_">KillMode</span>=process
<span class="hljs-title class_">KillSignal</span>=<span class="hljs-variable constant_">SIGINT</span>
<span class="hljs-title class_">TimeoutStopSec</span>=<span class="hljs-number">90</span>
<span class="hljs-title class_">Restart</span>=on-failure
<span class="hljs-title class_">RestartSec</span>=10s
<span class="hljs-title class_">StandardOutput</span>=syslog
<span class="hljs-title class_">StandardError</span>=syslog
<span class="hljs-title class_">SyslogIdentifier</span>=op-geth

[<span class="hljs-title class_">Install</span>]
<span class="hljs-title class_">WantedBy</span>=multi-user.<span class="hljs-property">target</span>
</code></pre>
<p>테이블 태그를 마크다운 형식으로 변경해주세요.</p>
<h1>5. 로그 보존을 위한 rsyslog 구성 파일 생성</h1>
<h2>5-1. op-node rsyslog 구성 파일</h2>
<pre><code class="hljs language-js">$ sudo touch /etc/rsyslog.<span class="hljs-property">d</span>/<span class="hljs-number">24</span>-op-node.<span class="hljs-property">conf</span>
$ sudo vim /etc/rsyslog.<span class="hljs-property">d</span>/<span class="hljs-number">24</span>-op-node.<span class="hljs-property">conf</span>
</code></pre>
<p>아래 설정을 붙여넣고 저장하세요.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">if</span> $programname == <span class="hljs-string">'op-node'</span> then /<span class="hljs-keyword">var</span>/log/op-node.<span class="hljs-property">log</span>
<span class="hljs-keyword">if</span> $programname == <span class="hljs-string">'op-node'</span> then ~
</code></pre>
<h2>5-2. op-geth rsyslog 구성 파일</h2>
<p>$ sudo touch /etc/rsyslog.d/25-op-geth.conf
$ sudo vim /etc/rsyslog.d/25-op-geth.conf</p>
<p>참고:
선호하는 파일 이름으로 변경해주세요.</p>
<p>다음 설정을 붙여넣고 저장하세요.</p>
<p>if $programname == 'op-geth' then /var/log/op-geth.log
if $programname == 'op-geth' then ~</p>
<h2>5-3. rsyslog 데몬 재시작</h2>
<pre><code class="hljs language-js">$ sudo systemctl restart rsyslog
</code></pre>
<h2>6. 로그 회전 구성 파일 생성</h2>
<p>로그를 회전하지 않으면 많은 디스크 공간을 사용하므로 로그 회전을 설정해야 합니다.</p>
<pre><code class="hljs language-shell"><span class="hljs-meta prompt_">$ </span><span class="bash">sudo <span class="hljs-built_in">touch</span> /etc/logrotate.d/op-client</span>
<span class="hljs-meta prompt_">$ </span><span class="bash">sudo vim /etc/logrotate.d/op-client</span>
</code></pre>
<p>노트:
원하시는 이름으로 파일 이름을 변경하세요.</p>
<p>다음 설정을 붙여넣고 저장하세요.</p>
<pre><code class="hljs language-shell">/var/log/op-node.log
/var/log/op-geth.log
{
        rotate 4
        weekly
        missingok
        notifempty
        compress
        delaycompress
        sharedscripts
        postrotate
                [ -x /usr/lib/rsyslog/rsyslog-rotate ] &#x26;&#x26; /usr/lib/rsyslog/rsyslog-rotate || true
        endscript
}
</code></pre>
<h1>7. 옵티미즘 노드 실행하기</h1>
<p>축하합니다! 드디어 옵티미즘 노드를 실행할 시간이 왔습니다.</p>
<h2>7-1. op-node 실행</h2>
<pre><code class="hljs language-js">$ sudo systemctl enable op-node
$ sudo systemctl start op-node
$ sudo systemctl status -l op-node
● op-node.<span class="hljs-property">service</span> - <span class="hljs-title class_">Optimistic</span> <span class="hljs-title class_">Node</span> <span class="hljs-title class_">Client</span>
     <span class="hljs-title class_">Loaded</span>: loaded (<span class="hljs-regexp">/etc/</span>systemd/system/op-node.<span class="hljs-property">service</span>; disabled; vendor <span class="hljs-attr">preset</span>: enabled)
     <span class="hljs-title class_">Active</span>: active (running) since <span class="hljs-title class_">Wed</span> <span class="hljs-number">2024</span>-<span class="hljs-number">05</span>-<span class="hljs-number">08</span> <span class="hljs-number">20</span>:<span class="hljs-number">32</span>:<span class="hljs-number">32</span> <span class="hljs-variable constant_">JST</span>; 16h ago
   <span class="hljs-title class_">Main</span> <span class="hljs-attr">PID</span>: <span class="hljs-number">259669</span> (op-node)
      <span class="hljs-title class_">Tasks</span>: <span class="hljs-number">16</span> (<span class="hljs-attr">limit</span>: <span class="hljs-number">18542</span>)
     <span class="hljs-title class_">Memory</span>: <span class="hljs-number">786.</span>9M
     <span class="hljs-title class_">CGroup</span>: <span class="hljs-regexp">/system.slice/</span>op-node.<span class="hljs-property">service</span>
             └─<span class="hljs-number">259669</span> /usr/bin/op-node
</code></pre>
<h2>7–2. op-geth 실행하기</h2>
<pre><code class="hljs language-js">$ sudo systemctl enable op-geth
$ sudo systemctl start op-geth
$ sudo systemctl status -l op-geth
● op-geth.<span class="hljs-property">service</span> - <span class="hljs-title class_">Optimism</span> <span class="hljs-title class_">Go</span>-ethereum client
     <span class="hljs-title class_">Loaded</span>: loaded (<span class="hljs-regexp">/etc/</span>systemd/system/op-geth.<span class="hljs-property">service</span>; disabled; vendor <span class="hljs-attr">preset</span>: enabled)
     <span class="hljs-title class_">Active</span>: active (running) since <span class="hljs-title class_">Wed</span> <span class="hljs-number">2024</span>-<span class="hljs-number">05</span>-<span class="hljs-number">08</span> <span class="hljs-number">20</span>:<span class="hljs-number">36</span>:<span class="hljs-number">22</span> <span class="hljs-variable constant_">JST</span>; 16h ago
   <span class="hljs-title class_">Main</span> <span class="hljs-attr">PID</span>: <span class="hljs-number">259742</span> (op-geth)
      <span class="hljs-title class_">Tasks</span>: <span class="hljs-number">37</span> (<span class="hljs-attr">limit</span>: <span class="hljs-number">18542</span>)
     <span class="hljs-title class_">Memory</span>: <span class="hljs-number">13.</span>8G
     <span class="hljs-title class_">CGroup</span>: <span class="hljs-regexp">/system.slice/</span>op-geth.<span class="hljs-property">service</span>
             └─<span class="hljs-number">259742</span> /usr/bin/op-geth --datadir=<span class="hljs-regexp">/home/</span>ethereum/data --verbosity=<span class="hljs-number">3</span> --http --http.<span class="hljs-property">corsdomain</span>=* --http.<span class="hljs-property">vhosts</span>=* --http>
</code></pre>
<h2>7–3. 로그 확인하기</h2>
<p>다음 명령어를 사용하여 로그를 확인할 수 있어요:</p>
<pre><code class="hljs language-js">$ sudo tail -f /<span class="hljs-keyword">var</span>/log/op-geth.<span class="hljs-property">log</span>
$ sudo tail -f /<span class="hljs-keyword">var</span>/log/op-node.<span class="hljs-property">log</span>
</code></pre>
<p>성공적으로 실행하면, op-node와 op-geth에서 다음과 같은 로그가 기록될 거예요:</p>
<ul>
<li>Left (op-node), Right (op-geth)</li>
</ul>
<p><img src="/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_1.png" alt="image 1"></p>
<p>Roughly within 20 hours, op-geth will complete syncing with snap mode, as shown in the following image.</p>
<p><img src="/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_2.png" alt="image 2"></p>
<ul>
<li>Synced Example</li>
</ul>
<p>다음 명령어를 사용하여 공개 Optimism 노드 블록 번호와 귀하의 Optimism 노드 블록 번호를 비교할 수 있습니다.</p>
<ul>
<li>공개 Optimism 노드에서 최신 블록 번호 가져오기</li>
</ul>
<pre><code class="hljs language-js">$ curl -sX <span class="hljs-variable constant_">POST</span> -H <span class="hljs-string">"Content-Type: application/json"</span> \
-d <span class="hljs-string">'{"jsonrpc": "2.0", "method": "eth_blockNumber", "params": [], "id":1}'</span> \
<span class="hljs-attr">https</span>:<span class="hljs-comment">//mainnet.optimism.io/ \</span>
| jq -r <span class="hljs-string">".result"</span> | printf <span class="hljs-string">"%d\n"</span> $(cat -)
</code></pre>
<ul>
<li>로컬 노드에서 최신 블록 번호 가져오기</li>
</ul>
<pre><code class="hljs language-js">$ curl -sX <span class="hljs-variable constant_">POST</span> -H <span class="hljs-string">"Content-Type: application/json"</span> \
-d <span class="hljs-string">'{"jsonrpc": "2.0", "method": "eth_blockNumber", "params": [], "id":1}'</span> \
<span class="hljs-attr">http</span>:<span class="hljs-comment">//localhost:8545/ \</span>
| jq -r <span class="hljs-string">".result"</span> | printf <span class="hljs-string">"%d\n"</span> $(cat -)
</code></pre>
<ul>
<li>출력 예시</li>
</ul>
<h1>첨부 1: 데이터 축소 시나리오</h1>
<p>만약 노드가 제대로 중지되지 않거나 갑작스럽게 정전이 발생하면 데이터가 손상될 수 있습니다. 데이터 디렉토리를 삭제하여 깨끗한 상태로 다시 시작할 수 있습니다.</p>
<pre><code class="hljs language-js">$ sudo systemctl stop op-node
$ sudo systemctl stop op-geth
$ cd ~
$ rm -<span class="hljs-title class_">Rf</span> ./data
$ mkdir ./data
$ sudo systemctl start op-node
$ sudo systemctl start op-geth
</code></pre>
<h1>부록 2: 사용자 정의</h1>
<p>Optimism 환경 변수를 기반으로 사용자 정의를 원하시는 경우, Optimism 노드 구성 참조를 참고하십시오.</p>
<h1>부록 3: CPU, 메모리 및 디스크 사용률</h1>
<h2>A3–1. CPU 사용량</h2>
<p>Rock 5B에서 작동하는 Rockchip RK3588은 비용 효율적이고 겸손한 8코어 CPU입니다. 스냅 동기화 모드를 사용하는 Optimism 노드는 최대 사용량이 800%인 RK3588의 용량을 200%에서 300% 소비합니다.</p>
<p>참고:
이 글을 쓴 기본 노드보다 CPU를 더 많이 사용합니다.</p>
<pre><code class="hljs language-js">$ top -p $(pgrep op-geth)  -p $(pgrep op-node)
</code></pre>
<h2>A3-2. 메모리 사용량</h2>
<pre><code class="hljs language-js">$ free -h
              total        used        free      shared  buff/cache   available
<span class="hljs-title class_">Mem</span>:           15Gi       <span class="hljs-number">7.</span>2Gi       498Mi       <span class="hljs-number">8.</span>0Mi       <span class="hljs-number">7.</span>7Gi       <span class="hljs-number">8.</span>0Gi
<span class="hljs-title class_">Swap</span>:            0B          0B          0B
</code></pre>
<h2>A3-3. 디스크 사용량</h2>
<p>지금은 2024년 5월 16일이며, --state.scheme=path 옵션을 사용한 스냅 동기화 모드는 지금까지 404 GB만 소비되었습니다. 따라서 1 TB 미만의 SSD로도 노드를 실행할 수 있습니다.</p>
<p>$ du -sh ~/data
404G    /home/ethereum/data</p>
<h1>소감</h1>
<p>옵티미즘 노드를 Docker 없이 구축해주신 여정에 대해 감사드립니다. 옵티미즘 노드 설치는 많은 단계가 필요하지만, 도커 환경보다는 더 많은 사용자 정의가 제공됩니다. 동일한 L1 노드나 다른 L2, L3 솔루션에서 실행하더라도 각 포트 설정을 유연하게 변경할 수 있습니다. 이 설정들에 대한 오류를 발견하거나 개선 제안이 있으시면 소중한 피드백 주시기를 부탁드리며, 더 나은 분산화를 위해 개선사항을 지속적으로 반영할 수 있습니다.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"도커 없이 Optimism 노드 실행하는 방법","description":"","date":"2024-05-17 03:55","slug":"2024-05-17-RunningOptimismNodewithoutDocker","content":"\n\n\n![Optimism node](/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_0.png)\n\nOptimism 노드를 설치하는 것은 매우 간단합니다. 다른 슈퍼체인과 달리 많은 설정이 기본값으로 설정되어 있기 때문입니다.\n\n그래서 Docker 없이 스냅 동기화 모드로 Optimism 노드를 실행하는 방법을 설명하겠습니다. \"Docker 없이 베이스 노드 실행하기: 파트 2\"에서 파생된 글입니다.\n\n본 문서에서는 다음과 같은 설정을 하게 됩니다:\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- `/etc/environment`에 환경 변수 설정하기\n- op-node 및 op-geth용 systemd 파일 생성하기\n- op-node 및 op-geth 로그를 보존하기 위한 rsyslog 구성 파일 생성하기\n- op-node 및 op-geth용 로그 회전 파일 생성하기\n\n# 1. op-node 및 op-geth 설치하기\n\n다음 단계로 진행하기 전에 \"Running Base Node without Docker: Part 1\" 글을 참고하여 op-geth와 op-node를 설치해야 합니다.\n\n# 2. `/etc/environment`에 Optimism 노드 환경 변수 추가 및 데이터 디렉토리 생성\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 2–1. 당신의 노드에 `/etc/environment` 파일에 다음 템플릿을 추가해주세요.\n\n```js\n##########################\n#### OPTIMISM SETTING ####\n##########################\nOP_GETH_SEQUENCER_HTTP=https://mainnet-sequencer.optimism.io\n# [필수] 선호하는 L1 노드 RPC URL로 변경해주세요:\nOP_NODE_L1_ETH_RPC=[귀하의 L1 ETH RPC]\n# [필수] 선호하는 L1 CL 비컨 엔드포인트로 변경해주세요:\nOP_NODE_L1_BEACON=[귀하의 L1 BEACON RPC]\n# [필수] 공용 IP 주소로 변경해주세요:\nOP_NODE_P2P_ADVERTISE_IP=[귀하의 공용 IP 주소]\nOP_NODE_BETA_EXTRA_NETWORKS=true\nOP_NODE_L2_ENGINE_AUTH=/home/ethereum/data/engine-auth-jwt\nOP_NODE_L2_ENGINE_RPC=ws://localhost:8551\nOP_NODE_LOG_LEVEL=info\nOP_NODE_METRICS_ADDR=0.0.0.0\nOP_NODE_METRICS_ENABLED=true\nOP_NODE_METRICS_PORT=7300\nOP_NODE_NETWORK=op-mainnet\nOP_NODE_P2P_LISTEN_IP=0.0.0.0\nOP_NODE_P2P_LISTEN_TCP_PORT=9001\nOP_NODE_P2P_LISTEN_UDP_PORT=9001\nOP_NODE_P2P_PRIV_PATH=/home/ethereum/data/opnode_p2p_priv.txt\nOP_NODE_P2P_DISCOVERY_PATH=/home/ethereum/data/opnode_discovery_db\nOP_NODE_P2P_PEERSTORE_PATH=/home/ethereum/data/opnode_peerstore_db\nOP_NODE_RPC_ADDR=0.0.0.0\nOP_NODE_RPC_PORT=8547\nOP_NODE_SNAPSHOT_LOG=/home/ethereum/data/op-node-snapshot-log\nOP_NODE_VERIFIER_L1_CONFS=4\nOP_NODE_ROLLUP_LOAD_PROTOCOL_VERSIONS=true\nOP_NODE_SYNCMODE=execution-layer\n# OP_NODE_L1_TRUST_RPC 는 더 빠른 동기화를 지원하지만, 사용 시 반드시 L1 RPC 노드가 완전히 신뢰성 있는 경우에만 사용해야 합니다.\n# 또한 이는 저장 증명을 지원하지 않는 Erigon과 같은 클라이언트와 함께 작동할 수 있도록 합니다:\nOP_NODE_L1_TRUST_RPC=true\nGETH_DATA_DIR=/home/ethereum/data\nVERBOSITY=3\nRPC_PORT=8545\nWS_PORT=8546\nAUTHRPC_PORT=8551\nMETRICS_PORT=6060\nHOST_IP=\"0.0.0.0\"\nP2P_PORT=30304\nOP_GETH_GCMODE=full\nOP_GETH_SYNCMODE=snap\n```\n\n## 2–2. 당신의 네트워크에 대한 값 변경하기\n\n아래 세 가지 변수를 변경해야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nOP_NODE_L1_ETH_RPC: 귀하의 L1 노드 (이더리움) RPC URL 또는 L1 PRC 노드 공급 업체 URL입니다.\n\n- 예시 (게속 RPC)\n\n```js\nOP_NODE_L1_ETH_RPC=http://192.168.1.2:8545\n```\n\nOP_NODE_L1_BEACON: 귀하의 L1 노드 (이더리움) Beacon RPC URL 또는 L1 Beacon 노드 공급 업체 URL입니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 예시 (등대 비콘 rpc)\n\n```js\nOP_NODE_L1_BEACON=http://192.168.1.2:5052\n```\n\nOP_NODE_P2P_ADVERTISE_IP: 공용 IP 주소(개인 IP 주소가 아닙니다!)\n\n- 예시\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nOP_NODE_P2P_ADVERTISE_IP=34.149.58.211\n```\n\n참고:\n공개 IP 주소를 모르는 경우 노드에서 다음 명령을 사용하여 찾을 수 있습니다.\n\n```js\n$ curl http://api.ipify.org\n34.149.58.211\n```\n\n(선택 사항) 다른 P2P 포트를 사용하거나 L1 RPC를 신뢰하지 않는 경우 환경에 맞게 변경해야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nP2P_PORT=30304 # op-geth용 P2P 포트\nOP_NODE_P2P_LISTEN_TCP_PORT=9001 # op-node용 TCP P2P 수신 포트\nOP_NODE_P2P_LISTEN_UDP_PORT=9001 # op-node용 UDP P2P 수신 포트\nOP_NODE_L1_TRUST_RPC=true # L1 RPC를 신뢰하는 경우 true로 설정합니다.\n```\n\n위의 변경 사항을 기반으로 예시 /etc/environment 파일은 다음과 같습니다:\n\n```js\nsudo vim /etc/environments\n```\n\n```js\nPATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin\"\n\n##########################\n#### OPTIMISM 설정 ####\n##########################\nOP_GETH_SEQUENCER_HTTP=https://mainnet-sequencer.optimism.io\n# [필수] 선호하는 L1 노드 RPC URL로 교체:\nOP_NODE_L1_ETH_RPC=http://192.168.1.2:8545\n# [필수] 선호하는 L1 CL beacon 엔드포인트로 교체:\nOP_NODE_L1_BEACON=http://192.168.1.2:5052\n# 공인 IP 주소로 교체\nOP_NODE_P2P_ADVERTISE_IP=34.149.58.211\nOP_NODE_BETA_EXTRA_NETWORKS=true\nOP_NODE_L2_ENGINE_AUTH=/home/ethereum/data/engine-auth-jwt\nOP_NODE_L2_ENGINE_RPC=ws://localhost:8551\nOP_NODE_LOG_LEVEL=info\nOP_NODE_METRICS_ADDR=0.0.0.0\nOP_NODE_METRICS_ENABLED=true\nOP_NODE_METRICS_PORT=7300\nOP_NODE_NETWORK=op-mainnet\nOP_NODE_P2P_LISTEN_IP=0.0.0.0\nOP_NODE_P2P_LISTEN_TCP_PORT=9001\nOP_NODE_P2P_LISTEN_UDP_PORT=9001\nOP_NODE_P2P_PRIV_PATH=/home/ethereum/data/opnode_p2p_priv.txt\nOP_NODE_P2P_DISCOVERY_PATH=/home/ethereum/data/opnode_discovery_db\nOP_NODE_P2P_PEERSTORE_PATH=/home/ethereum/data/opnode_peerstore_db\nOP_NODE_RPC_ADDR=0.0.0.0\nOP_NODE_RPC_PORT=8547\nOP_NODE_SNAPSHOT_LOG=/home/ethereum/data/op-node-snapshot-log\nOP_NODE_VERIFIER_L1_CONFS=4\nOP_NODE_ROLLUP_LOAD_PROTOCOL_VERSIONS=true\nOP_NODE_SYNCMODE=execution-layer\n\n# OP_NODE_L1_TRUST_RPC를 사용하면 더 빠른 동기화가 가능하지만, L1 RPC 노드를\n# 완전히 신뢰하는 경우에만 사용해야 합니다.\n# 또한 storage proofs를 지원하지 않는 Erigon과 같은 클라이언트와 상호 작용하도록 합니다:\nOP_NODE_L1_TRUST_RPC=true\n\nOP_NODE_SYNCMODE=execution-layer\nGETH_DATA_DIR=/home/ethereum/data\nVERBOSITY=3\nRPC_PORT=8545\nWS_PORT=8546\nAUTHRPC_PORT=8551\nMETRICS_PORT=6060\nHOST_IP=\"0.0.0.0\"\nP2P_PORT=30304\nOP_GETH_GCMODE=full\nOP_GETH_SYNCMODE=snap\n```\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 2-3. 블록체인 데이터를 보존하기 위한 data 디렉토리 생성\n\n```js\n$ cd ~\n$ mkdir data\n```\n\n당신의 환경에 기반하여 Optimism 노드 환경 변수를 성공적으로 설정하셨습니다.\n\n# 3. op-node systemd 파일 생성\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```bash\n$ sudo touch /etc/systemd/system/op-node.service\n$ sudo vim /etc/systemd/system/op-node.service\n```\n\n다음 내용을 붙여넣고 저장하세요.\n\n```bash\n[Unit]\nDescription=Optimistic Node Client\nAfter=network.target\n\n[Service]\nUser=ethereum\nGroup=ethereum\nEnvironment=HOME=/home/ethereum\nEnvironmentFile=/etc/environment\nType=simple\nExecStart=/usr/bin/op-node\nKillMode=process\nKillSignal=SIGINT\nTimeoutStopSec=90\nRestart=on-failure\nRestartSec=10s\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=op-node\n\n[Install]\nWantedBy=multi-user.target\n```\n\nop-node systemd 파일을 성공적으로 생성했습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 4. op-geth systemd 파일 만들기\n\n```js\n$ sudo touch /etc/systemd/system/op-geth.service\n$ sudo vim /etc/systemd/system/op-geth.service\n```\n\n다음 내용을 붙여 넣고 저장하세요.\n\n```js\n[Unit]\nDescription=옵티미즘 Go-이더리움 클라이언트\nAfter=network.target\n\n[Service]\nUser=ethereum\nGroup=ethereum\nEnvironment=HOME=/home/ethereum\nEnvironmentFile=/etc/environment\nType=simple\nExecStart=/usr/bin/op-geth --datadir=\"${GETH_DATA_DIR}\" \\\n--verbosity=\"${VERBOSITY}\" \\\n--http --http.corsdomain=\"*\" \\\n--http.vhosts=\"*\" \\\n--http.addr=0.0.0.0 \\\n--http.port=\"${RPC_PORT}\" \\\n--http.api=web3,debug,eth,net,engine \\\n--authrpc.addr=0.0.0.0 \\\n--authrpc.port=\"${AUTHRPC_PORT}\" \\\n--authrpc.vhosts=\"*\" \\\n--authrpc.jwtsecret=\"${OP_NODE_L2_ENGINE_AUTH}\" \\\n--ws \\\n--ws.addr=0.0.0.0 \\\n--ws.port=\"${WS_PORT}\" \\\n--ws.origins=\"*\" \\\n--ws.api=debug,eth,net,engine \\\n--metrics \\\n--metrics.addr=0.0.0.0 \\\n--metrics.port=\"${METRICS_PORT}\" \\\n--syncmode=\"${OP_GETH_SYNCMODE}\" \\\n--gcmode=\"${OP_GETH_GCMODE}\" \\\n--maxpeers=100 \\\n--nat=extip:${HOST_IP} \\\n--rollup.sequencerhttp=\"${OP_GETH_SEQUENCER_HTTP}\" \\\n--rollup.halt=major \\\n--op-network=\"${OP_NODE_NETWORK}\" \\\n--port=\"${P2P_PORT}\" \\\n--rollup.disabletxpoolgossip=true \\\n--state.scheme=path\n\nKillMode=process\nKillSignal=SIGINT\nTimeoutStopSec=90\nRestart=on-failure\nRestartSec=10s\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=op-geth\n\n[Install]\nWantedBy=multi-user.target\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n테이블 태그를 마크다운 형식으로 변경해주세요.\n\n# 5. 로그 보존을 위한 rsyslog 구성 파일 생성\n\n## 5-1. op-node rsyslog 구성 파일\n\n```js\n$ sudo touch /etc/rsyslog.d/24-op-node.conf\n$ sudo vim /etc/rsyslog.d/24-op-node.conf\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n아래 설정을 붙여넣고 저장하세요.\n\n```js\nif $programname == 'op-node' then /var/log/op-node.log\nif $programname == 'op-node' then ~\n```\n\n## 5-2. op-geth rsyslog 구성 파일\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n$ sudo touch /etc/rsyslog.d/25-op-geth.conf\n$ sudo vim /etc/rsyslog.d/25-op-geth.conf\n\n\n참고:\n선호하는 파일 이름으로 변경해주세요.\n\n다음 설정을 붙여넣고 저장하세요.\n\n\nif $programname == 'op-geth' then /var/log/op-geth.log\nif $programname == 'op-geth' then ~\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 5-3. rsyslog 데몬 재시작\n\n```js\n$ sudo systemctl restart rsyslog\n```\n\n## 6. 로그 회전 구성 파일 생성\n\n로그를 회전하지 않으면 많은 디스크 공간을 사용하므로 로그 회전을 설정해야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```shell\n$ sudo touch /etc/logrotate.d/op-client\n$ sudo vim /etc/logrotate.d/op-client\n```\n\n노트:\n원하시는 이름으로 파일 이름을 변경하세요.\n\n다음 설정을 붙여넣고 저장하세요.\n\n```shell\n/var/log/op-node.log\n/var/log/op-geth.log\n{\n        rotate 4\n        weekly\n        missingok\n        notifempty\n        compress\n        delaycompress\n        sharedscripts\n        postrotate\n                [ -x /usr/lib/rsyslog/rsyslog-rotate ] \u0026\u0026 /usr/lib/rsyslog/rsyslog-rotate || true\n        endscript\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 7. 옵티미즘 노드 실행하기\n\n축하합니다! 드디어 옵티미즘 노드를 실행할 시간이 왔습니다.\n\n## 7-1. op-node 실행\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n$ sudo systemctl enable op-node\n$ sudo systemctl start op-node\n$ sudo systemctl status -l op-node\n● op-node.service - Optimistic Node Client\n     Loaded: loaded (/etc/systemd/system/op-node.service; disabled; vendor preset: enabled)\n     Active: active (running) since Wed 2024-05-08 20:32:32 JST; 16h ago\n   Main PID: 259669 (op-node)\n      Tasks: 16 (limit: 18542)\n     Memory: 786.9M\n     CGroup: /system.slice/op-node.service\n             └─259669 /usr/bin/op-node\n```\n\n## 7–2. op-geth 실행하기\n\n```js\n$ sudo systemctl enable op-geth\n$ sudo systemctl start op-geth\n$ sudo systemctl status -l op-geth\n● op-geth.service - Optimism Go-ethereum client\n     Loaded: loaded (/etc/systemd/system/op-geth.service; disabled; vendor preset: enabled)\n     Active: active (running) since Wed 2024-05-08 20:36:22 JST; 16h ago\n   Main PID: 259742 (op-geth)\n      Tasks: 37 (limit: 18542)\n     Memory: 13.8G\n     CGroup: /system.slice/op-geth.service\n             └─259742 /usr/bin/op-geth --datadir=/home/ethereum/data --verbosity=3 --http --http.corsdomain=* --http.vhosts=* --http\u003e\n```\n\n## 7–3. 로그 확인하기\n  \n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n다음 명령어를 사용하여 로그를 확인할 수 있어요:\n\n```js\n$ sudo tail -f /var/log/op-geth.log\n$ sudo tail -f /var/log/op-node.log\n```\n\n성공적으로 실행하면, op-node와 op-geth에서 다음과 같은 로그가 기록될 거예요:\n\n- Left (op-node), Right (op-geth)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n![image 1](/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_1.png)\n\nRoughly within 20 hours, op-geth will complete syncing with snap mode, as shown in the following image.\n\n![image 2](/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_2.png)\n\n- Synced Example\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"https://miro.medium.com/v2/resize:fit:1400/1*YTH6tEbhxERWqcUMkOsJxw.gif\" /\u003e\n## 7-4. 동기화 여부 확인\n\n다음 명령어를 사용하여 공개 Optimism 노드 블록 번호와 귀하의 Optimism 노드 블록 번호를 비교할 수 있습니다.\n\n- 공개 Optimism 노드에서 최신 블록 번호 가져오기\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n```js\n$ curl -sX POST -H \"Content-Type: application/json\" \\\n-d '{\"jsonrpc\": \"2.0\", \"method\": \"eth_blockNumber\", \"params\": [], \"id\":1}' \\\nhttps://mainnet.optimism.io/ \\\n| jq -r \".result\" | printf \"%d\\n\" $(cat -)\n```\n\n- 로컬 노드에서 최신 블록 번호 가져오기\n\n```js\n$ curl -sX POST -H \"Content-Type: application/json\" \\\n-d '{\"jsonrpc\": \"2.0\", \"method\": \"eth_blockNumber\", \"params\": [], \"id\":1}' \\\nhttp://localhost:8545/ \\\n| jq -r \".result\" | printf \"%d\\n\" $(cat -)\n```\n\n- 출력 예시\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_3.png\" /\u003e\n\n# 첨부 1: 데이터 축소 시나리오\n\n만약 노드가 제대로 중지되지 않거나 갑작스럽게 정전이 발생하면 데이터가 손상될 수 있습니다. 데이터 디렉토리를 삭제하여 깨끗한 상태로 다시 시작할 수 있습니다.\n\n```js\n$ sudo systemctl stop op-node\n$ sudo systemctl stop op-geth\n$ cd ~\n$ rm -Rf ./data\n$ mkdir ./data\n$ sudo systemctl start op-node\n$ sudo systemctl start op-geth\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 부록 2: 사용자 정의\n\nOptimism 환경 변수를 기반으로 사용자 정의를 원하시는 경우, Optimism 노드 구성 참조를 참고하십시오.\n\n# 부록 3: CPU, 메모리 및 디스크 사용률\n\n## A3–1. CPU 사용량\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nRock 5B에서 작동하는 Rockchip RK3588은 비용 효율적이고 겸손한 8코어 CPU입니다. 스냅 동기화 모드를 사용하는 Optimism 노드는 최대 사용량이 800%인 RK3588의 용량을 200%에서 300% 소비합니다.\n\n참고:\n이 글을 쓴 기본 노드보다 CPU를 더 많이 사용합니다.\n\n```js\n$ top -p $(pgrep op-geth)  -p $(pgrep op-node)\n```\n\n\u003cimg src=\"/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_4.png\" /\u003e\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## A3-2. 메모리 사용량\n\n```js\n$ free -h\n              total        used        free      shared  buff/cache   available\nMem:           15Gi       7.2Gi       498Mi       8.0Mi       7.7Gi       8.0Gi\nSwap:            0B          0B          0B\n```\n\n## A3-3. 디스크 사용량\n\n지금은 2024년 5월 16일이며, --state.scheme=path 옵션을 사용한 스냅 동기화 모드는 지금까지 404 GB만 소비되었습니다. 따라서 1 TB 미만의 SSD로도 노드를 실행할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\n$ du -sh ~/data\n404G    /home/ethereum/data\n\n\n# 소감\n\n옵티미즘 노드를 Docker 없이 구축해주신 여정에 대해 감사드립니다. 옵티미즘 노드 설치는 많은 단계가 필요하지만, 도커 환경보다는 더 많은 사용자 정의가 제공됩니다. 동일한 L1 노드나 다른 L2, L3 솔루션에서 실행하더라도 각 포트 설정을 유연하게 변경할 수 있습니다. 이 설정들에 대한 오류를 발견하거나 개선 제안이 있으시면 소중한 피드백 주시기를 부탁드리며, 더 나은 분산화를 위해 개선사항을 지속적으로 반영할 수 있습니다.\n","ogImage":{"url":"/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_0.png"},"coverImage":"/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_0.png","tag":["Tech"],"readingTime":13},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_0.png\" alt=\"Optimism node\"\u003e\u003c/p\u003e\n\u003cp\u003eOptimism 노드를 설치하는 것은 매우 간단합니다. 다른 슈퍼체인과 달리 많은 설정이 기본값으로 설정되어 있기 때문입니다.\u003c/p\u003e\n\u003cp\u003e그래서 Docker 없이 스냅 동기화 모드로 Optimism 노드를 실행하는 방법을 설명하겠습니다. \"Docker 없이 베이스 노드 실행하기: 파트 2\"에서 파생된 글입니다.\u003c/p\u003e\n\u003cp\u003e본 문서에서는 다음과 같은 설정을 하게 됩니다:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e/etc/environment\u003c/code\u003e에 환경 변수 설정하기\u003c/li\u003e\n\u003cli\u003eop-node 및 op-geth용 systemd 파일 생성하기\u003c/li\u003e\n\u003cli\u003eop-node 및 op-geth 로그를 보존하기 위한 rsyslog 구성 파일 생성하기\u003c/li\u003e\n\u003cli\u003eop-node 및 op-geth용 로그 회전 파일 생성하기\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e1. op-node 및 op-geth 설치하기\u003c/h1\u003e\n\u003cp\u003e다음 단계로 진행하기 전에 \"Running Base Node without Docker: Part 1\" 글을 참고하여 op-geth와 op-node를 설치해야 합니다.\u003c/p\u003e\n\u003ch1\u003e2. \u003ccode\u003e/etc/environment\u003c/code\u003e에 Optimism 노드 환경 변수 추가 및 데이터 디렉토리 생성\u003c/h1\u003e\n\u003ch2\u003e2–1. 당신의 노드에 \u003ccode\u003e/etc/environment\u003c/code\u003e 파일에 다음 템플릿을 추가해주세요.\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e##########################\n#### \u003cspan class=\"hljs-variable constant_\"\u003eOPTIMISM\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eSETTING\u003c/span\u003e ####\n##########################\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_GETH_SEQUENCER_HTTP\u003c/span\u003e=\u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//mainnet-sequencer.optimism.io\u003c/span\u003e\n# [필수] 선호하는 \u003cspan class=\"hljs-variable constant_\"\u003eL1\u003c/span\u003e 노드 \u003cspan class=\"hljs-variable constant_\"\u003eRPC\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eURL\u003c/span\u003e로 변경해주세요:\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_ETH_RPC\u003c/span\u003e=[귀하의 \u003cspan class=\"hljs-variable constant_\"\u003eL1\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eETH\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eRPC\u003c/span\u003e]\n# [필수] 선호하는 \u003cspan class=\"hljs-variable constant_\"\u003eL1\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eCL\u003c/span\u003e 비컨 엔드포인트로 변경해주세요:\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_BEACON\u003c/span\u003e=[귀하의 \u003cspan class=\"hljs-variable constant_\"\u003eL1\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eBEACON\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eRPC\u003c/span\u003e]\n# [필수] 공용 \u003cspan class=\"hljs-variable constant_\"\u003eIP\u003c/span\u003e 주소로 변경해주세요:\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_ADVERTISE_IP\u003c/span\u003e=[귀하의 공용 \u003cspan class=\"hljs-variable constant_\"\u003eIP\u003c/span\u003e 주소]\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_BETA_EXTRA_NETWORKS\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L2_ENGINE_AUTH\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/engine-auth-jwt\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L2_ENGINE_RPC\u003c/span\u003e=\u003cspan class=\"hljs-attr\"\u003ews\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//localhost:8551\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_LOG_LEVEL\u003c/span\u003e=info\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_METRICS_ADDR\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_METRICS_ENABLED\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_METRICS_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e7300\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_NETWORK\u003c/span\u003e=op-mainnet\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_LISTEN_IP\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_LISTEN_TCP_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e9001\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_LISTEN_UDP_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e9001\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_PRIV_PATH\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/opnode_p2p_priv.\u003cspan class=\"hljs-property\"\u003etxt\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_DISCOVERY_PATH\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/opnode_discovery_db\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_PEERSTORE_PATH\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/opnode_peerstore_db\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_RPC_ADDR\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_RPC_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e8547\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_SNAPSHOT_LOG\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/op-node-snapshot-log\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_VERIFIER_L1_CONFS\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_ROLLUP_LOAD_PROTOCOL_VERSIONS\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_SYNCMODE\u003c/span\u003e=execution-layer\n# \u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_TRUST_RPC\u003c/span\u003e 는 더 빠른 동기화를 지원하지만, 사용 시 반드시 \u003cspan class=\"hljs-variable constant_\"\u003eL1\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eRPC\u003c/span\u003e 노드가 완전히 신뢰성 있는 경우에만 사용해야 합니다.\n# 또한 이는 저장 증명을 지원하지 않는 \u003cspan class=\"hljs-title class_\"\u003eErigon\u003c/span\u003e과 같은 클라이언트와 함께 작동할 수 있도록 합니다:\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_TRUST_RPC\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eGETH_DATA_DIR\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data\n\u003cspan class=\"hljs-variable constant_\"\u003eVERBOSITY\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eRPC_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e8545\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eWS_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e8546\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAUTHRPC_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e8551\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eMETRICS_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e6060\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eHOST_IP\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"0.0.0.0\"\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eP2P_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e30304\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_GETH_GCMODE\u003c/span\u003e=full\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_GETH_SYNCMODE\u003c/span\u003e=snap\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e2–2. 당신의 네트워크에 대한 값 변경하기\u003c/h2\u003e\n\u003cp\u003e아래 세 가지 변수를 변경해야 합니다.\u003c/p\u003e\n\u003cp\u003eOP_NODE_L1_ETH_RPC: 귀하의 L1 노드 (이더리움) RPC URL 또는 L1 PRC 노드 공급 업체 URL입니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e예시 (게속 RPC)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_ETH_RPC\u003c/span\u003e=\u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//192.168.1.2:8545\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOP_NODE_L1_BEACON: 귀하의 L1 노드 (이더리움) Beacon RPC URL 또는 L1 Beacon 노드 공급 업체 URL입니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e예시 (등대 비콘 rpc)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_BEACON\u003c/span\u003e=\u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//192.168.1.2:5052\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOP_NODE_P2P_ADVERTISE_IP: 공용 IP 주소(개인 IP 주소가 아닙니다!)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e예시\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_ADVERTISE_IP\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e34.149\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.58\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.211\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e참고:\n공개 IP 주소를 모르는 경우 노드에서 다음 명령을 사용하여 찾을 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ curl \u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//api.ipify.org\u003c/span\u003e\n\u003cspan class=\"hljs-number\"\u003e34.149\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.58\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.211\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e(선택 사항) 다른 P2P 포트를 사용하거나 L1 RPC를 신뢰하지 않는 경우 환경에 맞게 변경해야 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eP2P_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e30304\u003c/span\u003e # op-geth용 \u003cspan class=\"hljs-variable constant_\"\u003eP2P\u003c/span\u003e 포트\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_LISTEN_TCP_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e9001\u003c/span\u003e # op-node용 \u003cspan class=\"hljs-variable constant_\"\u003eTCP\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eP2P\u003c/span\u003e 수신 포트\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_LISTEN_UDP_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e9001\u003c/span\u003e # op-node용 \u003cspan class=\"hljs-variable constant_\"\u003eUDP\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eP2P\u003c/span\u003e 수신 포트\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_TRUST_RPC\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e # \u003cspan class=\"hljs-variable constant_\"\u003eL1\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eRPC\u003c/span\u003e를 신뢰하는 경우 \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e로 설정합니다.\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위의 변경 사항을 기반으로 예시 /etc/environment 파일은 다음과 같습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003esudo vim /etc/environments\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003ePATH\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin\"\u003c/span\u003e\n\n##########################\n#### \u003cspan class=\"hljs-variable constant_\"\u003eOPTIMISM\u003c/span\u003e 설정 ####\n##########################\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_GETH_SEQUENCER_HTTP\u003c/span\u003e=\u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//mainnet-sequencer.optimism.io\u003c/span\u003e\n# [필수] 선호하는 \u003cspan class=\"hljs-variable constant_\"\u003eL1\u003c/span\u003e 노드 \u003cspan class=\"hljs-variable constant_\"\u003eRPC\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eURL\u003c/span\u003e로 교체:\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_ETH_RPC\u003c/span\u003e=\u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//192.168.1.2:8545\u003c/span\u003e\n# [필수] 선호하는 \u003cspan class=\"hljs-variable constant_\"\u003eL1\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eCL\u003c/span\u003e beacon 엔드포인트로 교체:\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_BEACON\u003c/span\u003e=\u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//192.168.1.2:5052\u003c/span\u003e\n# 공인 \u003cspan class=\"hljs-variable constant_\"\u003eIP\u003c/span\u003e 주소로 교체\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_ADVERTISE_IP\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e34.149\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.58\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.211\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_BETA_EXTRA_NETWORKS\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L2_ENGINE_AUTH\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/engine-auth-jwt\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L2_ENGINE_RPC\u003c/span\u003e=\u003cspan class=\"hljs-attr\"\u003ews\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//localhost:8551\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_LOG_LEVEL\u003c/span\u003e=info\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_METRICS_ADDR\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_METRICS_ENABLED\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_METRICS_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e7300\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_NETWORK\u003c/span\u003e=op-mainnet\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_LISTEN_IP\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_LISTEN_TCP_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e9001\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_LISTEN_UDP_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e9001\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_PRIV_PATH\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/opnode_p2p_priv.\u003cspan class=\"hljs-property\"\u003etxt\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_DISCOVERY_PATH\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/opnode_discovery_db\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_P2P_PEERSTORE_PATH\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/opnode_peerstore_db\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_RPC_ADDR\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_RPC_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e8547\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_SNAPSHOT_LOG\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data/op-node-snapshot-log\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_VERIFIER_L1_CONFS\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_ROLLUP_LOAD_PROTOCOL_VERSIONS\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_SYNCMODE\u003c/span\u003e=execution-layer\n\n# \u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_TRUST_RPC\u003c/span\u003e를 사용하면 더 빠른 동기화가 가능하지만, \u003cspan class=\"hljs-variable constant_\"\u003eL1\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eRPC\u003c/span\u003e 노드를\n# 완전히 신뢰하는 경우에만 사용해야 합니다.\n# 또한 storage proofs를 지원하지 않는 \u003cspan class=\"hljs-title class_\"\u003eErigon\u003c/span\u003e과 같은 클라이언트와 상호 작용하도록 합니다:\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_L1_TRUST_RPC\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_NODE_SYNCMODE\u003c/span\u003e=execution-layer\n\u003cspan class=\"hljs-variable constant_\"\u003eGETH_DATA_DIR\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data\n\u003cspan class=\"hljs-variable constant_\"\u003eVERBOSITY\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eRPC_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e8545\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eWS_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e8546\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eAUTHRPC_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e8551\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eMETRICS_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e6060\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eHOST_IP\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"0.0.0.0\"\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eP2P_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e30304\u003c/span\u003e\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_GETH_GCMODE\u003c/span\u003e=full\n\u003cspan class=\"hljs-variable constant_\"\u003eOP_GETH_SYNCMODE\u003c/span\u003e=snap\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e2-3. 블록체인 데이터를 보존하기 위한 data 디렉토리 생성\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ cd ~\n$ mkdir data\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e당신의 환경에 기반하여 Optimism 노드 환경 변수를 성공적으로 설정하셨습니다.\u003c/p\u003e\n\u003ch1\u003e3. op-node systemd 파일 생성\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ sudo \u003cspan class=\"hljs-built_in\"\u003etouch\u003c/span\u003e /etc/systemd/system/op-node.service\n$ sudo vim /etc/systemd/system/op-node.service\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다음 내용을 붙여넣고 저장하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e[Unit]\nDescription=Optimistic Node Client\nAfter=network.target\n\n[Service]\nUser=ethereum\nGroup=ethereum\nEnvironment=HOME=/home/ethereum\nEnvironmentFile=/etc/environment\nType=simple\nExecStart=/usr/bin/op-node\nKillMode=process\nKillSignal=SIGINT\nTimeoutStopSec=90\nRestart=on-failure\nRestartSec=10s\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=op-node\n\n[Install]\nWantedBy=multi-user.target\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eop-node systemd 파일을 성공적으로 생성했습니다.\u003c/p\u003e\n\u003ch1\u003e4. op-geth systemd 파일 만들기\u003c/h1\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ sudo touch /etc/systemd/system/op-geth.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e\n$ sudo vim /etc/systemd/system/op-geth.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e다음 내용을 붙여 넣고 저장하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e[\u003cspan class=\"hljs-title class_\"\u003eUnit\u003c/span\u003e]\n\u003cspan class=\"hljs-title class_\"\u003eDescription\u003c/span\u003e=옵티미즘 \u003cspan class=\"hljs-title class_\"\u003eGo\u003c/span\u003e-이더리움 클라이언트\n\u003cspan class=\"hljs-title class_\"\u003eAfter\u003c/span\u003e=network.\u003cspan class=\"hljs-property\"\u003etarget\u003c/span\u003e\n\n[\u003cspan class=\"hljs-title class_\"\u003eService\u003c/span\u003e]\n\u003cspan class=\"hljs-title class_\"\u003eUser\u003c/span\u003e=ethereum\n\u003cspan class=\"hljs-title class_\"\u003eGroup\u003c/span\u003e=ethereum\n\u003cspan class=\"hljs-title class_\"\u003eEnvironment\u003c/span\u003e=\u003cspan class=\"hljs-variable constant_\"\u003eHOME\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum\n\u003cspan class=\"hljs-title class_\"\u003eEnvironmentFile\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/etc/\u003c/span\u003eenvironment\n\u003cspan class=\"hljs-title class_\"\u003eType\u003c/span\u003e=simple\n\u003cspan class=\"hljs-title class_\"\u003eExecStart\u003c/span\u003e=\u003cspan class=\"hljs-regexp\"\u003e/usr/\u003c/span\u003ebin/op-geth --datadir=\u003cspan class=\"hljs-string\"\u003e\"${GETH_DATA_DIR}\"\u003c/span\u003e \\\n--verbosity=\u003cspan class=\"hljs-string\"\u003e\"${VERBOSITY}\"\u003c/span\u003e \\\n--http --http.\u003cspan class=\"hljs-property\"\u003ecorsdomain\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"*\"\u003c/span\u003e \\\n--http.\u003cspan class=\"hljs-property\"\u003evhosts\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"*\"\u003c/span\u003e \\\n--http.\u003cspan class=\"hljs-property\"\u003eaddr\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e \\\n--http.\u003cspan class=\"hljs-property\"\u003eport\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"${RPC_PORT}\"\u003c/span\u003e \\\n--http.\u003cspan class=\"hljs-property\"\u003eapi\u003c/span\u003e=web3,debug,eth,net,engine \\\n--authrpc.\u003cspan class=\"hljs-property\"\u003eaddr\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e \\\n--authrpc.\u003cspan class=\"hljs-property\"\u003eport\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"${AUTHRPC_PORT}\"\u003c/span\u003e \\\n--authrpc.\u003cspan class=\"hljs-property\"\u003evhosts\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"*\"\u003c/span\u003e \\\n--authrpc.\u003cspan class=\"hljs-property\"\u003ejwtsecret\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"${OP_NODE_L2_ENGINE_AUTH}\"\u003c/span\u003e \\\n--ws \\\n--ws.\u003cspan class=\"hljs-property\"\u003eaddr\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e \\\n--ws.\u003cspan class=\"hljs-property\"\u003eport\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"${WS_PORT}\"\u003c/span\u003e \\\n--ws.\u003cspan class=\"hljs-property\"\u003eorigins\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"*\"\u003c/span\u003e \\\n--ws.\u003cspan class=\"hljs-property\"\u003eapi\u003c/span\u003e=debug,eth,net,engine \\\n--metrics \\\n--metrics.\u003cspan class=\"hljs-property\"\u003eaddr\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e0.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e.0\u003c/span\u003e \\\n--metrics.\u003cspan class=\"hljs-property\"\u003eport\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"${METRICS_PORT}\"\u003c/span\u003e \\\n--syncmode=\u003cspan class=\"hljs-string\"\u003e\"${OP_GETH_SYNCMODE}\"\u003c/span\u003e \\\n--gcmode=\u003cspan class=\"hljs-string\"\u003e\"${OP_GETH_GCMODE}\"\u003c/span\u003e \\\n--maxpeers=\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e \\\n--nat=\u003cspan class=\"hljs-attr\"\u003eextip\u003c/span\u003e:${\u003cspan class=\"hljs-variable constant_\"\u003eHOST_IP\u003c/span\u003e} \\\n--rollup.\u003cspan class=\"hljs-property\"\u003esequencerhttp\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"${OP_GETH_SEQUENCER_HTTP}\"\u003c/span\u003e \\\n--rollup.\u003cspan class=\"hljs-property\"\u003ehalt\u003c/span\u003e=major \\\n--op-network=\u003cspan class=\"hljs-string\"\u003e\"${OP_NODE_NETWORK}\"\u003c/span\u003e \\\n--port=\u003cspan class=\"hljs-string\"\u003e\"${P2P_PORT}\"\u003c/span\u003e \\\n--rollup.\u003cspan class=\"hljs-property\"\u003edisabletxpoolgossip\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e \\\n--state.\u003cspan class=\"hljs-property\"\u003escheme\u003c/span\u003e=path\n\n\u003cspan class=\"hljs-title class_\"\u003eKillMode\u003c/span\u003e=process\n\u003cspan class=\"hljs-title class_\"\u003eKillSignal\u003c/span\u003e=\u003cspan class=\"hljs-variable constant_\"\u003eSIGINT\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eTimeoutStopSec\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e90\u003c/span\u003e\n\u003cspan class=\"hljs-title class_\"\u003eRestart\u003c/span\u003e=on-failure\n\u003cspan class=\"hljs-title class_\"\u003eRestartSec\u003c/span\u003e=10s\n\u003cspan class=\"hljs-title class_\"\u003eStandardOutput\u003c/span\u003e=syslog\n\u003cspan class=\"hljs-title class_\"\u003eStandardError\u003c/span\u003e=syslog\n\u003cspan class=\"hljs-title class_\"\u003eSyslogIdentifier\u003c/span\u003e=op-geth\n\n[\u003cspan class=\"hljs-title class_\"\u003eInstall\u003c/span\u003e]\n\u003cspan class=\"hljs-title class_\"\u003eWantedBy\u003c/span\u003e=multi-user.\u003cspan class=\"hljs-property\"\u003etarget\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e테이블 태그를 마크다운 형식으로 변경해주세요.\u003c/p\u003e\n\u003ch1\u003e5. 로그 보존을 위한 rsyslog 구성 파일 생성\u003c/h1\u003e\n\u003ch2\u003e5-1. op-node rsyslog 구성 파일\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ sudo touch /etc/rsyslog.\u003cspan class=\"hljs-property\"\u003ed\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e-op-node.\u003cspan class=\"hljs-property\"\u003econf\u003c/span\u003e\n$ sudo vim /etc/rsyslog.\u003cspan class=\"hljs-property\"\u003ed\u003c/span\u003e/\u003cspan class=\"hljs-number\"\u003e24\u003c/span\u003e-op-node.\u003cspan class=\"hljs-property\"\u003econf\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e아래 설정을 붙여넣고 저장하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e $programname == \u003cspan class=\"hljs-string\"\u003e'op-node'\u003c/span\u003e then /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/log/op-node.\u003cspan class=\"hljs-property\"\u003elog\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e $programname == \u003cspan class=\"hljs-string\"\u003e'op-node'\u003c/span\u003e then ~\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e5-2. op-geth rsyslog 구성 파일\u003c/h2\u003e\n\u003cp\u003e$ sudo touch /etc/rsyslog.d/25-op-geth.conf\n$ sudo vim /etc/rsyslog.d/25-op-geth.conf\u003c/p\u003e\n\u003cp\u003e참고:\n선호하는 파일 이름으로 변경해주세요.\u003c/p\u003e\n\u003cp\u003e다음 설정을 붙여넣고 저장하세요.\u003c/p\u003e\n\u003cp\u003eif $programname == 'op-geth' then /var/log/op-geth.log\nif $programname == 'op-geth' then ~\u003c/p\u003e\n\u003ch2\u003e5-3. rsyslog 데몬 재시작\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ sudo systemctl restart rsyslog\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e6. 로그 회전 구성 파일 생성\u003c/h2\u003e\n\u003cp\u003e로그를 회전하지 않으면 많은 디스크 공간을 사용하므로 로그 회전을 설정해야 합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"bash\"\u003esudo \u003cspan class=\"hljs-built_in\"\u003etouch\u003c/span\u003e /etc/logrotate.d/op-client\u003c/span\u003e\n\u003cspan class=\"hljs-meta prompt_\"\u003e$ \u003c/span\u003e\u003cspan class=\"bash\"\u003esudo vim /etc/logrotate.d/op-client\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e노트:\n원하시는 이름으로 파일 이름을 변경하세요.\u003c/p\u003e\n\u003cp\u003e다음 설정을 붙여넣고 저장하세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e/var/log/op-node.log\n/var/log/op-geth.log\n{\n        rotate 4\n        weekly\n        missingok\n        notifempty\n        compress\n        delaycompress\n        sharedscripts\n        postrotate\n                [ -x /usr/lib/rsyslog/rsyslog-rotate ] \u0026#x26;\u0026#x26; /usr/lib/rsyslog/rsyslog-rotate || true\n        endscript\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e7. 옵티미즘 노드 실행하기\u003c/h1\u003e\n\u003cp\u003e축하합니다! 드디어 옵티미즘 노드를 실행할 시간이 왔습니다.\u003c/p\u003e\n\u003ch2\u003e7-1. op-node 실행\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ sudo systemctl enable op-node\n$ sudo systemctl start op-node\n$ sudo systemctl status -l op-node\n● op-node.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e - \u003cspan class=\"hljs-title class_\"\u003eOptimistic\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNode\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eClient\u003c/span\u003e\n     \u003cspan class=\"hljs-title class_\"\u003eLoaded\u003c/span\u003e: loaded (\u003cspan class=\"hljs-regexp\"\u003e/etc/\u003c/span\u003esystemd/system/op-node.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e; disabled; vendor \u003cspan class=\"hljs-attr\"\u003epreset\u003c/span\u003e: enabled)\n     \u003cspan class=\"hljs-title class_\"\u003eActive\u003c/span\u003e: active (running) since \u003cspan class=\"hljs-title class_\"\u003eWed\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e05\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e32\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eJST\u003c/span\u003e; 16h ago\n   \u003cspan class=\"hljs-title class_\"\u003eMain\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePID\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e259669\u003c/span\u003e (op-node)\n      \u003cspan class=\"hljs-title class_\"\u003eTasks\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e16\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003elimit\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e18542\u003c/span\u003e)\n     \u003cspan class=\"hljs-title class_\"\u003eMemory\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e786.\u003c/span\u003e9M\n     \u003cspan class=\"hljs-title class_\"\u003eCGroup\u003c/span\u003e: \u003cspan class=\"hljs-regexp\"\u003e/system.slice/\u003c/span\u003eop-node.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e\n             └─\u003cspan class=\"hljs-number\"\u003e259669\u003c/span\u003e /usr/bin/op-node\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e7–2. op-geth 실행하기\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ sudo systemctl enable op-geth\n$ sudo systemctl start op-geth\n$ sudo systemctl status -l op-geth\n● op-geth.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e - \u003cspan class=\"hljs-title class_\"\u003eOptimism\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eGo\u003c/span\u003e-ethereum client\n     \u003cspan class=\"hljs-title class_\"\u003eLoaded\u003c/span\u003e: loaded (\u003cspan class=\"hljs-regexp\"\u003e/etc/\u003c/span\u003esystemd/system/op-geth.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e; disabled; vendor \u003cspan class=\"hljs-attr\"\u003epreset\u003c/span\u003e: enabled)\n     \u003cspan class=\"hljs-title class_\"\u003eActive\u003c/span\u003e: active (running) since \u003cspan class=\"hljs-title class_\"\u003eWed\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2024\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e05\u003c/span\u003e-\u003cspan class=\"hljs-number\"\u003e08\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e20\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e36\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e22\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eJST\u003c/span\u003e; 16h ago\n   \u003cspan class=\"hljs-title class_\"\u003eMain\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ePID\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e259742\u003c/span\u003e (op-geth)\n      \u003cspan class=\"hljs-title class_\"\u003eTasks\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e37\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003elimit\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e18542\u003c/span\u003e)\n     \u003cspan class=\"hljs-title class_\"\u003eMemory\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e13.\u003c/span\u003e8G\n     \u003cspan class=\"hljs-title class_\"\u003eCGroup\u003c/span\u003e: \u003cspan class=\"hljs-regexp\"\u003e/system.slice/\u003c/span\u003eop-geth.\u003cspan class=\"hljs-property\"\u003eservice\u003c/span\u003e\n             └─\u003cspan class=\"hljs-number\"\u003e259742\u003c/span\u003e /usr/bin/op-geth --datadir=\u003cspan class=\"hljs-regexp\"\u003e/home/\u003c/span\u003eethereum/data --verbosity=\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e --http --http.\u003cspan class=\"hljs-property\"\u003ecorsdomain\u003c/span\u003e=* --http.\u003cspan class=\"hljs-property\"\u003evhosts\u003c/span\u003e=* --http\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e7–3. 로그 확인하기\u003c/h2\u003e\n\u003cp\u003e다음 명령어를 사용하여 로그를 확인할 수 있어요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ sudo tail -f /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/log/op-geth.\u003cspan class=\"hljs-property\"\u003elog\u003c/span\u003e\n$ sudo tail -f /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/log/op-node.\u003cspan class=\"hljs-property\"\u003elog\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e성공적으로 실행하면, op-node와 op-geth에서 다음과 같은 로그가 기록될 거예요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eLeft (op-node), Right (op-geth)\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_1.png\" alt=\"image 1\"\u003e\u003c/p\u003e\n\u003cp\u003eRoughly within 20 hours, op-geth will complete syncing with snap mode, as shown in the following image.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-17-RunningOptimismNodewithoutDocker_2.png\" alt=\"image 2\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSynced Example\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e다음 명령어를 사용하여 공개 Optimism 노드 블록 번호와 귀하의 Optimism 노드 블록 번호를 비교할 수 있습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e공개 Optimism 노드에서 최신 블록 번호 가져오기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ curl -sX \u003cspan class=\"hljs-variable constant_\"\u003ePOST\u003c/span\u003e -H \u003cspan class=\"hljs-string\"\u003e\"Content-Type: application/json\"\u003c/span\u003e \\\n-d \u003cspan class=\"hljs-string\"\u003e'{\"jsonrpc\": \"2.0\", \"method\": \"eth_blockNumber\", \"params\": [], \"id\":1}'\u003c/span\u003e \\\n\u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//mainnet.optimism.io/ \\\u003c/span\u003e\n| jq -r \u003cspan class=\"hljs-string\"\u003e\".result\"\u003c/span\u003e | printf \u003cspan class=\"hljs-string\"\u003e\"%d\\n\"\u003c/span\u003e $(cat -)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e로컬 노드에서 최신 블록 번호 가져오기\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ curl -sX \u003cspan class=\"hljs-variable constant_\"\u003ePOST\u003c/span\u003e -H \u003cspan class=\"hljs-string\"\u003e\"Content-Type: application/json\"\u003c/span\u003e \\\n-d \u003cspan class=\"hljs-string\"\u003e'{\"jsonrpc\": \"2.0\", \"method\": \"eth_blockNumber\", \"params\": [], \"id\":1}'\u003c/span\u003e \\\n\u003cspan class=\"hljs-attr\"\u003ehttp\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//localhost:8545/ \\\u003c/span\u003e\n| jq -r \u003cspan class=\"hljs-string\"\u003e\".result\"\u003c/span\u003e | printf \u003cspan class=\"hljs-string\"\u003e\"%d\\n\"\u003c/span\u003e $(cat -)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e출력 예시\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1\u003e첨부 1: 데이터 축소 시나리오\u003c/h1\u003e\n\u003cp\u003e만약 노드가 제대로 중지되지 않거나 갑작스럽게 정전이 발생하면 데이터가 손상될 수 있습니다. 데이터 디렉토리를 삭제하여 깨끗한 상태로 다시 시작할 수 있습니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ sudo systemctl stop op-node\n$ sudo systemctl stop op-geth\n$ cd ~\n$ rm -\u003cspan class=\"hljs-title class_\"\u003eRf\u003c/span\u003e ./data\n$ mkdir ./data\n$ sudo systemctl start op-node\n$ sudo systemctl start op-geth\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e부록 2: 사용자 정의\u003c/h1\u003e\n\u003cp\u003eOptimism 환경 변수를 기반으로 사용자 정의를 원하시는 경우, Optimism 노드 구성 참조를 참고하십시오.\u003c/p\u003e\n\u003ch1\u003e부록 3: CPU, 메모리 및 디스크 사용률\u003c/h1\u003e\n\u003ch2\u003eA3–1. CPU 사용량\u003c/h2\u003e\n\u003cp\u003eRock 5B에서 작동하는 Rockchip RK3588은 비용 효율적이고 겸손한 8코어 CPU입니다. 스냅 동기화 모드를 사용하는 Optimism 노드는 최대 사용량이 800%인 RK3588의 용량을 200%에서 300% 소비합니다.\u003c/p\u003e\n\u003cp\u003e참고:\n이 글을 쓴 기본 노드보다 CPU를 더 많이 사용합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ top -p $(pgrep op-geth)  -p $(pgrep op-node)\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eA3-2. 메모리 사용량\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e$ free -h\n              total        used        free      shared  buff/cache   available\n\u003cspan class=\"hljs-title class_\"\u003eMem\u003c/span\u003e:           15Gi       \u003cspan class=\"hljs-number\"\u003e7.\u003c/span\u003e2Gi       498Mi       \u003cspan class=\"hljs-number\"\u003e8.\u003c/span\u003e0Mi       \u003cspan class=\"hljs-number\"\u003e7.\u003c/span\u003e7Gi       \u003cspan class=\"hljs-number\"\u003e8.\u003c/span\u003e0Gi\n\u003cspan class=\"hljs-title class_\"\u003eSwap\u003c/span\u003e:            0B          0B          0B\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eA3-3. 디스크 사용량\u003c/h2\u003e\n\u003cp\u003e지금은 2024년 5월 16일이며, --state.scheme=path 옵션을 사용한 스냅 동기화 모드는 지금까지 404 GB만 소비되었습니다. 따라서 1 TB 미만의 SSD로도 노드를 실행할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e$ du -sh ~/data\n404G    /home/ethereum/data\u003c/p\u003e\n\u003ch1\u003e소감\u003c/h1\u003e\n\u003cp\u003e옵티미즘 노드를 Docker 없이 구축해주신 여정에 대해 감사드립니다. 옵티미즘 노드 설치는 많은 단계가 필요하지만, 도커 환경보다는 더 많은 사용자 정의가 제공됩니다. 동일한 L1 노드나 다른 L2, L3 솔루션에서 실행하더라도 각 포트 설정을 유연하게 변경할 수 있습니다. 이 설정들에 대한 오류를 발견하거나 개선 제안이 있으시면 소중한 피드백 주시기를 부탁드리며, 더 나은 분산화를 위해 개선사항을 지속적으로 반영할 수 있습니다.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-17-RunningOptimismNodewithoutDocker"},"buildId":"t9N7vwmpvBMQnO2PSctoH","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>