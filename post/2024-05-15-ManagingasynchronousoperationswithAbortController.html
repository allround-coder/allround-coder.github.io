<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>ë¹„ë™ê¸° ì‘ì—…ì„ AbortControllerë¡œ ê´€ë¦¬í•˜ê¸° | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-15-ManagingasynchronousoperationswithAbortController" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="ë¹„ë™ê¸° ì‘ì—…ì„ AbortControllerë¡œ ê´€ë¦¬í•˜ê¸° | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="ë¹„ë™ê¸° ì‘ì—…ì„ AbortControllerë¡œ ê´€ë¦¬í•˜ê¸° | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-15-ManagingasynchronousoperationswithAbortController_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-15-ManagingasynchronousoperationswithAbortController" data-gatsby-head="true"/><meta name="twitter:title" content="ë¹„ë™ê¸° ì‘ì—…ì„ AbortControllerë¡œ ê´€ë¦¬í•˜ê¸° | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-15-ManagingasynchronousoperationswithAbortController_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-15 15:29" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/aCCUs-qPrLLLWRnkN0AOd/_buildManifest.js" defer=""></script><script src="/_next/static/aCCUs-qPrLLLWRnkN0AOd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">ë¹„ë™ê¸° ì‘ì—…ì„ AbortControllerë¡œ ê´€ë¦¬í•˜ê¸°</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="ë¹„ë™ê¸° ì‘ì—…ì„ AbortControllerë¡œ ê´€ë¦¬í•˜ê¸°" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 15, 2024</span><span class="posts_reading_time__f7YPP">5<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-15-ManagingasynchronousoperationswithAbortController&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><code>&#x3C;img src="/assets/img/2024-05-15-ManagingasynchronousoperationswithAbortController_0.png" /></code></p>
<p>AbortControllerëŠ” íŠ¹ìˆ˜í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì€ Webpack êµ¬ì„±, íŒŒì¼ I/O ë˜ëŠ” ë²„í¼ì™€ ê°™ì€ ê²ƒë“¤ê³¼ ì‘ì—…ì„ í•˜ë‹¤ê°€ ì´ ë§¤ìš° ìœ ìš©í•œ APIë¥¼ ìš°ì—°íˆ ë°œê²¬í•˜ê²Œ ë©ë‹ˆë‹¤. ë„ë¦¬ ì‚¬ìš©ë˜ì§€ ì•Šì§€ë§Œ AbortControllerëŠ” ë¹„ë™ê¸° ì‘ì—…ì„ ì·¨ì†Œí•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ì—¬ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ë‹¹ì‹ ì´ ê³§ ì•Œê²Œ ë  ê²ƒì€... ë¬´ì—‡ì´ë“ ì§€!</p>
<p>í•˜ì§€ë§Œ ë¨¼ì € ê¸°ì´ˆë¶€í„° ì‹œì‘í•´ë³´ì£ .</p>
<h1>ë„¤íŠ¸ì›Œí¬ ìš”ì²­</h1>
<p>AbortControllerì˜ ê°€ì¥ ì˜ ì•Œë ¤ì§„ ì‚¬ìš©ë²•ì€ ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œì„ ì·¨ì†Œí•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. fetch APIëŠ” ì˜µì…˜ìœ¼ë¡œ signal ì†ì„±ì„ ê¸°ë³¸ ì œê³µí•˜ë©°, ë¬¸ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> signal = controller.<span class="hljs-property">signal</span>;

<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, { signal })

<span class="hljs-comment">// ìš”ì²­ì„ ì·¨ì†Œí•˜ë ¤ë©´ ë‹¤ìŒì„ í˜¸ì¶œí•˜ì‹­ì‹œì˜¤:</span>
controller.<span class="hljs-title function_">cancel</span>()
</code></pre>
<p>ì›¹ ì‘ìš© í”„ë¡œê·¸ë¨ í”„ë ˆì„ì›Œí¬ ì„¸ê³„ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì´ ê¸°ì‚¬ ì „ë°˜ì—ì„œ ì½”ë“œ ì˜ˆì‹œë¡œ Reactë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤):</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
  <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
  <span class="hljs-keyword">const</span> signal = controller.<span class="hljs-property">signal</span>;
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) => {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url, { signal })
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();

      <span class="hljs-title function_">setState</span>(data);
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-comment">// ì—ëŸ¬ ì²˜ë¦¬</span>
    }
  }
  
  <span class="hljs-keyword">void</span> <span class="hljs-title function_">fetchData</span>();
  
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> {
    controller.<span class="hljs-title function_">abort</span>()
  }
}, []);
</code></pre>
<p>ì´ê²ƒì€ ë‹¹ì‹ ì˜ ì»´í¬ë„ŒíŠ¸ê°€ unmounted(í•´ì œëœ) ë  ë•Œ APIë¥¼ ê³„ì†í•´ì„œ ê°€ì ¸ì˜¤ì§€ ì•Šê³  ìƒíƒœë¥¼ ì„¤ì •í•˜ì§€ ì•Šë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<h1>íƒ€ì´ë¨¸</h1>
<p>ì¼ë°˜ì ì¸ sleep í•¨ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ë³´ì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">sleep</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">ms: number</span>) => {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =></span> {
    <span class="hljs-built_in">setTimeout</span>(resolve, ms);
  });
};
</code></pre>
<p>ì¢‹ì€ ì‘ì—…ì´ ì˜ ë˜ì—ˆì§€ë§Œ ì´ë ‡ê²Œ ë˜ë©´ ì½œë°±ì„ ì·¨ì†Œí•  ìˆ˜ ì—†ì–´ìš”. ì´ ë¬¸ì œë¥¼ í•´ê²°í•´ ë´ìš”:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">sleep</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">ms: number, timeoutId: NodeJS.Timeout</span>) => {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =></span> {
    timeoutId = <span class="hljs-built_in">setTimeout</span>(resolve, ms);
  });
};
</code></pre>
<p>ì´ ì½”ë“œëŠ” ê°„ë‹¨í•œ ì‘ì—…ì—ëŠ” ì˜ ì‘ë™í•˜ì§€ë§Œ, ë¯¼ê°ë„ì— ë”°ë¼ 2ê°€ì§€ (ë˜ëŠ” 3ê°€ì§€) ë¬¸ì œê°€ ìˆì–´ìš”. ì²«ì§¸, timeoutIdê°€ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²½ê³ ê°€ ëŒ€ë¶€ë¶„ì˜ ë¦°íŒ… ì„¤ì •ì—ì„œ í‘œì‹œë  ê±°ì˜ˆìš”. ë‘˜ì§¸, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ê³¼ ì„ì˜€ì„ ë•Œ, 2ê°œì˜ ë‹¤ë¥¸ ì •ë¦¬ APIê°€ ë°œìƒí•´ìš”. ì„¸ë²ˆì§¸ ë¬¸ì œëŠ” timeoutId ë§¤ê°œë³€ìˆ˜ê°€ ì°¸ì¡°ë¡œ ì „ë‹¬ë˜ê³ , refenence ì‘ì—…ì„ ì—„ê²©íˆ ì œì–´í•˜ì§€ ì•ŠëŠ” ì–¸ì–´ì—ì„œ ì°¸ì¡°ë¡œ ì‘ì—…í•˜ëŠ” ê²ƒì€ ì¢…ì¢… ì˜ˆê¸°ì¹˜ ëª»í•œ ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆì–´ìš”.</p>
<p>AbortControllerë¥¼ ì‚¬ìš©í•˜ë©´ ë„ì›€ì´ ë ê±°ì˜ˆìš”, íŠ¹íˆ AbortController ì‹ í˜¸ëŠ” ì—¬ëŸ¬ ì†ŒìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—ìš”.</p>
<p>ì´ì œ ì‹ í˜¸ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ sleep í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•´ ë´…ì‹œë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> sleep = (<span class="hljs-attr">ms</span>: number, { signal = <span class="hljs-literal">null</span> }: { <span class="hljs-attr">signal</span>: <span class="hljs-title class_">AbortSignal</span> | <span class="hljs-literal">null</span> }): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>> =>
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =></span> {
    <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(resolve, ms);
    
    <span class="hljs-keyword">if</span> (signal) {
      signal.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'abort'</span>, <span class="hljs-function">() =></span> <span class="hljs-built_in">clearTimeout</span>(timeoutId), { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });
    }
  });
</code></pre>
<p>ì´ì œ fetch APIì™€ ì¼ì¹˜í•˜ë„ë¡ ì •ë ¬ë˜ì—ˆìœ¼ë‹ˆ, ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
  <span class="hljs-keyword">const</span> abortController = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
  <span class="hljs-keyword">const</span> signal = abortController.<span class="hljs-property">signal</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetcher</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) => {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/1'</span>, { signal });
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">200</span>, { signal });
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/2'</span>, { signal });
  };

  <span class="hljs-keyword">void</span> <span class="hljs-title function_">fetcher</span>();

  <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> {
    abortController.<span class="hljs-title function_">abort</span>();
  };
}, []);
</code></pre>
<p>ìœ„ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´, AbortController ì‹ í˜¸ëŠ” fetch ìš”ì²­ê³¼ ì‚¬ìš©ì ì •ì˜ sleep í•¨ìˆ˜ ë‘ ê°€ì§€ì— ëª¨ë‘ í™œìš©ë˜ì–´, ë‹¨ì¼ ì‹ í˜¸ê°€ ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—…ì— ê±¸ì³ ê³µìœ ë˜ê³  ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</p>
<h1>Debounceì™€ Throttle</h1>
<p>ì‚¬ìš©ìê°€ ì…ë ¥í•  ë•Œ APIì—ì„œ ì œì•ˆì„ ê°€ì ¸ì˜¤ê³  ì‹¶ì€ ê²€ìƒ‰ ì…ë ¥ë€ì„ ê°€ì§€ê³  ìˆë‹¤ê³  ìƒìƒí•´ë³´ì„¸ìš”. ë§¤í¬ë¡œíŠ¸ë¡¬ì´ ë°œë™ë˜ëŠ” ê²ƒì€ ê±°ì˜ ì›í•˜ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. í‚¤ ì…ë ¥í•  ë•Œë§ˆë‹¤ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì€ ì„±ëŠ¥ ë° ê°œì¸ ì •ë³´ ë³´í˜¸ì— ì—¬ëŸ¬ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ì‹ , API ìš”ì²­ì„ debounceí•˜ì—¬ ì‚¬ìš©ìê°€ ì ì‹œ íƒ€ì´í•‘ì„ ë©ˆì¶œ ë•Œê¹Œì§€ ì§€ì—°ì‹œí‚µë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ AbortControllerê°€ ì–´ë–»ê²Œ ë„ì›€ì´ ë˜ëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">const</span> abortControllerRef = useRef&#x3C;<span class="hljs-title class_">AbortController</span> | <span class="hljs-literal">null</span>>(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">const</span> onInput = <span class="hljs-title function_">useCallback</span>(
  <span class="hljs-keyword">async</span> (<span class="hljs-attr">event</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ChangeEvent</span>&#x3C;<span class="hljs-title class_">HTMLInputElement</span>>) => {
    abortControllerRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">abort</span>(); <span class="hljs-comment">// ì´ì „ ë¹„ë™ê¸° ì‘ì—…ì„ ì•ˆì „í•˜ê²Œ ì¤‘ë‹¨í•©ë‹ˆë‹¤</span>

    <span class="hljs-keyword">const</span> input = event.<span class="hljs-property">currentTarget</span>;

    <span class="hljs-keyword">if</span> (input.<span class="hljs-property">value</span>?.<span class="hljs-property">length</span> &#x3C; <span class="hljs-number">2</span>) {
      <span class="hljs-keyword">return</span>; <span class="hljs-comment">// ì§§ì€ ì…ë ¥ ê°’ì— ëŒ€í•œ ì¡°ê¸° ë°˜í™˜</span>
    }

    abortControllerRef.<span class="hljs-property">current</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
    <span class="hljs-keyword">const</span> signal = abortControllerRef.<span class="hljs-property">current</span>.<span class="hljs-property">signal</span>;

    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">300</span>, { signal }); <span class="hljs-comment">// Debounce ì§€ì—°</span>

    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchSearchSuggestions</span>(input.<span class="hljs-property">value</span>, { signal });
  },
  []
);

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =></span> {
    abortControllerRef.<span class="hljs-property">current</span>?.<span class="hljs-title function_">abort</span>(); <span class="hljs-comment">// ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì§„í–‰ ì¤‘ì¸ ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì„ ì¤‘ì§€í•©ë‹ˆë‹¤</span>
  };
}, []);

<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">onInput</span>=<span class="hljs-string">{onInput}</span> /></span></span>
);
</code></pre>
<p>ë‹¤ì‹œ í•œ ë²ˆ ìƒì„¸ ì œì–´ê¸°ì¸ AbortControllerë¥¼ í™œìš©í•¨ìœ¼ë¡œì¨, ìš°ë¦¬ì˜ ì½”ë“œê°€ ì—¬ëŸ¬ ë²ˆì˜ ì •ë¦¬ ì‘ì—…ì„ ì²˜ë¦¬í•  í•„ìš” ì—†ì´ ê°„í¸í•˜ê²Œ ì¤‘ë‹¨ ì‚¬í•­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. debounce ëª©ì ìœ¼ë¡œ AbortControllerë¥¼ ì‚¬ìš©í•˜ëŠ” ì¶”ê°€ì ì¸ ì´ì ì€ ì‚¬ìš©ìê°€ sleep í•¨ìˆ˜ê°€ ì¢…ë£Œëœ í›„ì— íƒ€ì´í•‘ì„ ì‹œì‘í•˜ë©´ ë¹„í–‰ ì¤‘ì¸ í˜¸ì¶œì„ ì·¨ì†Œí•  ê²ƒì´ë¯€ë¡œ ì‚¬ìš©ìê°€ í•­ìƒ ìµœì‹  ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë°›ê²Œ í•¨ì„ ë³´ì¥í•©ë‹ˆë‹¤. ì´ì „ì— í•´ê²°ëœ ì¿¼ë¦¬ê°€ ì•„ë‹Œ ìµœì‹  ì¿¼ë¦¬ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì‚¬ìš©ìê°€ í•­ìƒ ìˆ˜ì‹ í•©ë‹ˆë‹¤!</p>
<p>ì´ ê¸°ì‚¬ë¥¼ ë¦¬ë·°í•´ ì¤€ Trys Mudfordë‹˜ê»˜ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤ ğŸ‘</p>
<h1>ì €ì ì†Œê°œ</h1>
<p>ì €ëŠ” Szymonì´ë¼ê³  í•©ë‹ˆë‹¤. Motorwayì—ì„œ ì›¹ ë° ë””ìì¸ ì‹œìŠ¤í…œ ê°œë°œìë¡œ ê·¼ë¬´í•˜ê³  ìˆìŠµë‹ˆë‹¤. 5ë…„ì´ ë„˜ê²Œ ì°¸ì—¬í•œ ì´í›„ ì˜êµ­ì—ì„œ ê°€ì¥ ë¹ ë¥´ê²Œ ì„±ì¥í•˜ëŠ” ì¤‘ê³ ì°¨ ê±°ë˜ ì‹œì¥ì„ êµ¬ì¶•í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê³  ìˆìŠµë‹ˆë‹¤.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"ë¹„ë™ê¸° ì‘ì—…ì„ AbortControllerë¡œ ê´€ë¦¬í•˜ê¸°","description":"","date":"2024-05-15 15:29","slug":"2024-05-15-ManagingasynchronousoperationswithAbortController","content":"\n\n`\u003cimg src=\"/assets/img/2024-05-15-ManagingasynchronousoperationswithAbortController_0.png\" /\u003e`\n\nAbortControllerëŠ” íŠ¹ìˆ˜í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì€ Webpack êµ¬ì„±, íŒŒì¼ I/O ë˜ëŠ” ë²„í¼ì™€ ê°™ì€ ê²ƒë“¤ê³¼ ì‘ì—…ì„ í•˜ë‹¤ê°€ ì´ ë§¤ìš° ìœ ìš©í•œ APIë¥¼ ìš°ì—°íˆ ë°œê²¬í•˜ê²Œ ë©ë‹ˆë‹¤. ë„ë¦¬ ì‚¬ìš©ë˜ì§€ ì•Šì§€ë§Œ AbortControllerëŠ” ë¹„ë™ê¸° ì‘ì—…ì„ ì·¨ì†Œí•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ì—¬ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ë‹¹ì‹ ì´ ê³§ ì•Œê²Œ ë  ê²ƒì€... ë¬´ì—‡ì´ë“ ì§€!\n\ní•˜ì§€ë§Œ ë¨¼ì € ê¸°ì´ˆë¶€í„° ì‹œì‘í•´ë³´ì£ .\n\n# ë„¤íŠ¸ì›Œí¬ ìš”ì²­\n\n\n\nAbortControllerì˜ ê°€ì¥ ì˜ ì•Œë ¤ì§„ ì‚¬ìš©ë²•ì€ ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œì„ ì·¨ì†Œí•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. fetch APIëŠ” ì˜µì…˜ìœ¼ë¡œ signal ì†ì„±ì„ ê¸°ë³¸ ì œê³µí•˜ë©°, ë¬¸ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n```js\nconst controller = new AbortController();\nconst signal = controller.signal;\n\nawait fetch(url, { signal })\n\n// ìš”ì²­ì„ ì·¨ì†Œí•˜ë ¤ë©´ ë‹¤ìŒì„ í˜¸ì¶œí•˜ì‹­ì‹œì˜¤:\ncontroller.cancel()\n```\n\nì›¹ ì‘ìš© í”„ë¡œê·¸ë¨ í”„ë ˆì„ì›Œí¬ ì„¸ê³„ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì´ ê¸°ì‚¬ ì „ë°˜ì—ì„œ ì½”ë“œ ì˜ˆì‹œë¡œ Reactë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤):\n\n```js\nuseEffect(() =\u003e {\n  const controller = new AbortController();\n  const signal = controller.signal;\n  \n  const fetchData = async () =\u003e {\n    try {\n      const res = await fetch(url, { signal })\n      const data = await res.json();\n\n      setState(data);\n    } catch (err) {\n      // ì—ëŸ¬ ì²˜ë¦¬\n    }\n  }\n  \n  void fetchData();\n  \n  return () =\u003e {\n    controller.abort()\n  }\n}, []);\n```\n\n\nì´ê²ƒì€ ë‹¹ì‹ ì˜ ì»´í¬ë„ŒíŠ¸ê°€ unmounted(í•´ì œëœ) ë  ë•Œ APIë¥¼ ê³„ì†í•´ì„œ ê°€ì ¸ì˜¤ì§€ ì•Šê³  ìƒíƒœë¥¼ ì„¤ì •í•˜ì§€ ì•Šë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.\n\n# íƒ€ì´ë¨¸\n\nì¼ë°˜ì ì¸ sleep í•¨ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ë³´ì…ë‹ˆë‹¤:\n\n```js\nconst sleep = async (ms: number) =\u003e {\n  return new Promise((resolve) =\u003e {\n    setTimeout(resolve, ms);\n  });\n};\n```\n\n\n\nì¢‹ì€ ì‘ì—…ì´ ì˜ ë˜ì—ˆì§€ë§Œ ì´ë ‡ê²Œ ë˜ë©´ ì½œë°±ì„ ì·¨ì†Œí•  ìˆ˜ ì—†ì–´ìš”. ì´ ë¬¸ì œë¥¼ í•´ê²°í•´ ë´ìš”:\n\n```js\nconst sleep = async (ms: number, timeoutId: NodeJS.Timeout) =\u003e {\n  return new Promise((resolve) =\u003e {\n    timeoutId = setTimeout(resolve, ms);\n  });\n};\n```\n\nì´ ì½”ë“œëŠ” ê°„ë‹¨í•œ ì‘ì—…ì—ëŠ” ì˜ ì‘ë™í•˜ì§€ë§Œ, ë¯¼ê°ë„ì— ë”°ë¼ 2ê°€ì§€ (ë˜ëŠ” 3ê°€ì§€) ë¬¸ì œê°€ ìˆì–´ìš”. ì²«ì§¸, timeoutIdê°€ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²½ê³ ê°€ ëŒ€ë¶€ë¶„ì˜ ë¦°íŒ… ì„¤ì •ì—ì„œ í‘œì‹œë  ê±°ì˜ˆìš”. ë‘˜ì§¸, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ê³¼ ì„ì˜€ì„ ë•Œ, 2ê°œì˜ ë‹¤ë¥¸ ì •ë¦¬ APIê°€ ë°œìƒí•´ìš”. ì„¸ë²ˆì§¸ ë¬¸ì œëŠ” timeoutId ë§¤ê°œë³€ìˆ˜ê°€ ì°¸ì¡°ë¡œ ì „ë‹¬ë˜ê³ , refenence ì‘ì—…ì„ ì—„ê²©íˆ ì œì–´í•˜ì§€ ì•ŠëŠ” ì–¸ì–´ì—ì„œ ì°¸ì¡°ë¡œ ì‘ì—…í•˜ëŠ” ê²ƒì€ ì¢…ì¢… ì˜ˆê¸°ì¹˜ ëª»í•œ ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆì–´ìš”.\n\nAbortControllerë¥¼ ì‚¬ìš©í•˜ë©´ ë„ì›€ì´ ë ê±°ì˜ˆìš”, íŠ¹íˆ AbortController ì‹ í˜¸ëŠ” ì—¬ëŸ¬ ì†ŒìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—ìš”.\n\n\n\nì´ì œ ì‹ í˜¸ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ sleep í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•´ ë´…ì‹œë‹¤:\n\n```js\nconst sleep = (ms: number, { signal = null }: { signal: AbortSignal | null }): Promise\u003cvoid\u003e =\u003e\n  new Promise((resolve) =\u003e {\n    const timeoutId = setTimeout(resolve, ms);\n    \n    if (signal) {\n      signal.addEventListener('abort', () =\u003e clearTimeout(timeoutId), { once: true });\n    }\n  });\n```\n\nì´ì œ fetch APIì™€ ì¼ì¹˜í•˜ë„ë¡ ì •ë ¬ë˜ì—ˆìœ¼ë‹ˆ, ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤:\n\n```js\nuseEffect(() =\u003e {\n  const abortController = new AbortController();\n  const signal = abortController.signal;\n\n  const fetcher = async () =\u003e {\n    await fetch('/api/1', { signal });\n    await sleep(200, { signal });\n    await fetch('/api/2', { signal });\n  };\n\n  void fetcher();\n\n  return () =\u003e {\n    abortController.abort();\n  };\n}, []);\n```\n\n\n\nìœ„ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´, AbortController ì‹ í˜¸ëŠ” fetch ìš”ì²­ê³¼ ì‚¬ìš©ì ì •ì˜ sleep í•¨ìˆ˜ ë‘ ê°€ì§€ì— ëª¨ë‘ í™œìš©ë˜ì–´, ë‹¨ì¼ ì‹ í˜¸ê°€ ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—…ì— ê±¸ì³ ê³µìœ ë˜ê³  ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\n\n# Debounceì™€ Throttle\n\nì‚¬ìš©ìê°€ ì…ë ¥í•  ë•Œ APIì—ì„œ ì œì•ˆì„ ê°€ì ¸ì˜¤ê³  ì‹¶ì€ ê²€ìƒ‰ ì…ë ¥ë€ì„ ê°€ì§€ê³  ìˆë‹¤ê³  ìƒìƒí•´ë³´ì„¸ìš”. ë§¤í¬ë¡œíŠ¸ë¡¬ì´ ë°œë™ë˜ëŠ” ê²ƒì€ ê±°ì˜ ì›í•˜ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. í‚¤ ì…ë ¥í•  ë•Œë§ˆë‹¤ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì€ ì„±ëŠ¥ ë° ê°œì¸ ì •ë³´ ë³´í˜¸ì— ì—¬ëŸ¬ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ì‹ , API ìš”ì²­ì„ debounceí•˜ì—¬ ì‚¬ìš©ìê°€ ì ì‹œ íƒ€ì´í•‘ì„ ë©ˆì¶œ ë•Œê¹Œì§€ ì§€ì—°ì‹œí‚µë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ AbortControllerê°€ ì–´ë–»ê²Œ ë„ì›€ì´ ë˜ëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\nconst abortControllerRef = useRef\u003cAbortController | null\u003e(null);\n\nconst onInput = useCallback(\n  async (event: React.ChangeEvent\u003cHTMLInputElement\u003e) =\u003e {\n    abortControllerRef.current?.abort(); // ì´ì „ ë¹„ë™ê¸° ì‘ì—…ì„ ì•ˆì „í•˜ê²Œ ì¤‘ë‹¨í•©ë‹ˆë‹¤\n\n    const input = event.currentTarget;\n\n    if (input.value?.length \u003c 2) {\n      return; // ì§§ì€ ì…ë ¥ ê°’ì— ëŒ€í•œ ì¡°ê¸° ë°˜í™˜\n    }\n\n    abortControllerRef.current = new AbortController();\n    const signal = abortControllerRef.current.signal;\n\n    await sleep(300, { signal }); // Debounce ì§€ì—°\n\n    await fetchSearchSuggestions(input.value, { signal });\n  },\n  []\n);\n\nuseEffect(() =\u003e {\n  return () =\u003e {\n    abortControllerRef.current?.abort(); // ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì§„í–‰ ì¤‘ì¸ ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì„ ì¤‘ì§€í•©ë‹ˆë‹¤\n  };\n}, []);\n\nreturn (\n  \u003cinput onInput={onInput} /\u003e\n);\n```\n\n\n\në‹¤ì‹œ í•œ ë²ˆ ìƒì„¸ ì œì–´ê¸°ì¸ AbortControllerë¥¼ í™œìš©í•¨ìœ¼ë¡œì¨, ìš°ë¦¬ì˜ ì½”ë“œê°€ ì—¬ëŸ¬ ë²ˆì˜ ì •ë¦¬ ì‘ì—…ì„ ì²˜ë¦¬í•  í•„ìš” ì—†ì´ ê°„í¸í•˜ê²Œ ì¤‘ë‹¨ ì‚¬í•­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. debounce ëª©ì ìœ¼ë¡œ AbortControllerë¥¼ ì‚¬ìš©í•˜ëŠ” ì¶”ê°€ì ì¸ ì´ì ì€ ì‚¬ìš©ìê°€ sleep í•¨ìˆ˜ê°€ ì¢…ë£Œëœ í›„ì— íƒ€ì´í•‘ì„ ì‹œì‘í•˜ë©´ ë¹„í–‰ ì¤‘ì¸ í˜¸ì¶œì„ ì·¨ì†Œí•  ê²ƒì´ë¯€ë¡œ ì‚¬ìš©ìê°€ í•­ìƒ ìµœì‹  ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë°›ê²Œ í•¨ì„ ë³´ì¥í•©ë‹ˆë‹¤. ì´ì „ì— í•´ê²°ëœ ì¿¼ë¦¬ê°€ ì•„ë‹Œ ìµœì‹  ì¿¼ë¦¬ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì‚¬ìš©ìê°€ í•­ìƒ ìˆ˜ì‹ í•©ë‹ˆë‹¤!\n\nì´ ê¸°ì‚¬ë¥¼ ë¦¬ë·°í•´ ì¤€ Trys Mudfordë‹˜ê»˜ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤ ğŸ‘\n\n# ì €ì ì†Œê°œ\n\nì €ëŠ” Szymonì´ë¼ê³  í•©ë‹ˆë‹¤. Motorwayì—ì„œ ì›¹ ë° ë””ìì¸ ì‹œìŠ¤í…œ ê°œë°œìë¡œ ê·¼ë¬´í•˜ê³  ìˆìŠµë‹ˆë‹¤. 5ë…„ì´ ë„˜ê²Œ ì°¸ì—¬í•œ ì´í›„ ì˜êµ­ì—ì„œ ê°€ì¥ ë¹ ë¥´ê²Œ ì„±ì¥í•˜ëŠ” ì¤‘ê³ ì°¨ ê±°ë˜ ì‹œì¥ì„ êµ¬ì¶•í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê³  ìˆìŠµë‹ˆë‹¤.","ogImage":{"url":"/assets/img/2024-05-15-ManagingasynchronousoperationswithAbortController_0.png"},"coverImage":"/assets/img/2024-05-15-ManagingasynchronousoperationswithAbortController_0.png","tag":["Tech"],"readingTime":5},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003ccode\u003e\u0026#x3C;img src=\"/assets/img/2024-05-15-ManagingasynchronousoperationswithAbortController_0.png\" /\u003e\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAbortControllerëŠ” íŠ¹ìˆ˜í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì€ Webpack êµ¬ì„±, íŒŒì¼ I/O ë˜ëŠ” ë²„í¼ì™€ ê°™ì€ ê²ƒë“¤ê³¼ ì‘ì—…ì„ í•˜ë‹¤ê°€ ì´ ë§¤ìš° ìœ ìš©í•œ APIë¥¼ ìš°ì—°íˆ ë°œê²¬í•˜ê²Œ ë©ë‹ˆë‹¤. ë„ë¦¬ ì‚¬ìš©ë˜ì§€ ì•Šì§€ë§Œ AbortControllerëŠ” ë¹„ë™ê¸° ì‘ì—…ì„ ì·¨ì†Œí•˜ëŠ” ë°©ë²•ì„ ì œê³µí•˜ì—¬ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤. ë‹¹ì‹ ì´ ê³§ ì•Œê²Œ ë  ê²ƒì€... ë¬´ì—‡ì´ë“ ì§€!\u003c/p\u003e\n\u003cp\u003eí•˜ì§€ë§Œ ë¨¼ì € ê¸°ì´ˆë¶€í„° ì‹œì‘í•´ë³´ì£ .\u003c/p\u003e\n\u003ch1\u003eë„¤íŠ¸ì›Œí¬ ìš”ì²­\u003c/h1\u003e\n\u003cp\u003eAbortControllerì˜ ê°€ì¥ ì˜ ì•Œë ¤ì§„ ì‚¬ìš©ë²•ì€ ë„¤íŠ¸ì›Œí¬ í˜¸ì¶œì„ ì·¨ì†Œí•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. fetch APIëŠ” ì˜µì…˜ìœ¼ë¡œ signal ì†ì„±ì„ ê¸°ë³¸ ì œê³µí•˜ë©°, ë¬¸ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e controller = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAbortController\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e signal = controller.\u003cspan class=\"hljs-property\"\u003esignal\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(url, { signal })\n\n\u003cspan class=\"hljs-comment\"\u003e// ìš”ì²­ì„ ì·¨ì†Œí•˜ë ¤ë©´ ë‹¤ìŒì„ í˜¸ì¶œí•˜ì‹­ì‹œì˜¤:\u003c/span\u003e\ncontroller.\u003cspan class=\"hljs-title function_\"\u003ecancel\u003c/span\u003e()\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì›¹ ì‘ìš© í”„ë¡œê·¸ë¨ í”„ë ˆì„ì›Œí¬ ì„¸ê³„ì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì´ ê¸°ì‚¬ ì „ë°˜ì—ì„œ ì½”ë“œ ì˜ˆì‹œë¡œ Reactë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e controller = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAbortController\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e signal = controller.\u003cspan class=\"hljs-property\"\u003esignal\u003c/span\u003e;\n  \n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetchData\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e res = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(url, { signal })\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e();\n\n      \u003cspan class=\"hljs-title function_\"\u003esetState\u003c/span\u003e(data);\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (err) {\n      \u003cspan class=\"hljs-comment\"\u003e// ì—ëŸ¬ ì²˜ë¦¬\u003c/span\u003e\n    }\n  }\n  \n  \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetchData\u003c/span\u003e();\n  \n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    controller.\u003cspan class=\"hljs-title function_\"\u003eabort\u003c/span\u003e()\n  }\n}, []);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ê²ƒì€ ë‹¹ì‹ ì˜ ì»´í¬ë„ŒíŠ¸ê°€ unmounted(í•´ì œëœ) ë  ë•Œ APIë¥¼ ê³„ì†í•´ì„œ ê°€ì ¸ì˜¤ì§€ ì•Šê³  ìƒíƒœë¥¼ ì„¤ì •í•˜ì§€ ì•Šë„ë¡ ë³´ì¥í•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eíƒ€ì´ë¨¸\u003c/h1\u003e\n\u003cp\u003eì¼ë°˜ì ì¸ sleep í•¨ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ë³´ì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esleep\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003ems: number\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve\u003c/span\u003e) =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(resolve, ms);\n  });\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì¢‹ì€ ì‘ì—…ì´ ì˜ ë˜ì—ˆì§€ë§Œ ì´ë ‡ê²Œ ë˜ë©´ ì½œë°±ì„ ì·¨ì†Œí•  ìˆ˜ ì—†ì–´ìš”. ì´ ë¬¸ì œë¥¼ í•´ê²°í•´ ë´ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esleep\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003ems: number, timeoutId: NodeJS.Timeout\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve\u003c/span\u003e) =\u003e\u003c/span\u003e {\n    timeoutId = \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(resolve, ms);\n  });\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ì½”ë“œëŠ” ê°„ë‹¨í•œ ì‘ì—…ì—ëŠ” ì˜ ì‘ë™í•˜ì§€ë§Œ, ë¯¼ê°ë„ì— ë”°ë¼ 2ê°€ì§€ (ë˜ëŠ” 3ê°€ì§€) ë¬¸ì œê°€ ìˆì–´ìš”. ì²«ì§¸, timeoutIdê°€ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²½ê³ ê°€ ëŒ€ë¶€ë¶„ì˜ ë¦°íŒ… ì„¤ì •ì—ì„œ í‘œì‹œë  ê±°ì˜ˆìš”. ë‘˜ì§¸, ë„¤íŠ¸ì›Œí¬ ìš”ì²­ê³¼ ì„ì˜€ì„ ë•Œ, 2ê°œì˜ ë‹¤ë¥¸ ì •ë¦¬ APIê°€ ë°œìƒí•´ìš”. ì„¸ë²ˆì§¸ ë¬¸ì œëŠ” timeoutId ë§¤ê°œë³€ìˆ˜ê°€ ì°¸ì¡°ë¡œ ì „ë‹¬ë˜ê³ , refenence ì‘ì—…ì„ ì—„ê²©íˆ ì œì–´í•˜ì§€ ì•ŠëŠ” ì–¸ì–´ì—ì„œ ì°¸ì¡°ë¡œ ì‘ì—…í•˜ëŠ” ê²ƒì€ ì¢…ì¢… ì˜ˆê¸°ì¹˜ ëª»í•œ ë²„ê·¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆì–´ìš”.\u003c/p\u003e\n\u003cp\u003eAbortControllerë¥¼ ì‚¬ìš©í•˜ë©´ ë„ì›€ì´ ë ê±°ì˜ˆìš”, íŠ¹íˆ AbortController ì‹ í˜¸ëŠ” ì—¬ëŸ¬ ì†ŒìŠ¤ì— ì—°ê²°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—ìš”.\u003c/p\u003e\n\u003cp\u003eì´ì œ ì‹ í˜¸ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ sleep í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•´ ë´…ì‹œë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e sleep = (\u003cspan class=\"hljs-attr\"\u003ems\u003c/span\u003e: number, { signal = \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e }: { \u003cspan class=\"hljs-attr\"\u003esignal\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAbortSignal\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e }): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e =\u003e\n  \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve\u003c/span\u003e) =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e timeoutId = \u003cspan class=\"hljs-built_in\"\u003esetTimeout\u003c/span\u003e(resolve, ms);\n    \n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (signal) {\n      signal.\u003cspan class=\"hljs-title function_\"\u003eaddEventListener\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'abort'\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eclearTimeout\u003c/span\u003e(timeoutId), { \u003cspan class=\"hljs-attr\"\u003eonce\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e });\n    }\n  });\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ fetch APIì™€ ì¼ì¹˜í•˜ë„ë¡ ì •ë ¬ë˜ì—ˆìœ¼ë‹ˆ, ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e abortController = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAbortController\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e signal = abortController.\u003cspan class=\"hljs-property\"\u003esignal\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetcher\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'/api/1'\u003c/span\u003e, { signal });\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esleep\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e, { signal });\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'/api/2'\u003c/span\u003e, { signal });\n  };\n\n  \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetcher\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    abortController.\u003cspan class=\"hljs-title function_\"\u003eabort\u003c/span\u003e();\n  };\n}, []);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´, AbortController ì‹ í˜¸ëŠ” fetch ìš”ì²­ê³¼ ì‚¬ìš©ì ì •ì˜ sleep í•¨ìˆ˜ ë‘ ê°€ì§€ì— ëª¨ë‘ í™œìš©ë˜ì–´, ë‹¨ì¼ ì‹ í˜¸ê°€ ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—…ì— ê±¸ì³ ê³µìœ ë˜ê³  ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì¤ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eDebounceì™€ Throttle\u003c/h1\u003e\n\u003cp\u003eì‚¬ìš©ìê°€ ì…ë ¥í•  ë•Œ APIì—ì„œ ì œì•ˆì„ ê°€ì ¸ì˜¤ê³  ì‹¶ì€ ê²€ìƒ‰ ì…ë ¥ë€ì„ ê°€ì§€ê³  ìˆë‹¤ê³  ìƒìƒí•´ë³´ì„¸ìš”. ë§¤í¬ë¡œíŠ¸ë¡¬ì´ ë°œë™ë˜ëŠ” ê²ƒì€ ê±°ì˜ ì›í•˜ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. í‚¤ ì…ë ¥í•  ë•Œë§ˆë‹¤ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì€ ì„±ëŠ¥ ë° ê°œì¸ ì •ë³´ ë³´í˜¸ì— ì—¬ëŸ¬ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ì‹ , API ìš”ì²­ì„ debounceí•˜ì—¬ ì‚¬ìš©ìê°€ ì ì‹œ íƒ€ì´í•‘ì„ ë©ˆì¶œ ë•Œê¹Œì§€ ì§€ì—°ì‹œí‚µë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ AbortControllerê°€ ì–´ë–»ê²Œ ë„ì›€ì´ ë˜ëŠ”ì§€ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e abortControllerRef = useRef\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eAbortController\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e\u003e(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e onInput = \u003cspan class=\"hljs-title function_\"\u003euseCallback\u003c/span\u003e(\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003eevent\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eChangeEvent\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLInputElement\u003c/span\u003e\u003e) =\u003e {\n    abortControllerRef.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003eabort\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// ì´ì „ ë¹„ë™ê¸° ì‘ì—…ì„ ì•ˆì „í•˜ê²Œ ì¤‘ë‹¨í•©ë‹ˆë‹¤\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e input = event.\u003cspan class=\"hljs-property\"\u003ecurrentTarget\u003c/span\u003e;\n\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (input.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e?.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e \u0026#x3C; \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e; \u003cspan class=\"hljs-comment\"\u003e// ì§§ì€ ì…ë ¥ ê°’ì— ëŒ€í•œ ì¡°ê¸° ë°˜í™˜\u003c/span\u003e\n    }\n\n    abortControllerRef.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAbortController\u003c/span\u003e();\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e signal = abortControllerRef.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003esignal\u003c/span\u003e;\n\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003esleep\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e300\u003c/span\u003e, { signal }); \u003cspan class=\"hljs-comment\"\u003e// Debounce ì§€ì—°\u003c/span\u003e\n\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetchSearchSuggestions\u003c/span\u003e(input.\u003cspan class=\"hljs-property\"\u003evalue\u003c/span\u003e, { signal });\n  },\n  []\n);\n\n\u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    abortControllerRef.\u003cspan class=\"hljs-property\"\u003ecurrent\u003c/span\u003e?.\u003cspan class=\"hljs-title function_\"\u003eabort\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì§„í–‰ ì¤‘ì¸ ëª¨ë“  ë¹„ë™ê¸° ì‘ì—…ì„ ì¤‘ì§€í•©ë‹ˆë‹¤\u003c/span\u003e\n  };\n}, []);\n\n\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n  \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonInput\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{onInput}\u003c/span\u003e /\u003e\u003c/span\u003e\u003c/span\u003e\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë‹¤ì‹œ í•œ ë²ˆ ìƒì„¸ ì œì–´ê¸°ì¸ AbortControllerë¥¼ í™œìš©í•¨ìœ¼ë¡œì¨, ìš°ë¦¬ì˜ ì½”ë“œê°€ ì—¬ëŸ¬ ë²ˆì˜ ì •ë¦¬ ì‘ì—…ì„ ì²˜ë¦¬í•  í•„ìš” ì—†ì´ ê°„í¸í•˜ê²Œ ì¤‘ë‹¨ ì‚¬í•­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. debounce ëª©ì ìœ¼ë¡œ AbortControllerë¥¼ ì‚¬ìš©í•˜ëŠ” ì¶”ê°€ì ì¸ ì´ì ì€ ì‚¬ìš©ìê°€ sleep í•¨ìˆ˜ê°€ ì¢…ë£Œëœ í›„ì— íƒ€ì´í•‘ì„ ì‹œì‘í•˜ë©´ ë¹„í–‰ ì¤‘ì¸ í˜¸ì¶œì„ ì·¨ì†Œí•  ê²ƒì´ë¯€ë¡œ ì‚¬ìš©ìê°€ í•­ìƒ ìµœì‹  ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë°›ê²Œ í•¨ì„ ë³´ì¥í•©ë‹ˆë‹¤. ì´ì „ì— í•´ê²°ëœ ì¿¼ë¦¬ê°€ ì•„ë‹Œ ìµœì‹  ì¿¼ë¦¬ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì‚¬ìš©ìê°€ í•­ìƒ ìˆ˜ì‹ í•©ë‹ˆë‹¤!\u003c/p\u003e\n\u003cp\u003eì´ ê¸°ì‚¬ë¥¼ ë¦¬ë·°í•´ ì¤€ Trys Mudfordë‹˜ê»˜ ê°ì‚¬ë“œë¦½ë‹ˆë‹¤ ğŸ‘\u003c/p\u003e\n\u003ch1\u003eì €ì ì†Œê°œ\u003c/h1\u003e\n\u003cp\u003eì €ëŠ” Szymonì´ë¼ê³  í•©ë‹ˆë‹¤. Motorwayì—ì„œ ì›¹ ë° ë””ìì¸ ì‹œìŠ¤í…œ ê°œë°œìë¡œ ê·¼ë¬´í•˜ê³  ìˆìŠµë‹ˆë‹¤. 5ë…„ì´ ë„˜ê²Œ ì°¸ì—¬í•œ ì´í›„ ì˜êµ­ì—ì„œ ê°€ì¥ ë¹ ë¥´ê²Œ ì„±ì¥í•˜ëŠ” ì¤‘ê³ ì°¨ ê±°ë˜ ì‹œì¥ì„ êµ¬ì¶•í•˜ëŠ” ë° ë„ì›€ì„ ì£¼ê³  ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-15-ManagingasynchronousoperationswithAbortController"},"buildId":"aCCUs-qPrLLLWRnkN0AOd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>