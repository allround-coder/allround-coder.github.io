<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Terraform을 사용하여 VPC 피어링 자동화하기 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-15-AutomateVPCPeeringwithTerraform" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Terraform을 사용하여 VPC 피어링 자동화하기 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="Terraform을 사용하여 VPC 피어링 자동화하기 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-15-AutomateVPCPeeringwithTerraform" data-gatsby-head="true"/><meta name="twitter:title" content="Terraform을 사용하여 VPC 피어링 자동화하기 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-15 11:00" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/cd012fc8787133d0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/cd012fc8787133d0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-4a646156c659a948.js" defer=""></script><script src="/_next/static/chunks/348-d11c34b645b13f5b.js" defer=""></script><script src="/_next/static/chunks/551-3069cf29fe274aab.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-a8eda6c93e0b14fe.js" defer=""></script><script src="/_next/static/7rKODeu6chWTLgXf6auoL/_buildManifest.js" defer=""></script><script src="/_next/static/7rKODeu6chWTLgXf6auoL/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Terraform을 사용하여 VPC 피어링 자동화하기</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Terraform을 사용하여 VPC 피어링 자동화하기" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/assets/profile.jpg"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 15, 2024</span><span class="posts_reading_time__f7YPP">6<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-15-AutomateVPCPeeringwithTerraform&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><p><img src="/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_0.png" alt="image"/></p>
<p>AWS의 VPC 피어링은 두 개의 VPC 간에 사설 IPv4 또는 IPv6 주소를 사용하여 트래픽을 경로 설정할 수 있는 네트워킹 연결입니다.</p>
<p>VPC 피어링은 AWS의 네트워킹 서비스 스위트의 일부로, 클라우드에서 확장 가능하고 안전하며 고가용성 네트워크 아키텍처를 생성할 수 있는 강력한 옵션을 제공합니다.</p>
<p>이 기사에서는 Terraform을 사용하여 VPC 피어링 연결을 생성하는 방법을 살펴보겠습니다.</p>
<h2>준비 사항:</h2>
<ul>
<li>Terraform이 설치된 서버</li>
</ul>
<h2>단계 1: VPC용 코드 생성</h2>
<ul>
<li>main.tf 파일을 생성하고 아래 코드를 추가하세요.</li>
</ul>
<pre><code class="hljs language-json"># Demo VPC A
resource <span class="hljs-string">&quot;aws_vpc&quot;</span> <span class="hljs-string">&quot;demo-vpc-a&quot;</span> <span class="hljs-punctuation">{</span>
  cidr_block = var.demo-vpc-a-cidr

  tags = <span class="hljs-punctuation">{</span>
    Name = <span class="hljs-string">&quot;demo-vpc-a&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

# Demo VPC B
resource <span class="hljs-string">&quot;aws_vpc&quot;</span> <span class="hljs-string">&quot;demo-vpc-b&quot;</span> <span class="hljs-punctuation">{</span>
  cidr_block = var.demo-vpc-b-cidr

  tags = <span class="hljs-punctuation">{</span>
    Name = <span class="hljs-string">&quot;demo-vpc-b&quot;</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>위의 코드는 2개의 VPC를 생성합니다.</li>
</ul>
<h2>단계 2: 서브넷용 코드 작성</h2>
<ul>
<li>아래 코드를 main.tf 파일에 추가하세요.</li>
</ul>
<pre><code class="hljs language-js"># 데모 <span class="hljs-variable constant_">VPC</span> A의 서브넷
resource <span class="hljs-string">&quot;aws_subnet&quot;</span> <span class="hljs-string">&quot;demo-subnet-a&quot;</span> {
  vpc_id            = aws_vpc.<span class="hljs-property">demo</span>-vpc-a.<span class="hljs-property">id</span>
  cidr_block        = <span class="hljs-keyword">var</span>.<span class="hljs-property">demo</span>-subnet-a-cidr
  availability_zone = data.<span class="hljs-property">aws_availability_zones</span>.<span class="hljs-property">available_zones</span>.<span class="hljs-property">names</span>[<span class="hljs-number">0</span>]

  tags = {
    <span class="hljs-title class_">Name</span> = <span class="hljs-string">&quot;Public Subnet A&quot;</span>
  }
}

# 데모 <span class="hljs-variable constant_">VPC</span> B의 서브넷
resource <span class="hljs-string">&quot;aws_subnet&quot;</span> <span class="hljs-string">&quot;demo-subnet-b&quot;</span> {
  vpc_id            = aws_vpc.<span class="hljs-property">demo</span>-vpc-b.<span class="hljs-property">id</span>
  cidr_block        = <span class="hljs-keyword">var</span>.<span class="hljs-property">demo</span>-subnet-b-cidr
  availability_zone = data.<span class="hljs-property">aws_availability_zones</span>.<span class="hljs-property">available_zones</span>.<span class="hljs-property">names</span>[<span class="hljs-number">1</span>]

  tags = {
    <span class="hljs-title class_">Name</span> = <span class="hljs-string">&quot;Public Subnet B&quot;</span>
  }
}
</code></pre>
<ul>
<li>위 코드는 각 VPC에 서브넷을 생성합니다.</li>
</ul>
<h2>단계 3: 피어링 연결을 위한 코드 생성</h2>
<ul>
<li>아래 코드를 main.tf 파일에 추가하세요.</li>
</ul>
<pre><code class="hljs language-js"># <span class="hljs-title class_">Peering</span> connection
resource <span class="hljs-string">&quot;aws_vpc_peering_connection&quot;</span> <span class="hljs-string">&quot;vpc_peering&quot;</span> {
  vpc_id      = aws_vpc.<span class="hljs-property">demo</span>-vpc-a.<span class="hljs-property">id</span>
  peer_vpc_id = aws_vpc.<span class="hljs-property">demo</span>-vpc-b.<span class="hljs-property">id</span>
}

# <span class="hljs-title class_">Peering</span> connection acceptor
resource <span class="hljs-string">&quot;aws_vpc_peering_connection_accepter&quot;</span> <span class="hljs-string">&quot;vpc_peering_accepter&quot;</span> {
  vpc_peering_connection_id = aws_vpc_peering_connection.<span class="hljs-property">vpc_peering</span>.<span class="hljs-property">id</span>
  auto_accept               = <span class="hljs-literal">true</span>
}
</code></pre>
<ul>
<li>위의 코드는 VPC 피어링 연결을 생성하고 자동으로 수락합니다.</li>
</ul>
<h2>단계 4: 라우트 테이블 및 R을 위한 코드 만들기</h2>
<ul>
<li>아래 코드를 main.tf 파일에 추가하세요.</li>
</ul>
<pre><code class="hljs language-js"># 라우트 테이블
리소스 <span class="hljs-string">&quot;aws_route_table&quot;</span> <span class="hljs-string">&quot;demo-route-table-a&quot;</span> {
  vpc_id = aws_vpc.<span class="hljs-property">demo</span>-vpc-a.<span class="hljs-property">id</span>
}

리소스 <span class="hljs-string">&quot;aws_route_table&quot;</span> <span class="hljs-string">&quot;demo-route-table-b&quot;</span> {
  vpc_id = aws_vpc.<span class="hljs-property">demo</span>-vpc-b.<span class="hljs-property">id</span>
}
</code></pre>
<ul>
<li>위의 코드는 각 VPC에 두 개의 라우트 테이블을 생성합니다.</li>
</ul>
<h2>단계 5: 라우트 코드 생성</h2>
<ul>
<li>아래 코드를 main.tf 파일에 추가합니다.</li>
</ul>
<pre><code class="hljs language-js"># <span class="hljs-variable constant_">VPC</span> 피어링을 위한 라우트 테이블에 라우트 생성하기
resource <span class="hljs-string">&quot;aws_route&quot;</span> <span class="hljs-string">&quot;demo-route-a&quot;</span> {
  route_table_id            = aws_route_table.<span class="hljs-property">demo</span>-route-table-a.<span class="hljs-property">id</span>
  destination_cidr_block    = aws_vpc.<span class="hljs-property">demo</span>-vpc-b.<span class="hljs-property">cidr_block</span>
  vpc_peering_connection_id = aws_vpc_peering_connection.<span class="hljs-property">vpc_peering</span>.<span class="hljs-property">id</span>
}

resource <span class="hljs-string">&quot;aws_route&quot;</span> <span class="hljs-string">&quot;route2&quot;</span> {
  route_table_id            = aws_route_table.<span class="hljs-property">demo</span>-route-table-b.<span class="hljs-property">id</span>
  destination_cidr_block    = aws_vpc.<span class="hljs-property">demo</span>-vpc-a.<span class="hljs-property">cidr_block</span>
  vpc_peering_connection_id = aws_vpc_peering_connection.<span class="hljs-property">vpc_peering</span>.<span class="hljs-property">id</span>
}
</code></pre>
<ul>
<li>위 코드는 라우트 테이블을 수정하여 VPC A에서 VPC B로의 라우트 및 VPC B에서 VPC A로의 라우트를 허용합니다.</li>
</ul>
<h2>단계 6: 인터넷 게이트웨이용 코드 작성하기</h2>
<ul>
<li>아래 코드를 main.tf 파일에 추가하세요.</li>
</ul>
<pre><code class="hljs language-js"># 인터넷 게이트웨이 생성
resource <span class="hljs-string">&quot;aws_internet_gateway&quot;</span> <span class="hljs-string">&quot;demo-igw&quot;</span> {
  vpc_id = aws_vpc.<span class="hljs-property">demo</span>-vpc-a.<span class="hljs-property">id</span>
}

# <span class="hljs-variable constant_">VPC</span> 라우트 테이블과 인터넷 게이트웨이 연결
resource <span class="hljs-string">&quot;aws_route&quot;</span> <span class="hljs-string">&quot;route_to_internet&quot;</span> {
  route_table_id         = aws_route_table.<span class="hljs-property">demo</span>-route-table-a.<span class="hljs-property">id</span>
  destination_cidr_block = <span class="hljs-string">&quot;0.0.0.0/0&quot;</span>
  gateway_id             = aws_internet_gateway.<span class="hljs-property">demo</span>-igw.<span class="hljs-property">id</span>
}
</code></pre>
<h2>단계 7: 변수 파일 생성하기</h2>
<ul>
<li>variables.tf 파일을 생성하고 아래 코드를 추가합니다.</li>
</ul>
<pre><code class="hljs language-js"># <span class="hljs-variable constant_">VPC</span> A <span class="hljs-variable constant_">CIDR</span>
variable <span class="hljs-string">&quot;demo-vpc-a-cidr&quot;</span> {
  type        = string
  description = <span class="hljs-string">&quot;VPC A의 CIDR&quot;</span>
}

# <span class="hljs-variable constant_">VPC</span> B <span class="hljs-variable constant_">CIDR</span>
variable <span class="hljs-string">&quot;demo-vpc-b-cidr&quot;</span> {
  type        = string
  description = <span class="hljs-string">&quot;VPC B의 CIDR&quot;</span>
}

# 서브넷 A <span class="hljs-variable constant_">CIDR</span>
variable <span class="hljs-string">&quot;demo-subnet-a-cidr&quot;</span> {
  type        = string
  description = <span class="hljs-string">&quot;데모 서브넷 A의 CIDR&quot;</span>
}

# 서브넷 B <span class="hljs-variable constant_">CIDR</span>
variable <span class="hljs-string">&quot;demo-subnet-b-cidr&quot;</span> {
  type        = string
  description = <span class="hljs-string">&quot;데모 서브넷 B의 CIDR&quot;</span>
}

# 지역
variable <span class="hljs-string">&quot;region&quot;</span> {
  type        = string
  description = <span class="hljs-string">&quot;지역&quot;</span>
}
</code></pre>
<h2>단계 8: 제공자 파일 만들기</h2>
<ul>
<li>provider.tf 파일을 만들고 아래 코드를 추가하세요.</li>
</ul>
<pre><code class="hljs language-js"># <span class="hljs-variable constant_">AWS</span> 제공자 구성
provider <span class="hljs-string">&quot;aws&quot;</span> {
  region = <span class="hljs-keyword">var</span>.<span class="hljs-property">region</span>
}

# 백엔드 구성
terraform {
  backend <span class="hljs-string">&quot;s3&quot;</span> {
    bucket         = <span class="hljs-string">&quot;dhsoni-terraform&quot;</span>
    key            = <span class="hljs-string">&quot;peering.terraform.tfstate&quot;</span>
    region         = <span class="hljs-string">&quot;us-east-2&quot;</span>
    dynamodb_table = <span class="hljs-string">&quot;terraform-state-lock-dynamodb&quot;</span>
  }
}
</code></pre>
<h2>단계 9: terraform.tfvars 파일 만들기</h2>
<ul>
<li>terraform.tfvars 파일을 만들고 아래 코드를 추가해주세요.</li>
</ul>
<pre><code class="hljs language-js">region             = <span class="hljs-string">&quot;us-east-2&quot;</span>
demo-vpc-a-cidr    = <span class="hljs-string">&quot;10.0.0.0/16&quot;</span>
demo-vpc-b-cidr    = <span class="hljs-string">&quot;10.1.0.0/16&quot;</span>
demo-subnet-a-cidr = <span class="hljs-string">&quot;10.0.1.0/24&quot;</span>
demo-subnet-b-cidr = <span class="hljs-string">&quot;10.1.1.0/24&quot;</span>
</code></pre>
<h2>단계 10: 작업 디렉토리 초기화</h2>
<ul>
<li>작업 디렉토리에서 terraform init 명령어를 실행해주세요. 이 명령어는 필요한 모든 공급자 및 모듈을 다운로드하고, 백엔드를 초기화합니다.</li>
</ul>
<h2>단계 11: 테라폼 실행 계획 작성</h2>
<ul>
<li>작업 디렉토리에서 <code>terraform plan</code> 명령을 실행하세요. 실행 계획을 확인할 수 있습니다.</li>
</ul>
<h2>단계 12: 테라폼 적용 실행</h2>
<ul>
<li>작업 디렉토리에서 <code>terraform apply</code> 명령을 실행하면 AWS에 필요한 모든 리소스가 생성됩니다.</li>
</ul>
<h2>단계 13: 연결 확인하기</h2>
<ul>
<li>AWS 콘솔로 이동하여 VPC 피어링 연결을 확인하세요.</li>
</ul>
<p><img src="/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_1.png" alt="이미지"/></p>
<p>이제 AWS VPC 피어링 연결을 Terraform을 사용하여 만드는 방법을 배웠습니다. 이제 원하는 대로 재생하고 필요에 맞게 수정할 수 있습니다.</p>
<p>여기서 전체 코드를 찾을 수 있어요.</p>
<p>다른 저장소들도 살펴보세요.</p>
<p>이 안내서가 도움이 되었다면 👏 버튼을 클릭해 주시고, 자유롭게 댓글을 남겨 주세요.</p>
<p>더 이런 이야기를 보고 싶다면 팔로우해 주세요 😊</p>
<h1>스택더믹 🎓</h1>
<p>끝까지 읽어주셔서 감사합니다. 가기 전에:</p>
<ul>
<li>저희 작가를 clapping하고 팔로우해주시기 바랍니다! 👏</li>
<li>저희를 팔로우하고 Youtube, Discord에서 만나보세요</li>
<li>다른 플랫폼에서도 만나보세요: In Plain English, CoFeed, Venture, Cubed</li>
<li>알고리즘 콘텐츠를 강제로 다루게 하는 블로깅 플랫폼에 지쳤나요? Differ를 시도해보세요</li>
<li>스택더믹 닷컴에서 더 많은 콘텐츠를 만나보세요</li>
</ul></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Terraform을 사용하여 VPC 피어링 자동화하기","description":"","date":"2024-05-15 11:00","slug":"2024-05-15-AutomateVPCPeeringwithTerraform","content":"\n\n\n![image](/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_0.png)\n\nAWS의 VPC 피어링은 두 개의 VPC 간에 사설 IPv4 또는 IPv6 주소를 사용하여 트래픽을 경로 설정할 수 있는 네트워킹 연결입니다.\n\nVPC 피어링은 AWS의 네트워킹 서비스 스위트의 일부로, 클라우드에서 확장 가능하고 안전하며 고가용성 네트워크 아키텍처를 생성할 수 있는 강력한 옵션을 제공합니다.\n\n이 기사에서는 Terraform을 사용하여 VPC 피어링 연결을 생성하는 방법을 살펴보겠습니다.\n\n\n\n\n## 준비 사항:\n\n- Terraform이 설치된 서버\n\n## 단계 1: VPC용 코드 생성\n\n- main.tf 파일을 생성하고 아래 코드를 추가하세요.\n\n\n\n```json\n# Demo VPC A\nresource \"aws_vpc\" \"demo-vpc-a\" {\n  cidr_block = var.demo-vpc-a-cidr\n\n  tags = {\n    Name = \"demo-vpc-a\"\n  }\n}\n\n# Demo VPC B\nresource \"aws_vpc\" \"demo-vpc-b\" {\n  cidr_block = var.demo-vpc-b-cidr\n\n  tags = {\n    Name = \"demo-vpc-b\"\n  }\n}\n```\n\n- 위의 코드는 2개의 VPC를 생성합니다.\n\n## 단계 2: 서브넷용 코드 작성\n\n- 아래 코드를 main.tf 파일에 추가하세요.\n\n\n\n```js\n# 데모 VPC A의 서브넷\nresource \"aws_subnet\" \"demo-subnet-a\" {\n  vpc_id            = aws_vpc.demo-vpc-a.id\n  cidr_block        = var.demo-subnet-a-cidr\n  availability_zone = data.aws_availability_zones.available_zones.names[0]\n\n  tags = {\n    Name = \"Public Subnet A\"\n  }\n}\n\n# 데모 VPC B의 서브넷\nresource \"aws_subnet\" \"demo-subnet-b\" {\n  vpc_id            = aws_vpc.demo-vpc-b.id\n  cidr_block        = var.demo-subnet-b-cidr\n  availability_zone = data.aws_availability_zones.available_zones.names[1]\n\n  tags = {\n    Name = \"Public Subnet B\"\n  }\n}\n```\n\n- 위 코드는 각 VPC에 서브넷을 생성합니다.\n\n## 단계 3: 피어링 연결을 위한 코드 생성\n\n- 아래 코드를 main.tf 파일에 추가하세요.\n  \n\n\n\n```js\n# Peering connection\nresource \"aws_vpc_peering_connection\" \"vpc_peering\" {\n  vpc_id      = aws_vpc.demo-vpc-a.id\n  peer_vpc_id = aws_vpc.demo-vpc-b.id\n}\n\n# Peering connection acceptor\nresource \"aws_vpc_peering_connection_accepter\" \"vpc_peering_accepter\" {\n  vpc_peering_connection_id = aws_vpc_peering_connection.vpc_peering.id\n  auto_accept               = true\n}\n```\n\n- 위의 코드는 VPC 피어링 연결을 생성하고 자동으로 수락합니다.\n\n## 단계 4: 라우트 테이블 및 R을 위한 코드 만들기\n\n- 아래 코드를 main.tf 파일에 추가하세요.\n\n\n\n\n```js\n# 라우트 테이블\n리소스 \"aws_route_table\" \"demo-route-table-a\" {\n  vpc_id = aws_vpc.demo-vpc-a.id\n}\n\n리소스 \"aws_route_table\" \"demo-route-table-b\" {\n  vpc_id = aws_vpc.demo-vpc-b.id\n}\n```\n\n- 위의 코드는 각 VPC에 두 개의 라우트 테이블을 생성합니다.\n\n## 단계 5: 라우트 코드 생성\n\n- 아래 코드를 main.tf 파일에 추가합니다.\n  \n\n\n\n```js\n# VPC 피어링을 위한 라우트 테이블에 라우트 생성하기\nresource \"aws_route\" \"demo-route-a\" {\n  route_table_id            = aws_route_table.demo-route-table-a.id\n  destination_cidr_block    = aws_vpc.demo-vpc-b.cidr_block\n  vpc_peering_connection_id = aws_vpc_peering_connection.vpc_peering.id\n}\n\nresource \"aws_route\" \"route2\" {\n  route_table_id            = aws_route_table.demo-route-table-b.id\n  destination_cidr_block    = aws_vpc.demo-vpc-a.cidr_block\n  vpc_peering_connection_id = aws_vpc_peering_connection.vpc_peering.id\n}\n```\n\n- 위 코드는 라우트 테이블을 수정하여 VPC A에서 VPC B로의 라우트 및 VPC B에서 VPC A로의 라우트를 허용합니다.\n\n## 단계 6: 인터넷 게이트웨이용 코드 작성하기\n\n- 아래 코드를 main.tf 파일에 추가하세요.\n\n\n\n\n```js\n# 인터넷 게이트웨이 생성\nresource \"aws_internet_gateway\" \"demo-igw\" {\n  vpc_id = aws_vpc.demo-vpc-a.id\n}\n\n# VPC 라우트 테이블과 인터넷 게이트웨이 연결\nresource \"aws_route\" \"route_to_internet\" {\n  route_table_id         = aws_route_table.demo-route-table-a.id\n  destination_cidr_block = \"0.0.0.0/0\"\n  gateway_id             = aws_internet_gateway.demo-igw.id\n}\n```\n\n## 단계 7: 변수 파일 생성하기\n\n- variables.tf 파일을 생성하고 아래 코드를 추가합니다.\n\n```js\n# VPC A CIDR\nvariable \"demo-vpc-a-cidr\" {\n  type        = string\n  description = \"VPC A의 CIDR\"\n}\n\n# VPC B CIDR\nvariable \"demo-vpc-b-cidr\" {\n  type        = string\n  description = \"VPC B의 CIDR\"\n}\n\n# 서브넷 A CIDR\nvariable \"demo-subnet-a-cidr\" {\n  type        = string\n  description = \"데모 서브넷 A의 CIDR\"\n}\n\n# 서브넷 B CIDR\nvariable \"demo-subnet-b-cidr\" {\n  type        = string\n  description = \"데모 서브넷 B의 CIDR\"\n}\n\n# 지역\nvariable \"region\" {\n  type        = string\n  description = \"지역\"\n}\n```\n\n\n\n## 단계 8: 제공자 파일 만들기\n\n- provider.tf 파일을 만들고 아래 코드를 추가하세요.\n\n```js\n# AWS 제공자 구성\nprovider \"aws\" {\n  region = var.region\n}\n\n# 백엔드 구성\nterraform {\n  backend \"s3\" {\n    bucket         = \"dhsoni-terraform\"\n    key            = \"peering.terraform.tfstate\"\n    region         = \"us-east-2\"\n    dynamodb_table = \"terraform-state-lock-dynamodb\"\n  }\n}\n```\n\n## 단계 9: terraform.tfvars 파일 만들기\n\n\n\n- terraform.tfvars 파일을 만들고 아래 코드를 추가해주세요.\n\n```js\nregion             = \"us-east-2\"\ndemo-vpc-a-cidr    = \"10.0.0.0/16\"\ndemo-vpc-b-cidr    = \"10.1.0.0/16\"\ndemo-subnet-a-cidr = \"10.0.1.0/24\"\ndemo-subnet-b-cidr = \"10.1.1.0/24\"\n```\n\n## 단계 10: 작업 디렉토리 초기화\n\n- 작업 디렉토리에서 terraform init 명령어를 실행해주세요. 이 명령어는 필요한 모든 공급자 및 모듈을 다운로드하고, 백엔드를 초기화합니다.\n\n\n\n## 단계 11: 테라폼 실행 계획 작성\n\n- 작업 디렉토리에서 `terraform plan` 명령을 실행하세요. 실행 계획을 확인할 수 있습니다.\n\n## 단계 12: 테라폼 적용 실행\n\n- 작업 디렉토리에서 `terraform apply` 명령을 실행하면 AWS에 필요한 모든 리소스가 생성됩니다.\n\n\n\n## 단계 13: 연결 확인하기\n\n- AWS 콘솔로 이동하여 VPC 피어링 연결을 확인하세요.\n\n![이미지](/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_1.png)\n\n이제 AWS VPC 피어링 연결을 Terraform을 사용하여 만드는 방법을 배웠습니다. 이제 원하는 대로 재생하고 필요에 맞게 수정할 수 있습니다.\n\n\n\n여기서 전체 코드를 찾을 수 있어요.\n\n다른 저장소들도 살펴보세요.\n\n이 안내서가 도움이 되었다면 👏 버튼을 클릭해 주시고, 자유롭게 댓글을 남겨 주세요.\n\n더 이런 이야기를 보고 싶다면 팔로우해 주세요 😊\n\n\n\n# 스택더믹 🎓\n\n끝까지 읽어주셔서 감사합니다. 가기 전에:\n\n- 저희 작가를 clapping하고 팔로우해주시기 바랍니다! 👏\n- 저희를 팔로우하고 Youtube, Discord에서 만나보세요\n- 다른 플랫폼에서도 만나보세요: In Plain English, CoFeed, Venture, Cubed\n- 알고리즘 콘텐츠를 강제로 다루게 하는 블로깅 플랫폼에 지쳤나요? Differ를 시도해보세요\n- 스택더믹 닷컴에서 더 많은 콘텐츠를 만나보세요","ogImage":{"url":"/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_0.png"},"coverImage":"/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_0.png","tag":["Tech"],"readingTime":6},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    img: \"img\",\n    h2: \"h2\",\n    ul: \"ul\",\n    li: \"li\",\n    pre: \"pre\",\n    code: \"code\",\n    span: \"span\",\n    h1: \"h1\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_0.png\",\n        alt: \"image\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"AWS의 VPC 피어링은 두 개의 VPC 간에 사설 IPv4 또는 IPv6 주소를 사용하여 트래픽을 경로 설정할 수 있는 네트워킹 연결입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"VPC 피어링은 AWS의 네트워킹 서비스 스위트의 일부로, 클라우드에서 확장 가능하고 안전하며 고가용성 네트워크 아키텍처를 생성할 수 있는 강력한 옵션을 제공합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 기사에서는 Terraform을 사용하여 VPC 피어링 연결을 생성하는 방법을 살펴보겠습니다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"준비 사항:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Terraform이 설치된 서버\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 1: VPC용 코드 생성\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"main.tf 파일을 생성하고 아래 코드를 추가하세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-json\",\n        children: [\"# Demo VPC A\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_vpc\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-vpc-a\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"{\"\n        }), \"\\n  cidr_block = var.demo-vpc-a-cidr\\n\\n  tags = \", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"{\"\n        }), \"\\n    Name = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-vpc-a\\\"\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"}\"\n        }), \"\\n\\n# Demo VPC B\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_vpc\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-vpc-b\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"{\"\n        }), \"\\n  cidr_block = var.demo-vpc-b-cidr\\n\\n  tags = \", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"{\"\n        }), \"\\n    Name = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-vpc-b\\\"\"\n        }), \"\\n  \", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"}\"\n        }), \"\\n\", _jsx(_components.span, {\n          className: \"hljs-punctuation\",\n          children: \"}\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"위의 코드는 2개의 VPC를 생성합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 2: 서브넷용 코드 작성\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"아래 코드를 main.tf 파일에 추가하세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"# 데모 \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"VPC\"\n        }), \" A의 서브넷\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_subnet\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-subnet-a\\\"\"\n        }), \" {\\n  vpc_id            = aws_vpc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-vpc-a.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n  cidr_block        = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"var\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-subnet-a-cidr\\n  availability_zone = data.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"aws_availability_zones\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"available_zones\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"names\"\n        }), \"[\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"0\"\n        }), \"]\\n\\n  tags = {\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Name\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Public Subnet A\\\"\"\n        }), \"\\n  }\\n}\\n\\n# 데모 \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"VPC\"\n        }), \" B의 서브넷\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_subnet\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-subnet-b\\\"\"\n        }), \" {\\n  vpc_id            = aws_vpc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-vpc-b.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n  cidr_block        = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"var\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-subnet-b-cidr\\n  availability_zone = data.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"aws_availability_zones\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"available_zones\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"names\"\n        }), \"[\", _jsx(_components.span, {\n          className: \"hljs-number\",\n          children: \"1\"\n        }), \"]\\n\\n  tags = {\\n    \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Name\"\n        }), \" = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"Public Subnet B\\\"\"\n        }), \"\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"위 코드는 각 VPC에 서브넷을 생성합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 3: 피어링 연결을 위한 코드 생성\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"아래 코드를 main.tf 파일에 추가하세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"# \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Peering\"\n        }), \" connection\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_vpc_peering_connection\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"vpc_peering\\\"\"\n        }), \" {\\n  vpc_id      = aws_vpc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-vpc-a.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n  peer_vpc_id = aws_vpc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-vpc-b.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n}\\n\\n# \", _jsx(_components.span, {\n          className: \"hljs-title class_\",\n          children: \"Peering\"\n        }), \" connection acceptor\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_vpc_peering_connection_accepter\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"vpc_peering_accepter\\\"\"\n        }), \" {\\n  vpc_peering_connection_id = aws_vpc_peering_connection.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"vpc_peering\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n  auto_accept               = \", _jsx(_components.span, {\n          className: \"hljs-literal\",\n          children: \"true\"\n        }), \"\\n}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"위의 코드는 VPC 피어링 연결을 생성하고 자동으로 수락합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 4: 라우트 테이블 및 R을 위한 코드 만들기\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"아래 코드를 main.tf 파일에 추가하세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"# 라우트 테이블\\n리소스 \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_route_table\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-route-table-a\\\"\"\n        }), \" {\\n  vpc_id = aws_vpc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-vpc-a.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n}\\n\\n리소스 \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_route_table\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-route-table-b\\\"\"\n        }), \" {\\n  vpc_id = aws_vpc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-vpc-b.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"위의 코드는 각 VPC에 두 개의 라우트 테이블을 생성합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 5: 라우트 코드 생성\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"아래 코드를 main.tf 파일에 추가합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"# \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"VPC\"\n        }), \" 피어링을 위한 라우트 테이블에 라우트 생성하기\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_route\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-route-a\\\"\"\n        }), \" {\\n  route_table_id            = aws_route_table.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-route-table-a.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n  destination_cidr_block    = aws_vpc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-vpc-b.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"cidr_block\"\n        }), \"\\n  vpc_peering_connection_id = aws_vpc_peering_connection.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"vpc_peering\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n}\\n\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_route\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"route2\\\"\"\n        }), \" {\\n  route_table_id            = aws_route_table.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-route-table-b.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n  destination_cidr_block    = aws_vpc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-vpc-a.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"cidr_block\"\n        }), \"\\n  vpc_peering_connection_id = aws_vpc_peering_connection.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"vpc_peering\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n}\\n\"]\n      })\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"위 코드는 라우트 테이블을 수정하여 VPC A에서 VPC B로의 라우트 및 VPC B에서 VPC A로의 라우트를 허용합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 6: 인터넷 게이트웨이용 코드 작성하기\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"아래 코드를 main.tf 파일에 추가하세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"# 인터넷 게이트웨이 생성\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_internet_gateway\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-igw\\\"\"\n        }), \" {\\n  vpc_id = aws_vpc.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-vpc-a.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n}\\n\\n# \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"VPC\"\n        }), \" 라우트 테이블과 인터넷 게이트웨이 연결\\nresource \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws_route\\\"\"\n        }), \" \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"route_to_internet\\\"\"\n        }), \" {\\n  route_table_id         = aws_route_table.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-route-table-a.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n  destination_cidr_block = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"0.0.0.0/0\\\"\"\n        }), \"\\n  gateway_id             = aws_internet_gateway.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"demo\"\n        }), \"-igw.\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"id\"\n        }), \"\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 7: 변수 파일 생성하기\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"variables.tf 파일을 생성하고 아래 코드를 추가합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"# \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"VPC\"\n        }), \" A \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"CIDR\"\n        }), \"\\nvariable \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-vpc-a-cidr\\\"\"\n        }), \" {\\n  type        = string\\n  description = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"VPC A의 CIDR\\\"\"\n        }), \"\\n}\\n\\n# \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"VPC\"\n        }), \" B \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"CIDR\"\n        }), \"\\nvariable \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-vpc-b-cidr\\\"\"\n        }), \" {\\n  type        = string\\n  description = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"VPC B의 CIDR\\\"\"\n        }), \"\\n}\\n\\n# 서브넷 A \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"CIDR\"\n        }), \"\\nvariable \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-subnet-a-cidr\\\"\"\n        }), \" {\\n  type        = string\\n  description = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"데모 서브넷 A의 CIDR\\\"\"\n        }), \"\\n}\\n\\n# 서브넷 B \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"CIDR\"\n        }), \"\\nvariable \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"demo-subnet-b-cidr\\\"\"\n        }), \" {\\n  type        = string\\n  description = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"데모 서브넷 B의 CIDR\\\"\"\n        }), \"\\n}\\n\\n# 지역\\nvariable \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"region\\\"\"\n        }), \" {\\n  type        = string\\n  description = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"지역\\\"\"\n        }), \"\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 8: 제공자 파일 만들기\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"provider.tf 파일을 만들고 아래 코드를 추가하세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"# \", _jsx(_components.span, {\n          className: \"hljs-variable constant_\",\n          children: \"AWS\"\n        }), \" 제공자 구성\\nprovider \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"aws\\\"\"\n        }), \" {\\n  region = \", _jsx(_components.span, {\n          className: \"hljs-keyword\",\n          children: \"var\"\n        }), \".\", _jsx(_components.span, {\n          className: \"hljs-property\",\n          children: \"region\"\n        }), \"\\n}\\n\\n# 백엔드 구성\\nterraform {\\n  backend \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"s3\\\"\"\n        }), \" {\\n    bucket         = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"dhsoni-terraform\\\"\"\n        }), \"\\n    key            = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"peering.terraform.tfstate\\\"\"\n        }), \"\\n    region         = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"us-east-2\\\"\"\n        }), \"\\n    dynamodb_table = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"terraform-state-lock-dynamodb\\\"\"\n        }), \"\\n  }\\n}\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 9: terraform.tfvars 파일 만들기\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"terraform.tfvars 파일을 만들고 아래 코드를 추가해주세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsxs(_components.code, {\n        className: \"hljs language-js\",\n        children: [\"region             = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"us-east-2\\\"\"\n        }), \"\\ndemo-vpc-a-cidr    = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"10.0.0.0/16\\\"\"\n        }), \"\\ndemo-vpc-b-cidr    = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"10.1.0.0/16\\\"\"\n        }), \"\\ndemo-subnet-a-cidr = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"10.0.1.0/24\\\"\"\n        }), \"\\ndemo-subnet-b-cidr = \", _jsx(_components.span, {\n          className: \"hljs-string\",\n          children: \"\\\"10.1.1.0/24\\\"\"\n        }), \"\\n\"]\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 10: 작업 디렉토리 초기화\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"작업 디렉토리에서 terraform init 명령어를 실행해주세요. 이 명령어는 필요한 모든 공급자 및 모듈을 다운로드하고, 백엔드를 초기화합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 11: 테라폼 실행 계획 작성\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"작업 디렉토리에서 \", _jsx(_components.code, {\n          children: \"terraform plan\"\n        }), \" 명령을 실행하세요. 실행 계획을 확인할 수 있습니다.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 12: 테라폼 적용 실행\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"작업 디렉토리에서 \", _jsx(_components.code, {\n          children: \"terraform apply\"\n        }), \" 명령을 실행하면 AWS에 필요한 모든 리소스가 생성됩니다.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"단계 13: 연결 확인하기\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"AWS 콘솔로 이동하여 VPC 피어링 연결을 확인하세요.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/assets/img/2024-05-15-AutomateVPCPeeringwithTerraform_1.png\",\n        alt: \"이미지\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 AWS VPC 피어링 연결을 Terraform을 사용하여 만드는 방법을 배웠습니다. 이제 원하는 대로 재생하고 필요에 맞게 수정할 수 있습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"여기서 전체 코드를 찾을 수 있어요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다른 저장소들도 살펴보세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이 안내서가 도움이 되었다면 👏 버튼을 클릭해 주시고, 자유롭게 댓글을 남겨 주세요.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"더 이런 이야기를 보고 싶다면 팔로우해 주세요 😊\"\n    }), \"\\n\", _jsx(_components.h1, {\n      children: \"스택더믹 🎓\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"끝까지 읽어주셔서 감사합니다. 가기 전에:\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"저희 작가를 clapping하고 팔로우해주시기 바랍니다! 👏\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"저희를 팔로우하고 Youtube, Discord에서 만나보세요\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"다른 플랫폼에서도 만나보세요: In Plain English, CoFeed, Venture, Cubed\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"알고리즘 콘텐츠를 강제로 다루게 하는 블로깅 플랫폼에 지쳤나요? Differ를 시도해보세요\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"스택더믹 닷컴에서 더 많은 콘텐츠를 만나보세요\"\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-15-AutomateVPCPeeringwithTerraform"},"buildId":"7rKODeu6chWTLgXf6auoL","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>