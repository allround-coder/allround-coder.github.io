<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>앵귤러에서 NgRx를 활용한 상태 관리하는 방법 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-18-StatemanagementwithNgRxinAngular" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="앵귤러에서 NgRx를 활용한 상태 관리하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="앵귤러에서 NgRx를 활용한 상태 관리하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-18-StatemanagementwithNgRxinAngular" data-gatsby-head="true"/><meta name="twitter:title" content="앵귤러에서 NgRx를 활용한 상태 관리하는 방법 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-18 21:49" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/aCCUs-qPrLLLWRnkN0AOd/_buildManifest.js" defer=""></script><script src="/_next/static/aCCUs-qPrLLLWRnkN0AOd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">앵귤러에서 NgRx를 활용한 상태 관리하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="앵귤러에서 NgRx를 활용한 상태 관리하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 18, 2024</span><span class="posts_reading_time__f7YPP">11<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-18-StatemanagementwithNgRxinAngular&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_0.png" alt="스크린샷"></p>
<p>현대의 프론트엔드 애플리케이션은 주로 컴포넌트 개념을 사용합니다. 이는 사용자 인터페이스의 독립적이고 재사용 가능하며 자체적인 부분을 나타냅니다. Angular, React, Vue.js와 같은 인기 있는 프론트엔드 라이브러리들에서 이 개념은 중요합니다. 다수의 컴포넌트가 동일한 데이터를 필요로 할 때 간편함과 여러 이점을 제공하지만 문제도 발생할 수 있습니다. 이 문제를 해결하기 위해 Redux 패턴이라는 개념이 있습니다. Redux 라이브러리는 처음에 React 생태계에서 인기를 얻었지만 Angular나 Vue.js와 같은 다른 프레임워크에서도 사용할 수 있습니다. 이 글에서는 NgRx 라이브러리를 사용한 상태 관리에 집중하겠습니다. Angular에서는 Redux를 사용할 수 있지만, Angular에 특별히 제작된 인기 있는 상태 관리 라이브러리인 NgRx를 사용하는 애플리케이션을 자주 볼 수 있습니다.</p>
<h2>NgRx란?</h2>
<p>소개에서 언급한 대로, NgRx는 Redux에 영감을 받은 상태 관리를 위한 라이브러리입니다. Angular용 Redux 원칙을 구현하여 애플리케이션 상태를 예측 가능하고 구조적인 방식으로 관리합니다. NgRx는 액션, 리듀서, 이펙트, 셀렉터와 같은 개념을 사용하여 상태를 조작하는데 있어 가시적인 방식을 제공합니다.</p>
<div class="content-ad"></div>
<img src="/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_1.png">
<h2>저장소</h2>
<p>"저장소"는 불변 데이터 구조로 구현된 상태 관리자의 일부입니다. 다시 말하면, 그 안에 포함된 데이터는 직접 변경할 수 없습니다. 따라서 모든 상태 변경은 작업을 통해 이루어져야 합니다. 이러한 작업은 '리듀서'라고 불리는 메커니즘을 통해 상태에서 변경될 내용을 정의합니다. 이 함수는 상태와의 통신을 처리합니다.</p>
<h2>리듀서</h2>
<div class="content-ad"></div>
<p>리듀서의 책임은 스토어의 상태를 변경할 필요가 있는 모든 작업을 처리하는 것입니다. 현재 상태와 액션을 입력으로 받아 변경 후의 새로운 상태를 반환합니다.</p>
<h2>액션</h2>
<p>"액션"은 단순히 상태 변경을 나타내는 객체들입니다. 상태를 변경할 정보를 포함한 액션은 스토어로 전송됩니다.</p>
<h2>셀렉터</h2>
<div class="content-ad"></div>
<p>"selectors"는 저장된 상태의 특정 정보에 액세스하고 가져 오는 데 사용되는 기능입니다. 따라서 구성 요소가 상점의 완전한 상태를 직접 가져 오는 대신 필요한 데이터만 요청 할 수 있습니다. 이렇게하면 코드가 더 모듈식이고 재사용 가능하며 유지 보수가 쉬워집니다. 또한, 요청 한 구성 요소에 제공되기 전에 상태에서 calc 및 변환을 수행 할 수도 있습니다.</p>
<h2>효과</h2>
<p>"효과"는 비동기 작업이나 부작용, 즉 네트워크 요청, 데이터베이스 액세스, 외부 API 호출 또는 순수 동기가 아닌 작업과 같은 기능을 나타냅니다. 그러나이 기능을이 기사에서는 사용하지 않습니다. 곧이 주제에 특별히 전념 한 기사를 쓰는 것을 선호합니다.</p>
<h1>실제로 사용하는 NgRx</h1>
<div class="content-ad"></div>
<p>내 저장소에 있는 애플리케이션은 GitHub의 igormarti/angular-ngrx-shopping(<a href="https://github.com/" rel="nofollow" target="_blank">https://github.com/</a>) 링크에서 확인할 수 있어요. 클론하려면 확인해보세요. 하지만 이 개념을 처음부터 적용할 수도 있어요. 내 애플리케이션에서는 제품을 즐겨찾기에 추가하는 상태 관리자를 사용할 거에요. 우리 애플리케이션에는 스토어에서 즐겨찾기한 제품들을 요청할 몇 가지 구성 요소가 있을 거예요. 이후 단계에서 자세한 내용을 볼 수 있을 거에요. 코드 구현에 대해 한 가지 팁: 이 프로젝트의 코드 구현은 Angular 버전 16과 NgRx 버전 7.8.0을 사용해 만들어졌어요.</p>
<h1>Angular에서 NgRx 설치</h1>
<p>프로젝트에서 NgRx를 설치하려면 루트 폴더에서 다음 명령을 실행하세요:</p>
<pre><code class="hljs language-js">npm install @ngrx/store --save
</code></pre>
<div class="content-ad"></div>
<h1>프로젝트에서 NgRx 구조화하기</h1>
<p>NgRx를 프로젝트에 설치한 후에는, 이제 구조를 만들어야 하는 때입니다. 다음 단계에서는 액션, 리듀서, 셀렉터 및 초기 상태를 만들 것입니다.</p>
<p>먼저, 애플리케이션의 앱 폴더 내에서 "states"라는 폴더를 만들 것입니다. 이 폴더 안에 "favorite-product"라는 폴더를 만든 후, 그 안에 "action", "reducer", "selector"라는 세 개의 폴더를 만들 것입니다. 구조는 다음과 같습니다:</p>
<pre><code class="hljs language-js">app ->
  states ->
      favorite-product ->
                    action
                    reducer
                    selector
</code></pre>
<div class="content-ad"></div>
<p>이제 "favorite-product" 폴더 안에 "app.state.ts" 파일을 생성할 것입니다. 이 파일은 초기 상태의 모델이 될 것입니다:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">FavoriteProduct</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"src/app/models/favorite-product.model"</span>;

<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">AppState</span> {
    <span class="hljs-attr">products</span>: <span class="hljs-title class_">FavoriteProduct</span>[];
}
</code></pre>
<p>우리의 "AppState" 인터페이스 안에 "products"라는 속성이 있음을 주목해주세요. 이는 초기 상태의 유형을 나타내는 배열 "FavoriteProduct"입니다. 따라서 우리는 이 인터페이스를 프로젝트에 만들어야 합니다. 저는 내 애플리케이션에서 "src/app/models/favorite-product.model" 경로에 만들었습니다. 그러나 원하는 곳에 넣으셔도 됩니다. 중요한 점은 "app.state.ts" 파일에서 올바르게 가져오는 것입니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">FavoriteProduct</span> {
    <span class="hljs-attr">id</span>: number;
    <span class="hljs-attr">name</span>: string;
    <span class="hljs-attr">price</span>: number;
    <span class="hljs-attr">image</span>: string;
    isFavorite?: boolean;
}
</code></pre>
<div class="content-ad"></div>
<h2>작업 생성하기</h2>
<p>이 단계에서는 "src\app\states\favorite-product\action" 폴더 안에 작업을 만들 것입니다. 우리의 파일은 "app.action.ts"로 명명될 것입니다. 이 파일에는 데이터 상태를 변경하는 모든 작업을 나타내는 함수들이 포함될 것입니다. 다음의 코드를 참조해주세요:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { createAction, props } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ngrx/store'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FavoriteProduct</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"src/app/models/favorite-product.model"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> add = <span class="hljs-title function_">createAction</span>(<span class="hljs-string">'[FavoriteProduct] Add'</span>,  props&#x3C;{ <span class="hljs-attr">product</span>: <span class="hljs-title class_">FavoriteProduct</span> }>());
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> remove = <span class="hljs-title function_">createAction</span>(<span class="hljs-string">'[FavoriteProduct] Remove'</span>, props&#x3C;{ <span class="hljs-attr">product</span>: <span class="hljs-title class_">FavoriteProduct</span> }>());
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> updateAllState = <span class="hljs-title function_">createAction</span>(<span class="hljs-string">'[FavoriteProduct] Update all state of favorites products'</span>, 
 props&#x3C;{ <span class="hljs-attr">products</span>: <span class="hljs-title class_">FavoriteProduct</span>[] }>());
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> clear = <span class="hljs-title function_">createAction</span>(<span class="hljs-string">'[FavoriteProduct] Clear'</span>);
</code></pre>
<p>위 코드에서는 "@ngrx/store" 모듈의 "createAction" 함수가 작업 설명을 첫 번째 매개변수로서, 처리할 데이터를 두 번째 매개변수로 가지는 것을 알 수 있습니다. 우리의 "favorite-product" 상태에는 다음과 같은 작업들이 있을 것입니다: add, remove, updateAllState, clear.</p>
<div class="content-ad"></div>
<h2>리듀서 생성하기</h2>
<p>우리는 "src\app\states\favorite-product\reducer" 폴더에 "app.reducer.ts" 파일을 만들어야 합니다. 이 파일에서는 즐겨찾는 제품 목록의 초기 상태를 초기화하고 각 작업에 대한 비즈니스 로직을 구현한 다음 상태를 업데이트하기 전에 상태를 변경합니다. 자세한 내용은 다음 코드를 참조해주세요:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { createReducer, on } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ngrx/store'</span>;
<span class="hljs-keyword">import</span> { add, remove, clear, updateAllState } <span class="hljs-keyword">from</span> <span class="hljs-string">'../action/app.action'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppState</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../app.state'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">initialState</span>: <span class="hljs-title class_">AppState</span> = {
  <span class="hljs-attr">products</span>:[],
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> favoriteReducer = <span class="hljs-title function_">createReducer</span>(
  initialState,
  <span class="hljs-title function_">on</span>(add, <span class="hljs-function">(<span class="hljs-params">state, {product}</span>) =></span> (
    {
      ...state,
      <span class="hljs-attr">products</span>: [...state.<span class="hljs-property">products</span>, product]
    }
  )
  ),
  <span class="hljs-title function_">on</span>(remove, <span class="hljs-function">(<span class="hljs-params">state, {product}</span>) =></span> ({
    ...state,
    <span class="hljs-attr">products</span>: state.<span class="hljs-property">products</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">p</span>)=></span> product.<span class="hljs-property">id</span> != p.<span class="hljs-property">id</span>)
  })),
  <span class="hljs-title function_">on</span>(updateAllState, <span class="hljs-function">(<span class="hljs-params">state, {products}</span>) =></span> (
    {
      ...state,
      products
    }
  )
  ),
  <span class="hljs-title function_">on</span>(clear, <span class="hljs-function"><span class="hljs-params">state</span> =></span> initialState)
);
</code></pre>
<p>먼저 초기 상태가 빈 즐겨찾는 제품 배열로 초기화되는 것을 알아봅니다. 그다음, "@ngrx/store" 모듈에서 "createReducer" 함수가 초기 상태와 여러 "on" 함수를 받아 작업을 상태 변경과 연결하고 있음을 확인해주세요.</p>
<div class="content-ad"></div>
<ul>
<li>"add" 액션은 현재 상태에 새 제품을 추가합니다.</li>
<li>마찬가지로, "remove" 액션은 현재 상태에서 특정 제품을 제거합니다.</li>
<li>"updateAllState" 액션은 매개변수로 받은 제품 목록으로 상태를 업데이트합니다.</li>
<li>마지막으로 중요하지만 더욱 중요한 것은, "clear" 액션은 초기 상태로 설정하여 상태를 재설정하며, 저장소에서 모든 즐겨찾는 제품을 모두 지우게 됩니다.</li>
</ul>
<h2>셀렉터 생성하기</h2>
<p>이제 저장소에서 데이터를 검색하려면 셀렉터를 생성해야 합니다. 이를 위해 'src\app\states\favorite-product\selector' 폴더에 'app.selector.ts' 파일을 만들어야 합니다. 자세한 내용은 다음 코드를 참조해주십시오:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { createFeatureSelector, createSelector } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ngrx/store'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppState</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../app.state'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FavoriteProduct</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"src/app/models/favorite-product.model"</span>;

<span class="hljs-comment">// 애플리케이션 내에서 즐겨찾는 제품의 전체 상태를 가져옵니다.</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> selectAppState = createFeatureSelector&#x3C;<span class="hljs-title class_">AppState</span>>(<span class="hljs-string">'favorite'</span>);

<span class="hljs-comment">// 모든 즐겨찾는 제품 가져오기</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> selectProducts = <span class="hljs-title function_">createSelector</span>(
  selectAppState,
  <span class="hljs-function">(<span class="hljs-params">state: AppState</span>) =></span> state.<span class="hljs-property">products</span>
);

<span class="hljs-comment">// ID로 하나의 즐겨찾는 제품 가져오기</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> selectProductById = <span class="hljs-title function_">createSelector</span>(
  selectProducts,
  <span class="hljs-function">(<span class="hljs-params">products: FavoriteProduct[], props: { productId: number }</span>) =></span>
    products.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">product</span> =></span> product.<span class="hljs-property">id</span> === props.<span class="hljs-property">productId</span>)
);
</code></pre>
<div class="content-ad"></div>
<p>첫 번째 함수에서는 'favorite' 스토리지에서 전체 상태를 얻고 있습니다. 두 번째 함수에서는 이 완전한 상태를 사용하여 즐겨찾는 상품만 검색합니다. 마지막 함수는 즐겨찾는 상품의 상태를 활용하여 해당 ID의 특정 상품을 가져옵니다. 우리는 이러한 모든 함수를 애플리케이션에서 필요한 데이터를 검색하는 데 사용할 수 있습니다.</p>
<p>우리의 폴더 구조는 다음과 같이 구성되어 있습니다:</p>
<p><img src="/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_2.png" alt="폴더 구조"></p>
<p>상태 관리를 사용하기 전에 StoreModule을 모듈에 가져와 reducer를 포함해야 합니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">NgModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppComponent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.component'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StoreModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ngrx/store'</span>;
<span class="hljs-keyword">import</span> { favoriteReducer } <span class="hljs-keyword">from</span> <span class="hljs-string">'./states/favorite-product/reducer/app.reducer'</span>;

@<span class="hljs-title class_">NgModule</span>({
  <span class="hljs-attr">declarations</span>: [

  ],
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">StoreModule</span>.<span class="hljs-title function_">forRoot</span>({<span class="hljs-attr">favorite</span>:favoriteReducer})...
  ],
  <span class="hljs-attr">providers</span>: [],
  <span class="hljs-attr">bootstrap</span>: [<span class="hljs-title class_">AppComponent</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> { }
</code></pre>
<h2>액션 사용하기</h2>
<p>상태에서 액션을 사용하려면 먼저 "@ngrx/store" 모듈에서 "Store"를 가져와서 생성자에 포함해야 합니다. 다음은 예시입니다:</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Store</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ngrx/store'</span>;

@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-home-product'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./home-product.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./home-product.component.scss'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeProductComponent</span>{

<span class="hljs-title function_">constructor</span>(<span class="hljs-params">private readonly storageService:StorageService&#x3C;FavoriteProduct[]></span>){}

}
</code></pre>
<div class="content-ad"></div>
<p>'store'을 import한 후에는 이제 액션을 사용할 수 있습니다. 우리 애플리케이션에서는 특정 제품의 하트 아이콘을 클릭할 때마다 해당 제품을 즐겨찾기에 추가합니다. 아래 이미지에서 'Notebook' 제품이 즐겨찾기 목록에 추가되었음을 보실 수 있습니다. 또한, 오른쪽 상단에 있는 하트 아이콘에 주목해주세요. 이 아이콘은 즐겨찾기에 추가된 항목 수를 나타내는데, 이 경우에는 '1'이 표시됩니다.</p>
<p><img src="/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_3.png" alt="image"></p>
<p>따라서 즐겨찾기 아이콘을 클릭할 때마다 'dispatch' 함수가 트리거되며, 원하는 액션을 매개변수로 전달합니다. 이 경우에는 액션이 'add'가 됩니다. 아래 코드를 확인해주세요:</p>
<pre><code class="hljs language-js">&#x3C;mat-icon [style.<span class="hljs-property">color</span>]=<span class="hljs-string">"product.isFavorite?'red':'black'"</span> <span class="hljs-keyword">class</span>=<span class="hljs-string">"mat-icon-lg icon"</span> 
(click)=<span class="hljs-string">"addProductToFavorites(product)"</span> >favorite&#x3C;/mat-icon>
</code></pre>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Store</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ngrx/store'</span>;

@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-home-product'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./home-product.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./home-product.component.scss'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeProductComponent</span> {

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private readonly storageService:StorageService&#x3C;FavoriteProduct[]></span>) {}

  <span class="hljs-title function_">addProductToFavorites</span>(<span class="hljs-params">product: FavoriteProduct</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">favoriteProduct</span>: <span class="hljs-title class_">FavoriteProduct</span> = {
      ...product,
      <span class="hljs-attr">isFavorite</span>: <span class="hljs-literal">true</span>
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">add</span>({ product }));
  }

}
</code></pre>
<p>그래서, 'dispatch' 함수를 트리거할 때마다 클릭한 제품이 '리듀서'로 전송되는데, 이는 데이터를 처리하고 상태에 저장하기 전에 책임이 있습니다.</p>
<h2>셀렉터 사용하기</h2>
<p>셀렉터를 사용하기 위해서는 '@ngrx/store' 모듈에서 'Store'를 가져와야 합니다. 그러나 셀렉터를 사용하여 데이터를 검색하는 데 사용되는 함수는 'pipe'입니다. 다음 코드에서 자세한 내용을 확인하세요:</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Component</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Observable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FavoriteProduct</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/app/models/favorite-product.model'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Store</span>, select } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ngrx/store'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppState</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/app/states/favorite-product/app.state'</span>;
<span class="hljs-keyword">import</span> { selectProducts } <span class="hljs-keyword">from</span> <span class="hljs-string">'src/app/states/favorite-product/selector/app.selector'</span>;

@<span class="hljs-title class_">Component</span>({
  <span class="hljs-attr">selector</span>: <span class="hljs-string">'app-header'</span>,
  <span class="hljs-attr">templateUrl</span>: <span class="hljs-string">'./header.component.html'</span>,
  <span class="hljs-attr">styleUrls</span>: [<span class="hljs-string">'./header.component.scss'</span>]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeaderComponent</span> {

  <span class="hljs-attr">favoritesProducts</span>: <span class="hljs-title class_">Observable</span>&#x3C;<span class="hljs-title class_">Array</span>&#x3C;<span class="hljs-title class_">FavoriteProduct</span>>> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">store</span>.<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">select</span>(selectProducts))

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private router: Router, private store: Store&#x3C;AppState></span>) { }

}
</code></pre>
<p>'pipe' 안에 있는 코드를 볼 때 'select' 함수를 사용하고 있습니다. 이 함수는 '@ngrx/store' 모듈에서 가져온 것으로, 셀렉터를 파라미터로 받습니다. 현재 셀렉터는 'selectProducts'이며 'FavoriteProduct' 배열의 'Observable'을 반환합니다. 이 목록은 속성에 저장되어 템플릿에서 사용되어 즐겨찾기 제품의 수량을 표시합니다. 아래 템플릿 코드에서 더 자세한 내용을 확인할 수 있습니다:</p>
<pre><code class="hljs language-js">&#x3C;mat-icon [style.<span class="hljs-property">color</span>]=<span class="hljs-string">"'red'"</span> 
matBadge=<span class="hljs-string">"{(favoritesProducts | async)?.length}"</span> 
matBadgePosition=<span class="hljs-string">"above after"</span>>favorite&#x3C;/mat-icon>
</code></pre>
<p>템플릿에서 'async' 파이프를 사용해 TypeScript에서 옵저버블로 받은 데이터를 처리합니다. 그리고 'length' 속성을 이용하여 목록에 있는 항목 수를 얻습니다. 더 자세한 코드는 제 GitHub 리포지토리에서 확인할 수 있습니다. 아래 링크에 접속해주세요: igormarti/angular-ngrx-shopping (github.com)</p>
<div class="content-ad"></div>
<h1>결론</h1>
<p>Angular 애플리케이션에서 상태 관리는 매우 중요한 요소입니다. 특히 특정 상태가 복잡해지는 경우가 많습니다. Angular의 인기 있는 상태 관리 라이브러리인 NgRx는 애플리케이션 상태를 중앙에서 예측 가능하게 효율적으로 관리할 수 있는 견고하고 확장 가능한 솔루션을 제공합니다. 액션, 리듀서, 셀렉터 등의 개념을 활용해 NgRx를 사용하면 개발자들이 상태 변경을 효율적으로 처리하고 관심사를 명확히 분리할 수 있습니다. NgRx를 사용하면 유지보수성이 높고 테스트 가능하며 확장 가능한 Angular 애플리케이션을 만들 수 있어서 복잡한 상태 관련 도전 과제를 관리하는 강력한 도구로 작용할 수 있습니다.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"앵귤러에서 NgRx를 활용한 상태 관리하는 방법","description":"","date":"2024-05-18 21:49","slug":"2024-05-18-StatemanagementwithNgRxinAngular","content":"\n\n\n![스크린샷](/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_0.png)\n\n현대의 프론트엔드 애플리케이션은 주로 컴포넌트 개념을 사용합니다. 이는 사용자 인터페이스의 독립적이고 재사용 가능하며 자체적인 부분을 나타냅니다. Angular, React, Vue.js와 같은 인기 있는 프론트엔드 라이브러리들에서 이 개념은 중요합니다. 다수의 컴포넌트가 동일한 데이터를 필요로 할 때 간편함과 여러 이점을 제공하지만 문제도 발생할 수 있습니다. 이 문제를 해결하기 위해 Redux 패턴이라는 개념이 있습니다. Redux 라이브러리는 처음에 React 생태계에서 인기를 얻었지만 Angular나 Vue.js와 같은 다른 프레임워크에서도 사용할 수 있습니다. 이 글에서는 NgRx 라이브러리를 사용한 상태 관리에 집중하겠습니다. Angular에서는 Redux를 사용할 수 있지만, Angular에 특별히 제작된 인기 있는 상태 관리 라이브러리인 NgRx를 사용하는 애플리케이션을 자주 볼 수 있습니다.\n\n## NgRx란?\n\n소개에서 언급한 대로, NgRx는 Redux에 영감을 받은 상태 관리를 위한 라이브러리입니다. Angular용 Redux 원칙을 구현하여 애플리케이션 상태를 예측 가능하고 구조적인 방식으로 관리합니다. NgRx는 액션, 리듀서, 이펙트, 셀렉터와 같은 개념을 사용하여 상태를 조작하는데 있어 가시적인 방식을 제공합니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\u003cimg src=\"/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_1.png\" /\u003e\n\n## 저장소\n\n\"저장소\"는 불변 데이터 구조로 구현된 상태 관리자의 일부입니다. 다시 말하면, 그 안에 포함된 데이터는 직접 변경할 수 없습니다. 따라서 모든 상태 변경은 작업을 통해 이루어져야 합니다. 이러한 작업은 '리듀서'라고 불리는 메커니즘을 통해 상태에서 변경될 내용을 정의합니다. 이 함수는 상태와의 통신을 처리합니다.\n\n## 리듀서\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n리듀서의 책임은 스토어의 상태를 변경할 필요가 있는 모든 작업을 처리하는 것입니다. 현재 상태와 액션을 입력으로 받아 변경 후의 새로운 상태를 반환합니다.\n\n## 액션\n\n\"액션\"은 단순히 상태 변경을 나타내는 객체들입니다. 상태를 변경할 정보를 포함한 액션은 스토어로 전송됩니다.\n\n## 셀렉터\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n\"selectors\"는 저장된 상태의 특정 정보에 액세스하고 가져 오는 데 사용되는 기능입니다. 따라서 구성 요소가 상점의 완전한 상태를 직접 가져 오는 대신 필요한 데이터만 요청 할 수 있습니다. 이렇게하면 코드가 더 모듈식이고 재사용 가능하며 유지 보수가 쉬워집니다. 또한, 요청 한 구성 요소에 제공되기 전에 상태에서 calc 및 변환을 수행 할 수도 있습니다.\n\n## 효과\n\n\"효과\"는 비동기 작업이나 부작용, 즉 네트워크 요청, 데이터베이스 액세스, 외부 API 호출 또는 순수 동기가 아닌 작업과 같은 기능을 나타냅니다. 그러나이 기능을이 기사에서는 사용하지 않습니다. 곧이 주제에 특별히 전념 한 기사를 쓰는 것을 선호합니다.\n\n# 실제로 사용하는 NgRx\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n내 저장소에 있는 애플리케이션은 GitHub의 igormarti/angular-ngrx-shopping(https://github.com/) 링크에서 확인할 수 있어요. 클론하려면 확인해보세요. 하지만 이 개념을 처음부터 적용할 수도 있어요. 내 애플리케이션에서는 제품을 즐겨찾기에 추가하는 상태 관리자를 사용할 거에요. 우리 애플리케이션에는 스토어에서 즐겨찾기한 제품들을 요청할 몇 가지 구성 요소가 있을 거예요. 이후 단계에서 자세한 내용을 볼 수 있을 거에요. 코드 구현에 대해 한 가지 팁: 이 프로젝트의 코드 구현은 Angular 버전 16과 NgRx 버전 7.8.0을 사용해 만들어졌어요.\n\n# Angular에서 NgRx 설치\n\n프로젝트에서 NgRx를 설치하려면 루트 폴더에서 다음 명령을 실행하세요:\n\n```js\nnpm install @ngrx/store --save\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 프로젝트에서 NgRx 구조화하기\n\nNgRx를 프로젝트에 설치한 후에는, 이제 구조를 만들어야 하는 때입니다. 다음 단계에서는 액션, 리듀서, 셀렉터 및 초기 상태를 만들 것입니다.\n\n먼저, 애플리케이션의 앱 폴더 내에서 \"states\"라는 폴더를 만들 것입니다. 이 폴더 안에 \"favorite-product\"라는 폴더를 만든 후, 그 안에 \"action\", \"reducer\", \"selector\"라는 세 개의 폴더를 만들 것입니다. 구조는 다음과 같습니다:\n\n```js\napp -\u003e\n  states -\u003e\n      favorite-product -\u003e\n                    action\n                    reducer\n                    selector\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n이제 \"favorite-product\" 폴더 안에 \"app.state.ts\" 파일을 생성할 것입니다. 이 파일은 초기 상태의 모델이 될 것입니다:\n\n```js\nimport { FavoriteProduct } from \"src/app/models/favorite-product.model\";\n\nexport interface AppState {\n    products: FavoriteProduct[];\n}\n```\n\n우리의 \"AppState\" 인터페이스 안에 \"products\"라는 속성이 있음을 주목해주세요. 이는 초기 상태의 유형을 나타내는 배열 \"FavoriteProduct\"입니다. 따라서 우리는 이 인터페이스를 프로젝트에 만들어야 합니다. 저는 내 애플리케이션에서 \"src/app/models/favorite-product.model\" 경로에 만들었습니다. 그러나 원하는 곳에 넣으셔도 됩니다. 중요한 점은 \"app.state.ts\" 파일에서 올바르게 가져오는 것입니다.\n\n```js\nexport interface FavoriteProduct {\n    id: number;\n    name: string;\n    price: number;\n    image: string;\n    isFavorite?: boolean;\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 작업 생성하기\n\n이 단계에서는 \"src\\app\\states\\favorite-product\\action\" 폴더 안에 작업을 만들 것입니다. 우리의 파일은 \"app.action.ts\"로 명명될 것입니다. 이 파일에는 데이터 상태를 변경하는 모든 작업을 나타내는 함수들이 포함될 것입니다. 다음의 코드를 참조해주세요:\n\n```js\nimport { createAction, props } from '@ngrx/store';\nimport { FavoriteProduct } from \"src/app/models/favorite-product.model\";\n\nexport const add = createAction('[FavoriteProduct] Add',  props\u003c{ product: FavoriteProduct }\u003e());\nexport const remove = createAction('[FavoriteProduct] Remove', props\u003c{ product: FavoriteProduct }\u003e());\nexport const updateAllState = createAction('[FavoriteProduct] Update all state of favorites products', \n props\u003c{ products: FavoriteProduct[] }\u003e());\nexport const clear = createAction('[FavoriteProduct] Clear');\n```\n\n위 코드에서는 \"@ngrx/store\" 모듈의 \"createAction\" 함수가 작업 설명을 첫 번째 매개변수로서, 처리할 데이터를 두 번째 매개변수로 가지는 것을 알 수 있습니다. 우리의 \"favorite-product\" 상태에는 다음과 같은 작업들이 있을 것입니다: add, remove, updateAllState, clear.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n## 리듀서 생성하기\n\n우리는 \"src\\app\\states\\favorite-product\\reducer\" 폴더에 \"app.reducer.ts\" 파일을 만들어야 합니다. 이 파일에서는 즐겨찾는 제품 목록의 초기 상태를 초기화하고 각 작업에 대한 비즈니스 로직을 구현한 다음 상태를 업데이트하기 전에 상태를 변경합니다. 자세한 내용은 다음 코드를 참조해주세요:\n\n```js\nimport { createReducer, on } from '@ngrx/store';\nimport { add, remove, clear, updateAllState } from '../action/app.action';\nimport { AppState } from '../app.state';\n\nexport const initialState: AppState = {\n  products:[],\n};\n\nexport const favoriteReducer = createReducer(\n  initialState,\n  on(add, (state, {product}) =\u003e (\n    {\n      ...state,\n      products: [...state.products, product]\n    }\n  )\n  ),\n  on(remove, (state, {product}) =\u003e ({\n    ...state,\n    products: state.products.filter((p)=\u003e product.id != p.id)\n  })),\n  on(updateAllState, (state, {products}) =\u003e (\n    {\n      ...state,\n      products\n    }\n  )\n  ),\n  on(clear, state =\u003e initialState)\n);\n```\n\n먼저 초기 상태가 빈 즐겨찾는 제품 배열로 초기화되는 것을 알아봅니다. 그다음, \"@ngrx/store\" 모듈에서 \"createReducer\" 함수가 초기 상태와 여러 \"on\" 함수를 받아 작업을 상태 변경과 연결하고 있음을 확인해주세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- \"add\" 액션은 현재 상태에 새 제품을 추가합니다.\n- 마찬가지로, \"remove\" 액션은 현재 상태에서 특정 제품을 제거합니다.\n- \"updateAllState\" 액션은 매개변수로 받은 제품 목록으로 상태를 업데이트합니다.\n- 마지막으로 중요하지만 더욱 중요한 것은, \"clear\" 액션은 초기 상태로 설정하여 상태를 재설정하며, 저장소에서 모든 즐겨찾는 제품을 모두 지우게 됩니다.\n\n## 셀렉터 생성하기\n\n이제 저장소에서 데이터를 검색하려면 셀렉터를 생성해야 합니다. 이를 위해 'src\\app\\states\\favorite-product\\selector' 폴더에 'app.selector.ts' 파일을 만들어야 합니다. 자세한 내용은 다음 코드를 참조해주십시오:\n\n```js\nimport { createFeatureSelector, createSelector } from '@ngrx/store';\nimport { AppState } from '../app.state';\nimport { FavoriteProduct } from \"src/app/models/favorite-product.model\";\n\n// 애플리케이션 내에서 즐겨찾는 제품의 전체 상태를 가져옵니다.\nexport const selectAppState = createFeatureSelector\u003cAppState\u003e('favorite');\n\n// 모든 즐겨찾는 제품 가져오기\nexport const selectProducts = createSelector(\n  selectAppState,\n  (state: AppState) =\u003e state.products\n);\n\n// ID로 하나의 즐겨찾는 제품 가져오기\nexport const selectProductById = createSelector(\n  selectProducts,\n  (products: FavoriteProduct[], props: { productId: number }) =\u003e\n    products.find(product =\u003e product.id === props.productId)\n);\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n첫 번째 함수에서는 'favorite' 스토리지에서 전체 상태를 얻고 있습니다. 두 번째 함수에서는 이 완전한 상태를 사용하여 즐겨찾는 상품만 검색합니다. 마지막 함수는 즐겨찾는 상품의 상태를 활용하여 해당 ID의 특정 상품을 가져옵니다. 우리는 이러한 모든 함수를 애플리케이션에서 필요한 데이터를 검색하는 데 사용할 수 있습니다.\n\n우리의 폴더 구조는 다음과 같이 구성되어 있습니다:\n\n![폴더 구조](/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_2.png)\n\n상태 관리를 사용하기 전에 StoreModule을 모듈에 가져와 reducer를 포함해야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { NgModule } from '@angular/core';\nimport { AppComponent } from './app.component';\nimport { StoreModule } from '@ngrx/store';\nimport { favoriteReducer } from './states/favorite-product/reducer/app.reducer';\n\n@NgModule({\n  declarations: [\n\n  ],\n  imports: [\n    StoreModule.forRoot({favorite:favoriteReducer})...\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n```\n\n## 액션 사용하기\n\n상태에서 액션을 사용하려면 먼저 \"@ngrx/store\" 모듈에서 \"Store\"를 가져와서 생성자에 포함해야 합니다. 다음은 예시입니다:\n\n```js\nimport { Store } from '@ngrx/store';\n\n@Component({\n  selector: 'app-home-product',\n  templateUrl: './home-product.component.html',\n  styleUrls: ['./home-product.component.scss']\n})\nexport class HomeProductComponent{\n\nconstructor(private readonly storageService:StorageService\u003cFavoriteProduct[]\u003e){}\n\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n'store'을 import한 후에는 이제 액션을 사용할 수 있습니다. 우리 애플리케이션에서는 특정 제품의 하트 아이콘을 클릭할 때마다 해당 제품을 즐겨찾기에 추가합니다. 아래 이미지에서 'Notebook' 제품이 즐겨찾기 목록에 추가되었음을 보실 수 있습니다. 또한, 오른쪽 상단에 있는 하트 아이콘에 주목해주세요. 이 아이콘은 즐겨찾기에 추가된 항목 수를 나타내는데, 이 경우에는 '1'이 표시됩니다.\n\n![image](/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_3.png)\n\n따라서 즐겨찾기 아이콘을 클릭할 때마다 'dispatch' 함수가 트리거되며, 원하는 액션을 매개변수로 전달합니다. 이 경우에는 액션이 'add'가 됩니다. 아래 코드를 확인해주세요:\n\n```js\n\u003cmat-icon [style.color]=\"product.isFavorite?'red':'black'\" class=\"mat-icon-lg icon\" \n(click)=\"addProductToFavorites(product)\" \u003efavorite\u003c/mat-icon\u003e\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { Store } from '@ngrx/store';\n\n@Component({\n  selector: 'app-home-product',\n  templateUrl: './home-product.component.html',\n  styleUrls: ['./home-product.component.scss']\n})\nexport class HomeProductComponent {\n\n  constructor(private readonly storageService:StorageService\u003cFavoriteProduct[]\u003e) {}\n\n  addProductToFavorites(product: FavoriteProduct) {\n    const favoriteProduct: FavoriteProduct = {\n      ...product,\n      isFavorite: true\n    }\n    this.store.dispatch(add({ product }));\n  }\n\n}\n```\n\n그래서, 'dispatch' 함수를 트리거할 때마다 클릭한 제품이 '리듀서'로 전송되는데, 이는 데이터를 처리하고 상태에 저장하기 전에 책임이 있습니다.\n\n## 셀렉터 사용하기\n\n셀렉터를 사용하기 위해서는 '@ngrx/store' 모듈에서 'Store'를 가져와야 합니다. 그러나 셀렉터를 사용하여 데이터를 검색하는 데 사용되는 함수는 'pipe'입니다. 다음 코드에서 자세한 내용을 확인하세요:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { FavoriteProduct } from 'src/app/models/favorite-product.model';\nimport { Store, select } from '@ngrx/store';\nimport { AppState } from 'src/app/states/favorite-product/app.state';\nimport { selectProducts } from 'src/app/states/favorite-product/selector/app.selector';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss']\n})\nexport class HeaderComponent {\n\n  favoritesProducts: Observable\u003cArray\u003cFavoriteProduct\u003e\u003e = this.store.pipe(select(selectProducts))\n\n  constructor(private router: Router, private store: Store\u003cAppState\u003e) { }\n\n}\n```\n\n'pipe' 안에 있는 코드를 볼 때 'select' 함수를 사용하고 있습니다. 이 함수는 '@ngrx/store' 모듈에서 가져온 것으로, 셀렉터를 파라미터로 받습니다. 현재 셀렉터는 'selectProducts'이며 'FavoriteProduct' 배열의 'Observable'을 반환합니다. 이 목록은 속성에 저장되어 템플릿에서 사용되어 즐겨찾기 제품의 수량을 표시합니다. 아래 템플릿 코드에서 더 자세한 내용을 확인할 수 있습니다:\n\n```js\n\u003cmat-icon [style.color]=\"'red'\" \nmatBadge=\"{(favoritesProducts | async)?.length}\" \nmatBadgePosition=\"above after\"\u003efavorite\u003c/mat-icon\u003e\n```\n\n템플릿에서 'async' 파이프를 사용해 TypeScript에서 옵저버블로 받은 데이터를 처리합니다. 그리고 'length' 속성을 이용하여 목록에 있는 항목 수를 얻습니다. 더 자세한 코드는 제 GitHub 리포지토리에서 확인할 수 있습니다. 아래 링크에 접속해주세요: igormarti/angular-ngrx-shopping (github.com)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 결론\n\nAngular 애플리케이션에서 상태 관리는 매우 중요한 요소입니다. 특히 특정 상태가 복잡해지는 경우가 많습니다. Angular의 인기 있는 상태 관리 라이브러리인 NgRx는 애플리케이션 상태를 중앙에서 예측 가능하게 효율적으로 관리할 수 있는 견고하고 확장 가능한 솔루션을 제공합니다. 액션, 리듀서, 셀렉터 등의 개념을 활용해 NgRx를 사용하면 개발자들이 상태 변경을 효율적으로 처리하고 관심사를 명확히 분리할 수 있습니다. NgRx를 사용하면 유지보수성이 높고 테스트 가능하며 확장 가능한 Angular 애플리케이션을 만들 수 있어서 복잡한 상태 관련 도전 과제를 관리하는 강력한 도구로 작용할 수 있습니다.","ogImage":{"url":"/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_0.png"},"coverImage":"/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_0.png","tag":["Tech"],"readingTime":11},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_0.png\" alt=\"스크린샷\"\u003e\u003c/p\u003e\n\u003cp\u003e현대의 프론트엔드 애플리케이션은 주로 컴포넌트 개념을 사용합니다. 이는 사용자 인터페이스의 독립적이고 재사용 가능하며 자체적인 부분을 나타냅니다. Angular, React, Vue.js와 같은 인기 있는 프론트엔드 라이브러리들에서 이 개념은 중요합니다. 다수의 컴포넌트가 동일한 데이터를 필요로 할 때 간편함과 여러 이점을 제공하지만 문제도 발생할 수 있습니다. 이 문제를 해결하기 위해 Redux 패턴이라는 개념이 있습니다. Redux 라이브러리는 처음에 React 생태계에서 인기를 얻었지만 Angular나 Vue.js와 같은 다른 프레임워크에서도 사용할 수 있습니다. 이 글에서는 NgRx 라이브러리를 사용한 상태 관리에 집중하겠습니다. Angular에서는 Redux를 사용할 수 있지만, Angular에 특별히 제작된 인기 있는 상태 관리 라이브러리인 NgRx를 사용하는 애플리케이션을 자주 볼 수 있습니다.\u003c/p\u003e\n\u003ch2\u003eNgRx란?\u003c/h2\u003e\n\u003cp\u003e소개에서 언급한 대로, NgRx는 Redux에 영감을 받은 상태 관리를 위한 라이브러리입니다. Angular용 Redux 원칙을 구현하여 애플리케이션 상태를 예측 가능하고 구조적인 방식으로 관리합니다. NgRx는 액션, 리듀서, 이펙트, 셀렉터와 같은 개념을 사용하여 상태를 조작하는데 있어 가시적인 방식을 제공합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cimg src=\"/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_1.png\"\u003e\n\u003ch2\u003e저장소\u003c/h2\u003e\n\u003cp\u003e\"저장소\"는 불변 데이터 구조로 구현된 상태 관리자의 일부입니다. 다시 말하면, 그 안에 포함된 데이터는 직접 변경할 수 없습니다. 따라서 모든 상태 변경은 작업을 통해 이루어져야 합니다. 이러한 작업은 '리듀서'라고 불리는 메커니즘을 통해 상태에서 변경될 내용을 정의합니다. 이 함수는 상태와의 통신을 처리합니다.\u003c/p\u003e\n\u003ch2\u003e리듀서\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e리듀서의 책임은 스토어의 상태를 변경할 필요가 있는 모든 작업을 처리하는 것입니다. 현재 상태와 액션을 입력으로 받아 변경 후의 새로운 상태를 반환합니다.\u003c/p\u003e\n\u003ch2\u003e액션\u003c/h2\u003e\n\u003cp\u003e\"액션\"은 단순히 상태 변경을 나타내는 객체들입니다. 상태를 변경할 정보를 포함한 액션은 스토어로 전송됩니다.\u003c/p\u003e\n\u003ch2\u003e셀렉터\u003c/h2\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e\"selectors\"는 저장된 상태의 특정 정보에 액세스하고 가져 오는 데 사용되는 기능입니다. 따라서 구성 요소가 상점의 완전한 상태를 직접 가져 오는 대신 필요한 데이터만 요청 할 수 있습니다. 이렇게하면 코드가 더 모듈식이고 재사용 가능하며 유지 보수가 쉬워집니다. 또한, 요청 한 구성 요소에 제공되기 전에 상태에서 calc 및 변환을 수행 할 수도 있습니다.\u003c/p\u003e\n\u003ch2\u003e효과\u003c/h2\u003e\n\u003cp\u003e\"효과\"는 비동기 작업이나 부작용, 즉 네트워크 요청, 데이터베이스 액세스, 외부 API 호출 또는 순수 동기가 아닌 작업과 같은 기능을 나타냅니다. 그러나이 기능을이 기사에서는 사용하지 않습니다. 곧이 주제에 특별히 전념 한 기사를 쓰는 것을 선호합니다.\u003c/p\u003e\n\u003ch1\u003e실제로 사용하는 NgRx\u003c/h1\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e내 저장소에 있는 애플리케이션은 GitHub의 igormarti/angular-ngrx-shopping(\u003ca href=\"https://github.com/\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://github.com/\u003c/a\u003e) 링크에서 확인할 수 있어요. 클론하려면 확인해보세요. 하지만 이 개념을 처음부터 적용할 수도 있어요. 내 애플리케이션에서는 제품을 즐겨찾기에 추가하는 상태 관리자를 사용할 거에요. 우리 애플리케이션에는 스토어에서 즐겨찾기한 제품들을 요청할 몇 가지 구성 요소가 있을 거예요. 이후 단계에서 자세한 내용을 볼 수 있을 거에요. 코드 구현에 대해 한 가지 팁: 이 프로젝트의 코드 구현은 Angular 버전 16과 NgRx 버전 7.8.0을 사용해 만들어졌어요.\u003c/p\u003e\n\u003ch1\u003eAngular에서 NgRx 설치\u003c/h1\u003e\n\u003cp\u003e프로젝트에서 NgRx를 설치하려면 루트 폴더에서 다음 명령을 실행하세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install @ngrx/store --save\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e프로젝트에서 NgRx 구조화하기\u003c/h1\u003e\n\u003cp\u003eNgRx를 프로젝트에 설치한 후에는, 이제 구조를 만들어야 하는 때입니다. 다음 단계에서는 액션, 리듀서, 셀렉터 및 초기 상태를 만들 것입니다.\u003c/p\u003e\n\u003cp\u003e먼저, 애플리케이션의 앱 폴더 내에서 \"states\"라는 폴더를 만들 것입니다. 이 폴더 안에 \"favorite-product\"라는 폴더를 만든 후, 그 안에 \"action\", \"reducer\", \"selector\"라는 세 개의 폴더를 만들 것입니다. 구조는 다음과 같습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eapp -\u003e\n  states -\u003e\n      favorite-product -\u003e\n                    action\n                    reducer\n                    selector\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e이제 \"favorite-product\" 폴더 안에 \"app.state.ts\" 파일을 생성할 것입니다. 이 파일은 초기 상태의 모델이 될 것입니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"src/app/models/favorite-product.model\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e interface \u003cspan class=\"hljs-title class_\"\u003eAppState\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003eproducts\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e[];\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e우리의 \"AppState\" 인터페이스 안에 \"products\"라는 속성이 있음을 주목해주세요. 이는 초기 상태의 유형을 나타내는 배열 \"FavoriteProduct\"입니다. 따라서 우리는 이 인터페이스를 프로젝트에 만들어야 합니다. 저는 내 애플리케이션에서 \"src/app/models/favorite-product.model\" 경로에 만들었습니다. 그러나 원하는 곳에 넣으셔도 됩니다. 중요한 점은 \"app.state.ts\" 파일에서 올바르게 가져오는 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e interface \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: number;\n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: string;\n    \u003cspan class=\"hljs-attr\"\u003eprice\u003c/span\u003e: number;\n    \u003cspan class=\"hljs-attr\"\u003eimage\u003c/span\u003e: string;\n    isFavorite?: boolean;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e작업 생성하기\u003c/h2\u003e\n\u003cp\u003e이 단계에서는 \"src\\app\\states\\favorite-product\\action\" 폴더 안에 작업을 만들 것입니다. 우리의 파일은 \"app.action.ts\"로 명명될 것입니다. 이 파일에는 데이터 상태를 변경하는 모든 작업을 나타내는 함수들이 포함될 것입니다. 다음의 코드를 참조해주세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createAction, props } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@ngrx/store'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"src/app/models/favorite-product.model\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e add = \u003cspan class=\"hljs-title function_\"\u003ecreateAction\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'[FavoriteProduct] Add'\u003c/span\u003e,  props\u0026#x3C;{ \u003cspan class=\"hljs-attr\"\u003eproduct\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e }\u003e());\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e remove = \u003cspan class=\"hljs-title function_\"\u003ecreateAction\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'[FavoriteProduct] Remove'\u003c/span\u003e, props\u0026#x3C;{ \u003cspan class=\"hljs-attr\"\u003eproduct\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e }\u003e());\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e updateAllState = \u003cspan class=\"hljs-title function_\"\u003ecreateAction\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'[FavoriteProduct] Update all state of favorites products'\u003c/span\u003e, \n props\u0026#x3C;{ \u003cspan class=\"hljs-attr\"\u003eproducts\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e[] }\u003e());\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e clear = \u003cspan class=\"hljs-title function_\"\u003ecreateAction\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'[FavoriteProduct] Clear'\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e위 코드에서는 \"@ngrx/store\" 모듈의 \"createAction\" 함수가 작업 설명을 첫 번째 매개변수로서, 처리할 데이터를 두 번째 매개변수로 가지는 것을 알 수 있습니다. 우리의 \"favorite-product\" 상태에는 다음과 같은 작업들이 있을 것입니다: add, remove, updateAllState, clear.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch2\u003e리듀서 생성하기\u003c/h2\u003e\n\u003cp\u003e우리는 \"src\\app\\states\\favorite-product\\reducer\" 폴더에 \"app.reducer.ts\" 파일을 만들어야 합니다. 이 파일에서는 즐겨찾는 제품 목록의 초기 상태를 초기화하고 각 작업에 대한 비즈니스 로직을 구현한 다음 상태를 업데이트하기 전에 상태를 변경합니다. 자세한 내용은 다음 코드를 참조해주세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createReducer, on } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@ngrx/store'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { add, remove, clear, updateAllState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../action/app.action'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppState\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../app.state'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003einitialState\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAppState\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eproducts\u003c/span\u003e:[],\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e favoriteReducer = \u003cspan class=\"hljs-title function_\"\u003ecreateReducer\u003c/span\u003e(\n  initialState,\n  \u003cspan class=\"hljs-title function_\"\u003eon\u003c/span\u003e(add, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003estate, {product}\u003c/span\u003e) =\u003e\u003c/span\u003e (\n    {\n      ...state,\n      \u003cspan class=\"hljs-attr\"\u003eproducts\u003c/span\u003e: [...state.\u003cspan class=\"hljs-property\"\u003eproducts\u003c/span\u003e, product]\n    }\n  )\n  ),\n  \u003cspan class=\"hljs-title function_\"\u003eon\u003c/span\u003e(remove, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003estate, {product}\u003c/span\u003e) =\u003e\u003c/span\u003e ({\n    ...state,\n    \u003cspan class=\"hljs-attr\"\u003eproducts\u003c/span\u003e: state.\u003cspan class=\"hljs-property\"\u003eproducts\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ep\u003c/span\u003e)=\u003e\u003c/span\u003e product.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e != p.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e)\n  })),\n  \u003cspan class=\"hljs-title function_\"\u003eon\u003c/span\u003e(updateAllState, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003estate, {products}\u003c/span\u003e) =\u003e\u003c/span\u003e (\n    {\n      ...state,\n      products\n    }\n  )\n  ),\n  \u003cspan class=\"hljs-title function_\"\u003eon\u003c/span\u003e(clear, \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003estate\u003c/span\u003e =\u003e\u003c/span\u003e initialState)\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e먼저 초기 상태가 빈 즐겨찾는 제품 배열로 초기화되는 것을 알아봅니다. 그다음, \"@ngrx/store\" 모듈에서 \"createReducer\" 함수가 초기 상태와 여러 \"on\" 함수를 받아 작업을 상태 변경과 연결하고 있음을 확인해주세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e\"add\" 액션은 현재 상태에 새 제품을 추가합니다.\u003c/li\u003e\n\u003cli\u003e마찬가지로, \"remove\" 액션은 현재 상태에서 특정 제품을 제거합니다.\u003c/li\u003e\n\u003cli\u003e\"updateAllState\" 액션은 매개변수로 받은 제품 목록으로 상태를 업데이트합니다.\u003c/li\u003e\n\u003cli\u003e마지막으로 중요하지만 더욱 중요한 것은, \"clear\" 액션은 초기 상태로 설정하여 상태를 재설정하며, 저장소에서 모든 즐겨찾는 제품을 모두 지우게 됩니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e셀렉터 생성하기\u003c/h2\u003e\n\u003cp\u003e이제 저장소에서 데이터를 검색하려면 셀렉터를 생성해야 합니다. 이를 위해 'src\\app\\states\\favorite-product\\selector' 폴더에 'app.selector.ts' 파일을 만들어야 합니다. 자세한 내용은 다음 코드를 참조해주십시오:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createFeatureSelector, createSelector } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@ngrx/store'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppState\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../app.state'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"src/app/models/favorite-product.model\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// 애플리케이션 내에서 즐겨찾는 제품의 전체 상태를 가져옵니다.\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e selectAppState = createFeatureSelector\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eAppState\u003c/span\u003e\u003e(\u003cspan class=\"hljs-string\"\u003e'favorite'\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// 모든 즐겨찾는 제품 가져오기\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e selectProducts = \u003cspan class=\"hljs-title function_\"\u003ecreateSelector\u003c/span\u003e(\n  selectAppState,\n  \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003estate: AppState\u003c/span\u003e) =\u003e\u003c/span\u003e state.\u003cspan class=\"hljs-property\"\u003eproducts\u003c/span\u003e\n);\n\n\u003cspan class=\"hljs-comment\"\u003e// ID로 하나의 즐겨찾는 제품 가져오기\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e selectProductById = \u003cspan class=\"hljs-title function_\"\u003ecreateSelector\u003c/span\u003e(\n  selectProducts,\n  \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eproducts: FavoriteProduct[], props: { productId: number }\u003c/span\u003e) =\u003e\u003c/span\u003e\n    products.\u003cspan class=\"hljs-title function_\"\u003efind\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eproduct\u003c/span\u003e =\u003e\u003c/span\u003e product.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e === props.\u003cspan class=\"hljs-property\"\u003eproductId\u003c/span\u003e)\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e첫 번째 함수에서는 'favorite' 스토리지에서 전체 상태를 얻고 있습니다. 두 번째 함수에서는 이 완전한 상태를 사용하여 즐겨찾는 상품만 검색합니다. 마지막 함수는 즐겨찾는 상품의 상태를 활용하여 해당 ID의 특정 상품을 가져옵니다. 우리는 이러한 모든 함수를 애플리케이션에서 필요한 데이터를 검색하는 데 사용할 수 있습니다.\u003c/p\u003e\n\u003cp\u003e우리의 폴더 구조는 다음과 같이 구성되어 있습니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_2.png\" alt=\"폴더 구조\"\u003e\u003c/p\u003e\n\u003cp\u003e상태 관리를 사용하기 전에 StoreModule을 모듈에 가져와 reducer를 포함해야 합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNgModule\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@angular/core'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppComponent\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./app.component'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eStoreModule\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@ngrx/store'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { favoriteReducer } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./states/favorite-product/reducer/app.reducer'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eNgModule\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003edeclarations\u003c/span\u003e: [\n\n  ],\n  \u003cspan class=\"hljs-attr\"\u003eimports\u003c/span\u003e: [\n    \u003cspan class=\"hljs-title class_\"\u003eStoreModule\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eforRoot\u003c/span\u003e({\u003cspan class=\"hljs-attr\"\u003efavorite\u003c/span\u003e:favoriteReducer})...\n  ],\n  \u003cspan class=\"hljs-attr\"\u003eproviders\u003c/span\u003e: [],\n  \u003cspan class=\"hljs-attr\"\u003ebootstrap\u003c/span\u003e: [\u003cspan class=\"hljs-title class_\"\u003eAppComponent\u003c/span\u003e]\n})\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAppModule\u003c/span\u003e { }\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e액션 사용하기\u003c/h2\u003e\n\u003cp\u003e상태에서 액션을 사용하려면 먼저 \"@ngrx/store\" 모듈에서 \"Store\"를 가져와서 생성자에 포함해야 합니다. 다음은 예시입니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eStore\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@ngrx/store'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eComponent\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003eselector\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'app-home-product'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003etemplateUrl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'./home-product.component.html'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003estyleUrls\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e'./home-product.component.scss'\u003c/span\u003e]\n})\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHomeProductComponent\u003c/span\u003e{\n\n\u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprivate readonly storageService:StorageService\u0026#x3C;FavoriteProduct[]\u003e\u003c/span\u003e){}\n\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e'store'을 import한 후에는 이제 액션을 사용할 수 있습니다. 우리 애플리케이션에서는 특정 제품의 하트 아이콘을 클릭할 때마다 해당 제품을 즐겨찾기에 추가합니다. 아래 이미지에서 'Notebook' 제품이 즐겨찾기 목록에 추가되었음을 보실 수 있습니다. 또한, 오른쪽 상단에 있는 하트 아이콘에 주목해주세요. 이 아이콘은 즐겨찾기에 추가된 항목 수를 나타내는데, 이 경우에는 '1'이 표시됩니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-18-StatemanagementwithNgRxinAngular_3.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003cp\u003e따라서 즐겨찾기 아이콘을 클릭할 때마다 'dispatch' 함수가 트리거되며, 원하는 액션을 매개변수로 전달합니다. 이 경우에는 액션이 'add'가 됩니다. 아래 코드를 확인해주세요:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u0026#x3C;mat-icon [style.\u003cspan class=\"hljs-property\"\u003ecolor\u003c/span\u003e]=\u003cspan class=\"hljs-string\"\u003e\"product.isFavorite?'red':'black'\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"mat-icon-lg icon\"\u003c/span\u003e \n(click)=\u003cspan class=\"hljs-string\"\u003e\"addProductToFavorites(product)\"\u003c/span\u003e \u003efavorite\u0026#x3C;/mat-icon\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eStore\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@ngrx/store'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eComponent\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003eselector\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'app-home-product'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003etemplateUrl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'./home-product.component.html'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003estyleUrls\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e'./home-product.component.scss'\u003c/span\u003e]\n})\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHomeProductComponent\u003c/span\u003e {\n\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprivate readonly storageService:StorageService\u0026#x3C;FavoriteProduct[]\u003e\u003c/span\u003e) {}\n\n  \u003cspan class=\"hljs-title function_\"\u003eaddProductToFavorites\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eproduct: FavoriteProduct\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003efavoriteProduct\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e = {\n      ...product,\n      \u003cspan class=\"hljs-attr\"\u003eisFavorite\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n    }\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estore\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edispatch\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eadd\u003c/span\u003e({ product }));\n  }\n\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그래서, 'dispatch' 함수를 트리거할 때마다 클릭한 제품이 '리듀서'로 전송되는데, 이는 데이터를 처리하고 상태에 저장하기 전에 책임이 있습니다.\u003c/p\u003e\n\u003ch2\u003e셀렉터 사용하기\u003c/h2\u003e\n\u003cp\u003e셀렉터를 사용하기 위해서는 '@ngrx/store' 모듈에서 'Store'를 가져와야 합니다. 그러나 셀렉터를 사용하여 데이터를 검색하는 데 사용되는 함수는 'pipe'입니다. 다음 코드에서 자세한 내용을 확인하세요:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eComponent\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@angular/core'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'rxjs'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'src/app/models/favorite-product.model'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eStore\u003c/span\u003e, select } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@ngrx/store'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAppState\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'src/app/states/favorite-product/app.state'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { selectProducts } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'src/app/states/favorite-product/selector/app.selector'\u003c/span\u003e;\n\n@\u003cspan class=\"hljs-title class_\"\u003eComponent\u003c/span\u003e({\n  \u003cspan class=\"hljs-attr\"\u003eselector\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'app-header'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003etemplateUrl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'./header.component.html'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003estyleUrls\u003c/span\u003e: [\u003cspan class=\"hljs-string\"\u003e'./header.component.scss'\u003c/span\u003e]\n})\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHeaderComponent\u003c/span\u003e {\n\n  \u003cspan class=\"hljs-attr\"\u003efavoritesProducts\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eObservable\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eArray\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eFavoriteProduct\u003c/span\u003e\u003e\u003e = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003estore\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epipe\u003c/span\u003e(\u003cspan class=\"hljs-title function_\"\u003eselect\u003c/span\u003e(selectProducts))\n\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprivate router: Router, private store: Store\u0026#x3C;AppState\u003e\u003c/span\u003e) { }\n\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e'pipe' 안에 있는 코드를 볼 때 'select' 함수를 사용하고 있습니다. 이 함수는 '@ngrx/store' 모듈에서 가져온 것으로, 셀렉터를 파라미터로 받습니다. 현재 셀렉터는 'selectProducts'이며 'FavoriteProduct' 배열의 'Observable'을 반환합니다. 이 목록은 속성에 저장되어 템플릿에서 사용되어 즐겨찾기 제품의 수량을 표시합니다. 아래 템플릿 코드에서 더 자세한 내용을 확인할 수 있습니다:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u0026#x3C;mat-icon [style.\u003cspan class=\"hljs-property\"\u003ecolor\u003c/span\u003e]=\u003cspan class=\"hljs-string\"\u003e\"'red'\"\u003c/span\u003e \nmatBadge=\u003cspan class=\"hljs-string\"\u003e\"{(favoritesProducts | async)?.length}\"\u003c/span\u003e \nmatBadgePosition=\u003cspan class=\"hljs-string\"\u003e\"above after\"\u003c/span\u003e\u003efavorite\u0026#x3C;/mat-icon\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e템플릿에서 'async' 파이프를 사용해 TypeScript에서 옵저버블로 받은 데이터를 처리합니다. 그리고 'length' 속성을 이용하여 목록에 있는 항목 수를 얻습니다. 더 자세한 코드는 제 GitHub 리포지토리에서 확인할 수 있습니다. 아래 링크에 접속해주세요: igormarti/angular-ngrx-shopping (github.com)\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e결론\u003c/h1\u003e\n\u003cp\u003eAngular 애플리케이션에서 상태 관리는 매우 중요한 요소입니다. 특히 특정 상태가 복잡해지는 경우가 많습니다. Angular의 인기 있는 상태 관리 라이브러리인 NgRx는 애플리케이션 상태를 중앙에서 예측 가능하게 효율적으로 관리할 수 있는 견고하고 확장 가능한 솔루션을 제공합니다. 액션, 리듀서, 셀렉터 등의 개념을 활용해 NgRx를 사용하면 개발자들이 상태 변경을 효율적으로 처리하고 관심사를 명확히 분리할 수 있습니다. NgRx를 사용하면 유지보수성이 높고 테스트 가능하며 확장 가능한 Angular 애플리케이션을 만들 수 있어서 복잡한 상태 관련 도전 과제를 관리하는 강력한 도구로 작용할 수 있습니다.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-18-StatemanagementwithNgRxinAngular"},"buildId":"aCCUs-qPrLLLWRnkN0AOd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>