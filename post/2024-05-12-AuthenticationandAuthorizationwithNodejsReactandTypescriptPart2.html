<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>Nodejs, React ë° TypeScriptì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë°©ë²•  | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="Nodejs, React ë° TypeScriptì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë°©ë²•  | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="Nodejs, React ë° TypeScriptì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë°©ë²•  | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2" data-gatsby-head="true"/><meta name="twitter:title" content="Nodejs, React ë° TypeScriptì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë°©ë²•  | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-12 19:37" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/QH5Mz7n7Y6w0r4_gCGFQf/_buildManifest.js" defer=""></script><script src="/_next/static/QH5Mz7n7Y6w0r4_gCGFQf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">Nodejs, React ë° TypeScriptì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë°©ë²• </h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="Nodejs, React ë° TypeScriptì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë°©ë²• " loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 12, 2024</span><span class="posts_reading_time__f7YPP">39<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<img src="/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png">
<h1>ì†Œê°œ</h1>
<p>ì´ê²ƒì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œì„ êµ¬í˜„í•˜ëŠ” ë‘ ë¶€ë¶„ íŠœí† ë¦¬ì–¼ì˜ ë‘ ë²ˆì§¸ ê¸°ì‚¬ì…ë‹ˆë‹¤.</p>
<p>íŠœí† ë¦¬ì–¼ì˜ ì²« ë²ˆì§¸ ë¶€ë¶„ì€ í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì¸ì¦ ë° ê¶Œí•œì˜ ê°œë…ì„ ì„¤ëª…í•˜ëŠ” ë° ì „ë…ë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ì§ ë³´ì§€ ì•Šì•˜ë‹¤ë©´, ì§„í–‰í•˜ê¸° ì „ì— ì²« ë²ˆì§¸ ë¶€ë¶„ì„ í™•ì¸í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.</p>
<p>ê¸°ì´ˆë¥¼ ë‹¤ë£¬ ê¸°ì´ˆë¥¼ ë°”íƒ•ìœ¼ë¡œ, React, Node.js ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ í† í° ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ í•˜ëŠ” í’€ ìŠ¤íƒ ì‹œìŠ¤í…œì„ ë‹¨ê³„ë³„ë¡œ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì˜ ì™„ì „í•œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì´ GitHub ì €ì¥ì†Œì—ì„œ ì°¾ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ì„¹ì…˜ì—ì„œ í”„ë¡œì íŠ¸ êµ¬ì¡°ì— ìµìˆ™í•´ì ¸ ë´…ì‹œë‹¤.</p>
<h1>í”„ë¡œì íŠ¸ êµ¬ì¡°</h1>
<p><img src="/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_1.png" alt="í”„ë¡œì íŠ¸ êµ¬ì¡°"></p>
<p>ìœ„ì˜ ê·¸ë¦¼ 1ì—ì„œ ì „ì²´ í’€ ìŠ¤íƒ í”„ë¡œì íŠ¸ êµ¬ì¡°ê°€ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ë° ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI) ë‚´ ê° êµ¬ì„± ìš”ì†Œì˜ ëª©ì ì— ëŒ€í•´ ë…¼ì˜í•´ ë´…ì‹œë‹¤.</p>
<h2>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤</h2>
<p>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” ë§¤ìš° ê¸°ë³¸ì ì´ë©°, í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´ì˜ Auth ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì´ëŸ¬í•œ ì»´í¬ë„ŒíŠ¸ì™€ ìƒí˜¸ì‘ìš©í•˜ì—¬ ì‚¬ìš©ì ì§€ì • í›„í¬ useApi ë° ApiProvider í´ë˜ìŠ¤ë¥¼ í†µí•´ ì„œë²„ì— ì¸ì¦ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì„œë²„ê°€ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ ìœ íš¨ì„± ê²€ì‚¬í•˜ë©´ ì‘ë‹µ ë‚´ì—ì„œ JWT í† í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ìœ íš¨í•œ ì„œë²„ ì‘ë‹µì‹œ, ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° AuthReducerë¡œ ì‘ì—…ì´ ë””ìŠ¤íŒ¨ì¹˜ë©ë‹ˆë‹¤. ë””ìŠ¤íŒ¨ì¹˜ëœ ì‘ì—…ì€ ê´€ë ¨ AuthStateë¡œ ì¤„ì–´ë“¤ê³ , AuthContextë¥¼ í†µí•´ ì „ì²´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¸í„°í˜ì´ìŠ¤ì— ì œê³µë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” React ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë  ê²ƒì…ë‹ˆë‹¤.</p>
<h2>ì„œë²„</h2>
<p>ì„œë²„ëŠ” ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ìê²© ì¦ëª… ë°ì´í„°ì™€ í•¨ê»˜ ìš”ì²­ì„ ë°›ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € Cors(Cross-Origin-Resource-Sharing) ê·œì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ê³  ì œì¶œëœ ì…ë ¥ ë°ì´í„°ê°€ ìœ íš¨í•œì§€ë¥¼ ê²€ì¦í•  ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¨ê³„ ì¤‘ í•˜ë‚˜ë¼ë„ í†µê³¼í•˜ì§€ ëª»í•˜ë©´ ì˜¤ë¥˜ ì‘ë‹µì´ ë°˜í™˜ë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ì€ ì‚¬ìš©ì/ê°€ì… routeì—ì„œ ìƒˆë¡œìš´ ì‚¬ìš©ìê°€ ìƒì„±ë˜ê±°ë‚˜ ì‚¬ìš©ì/ë¡œê·¸ì¸ routeì—ì„œ ê¸°ì¡´ ì‚¬ìš©ìê°€ ì¸ì¦ë©ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” InMemoryDataProviderê°€ êµ¬í˜„ë˜ë©° ì‚¬ìš©ì ë°ì´í„°ëŠ” ê°„ë‹¨í•œ ê°ì²´ì— ì €ì¥ë©ë‹ˆë‹¤. ì´ëŠ” íŠœí† ë¦¬ì–¼ì´ ë³µì¡í•´ì§€ì§€ ì•Šë„ë¡ ì˜ë„ëœ ê²ƒì´ë©° ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ì— ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤. DataProviderInterfaceëŠ” ë°ì´í„° ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì¶”ìƒí™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ë©°, ë‚˜ì¤‘ì— ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ ì œê³µìë¡œ ì‰½ê²Œ ì „í™˜í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ê°€ì… ë˜ëŠ” ë¡œê·¸ì¸ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ë©´ ì„œëª…ëœ ì„œë²„ì™€ í•¨ê»˜ ë§Œë£Œ ê°€ëŠ¥í•œ JWT(JSON Web Token)ê°€ ìƒì„±ë˜ì–´ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤. ì´ í† í°, ì¼ë°˜ì ìœ¼ë¡œ ì¸ì¦ í† í°ìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆìœ¼ë©°, ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì—ì„œ /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ë³´í˜¸ëœ ì„œë²„ ì¸¡ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ ìš”ì²­ì— í¬í•¨ë©ë‹ˆë‹¤.</p>
<h1>ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­</h1>
<p>ì´ íŠœí† ë¦¬ì–¼ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ê¸° ìœ„í•œ ì „ì œ ì¡°ê±´ ëª©ë¡ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<ul>
<li>í•´ë‹¹ íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí•˜ë ¤ë©´ ì»´í“¨í„°ì— Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
<li>Node Package Manager (NPM)ì€ Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ì„œ Yarnì„ ì„ í˜¸í•˜ë©° í”„ë¡œì íŠ¸ ì¢…ì†ì„± ê´€ë¦¬ì—ëŠ” Yarnì´ ì‚¬ìš©ë  ê²ƒì…ë‹ˆë‹¤.</li>
<li>ì›¹ì´ ì‘ë™í•˜ëŠ” ë°©ì‹ì— ëŒ€í•œ ì•Œë§ì€ ì§€ì‹ì´ ìˆì–´ì•¼ í•˜ë©° ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ì‹œìŠ¤í…œì„ êµ¬í˜„í•œ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë³¸ì ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</li>
<li>ë³¸ ë¬¸ì„œ ì´ì „ì— Node.js, React ë° Typescriptì™€ í•¨ê»˜ ì‘ì—…í•œ ê²½í—˜ì´ ìˆì–´ì•¼ í•˜ì§€ë§Œ, ì½”ë“œ ì•ˆë‚´ë¥¼ ë°›ì„ ì˜ˆì •ì´ë¯€ë¡œ ì‹¬ì¸µì ì¸ ì§€ì‹ì€ ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤.</li>
</ul>
<p>ì, ì†Œê°œëŠ” ì´ì œ ëë‚´ê³  ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬í˜„ìœ¼ë¡œ ë„˜ì–´ê°€ ë´…ì‹œë‹¤. ë©‹ì§€ë„¤ìš”! ğŸ˜</p>
<h1>1. ì„œë²„ ì„¤ì •</h1>
<h2>1.1 ì˜ì¡´ì„± ì„¤ì¹˜</h2>
<p>ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³  ì„œë²„ ì½”ë“œ ê¸°ë°˜ì„ ì„¤ì •í•´ë³´ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">mkdir authentication-and-authorization &#x26;&#x26;\
cd authentication-and-authorization &#x26;&#x26;\
mkdir server &#x26;&#x26;\
cd server &#x26;&#x26; mkdir src
</code></pre>
<p>ì‹œì‘ ì„œë²„ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-bash">/authentication-and-authorization
  |__ /server
      |__ /src
</code></pre>
<p>/server í´ë” ì•ˆì— ìˆëŠ” í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ë…¸ë“œ í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-bash">npm init -y
</code></pre>
<p>ì´ì œ ì„œë²„ í”„ë¡œì íŠ¸ì˜ ì‹œì‘ì ì´ ìˆìœ¼ë‹ˆ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Typescript í”„ë¡œì íŠ¸ë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">yarn add typescript @types/node --dev &#x26;&#x26; npx tsc --init
</code></pre>
<p>ìœ„ ëª…ë ¹ì€ /server í´ë” ì•ˆì— tsconfig.json íŒŒì¼ì„ ìƒì„±í–ˆì„ ê²ë‹ˆë‹¤. í•´ë‹¹ íŒŒì¼ì˜ ë‚´ìš©ì„ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ë³€ê²½í•´ì£¼ì„¸ìš”:</p>
<pre><code class="hljs language-js">{
  <span class="hljs-string">"compilerOptions"</span>: {
    <span class="hljs-string">"target"</span>: <span class="hljs-string">"es2016"</span>,
    <span class="hljs-string">"module"</span>: <span class="hljs-string">"commonjs"</span>,
    <span class="hljs-string">"rootDir"</span>: <span class="hljs-string">"./src"</span>,
    <span class="hljs-string">"sourceMap"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"outDir"</span>: <span class="hljs-string">"./dist"</span>,
    <span class="hljs-string">"esModuleInterop"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"forceConsistentCasingInFileNames"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"strict"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"skipLibCheck"</span>: <span class="hljs-literal">true</span>
  }
}
</code></pre>
<p>ê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ rootDirì…ë‹ˆë‹¤. ì´ ì„¤ì •ì€ TypeScript ì»´íŒŒì¼ëŸ¬ì—ê²Œ .ts íŒŒì¼ì„ ì–´ë””ì—ì„œ ì°¾ì•„ .js íŒŒì¼ë¡œ ë³€í™˜í•˜ê³  outDirë¡œ ì§€ì •ëœ ë””ë ‰í† ë¦¬ì— ë°°ì¹˜í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤.</p>
<p>ì´ì œ ì„œë²„ì— í•„ìš”í•œ ì´ˆê¸° íŒ¨í‚¤ì§€ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">yarn add express dotenv cors &#x26;&#x26;\
yarn add @types/express @types/dotenv @types/cors --dev
</code></pre>
<p>3rd party íŒ¨í‚¤ì§€ì— ëŒ€í•œ íƒ€ì… ì •ì˜ íŒŒì¼ë„ ê°œë°œ ì¢…ì†ì„±ìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì„¸ìš”.</p>
<h2>1.2 Express ì„œë²„ ë§Œë“¤ê¸°</h2>
<p>ë¨¼ì € Express ì„œë²„ì˜ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ìƒì„±í•˜ê³  ë³¸ ê°•ì¢Œë¥¼ í†µí•´ ì´ë¥¼ í™•ì¥í•´ ë‚˜ê°ˆ ê²ƒì…ë‹ˆë‹¤. /server/src ë””ë ‰í† ë¦¬ ì•ˆì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ app.tsì™€ index.tsë¥¼ ìƒì„±í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">touch app.<span class="hljs-property">ts</span> &#x26;&#x26; touch index.<span class="hljs-property">ts</span>
</code></pre>
<p>app.ts ì•ˆì—ëŠ” ì„œë²„ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ê³  ê´€ë ¨ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Express ì•± ê°ì²´ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. app.tsì˜ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤ (ì´ê²ƒì€ í•´ë‹¹ íŒŒì¼ì˜ ìµœì¢… ì½”ë“œê°€ ì•„ë‹™ë‹ˆë‹¤):</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* app.ts */</span>

<span class="hljs-comment">// ì „ì—­ ì¢…ì†ì„±</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>;
dotenv.<span class="hljs-title function_">config</span>(); <span class="hljs-comment">// ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤</span>

<span class="hljs-comment">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>
<span class="hljs-keyword">import</span> routes <span class="hljs-keyword">from</span> <span class="hljs-string">"./routes"</span>;

<span class="hljs-comment">// express ì•± ì„¤ì •</span>
<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// ë¯¸ë“¤ì›¨ì–´</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

<span class="hljs-comment">// ë¼ìš°íŠ¸</span>
app.<span class="hljs-title function_">use</span>(routes);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> app;
</code></pre>
<p>index.tsì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ SERVER_PORT í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì •ëœ í¬íŠ¸ì—ì„œ express ì„œë²„ë¥¼ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* index.ts */</span>

<span class="hljs-comment">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>
<span class="hljs-keyword">import</span> app <span class="hljs-keyword">from</span> <span class="hljs-string">"./app"</span>;
<span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">SERVER_PORT</span> } = process.<span class="hljs-property">env</span>;

<span class="hljs-comment">// ì•±ì´ listeningì¤‘</span>
app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">SERVER_PORT</span>, <span class="hljs-function">() =></span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ì•±ì´ í¬íŠ¸ <span class="hljs-subst">${SERVER_PORT}</span>ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤`</span>);
});
</code></pre>
<p>Gitì—ì„œ ë¬´ì‹œë  ìˆ˜ ìˆëŠ” .env íŒŒì¼ì— í”„ë¡œì íŠ¸ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ê´€í–‰ì…ë‹ˆë‹¤. ì´ íŒŒì¼ì€ /serverí´ë”ì— ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"># .<span class="hljs-property">env</span>

<span class="hljs-variable constant_">SERVER_PORT</span>=<span class="hljs-number">8000</span>
</code></pre>
<p>ìµìŠ¤í”„ë ˆìŠ¤ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ /server í´ë” ë‚´ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">rm -rf ./dist &#x26;&#x26; npx tsc &#x26;&#x26; cp .<span class="hljs-property">env</span> ./dist/.<span class="hljs-property">env</span> &#x26;&#x26; cd ./dist &#x26;&#x26; node index.<span class="hljs-property">js</span>
</code></pre>
<p>ìœ„ ëª…ë ¹ì€ ë¨¼ì € ./dist ë””ë ‰í† ë¦¬ë¥¼ ì œê±°í•˜ê³ , ./src ë””ë ‰í† ë¦¬ì— ìˆëŠ” ëª¨ë“  ì½”ë“œë¥¼ íƒ€ì… í™•ì¸í•˜ê³  ./dist ë””ë ‰í† ë¦¬ ë‚´ì˜ JavaScriptë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì»´íŒŒì¼ ë‹¨ê³„ê°€ ì™„ë£Œë˜ë©´ .env íŒŒì¼ì´ ./dist ë””ë ‰í† ë¦¬ë¡œ ë³µì‚¬ë˜ì–´ ì„œë²„ë¥¼ node index.jsë¡œ ì‹¤í–‰í•  ë•Œ í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ë§¤ë²ˆ ì´ ëª…ë ¹ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì§€ë£¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ server/package.json ë‚´ì— ëª‡ ê°€ì§€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¨ìˆœí™”í•˜ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"server"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx tsc &#x26;&#x26; cp .env ./dist/.env"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rm -rf ./dist &#x26;&#x26; yarn build &#x26;&#x26; cd ./dist &#x26;&#x26; node index.js"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ISC"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@types/cors"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.8.13"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/dotenv"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.2.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/express"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.17.15"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@types/node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^18.11.18"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"typescript"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.9.4"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"cors"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.8.5"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dotenv"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^16.0.3"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"express"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^4.18.2"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ì´ì œ start ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-bash">yarn start
</code></pre>
<p><img src="/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_2.png" alt="ì´ë¯¸ì§€"></p>
<p>ì„œë²„ í”„ë¡œì íŠ¸ê°€ ì´ì œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ë°±ì—”ë“œ ì¸ì¦ ë° ê¶Œí•œ ì‹œìŠ¤í…œ ì„¤ì • ê³¼ì •ì„ ë³´ì—¬ë“œë¦´ ê²ƒì…ë‹ˆë‹¤.</p>
<h2>1.3 ì‚¬ìš©ì ë°ì´í„° ì œê³µì</h2>
<p>ë°ì´í„° ì €ì¥ ë ˆì´ì–´ëŠ” ì¸ì¦ ì‹œìŠ¤í…œì— í•„ìˆ˜ì ì…ë‹ˆë‹¤. ìƒˆ ì‚¬ìš©ìê°€ ìƒì„±ë  ë•Œ, ê·¸ë“¤ì˜ ë°ì´í„°ëŠ” ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë¡œê·¸ì¸í•  ë•Œ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•´ì„œ, ì‚¬ìš©ì ë°ì´í„° ì €ì¥ì„ ìœ„í•´ ì¸ë©”ëª¨ë¦¬ ì €ì¥ì„ êµ¬í˜„í•  ê²ƒì´ì§€ë§Œ, ë‚˜ì¤‘ì— ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ êµ¬í˜„ì„ êµì²´í•˜ëŠ” ê²ƒì´ ì‰½ë„ë¡ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>/server/src/data_providers í´ë”ë¥¼ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì¸í„°í˜ì´ìŠ¤ IDataProviderë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/data_providers/IDataProvider.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> interface <span class="hljs-title class_">IDataProvider</span>&#x3C;<span class="hljs-title class_">Resource</span>> {
  <span class="hljs-attr">createData</span>: <span class="hljs-function">(<span class="hljs-params">resource: Resource</span>) =></span> <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>>;
  <span class="hljs-attr">readData</span>: <span class="hljs-function">(<span class="hljs-params">args: {id: string, matchField: string}</span>) =></span> <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">Resource</span>>;
  <span class="hljs-attr">updateData</span>: <span class="hljs-function">(<span class="hljs-params">args: {id: string, resource: Resource}</span>) =></span> <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>>;
  <span class="hljs-attr">deleteData</span>: <span class="hljs-function">(<span class="hljs-params">id: string</span>) =></span> <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>>;
}
</code></pre>
<p>ì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ì¼ë°˜ì ì¸ CRUD ì‘ì—…ì„ ë‚˜íƒ€ë‚´ëŠ” ë„¤ ê°€ì§€ ë©”ì„œë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œë“¤ì€ Resource íƒ€ì…ì˜ ì¼ë°˜ì ì¸ ê°’ì„ ì†Œë¹„í•˜ê±°ë‚˜ ë°˜í™˜í•©ë‹ˆë‹¤. IDataProviderì˜ InMemoryDataProvider êµ¬í˜„ì€ ì•„ë˜ì™€ ê°™ì´ ë³´ì—¬ì§‘ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/data_providers/InMemoryDataProvider.ts</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">IDataProvider</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./IDataProvider"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InMemoryDataProvider</span>&#x3C;<span class="hljs-title class_">Resource</span> <span class="hljs-keyword">extends</span> {<span class="hljs-attr">id</span>: string, <span class="hljs-attr">data</span>: any}> implements <span class="hljs-title class_">IDataProvider</span>&#x3C;<span class="hljs-title class_">Resource</span>> {
  private <span class="hljs-attr">_data</span>: <span class="hljs-title class_">Resource</span>[];

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_data</span> = [];
  };

  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">createData</span>(<span class="hljs-params">resource: Resource</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_data</span>.<span class="hljs-title function_">push</span>(resource);
    <span class="hljs-keyword">return</span>;
  }

  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">readData</span>(<span class="hljs-params">args: {id: string, matchField: string}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_data</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =></span> x.<span class="hljs-property">data</span>[args.<span class="hljs-property">matchField</span>] === args.<span class="hljs-property">id</span>)[<span class="hljs-number">0</span>];
  };

  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">updateData</span>(<span class="hljs-params">props: { id: string; resource: Resource; }</span>) {
    <span class="hljs-keyword">const</span> {id, resource} = props;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> datum <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_data</span>) {
      <span class="hljs-keyword">if</span>(datum.<span class="hljs-property">id</span> === id) {
        datum.<span class="hljs-property">data</span> = resource.<span class="hljs-property">data</span>;
      }
    }

    <span class="hljs-keyword">return</span>;
  };

  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">deleteData</span>(<span class="hljs-params">id: string</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_data</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">_data</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">datum</span> =></span> datum.<span class="hljs-property">id</span> !== id);
    <span class="hljs-keyword">return</span>;
  };
}
</code></pre>
<p>InMemoryDataProviderëŠ” IDataProviderì—ì„œ ì •ì˜ëœ ê³µê°œ ë©”ì„œë“œë¥¼ ì—„ê²©í•˜ê²Œ êµ¬í˜„í•©ë‹ˆë‹¤. ì‹¤ì œ ë°ì´í„° ì €ì¥ì†ŒëŠ” InMemoryDataProvider í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— íŠ¹ì •í•œ private _data ë°°ì—´ ì†ì„±ì…ë‹ˆë‹¤. InMemoryDataProviderì˜ generic íƒ€ì…ì€ Resourceì´ë©° 'id: string, data: any'ë¥¼ í™•ì¥í•˜ì˜€ê¸° ë•Œë¬¸ì— ì…ë ¥ ìì›ì€ id ë° ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ê¸°íƒ€ ì†ì„±ì„ ì¶”ê°€ë¡œ ê°€ì ¸ì•¼í•©ë‹ˆë‹¤. TypeScriptì˜ ì´ ì¸í„°í˜ì´ìŠ¤ ì¤‘ì‹¬ì  ì ‘ê·¼ì˜ ì¥ì ì€ IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¤€ìˆ˜í•œë‹¤ë©´ ë°ì´í„° ì €ì¥ì†Œë¥¼ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤(ì˜ˆ: SQL ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©).</p>
<p>ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ì—ì„œ CRUD ì‘ì—…ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì—ì„œ ë¶„ë¦¬í•˜ëŠ” ì‚¬ìš©ì ì €ì¥ì†Œë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì €, ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ëœ ì¶”ìƒí™” Repositoryë¥¼ ì‘ì„±í•  ê²ƒì…ë‹ˆë‹¤. ì´ RepositoryëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ ìœ í˜•ì—ì„œ í™•ì¥ë  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/repositories/Repository.ts</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">IDataProvider</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../data_providers/IDataProvider"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Repository</span>&#x3C;<span class="hljs-title class_">Resource</span>> {
  protected <span class="hljs-attr">_provider</span>: <span class="hljs-title class_">IDataProvider</span>&#x3C;<span class="hljs-title class_">Resource</span>>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">args: {provider: IDataProvider&#x3C;Resource>}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_provider</span> = args.<span class="hljs-property">provider</span>;
  };

  public <span class="hljs-keyword">get</span> <span class="hljs-title function_">provider</span>(): <span class="hljs-title class_">IDataProvider</span>&#x3C;<span class="hljs-title class_">Resource</span>> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_provider</span>;
  }
}
</code></pre>
<p>Repositoryì—ì„œ íŒŒìƒëœ í´ë˜ìŠ¤ëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì„ í˜•ì„±í•˜ëŠ” IDataProviderë¥¼ êµ¬í˜„í•˜ëŠ” ì œê³µì(provider)ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  UserRepository í´ë˜ìŠ¤ëŠ” Repositoryë¥¼ í™•ì¥í•˜ê³  ì‚¬ìš©ì ë°ì´í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ìì²´ public ë©”ì„œë“œë¥¼ ê°–ìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ìì„¸íˆ ì‚´í´ë´…ì‹œë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/repositories/UserRepository.ts</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">IDataProvider</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../data_providers/IDataProvider"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Repository</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./Repository"</span>;
<span class="hljs-keyword">import</span> { randomUUID } <span class="hljs-keyword">from</span> <span class="hljs-string">"crypto"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">InMemoryDataProvider</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../data_providers/InMemoryDataProvider"</span>;

type <span class="hljs-title class_">UserData</span> = {
  <span class="hljs-attr">email</span>: string,
  <span class="hljs-attr">name</span>: string,
  <span class="hljs-attr">password</span>: string,
  <span class="hljs-attr">createdAt</span>: string,
  <span class="hljs-attr">updatedAt</span>: string
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserResource</span> {
  private <span class="hljs-attr">_id</span>: string;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">private _data: UserData</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_id</span> = <span class="hljs-title function_">randomUUID</span>();
  };

  public <span class="hljs-keyword">get</span> <span class="hljs-title function_">id</span>(): string {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_id</span>;
  }

  public <span class="hljs-keyword">get</span> <span class="hljs-title function_">data</span>(): <span class="hljs-title class_">UserData</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_data</span>;
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Repository</span>&#x3C;<span class="hljs-title class_">UserResource</span>> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">args: {provider: IDataProvider&#x3C;UserResource>}</span>) {
    <span class="hljs-variable language_">super</span>({<span class="hljs-attr">provider</span>: args.<span class="hljs-property">provider</span>});
  }

  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">user: UserResource</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">provider</span>.<span class="hljs-title function_">createData</span>(user);
    <span class="hljs-keyword">return</span>;
  }

  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">getUserBy</span>(<span class="hljs-params">args: {id: string, matchField: string}</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">provider</span>.<span class="hljs-title function_">readData</span>({<span class="hljs-attr">id</span>: args.<span class="hljs-property">id</span>, <span class="hljs-attr">matchField</span>: args.<span class="hljs-property">matchField</span>});
  }
}

<span class="hljs-keyword">const</span> dataProvider = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryDataProvider</span>&#x3C;<span class="hljs-title class_">UserResource</span>>();
<span class="hljs-keyword">const</span> userRepository = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserRepository</span>({<span class="hljs-attr">provider</span>: dataProvider});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> userRepository;
</code></pre>
<p>ì‚¬ìš©ì ë°ì´í„°ì˜ êµ¬ì¡°ëŠ” UserData ìœ í˜•ì— ì˜í•´ ì •ì˜ë˜ë©°, ë¦¬ì†ŒìŠ¤ êµ¬ì¡°ëŠ” UserResource í´ë˜ìŠ¤ì— ì˜í•´ ì •ì˜ë©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” id ë° data ê³µê°œ ì†ì„±ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, creatUser ë° getUserBy ë©”ì„œë“œëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´ì™€ ìƒí˜¸ ì‘ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³  ì“°ê¸° ìœ„í•´ IDataProviderì˜ êµ¬í˜„ì„ í†µí•´ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p>ì°¸ê³ : ìš°ë¦¬ëŠ” InMemoryDataProviderì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ UserRepositoryì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ë ¤ë©´, InMemoryDataProvider ëŒ€ì‹  IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ì œ UserRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ API ì—”ë“œí¬ì¸íŠ¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë…¼ë¦¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒ ì„¹ì…˜ì—ì„œ ì„¤ëª…ë  ê²ƒì…ë‹ˆë‹¤.</p>
<h2>1.3 ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ ë¼ìš°íŠ¸</h2>
<p>ë‹¤ìŒìœ¼ë¡œ, express ë¼ìš°íŠ¸ë¥¼ ëª¨ë‘ ë³´ê´€í•  í´ë”ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">yarn add bcrypt jwt &#x26;&#x26;\
yarn add @types/bcrypt @types/jwt --dev &#x26;&#x26;\
cd server/src &#x26;&#x26;\
mkdir routes &#x26;&#x26;\
cd ./routes &#x26;&#x26;\
touch index.<span class="hljs-property">ts</span> user.<span class="hljs-property">ts</span>
</code></pre>
<p>ì•Œë¦¼: ì¶”ê°€ì ìœ¼ë¡œ npm íŒ¨í‚¤ì§€ bcrypt ë° jwtë¥¼ ì„œë²„ í”„ë¡œì íŠ¸ ë‚´ì— ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë° bcryptë¥¼ ì‚¬ìš©í•˜ê³ , ì„±ê³µì ì¸ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì— ë°˜í™˜ë  ì¸ì¦ í† í°ì„ ìƒì„±í•˜ê¸° ìœ„í•´ jwtë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. /server ë‚´ë¶€ì˜ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">/server
  |__ /src
      |__ ...
      |__ /routes
        |__ index.<span class="hljs-property">ts</span>
        |__ user.<span class="hljs-property">ts</span>
</code></pre>
<p>index.ts ë‚´ì—ì„œëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ëª¨ë“  ê°€ëŠ¥í•œ ê²½ë¡œë¥¼ í¬í•¨í•˜ëŠ” ì¤‘ì•™ ë¼ìš°í„°ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ëŠ” ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ íŠ¹ì • /user ê²½ë¡œë§Œ ê°€ì§ˆ ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/routes/index.ts</span>

<span class="hljs-comment">// ì „ì—­ ì¢…ì†ì„±</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">const</span> router = <span class="hljs-title class_">Router</span>();
<span class="hljs-keyword">import</span> userRoute <span class="hljs-keyword">from</span> <span class="hljs-string">"./user"</span>;

<span class="hljs-comment">// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸</span>
router.<span class="hljs-title function_">use</span>(<span class="hljs-string">"/user"</span>, userRoute);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;
</code></pre>
<p>userRouteëŠ” ë‹¤ìŒê³¼ ê°™ì´ user.tsì— êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/routes/user.ts</span>

<span class="hljs-comment">// ì „ì—­ ì¢…ì†ì„±</span>
<span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">ENCRYPTION_KEY</span>, <span class="hljs-variable constant_">AUTH_TOKEN_KEY</span> } = process.<span class="hljs-property">env</span>;
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">Router</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
<span class="hljs-keyword">const</span> userRoute = <span class="hljs-title class_">Router</span>();
<span class="hljs-keyword">import</span> bcrypt <span class="hljs-keyword">from</span> <span class="hljs-string">'bcrypt'</span>;
<span class="hljs-keyword">import</span> jwt <span class="hljs-keyword">from</span> <span class="hljs-string">'jsonwebtoken'</span>;

<span class="hljs-comment">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">UserResource</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'../repositories/UserRepository'</span>;
<span class="hljs-keyword">import</span> { validateHasParameters, validateEmailFormat, validatePasswordLength } <span class="hljs-keyword">from</span> <span class="hljs-string">"../middleware/validation"</span>;
<span class="hljs-keyword">import</span> userRepository <span class="hljs-keyword">from</span> <span class="hljs-string">'../repositories/UserRepository'</span>;

<span class="hljs-comment">/**
 * ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ë° ì´ë¦„ì„ ì…ë ¥í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡
 */</span>
userRoute.<span class="hljs-title function_">post</span>(
  <span class="hljs-string">"/register"</span>,
  <span class="hljs-title function_">validateHasParameters</span>(<span class="hljs-string">"email"</span>, <span class="hljs-string">"password"</span>, <span class="hljs-string">"name"</span>),
  validateEmailFormat,
  validatePasswordLength,
  <span class="hljs-keyword">async</span> (req, res) => {
    <span class="hljs-keyword">const</span> { name, email, password } = req.<span class="hljs-property">body</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> userExist = <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">getUserBy</span>({<span class="hljs-attr">id</span>: email, <span class="hljs-attr">matchField</span>: <span class="hljs-string">'email'</span>});
      <span class="hljs-keyword">if</span> (userExist) {
        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">409</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">"User already exist"</span> });
      }

      <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>();

      <span class="hljs-comment">// ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”</span>
      <span class="hljs-keyword">const</span> passwordHash = <span class="hljs-keyword">await</span> bcrypt.<span class="hljs-title function_">hash</span>(password, <span class="hljs-variable constant_">ENCRYPTION_KEY</span>!);

      <span class="hljs-comment">// ì‚¬ìš©ì ì •ë³´ì™€ ë§Œë£Œ ë‚ ì§œë¡œ ì¸ì¦ í† í° ìƒì„±</span>
      <span class="hljs-keyword">const</span> userData = {
        <span class="hljs-attr">name</span>: name,
        <span class="hljs-attr">email</span>: email,
        <span class="hljs-attr">password</span>: passwordHash,
        <span class="hljs-attr">createdAt</span>: date,
        <span class="hljs-attr">updatedAt</span>: date,
      };
      <span class="hljs-keyword">const</span> newUser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserResource</span>(userData);

      <span class="hljs-comment">// ì‚¬ìš©ì ë°ì´í„° ì €ì¥</span>
      <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">createUser</span>(newUser);

      <span class="hljs-keyword">const</span> jwtOptions = {
        <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">'24h'</span>,  <span class="hljs-comment">// 24ì‹œê°„ í›„ í† í° ë§Œë£Œ</span>
      };

      <span class="hljs-keyword">const</span> authToken = jwt.<span class="hljs-title function_">sign</span>(newUser.<span class="hljs-property">data</span>, <span class="hljs-variable constant_">AUTH_TOKEN_KEY</span>!, jwtOptions);

      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({
        <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">user</span>: {
          <span class="hljs-attr">user_id</span>: newUser.<span class="hljs-property">id</span>,
          <span class="hljs-attr">email</span>: newUser.<span class="hljs-property">data</span>.<span class="hljs-property">email</span>,
          <span class="hljs-attr">name</span>: newUser.<span class="hljs-property">data</span>.<span class="hljs-property">name</span>,
          <span class="hljs-attr">auth_token</span>: authToken,
        },
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">`ë‚´ë¶€ ì˜¤ë¥˜`</span> });
    }
  }
);

<span class="hljs-comment">/**
 * ì…ë ¥ëœ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë¡œê·¸ì¸ ì„¸ì…˜ ì¸ì¦
 */</span>
userRoute.<span class="hljs-title function_">post</span>(
  <span class="hljs-string">"/login"</span>,
  <span class="hljs-title function_">validateHasParameters</span>(<span class="hljs-string">"email"</span>, <span class="hljs-string">"password"</span>),
  <span class="hljs-keyword">async</span> (req, res) => {
    <span class="hljs-keyword">const</span> { email, password } = req.<span class="hljs-property">body</span>;

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ì‚¬ìš©ì ì¡´ì¬ ì—¬ë¶€ ë° ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸</span>
      <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">getUserBy</span>({<span class="hljs-attr">id</span>: email, <span class="hljs-attr">matchField</span>: <span class="hljs-string">'email'</span>});
      <span class="hljs-keyword">const</span> userExists = !!user;
      <span class="hljs-keyword">const</span> passwordCorrect = userExists &#x26;&#x26; (<span class="hljs-keyword">await</span> bcrypt.<span class="hljs-title function_">compare</span>(password, user.<span class="hljs-property">data</span>.<span class="hljs-property">password</span>));
      <span class="hljs-keyword">if</span>(userExists &#x26;&#x26; passwordCorrect) {

        <span class="hljs-keyword">const</span> jwtOptions = {
          <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">'24h'</span>,  <span class="hljs-comment">// 24ì‹œê°„ í›„ í† í° ë§Œë£Œ</span>
        };

        <span class="hljs-keyword">const</span> authToken = jwt.<span class="hljs-title function_">sign</span>(user.<span class="hljs-property">data</span>, <span class="hljs-variable constant_">AUTH_TOKEN_KEY</span>!, jwtOptions);

        <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({
          <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">user</span>: {
            <span class="hljs-attr">user_id</span>: user.<span class="hljs-property">id</span>,
            <span class="hljs-attr">email</span>: user.<span class="hljs-property">data</span>.<span class="hljs-property">email</span>,
            <span class="hljs-attr">name</span>: user.<span class="hljs-property">data</span>.<span class="hljs-property">name</span>,
            <span class="hljs-attr">auth_token</span>: authToken,
          },
        });
      }

      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({<span class="hljs-attr">error</span>: <span class="hljs-string">'ì˜ëª»ëœ ì¸ì¦ ì •ë³´'</span>});
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
      <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">`ì„œë²„ ì˜¤ë¥˜`</span> });
    }
  }
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> userRoute;
</code></pre>
<p>POST /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ì— ì´ë¦„, ì´ë©”ì¼ ë° ë¹„ë°€ë²ˆí˜¸ ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì´ë©”ì¼ì„ í†µí•´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„, ì°¸ì´ë©´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì €ì¥ì„ ìœ„í•´ ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„° userDataë¥¼ ìƒì„±í•˜ë©°, ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ëŠ” ì´ì „ì— ì„¤ì¹˜í•œ bcryptë¥¼ ì‚¬ìš©í•˜ì—¬ ENCRYPTION_KEYë¡œ ì•”í˜¸í™”ë©ë‹ˆë‹¤. ì‚¬ìš©ì ë°ì´í„°ì˜ ì§€ì†ì„±ì€ userRepository.createUserë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜í–‰í•˜ë©°, ì‚¬ìš©ì ìƒì„±ì´ ì„±ê³µí•˜ë©´ 24ì‹œê°„ ë§Œë£Œ ê¸°ê°„ì´ ìˆëŠ” JWT í† í°ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. JWT í† í°ì€ ì´ì „ì— ì„¤ì¹˜í•œ jwtë¥¼ ì‚¬ìš©í•˜ì—¬ AUTH_TOKEN_KEYë¡œ ì„œëª…ë˜ë©° ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ê°€ ì„œë²„ ì‘ë‹µì„ ë°›ìœ¼ë©´ ì´ JWT í† í°ì´ í”„ë¡ íŠ¸ì—”ë“œì— ì €ì¥ë©ë‹ˆë‹¤.</p>
<p>POST /user/login ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ ë‚´ emailê³¼ password ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ë¨¼ì € ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ í•´ë‹¹ ì‚¬ìš©ì ì´ë©”ì¼ì— ëŒ€í•´ ì°¾ì€ ë³µí˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ í›„, ë™ì¼í•œ JWT ì„œëª… í”„ë¡œì„¸ìŠ¤ê°€ ë°˜ë³µë©ë‹ˆë‹¤.</p>
<p>/register ë° /login ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬ìš© ë¯¸ë“¤ì›¨ì–´ë„ êµ¬í˜„í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ì„ ê²ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ /middleware ë””ë ‰í† ë¦¬ì™€ ê·¸ ì•ˆì— validation.ts íŒŒì¼ì„ ìƒì„±í•´ ë³´ì„¸ìš”.</p>
<pre><code class="hljs language-js">cd server/src &#x26;&#x26;\
mkdir middleware &#x26;&#x26;\
touch validation.<span class="hljs-property">ts</span>
</code></pre>
<p>validation.ts íŒŒì¼ì—ì„œëŠ” ì‚¬ìš©ì ì…ë ¥ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë“¤ì„ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/middleware/validation.ts</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextFunction</span>, <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateHasParameters</span> = (<span class="hljs-params">...args: string[]</span>) => {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">req: Request, res: Response, next: NextFunction</span>) =></span> {
    <span class="hljs-keyword">const</span> body = req.<span class="hljs-property">body</span>;
    <span class="hljs-keyword">let</span> valid = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> arg <span class="hljs-keyword">of</span> args) {
      <span class="hljs-keyword">if</span> (body[arg] === <span class="hljs-literal">undefined</span>) {
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">403</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: arg + <span class="hljs-string">" not specified"</span> });
        valid = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">break</span>;
      }
    }

    <span class="hljs-keyword">if</span> (valid) {
      <span class="hljs-title function_">next</span>();
    }
  };
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePasswordLength</span> = (<span class="hljs-params">req: Request, res: Response, next: NextFunction</span>) => {
  <span class="hljs-keyword">const</span> { password } = req.<span class="hljs-property">body</span>;
  <span class="hljs-keyword">if</span> (!!password &#x26;&#x26; password.<span class="hljs-property">length</span> > <span class="hljs-number">7</span>) {
    <span class="hljs-title function_">next</span>();
  } <span class="hljs-keyword">else</span> {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">403</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">"The password provided is not valid"</span> });
  }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateEmailFormat</span> = (<span class="hljs-params">req: Request, res: Response, next: NextFunction</span>) => {
  <span class="hljs-keyword">const</span> { email } = req.<span class="hljs-property">body</span>;
  <span class="hljs-keyword">const</span> re =
    <span class="hljs-regexp">/^(([^&#x3C;>()[\]\\.,;:\s@"]+(\.[^&#x3C;>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/</span>;
  <span class="hljs-keyword">if</span> (!!email &#x26;&#x26; re.<span class="hljs-title function_">test</span>(<span class="hljs-title class_">String</span>(email).<span class="hljs-title function_">toLowerCase</span>())) {
    <span class="hljs-title function_">next</span>();
  } <span class="hljs-keyword">else</span> {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">403</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">"The email provided is not valid"</span> });
  }
};
</code></pre>
<p>validateHasParameterì€ ëª¨ë“  POST ìš”ì²­ì— ì‚¬ìš©ë˜ë©° íŠ¹ì • ë§¤ê°œë³€ìˆ˜ê°€ ì œì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. validatePasswordLength ë° validateEmailFormat ë¯¸ë“¤ì›¨ì–´ëŠ” /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ìš”ì²­ì— ëŒ€í•´ ìœ íš¨í•œ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ì™€ ì´ë©”ì¼ í˜•ì‹ì„ ë³´ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ, app.tsì—ì„œ routesë¥¼ ì‚¬ìš©í•˜ì—¬ ë£¨í„°ë¥¼ express ì•±ì— ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ì— í‘œì‹œëœëŒ€ë¡œ routesë¥¼ íŒŒì¼ ë§¨ ìœ„ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì‹­ì‹œì˜¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* app.ts */</span>

<span class="hljs-comment">// ì „ì—­ ì¢…ì†ì„±</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>;
dotenv.<span class="hljs-title function_">config</span>(); <span class="hljs-comment">// ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ ì´ˆê¸°í™”</span>

<span class="hljs-comment">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>
<span class="hljs-keyword">import</span> routes <span class="hljs-keyword">from</span> <span class="hljs-string">"./routes"</span>;

<span class="hljs-comment">// express ì•± ì„¤ì •</span>
<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// ë¯¸ë“¤ì›¨ì–´</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

<span class="hljs-comment">// ë¼ìš°í„°</span>
app.<span class="hljs-title function_">use</span>(routes);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> app;
</code></pre>
<p>ì´ì œ ì‚¬ìš©ìê°€ ë°©ê¸ˆ ë§Œë“  ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë“±ë¡í•˜ê³  ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ì„œë²„ ì¸¡ì—ì„œ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì‚¬ìš©ì ê¶Œí•œ ì¶”ì ì„ ë‹¤ë£° ê²ƒì…ë‹ˆë‹¤.</p>
<h2>1.4 ì‚¬ìš©ì ê¶Œí•œ</h2>
<p>ì‚¬ìš©ì ê¶Œí•œì€ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  ì‹œë„í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” ì‚¬ìš©ì ë“±ë¡ ë˜ëŠ” ë¡œê·¸ì¸ ì´ë²¤íŠ¸ì—ì„œ ìƒì„±ëœ í† í°ì´ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‹œì‘ëœ ëª¨ë“  ìš”ì²­ì— ì²¨ë¶€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. í† í°ì€ ê° ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‚¬ìš©ëœ AUTH_TOKEN_KEYì™€ ê°™ì€ ê²ƒìœ¼ë¡œ í™•ì¸ë  ê²ƒì…ë‹ˆë‹¤. ì•ìœ¼ë¡œ í† í°ì´ ìš”ì²­ê³¼ í•¨ê»˜ ì „ë‹¬ë˜ëŠ” ë°©ë²•ì„ ë‚˜ì¤€ì— ë‹¤ë£° ê²ƒì´ë©°, ì§€ê¸ˆì€ ì„œë²„ ì¸¡ì—ì„œ ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©ì ê¶Œí•œì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>ì„œë²„/src/middleware ë””ë ‰í† ë¦¬ ì•ˆì— auth.tsë¼ëŠ” ì¶”ê°€ íŒŒì¼ì„ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">cd server/src/middleware &#x26;&#x26; touch auth.<span class="hljs-property">ts</span>
</code></pre>
<p>auth.ts íŒŒì¼ ì•ˆì—ëŠ” ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ê°€ë¡œì±„ê³  í† í° ìœ íš¨ì„± ê²€ì‚¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ëŠ” checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/middleware/auth.ts</span>

<span class="hljs-comment">// ì „ì—­ ì˜ì¡´ì„±</span>
<span class="hljs-keyword">import</span> jwt, { <span class="hljs-title class_">JwtPayload</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'jsonwebtoken'</span>;
<span class="hljs-keyword">const</span> { <span class="hljs-variable constant_">AUTH_TOKEN_KEY</span> } = process.<span class="hljs-property">env</span>;

<span class="hljs-comment">// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±</span>
<span class="hljs-keyword">import</span> userRepository <span class="hljs-keyword">from</span> <span class="hljs-string">'../repositories/UserRepository'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkAuthToken</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">req: any, res: any, next: any</span>) => {
  <span class="hljs-keyword">const</span> auth_token = req.<span class="hljs-property">headers</span>[<span class="hljs-string">"x-access-token"</span>] <span class="hljs-keyword">as</span> string;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">if</span> (!auth_token) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Unauthorized'</span>);
    }

    <span class="hljs-keyword">const</span> decodedUserInfo = jwt.<span class="hljs-title function_">verify</span>(auth_token, <span class="hljs-variable constant_">AUTH_TOKEN_KEY</span>!) <span class="hljs-keyword">as</span> <span class="hljs-title class_">JwtPayload</span>;
    <span class="hljs-comment">// ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸</span>
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> userRepository.<span class="hljs-title function_">getUserBy</span>({ <span class="hljs-attr">id</span>: decodedUserInfo.<span class="hljs-property">email</span>, <span class="hljs-attr">matchField</span>: <span class="hljs-string">'email'</span> });
    <span class="hljs-keyword">if</span>(!user) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Unauthorized'</span>);
    }

    req.<span class="hljs-property">user</span> = {...user.<span class="hljs-property">data</span>, ...decodedUserInfo};
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">403</span>).<span class="hljs-title function_">json</span>({<span class="hljs-attr">error</span>: <span class="hljs-string">'Unauthorized'</span>});
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>();
};
</code></pre>
<p>í™•ì¸í•  í† í°ì€ ìš”ì²­ í—¤ë” X-ACCESS-TOKEN ì•ˆì— í¬í•¨ë  ê²ƒì…ë‹ˆë‹¤. ì¶”ì¶œëœ í† í°ì€ AUTH_TOKEN_KEYë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ì¦ë˜ë©°, í•´ë‹¹ ë°ì´í„° í˜ì´ë¡œë“œëŠ” decodedUserInfoì— í• ë‹¹ë  ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì œì¶œëœ í† í°ì˜ ìœ íš¨ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë°ì´í„° ì €ì¥ì†Œì— ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ ì¶”ê°€ë¡œ í™•ì¸í•  ê²ƒì…ë‹ˆë‹¤. í† í° ìœ íš¨ì„± ê²€ì‚¬ì— ì‹¤íŒ¨í•˜ë©´ 403 ì˜¤ë¥˜ 'Unauthorized' ë©”ì‹œì§€ë¡œ ì‘ë‹µí•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>ì¸ì¦ ë…¼ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ë¥¼ í‰ë‚´ ë‚´ëŠ” ë”ë¯¸ /resource API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ resource.ts íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">cd server/src/routes &#x26;&#x26; touch resource.<span class="hljs-property">ts</span>
</code></pre>
<p>resource.ts íŒŒì¼ì˜ ë‚´ìš©ì€ ê°„ë‹¨í•˜ë©° ë‹¨ì¼ GET ì—”ë“œí¬ì¸íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ì¼ë¶€ ì •ì  HTMLì„ ë°˜í™˜í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/routes/resource.ts</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">const</span> resourceRoute = <span class="hljs-title class_">Router</span>();

resourceRoute.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/"</span>, <span class="hljs-keyword">async</span> (req, res) => {
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">"&#x3C;h1>You have successfully access resource!&#x3C;/h1>"</span>);
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> resourceRoute;
</code></pre>
<p>server/src/routes/index.ts íŒŒì¼ ì•ˆì— /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">// server/src/routes/index.ts</span>

<span class="hljs-comment">// ì „ì—­ ì˜ì¡´ì„±</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">const</span> router = <span class="hljs-title class_">Router</span>();
<span class="hljs-keyword">import</span> userRoute <span class="hljs-keyword">from</span> <span class="hljs-string">"./user"</span>;
<span class="hljs-keyword">import</span> resourceRoute <span class="hljs-keyword">from</span> <span class="hljs-string">"./resource"</span>;
<span class="hljs-keyword">import</span> { checkAuthToken } <span class="hljs-keyword">from</span> <span class="hljs-string">"../middleware/auth"</span>;

<span class="hljs-comment">// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸</span>
router.<span class="hljs-title function_">use</span>(<span class="hljs-string">"/user"</span>, userRoute);
router.<span class="hljs-title function_">use</span>(<span class="hljs-string">"/resource"</span>, checkAuthToken, resourceRoute);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;
</code></pre>
<p>ë˜í•œ checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ importí•˜ê³  /resource ì—”ë“œí¬ì¸íŠ¸ì™€ ì—°ê²°í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•´ë‹¹ ì—”ë“œí¬ì¸íŠ¸ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì´ í† í° ê¶Œí•œ ë¶€ì—¬ë¥¼ ìœ„í•´ ìœ íš¨ì„±ì„ ê²€ì‚¬ë°›ë„ë¡ ë©ë‹ˆë‹¤.</p>
<h2>1.5 CORS êµ¬í˜„</h2>
<p>ì•ì„œ ë§í•œ íŠœí† ë¦¬ì–¼ì˜ ì œ1ë¶€ì—ì„œëŠ” CORS ê·œì¹™ì´ ì„œë²„ì— ì˜í•´ ì§€ì •ë˜ì–´ íŠ¹ì • ì¶œì²˜ ë„ë©”ì¸ìœ¼ë¡œë¶€í„°ì˜ ìš”ì²­ì„ í—ˆìš©í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì™¸ë¶€ íŒ¨í‚¤ì§€ì¸ corsë¥¼ ì‚¬ìš©í•  ê²ƒì´ë©°, ë”°ë¼ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë¨¼ì € ì„œë²„ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js">cd server &#x26;&#x26; yarn add cors &#x26;&#x26; yarn add @types/cors --dev
</code></pre>
<p>ì‹¤ì œ CORS ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„/src/app.tsì—ì„œ ë¯¸ë“¤ì›¨ì–´ë¡œ ì§€ì •ë©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* app.ts */</span>

<span class="hljs-comment">// global dependencies</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">"dotenv"</span>;
dotenv.<span class="hljs-title function_">config</span>(); <span class="hljs-comment">// ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.</span>
<span class="hljs-keyword">import</span> cors <span class="hljs-keyword">from</span> <span class="hljs-string">"cors"</span>;

<span class="hljs-comment">// project dependencies</span>
<span class="hljs-keyword">import</span> routes <span class="hljs-keyword">from</span> <span class="hljs-string">"./routes"</span>;

<span class="hljs-comment">// express ì•± ì„¤ì •</span>
<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">"express"</span>;
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// CORS ì„¤ì •</span>
app.<span class="hljs-title function_">use</span>(
  <span class="hljs-string">"/"</span>,
  <span class="hljs-title function_">cors</span>({
    <span class="hljs-attr">origin</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ì°¸ê³ : ì—¬ê¸°ì„œ ëª¨ë“  ì¶œì²œì„ í—ˆìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.</span>
    <span class="hljs-attr">optionsSuccessStatus</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">preflightContinue</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">methods</span>: <span class="hljs-string">"GET,POST,OPTIONS"</span>,
    <span class="hljs-attr">credentials</span>: <span class="hljs-literal">true</span>,
  })
);

<span class="hljs-comment">// ë¯¸ë“¤ì›¨ì–´</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

<span class="hljs-comment">// ë¼ìš°íŠ¸</span>
app.<span class="hljs-title function_">use</span>(routes);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> app;
</code></pre>
<p>ê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ origin: trueë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ëª¨ë“  ë„ë©”ì¸ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ë¡œì»¬ ê°œë°œì— ì¶©ë¶„í•˜ì§€ë§Œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” í”„ë¡œì íŠ¸ë³„ ë„ë©”ì¸ ëª©ë¡ì—ì„œ ìš”ì²­ì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<p>ì´ì œ ì„œë²„ì— í•„ìš”í•œ ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì—ëŠ” ì‚¬ìš©ìê°€ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸ì¸ í¼ì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.</p>
<h1>2. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì„¤ì •</h1>
<h2>2.1 ì¢…ì†ì„± ì„¤ì¹˜</h2>
<p>ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ìš°ë¦¬ëŠ” React ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•˜ê¸° ìœ„í•´ ./authentication-and-authorization í´ë”ì— ë³„ë„ì˜ í´ë”ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">mkdir ui &#x26;&#x26; cd ui
</code></pre>
<p>/ui ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ Typescriptë¥¼ í™œì„±í™”í•œ React í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì‹­ì‹œì˜¤:</p>
<pre><code class="hljs language-js">yarn create react-app ./ --template typescript
</code></pre>
<p>ì„¤ì¹˜ í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ë©´ '/ui' í´ë” ë‚´ ë¶ˆí•„ìš”í•œ íŒŒì¼ë“¤ì„ ì •ë¦¬í•˜ê³  ì•„ë˜ì— í‘œì‹œëœ ë””ë ‰í† ë¦¬ì™€ ë™ì¼í•˜ê²Œ ë³´ì´ë„ë¡ ì¡°ì •í•  ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">/ui
  |__ /node_modules
      |__ ...
  |__ /public
      |__ favicon.<span class="hljs-property">ico</span>
      |__ index.<span class="hljs-property">html</span>
      |__ logo192.<span class="hljs-property">png</span>
      |__ logo512.<span class="hljs-property">png</span>
      |__ manifest.<span class="hljs-property">json</span>
      |__robots.<span class="hljs-property">txt</span>
  |__ /src
      |__ <span class="hljs-title class_">App</span>.<span class="hljs-property">css</span>
      |__ <span class="hljs-title class_">App</span>.<span class="hljs-property">tsx</span>
      |__ index.<span class="hljs-property">css</span>
      |__ index.<span class="hljs-property">tsx</span>
      |__ react-app-env.<span class="hljs-property">d</span>.<span class="hljs-property">ts</span>
  |__ .<span class="hljs-property">gitignore</span>
  |__ package.<span class="hljs-property">json</span>
  |-- <span class="hljs-variable constant_">README</span>.<span class="hljs-property">md</span>
  |__ tsconfig.<span class="hljs-property">json</span>
  |__ yarn.<span class="hljs-property">lock</span>
</code></pre>
<p>index.tsxì™€ App.tsxì—ì„œ ë¶ˆí•„ìš”í•œ ì½”ë“œì™€ ì˜ëª»ëœ importë¥¼ ì œê±°í•˜ì—¬ ì•„ë˜ì— í‘œì‹œëœ íŒŒì¼ê³¼ ë™ì¼í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* index.tsx */</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;

<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>
);
root.<span class="hljs-title function_">render</span>(
  <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">React.StrictMode</span>></span>
    <span class="hljs-tag">&#x3C;<span class="hljs-name">App</span> /></span>
  <span class="hljs-tag">&#x3C;/<span class="hljs-name">React.StrictMode</span>></span></span>
);
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">/* App.tsx */</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">"./App.css"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>></span>ì•ˆë…•<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p>ì¢‹ì€ ì†Œì‹ì€ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ ëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìœ¼ë©° ì´ì œ ì‹¤ì œ ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤!</p>
<h2>2.2 ì „ì—­ ì¸ì¦ ìƒíƒœ ê´€ë¦¬</h2>
<p>ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ë ¤ë©´ ì¸í„°í˜ì´ìŠ¤ê°€ ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœì— ëŒ€í•´ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ React Contextì™€ useReducer í›…ì„ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € ui/src/ ì•ˆì— ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ ìœ„í•œ ìŠ¤í† ì–´ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">cd ui/src &#x26;&#x26;\
mkdir store &#x26;&#x26;\
cd store &#x26;&#x26; mkdir auth &#x26;&#x26;\
touch authAction.<span class="hljs-property">ts</span> <span class="hljs-title class_">AuthContextProvier</span>.<span class="hljs-property">tsx</span> authReducer.<span class="hljs-property">ts</span>
</code></pre>
<p>authAction.tsëŠ” ì‚¬ìš©ìê°€ ì¸í„°í˜ì´ìŠ¤ ë‚´ì—ì„œ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆëŠ” ê°€ëŠ¥í•œ ì•¡ì…˜ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/store/auth/authActions.ts */</span>

<span class="hljs-keyword">export</span> enum <span class="hljs-title class_">AuthActionEnum</span> {
  <span class="hljs-variable constant_">LOG_IN</span> = <span class="hljs-string">'LOG_IN'</span>,
  <span class="hljs-variable constant_">LOG_OUT</span> = <span class="hljs-string">'LOG_OUT'</span>,
};

<span class="hljs-keyword">export</span> type <span class="hljs-title class_">AuthAction</span> = {
  <span class="hljs-attr">type</span>: <span class="hljs-title class_">AuthActionEnum</span>.<span class="hljs-property">LOG_IN</span>,
  <span class="hljs-attr">payload</span>: {
    <span class="hljs-attr">authToken</span>: string;
    <span class="hljs-attr">userId</span>: string;
    <span class="hljs-attr">email</span>: string;
    <span class="hljs-attr">name</span>: string;
  }
} | {
  <span class="hljs-attr">type</span>: <span class="hljs-title class_">AuthActionEnum</span>.<span class="hljs-property">LOG_OUT</span>,
  <span class="hljs-attr">payload</span>: <span class="hljs-literal">null</span>,
}
</code></pre>
<p>authReducer.ts ë‚´ë¶€ì—ì„œëŠ” ì¸ì¦ ê´€ë ¨ ì•¡ì…˜ì„ í•´ë‹¹ ìƒíƒœë¡œ ë§¤í•‘í•˜ëŠ” ë¦¬ë“€ì„œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/store/auth/authReducer.ts */</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Reducer</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthAction</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./authActions"</span>;

<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">AuthState</span> {
  <span class="hljs-attr">isLoggedIn</span>: boolean;
  authToken?: string;
  userId?: string;
  name?: string;
  email?: string;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">defaultAuthState</span>: <span class="hljs-title class_">AuthState</span> = {
  <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">false</span>,
};

<span class="hljs-keyword">const</span> <span class="hljs-attr">authReducer</span>: <span class="hljs-title class_">Reducer</span>&#x3C;<span class="hljs-title class_">AuthState</span>, <span class="hljs-title class_">AuthAction</span>> = <span class="hljs-function">(<span class="hljs-params">state, action</span>) =></span> {
  <span class="hljs-comment">// ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì¸ì¦ë˜ë©´</span>
  <span class="hljs-keyword">if</span> (action.<span class="hljs-property">type</span> === <span class="hljs-string">"LOG_IN"</span>) {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">"user"</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(action.<span class="hljs-property">payload</span>));
    <span class="hljs-keyword">return</span> {
      ...state,
      <span class="hljs-attr">isLoggedIn</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">authToken</span>: action.<span class="hljs-property">payload</span>.<span class="hljs-property">authToken</span>,
      <span class="hljs-attr">userId</span>: action.<span class="hljs-property">payload</span>.<span class="hljs-property">userId</span>,
      <span class="hljs-attr">name</span>: action.<span class="hljs-property">payload</span>.<span class="hljs-property">name</span>,
      <span class="hljs-attr">email</span>: action.<span class="hljs-property">payload</span>.<span class="hljs-property">email</span>,
    };
  }

  <span class="hljs-comment">// ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ</span>
  <span class="hljs-keyword">if</span> (action.<span class="hljs-property">type</span> === <span class="hljs-string">"LOG_OUT"</span>) {
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">"user"</span>);
    <span class="hljs-keyword">return</span> defaultAuthState;
  }

  <span class="hljs-keyword">return</span> defaultAuthState;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> authReducer;
</code></pre>
<p>ê¸°ë³¸ ìƒíƒœëŠ” falseë¡œ ì„¤ì •ëœ í•˜ë‚˜ì˜ í•„ë“œì¸ isLoggedInìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì¸ì¦ì„ í•œ ë²ˆí•˜ë©´ ë¦¬ë“€ì„œëŠ” LOG_IN ì•¡ì…˜ì„ ì²˜ë¦¬í•˜ê³  ì‚¬ìš©ì ê´€ë ¨ ì •ë³´ë¥¼ localStorageì— ìœ ì§€í•˜ë©° ìƒˆ ì¸ì¦ ìƒíƒœë¥¼ ë°˜í™˜í•˜ì—¬ ë™ì¼í•œ ì •ë³´ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì •ë³´ë¥¼ ê³„ì† ìœ ì§€í•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë‚˜ê°€ê³  ë‚˜ì¤‘ì— ë°©ë¬¸í•  ë•Œ ì¸ì¦ ìƒíƒœê°€ ìœ ì§€ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. LOG_OUT ì•¡ì…˜ì€ ë¦¬ë“€ì„œì— ì˜í•´ ì²˜ë¦¬ë˜ì–´ ëª¨ë“  ìƒíƒœ ë° ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ê°€ ê¸°ë³¸ ê°’ìœ¼ë¡œ ì¬ì„¤ì •ë©ë‹ˆë‹¤.</p>
<p>ì´ì œ ì•¡ì…˜ê³¼ ë¦¬ë“€ì„œê°€ ì •ì˜ë˜ì—ˆìœ¼ë¯€ë¡œ AuthContextProvider.tsxì—ì„œ ì „ì²´ ì‘ìš© í”„ë¡œê·¸ë¨ì— ì¸ì¦ ìƒíƒœë¥¼ ì œê³µí•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ì œê³µì êµ¬ì„± ìš”ì†Œë¥¼ ë§Œë“­ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/store/auth/AuthContextProvider.tsx */</span>

<span class="hljs-comment">// ì „ì—­ ê°€ì ¸ì˜¤ê¸°</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { createContext, useReducer, useCallback, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;

<span class="hljs-comment">// í”„ë¡œì íŠ¸ ì¢…ì†ì„±</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthActionEnum</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./authActions"</span>;
<span class="hljs-keyword">import</span> authReducer, { <span class="hljs-title class_">AuthState</span>, defaultAuthState } <span class="hljs-keyword">from</span> <span class="hljs-string">"./authReducer"</span>;

type <span class="hljs-title class_">AuthProviderProps</span> = {
  <span class="hljs-attr">children</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactElement</span>,
};

<span class="hljs-keyword">export</span> type <span class="hljs-title class_">UserData</span> = {
  <span class="hljs-attr">authToken</span>: string,
  <span class="hljs-attr">userId</span>: string,
  <span class="hljs-attr">name</span>: string,
  <span class="hljs-attr">email</span>: string,
};

<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">AuthContext</span> {
  <span class="hljs-attr">authState</span>: <span class="hljs-title class_">AuthState</span>;
  <span class="hljs-attr">globalLogInDispatch</span>: <span class="hljs-function">(<span class="hljs-params">props: UserData</span>) =></span> <span class="hljs-keyword">void</span>;
  <span class="hljs-attr">globalLogOutDispatch</span>: <span class="hljs-function">() =></span> <span class="hljs-keyword">void</span>;
}

<span class="hljs-comment">// Auth ì»¨í…ìŠ¤íŠ¸</span>
<span class="hljs-keyword">const</span> authCtx =
  createContext &#x3C;
  <span class="hljs-title class_">AuthContext</span> >
  {
    <span class="hljs-attr">authState</span>: defaultAuthState,
    <span class="hljs-attr">globalLogInDispatch</span>: <span class="hljs-function">() =></span> {},
    <span class="hljs-attr">globalLogOutDispatch</span>: <span class="hljs-function">() =></span> {},
  };

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">AuthContextProvider</span> = (<span class="hljs-params">props: AuthProviderProps</span>) => {
  <span class="hljs-keyword">const</span> { children } = props;

  <span class="hljs-keyword">const</span> [authState, authDispatch] = <span class="hljs-title function_">useReducer</span>(authReducer, defaultAuthState);
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();

  <span class="hljs-comment">// ì‚¬ìš©ì ì„¸ë¶€ ì •ë³´ê°€ ì§€ì†ë˜ëŠ”ì§€ í™•ì¸, ëŒ€ë¶€ë¶„ ë¸Œë¼ìš°ì € ìƒˆë¡œ ê³ ì¹¨ì— ëŒ€ì‘</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">"user"</span>);
    <span class="hljs-keyword">if</span> (user) {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">userData</span>: <span class="hljs-title class_">UserData</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(user);
      <span class="hljs-title function_">authDispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">AuthActionEnum</span>.<span class="hljs-property">LOG_IN</span>, <span class="hljs-attr">payload</span>: userData });
    }
  }, []);

  <span class="hljs-keyword">const</span> globalLogInDispatch = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-function">(<span class="hljs-params">props: UserData</span>) =></span> {
      <span class="hljs-keyword">const</span> { authToken, email, name, userId } = props;
      <span class="hljs-title function_">authDispatch</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">AuthActionEnum</span>.<span class="hljs-property">LOG_IN</span>,
        <span class="hljs-attr">payload</span>: {
          authToken,
          userId,
          name,
          email,
        },
      });
      <span class="hljs-title function_">navigate</span>(<span class="hljs-string">"/resource"</span>);
    },
    [navigate]
  );

  <span class="hljs-keyword">const</span> globalLogOutDispatch = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-title function_">authDispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">AuthActionEnum</span>.<span class="hljs-property">LOG_OUT</span>, <span class="hljs-attr">payload</span>: <span class="hljs-literal">null</span> });
    <span class="hljs-title function_">navigate</span>(<span class="hljs-string">"/user/login"</span>);
  }, [navigate]);

  <span class="hljs-comment">// í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•  ì»¨í…ìŠ¤íŠ¸ ê°’</span>
  <span class="hljs-keyword">const</span> ctx = {
    authState,
    globalLogInDispatch,
    globalLogOutDispatch,
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">authCtx.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{ctx}</span>></span>{children}<span class="hljs-tag">&#x3C;/<span class="hljs-name">authCtx.Provider</span>></span></span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> authCtx;
</code></pre>
<p>AuthContextProvider ì»´í¬ë„ŒíŠ¸ëŠ” authState ë° ê´€ë ¨ ë””ìŠ¤íŒ¨ì¹˜ ë©”ì„œë“œë¥¼ authCtx ì»¨í…ìŠ¤íŠ¸ ë‚´ì˜ ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì œê³µí•˜ëŠ” Higher Order Component (HOC)ì…ë‹ˆë‹¤. globalLogInDispatchì™€ globalLogOutDispatch í•¨ìˆ˜ëŠ” ê°ê° LOG_IN ë° LOG_OUT ì•¡ì…˜ì„ ë¦¬ë“€ì„œì— ë””ìŠ¤íŒ¨ì¹˜í•˜ì—¬ ì¸ì¦ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì¸ì¦ ì•¡ì…˜ì´ ë””ìŠ¤íŒ¨ì¹˜ë  ë•Œ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™í•˜ê¸° ìœ„í•´ react-router-domë„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, ì‚¬ìš©ìê°€ ì´ì „ì— ë¡œê·¸ì¸í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  í•„ìš”í•  ê²½ìš° localStorageì— ì €ì¥ëœ ì •ë³´ë¥¼ ì°¾ì•„ LOG_IN ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ëŠ” useEffect í›…ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.</p>
<p>ë§ˆì§€ë§‰ ë‹¨ê³„ëŠ” index.tsxì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ AuthContextProviderë¡œ ë˜í•‘í•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* index.tsx */</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./index.css'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthContextProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store/auth/AuthContextProvider'</span>;

<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>
);
root.<span class="hljs-title function_">render</span>(
  <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">React.StrictMode</span>></span>
    <span class="hljs-tag">&#x3C;<span class="hljs-name">BrowserRouter</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">AuthContextProvider</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">App</span> /></span>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">AuthContextProvider</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">BrowserRouter</span>></span>
  <span class="hljs-tag">&#x3C;/<span class="hljs-name">React.StrictMode</span>></span></span>
);
</code></pre>
<h2>2.3 ì„œë²„ì™€ í†µì‹ í•˜ê¸°</h2>
<p>ì¸ì¦ ìƒíƒœ ê´€ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ ì´ì œ ë‚´ë¶€ ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ê²€ìƒ‰í•´ì•¼ í•˜ëŠ” ì„œë²„ì™€ì˜ í†µì‹ ì— ì§‘ì¤‘í•´ ë´…ì‹œë‹¤. ì´ë¥¼ ìœ„í•´ React ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„œë²„ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ëŠ” ë…¼ë¦¬ë¥¼ ëª¨ë‘ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ useApië¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ui/src ë‚´ë¶€ì— ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆëŠ” ê´€ë ¨ íŒŒì¼ì´ ìˆëŠ” hooks í´ë”ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js">cd ui/src &#x26;&#x26; mkdir hooks &#x26;&#x26; cd hooks &#x26;&#x26;\
mkdir api &#x26;&#x26; cd api &#x26;&#x26;\
touch apiData.<span class="hljs-property">ts</span> useApi.<span class="hljs-property">ts</span>
</code></pre>
<p>apiData.ts íŒŒì¼ì—ëŠ” ì‚¬ìš©ì ë¡œê·¸ì¸ ë° ë“±ë¡ ì´ë²¤íŠ¸ì— ëŒ€í•œ ì„œë²„ì—ì„œ ë°˜í™˜ë  ë°ì´í„° êµ¬ì¡°ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/hooks/api/apiData.ts */</span>

<span class="hljs-keyword">export</span> type <span class="hljs-title class_">AuthData</span> = {
  <span class="hljs-attr">success</span>: boolean,
  <span class="hljs-attr">user</span>: {
    <span class="hljs-attr">user_id</span>: string,
    <span class="hljs-attr">email</span>: string,
    <span class="hljs-attr">name</span>: string,
    <span class="hljs-attr">auth_token</span>: string,
  },
};
</code></pre>
<p>useApi.ts íŒŒì¼ì—ëŠ” ì„œë²„ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ í›…ì´ ë“¤ì–´ ìˆì–´ìš”:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/hooks/api/useApi.ts */</span>

<span class="hljs-comment">// ì „ì—­ ì˜ì¡´ì„±</span>
<span class="hljs-keyword">import</span> { useState, useCallback, useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-comment">// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AuthContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../../store/auth/AuthContextProvider"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">BASE_URL</span> = <span class="hljs-string">"http://localhost:8000"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">useApi</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> { authState, globalLogOutDispatch } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">AuthContext</span>);

  <span class="hljs-keyword">const</span> request = <span class="hljs-title function_">useCallback</span>(
    <span class="hljs-keyword">async</span> (
      <span class="hljs-attr">endpoint</span>: string,
      <span class="hljs-attr">params</span>: { [<span class="hljs-attr">key</span>: string]: any },
      <span class="hljs-attr">handleSuccessResponse</span>: <span class="hljs-function">(<span class="hljs-params">data: any</span>) =></span> <span class="hljs-keyword">void</span>,
      handleErrorResponse?: <span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =></span> <span class="hljs-keyword">void</span>
    ) => {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-title function_">setError</span>(<span class="hljs-literal">null</span>);

      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì¤‘ì´ë©´ ìš”ì²­ í—¤ë”ì— auth í† í° ì‚½ì…</span>
        <span class="hljs-keyword">if</span> (authState.<span class="hljs-property">isLoggedIn</span>) {
          params.<span class="hljs-property">headers</span>[<span class="hljs-string">"x-access-token"</span>] = authState.<span class="hljs-property">authToken</span>;
        }

        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-variable constant_">BASE_URL</span> + endpoint, { ...params });
        <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
          <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>(); <span class="hljs-comment">// í•­ìƒ json ì‘ë‹µì„ ê°€ì •</span>
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(data.<span class="hljs-property">error</span>);
        }
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>(); <span class="hljs-comment">// í•­ìƒ json ì‘ë‹µì„ ê°€ì •</span>

        <span class="hljs-comment">// ì‘ë‹µì´ ì •ìƒì ì´ê³  ì˜¤ë¥˜ê°€ ì—†ëŠ” ê²½ìš°, ì„±ê³µ ì‘ë‹µ ì²˜ë¦¬</span>
        handleSuccessResponse &#x26;&#x26; (<span class="hljs-keyword">await</span> <span class="hljs-title function_">handleSuccessResponse</span>(data));
      } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: any) {
        <span class="hljs-comment">// <span class="hljs-doctag">NOTE:</span> ê¶Œí•œì´ ì—†ëŠ” ì˜¤ë¥˜ì¸ ê²½ìš° ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ</span>
        <span class="hljs-keyword">if</span> (error &#x26;&#x26; error.<span class="hljs-property">message</span> &#x26;&#x26; error.<span class="hljs-property">message</span> === <span class="hljs-string">"Unauthorized"</span>) {
          <span class="hljs-title function_">globalLogOutDispatch</span>();
        }

        <span class="hljs-comment">// ì§€ì •ëœ ì˜¤ë¥˜ ì²˜ë¦¬</span>
        <span class="hljs-keyword">if</span> (handleErrorResponse) {
          <span class="hljs-title function_">handleErrorResponse</span>(error.<span class="hljs-property">message</span> || error.<span class="hljs-property">error</span> || error);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">setError</span>(error.<span class="hljs-property">message</span> || error.<span class="hljs-property">error</span> || error);
        }
      }

      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
    },

    [authState.<span class="hljs-property">isLoggedIn</span>, authState.<span class="hljs-property">authToken</span>, globalLogOutDispatch]
  );

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">loading</span>: loading,
    <span class="hljs-attr">error</span>: error,
    <span class="hljs-attr">request</span>: request,
    <span class="hljs-attr">setError</span>: setError,
  };
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useApi;
</code></pre>
<p>useApi í›…ì€ request í•¨ìˆ˜ ë‚´ì—ì„œ fetch ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì„ ë‹´ë‹¹í•˜ê³  ìˆì–´ìš”. ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í–ˆëŠ”ì§€ ë¨¼ì € í™•ì¸í•˜ê³ , ì‚¬ìš©ìê°€ ì¸ì¦ë˜ë©´ ìš”ì²­ í—¤ë” x-access-tokenì— authTokenì„ ì²¨ë¶€í•©ë‹ˆë‹¤. ì´ í† í°ì€ ìš”ì²­ê³¼ í•¨ê»˜ ì „ì†¡ë˜ì–´ ì„œë²„ê°€ ì‚¬ìš©ìê°€ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë˜í•œ, ì»¤ìŠ¤í…€ í›…ì€ ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ ë° ì˜¤ë¥˜ ì²˜ë¦¬ì˜ ìƒíƒœ ê´€ë¦¬ë„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì„œë²„ì—ì„œ ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì•˜ë‹¤ë©´ handleSuccessResponse ì½œë°±ì„ í†µí•´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , ì‘ë‹µì´ ì‹¤íŒ¨í•œ ê²½ìš° handleErrorResponse ì½œë°±ì„ í†µí•´ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì‘ë‹µ ì˜¤ë¥˜ì— "Unauthorized" ë©”ì‹œì§€ê°€ ìˆìœ¼ë©´ globalLogOutDispatch í•¨ìˆ˜ë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.</p>
<h2>2.4 ì¸ì¦ êµ¬ì„± ìš”ì†Œ</h2>
<p>ìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì™„ë£Œí–ˆê³ , ì´ì œ í™”ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‘ì—…í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë¨¼ì € React ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤:</p>
<pre><code class="hljs language-js">cd ui/src &#x26;&#x26; mkdir components &#x26;&#x26;\
cd components &#x26;&#x26; mkdir auth &#x26;&#x26;\
touch <span class="hljs-title class_">Auth</span>.<span class="hljs-property">tsx</span> <span class="hljs-title class_">LogInForm</span>.<span class="hljs-property">tsx</span> <span class="hljs-title class_">RegisterForm</span>.<span class="hljs-property">tsx</span> validations.<span class="hljs-property">ts</span>
</code></pre>
<p>ë¨¼ì €, LogInForm.tsxì™€ RegisterForm.tsxì—ì„œ ê°ê° ë¡œê·¸ì¸ ë° ì‚¬ìš©ì ë“±ë¡ì„ ìœ„í•œ ì–‘ì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/components/auth/LoginForm.tsx */</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FormEventHandler</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">"./Auth.module.css"</span>;

type <span class="hljs-title class_">Props</span> = {
  <span class="hljs-attr">onSubmit</span>: <span class="hljs-title class_">FormEventHandler</span>&#x3C;<span class="hljs-title class_">HTMLFormElement</span>>,
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">LoginForm</span> = (<span class="hljs-params">props: Props</span>) => {
  <span class="hljs-keyword">const</span> { onSubmit } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{onSubmit}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Form}</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Input}</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"email"</span>></span>ì´ë©”ì¼<span class="hljs-tag">&#x3C;/<span class="hljs-name">label</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">required</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ì´ë©”ì¼ ì£¼ì†Œ"</span> /></span>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Input}</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"password"</span>></span>ë¹„ë°€ë²ˆí˜¸<span class="hljs-tag">&#x3C;/<span class="hljs-name">label</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">required</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ë¹„ë°€ë²ˆí˜¸"</span> /></span>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>></span>ì œì¶œ<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Link</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Link}</span> <span class="hljs-attr">to</span>=<span class="hljs-string">{</span>"/<span class="hljs-attr">user</span>/<span class="hljs-attr">register</span>"}></span>
        ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? ê°€ì…í•˜ê¸°
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">Link</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">form</span>></span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">LoginForm</span>;
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/components/auth/RegisterForm.tsx */</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">FormEventHandler</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">"./Auth.module.css"</span>;

type <span class="hljs-title class_">Props</span> = {
  <span class="hljs-attr">onSubmit</span>: <span class="hljs-title class_">FormEventHandler</span>&#x3C;<span class="hljs-title class_">HTMLFormElement</span>>,
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">RegisterForm</span> = (<span class="hljs-params">props: Props</span>) => {
  <span class="hljs-keyword">const</span> { onSubmit } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{onSubmit}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Form}</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Input}</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"name"</span>></span>ì´ë¦„<span class="hljs-tag">&#x3C;/<span class="hljs-name">label</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">required</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ì „ì²´ ì´ë¦„"</span> /></span>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Input}</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"email"</span>></span>ì´ë©”ì¼<span class="hljs-tag">&#x3C;/<span class="hljs-name">label</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">required</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ì´ë©”ì¼ ì£¼ì†Œ"</span> /></span>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Input}</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">"password"</span>></span>ë¹„ë°€ë²ˆí˜¸<span class="hljs-tag">&#x3C;/<span class="hljs-name">label</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">required</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ë¹„ë°€ë²ˆí˜¸"</span> /></span>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>></span>ì œì¶œ<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Link</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Link}</span> <span class="hljs-attr">to</span>=<span class="hljs-string">{</span>"/<span class="hljs-attr">user</span>/<span class="hljs-attr">login</span>"}></span>
        ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸í•˜ê¸°
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">Link</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">form</span>></span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">RegisterForm</span>;
</code></pre>
<p>ë‘ ì–‘ì‹ì€ ê°ê° ì´ë¦„, ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ ì†ì„±ì„ í¬í•¨í•œ í¼ ì œì¶œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ì½œë°± í”„ë¡­ì¸ onSubmitì„ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.</p>
<p>ê·¸ ë‹¤ìŒìœ¼ë¡œ, Auth.tsxì—ì„œ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ë‚´ì˜ ë„¤ë¹„ê²Œì´ì…˜ ê²½ë¡œì— ë”°ë¼ LogInForm ë˜ëŠ” RegisterForm êµ¬ì„± ìš”ì†Œ ì¤‘ í•˜ë‚˜ë¥¼ í‘œì‹œí•  ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/components/auth/Auth.tsx */</span>

<span class="hljs-comment">// ì „ì—­ imports</span>
<span class="hljs-keyword">import</span> { useEffect, useState, useContext, <span class="hljs-title class_">FormEventHandler</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-comment">// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±</span>
<span class="hljs-keyword">import</span> useApi <span class="hljs-keyword">from</span> <span class="hljs-string">"../../hooks/api/useApi"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AuthContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"../../store/auth/AuthContextProvider"</span>;
<span class="hljs-keyword">import</span> { validatePasswordLength, validateEmailFormat } <span class="hljs-keyword">from</span> <span class="hljs-string">"./validations"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthData</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../../hooks/api/apiData"</span>;
<span class="hljs-keyword">import</span> { useLocation } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">LoginForm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./LoginForm"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">RegisterForm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./RegisterForm"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Auth</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">const</span> [authData, setAuthData] = useState&#x3C;<span class="hljs-title class_">AuthData</span>>();
  <span class="hljs-keyword">const</span> { request, setError } = <span class="hljs-title function_">useApi</span>();
  <span class="hljs-keyword">const</span> { globalLogInDispatch } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">AuthContext</span>);
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();
  <span class="hljs-keyword">const</span> currentPathArray = location.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>);
  <span class="hljs-keyword">const</span> isLogin = currentPathArray[currentPathArray.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] === <span class="hljs-string">'login'</span>;

  <span class="hljs-comment">// ë¡œê·¸ì¸ ì‚¬ìš©ìì— ëŒ€í•œ api ì‘ë‹µ ì„±ê³µ ì‹œ, ì „ì—­ auth LOG_IN ì´ë²¤íŠ¸ë¥¼ ë””ìŠ¤íŒ¨ì¹˜í•©ë‹ˆë‹¤</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-keyword">if</span> (authData &#x26;&#x26; <span class="hljs-string">"success"</span> <span class="hljs-keyword">in</span> authData) {
      <span class="hljs-title function_">globalLogInDispatch</span>({
        <span class="hljs-attr">authToken</span>: authData.<span class="hljs-property">user</span>.<span class="hljs-property">auth_token</span>,
        <span class="hljs-attr">userId</span>: authData.<span class="hljs-property">user</span>.<span class="hljs-property">user_id</span>,
        <span class="hljs-attr">name</span>: authData.<span class="hljs-property">user</span>.<span class="hljs-property">name</span>,
        <span class="hljs-attr">email</span>: authData.<span class="hljs-property">user</span>.<span class="hljs-property">email</span>,
      });
    }
  }, [authData, globalLogInDispatch]);

  <span class="hljs-keyword">const</span> <span class="hljs-attr">authHandler</span>: <span class="hljs-title class_">FormEventHandler</span>&#x3C;<span class="hljs-title class_">HTMLFormElement</span>> = <span class="hljs-keyword">async</span> (event) => {
    event.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>(event.<span class="hljs-property">currentTarget</span>);
    <span class="hljs-comment">// ë¨¼ì € ìœ íš¨ì„± ê²€ì‚¬!</span>
    <span class="hljs-keyword">const</span> userEmail = data.<span class="hljs-title function_">get</span>(<span class="hljs-string">"email"</span>);
    <span class="hljs-keyword">const</span> userPassword = data.<span class="hljs-title function_">get</span>(<span class="hljs-string">"password"</span>);
    <span class="hljs-keyword">const</span> userName = data.<span class="hljs-title function_">get</span>(<span class="hljs-string">"name"</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">if</span> (
        !<span class="hljs-title function_">validateEmailFormat</span>(userEmail?.<span class="hljs-title function_">toString</span>() || <span class="hljs-string">""</span>) ||
        !<span class="hljs-title function_">validatePasswordLength</span>(userPassword?.<span class="hljs-title function_">toString</span>() || <span class="hljs-string">""</span>)
      ) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ì˜ëª»ëœ ìê²© ì¦ëª… í˜•ì‹ì…ë‹ˆë‹¤!"</span>);
      }
      <span class="hljs-keyword">const</span> params = {
        <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
        },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
          <span class="hljs-attr">email</span>: userEmail,
          <span class="hljs-attr">password</span>: userPassword,
          <span class="hljs-attr">name</span>: userName,
        }),
      };

      <span class="hljs-keyword">const</span> endpoint = <span class="hljs-string">`/user/<span class="hljs-subst">${isLogin ? <span class="hljs-string">'login'</span> : <span class="hljs-string">'register'</span>}</span>`</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>(endpoint, params, setAuthData);
    } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: any) {
      <span class="hljs-title function_">setError</span>(error.<span class="hljs-property">message</span> || error);
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">h2</span>></span>{isLogin ? 'ë¡œê·¸ì¸' : 'ê°€ì…í•˜ê¸°'}<span class="hljs-tag">&#x3C;/<span class="hljs-name">h2</span>></span>
      {
        isLogin
          ? <span class="hljs-tag">&#x3C;<span class="hljs-name">LoginForm</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{authHandler}</span> /></span>
          : <span class="hljs-tag">&#x3C;<span class="hljs-name">RegisterForm</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{authHandler}</span> /></span>
      }
    <span class="hljs-tag">&#x3C;/></span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Auth</span>;
</code></pre>
<p>ìš°ë¦¬ëŠ” react-router-domì—ì„œ ì œê³µí•˜ëŠ” useLocationì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì–´ë–¤ ê²½ë¡œì— ìˆëŠ”ì§€ ì¶”ì¶œí•©ë‹ˆë‹¤. ê²½ë¡œì— ë”°ë¼, LoginForm ë˜ëŠ” RegisterFormì„ í‘œì‹œí•˜ë„ë¡ ì„ íƒí•©ë‹ˆë‹¤. ê° í¼ì— ëŒ€í•œ onSubmit í•¸ë“¤ëŸ¬ëŠ” authHandlerì— ì •ì˜ëœ ëŒ€ë¡œ ì‘ë™í•˜ë©°, ì´ í•¸ë“¤ëŸ¬ëŠ” ì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì—ì„œ ëª¨ë“  ì…ë ¥ í¼ ì†ì„±ì„ ì¶”ì¶œí•˜ê³  ì„œë²„ì—ì„œ ì‚¬ìš©ì/ë¡œê·¸ì¸ ë˜ëŠ” ì‚¬ìš©ì/ë“±ë¡ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ê¸° ì „ì— ì´ë¥¼ ìœ íš¨ì„± ê²€ì‚¬í•©ë‹ˆë‹¤.</p>
<p>ì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ì€ ê¸°ë³¸ì ì´ë©° ì•„ë˜ validation.tsì—ì„œ ë³´ì—¬ì§„ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/components/auth/validations.ts */</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">validatePasswordLength</span> = (<span class="hljs-params">password: string</span>) => {
  <span class="hljs-keyword">return</span> !!password &#x26;&#x26; password.<span class="hljs-property">length</span> > <span class="hljs-number">7</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateEmailFormat</span> = (<span class="hljs-params">email: string</span>) => {
  <span class="hljs-keyword">const</span> re =
    <span class="hljs-regexp">/^(([^&#x3C;>()[\]\\.,;:\s@"]+(\.[^&#x3C;>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/</span>;
  <span class="hljs-keyword">return</span> !!email &#x26;&#x26; re.<span class="hljs-title function_">test</span>(<span class="hljs-title class_">String</span>(email).<span class="hljs-title function_">toLowerCase</span>());
};
</code></pre>
<h2>2.5 Resource component</h2>
<p>ë§ˆì§€ë§‰ìœ¼ë¡œ ë§Œë“¤ ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ìš”ì†ŒëŠ” ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” ë”ë¯¸ í˜ì´ì§€ì…ë‹ˆë‹¤. ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:</p>
<pre><code class="hljs language-js">cd ui/src/components &#x26;&#x26;\
mkdir resource &#x26;&#x26;\
cd resource &#x26;&#x26;\
touch <span class="hljs-title class_">Resource</span>.<span class="hljs-property">tsx</span>
</code></pre>
<p>Resource.tsx íŒŒì¼ ë‚´ë¶€ì— ì•„ë˜ì™€ ê°™ì´ êµ¬ì„± ìš”ì†Œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/components/resource/Resource.tsx */</span>

<span class="hljs-keyword">import</span> { useCallback, useContext, useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> useApi <span class="hljs-keyword">from</span> <span class="hljs-string">"../../hooks/api/useApi"</span>;
<span class="hljs-keyword">import</span> authCtx <span class="hljs-keyword">from</span> <span class="hljs-string">"../../store/auth/AuthContextProvider"</span>;
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">"./Resource.module.css"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Resource</span> = (<span class="hljs-params"></span>) => {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>();
  <span class="hljs-keyword">const</span> { request, setError } = <span class="hljs-title function_">useApi</span>();
  <span class="hljs-keyword">const</span> { globalLogOutDispatch } = <span class="hljs-title function_">useContext</span>(authCtx);

  <span class="hljs-keyword">const</span> fetchData = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () => {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> params = {
        <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
        },
      };
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>(<span class="hljs-string">"/resource"</span>, params, <span class="hljs-function">(<span class="hljs-params">result</span>) =></span> {
        <span class="hljs-title function_">setData</span>(result.<span class="hljs-property">data</span>);
      });
    } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: any) {
      <span class="hljs-title function_">setError</span>(error.<span class="hljs-property">message</span> || error);
    }
  }, [request, setError]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =></span> {
    <span class="hljs-title function_">fetchData</span>();
  }, [fetchData]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.Resource}</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">h1</span>></span>{data}<span class="hljs-tag">&#x3C;/<span class="hljs-name">h1</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{globalLogOutDispatch}</span>></span>ë¡œê·¸ì•„ì›ƒ<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Resource</span>;
</code></pre>
<p>ì´ ì»´í¬ë„ŒíŠ¸ëŠ” ê°„ë‹¨í•˜ë©° useEffect í›…ì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì˜ /resource ì—”ë“œí¬ì¸íŠ¸ë¡œ í˜¸ì¶œí•˜ëŠ” ë¡œì§ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ í˜¸ì¶œì—ëŠ” pre-existing auth í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤. ë°˜í™˜ëœ ë°ì´í„°ëŠ” í˜ì´ì§€ì— í‘œì‹œë˜ë©° ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ auth ì»¨í…ìŠ¤íŠ¸ì—ì„œ globalLogOutDispatchë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì „ì—­ auth ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.</p>
<h2>2.6 ëª¨ë“  ê²ƒì„ ì—°ê²°í•˜ê¸°</h2>
<p>ì¸í„°í˜ì´ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ í”„ë ˆì  í…Œì´ì…˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í–ˆìœ¼ë‹ˆ, App.tsxì—ì„œ react-router-domì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œ ë¼ìš°íŒ…ì„ í†µí•´ ëª¨ë“  ê²ƒì„ ì—°ê²°í•´ë³´ê² ìŠµë‹ˆë‹¤ :</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/* ui/src/App.tsx */</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">"./App.css"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Route</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Navigate</span>, useLocation } <span class="hljs-keyword">from</span> <span class="hljs-string">"react-router-dom"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AuthContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./store/auth/AuthContextProvider"</span>;
<span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Resource</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./components/resource/Resource"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Auth</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./components/auth/Auth"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">const</span> { authState } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">AuthContext</span>);
  <span class="hljs-keyword">const</span> location = <span class="hljs-title function_">useLocation</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">Routes</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">{authState.isLoggedIn</span> ? <span class="hljs-attr">location.pathname</span> <span class="hljs-attr">:</span> "/<span class="hljs-attr">user</span>/<span class="hljs-attr">login</span>"} /></span>} />
        {!authState.isLoggedIn &#x26;&#x26; (
          <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"user"</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"register"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Auth</span> /></span>} />
            <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"login"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Auth</span> /></span>} />
          <span class="hljs-tag">&#x3C;/<span class="hljs-name">Route</span>></span>
        )}
        {authState.isLoggedIn &#x26;&#x26; <span class="hljs-tag">&#x3C;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"resource"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&#x3C;<span class="hljs-attr">Resource</span> /></span>} />}
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">Routes</span>></span>
    <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<p>App.tsx íŒŒì¼ ë‚´ì—ì„œëŠ” ì§€ê¸ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¼ìš°íŒ…ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. /user/register, /user/login ë° /resourceë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê³µëœ ì „ì—­ ì¸ì¦ ìƒíƒœê°€ ì‚¬ìš©ìê°€ ì¸ì¦ëœ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ë©´ ì‚¬ìš©ìì—ê²Œ /resource ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ì—¬ í•´ë‹¹ ì„œë²„ì˜ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™í•˜ì—¬ 'protected' ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.</p>
<h1>ê²°ë¡ </h1>
<p>ì´ ê¸€ì—ì„œëŠ” í’€ìŠ¤íƒ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ëŠ” ë° í•„ìš”í•œ ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¸ì¦ ë°©ë²•ì€ í† í° ê¸°ë°˜ ë°©ì‹ìœ¼ë¡œ, ì´ëŠ” ì´ íŠœí† ë¦¬ì–¼ ì‹œë¦¬ì¦ˆì˜ ì²« ë²ˆì§¸ ê¸€ì—ì„œ ë…¼ì˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê° êµ¬ì„± ìš”ì†Œì— ëŒ€í•´ ë§ì€ ì„¸ë¶€ ì •ë³´ë¥¼ ë‹¤ë¤˜ì§€ë§Œ, ì•„ì§ í•  ì¼ì´ ë§ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
<ul>
<li>í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìŠ¤íƒ€ì¼ë§ ê°œì„ , ì´ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ë§ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>í”„ë¡ íŠ¸ì—”ë“œ ë° ë°±ì—”ë“œì—ì„œ ì ì ˆí•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬, SQL ì¸ì ì…˜ ë°©ì§€ ë˜ëŠ” ë°ì´í„° ìœ í˜• ìœ íš¨ì„± ê²€ì‚¬ì™€ ê°™ì€ ì‘ì—….</li>
<li>ì˜ëª»ëœ ìê²© ì¦ëª…ì„ ì œì¶œí–ˆì„ ë•Œ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ì—ëŸ¬ ì²˜ë¦¬.</li>
<li>ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„° ì €ì¥.</li>
<li>AWS ë˜ëŠ” GCPì™€ ê°™ì€ í´ë¼ìš°ë“œ ì œê³µ ì—…ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì»¨í…Œì´ë„ˆí™”í•˜ê³  ë°°í¬.</li>
</ul>
<p>ë‚˜ë¨¸ì§€ëŠ” ë„¤ê°€ ì•Œì•„ì„œ í•´ì£¼ë©´ ë¼! ê·¸ë¦¬ê³  ì–¸ì œë“ ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œì„ í•˜ê±°ë‚˜ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ì œì•ˆì´ ìˆë‹¤ë©´ ëŒ“ê¸€ì„ ë‚¨ê²¨ì¤˜! ì´ íŠœí† ë¦¬ì–¼ì˜ ìµœì¢… ì½”ë“œëŠ” ì—¬ê¸°ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Nodejs, React ë° TypeScriptì—ì„œ ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ë°©ë²• ","description":"","date":"2024-05-12 19:37","slug":"2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2","content":"\n\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png\" /\u003e\n\n# ì†Œê°œ\n\nì´ê²ƒì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œì„ êµ¬í˜„í•˜ëŠ” ë‘ ë¶€ë¶„ íŠœí† ë¦¬ì–¼ì˜ ë‘ ë²ˆì§¸ ê¸°ì‚¬ì…ë‹ˆë‹¤.\n\níŠœí† ë¦¬ì–¼ì˜ ì²« ë²ˆì§¸ ë¶€ë¶„ì€ í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì¸ì¦ ë° ê¶Œí•œì˜ ê°œë…ì„ ì„¤ëª…í•˜ëŠ” ë° ì „ë…ë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ì§ ë³´ì§€ ì•Šì•˜ë‹¤ë©´, ì§„í–‰í•˜ê¸° ì „ì— ì²« ë²ˆì§¸ ë¶€ë¶„ì„ í™•ì¸í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.\n\nê¸°ì´ˆë¥¼ ë‹¤ë£¬ ê¸°ì´ˆë¥¼ ë°”íƒ•ìœ¼ë¡œ, React, Node.js ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ í† í° ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ í•˜ëŠ” í’€ ìŠ¤íƒ ì‹œìŠ¤í…œì„ ë‹¨ê³„ë³„ë¡œ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì˜ ì™„ì „í•œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì´ GitHub ì €ì¥ì†Œì—ì„œ ì°¾ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ì„¹ì…˜ì—ì„œ í”„ë¡œì íŠ¸ êµ¬ì¡°ì— ìµìˆ™í•´ì ¸ ë´…ì‹œë‹¤.\n\n# í”„ë¡œì íŠ¸ êµ¬ì¡°\n\n![í”„ë¡œì íŠ¸ êµ¬ì¡°](/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_1.png)\n\nìœ„ì˜ ê·¸ë¦¼ 1ì—ì„œ ì „ì²´ í’€ ìŠ¤íƒ í”„ë¡œì íŠ¸ êµ¬ì¡°ê°€ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ë° ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI) ë‚´ ê° êµ¬ì„± ìš”ì†Œì˜ ëª©ì ì— ëŒ€í•´ ë…¼ì˜í•´ ë´…ì‹œë‹¤.\n\n## ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤\n\nì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” ë§¤ìš° ê¸°ë³¸ì ì´ë©°, í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´ì˜ Auth ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì´ëŸ¬í•œ ì»´í¬ë„ŒíŠ¸ì™€ ìƒí˜¸ì‘ìš©í•˜ì—¬ ì‚¬ìš©ì ì§€ì • í›„í¬ useApi ë° ApiProvider í´ë˜ìŠ¤ë¥¼ í†µí•´ ì„œë²„ì— ì¸ì¦ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì„œë²„ê°€ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ ìœ íš¨ì„± ê²€ì‚¬í•˜ë©´ ì‘ë‹µ ë‚´ì—ì„œ JWT í† í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ìœ íš¨í•œ ì„œë²„ ì‘ë‹µì‹œ, ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° AuthReducerë¡œ ì‘ì—…ì´ ë””ìŠ¤íŒ¨ì¹˜ë©ë‹ˆë‹¤. ë””ìŠ¤íŒ¨ì¹˜ëœ ì‘ì—…ì€ ê´€ë ¨ AuthStateë¡œ ì¤„ì–´ë“¤ê³ , AuthContextë¥¼ í†µí•´ ì „ì²´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¸í„°í˜ì´ìŠ¤ì— ì œê³µë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” React ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë  ê²ƒì…ë‹ˆë‹¤.\n\n## ì„œë²„\n\nì„œë²„ëŠ” ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ìê²© ì¦ëª… ë°ì´í„°ì™€ í•¨ê»˜ ìš”ì²­ì„ ë°›ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € Cors(Cross-Origin-Resource-Sharing) ê·œì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ê³  ì œì¶œëœ ì…ë ¥ ë°ì´í„°ê°€ ìœ íš¨í•œì§€ë¥¼ ê²€ì¦í•  ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¨ê³„ ì¤‘ í•˜ë‚˜ë¼ë„ í†µê³¼í•˜ì§€ ëª»í•˜ë©´ ì˜¤ë¥˜ ì‘ë‹µì´ ë°˜í™˜ë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ì€ ì‚¬ìš©ì/ê°€ì… routeì—ì„œ ìƒˆë¡œìš´ ì‚¬ìš©ìê°€ ìƒì„±ë˜ê±°ë‚˜ ì‚¬ìš©ì/ë¡œê·¸ì¸ routeì—ì„œ ê¸°ì¡´ ì‚¬ìš©ìê°€ ì¸ì¦ë©ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” InMemoryDataProviderê°€ êµ¬í˜„ë˜ë©° ì‚¬ìš©ì ë°ì´í„°ëŠ” ê°„ë‹¨í•œ ê°ì²´ì— ì €ì¥ë©ë‹ˆë‹¤. ì´ëŠ” íŠœí† ë¦¬ì–¼ì´ ë³µì¡í•´ì§€ì§€ ì•Šë„ë¡ ì˜ë„ëœ ê²ƒì´ë©° ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ì— ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤. DataProviderInterfaceëŠ” ë°ì´í„° ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì¶”ìƒí™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ë©°, ë‚˜ì¤‘ì— ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ ì œê³µìë¡œ ì‰½ê²Œ ì „í™˜í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ê°€ì… ë˜ëŠ” ë¡œê·¸ì¸ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ë©´ ì„œëª…ëœ ì„œë²„ì™€ í•¨ê»˜ ë§Œë£Œ ê°€ëŠ¥í•œ JWT(JSON Web Token)ê°€ ìƒì„±ë˜ì–´ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤. ì´ í† í°, ì¼ë°˜ì ìœ¼ë¡œ ì¸ì¦ í† í°ìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆìœ¼ë©°, ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì—ì„œ /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ë³´í˜¸ëœ ì„œë²„ ì¸¡ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ ìš”ì²­ì— í¬í•¨ë©ë‹ˆë‹¤.\n\n# ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­\n\nì´ íŠœí† ë¦¬ì–¼ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ê¸° ìœ„í•œ ì „ì œ ì¡°ê±´ ëª©ë¡ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n- í•´ë‹¹ íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí•˜ë ¤ë©´ ì»´í“¨í„°ì— Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n- Node Package Manager (NPM)ì€ Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ì„œ Yarnì„ ì„ í˜¸í•˜ë©° í”„ë¡œì íŠ¸ ì¢…ì†ì„± ê´€ë¦¬ì—ëŠ” Yarnì´ ì‚¬ìš©ë  ê²ƒì…ë‹ˆë‹¤.\n- ì›¹ì´ ì‘ë™í•˜ëŠ” ë°©ì‹ì— ëŒ€í•œ ì•Œë§ì€ ì§€ì‹ì´ ìˆì–´ì•¼ í•˜ë©° ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ì‹œìŠ¤í…œì„ êµ¬í˜„í•œ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë³¸ì ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n- ë³¸ ë¬¸ì„œ ì´ì „ì— Node.js, React ë° Typescriptì™€ í•¨ê»˜ ì‘ì—…í•œ ê²½í—˜ì´ ìˆì–´ì•¼ í•˜ì§€ë§Œ, ì½”ë“œ ì•ˆë‚´ë¥¼ ë°›ì„ ì˜ˆì •ì´ë¯€ë¡œ ì‹¬ì¸µì ì¸ ì§€ì‹ì€ ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤.\n\nì, ì†Œê°œëŠ” ì´ì œ ëë‚´ê³  ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬í˜„ìœ¼ë¡œ ë„˜ì–´ê°€ ë´…ì‹œë‹¤. ë©‹ì§€ë„¤ìš”! ğŸ˜\n\n# 1. ì„œë²„ ì„¤ì •\n\n## 1.1 ì˜ì¡´ì„± ì„¤ì¹˜\n\në¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³  ì„œë²„ ì½”ë“œ ê¸°ë°˜ì„ ì„¤ì •í•´ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\nmkdir authentication-and-authorization \u0026\u0026\\\ncd authentication-and-authorization \u0026\u0026\\\nmkdir server \u0026\u0026\\\ncd server \u0026\u0026 mkdir src\n```\n\nì‹œì‘ ì„œë²„ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:\n\n```bash\n/authentication-and-authorization\n  |__ /server\n      |__ /src\n```\n\n/server í´ë” ì•ˆì— ìˆëŠ” í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ë…¸ë“œ í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ì„¸ìš”:\n\n```bash\nnpm init -y\n```\n\nì´ì œ ì„œë²„ í”„ë¡œì íŠ¸ì˜ ì‹œì‘ì ì´ ìˆìœ¼ë‹ˆ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Typescript í”„ë¡œì íŠ¸ë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤:\n\n```js\nyarn add typescript @types/node --dev \u0026\u0026 npx tsc --init\n```\n\nìœ„ ëª…ë ¹ì€ /server í´ë” ì•ˆì— tsconfig.json íŒŒì¼ì„ ìƒì„±í–ˆì„ ê²ë‹ˆë‹¤. í•´ë‹¹ íŒŒì¼ì˜ ë‚´ìš©ì„ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ë³€ê²½í•´ì£¼ì„¸ìš”:\n\n```js\n{\n  \"compilerOptions\": {\n    \"target\": \"es2016\",\n    \"module\": \"commonjs\",\n    \"rootDir\": \"./src\",\n    \"sourceMap\": true,\n    \"outDir\": \"./dist\",\n    \"esModuleInterop\": true,\n    \"forceConsistentCasingInFileNames\": true,\n    \"strict\": true,\n    \"skipLibCheck\": true\n  }\n}\n```\n\nê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ rootDirì…ë‹ˆë‹¤. ì´ ì„¤ì •ì€ TypeScript ì»´íŒŒì¼ëŸ¬ì—ê²Œ .ts íŒŒì¼ì„ ì–´ë””ì—ì„œ ì°¾ì•„ .js íŒŒì¼ë¡œ ë³€í™˜í•˜ê³  outDirë¡œ ì§€ì •ëœ ë””ë ‰í† ë¦¬ì— ë°°ì¹˜í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤.\n\nì´ì œ ì„œë²„ì— í•„ìš”í•œ ì´ˆê¸° íŒ¨í‚¤ì§€ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤:\n\n```js\nyarn add express dotenv cors \u0026\u0026\\\nyarn add @types/express @types/dotenv @types/cors --dev\n```\n\n3rd party íŒ¨í‚¤ì§€ì— ëŒ€í•œ íƒ€ì… ì •ì˜ íŒŒì¼ë„ ê°œë°œ ì¢…ì†ì„±ìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì„¸ìš”.\n\n## 1.2 Express ì„œë²„ ë§Œë“¤ê¸°\n\në¨¼ì € Express ì„œë²„ì˜ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ìƒì„±í•˜ê³  ë³¸ ê°•ì¢Œë¥¼ í†µí•´ ì´ë¥¼ í™•ì¥í•´ ë‚˜ê°ˆ ê²ƒì…ë‹ˆë‹¤. /server/src ë””ë ‰í† ë¦¬ ì•ˆì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ app.tsì™€ index.tsë¥¼ ìƒì„±í•˜ì„¸ìš”:\n\n```js\ntouch app.ts \u0026\u0026 touch index.ts\n```\n\napp.ts ì•ˆì—ëŠ” ì„œë²„ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ê³  ê´€ë ¨ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Express ì•± ê°ì²´ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. app.tsì˜ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤ (ì´ê²ƒì€ í•´ë‹¹ íŒŒì¼ì˜ ìµœì¢… ì½”ë“œê°€ ì•„ë‹™ë‹ˆë‹¤):\n\n```js\n/* app.ts */\n\n// ì „ì—­ ì¢…ì†ì„±\nimport * as dotenv from \"dotenv\";\ndotenv.config(); // ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport routes from \"./routes\";\n\n// express ì•± ì„¤ì •\nimport express from \"express\";\nconst app = express();\n\n// ë¯¸ë“¤ì›¨ì–´\napp.use(express.json());\n\n// ë¼ìš°íŠ¸\napp.use(routes);\n\nexport default app;\n```\n\nindex.tsì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ SERVER_PORT í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì •ëœ í¬íŠ¸ì—ì„œ express ì„œë²„ë¥¼ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n/* index.ts */\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport app from \"./app\";\nconst { SERVER_PORT } = process.env;\n\n// ì•±ì´ listeningì¤‘\napp.listen(SERVER_PORT, () =\u003e {\n  console.info(`ì•±ì´ í¬íŠ¸ ${SERVER_PORT}ì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤`);\n});\n```\n\nGitì—ì„œ ë¬´ì‹œë  ìˆ˜ ìˆëŠ” .env íŒŒì¼ì— í”„ë¡œì íŠ¸ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ê´€í–‰ì…ë‹ˆë‹¤. ì´ íŒŒì¼ì€ /serverí´ë”ì— ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n# .env\n\nSERVER_PORT=8000\n```\n\nìµìŠ¤í”„ë ˆìŠ¤ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ /server í´ë” ë‚´ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```js\nrm -rf ./dist \u0026\u0026 npx tsc \u0026\u0026 cp .env ./dist/.env \u0026\u0026 cd ./dist \u0026\u0026 node index.js\n```\n\nìœ„ ëª…ë ¹ì€ ë¨¼ì € ./dist ë””ë ‰í† ë¦¬ë¥¼ ì œê±°í•˜ê³ , ./src ë””ë ‰í† ë¦¬ì— ìˆëŠ” ëª¨ë“  ì½”ë“œë¥¼ íƒ€ì… í™•ì¸í•˜ê³  ./dist ë””ë ‰í† ë¦¬ ë‚´ì˜ JavaScriptë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì»´íŒŒì¼ ë‹¨ê³„ê°€ ì™„ë£Œë˜ë©´ .env íŒŒì¼ì´ ./dist ë””ë ‰í† ë¦¬ë¡œ ë³µì‚¬ë˜ì–´ ì„œë²„ë¥¼ node index.jsë¡œ ì‹¤í–‰í•  ë•Œ í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ë§¤ë²ˆ ì´ ëª…ë ¹ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì§€ë£¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ server/package.json ë‚´ì— ëª‡ ê°€ì§€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¨ìˆœí™”í•˜ê² ìŠµë‹ˆë‹¤:\n\n\n\n\n\n```json\n{\n  \"name\": \"server\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"build\": \"npx tsc \u0026\u0026 cp .env ./dist/.env\",\n    \"start\": \"rm -rf ./dist \u0026\u0026 yarn build \u0026\u0026 cd ./dist \u0026\u0026 node index.js\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"devDependencies\": {\n    \"@types/cors\": \"^2.8.13\",\n    \"@types/dotenv\": \"^8.2.0\",\n    \"@types/express\": \"^4.17.15\",\n    \"@types/node\": \"^18.11.18\",\n    \"typescript\": \"^4.9.4\"\n  },\n  \"dependencies\": {\n    \"cors\": \"^2.8.5\",\n    \"dotenv\": \"^16.0.3\",\n    \"express\": \"^4.18.2\"\n  }\n}\n```\n\nì´ì œ start ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n```bash\nyarn start\n```\n\n![ì´ë¯¸ì§€](/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_2.png)\n\n\n\n\n\nì„œë²„ í”„ë¡œì íŠ¸ê°€ ì´ì œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ë°±ì—”ë“œ ì¸ì¦ ë° ê¶Œí•œ ì‹œìŠ¤í…œ ì„¤ì • ê³¼ì •ì„ ë³´ì—¬ë“œë¦´ ê²ƒì…ë‹ˆë‹¤.\n\n## 1.3 ì‚¬ìš©ì ë°ì´í„° ì œê³µì\n\në°ì´í„° ì €ì¥ ë ˆì´ì–´ëŠ” ì¸ì¦ ì‹œìŠ¤í…œì— í•„ìˆ˜ì ì…ë‹ˆë‹¤. ìƒˆ ì‚¬ìš©ìê°€ ìƒì„±ë  ë•Œ, ê·¸ë“¤ì˜ ë°ì´í„°ëŠ” ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë¡œê·¸ì¸í•  ë•Œ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•´ì„œ, ì‚¬ìš©ì ë°ì´í„° ì €ì¥ì„ ìœ„í•´ ì¸ë©”ëª¨ë¦¬ ì €ì¥ì„ êµ¬í˜„í•  ê²ƒì´ì§€ë§Œ, ë‚˜ì¤‘ì— ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ êµ¬í˜„ì„ êµì²´í•˜ëŠ” ê²ƒì´ ì‰½ë„ë¡ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\n\n/server/src/data_providers í´ë”ë¥¼ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì¸í„°í˜ì´ìŠ¤ IDataProviderë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.\n\n\n\n```js\n// server/src/data_providers/IDataProvider.ts\n\nexport default interface IDataProvider\u003cResource\u003e {\n  createData: (resource: Resource) =\u003e Promise\u003cvoid\u003e;\n  readData: (args: {id: string, matchField: string}) =\u003e Promise\u003cResource\u003e;\n  updateData: (args: {id: string, resource: Resource}) =\u003e Promise\u003cvoid\u003e;\n  deleteData: (id: string) =\u003e Promise\u003cvoid\u003e;\n}\n```\n\nì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ì¼ë°˜ì ì¸ CRUD ì‘ì—…ì„ ë‚˜íƒ€ë‚´ëŠ” ë„¤ ê°€ì§€ ë©”ì„œë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œë“¤ì€ Resource íƒ€ì…ì˜ ì¼ë°˜ì ì¸ ê°’ì„ ì†Œë¹„í•˜ê±°ë‚˜ ë°˜í™˜í•©ë‹ˆë‹¤. IDataProviderì˜ InMemoryDataProvider êµ¬í˜„ì€ ì•„ë˜ì™€ ê°™ì´ ë³´ì—¬ì§‘ë‹ˆë‹¤.\n\n```js\n// server/src/data_providers/InMemoryDataProvider.ts\n\nimport IDataProvider from \"./IDataProvider\";\n\nexport default class InMemoryDataProvider\u003cResource extends {id: string, data: any}\u003e implements IDataProvider\u003cResource\u003e {\n  private _data: Resource[];\n\n  constructor() {\n    this._data = [];\n  };\n\n  public async createData(resource: Resource) {\n    this._data.push(resource);\n    return;\n  }\n\n  public async readData(args: {id: string, matchField: string}) {\n    return this._data.filter(x =\u003e x.data[args.matchField] === args.id)[0];\n  };\n\n  public async updateData(props: { id: string; resource: Resource; }) {\n    const {id, resource} = props;\n    for(const datum of this._data) {\n      if(datum.id === id) {\n        datum.data = resource.data;\n      }\n    }\n\n    return;\n  };\n\n  public async deleteData(id: string) {\n    this._data = this._data.filter(datum =\u003e datum.id !== id);\n    return;\n  };\n}\n```\n\nInMemoryDataProviderëŠ” IDataProviderì—ì„œ ì •ì˜ëœ ê³µê°œ ë©”ì„œë“œë¥¼ ì—„ê²©í•˜ê²Œ êµ¬í˜„í•©ë‹ˆë‹¤. ì‹¤ì œ ë°ì´í„° ì €ì¥ì†ŒëŠ” InMemoryDataProvider í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— íŠ¹ì •í•œ private \\_data ë°°ì—´ ì†ì„±ì…ë‹ˆë‹¤. InMemoryDataProviderì˜ generic íƒ€ì…ì€ Resourceì´ë©° 'id: string, data: any'ë¥¼ í™•ì¥í•˜ì˜€ê¸° ë•Œë¬¸ì— ì…ë ¥ ìì›ì€ id ë° ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ê¸°íƒ€ ì†ì„±ì„ ì¶”ê°€ë¡œ ê°€ì ¸ì•¼í•©ë‹ˆë‹¤. TypeScriptì˜ ì´ ì¸í„°í˜ì´ìŠ¤ ì¤‘ì‹¬ì  ì ‘ê·¼ì˜ ì¥ì ì€ IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¤€ìˆ˜í•œë‹¤ë©´ ë°ì´í„° ì €ì¥ì†Œë¥¼ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤(ì˜ˆ: SQL ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©).\n\nì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ì—ì„œ CRUD ì‘ì—…ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì—ì„œ ë¶„ë¦¬í•˜ëŠ” ì‚¬ìš©ì ì €ì¥ì†Œë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì €, ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ëœ ì¶”ìƒí™” Repositoryë¥¼ ì‘ì„±í•  ê²ƒì…ë‹ˆë‹¤. ì´ RepositoryëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ ìœ í˜•ì—ì„œ í™•ì¥ë  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\n\n```js\n// server/src/repositories/Repository.ts\n\nimport IDataProvider from \"../data_providers/IDataProvider\";\n\nexport default class Repository\u003cResource\u003e {\n  protected _provider: IDataProvider\u003cResource\u003e;\n\n  constructor(args: {provider: IDataProvider\u003cResource\u003e}) {\n    this._provider = args.provider;\n  };\n\n  public get provider(): IDataProvider\u003cResource\u003e {\n    return this._provider;\n  }\n}\n```\n\nRepositoryì—ì„œ íŒŒìƒëœ í´ë˜ìŠ¤ëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì„ í˜•ì„±í•˜ëŠ” IDataProviderë¥¼ êµ¬í˜„í•˜ëŠ” ì œê³µì(provider)ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  UserRepository í´ë˜ìŠ¤ëŠ” Repositoryë¥¼ í™•ì¥í•˜ê³  ì‚¬ìš©ì ë°ì´í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ìì²´ public ë©”ì„œë“œë¥¼ ê°–ìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ìì„¸íˆ ì‚´í´ë´…ì‹œë‹¤.\n\n```js\n// server/src/repositories/UserRepository.ts\n\nimport IDataProvider from \"../data_providers/IDataProvider\";\nimport Repository from \"./Repository\";\nimport { randomUUID } from \"crypto\";\nimport InMemoryDataProvider from \"../data_providers/InMemoryDataProvider\";\n\ntype UserData = {\n  email: string,\n  name: string,\n  password: string,\n  createdAt: string,\n  updatedAt: string\n};\n\nexport class UserResource {\n  private _id: string;\n\n  constructor(private _data: UserData) {\n    this._id = randomUUID();\n  };\n\n  public get id(): string {\n    return this._id;\n  }\n\n  public get data(): UserData {\n    return this._data;\n  }\n}\n\nexport class UserRepository extends Repository\u003cUserResource\u003e {\n  constructor(args: {provider: IDataProvider\u003cUserResource\u003e}) {\n    super({provider: args.provider});\n  }\n\n  public async createUser(user: UserResource) {\n    await this.provider.createData(user);\n    return;\n  }\n\n  public async getUserBy(args: {id: string, matchField: string}) {\n    return this.provider.readData({id: args.id, matchField: args.matchField});\n  }\n}\n\nconst dataProvider = new InMemoryDataProvider\u003cUserResource\u003e();\nconst userRepository = new UserRepository({provider: dataProvider});\n\nexport default userRepository;\n```\n\nì‚¬ìš©ì ë°ì´í„°ì˜ êµ¬ì¡°ëŠ” UserData ìœ í˜•ì— ì˜í•´ ì •ì˜ë˜ë©°, ë¦¬ì†ŒìŠ¤ êµ¬ì¡°ëŠ” UserResource í´ë˜ìŠ¤ì— ì˜í•´ ì •ì˜ë©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” id ë° data ê³µê°œ ì†ì„±ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, creatUser ë° getUserBy ë©”ì„œë“œëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´ì™€ ìƒí˜¸ ì‘ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³  ì“°ê¸° ìœ„í•´ IDataProviderì˜ êµ¬í˜„ì„ í†µí•´ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\nì°¸ê³ : ìš°ë¦¬ëŠ” InMemoryDataProviderì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ UserRepositoryì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ë ¤ë©´, InMemoryDataProvider ëŒ€ì‹  IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ì œ UserRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ API ì—”ë“œí¬ì¸íŠ¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë…¼ë¦¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒ ì„¹ì…˜ì—ì„œ ì„¤ëª…ë  ê²ƒì…ë‹ˆë‹¤.\n\n## 1.3 ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ ë¼ìš°íŠ¸\n\në‹¤ìŒìœ¼ë¡œ, express ë¼ìš°íŠ¸ë¥¼ ëª¨ë‘ ë³´ê´€í•  í´ë”ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:\n\n```js\nyarn add bcrypt jwt \u0026\u0026\\\nyarn add @types/bcrypt @types/jwt --dev \u0026\u0026\\\ncd server/src \u0026\u0026\\\nmkdir routes \u0026\u0026\\\ncd ./routes \u0026\u0026\\\ntouch index.ts user.ts\n```\n\nì•Œë¦¼: ì¶”ê°€ì ìœ¼ë¡œ npm íŒ¨í‚¤ì§€ bcrypt ë° jwtë¥¼ ì„œë²„ í”„ë¡œì íŠ¸ ë‚´ì— ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë° bcryptë¥¼ ì‚¬ìš©í•˜ê³ , ì„±ê³µì ì¸ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì— ë°˜í™˜ë  ì¸ì¦ í† í°ì„ ìƒì„±í•˜ê¸° ìœ„í•´ jwtë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. /server ë‚´ë¶€ì˜ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:\n\n```js\n/server\n  |__ /src\n      |__ ...\n      |__ /routes\n        |__ index.ts\n        |__ user.ts\n```\n\nindex.ts ë‚´ì—ì„œëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ëª¨ë“  ê°€ëŠ¥í•œ ê²½ë¡œë¥¼ í¬í•¨í•˜ëŠ” ì¤‘ì•™ ë¼ìš°í„°ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ëŠ” ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ íŠ¹ì • /user ê²½ë¡œë§Œ ê°€ì§ˆ ê²ƒì…ë‹ˆë‹¤.\n\n```js\n// server/src/routes/index.ts\n\n// ì „ì—­ ì¢…ì†ì„±\nimport { Router } from \"express\";\nconst router = Router();\nimport userRoute from \"./user\";\n\n// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸\nrouter.use(\"/user\", userRoute);\n\nexport default router;\n```\n\nuserRouteëŠ” ë‹¤ìŒê³¼ ê°™ì´ user.tsì— êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\n\n```js\n// server/src/routes/user.ts\n\n// ì „ì—­ ì¢…ì†ì„±\nconst { ENCRYPTION_KEY, AUTH_TOKEN_KEY } = process.env;\nimport {Router} from 'express';\nconst userRoute = Router();\nimport bcrypt from 'bcrypt';\nimport jwt from 'jsonwebtoken';\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport {UserResource} from '../repositories/UserRepository';\nimport { validateHasParameters, validateEmailFormat, validatePasswordLength } from \"../middleware/validation\";\nimport userRepository from '../repositories/UserRepository';\n\n/**\n * ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ë° ì´ë¦„ì„ ì…ë ¥í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡\n */\nuserRoute.post(\n  \"/register\",\n  validateHasParameters(\"email\", \"password\", \"name\"),\n  validateEmailFormat,\n  validatePasswordLength,\n  async (req, res) =\u003e {\n    const { name, email, password } = req.body;\n    try {\n      const userExist = await userRepository.getUserBy({id: email, matchField: 'email'});\n      if (userExist) {\n        return res.status(409).json({ error: \"User already exist\" });\n      }\n\n      const date = new Date().toISOString();\n\n      // ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”\n      const passwordHash = await bcrypt.hash(password, ENCRYPTION_KEY!);\n\n      // ì‚¬ìš©ì ì •ë³´ì™€ ë§Œë£Œ ë‚ ì§œë¡œ ì¸ì¦ í† í° ìƒì„±\n      const userData = {\n        name: name,\n        email: email,\n        password: passwordHash,\n        createdAt: date,\n        updatedAt: date,\n      };\n      const newUser = new UserResource(userData);\n\n      // ì‚¬ìš©ì ë°ì´í„° ì €ì¥\n      await userRepository.createUser(newUser);\n\n      const jwtOptions = {\n        expiresIn: '24h',  // 24ì‹œê°„ í›„ í† í° ë§Œë£Œ\n      };\n\n      const authToken = jwt.sign(newUser.data, AUTH_TOKEN_KEY!, jwtOptions);\n\n      return res.status(200).json({\n        success: true,\n        user: {\n          user_id: newUser.id,\n          email: newUser.data.email,\n          name: newUser.data.name,\n          auth_token: authToken,\n        },\n      });\n    } catch (error) {\n      console.error(error);\n      return res.status(500).json({ error: `ë‚´ë¶€ ì˜¤ë¥˜` });\n    }\n  }\n);\n\n/**\n * ì…ë ¥ëœ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë¡œê·¸ì¸ ì„¸ì…˜ ì¸ì¦\n */\nuserRoute.post(\n  \"/login\",\n  validateHasParameters(\"email\", \"password\"),\n  async (req, res) =\u003e {\n    const { email, password } = req.body;\n\n    try {\n      // ì‚¬ìš©ì ì¡´ì¬ ì—¬ë¶€ ë° ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸\n      const user = await userRepository.getUserBy({id: email, matchField: 'email'});\n      const userExists = !!user;\n      const passwordCorrect = userExists \u0026\u0026 (await bcrypt.compare(password, user.data.password));\n      if(userExists \u0026\u0026 passwordCorrect) {\n\n        const jwtOptions = {\n          expiresIn: '24h',  // 24ì‹œê°„ í›„ í† í° ë§Œë£Œ\n        };\n\n        const authToken = jwt.sign(user.data, AUTH_TOKEN_KEY!, jwtOptions);\n\n        return res.status(200).json({\n          success: true,\n          user: {\n            user_id: user.id,\n            email: user.data.email,\n            name: user.data.name,\n            auth_token: authToken,\n          },\n        });\n      }\n\n      return res.status(400).json({error: 'ì˜ëª»ëœ ì¸ì¦ ì •ë³´'});\n    } catch (error) {\n      console.error(error);\n      return res.status(500).json({ error: `ì„œë²„ ì˜¤ë¥˜` });\n    }\n  }\n);\n\nexport default userRoute;\n```\n\nPOST /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ì— ì´ë¦„, ì´ë©”ì¼ ë° ë¹„ë°€ë²ˆí˜¸ ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì´ë©”ì¼ì„ í†µí•´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„, ì°¸ì´ë©´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì €ì¥ì„ ìœ„í•´ ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„° userDataë¥¼ ìƒì„±í•˜ë©°, ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ëŠ” ì´ì „ì— ì„¤ì¹˜í•œ bcryptë¥¼ ì‚¬ìš©í•˜ì—¬ ENCRYPTION_KEYë¡œ ì•”í˜¸í™”ë©ë‹ˆë‹¤. ì‚¬ìš©ì ë°ì´í„°ì˜ ì§€ì†ì„±ì€ userRepository.createUserë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜í–‰í•˜ë©°, ì‚¬ìš©ì ìƒì„±ì´ ì„±ê³µí•˜ë©´ 24ì‹œê°„ ë§Œë£Œ ê¸°ê°„ì´ ìˆëŠ” JWT í† í°ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. JWT í† í°ì€ ì´ì „ì— ì„¤ì¹˜í•œ jwtë¥¼ ì‚¬ìš©í•˜ì—¬ AUTH_TOKEN_KEYë¡œ ì„œëª…ë˜ë©° ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ê°€ ì„œë²„ ì‘ë‹µì„ ë°›ìœ¼ë©´ ì´ JWT í† í°ì´ í”„ë¡ íŠ¸ì—”ë“œì— ì €ì¥ë©ë‹ˆë‹¤.\n\n\n\n\n\nPOST /user/login ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ ë‚´ emailê³¼ password ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ë¨¼ì € ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ í•´ë‹¹ ì‚¬ìš©ì ì´ë©”ì¼ì— ëŒ€í•´ ì°¾ì€ ë³µí˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ í›„, ë™ì¼í•œ JWT ì„œëª… í”„ë¡œì„¸ìŠ¤ê°€ ë°˜ë³µë©ë‹ˆë‹¤.\n\n/register ë° /login ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬ìš© ë¯¸ë“¤ì›¨ì–´ë„ êµ¬í˜„í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ì„ ê²ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ /middleware ë””ë ‰í† ë¦¬ì™€ ê·¸ ì•ˆì— validation.ts íŒŒì¼ì„ ìƒì„±í•´ ë³´ì„¸ìš”.\n\n```js\ncd server/src \u0026\u0026\\\nmkdir middleware \u0026\u0026\\\ntouch validation.ts\n```\n\nvalidation.ts íŒŒì¼ì—ì„œëŠ” ì‚¬ìš©ì ì…ë ¥ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë“¤ì„ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.\n\n```js\n// server/src/middleware/validation.ts\n\nimport { NextFunction, Request, Response } from \"express\";\n\nexport const validateHasParameters = (...args: string[]) =\u003e {\n  return (req: Request, res: Response, next: NextFunction) =\u003e {\n    const body = req.body;\n    let valid = true;\n\n    for (const arg of args) {\n      if (body[arg] === undefined) {\n        res.status(403).json({ error: arg + \" not specified\" });\n        valid = false;\n        break;\n      }\n    }\n\n    if (valid) {\n      next();\n    }\n  };\n};\n\nexport const validatePasswordLength = (req: Request, res: Response, next: NextFunction) =\u003e {\n  const { password } = req.body;\n  if (!!password \u0026\u0026 password.length \u003e 7) {\n    next();\n  } else {\n    res.status(403).json({ error: \"The password provided is not valid\" });\n  }\n};\n\nexport const validateEmailFormat = (req: Request, res: Response, next: NextFunction) =\u003e {\n  const { email } = req.body;\n  const re =\n    /^(([^\u003c\u003e()[\\]\\\\.,;:\\s@\"]+(\\.[^\u003c\u003e()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  if (!!email \u0026\u0026 re.test(String(email).toLowerCase())) {\n    next();\n  } else {\n    res.status(403).json({ error: \"The email provided is not valid\" });\n  }\n};\n```\n\nvalidateHasParameterì€ ëª¨ë“  POST ìš”ì²­ì— ì‚¬ìš©ë˜ë©° íŠ¹ì • ë§¤ê°œë³€ìˆ˜ê°€ ì œì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. validatePasswordLength ë° validateEmailFormat ë¯¸ë“¤ì›¨ì–´ëŠ” /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ìš”ì²­ì— ëŒ€í•´ ìœ íš¨í•œ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ì™€ ì´ë©”ì¼ í˜•ì‹ì„ ë³´ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ, app.tsì—ì„œ routesë¥¼ ì‚¬ìš©í•˜ì—¬ ë£¨í„°ë¥¼ express ì•±ì— ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ì— í‘œì‹œëœëŒ€ë¡œ routesë¥¼ íŒŒì¼ ë§¨ ìœ„ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì‹­ì‹œì˜¤.\n\n```js\n/* app.ts */\n\n// ì „ì—­ ì¢…ì†ì„±\nimport * as dotenv from \"dotenv\";\ndotenv.config(); // ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ ì´ˆê¸°í™”\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport routes from \"./routes\";\n\n// express ì•± ì„¤ì •\nimport express from \"express\";\nconst app = express();\n\n// ë¯¸ë“¤ì›¨ì–´\napp.use(express.json());\n\n// ë¼ìš°í„°\napp.use(routes);\n\nexport default app;\n```\n\nì´ì œ ì‚¬ìš©ìê°€ ë°©ê¸ˆ ë§Œë“  ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë“±ë¡í•˜ê³  ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ì„œë²„ ì¸¡ì—ì„œ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì‚¬ìš©ì ê¶Œí•œ ì¶”ì ì„ ë‹¤ë£° ê²ƒì…ë‹ˆë‹¤.\n\n## 1.4 ì‚¬ìš©ì ê¶Œí•œ\n\nì‚¬ìš©ì ê¶Œí•œì€ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  ì‹œë„í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” ì‚¬ìš©ì ë“±ë¡ ë˜ëŠ” ë¡œê·¸ì¸ ì´ë²¤íŠ¸ì—ì„œ ìƒì„±ëœ í† í°ì´ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‹œì‘ëœ ëª¨ë“  ìš”ì²­ì— ì²¨ë¶€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. í† í°ì€ ê° ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‚¬ìš©ëœ AUTH_TOKEN_KEYì™€ ê°™ì€ ê²ƒìœ¼ë¡œ í™•ì¸ë  ê²ƒì…ë‹ˆë‹¤. ì•ìœ¼ë¡œ í† í°ì´ ìš”ì²­ê³¼ í•¨ê»˜ ì „ë‹¬ë˜ëŠ” ë°©ë²•ì„ ë‚˜ì¤€ì— ë‹¤ë£° ê²ƒì´ë©°, ì§€ê¸ˆì€ ì„œë²„ ì¸¡ì—ì„œ ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©ì ê¶Œí•œì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\n\nì„œë²„/src/middleware ë””ë ‰í† ë¦¬ ì•ˆì— auth.tsë¼ëŠ” ì¶”ê°€ íŒŒì¼ì„ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤.\n\n```js\ncd server/src/middleware \u0026\u0026 touch auth.ts\n```\n\nauth.ts íŒŒì¼ ì•ˆì—ëŠ” ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ê°€ë¡œì±„ê³  í† í° ìœ íš¨ì„± ê²€ì‚¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ëŠ” checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.\n\n```js\n// server/src/middleware/auth.ts\n\n// ì „ì—­ ì˜ì¡´ì„±\nimport jwt, { JwtPayload } from 'jsonwebtoken';\nconst { AUTH_TOKEN_KEY } = process.env;\n\n// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±\nimport userRepository from '../repositories/UserRepository';\n\nexport const checkAuthToken = async (req: any, res: any, next: any) =\u003e {\n  const auth_token = req.headers[\"x-access-token\"] as string;\n\n  try {\n    if (!auth_token) {\n      throw new Error('Unauthorized');\n    }\n\n    const decodedUserInfo = jwt.verify(auth_token, AUTH_TOKEN_KEY!) as JwtPayload;\n    // ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\n    const user = await userRepository.getUserBy({ id: decodedUserInfo.email, matchField: 'email' });\n    if(!user) {\n      throw new Error('Unauthorized');\n    }\n\n    req.user = {...user.data, ...decodedUserInfo};\n  } catch (error) {\n    return res.status(403).json({error: 'Unauthorized'});\n  }\n\n  return next();\n};\n```\n\ní™•ì¸í•  í† í°ì€ ìš”ì²­ í—¤ë” X-ACCESS-TOKEN ì•ˆì— í¬í•¨ë  ê²ƒì…ë‹ˆë‹¤. ì¶”ì¶œëœ í† í°ì€ AUTH_TOKEN_KEYë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ì¦ë˜ë©°, í•´ë‹¹ ë°ì´í„° í˜ì´ë¡œë“œëŠ” decodedUserInfoì— í• ë‹¹ë  ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì œì¶œëœ í† í°ì˜ ìœ íš¨ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë°ì´í„° ì €ì¥ì†Œì— ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ ì¶”ê°€ë¡œ í™•ì¸í•  ê²ƒì…ë‹ˆë‹¤. í† í° ìœ íš¨ì„± ê²€ì‚¬ì— ì‹¤íŒ¨í•˜ë©´ 403 ì˜¤ë¥˜ 'Unauthorized' ë©”ì‹œì§€ë¡œ ì‘ë‹µí•  ê²ƒì…ë‹ˆë‹¤.\n\nì¸ì¦ ë…¼ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ë¥¼ í‰ë‚´ ë‚´ëŠ” ë”ë¯¸ /resource API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ resource.ts íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.\n\n```js\ncd server/src/routes \u0026\u0026 touch resource.ts\n```\n\nresource.ts íŒŒì¼ì˜ ë‚´ìš©ì€ ê°„ë‹¨í•˜ë©° ë‹¨ì¼ GET ì—”ë“œí¬ì¸íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ì¼ë¶€ ì •ì  HTMLì„ ë°˜í™˜í•©ë‹ˆë‹¤.\n\n```js\n// server/src/routes/resource.ts\n\nimport { Router } from \"express\";\nconst resourceRoute = Router();\n\nresourceRoute.get(\"/\", async (req, res) =\u003e {\n  return res.status(200).send(\"\u003ch1\u003eYou have successfully access resource!\u003c/h1\u003e\");\n});\n\nexport default resourceRoute;\n```\n\nserver/src/routes/index.ts íŒŒì¼ ì•ˆì— /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```js\n// server/src/routes/index.ts\n\n// ì „ì—­ ì˜ì¡´ì„±\nimport { Router } from \"express\";\nconst router = Router();\nimport userRoute from \"./user\";\nimport resourceRoute from \"./resource\";\nimport { checkAuthToken } from \"../middleware/auth\";\n\n// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸\nrouter.use(\"/user\", userRoute);\nrouter.use(\"/resource\", checkAuthToken, resourceRoute);\n\nexport default router;\n```\n\në˜í•œ checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ importí•˜ê³  /resource ì—”ë“œí¬ì¸íŠ¸ì™€ ì—°ê²°í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•´ë‹¹ ì—”ë“œí¬ì¸íŠ¸ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì´ í† í° ê¶Œí•œ ë¶€ì—¬ë¥¼ ìœ„í•´ ìœ íš¨ì„±ì„ ê²€ì‚¬ë°›ë„ë¡ ë©ë‹ˆë‹¤.\n\n## 1.5 CORS êµ¬í˜„\n\nì•ì„œ ë§í•œ íŠœí† ë¦¬ì–¼ì˜ ì œ1ë¶€ì—ì„œëŠ” CORS ê·œì¹™ì´ ì„œë²„ì— ì˜í•´ ì§€ì •ë˜ì–´ íŠ¹ì • ì¶œì²˜ ë„ë©”ì¸ìœ¼ë¡œë¶€í„°ì˜ ìš”ì²­ì„ í—ˆìš©í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì™¸ë¶€ íŒ¨í‚¤ì§€ì¸ corsë¥¼ ì‚¬ìš©í•  ê²ƒì´ë©°, ë”°ë¼ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë¨¼ì € ì„œë²„ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.\n\n```js\ncd server \u0026\u0026 yarn add cors \u0026\u0026 yarn add @types/cors --dev\n```\n\nì‹¤ì œ CORS ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„/src/app.tsì—ì„œ ë¯¸ë“¤ì›¨ì–´ë¡œ ì§€ì •ë©ë‹ˆë‹¤.\n\n```js\n/* app.ts */\n\n// global dependencies\nimport * as dotenv from \"dotenv\";\ndotenv.config(); // ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.\nimport cors from \"cors\";\n\n// project dependencies\nimport routes from \"./routes\";\n\n// express ì•± ì„¤ì •\nimport express from \"express\";\nconst app = express();\n\n// CORS ì„¤ì •\napp.use(\n  \"/\",\n  cors({\n    origin: true, // ì°¸ê³ : ì—¬ê¸°ì„œ ëª¨ë“  ì¶œì²œì„ í—ˆìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n    optionsSuccessStatus: 200,\n    preflightContinue: false,\n    methods: \"GET,POST,OPTIONS\",\n    credentials: true,\n  })\n);\n\n// ë¯¸ë“¤ì›¨ì–´\napp.use(express.json());\n\n// ë¼ìš°íŠ¸\napp.use(routes);\n\nexport default app;\n```\n\nê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ origin: trueë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ëª¨ë“  ë„ë©”ì¸ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ë¡œì»¬ ê°œë°œì— ì¶©ë¶„í•˜ì§€ë§Œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” í”„ë¡œì íŠ¸ë³„ ë„ë©”ì¸ ëª©ë¡ì—ì„œ ìš”ì²­ì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ì œ ì„œë²„ì— í•„ìš”í•œ ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì—ëŠ” ì‚¬ìš©ìê°€ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸ì¸ í¼ì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\n\n# 2. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì„¤ì •\n\n## 2.1 ì¢…ì†ì„± ì„¤ì¹˜\n\nì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ìš°ë¦¬ëŠ” React ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•˜ê¸° ìœ„í•´ ./authentication-and-authorization í´ë”ì— ë³„ë„ì˜ í´ë”ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤:\n\n```js\nmkdir ui \u0026\u0026 cd ui\n```\n\n/ui ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ Typescriptë¥¼ í™œì„±í™”í•œ React í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì‹­ì‹œì˜¤:\n\n```js\nyarn create react-app ./ --template typescript\n```\n\nì„¤ì¹˜ í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ë©´ '/ui' í´ë” ë‚´ ë¶ˆí•„ìš”í•œ íŒŒì¼ë“¤ì„ ì •ë¦¬í•˜ê³  ì•„ë˜ì— í‘œì‹œëœ ë””ë ‰í† ë¦¬ì™€ ë™ì¼í•˜ê²Œ ë³´ì´ë„ë¡ ì¡°ì •í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n/ui\n  |__ /node_modules\n      |__ ...\n  |__ /public\n      |__ favicon.ico\n      |__ index.html\n      |__ logo192.png\n      |__ logo512.png\n      |__ manifest.json\n      |__robots.txt\n  |__ /src\n      |__ App.css\n      |__ App.tsx\n      |__ index.css\n      |__ index.tsx\n      |__ react-app-env.d.ts\n  |__ .gitignore\n  |__ package.json\n  |-- README.md\n  |__ tsconfig.json\n  |__ yarn.lock\n```\n\nindex.tsxì™€ App.tsxì—ì„œ ë¶ˆí•„ìš”í•œ ì½”ë“œì™€ ì˜ëª»ëœ importë¥¼ ì œê±°í•˜ì—¬ ì•„ë˜ì— í‘œì‹œëœ íŒŒì¼ê³¼ ë™ì¼í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤:\n\n```js\n/* index.tsx */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  \u003cReact.StrictMode\u003e\n    \u003cApp /\u003e\n  \u003c/React.StrictMode\u003e\n);\n```\n\n```js\n/* App.tsx */\n\nimport \"./App.css\";\n\nfunction App() {\n  return \u003cdiv className=\"App\"\u003eì•ˆë…•\u003c/div\u003e;\n}\n\nexport default App;\n```\n\nì¢‹ì€ ì†Œì‹ì€ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ ëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìœ¼ë©° ì´ì œ ì‹¤ì œ ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤!\n\n## 2.2 ì „ì—­ ì¸ì¦ ìƒíƒœ ê´€ë¦¬\n\nì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ë ¤ë©´ ì¸í„°í˜ì´ìŠ¤ê°€ ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœì— ëŒ€í•´ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ React Contextì™€ useReducer í›…ì„ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € ui/src/ ì•ˆì— ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ ìœ„í•œ ìŠ¤í† ì–´ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:\n\n\n\n\n\n```js\ncd ui/src \u0026\u0026\\\nmkdir store \u0026\u0026\\\ncd store \u0026\u0026 mkdir auth \u0026\u0026\\\ntouch authAction.ts AuthContextProvier.tsx authReducer.ts\n```\n\nauthAction.tsëŠ” ì‚¬ìš©ìê°€ ì¸í„°í˜ì´ìŠ¤ ë‚´ì—ì„œ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆëŠ” ê°€ëŠ¥í•œ ì•¡ì…˜ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/store/auth/authActions.ts */\n\nexport enum AuthActionEnum {\n  LOG_IN = 'LOG_IN',\n  LOG_OUT = 'LOG_OUT',\n};\n\nexport type AuthAction = {\n  type: AuthActionEnum.LOG_IN,\n  payload: {\n    authToken: string;\n    userId: string;\n    email: string;\n    name: string;\n  }\n} | {\n  type: AuthActionEnum.LOG_OUT,\n  payload: null,\n}\n```\n\nauthReducer.ts ë‚´ë¶€ì—ì„œëŠ” ì¸ì¦ ê´€ë ¨ ì•¡ì…˜ì„ í•´ë‹¹ ìƒíƒœë¡œ ë§¤í•‘í•˜ëŠ” ë¦¬ë“€ì„œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n/* ui/src/store/auth/authReducer.ts */\n\nimport { Reducer } from \"react\";\nimport { AuthAction } from \"./authActions\";\n\nexport interface AuthState {\n  isLoggedIn: boolean;\n  authToken?: string;\n  userId?: string;\n  name?: string;\n  email?: string;\n}\n\nexport const defaultAuthState: AuthState = {\n  isLoggedIn: false,\n};\n\nconst authReducer: Reducer\u003cAuthState, AuthAction\u003e = (state, action) =\u003e {\n  // ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì¸ì¦ë˜ë©´\n  if (action.type === \"LOG_IN\") {\n    localStorage.setItem(\"user\", JSON.stringify(action.payload));\n    return {\n      ...state,\n      isLoggedIn: true,\n      authToken: action.payload.authToken,\n      userId: action.payload.userId,\n      name: action.payload.name,\n      email: action.payload.email,\n    };\n  }\n\n  // ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ\n  if (action.type === \"LOG_OUT\") {\n    localStorage.removeItem(\"user\");\n    return defaultAuthState;\n  }\n\n  return defaultAuthState;\n};\n\nexport default authReducer;\n```\n\nê¸°ë³¸ ìƒíƒœëŠ” falseë¡œ ì„¤ì •ëœ í•˜ë‚˜ì˜ í•„ë“œì¸ isLoggedInìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì¸ì¦ì„ í•œ ë²ˆí•˜ë©´ ë¦¬ë“€ì„œëŠ” LOG_IN ì•¡ì…˜ì„ ì²˜ë¦¬í•˜ê³  ì‚¬ìš©ì ê´€ë ¨ ì •ë³´ë¥¼ localStorageì— ìœ ì§€í•˜ë©° ìƒˆ ì¸ì¦ ìƒíƒœë¥¼ ë°˜í™˜í•˜ì—¬ ë™ì¼í•œ ì •ë³´ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì •ë³´ë¥¼ ê³„ì† ìœ ì§€í•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë‚˜ê°€ê³  ë‚˜ì¤‘ì— ë°©ë¬¸í•  ë•Œ ì¸ì¦ ìƒíƒœê°€ ìœ ì§€ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. LOG_OUT ì•¡ì…˜ì€ ë¦¬ë“€ì„œì— ì˜í•´ ì²˜ë¦¬ë˜ì–´ ëª¨ë“  ìƒíƒœ ë° ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ê°€ ê¸°ë³¸ ê°’ìœ¼ë¡œ ì¬ì„¤ì •ë©ë‹ˆë‹¤.\n\nì´ì œ ì•¡ì…˜ê³¼ ë¦¬ë“€ì„œê°€ ì •ì˜ë˜ì—ˆìœ¼ë¯€ë¡œ AuthContextProvider.tsxì—ì„œ ì „ì²´ ì‘ìš© í”„ë¡œê·¸ë¨ì— ì¸ì¦ ìƒíƒœë¥¼ ì œê³µí•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ì œê³µì êµ¬ì„± ìš”ì†Œë¥¼ ë§Œë“­ë‹ˆë‹¤:\n\n```js\n/* ui/src/store/auth/AuthContextProvider.tsx */\n\n// ì „ì—­ ê°€ì ¸ì˜¤ê¸°\nimport React, { createContext, useReducer, useCallback, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\nimport { AuthActionEnum } from \"./authActions\";\nimport authReducer, { AuthState, defaultAuthState } from \"./authReducer\";\n\ntype AuthProviderProps = {\n  children: React.ReactElement,\n};\n\nexport type UserData = {\n  authToken: string,\n  userId: string,\n  name: string,\n  email: string,\n};\n\nexport interface AuthContext {\n  authState: AuthState;\n  globalLogInDispatch: (props: UserData) =\u003e void;\n  globalLogOutDispatch: () =\u003e void;\n}\n\n// Auth ì»¨í…ìŠ¤íŠ¸\nconst authCtx =\n  createContext \u003c\n  AuthContext \u003e\n  {\n    authState: defaultAuthState,\n    globalLogInDispatch: () =\u003e {},\n    globalLogOutDispatch: () =\u003e {},\n  };\n\nexport const AuthContextProvider = (props: AuthProviderProps) =\u003e {\n  const { children } = props;\n\n  const [authState, authDispatch] = useReducer(authReducer, defaultAuthState);\n  const navigate = useNavigate();\n\n  // ì‚¬ìš©ì ì„¸ë¶€ ì •ë³´ê°€ ì§€ì†ë˜ëŠ”ì§€ í™•ì¸, ëŒ€ë¶€ë¶„ ë¸Œë¼ìš°ì € ìƒˆë¡œ ê³ ì¹¨ì— ëŒ€ì‘\n  useEffect(() =\u003e {\n    const user = localStorage.getItem(\"user\");\n    if (user) {\n      const userData: UserData = JSON.parse(user);\n      authDispatch({ type: AuthActionEnum.LOG_IN, payload: userData });\n    }\n  }, []);\n\n  const globalLogInDispatch = useCallback(\n    (props: UserData) =\u003e {\n      const { authToken, email, name, userId } = props;\n      authDispatch({\n        type: AuthActionEnum.LOG_IN,\n        payload: {\n          authToken,\n          userId,\n          name,\n          email,\n        },\n      });\n      navigate(\"/resource\");\n    },\n    [navigate]\n  );\n\n  const globalLogOutDispatch = useCallback(() =\u003e {\n    authDispatch({ type: AuthActionEnum.LOG_OUT, payload: null });\n    navigate(\"/user/login\");\n  }, [navigate]);\n\n  // í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•  ì»¨í…ìŠ¤íŠ¸ ê°’\n  const ctx = {\n    authState,\n    globalLogInDispatch,\n    globalLogOutDispatch,\n  };\n\n  return \u003cauthCtx.Provider value={ctx}\u003e{children}\u003c/authCtx.Provider\u003e;\n};\n\nexport default authCtx;\n```\n\nAuthContextProvider ì»´í¬ë„ŒíŠ¸ëŠ” authState ë° ê´€ë ¨ ë””ìŠ¤íŒ¨ì¹˜ ë©”ì„œë“œë¥¼ authCtx ì»¨í…ìŠ¤íŠ¸ ë‚´ì˜ ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì œê³µí•˜ëŠ” Higher Order Component (HOC)ì…ë‹ˆë‹¤. globalLogInDispatchì™€ globalLogOutDispatch í•¨ìˆ˜ëŠ” ê°ê° LOG_IN ë° LOG_OUT ì•¡ì…˜ì„ ë¦¬ë“€ì„œì— ë””ìŠ¤íŒ¨ì¹˜í•˜ì—¬ ì¸ì¦ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì¸ì¦ ì•¡ì…˜ì´ ë””ìŠ¤íŒ¨ì¹˜ë  ë•Œ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™í•˜ê¸° ìœ„í•´ react-router-domë„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, ì‚¬ìš©ìê°€ ì´ì „ì— ë¡œê·¸ì¸í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  í•„ìš”í•  ê²½ìš° localStorageì— ì €ì¥ëœ ì •ë³´ë¥¼ ì°¾ì•„ LOG_IN ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ëŠ” useEffect í›…ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.\n\në§ˆì§€ë§‰ ë‹¨ê³„ëŠ” index.tsxì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ AuthContextProviderë¡œ ë˜í•‘í•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n```js\n/* index.tsx */\n\nimport ReactDOM from 'react-dom/client';\nimport React from 'react';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\nimport { AuthContextProvider } from './store/auth/AuthContextProvider';\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\nroot.render(\n  \u003cReact.StrictMode\u003e\n    \u003cBrowserRouter\u003e\n      \u003cAuthContextProvider\u003e\n        \u003cApp /\u003e\n      \u003c/AuthContextProvider\u003e\n    \u003c/BrowserRouter\u003e\n  \u003c/React.StrictMode\u003e\n);\n```\n\n## 2.3 ì„œë²„ì™€ í†µì‹ í•˜ê¸°\n\nì¸ì¦ ìƒíƒœ ê´€ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ ì´ì œ ë‚´ë¶€ ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ê²€ìƒ‰í•´ì•¼ í•˜ëŠ” ì„œë²„ì™€ì˜ í†µì‹ ì— ì§‘ì¤‘í•´ ë´…ì‹œë‹¤. ì´ë¥¼ ìœ„í•´ React ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„œë²„ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ëŠ” ë…¼ë¦¬ë¥¼ ëª¨ë‘ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ useApië¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ui/src ë‚´ë¶€ì— ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆëŠ” ê´€ë ¨ íŒŒì¼ì´ ìˆëŠ” hooks í´ë”ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\ncd ui/src \u0026\u0026 mkdir hooks \u0026\u0026 cd hooks \u0026\u0026\\\nmkdir api \u0026\u0026 cd api \u0026\u0026\\\ntouch apiData.ts useApi.ts\n```\n\napiData.ts íŒŒì¼ì—ëŠ” ì‚¬ìš©ì ë¡œê·¸ì¸ ë° ë“±ë¡ ì´ë²¤íŠ¸ì— ëŒ€í•œ ì„œë²„ì—ì„œ ë°˜í™˜ë  ë°ì´í„° êµ¬ì¡°ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/hooks/api/apiData.ts */\n\nexport type AuthData = {\n  success: boolean,\n  user: {\n    user_id: string,\n    email: string,\n    name: string,\n    auth_token: string,\n  },\n};\n```\n\nuseApi.ts íŒŒì¼ì—ëŠ” ì„œë²„ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ í›…ì´ ë“¤ì–´ ìˆì–´ìš”:\n\n```js\n/* ui/src/hooks/api/useApi.ts */\n\n// ì „ì—­ ì˜ì¡´ì„±\nimport { useState, useCallback, useContext } from \"react\";\n\n// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±\nimport AuthContext from \"../../store/auth/AuthContextProvider\";\n\nconst BASE_URL = \"http://localhost:8000\";\n\nconst useApi = () =\u003e {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const { authState, globalLogOutDispatch } = useContext(AuthContext);\n\n  const request = useCallback(\n    async (\n      endpoint: string,\n      params: { [key: string]: any },\n      handleSuccessResponse: (data: any) =\u003e void,\n      handleErrorResponse?: (error: Error) =\u003e void\n    ) =\u003e {\n      setLoading(true);\n      setError(null);\n\n      try {\n        // NOTE: ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì¤‘ì´ë©´ ìš”ì²­ í—¤ë”ì— auth í† í° ì‚½ì…\n        if (authState.isLoggedIn) {\n          params.headers[\"x-access-token\"] = authState.authToken;\n        }\n\n        const response = await fetch(BASE_URL + endpoint, { ...params });\n        if (!response.ok) {\n          const data = await response.json(); // í•­ìƒ json ì‘ë‹µì„ ê°€ì •\n          throw new Error(data.error);\n        }\n        const data = await response.json(); // í•­ìƒ json ì‘ë‹µì„ ê°€ì •\n\n        // ì‘ë‹µì´ ì •ìƒì ì´ê³  ì˜¤ë¥˜ê°€ ì—†ëŠ” ê²½ìš°, ì„±ê³µ ì‘ë‹µ ì²˜ë¦¬\n        handleSuccessResponse \u0026\u0026 (await handleSuccessResponse(data));\n      } catch (error: any) {\n        // NOTE: ê¶Œí•œì´ ì—†ëŠ” ì˜¤ë¥˜ì¸ ê²½ìš° ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ\n        if (error \u0026\u0026 error.message \u0026\u0026 error.message === \"Unauthorized\") {\n          globalLogOutDispatch();\n        }\n\n        // ì§€ì •ëœ ì˜¤ë¥˜ ì²˜ë¦¬\n        if (handleErrorResponse) {\n          handleErrorResponse(error.message || error.error || error);\n        } else {\n          setError(error.message || error.error || error);\n        }\n      }\n\n      setLoading(false);\n    },\n\n    [authState.isLoggedIn, authState.authToken, globalLogOutDispatch]\n  );\n\n  return {\n    loading: loading,\n    error: error,\n    request: request,\n    setError: setError,\n  };\n};\n\nexport default useApi;\n```\n\nuseApi í›…ì€ request í•¨ìˆ˜ ë‚´ì—ì„œ fetch ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì„ ë‹´ë‹¹í•˜ê³  ìˆì–´ìš”. ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í–ˆëŠ”ì§€ ë¨¼ì € í™•ì¸í•˜ê³ , ì‚¬ìš©ìê°€ ì¸ì¦ë˜ë©´ ìš”ì²­ í—¤ë” x-access-tokenì— authTokenì„ ì²¨ë¶€í•©ë‹ˆë‹¤. ì´ í† í°ì€ ìš”ì²­ê³¼ í•¨ê»˜ ì „ì†¡ë˜ì–´ ì„œë²„ê°€ ì‚¬ìš©ìê°€ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë˜í•œ, ì»¤ìŠ¤í…€ í›…ì€ ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ ë° ì˜¤ë¥˜ ì²˜ë¦¬ì˜ ìƒíƒœ ê´€ë¦¬ë„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì„œë²„ì—ì„œ ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì•˜ë‹¤ë©´ handleSuccessResponse ì½œë°±ì„ í†µí•´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , ì‘ë‹µì´ ì‹¤íŒ¨í•œ ê²½ìš° handleErrorResponse ì½œë°±ì„ í†µí•´ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì‘ë‹µ ì˜¤ë¥˜ì— \"Unauthorized\" ë©”ì‹œì§€ê°€ ìˆìœ¼ë©´ globalLogOutDispatch í•¨ìˆ˜ë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.\n\n## 2.4 ì¸ì¦ êµ¬ì„± ìš”ì†Œ\n\nìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì™„ë£Œí–ˆê³ , ì´ì œ í™”ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‘ì—…í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë¨¼ì € React ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤:\n\n```js\ncd ui/src \u0026\u0026 mkdir components \u0026\u0026\\\ncd components \u0026\u0026 mkdir auth \u0026\u0026\\\ntouch Auth.tsx LogInForm.tsx RegisterForm.tsx validations.ts\n```\n\në¨¼ì €, LogInForm.tsxì™€ RegisterForm.tsxì—ì„œ ê°ê° ë¡œê·¸ì¸ ë° ì‚¬ìš©ì ë“±ë¡ì„ ìœ„í•œ ì–‘ì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/components/auth/LoginForm.tsx */\n\nimport { FormEventHandler } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./Auth.module.css\";\n\ntype Props = {\n  onSubmit: FormEventHandler\u003cHTMLFormElement\u003e,\n};\n\nconst LoginForm = (props: Props) =\u003e {\n  const { onSubmit } = props;\n  return (\n    \u003cform onSubmit={onSubmit} className={styles.Form}\u003e\n      \u003cdiv className={styles.Input}\u003e\n        \u003clabel htmlFor=\"email\"\u003eì´ë©”ì¼\u003c/label\u003e\n        \u003cinput id=\"email\" name=\"email\" type=\"email\" required placeholder=\"ì´ë©”ì¼ ì£¼ì†Œ\" /\u003e\n      \u003c/div\u003e\n      \u003cdiv className={styles.Input}\u003e\n        \u003clabel htmlFor=\"password\"\u003eë¹„ë°€ë²ˆí˜¸\u003c/label\u003e\n        \u003cinput id=\"password\" name=\"password\" type=\"password\" required placeholder=\"ë¹„ë°€ë²ˆí˜¸\" /\u003e\n      \u003c/div\u003e\n      \u003cbutton type=\"submit\"\u003eì œì¶œ\u003c/button\u003e\n      \u003cLink className={styles.Link} to={\"/user/register\"}\u003e\n        ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? ê°€ì…í•˜ê¸°\n      \u003c/Link\u003e\n    \u003c/form\u003e\n  );\n};\n\nexport default LoginForm;\n```\n\n```js\n/* ui/src/components/auth/RegisterForm.tsx */\n\nimport { FormEventHandler } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \"./Auth.module.css\";\n\ntype Props = {\n  onSubmit: FormEventHandler\u003cHTMLFormElement\u003e,\n};\n\nconst RegisterForm = (props: Props) =\u003e {\n  const { onSubmit } = props;\n  return (\n    \u003cform onSubmit={onSubmit} className={styles.Form}\u003e\n      \u003cdiv className={styles.Input}\u003e\n        \u003clabel htmlFor=\"name\"\u003eì´ë¦„\u003c/label\u003e\n        \u003cinput id=\"name\" name=\"name\" type=\"text\" required placeholder=\"ì „ì²´ ì´ë¦„\" /\u003e\n      \u003c/div\u003e\n      \u003cdiv className={styles.Input}\u003e\n        \u003clabel htmlFor=\"email\"\u003eì´ë©”ì¼\u003c/label\u003e\n        \u003cinput id=\"email\" name=\"email\" type=\"email\" required placeholder=\"ì´ë©”ì¼ ì£¼ì†Œ\" /\u003e\n      \u003c/div\u003e\n      \u003cdiv className={styles.Input}\u003e\n        \u003clabel htmlFor=\"password\"\u003eë¹„ë°€ë²ˆí˜¸\u003c/label\u003e\n        \u003cinput id=\"password\" name=\"password\" type=\"password\" required placeholder=\"ë¹„ë°€ë²ˆí˜¸\" /\u003e\n      \u003c/div\u003e\n      \u003cbutton type=\"submit\"\u003eì œì¶œ\u003c/button\u003e\n      \u003cLink className={styles.Link} to={\"/user/login\"}\u003e\n        ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸í•˜ê¸°\n      \u003c/Link\u003e\n    \u003c/form\u003e\n  );\n};\n\nexport default RegisterForm;\n```\n\në‘ ì–‘ì‹ì€ ê°ê° ì´ë¦„, ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ ì†ì„±ì„ í¬í•¨í•œ í¼ ì œì¶œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ì½œë°± í”„ë¡­ì¸ onSubmitì„ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.\n\nê·¸ ë‹¤ìŒìœ¼ë¡œ, Auth.tsxì—ì„œ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ë‚´ì˜ ë„¤ë¹„ê²Œì´ì…˜ ê²½ë¡œì— ë”°ë¼ LogInForm ë˜ëŠ” RegisterForm êµ¬ì„± ìš”ì†Œ ì¤‘ í•˜ë‚˜ë¥¼ í‘œì‹œí•  ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/components/auth/Auth.tsx */\n\n// ì „ì—­ imports\nimport { useEffect, useState, useContext, FormEventHandler } from \"react\";\n\n// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±\nimport useApi from \"../../hooks/api/useApi\";\nimport AuthContext from \"../../store/auth/AuthContextProvider\";\nimport { validatePasswordLength, validateEmailFormat } from \"./validations\";\nimport { AuthData } from \"../../hooks/api/apiData\";\nimport { useLocation } from \"react-router-dom\";\nimport LoginForm from \"./LoginForm\";\nimport RegisterForm from \"./RegisterForm\";\n\nconst Auth = () =\u003e {\n  const [authData, setAuthData] = useState\u003cAuthData\u003e();\n  const { request, setError } = useApi();\n  const { globalLogInDispatch } = useContext(AuthContext);\n  const location = useLocation();\n  const currentPathArray = location.pathname.split('/');\n  const isLogin = currentPathArray[currentPathArray.length - 1] === 'login';\n\n  // ë¡œê·¸ì¸ ì‚¬ìš©ìì— ëŒ€í•œ api ì‘ë‹µ ì„±ê³µ ì‹œ, ì „ì—­ auth LOG_IN ì´ë²¤íŠ¸ë¥¼ ë””ìŠ¤íŒ¨ì¹˜í•©ë‹ˆë‹¤\n  useEffect(() =\u003e {\n    if (authData \u0026\u0026 \"success\" in authData) {\n      globalLogInDispatch({\n        authToken: authData.user.auth_token,\n        userId: authData.user.user_id,\n        name: authData.user.name,\n        email: authData.user.email,\n      });\n    }\n  }, [authData, globalLogInDispatch]);\n\n  const authHandler: FormEventHandler\u003cHTMLFormElement\u003e = async (event) =\u003e {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    // ë¨¼ì € ìœ íš¨ì„± ê²€ì‚¬!\n    const userEmail = data.get(\"email\");\n    const userPassword = data.get(\"password\");\n    const userName = data.get(\"name\");\n    try {\n      if (\n        !validateEmailFormat(userEmail?.toString() || \"\") ||\n        !validatePasswordLength(userPassword?.toString() || \"\")\n      ) {\n        throw new Error(\"ì˜ëª»ëœ ìê²© ì¦ëª… í˜•ì‹ì…ë‹ˆë‹¤!\");\n      }\n      const params = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          email: userEmail,\n          password: userPassword,\n          name: userName,\n        }),\n      };\n\n      const endpoint = `/user/${isLogin ? 'login' : 'register'}`\n      await request(endpoint, params, setAuthData);\n    } catch (error: any) {\n      setError(error.message || error);\n    }\n  };\n\n  return (\n    \u003c\u003e\n      \u003ch2\u003e{isLogin ? 'ë¡œê·¸ì¸' : 'ê°€ì…í•˜ê¸°'}\u003c/h2\u003e\n      {\n        isLogin\n          ? \u003cLoginForm onSubmit={authHandler} /\u003e\n          : \u003cRegisterForm onSubmit={authHandler} /\u003e\n      }\n    \u003c/\u003e\n  );\n};\n\nexport default Auth;\n```\n\nìš°ë¦¬ëŠ” react-router-domì—ì„œ ì œê³µí•˜ëŠ” useLocationì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì–´ë–¤ ê²½ë¡œì— ìˆëŠ”ì§€ ì¶”ì¶œí•©ë‹ˆë‹¤. ê²½ë¡œì— ë”°ë¼, LoginForm ë˜ëŠ” RegisterFormì„ í‘œì‹œí•˜ë„ë¡ ì„ íƒí•©ë‹ˆë‹¤. ê° í¼ì— ëŒ€í•œ onSubmit í•¸ë“¤ëŸ¬ëŠ” authHandlerì— ì •ì˜ëœ ëŒ€ë¡œ ì‘ë™í•˜ë©°, ì´ í•¸ë“¤ëŸ¬ëŠ” ì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì—ì„œ ëª¨ë“  ì…ë ¥ í¼ ì†ì„±ì„ ì¶”ì¶œí•˜ê³  ì„œë²„ì—ì„œ ì‚¬ìš©ì/ë¡œê·¸ì¸ ë˜ëŠ” ì‚¬ìš©ì/ë“±ë¡ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ê¸° ì „ì— ì´ë¥¼ ìœ íš¨ì„± ê²€ì‚¬í•©ë‹ˆë‹¤.\n\nì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ì€ ê¸°ë³¸ì ì´ë©° ì•„ë˜ validation.tsì—ì„œ ë³´ì—¬ì§„ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n```js\n/* ui/src/components/auth/validations.ts */\n\nexport const validatePasswordLength = (password: string) =\u003e {\n  return !!password \u0026\u0026 password.length \u003e 7;\n};\n\nexport const validateEmailFormat = (email: string) =\u003e {\n  const re =\n    /^(([^\u003c\u003e()[\\]\\\\.,;:\\s@\"]+(\\.[^\u003c\u003e()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return !!email \u0026\u0026 re.test(String(email).toLowerCase());\n};\n```\n\n## 2.5 Resource component\n\në§ˆì§€ë§‰ìœ¼ë¡œ ë§Œë“¤ ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ìš”ì†ŒëŠ” ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” ë”ë¯¸ í˜ì´ì§€ì…ë‹ˆë‹¤. ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:\n\n```js\ncd ui/src/components \u0026\u0026\\\nmkdir resource \u0026\u0026\\\ncd resource \u0026\u0026\\\ntouch Resource.tsx\n```\n\nResource.tsx íŒŒì¼ ë‚´ë¶€ì— ì•„ë˜ì™€ ê°™ì´ êµ¬ì„± ìš”ì†Œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\n\n```js\n/* ui/src/components/resource/Resource.tsx */\n\nimport { useCallback, useContext, useEffect, useState } from \"react\";\nimport useApi from \"../../hooks/api/useApi\";\nimport authCtx from \"../../store/auth/AuthContextProvider\";\nimport styles from \"./Resource.module.css\";\n\nconst Resource = () =\u003e {\n  const [data, setData] = useState();\n  const { request, setError } = useApi();\n  const { globalLogOutDispatch } = useContext(authCtx);\n\n  const fetchData = useCallback(async () =\u003e {\n    try {\n      const params = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      };\n      await request(\"/resource\", params, (result) =\u003e {\n        setData(result.data);\n      });\n    } catch (error: any) {\n      setError(error.message || error);\n    }\n  }, [request, setError]);\n\n  useEffect(() =\u003e {\n    fetchData();\n  }, [fetchData]);\n\n  return (\n    \u003cdiv className={styles.Resource}\u003e\n      \u003ch1\u003e{data}\u003c/h1\u003e\n      \u003cbutton onClick={globalLogOutDispatch}\u003eë¡œê·¸ì•„ì›ƒ\u003c/button\u003e\n    \u003c/div\u003e\n  );\n};\n\nexport default Resource;\n```\n\nì´ ì»´í¬ë„ŒíŠ¸ëŠ” ê°„ë‹¨í•˜ë©° useEffect í›…ì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì˜ /resource ì—”ë“œí¬ì¸íŠ¸ë¡œ í˜¸ì¶œí•˜ëŠ” ë¡œì§ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ í˜¸ì¶œì—ëŠ” pre-existing auth í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤. ë°˜í™˜ëœ ë°ì´í„°ëŠ” í˜ì´ì§€ì— í‘œì‹œë˜ë©° ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ auth ì»¨í…ìŠ¤íŠ¸ì—ì„œ globalLogOutDispatchë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì „ì—­ auth ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.\n\n## 2.6 ëª¨ë“  ê²ƒì„ ì—°ê²°í•˜ê¸°\n\nì¸í„°í˜ì´ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ í”„ë ˆì  í…Œì´ì…˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í–ˆìœ¼ë‹ˆ, App.tsxì—ì„œ react-router-domì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œ ë¼ìš°íŒ…ì„ í†µí•´ ëª¨ë“  ê²ƒì„ ì—°ê²°í•´ë³´ê² ìŠµë‹ˆë‹¤ :\n\n```js\n/* ui/src/App.tsx */\n\nimport \"./App.css\";\nimport { Route, Routes, Navigate, useLocation } from \"react-router-dom\";\nimport AuthContext from \"./store/auth/AuthContextProvider\";\nimport { useContext } from \"react\";\nimport Resource from \"./components/resource/Resource\";\nimport Auth from \"./components/auth/Auth\";\n\nfunction App() {\n  const { authState } = useContext(AuthContext);\n  const location = useLocation();\n\n  return (\n    \u003cdiv className=\"App\"\u003e\n      \u003cRoutes\u003e\n        \u003cRoute path=\"/\" element={\u003cNavigate to={authState.isLoggedIn ? location.pathname : \"/user/login\"} /\u003e} /\u003e\n        {!authState.isLoggedIn \u0026\u0026 (\n          \u003cRoute path=\"user\"\u003e\n            \u003cRoute path=\"register\" element={\u003cAuth /\u003e} /\u003e\n            \u003cRoute path=\"login\" element={\u003cAuth /\u003e} /\u003e\n          \u003c/Route\u003e\n        )}\n        {authState.isLoggedIn \u0026\u0026 \u003cRoute path=\"resource\" element={\u003cResource /\u003e} /\u003e}\n      \u003c/Routes\u003e\n    \u003c/div\u003e\n  );\n}\n\nexport default App;\n```\n\nApp.tsx íŒŒì¼ ë‚´ì—ì„œëŠ” ì§€ê¸ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¼ìš°íŒ…ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. /user/register, /user/login ë° /resourceë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê³µëœ ì „ì—­ ì¸ì¦ ìƒíƒœê°€ ì‚¬ìš©ìê°€ ì¸ì¦ëœ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ë©´ ì‚¬ìš©ìì—ê²Œ /resource ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ì—¬ í•´ë‹¹ ì„œë²„ì˜ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™í•˜ì—¬ 'protected' ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\n\n# ê²°ë¡ \n\nì´ ê¸€ì—ì„œëŠ” í’€ìŠ¤íƒ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ëŠ” ë° í•„ìš”í•œ ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¸ì¦ ë°©ë²•ì€ í† í° ê¸°ë°˜ ë°©ì‹ìœ¼ë¡œ, ì´ëŠ” ì´ íŠœí† ë¦¬ì–¼ ì‹œë¦¬ì¦ˆì˜ ì²« ë²ˆì§¸ ê¸€ì—ì„œ ë…¼ì˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê° êµ¬ì„± ìš”ì†Œì— ëŒ€í•´ ë§ì€ ì„¸ë¶€ ì •ë³´ë¥¼ ë‹¤ë¤˜ì§€ë§Œ, ì•„ì§ í•  ì¼ì´ ë§ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n- í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìŠ¤íƒ€ì¼ë§ ê°œì„ , ì´ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ë§ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- í”„ë¡ íŠ¸ì—”ë“œ ë° ë°±ì—”ë“œì—ì„œ ì ì ˆí•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬, SQL ì¸ì ì…˜ ë°©ì§€ ë˜ëŠ” ë°ì´í„° ìœ í˜• ìœ íš¨ì„± ê²€ì‚¬ì™€ ê°™ì€ ì‘ì—….\n- ì˜ëª»ëœ ìê²© ì¦ëª…ì„ ì œì¶œí–ˆì„ ë•Œ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ì—ëŸ¬ ì²˜ë¦¬.\n- ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„° ì €ì¥.\n- AWS ë˜ëŠ” GCPì™€ ê°™ì€ í´ë¼ìš°ë“œ ì œê³µ ì—…ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì»¨í…Œì´ë„ˆí™”í•˜ê³  ë°°í¬.\n\në‚˜ë¨¸ì§€ëŠ” ë„¤ê°€ ì•Œì•„ì„œ í•´ì£¼ë©´ ë¼! ê·¸ë¦¬ê³  ì–¸ì œë“ ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œì„ í•˜ê±°ë‚˜ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ì œì•ˆì´ ìˆë‹¤ë©´ ëŒ“ê¸€ì„ ë‚¨ê²¨ì¤˜! ì´ íŠœí† ë¦¬ì–¼ì˜ ìµœì¢… ì½”ë“œëŠ” ì—¬ê¸°ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´.\n","ogImage":{"url":"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png"},"coverImage":"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png","tag":["Tech"],"readingTime":39},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_0.png\"\u003e\n\u003ch1\u003eì†Œê°œ\u003c/h1\u003e\n\u003cp\u003eì´ê²ƒì€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œì„ êµ¬í˜„í•˜ëŠ” ë‘ ë¶€ë¶„ íŠœí† ë¦¬ì–¼ì˜ ë‘ ë²ˆì§¸ ê¸°ì‚¬ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eíŠœí† ë¦¬ì–¼ì˜ ì²« ë²ˆì§¸ ë¶€ë¶„ì€ í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ì—ì„œ ì¸ì¦ ë° ê¶Œí•œì˜ ê°œë…ì„ ì„¤ëª…í•˜ëŠ” ë° ì „ë…ë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ì§ ë³´ì§€ ì•Šì•˜ë‹¤ë©´, ì§„í–‰í•˜ê¸° ì „ì— ì²« ë²ˆì§¸ ë¶€ë¶„ì„ í™•ì¸í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê¸°ì´ˆë¥¼ ë‹¤ë£¬ ê¸°ì´ˆë¥¼ ë°”íƒ•ìœ¼ë¡œ, React, Node.js ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ í† í° ê¸°ë°˜ ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ë¥¼ í•˜ëŠ” í’€ ìŠ¤íƒ ì‹œìŠ¤í…œì„ ë‹¨ê³„ë³„ë¡œ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤. ì´ íŠœí† ë¦¬ì–¼ì˜ ì™„ì „í•œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì´ GitHub ì €ì¥ì†Œì—ì„œ ì°¾ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ì„¹ì…˜ì—ì„œ í”„ë¡œì íŠ¸ êµ¬ì¡°ì— ìµìˆ™í•´ì ¸ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003ch1\u003eí”„ë¡œì íŠ¸ êµ¬ì¡°\u003c/h1\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_1.png\" alt=\"í”„ë¡œì íŠ¸ êµ¬ì¡°\"\u003e\u003c/p\u003e\n\u003cp\u003eìœ„ì˜ ê·¸ë¦¼ 1ì—ì„œ ì „ì²´ í’€ ìŠ¤íƒ í”„ë¡œì íŠ¸ êµ¬ì¡°ê°€ ë‚˜ì™€ ìˆìŠµë‹ˆë‹¤. ì„œë²„ ë° ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤(UI) ë‚´ ê° êµ¬ì„± ìš”ì†Œì˜ ëª©ì ì— ëŒ€í•´ ë…¼ì˜í•´ ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003ch2\u003eì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤\u003c/h2\u003e\n\u003cp\u003eì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” ë§¤ìš° ê¸°ë³¸ì ì´ë©°, í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´ì˜ Auth ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ì´ëŸ¬í•œ ì»´í¬ë„ŒíŠ¸ì™€ ìƒí˜¸ì‘ìš©í•˜ì—¬ ì‚¬ìš©ì ì§€ì • í›„í¬ useApi ë° ApiProvider í´ë˜ìŠ¤ë¥¼ í†µí•´ ì„œë²„ì— ì¸ì¦ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì„œë²„ê°€ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ ìœ íš¨ì„± ê²€ì‚¬í•˜ë©´ ì‘ë‹µ ë‚´ì—ì„œ JWT í† í°ì„ ë°˜í™˜í•©ë‹ˆë‹¤. ìœ íš¨í•œ ì„œë²„ ì‘ë‹µì‹œ, ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„° AuthReducerë¡œ ì‘ì—…ì´ ë””ìŠ¤íŒ¨ì¹˜ë©ë‹ˆë‹¤. ë””ìŠ¤íŒ¨ì¹˜ëœ ì‘ì—…ì€ ê´€ë ¨ AuthStateë¡œ ì¤„ì–´ë“¤ê³ , AuthContextë¥¼ í†µí•´ ì „ì²´ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì¸í„°í˜ì´ìŠ¤ì— ì œê³µë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ëŠ” React ë° TypeScriptë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003eì„œë²„\u003c/h2\u003e\n\u003cp\u003eì„œë²„ëŠ” ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ìê²© ì¦ëª… ë°ì´í„°ì™€ í•¨ê»˜ ìš”ì²­ì„ ë°›ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € Cors(Cross-Origin-Resource-Sharing) ê·œì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ê³  ì œì¶œëœ ì…ë ¥ ë°ì´í„°ê°€ ìœ íš¨í•œì§€ë¥¼ ê²€ì¦í•  ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë‹¨ê³„ ì¤‘ í•˜ë‚˜ë¼ë„ í†µê³¼í•˜ì§€ ëª»í•˜ë©´ ì˜¤ë¥˜ ì‘ë‹µì´ ë°˜í™˜ë©ë‹ˆë‹¤. ì‚¬ìš©ì ì¸ì¦ì€ ì‚¬ìš©ì/ê°€ì… routeì—ì„œ ìƒˆë¡œìš´ ì‚¬ìš©ìê°€ ìƒì„±ë˜ê±°ë‚˜ ì‚¬ìš©ì/ë¡œê·¸ì¸ routeì—ì„œ ê¸°ì¡´ ì‚¬ìš©ìê°€ ì¸ì¦ë©ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” InMemoryDataProviderê°€ êµ¬í˜„ë˜ë©° ì‚¬ìš©ì ë°ì´í„°ëŠ” ê°„ë‹¨í•œ ê°ì²´ì— ì €ì¥ë©ë‹ˆë‹¤. ì´ëŠ” íŠœí† ë¦¬ì–¼ì´ ë³µì¡í•´ì§€ì§€ ì•Šë„ë¡ ì˜ë„ëœ ê²ƒì´ë©° ì‚¬ìš©ì ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ì— ì¤‘ì ì„ ë‘ì—ˆìŠµë‹ˆë‹¤. DataProviderInterfaceëŠ” ë°ì´í„° ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì¶”ìƒí™”í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ë©°, ë‚˜ì¤‘ì— ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ ì œê³µìë¡œ ì‰½ê²Œ ì „í™˜í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ê°€ì… ë˜ëŠ” ë¡œê·¸ì¸ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ë©´ ì„œëª…ëœ ì„œë²„ì™€ í•¨ê»˜ ë§Œë£Œ ê°€ëŠ¥í•œ JWT(JSON Web Token)ê°€ ìƒì„±ë˜ì–´ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤. ì´ í† í°, ì¼ë°˜ì ìœ¼ë¡œ ì¸ì¦ í† í°ìœ¼ë¡œ ì•Œë ¤ì ¸ ìˆìœ¼ë©°, ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì—ì„œ /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ í†µí•´ ë³´í˜¸ëœ ì„œë²„ ì¸¡ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ ìš”ì²­ì— í¬í•¨ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì‚¬ì „ ì¤€ë¹„ ì‚¬í•­\u003c/h1\u003e\n\u003cp\u003eì´ íŠœí† ë¦¬ì–¼ì„ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œí•˜ê¸° ìœ„í•œ ì „ì œ ì¡°ê±´ ëª©ë¡ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eí•´ë‹¹ íŠœí† ë¦¬ì–¼ì„ ì™„ë£Œí•˜ë ¤ë©´ ì»´í“¨í„°ì— Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eNode Package Manager (NPM)ì€ Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë©´ì„œ Yarnì„ ì„ í˜¸í•˜ë©° í”„ë¡œì íŠ¸ ì¢…ì†ì„± ê´€ë¦¬ì—ëŠ” Yarnì´ ì‚¬ìš©ë  ê²ƒì…ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eì›¹ì´ ì‘ë™í•˜ëŠ” ë°©ì‹ì— ëŒ€í•œ ì•Œë§ì€ ì§€ì‹ì´ ìˆì–´ì•¼ í•˜ë©° ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ì‹œìŠ¤í…œì„ êµ¬í˜„í•œ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê±°ë‚˜ ë³¸ì ì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eë³¸ ë¬¸ì„œ ì´ì „ì— Node.js, React ë° Typescriptì™€ í•¨ê»˜ ì‘ì—…í•œ ê²½í—˜ì´ ìˆì–´ì•¼ í•˜ì§€ë§Œ, ì½”ë“œ ì•ˆë‚´ë¥¼ ë°›ì„ ì˜ˆì •ì´ë¯€ë¡œ ì‹¬ì¸µì ì¸ ì§€ì‹ì€ ì„ íƒ ì‚¬í•­ì…ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eì, ì†Œê°œëŠ” ì´ì œ ëë‚´ê³  ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬í˜„ìœ¼ë¡œ ë„˜ì–´ê°€ ë´…ì‹œë‹¤. ë©‹ì§€ë„¤ìš”! ğŸ˜\u003c/p\u003e\n\u003ch1\u003e1. ì„œë²„ ì„¤ì •\u003c/h1\u003e\n\u003ch2\u003e1.1 ì˜ì¡´ì„± ì„¤ì¹˜\u003c/h2\u003e\n\u003cp\u003eë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³  ì„œë²„ ì½”ë“œ ê¸°ë°˜ì„ ì„¤ì •í•´ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emkdir authentication-and-authorization \u0026#x26;\u0026#x26;\\\ncd authentication-and-authorization \u0026#x26;\u0026#x26;\\\nmkdir server \u0026#x26;\u0026#x26;\\\ncd server \u0026#x26;\u0026#x26; mkdir src\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì‹œì‘ ì„œë²„ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e/authentication-and-authorization\n  |__ /server\n      |__ /src\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e/server í´ë” ì•ˆì— ìˆëŠ” í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ ë…¸ë“œ í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸°í™”í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003enpm init -y\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ì„œë²„ í”„ë¡œì íŠ¸ì˜ ì‹œì‘ì ì´ ìˆìœ¼ë‹ˆ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Typescript í”„ë¡œì íŠ¸ë¡œ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eyarn add typescript @types/node --dev \u0026#x26;\u0026#x26; npx tsc --init\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ ëª…ë ¹ì€ /server í´ë” ì•ˆì— tsconfig.json íŒŒì¼ì„ ìƒì„±í–ˆì„ ê²ë‹ˆë‹¤. í•´ë‹¹ íŒŒì¼ì˜ ë‚´ìš©ì„ ì•„ë˜ ì½”ë“œì™€ ê°™ì´ ë³€ê²½í•´ì£¼ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e{\n  \u003cspan class=\"hljs-string\"\u003e\"compilerOptions\"\u003c/span\u003e: {\n    \u003cspan class=\"hljs-string\"\u003e\"target\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"es2016\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"module\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"commonjs\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"rootDir\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"./src\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"sourceMap\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"outDir\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"./dist\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"esModuleInterop\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"forceConsistentCasingInFileNames\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"strict\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n    \u003cspan class=\"hljs-string\"\u003e\"skipLibCheck\"\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ rootDirì…ë‹ˆë‹¤. ì´ ì„¤ì •ì€ TypeScript ì»´íŒŒì¼ëŸ¬ì—ê²Œ .ts íŒŒì¼ì„ ì–´ë””ì—ì„œ ì°¾ì•„ .js íŒŒì¼ë¡œ ë³€í™˜í•˜ê³  outDirë¡œ ì§€ì •ëœ ë””ë ‰í† ë¦¬ì— ë°°ì¹˜í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì¤ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ ì„œë²„ì— í•„ìš”í•œ ì´ˆê¸° íŒ¨í‚¤ì§€ ì¢…ì†ì„±ì„ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eyarn add express dotenv cors \u0026#x26;\u0026#x26;\\\nyarn add @types/express @types/dotenv @types/cors --dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e3rd party íŒ¨í‚¤ì§€ì— ëŒ€í•œ íƒ€ì… ì •ì˜ íŒŒì¼ë„ ê°œë°œ ì¢…ì†ì„±ìœ¼ë¡œ ì„¤ì¹˜í–ˆë‹¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì„¸ìš”.\u003c/p\u003e\n\u003ch2\u003e1.2 Express ì„œë²„ ë§Œë“¤ê¸°\u003c/h2\u003e\n\u003cp\u003eë¨¼ì € Express ì„œë²„ì˜ ê¸°ë³¸ êµ¬ì¡°ë¥¼ ìƒì„±í•˜ê³  ë³¸ ê°•ì¢Œë¥¼ í†µí•´ ì´ë¥¼ í™•ì¥í•´ ë‚˜ê°ˆ ê²ƒì…ë‹ˆë‹¤. /server/src ë””ë ‰í† ë¦¬ ì•ˆì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì—¬ app.tsì™€ index.tsë¥¼ ìƒì„±í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003etouch app.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e \u0026#x26;\u0026#x26; touch index.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eapp.ts ì•ˆì—ëŠ” ì„œë²„ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ê³  ê´€ë ¨ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ Express ì•± ê°ì²´ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. app.tsì˜ ë‚´ìš©ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤ (ì´ê²ƒì€ í•´ë‹¹ íŒŒì¼ì˜ ìµœì¢… ì½”ë“œê°€ ì•„ë‹™ë‹ˆë‹¤):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* app.ts */\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ì „ì—­ ì¢…ì†ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"dotenv\"\u003c/span\u003e;\ndotenv.\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e routes \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./routes\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// express ì•± ì„¤ì •\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e express \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e app = \u003cspan class=\"hljs-title function_\"\u003eexpress\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment\"\u003e// ë¯¸ë“¤ì›¨ì–´\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(express.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e());\n\n\u003cspan class=\"hljs-comment\"\u003e// ë¼ìš°íŠ¸\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(routes);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e app;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eindex.tsì—ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ SERVER_PORT í™˜ê²½ ë³€ìˆ˜ë¡œ ì§€ì •ëœ í¬íŠ¸ì—ì„œ express ì„œë²„ë¥¼ ì‹¤í–‰í•  ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* index.ts */\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e app \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./app\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-variable constant_\"\u003eSERVER_PORT\u003c/span\u003e } = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// ì•±ì´ listeningì¤‘\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003elisten\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eSERVER_PORT\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einfo\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`ì•±ì´ í¬íŠ¸ \u003cspan class=\"hljs-subst\"\u003e${SERVER_PORT}\u003c/span\u003eì—ì„œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤`\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eGitì—ì„œ ë¬´ì‹œë  ìˆ˜ ìˆëŠ” .env íŒŒì¼ì— í”„ë¡œì íŠ¸ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì€ ì¢‹ì€ ê´€í–‰ì…ë‹ˆë‹¤. ì´ íŒŒì¼ì€ /serverí´ë”ì— ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# .\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e\n\n\u003cspan class=\"hljs-variable constant_\"\u003eSERVER_PORT\u003c/span\u003e=\u003cspan class=\"hljs-number\"\u003e8000\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìµìŠ¤í”„ë ˆìŠ¤ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ë ¤ë©´ /server í´ë” ë‚´ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003erm -rf ./dist \u0026#x26;\u0026#x26; npx tsc \u0026#x26;\u0026#x26; cp .\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e ./dist/.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e \u0026#x26;\u0026#x26; cd ./dist \u0026#x26;\u0026#x26; node index.\u003cspan class=\"hljs-property\"\u003ejs\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìœ„ ëª…ë ¹ì€ ë¨¼ì € ./dist ë””ë ‰í† ë¦¬ë¥¼ ì œê±°í•˜ê³ , ./src ë””ë ‰í† ë¦¬ì— ìˆëŠ” ëª¨ë“  ì½”ë“œë¥¼ íƒ€ì… í™•ì¸í•˜ê³  ./dist ë””ë ‰í† ë¦¬ ë‚´ì˜ JavaScriptë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì»´íŒŒì¼ ë‹¨ê³„ê°€ ì™„ë£Œë˜ë©´ .env íŒŒì¼ì´ ./dist ë””ë ‰í† ë¦¬ë¡œ ë³µì‚¬ë˜ì–´ ì„œë²„ë¥¼ node index.jsë¡œ ì‹¤í–‰í•  ë•Œ í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥´ê²Œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ë§¤ë²ˆ ì´ ëª…ë ¹ì„ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ì§€ë£¨í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ server/package.json ë‚´ì— ëª‡ ê°€ì§€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ì–´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¨ìˆœí™”í•˜ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-json\"\u003e\u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"name\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"server\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"version\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"1.0.0\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"description\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"main\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"index.js\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"scripts\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"build\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"npx tsc \u0026#x26;\u0026#x26; cp .env ./dist/.env\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"start\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"rm -rf ./dist \u0026#x26;\u0026#x26; yarn build \u0026#x26;\u0026#x26; cd ./dist \u0026#x26;\u0026#x26; node index.js\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"author\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"license\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"ISC\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"devDependencies\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/cors\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^2.8.13\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/dotenv\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^8.2.0\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/express\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^4.17.15\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"@types/node\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^18.11.18\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"typescript\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^4.9.4\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003e\"dependencies\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"cors\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^2.8.5\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"dotenv\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^16.0.3\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003e\"express\"\u003c/span\u003e\u003cspan class=\"hljs-punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"^4.18.2\"\u003c/span\u003e\n  \u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"hljs-punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ start ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ì„œë²„ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eyarn start\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2_2.png\" alt=\"ì´ë¯¸ì§€\"\u003e\u003c/p\u003e\n\u003cp\u003eì„œë²„ í”„ë¡œì íŠ¸ê°€ ì´ì œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ë°±ì—”ë“œ ì¸ì¦ ë° ê¶Œí•œ ì‹œìŠ¤í…œ ì„¤ì • ê³¼ì •ì„ ë³´ì—¬ë“œë¦´ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003e1.3 ì‚¬ìš©ì ë°ì´í„° ì œê³µì\u003c/h2\u003e\n\u003cp\u003eë°ì´í„° ì €ì¥ ë ˆì´ì–´ëŠ” ì¸ì¦ ì‹œìŠ¤í…œì— í•„ìˆ˜ì ì…ë‹ˆë‹¤. ìƒˆ ì‚¬ìš©ìê°€ ìƒì„±ë  ë•Œ, ê·¸ë“¤ì˜ ë°ì´í„°ëŠ” ìœ ì§€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë¡œê·¸ì¸í•  ë•Œ ì‚¬ìš©ìê°€ ì œì¶œí•œ ìê²© ì¦ëª…ì„ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê°„ë‹¨íˆ ë§í•´ì„œ, ì‚¬ìš©ì ë°ì´í„° ì €ì¥ì„ ìœ„í•´ ì¸ë©”ëª¨ë¦¬ ì €ì¥ì„ êµ¬í˜„í•  ê²ƒì´ì§€ë§Œ, ë‚˜ì¤‘ì— ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ êµ¬í˜„ì„ êµì²´í•˜ëŠ” ê²ƒì´ ì‰½ë„ë¡ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e/server/src/data_providers í´ë”ë¥¼ ìƒì„±í•˜ê³  ì•„ë˜ì™€ ê°™ì´ ì¸í„°í˜ì´ìŠ¤ IDataProviderë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/data_providers/IDataProvider.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e interface \u003cspan class=\"hljs-title class_\"\u003eIDataProvider\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-attr\"\u003ecreateData\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresource: Resource\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e;\n  \u003cspan class=\"hljs-attr\"\u003ereadData\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eargs: {id: string, matchField: string}\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e\u003e;\n  \u003cspan class=\"hljs-attr\"\u003eupdateData\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eargs: {id: string, resource: Resource}\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e;\n  \u003cspan class=\"hljs-attr\"\u003edeleteData\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eid: string\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ì¸í„°í˜ì´ìŠ¤ëŠ” ì¼ë°˜ì ì¸ CRUD ì‘ì—…ì„ ë‚˜íƒ€ë‚´ëŠ” ë„¤ ê°€ì§€ ë©”ì„œë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ ë©”ì„œë“œë“¤ì€ Resource íƒ€ì…ì˜ ì¼ë°˜ì ì¸ ê°’ì„ ì†Œë¹„í•˜ê±°ë‚˜ ë°˜í™˜í•©ë‹ˆë‹¤. IDataProviderì˜ InMemoryDataProvider êµ¬í˜„ì€ ì•„ë˜ì™€ ê°™ì´ ë³´ì—¬ì§‘ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/data_providers/InMemoryDataProvider.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIDataProvider\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./IDataProvider\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eInMemoryDataProvider\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e {\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string, \u003cspan class=\"hljs-attr\"\u003edata\u003c/span\u003e: any}\u003e implements \u003cspan class=\"hljs-title class_\"\u003eIDataProvider\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e\u003e {\n  private \u003cspan class=\"hljs-attr\"\u003e_data\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e[];\n\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_data\u003c/span\u003e = [];\n  };\n\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreateData\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eresource: Resource\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_data\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epush\u003c/span\u003e(resource);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n  }\n\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ereadData\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eargs: {id: string, matchField: string}\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_data\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003ex\u003c/span\u003e =\u003e\u003c/span\u003e x.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e[args.\u003cspan class=\"hljs-property\"\u003ematchField\u003c/span\u003e] === args.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e)[\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e];\n  };\n\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdateData\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprops: { id: string; resource: Resource; }\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e {id, resource} = props;\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e datum \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_data\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(datum.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e === id) {\n        datum.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e = resource.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e;\n      }\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n  };\n\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edeleteData\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eid: string\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_data\u003c/span\u003e = \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_data\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efilter\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003edatum\u003c/span\u003e =\u003e\u003c/span\u003e datum.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e !== id);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n  };\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eInMemoryDataProviderëŠ” IDataProviderì—ì„œ ì •ì˜ëœ ê³µê°œ ë©”ì„œë“œë¥¼ ì—„ê²©í•˜ê²Œ êµ¬í˜„í•©ë‹ˆë‹¤. ì‹¤ì œ ë°ì´í„° ì €ì¥ì†ŒëŠ” InMemoryDataProvider í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— íŠ¹ì •í•œ private _data ë°°ì—´ ì†ì„±ì…ë‹ˆë‹¤. InMemoryDataProviderì˜ generic íƒ€ì…ì€ Resourceì´ë©° 'id: string, data: any'ë¥¼ í™•ì¥í•˜ì˜€ê¸° ë•Œë¬¸ì— ì…ë ¥ ìì›ì€ id ë° ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³  ê¸°íƒ€ ì†ì„±ì„ ì¶”ê°€ë¡œ ê°€ì ¸ì•¼í•©ë‹ˆë‹¤. TypeScriptì˜ ì´ ì¸í„°í˜ì´ìŠ¤ ì¤‘ì‹¬ì  ì ‘ê·¼ì˜ ì¥ì ì€ IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¤€ìˆ˜í•œë‹¤ë©´ ë°ì´í„° ì €ì¥ì†Œë¥¼ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¡œ ì‰½ê²Œ êµì²´í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤(ì˜ˆ: SQL ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©).\u003c/p\u003e\n\u003cp\u003eì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ì—ì„œ CRUD ì‘ì—…ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì—ì„œ ë¶„ë¦¬í•˜ëŠ” ì‚¬ìš©ì ì €ì¥ì†Œë¥¼ ì¶”ê°€ë¡œ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì €, ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ëœ ì¶”ìƒí™” Repositoryë¥¼ ì‘ì„±í•  ê²ƒì…ë‹ˆë‹¤. ì´ RepositoryëŠ” ë‹¤ì–‘í•œ ë°ì´í„° ì†ŒìŠ¤ ìœ í˜•ì—ì„œ í™•ì¥ë  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/repositories/Repository.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIDataProvider\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../data_providers/IDataProvider\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRepository\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e\u003e {\n  protected \u003cspan class=\"hljs-attr\"\u003e_provider\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eIDataProvider\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e\u003e;\n\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eargs: {provider: IDataProvider\u0026#x3C;Resource\u003e}\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_provider\u003c/span\u003e = args.\u003cspan class=\"hljs-property\"\u003eprovider\u003c/span\u003e;\n  };\n\n  public \u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eprovider\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eIDataProvider\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_provider\u003c/span\u003e;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRepositoryì—ì„œ íŒŒìƒëœ í´ë˜ìŠ¤ëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ê³„ì¸µì„ í˜•ì„±í•˜ëŠ” IDataProviderë¥¼ êµ¬í˜„í•˜ëŠ” ì œê³µì(provider)ë¥¼ ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  UserRepository í´ë˜ìŠ¤ëŠ” Repositoryë¥¼ í™•ì¥í•˜ê³  ì‚¬ìš©ì ë°ì´í„°ì™€ ìƒí˜¸ì‘ìš©í•˜ëŠ” ìì²´ public ë©”ì„œë“œë¥¼ ê°–ìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ìì„¸íˆ ì‚´í´ë´…ì‹œë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/repositories/UserRepository.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eIDataProvider\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../data_providers/IDataProvider\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRepository\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./Repository\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { randomUUID } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"crypto\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eInMemoryDataProvider\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../data_providers/InMemoryDataProvider\"\u003c/span\u003e;\n\ntype \u003cspan class=\"hljs-title class_\"\u003eUserData\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: string,\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: string,\n  \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: string,\n  \u003cspan class=\"hljs-attr\"\u003ecreatedAt\u003c/span\u003e: string,\n  \u003cspan class=\"hljs-attr\"\u003eupdatedAt\u003c/span\u003e: string\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserResource\u003c/span\u003e {\n  private \u003cspan class=\"hljs-attr\"\u003e_id\u003c/span\u003e: string;\n\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eprivate _data: UserData\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_id\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003erandomUUID\u003c/span\u003e();\n  };\n\n  public \u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eid\u003c/span\u003e(): string {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_id\u003c/span\u003e;\n  }\n\n  public \u003cspan class=\"hljs-keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edata\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eUserData\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003e_data\u003c/span\u003e;\n  }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserRepository\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eRepository\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eUserResource\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eargs: {provider: IDataProvider\u0026#x3C;UserResource\u003e}\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003esuper\u003c/span\u003e({\u003cspan class=\"hljs-attr\"\u003eprovider\u003c/span\u003e: args.\u003cspan class=\"hljs-property\"\u003eprovider\u003c/span\u003e});\n  }\n\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreateUser\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003euser: UserResource\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eprovider\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateData\u003c/span\u003e(user);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n  }\n\n  public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetUserBy\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003eargs: {id: string, matchField: string}\u003c/span\u003e) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eprovider\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ereadData\u003c/span\u003e({\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: args.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ematchField\u003c/span\u003e: args.\u003cspan class=\"hljs-property\"\u003ematchField\u003c/span\u003e});\n  }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e dataProvider = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eInMemoryDataProvider\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eUserResource\u003c/span\u003e\u003e();\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userRepository = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserRepository\u003c/span\u003e({\u003cspan class=\"hljs-attr\"\u003eprovider\u003c/span\u003e: dataProvider});\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e userRepository;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì‚¬ìš©ì ë°ì´í„°ì˜ êµ¬ì¡°ëŠ” UserData ìœ í˜•ì— ì˜í•´ ì •ì˜ë˜ë©°, ë¦¬ì†ŒìŠ¤ êµ¬ì¡°ëŠ” UserResource í´ë˜ìŠ¤ì— ì˜í•´ ì •ì˜ë©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” id ë° data ê³µê°œ ì†ì„±ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, creatUser ë° getUserBy ë©”ì„œë“œëŠ” ë°ì´í„° ì•¡ì„¸ìŠ¤ ë ˆì´ì–´ì™€ ìƒí˜¸ ì‘ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê³  ì“°ê¸° ìœ„í•´ IDataProviderì˜ êµ¬í˜„ì„ í†µí•´ ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì°¸ê³ : ìš°ë¦¬ëŠ” InMemoryDataProviderì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ UserRepositoryì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‚˜ì¤‘ì— ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ë ¤ë©´, InMemoryDataProvider ëŒ€ì‹  IDataProvider ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ì œ UserRepositoryë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ API ì—”ë“œí¬ì¸íŠ¸ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë…¼ë¦¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒ ì„¹ì…˜ì—ì„œ ì„¤ëª…ë  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003e1.3 ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ ë¼ìš°íŠ¸\u003c/h2\u003e\n\u003cp\u003eë‹¤ìŒìœ¼ë¡œ, express ë¼ìš°íŠ¸ë¥¼ ëª¨ë‘ ë³´ê´€í•  í´ë”ë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eyarn add bcrypt jwt \u0026#x26;\u0026#x26;\\\nyarn add @types/bcrypt @types/jwt --dev \u0026#x26;\u0026#x26;\\\ncd server/src \u0026#x26;\u0026#x26;\\\nmkdir routes \u0026#x26;\u0026#x26;\\\ncd ./routes \u0026#x26;\u0026#x26;\\\ntouch index.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e user.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì•Œë¦¼: ì¶”ê°€ì ìœ¼ë¡œ npm íŒ¨í‚¤ì§€ bcrypt ë° jwtë¥¼ ì„œë²„ í”„ë¡œì íŠ¸ ë‚´ì— ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™”í•˜ëŠ” ë° bcryptë¥¼ ì‚¬ìš©í•˜ê³ , ì„±ê³µì ì¸ ì‚¬ìš©ì ë“±ë¡ ë° ë¡œê·¸ì¸ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì— ë°˜í™˜ë  ì¸ì¦ í† í°ì„ ìƒì„±í•˜ê¸° ìœ„í•´ jwtë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤. /server ë‚´ë¶€ì˜ í´ë” êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ì´ í‘œì‹œë©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e/server\n  |__ /src\n      |__ ...\n      |__ /routes\n        |__ index.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n        |__ user.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eindex.ts ë‚´ì—ì„œëŠ” ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ëª¨ë“  ê°€ëŠ¥í•œ ê²½ë¡œë¥¼ í¬í•¨í•˜ëŠ” ì¤‘ì•™ ë¼ìš°í„°ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤. í˜„ì¬ëŠ” ë“±ë¡ ë° ë¡œê·¸ì¸ì„ ìœ„í•œ íŠ¹ì • /user ê²½ë¡œë§Œ ê°€ì§ˆ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/routes/index.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ì „ì—­ ì¢…ì†ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e router = \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e userRoute \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./user\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸\u003c/span\u003e\nrouter.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/user\"\u003c/span\u003e, userRoute);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e router;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003euserRouteëŠ” ë‹¤ìŒê³¼ ê°™ì´ user.tsì— êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/routes/user.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ì „ì—­ ì¢…ì†ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-variable constant_\"\u003eENCRYPTION_KEY\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eAUTH_TOKEN_KEY\u003c/span\u003e } = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'express'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userRoute = \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e bcrypt \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'bcrypt'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e jwt \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'jsonwebtoken'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\u003cspan class=\"hljs-title class_\"\u003eUserResource\u003c/span\u003e} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../repositories/UserRepository'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { validateHasParameters, validateEmailFormat, validatePasswordLength } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../middleware/validation\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e userRepository \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../repositories/UserRepository'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e/**\n * ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ë° ì´ë¦„ì„ ì…ë ¥í•˜ì—¬ ì‚¬ìš©ì ë“±ë¡\n */\u003c/span\u003e\nuserRoute.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\"/register\"\u003c/span\u003e,\n  \u003cspan class=\"hljs-title function_\"\u003evalidateHasParameters\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e),\n  validateEmailFormat,\n  validatePasswordLength,\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { name, email, password } = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userExist = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003egetUserBy\u003c/span\u003e({\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: email, \u003cspan class=\"hljs-attr\"\u003ematchField\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'email'\u003c/span\u003e});\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (userExist) {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e409\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"User already exist\"\u003c/span\u003e });\n      }\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e date = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003etoISOString\u003c/span\u003e();\n\n      \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ì ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e passwordHash = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e bcrypt.\u003cspan class=\"hljs-title function_\"\u003ehash\u003c/span\u003e(password, \u003cspan class=\"hljs-variable constant_\"\u003eENCRYPTION_KEY\u003c/span\u003e!);\n\n      \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ì ì •ë³´ì™€ ë§Œë£Œ ë‚ ì§œë¡œ ì¸ì¦ í† í° ìƒì„±\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userData = {\n        \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: name,\n        \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: email,\n        \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: passwordHash,\n        \u003cspan class=\"hljs-attr\"\u003ecreatedAt\u003c/span\u003e: date,\n        \u003cspan class=\"hljs-attr\"\u003eupdatedAt\u003c/span\u003e: date,\n      };\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e newUser = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eUserResource\u003c/span\u003e(userData);\n\n      \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ì ë°ì´í„° ì €ì¥\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003ecreateUser\u003c/span\u003e(newUser);\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e jwtOptions = {\n        \u003cspan class=\"hljs-attr\"\u003eexpiresIn\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'24h'\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// 24ì‹œê°„ í›„ í† í° ë§Œë£Œ\u003c/span\u003e\n      };\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e authToken = jwt.\u003cspan class=\"hljs-title function_\"\u003esign\u003c/span\u003e(newUser.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eAUTH_TOKEN_KEY\u003c/span\u003e!, jwtOptions);\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({\n        \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003euser\u003c/span\u003e: {\n          \u003cspan class=\"hljs-attr\"\u003euser_id\u003c/span\u003e: newUser.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: newUser.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: newUser.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003eauth_token\u003c/span\u003e: authToken,\n        },\n      });\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`ë‚´ë¶€ ì˜¤ë¥˜`\u003c/span\u003e });\n    }\n  }\n);\n\n\u003cspan class=\"hljs-comment\"\u003e/**\n * ì…ë ¥ëœ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ë¡œê·¸ì¸ ì„¸ì…˜ ì¸ì¦\n */\u003c/span\u003e\nuserRoute.\u003cspan class=\"hljs-title function_\"\u003epost\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\"/login\"\u003c/span\u003e,\n  \u003cspan class=\"hljs-title function_\"\u003evalidateHasParameters\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e),\n  \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { email, password } = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ì ì¡´ì¬ ì—¬ë¶€ ë° ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003egetUserBy\u003c/span\u003e({\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: email, \u003cspan class=\"hljs-attr\"\u003ematchField\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'email'\u003c/span\u003e});\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userExists = !!user;\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e passwordCorrect = userExists \u0026#x26;\u0026#x26; (\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e bcrypt.\u003cspan class=\"hljs-title function_\"\u003ecompare\u003c/span\u003e(password, user.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003epassword\u003c/span\u003e));\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(userExists \u0026#x26;\u0026#x26; passwordCorrect) {\n\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e jwtOptions = {\n          \u003cspan class=\"hljs-attr\"\u003eexpiresIn\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'24h'\u003c/span\u003e,  \u003cspan class=\"hljs-comment\"\u003e// 24ì‹œê°„ í›„ í† í° ë§Œë£Œ\u003c/span\u003e\n        };\n\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e authToken = jwt.\u003cspan class=\"hljs-title function_\"\u003esign\u003c/span\u003e(user.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e, \u003cspan class=\"hljs-variable constant_\"\u003eAUTH_TOKEN_KEY\u003c/span\u003e!, jwtOptions);\n\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({\n          \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n          \u003cspan class=\"hljs-attr\"\u003euser\u003c/span\u003e: {\n            \u003cspan class=\"hljs-attr\"\u003euser_id\u003c/span\u003e: user.\u003cspan class=\"hljs-property\"\u003eid\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: user.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: user.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eauth_token\u003c/span\u003e: authToken,\n          },\n        });\n      }\n\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({\u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'ì˜ëª»ëœ ì¸ì¦ ì •ë³´'\u003c/span\u003e});\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e500\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`ì„œë²„ ì˜¤ë¥˜`\u003c/span\u003e });\n    }\n  }\n);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e userRoute;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePOST /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ì— ì´ë¦„, ì´ë©”ì¼ ë° ë¹„ë°€ë²ˆí˜¸ ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì´ë©”ì¼ì„ í†µí•´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œ í›„, ì°¸ì´ë©´ ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì €ì¥ì„ ìœ„í•´ ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„° userDataë¥¼ ìƒì„±í•˜ë©°, ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ëŠ” ì´ì „ì— ì„¤ì¹˜í•œ bcryptë¥¼ ì‚¬ìš©í•˜ì—¬ ENCRYPTION_KEYë¡œ ì•”í˜¸í™”ë©ë‹ˆë‹¤. ì‚¬ìš©ì ë°ì´í„°ì˜ ì§€ì†ì„±ì€ userRepository.createUserë¥¼ ì‚¬ìš©í•˜ì—¬ ìˆ˜í–‰í•˜ë©°, ì‚¬ìš©ì ìƒì„±ì´ ì„±ê³µí•˜ë©´ 24ì‹œê°„ ë§Œë£Œ ê¸°ê°„ì´ ìˆëŠ” JWT í† í°ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. JWT í† í°ì€ ì´ì „ì— ì„¤ì¹˜í•œ jwtë¥¼ ì‚¬ìš©í•˜ì—¬ AUTH_TOKEN_KEYë¡œ ì„œëª…ë˜ë©° ì‚¬ìš©ì ê´€ë ¨ ë°ì´í„°ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ê°€ ì„œë²„ ì‘ë‹µì„ ë°›ìœ¼ë©´ ì´ JWT í† í°ì´ í”„ë¡ íŠ¸ì—”ë“œì— ì €ì¥ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003ePOST /user/login ì—”ë“œí¬ì¸íŠ¸ì—ì„œëŠ” ìš”ì²­ ë³¸ë¬¸ ë‚´ emailê³¼ password ì„¸ ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ë¨¼ì € ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê³  ì œê³µëœ ë¹„ë°€ë²ˆí˜¸ê°€ í•´ë‹¹ ì‚¬ìš©ì ì´ë©”ì¼ì— ëŒ€í•´ ì°¾ì€ ë³µí˜¸í™”ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì„±ê³µì ì¸ ì‚¬ìš©ì ìœ íš¨ì„± ê²€ì‚¬ í›„, ë™ì¼í•œ JWT ì„œëª… í”„ë¡œì„¸ìŠ¤ê°€ ë°˜ë³µë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003e/register ë° /login ì—”ë“œí¬ì¸íŠ¸ì— ëŒ€í•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬ìš© ë¯¸ë“¤ì›¨ì–´ë„ êµ¬í˜„í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œì•˜ì„ ê²ë‹ˆë‹¤. ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•´ /middleware ë””ë ‰í† ë¦¬ì™€ ê·¸ ì•ˆì— validation.ts íŒŒì¼ì„ ìƒì„±í•´ ë³´ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd server/src \u0026#x26;\u0026#x26;\\\nmkdir middleware \u0026#x26;\u0026#x26;\\\ntouch validation.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003evalidation.ts íŒŒì¼ì—ì„œëŠ” ì‚¬ìš©ì ì…ë ¥ì„ ê²€ì¦í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë“¤ì„ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/middleware/validation.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNextFunction\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003evalidateHasParameters\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e...args: string[]\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response, next: NextFunction\u003c/span\u003e) =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e body = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e valid = \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e;\n\n    \u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e arg \u003cspan class=\"hljs-keyword\"\u003eof\u003c/span\u003e args) {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (body[arg] === \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e) {\n        res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: arg + \u003cspan class=\"hljs-string\"\u003e\" not specified\"\u003c/span\u003e });\n        valid = \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e;\n        \u003cspan class=\"hljs-keyword\"\u003ebreak\u003c/span\u003e;\n      }\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (valid) {\n      \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n    }\n  };\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003evalidatePasswordLength\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response, next: NextFunction\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { password } = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!!password \u0026#x26;\u0026#x26; password.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e \u003e \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e) {\n    \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"The password provided is not valid\"\u003c/span\u003e });\n  }\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003evalidateEmailFormat\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003ereq: Request, res: Response, next: NextFunction\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { email } = req.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e re =\n    \u003cspan class=\"hljs-regexp\"\u003e/^(([^\u0026#x3C;\u003e()[\\]\\\\.,;:\\s@\"]+(\\.[^\u0026#x3C;\u003e()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!!email \u0026#x26;\u0026#x26; re.\u003cspan class=\"hljs-title function_\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(email).\u003cspan class=\"hljs-title function_\"\u003etoLowerCase\u003c/span\u003e())) {\n    \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n  } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n    res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"The email provided is not valid\"\u003c/span\u003e });\n  }\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003evalidateHasParameterì€ ëª¨ë“  POST ìš”ì²­ì— ì‚¬ìš©ë˜ë©° íŠ¹ì • ë§¤ê°œë³€ìˆ˜ê°€ ì œì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. validatePasswordLength ë° validateEmailFormat ë¯¸ë“¤ì›¨ì–´ëŠ” /user/register ì—”ë“œí¬ì¸íŠ¸ì—ì„œ ìš”ì²­ì— ëŒ€í•´ ìœ íš¨í•œ ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ì™€ ì´ë©”ì¼ í˜•ì‹ì„ ë³´ì¥í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ, app.tsì—ì„œ routesë¥¼ ì‚¬ìš©í•˜ì—¬ ë£¨í„°ë¥¼ express ì•±ì— ì—°ê²°í•´ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ì— í‘œì‹œëœëŒ€ë¡œ routesë¥¼ íŒŒì¼ ë§¨ ìœ„ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì— ìœ ì˜í•˜ì‹­ì‹œì˜¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* app.ts */\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ì „ì—­ ì¢…ì†ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"dotenv\"\u003c/span\u003e;\ndotenv.\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ ì´ˆê¸°í™”\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e routes \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./routes\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// express ì•± ì„¤ì •\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e express \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e app = \u003cspan class=\"hljs-title function_\"\u003eexpress\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment\"\u003e// ë¯¸ë“¤ì›¨ì–´\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(express.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e());\n\n\u003cspan class=\"hljs-comment\"\u003e// ë¼ìš°í„°\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(routes);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e app;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ì œ ì‚¬ìš©ìê°€ ë°©ê¸ˆ ë§Œë“  ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ë“±ë¡í•˜ê³  ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ì„¹ì…˜ì—ì„œëŠ” ì„œë²„ ì¸¡ì—ì„œ ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì‚¬ìš©ì ê¶Œí•œ ì¶”ì ì„ ë‹¤ë£° ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003e1.4 ì‚¬ìš©ì ê¶Œí•œ\u003c/h2\u003e\n\u003cp\u003eì‚¬ìš©ì ê¶Œí•œì€ ì¸ì¦ëœ ì‚¬ìš©ìê°€ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  ì‹œë„í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” ì‚¬ìš©ì ë“±ë¡ ë˜ëŠ” ë¡œê·¸ì¸ ì´ë²¤íŠ¸ì—ì„œ ìƒì„±ëœ í† í°ì´ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‹œì‘ëœ ëª¨ë“  ìš”ì²­ì— ì²¨ë¶€ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. í† í°ì€ ê° ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì € ì„¸ì…˜ì—ì„œ ì‚¬ìš©ëœ AUTH_TOKEN_KEYì™€ ê°™ì€ ê²ƒìœ¼ë¡œ í™•ì¸ë  ê²ƒì…ë‹ˆë‹¤. ì•ìœ¼ë¡œ í† í°ì´ ìš”ì²­ê³¼ í•¨ê»˜ ì „ë‹¬ë˜ëŠ” ë°©ë²•ì„ ë‚˜ì¤€ì— ë‹¤ë£° ê²ƒì´ë©°, ì§€ê¸ˆì€ ì„œë²„ ì¸¡ì—ì„œ ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©ì ê¶Œí•œì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì„œë²„/src/middleware ë””ë ‰í† ë¦¬ ì•ˆì— auth.tsë¼ëŠ” ì¶”ê°€ íŒŒì¼ì„ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd server/src/middleware \u0026#x26;\u0026#x26; touch auth.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eauth.ts íŒŒì¼ ì•ˆì—ëŠ” ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì„ ê°€ë¡œì±„ê³  í† í° ìœ íš¨ì„± ê²€ì‚¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•˜ëŠ” checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ ì •ì˜í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/middleware/auth.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ì „ì—­ ì˜ì¡´ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e jwt, { \u003cspan class=\"hljs-title class_\"\u003eJwtPayload\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'jsonwebtoken'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { \u003cspan class=\"hljs-variable constant_\"\u003eAUTH_TOKEN_KEY\u003c/span\u003e } = process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e userRepository \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../repositories/UserRepository'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003echeckAuthToken\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003ereq: any, res: any, next: any\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e auth_token = req.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"x-access-token\"\u003c/span\u003e] \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e string;\n\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!auth_token) {\n      \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Unauthorized'\u003c/span\u003e);\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e decodedUserInfo = jwt.\u003cspan class=\"hljs-title function_\"\u003everify\u003c/span\u003e(auth_token, \u003cspan class=\"hljs-variable constant_\"\u003eAUTH_TOKEN_KEY\u003c/span\u003e!) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eJwtPayload\u003c/span\u003e;\n    \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e userRepository.\u003cspan class=\"hljs-title function_\"\u003egetUserBy\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: decodedUserInfo.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ematchField\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'email'\u003c/span\u003e });\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e(!user) {\n      \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Unauthorized'\u003c/span\u003e);\n    }\n\n    req.\u003cspan class=\"hljs-property\"\u003euser\u003c/span\u003e = {...user.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e, ...decodedUserInfo};\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e403\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e({\u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Unauthorized'\u003c/span\u003e});\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e();\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eí™•ì¸í•  í† í°ì€ ìš”ì²­ í—¤ë” X-ACCESS-TOKEN ì•ˆì— í¬í•¨ë  ê²ƒì…ë‹ˆë‹¤. ì¶”ì¶œëœ í† í°ì€ AUTH_TOKEN_KEYë¥¼ ì‚¬ìš©í•˜ì—¬ ê²€ì¦ë˜ë©°, í•´ë‹¹ ë°ì´í„° í˜ì´ë¡œë“œëŠ” decodedUserInfoì— í• ë‹¹ë  ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì œì¶œëœ í† í°ì˜ ìœ íš¨ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ë°ì´í„° ì €ì¥ì†Œì— ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ ì¶”ê°€ë¡œ í™•ì¸í•  ê²ƒì…ë‹ˆë‹¤. í† í° ìœ íš¨ì„± ê²€ì‚¬ì— ì‹¤íŒ¨í•˜ë©´ 403 ì˜¤ë¥˜ 'Unauthorized' ë©”ì‹œì§€ë¡œ ì‘ë‹µí•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì¸ì¦ ë…¼ë¦¬ë¥¼ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ ë³´í˜¸ëœ ì„œë²„ ë¦¬ì†ŒìŠ¤ë¥¼ í‰ë‚´ ë‚´ëŠ” ë”ë¯¸ /resource API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ resource.ts íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd server/src/routes \u0026#x26;\u0026#x26; touch resource.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eresource.ts íŒŒì¼ì˜ ë‚´ìš©ì€ ê°„ë‹¨í•˜ë©° ë‹¨ì¼ GET ì—”ë“œí¬ì¸íŠ¸ë¡œ êµ¬ì„±ë˜ì–´ ì¼ë¶€ ì •ì  HTMLì„ ë°˜í™˜í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/routes/resource.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e resourceRoute = \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e();\n\nresourceRoute.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e, \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (req, res) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e res.\u003cspan class=\"hljs-title function_\"\u003estatus\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e).\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"\u0026#x3C;h1\u003eYou have successfully access resource!\u0026#x3C;/h1\u003e\"\u003c/span\u003e);\n});\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e resourceRoute;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eserver/src/routes/index.ts íŒŒì¼ ì•ˆì— /resource ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// server/src/routes/index.ts\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ì „ì—­ ì˜ì¡´ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e router = \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e();\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e userRoute \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./user\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e resourceRoute \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./resource\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { checkAuthToken } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../middleware/auth\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// APIì— ëŒ€í•œ ëª¨ë“  ë¼ìš°íŠ¸\u003c/span\u003e\nrouter.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/user\"\u003c/span\u003e, userRoute);\nrouter.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/resource\"\u003c/span\u003e, checkAuthToken, resourceRoute);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e router;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë˜í•œ checkAuthToken ë¯¸ë“¤ì›¨ì–´ë¥¼ importí•˜ê³  /resource ì—”ë“œí¬ì¸íŠ¸ì™€ ì—°ê²°í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ í•´ë‹¹ ì—”ë“œí¬ì¸íŠ¸ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì´ í† í° ê¶Œí•œ ë¶€ì—¬ë¥¼ ìœ„í•´ ìœ íš¨ì„±ì„ ê²€ì‚¬ë°›ë„ë¡ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003e1.5 CORS êµ¬í˜„\u003c/h2\u003e\n\u003cp\u003eì•ì„œ ë§í•œ íŠœí† ë¦¬ì–¼ì˜ ì œ1ë¶€ì—ì„œëŠ” CORS ê·œì¹™ì´ ì„œë²„ì— ì˜í•´ ì§€ì •ë˜ì–´ íŠ¹ì • ì¶œì²˜ ë„ë©”ì¸ìœ¼ë¡œë¶€í„°ì˜ ìš”ì²­ì„ í—ˆìš©í•  ìˆ˜ ìˆë„ë¡í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ ì™¸ë¶€ íŒ¨í‚¤ì§€ì¸ corsë¥¼ ì‚¬ìš©í•  ê²ƒì´ë©°, ë”°ë¼ì„œ ë‹¤ìŒ ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ ë¨¼ì € ì„œë²„ í”„ë¡œì íŠ¸ì— ì¶”ê°€í•´ì•¼í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd server \u0026#x26;\u0026#x26; yarn add cors \u0026#x26;\u0026#x26; yarn add @types/cors --dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì‹¤ì œ CORS ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ì´ ì„œë²„/src/app.tsì—ì„œ ë¯¸ë“¤ì›¨ì–´ë¡œ ì§€ì •ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* app.ts */\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// global dependencies\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e * \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"dotenv\"\u003c/span\u003e;\ndotenv.\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// ë¡œì»¬ .env íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e cors \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"cors\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// project dependencies\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e routes \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./routes\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// express ì•± ì„¤ì •\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e express \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"express\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e app = \u003cspan class=\"hljs-title function_\"\u003eexpress\u003c/span\u003e();\n\n\u003cspan class=\"hljs-comment\"\u003e// CORS ì„¤ì •\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(\n  \u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e,\n  \u003cspan class=\"hljs-title function_\"\u003ecors\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003eorigin\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e, \u003cspan class=\"hljs-comment\"\u003e// ì°¸ê³ : ì—¬ê¸°ì„œ ëª¨ë“  ì¶œì²œì„ í—ˆìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eoptionsSuccessStatus\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003epreflightContinue\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003emethods\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"GET,POST,OPTIONS\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ecredentials\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  })\n);\n\n\u003cspan class=\"hljs-comment\"\u003e// ë¯¸ë“¤ì›¨ì–´\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(express.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e());\n\n\u003cspan class=\"hljs-comment\"\u003e// ë¼ìš°íŠ¸\u003c/span\u003e\napp.\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(routes);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e app;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •ì€ origin: trueë¡œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ëª¨ë“  ë„ë©”ì¸ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•©ë‹ˆë‹¤. ì´ ì„¤ì •ì€ ë¡œì»¬ ê°œë°œì— ì¶©ë¶„í•˜ì§€ë§Œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” í”„ë¡œì íŠ¸ë³„ ë„ë©”ì¸ ëª©ë¡ì—ì„œ ìš”ì²­ì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ ì„œë²„ì— í•„ìš”í•œ ëª¨ë“  ì‘ì—…ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ë‹¤ìŒì—ëŠ” ì‚¬ìš©ìê°€ ì„œë²„ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìƒí˜¸ ì‘ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸ì¸ í¼ì„ êµ¬í˜„í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003e2. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì„¤ì •\u003c/h1\u003e\n\u003ch2\u003e2.1 ì¢…ì†ì„± ì„¤ì¹˜\u003c/h2\u003e\n\u003cp\u003eì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•´ ìš°ë¦¬ëŠ” React ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•˜ê¸° ìœ„í•´ ./authentication-and-authorization í´ë”ì— ë³„ë„ì˜ í´ë”ë¥¼ ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003emkdir ui \u0026#x26;\u0026#x26; cd ui\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e/ui ë””ë ‰í† ë¦¬ ë‚´ì—ì„œ Typescriptë¥¼ í™œì„±í™”í•œ React í”„ë¡œì íŠ¸ë¥¼ ì„¤ì •í•˜ê¸° ìœ„í•´ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•˜ì‹­ì‹œì˜¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eyarn create react-app ./ --template typescript\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì„¤ì¹˜ í”„ë¡œì„¸ìŠ¤ê°€ ì™„ë£Œë˜ë©´ '/ui' í´ë” ë‚´ ë¶ˆí•„ìš”í•œ íŒŒì¼ë“¤ì„ ì •ë¦¬í•˜ê³  ì•„ë˜ì— í‘œì‹œëœ ë””ë ‰í† ë¦¬ì™€ ë™ì¼í•˜ê²Œ ë³´ì´ë„ë¡ ì¡°ì •í•  ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e/ui\n  |__ /node_modules\n      |__ ...\n  |__ /public\n      |__ favicon.\u003cspan class=\"hljs-property\"\u003eico\u003c/span\u003e\n      |__ index.\u003cspan class=\"hljs-property\"\u003ehtml\u003c/span\u003e\n      |__ logo192.\u003cspan class=\"hljs-property\"\u003epng\u003c/span\u003e\n      |__ logo512.\u003cspan class=\"hljs-property\"\u003epng\u003c/span\u003e\n      |__ manifest.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n      |__robots.\u003cspan class=\"hljs-property\"\u003etxt\u003c/span\u003e\n  |__ /src\n      |__ \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecss\u003c/span\u003e\n      |__ \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etsx\u003c/span\u003e\n      |__ index.\u003cspan class=\"hljs-property\"\u003ecss\u003c/span\u003e\n      |__ index.\u003cspan class=\"hljs-property\"\u003etsx\u003c/span\u003e\n      |__ react-app-env.\u003cspan class=\"hljs-property\"\u003ed\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n  |__ .\u003cspan class=\"hljs-property\"\u003egitignore\u003c/span\u003e\n  |__ package.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n  |-- \u003cspan class=\"hljs-variable constant_\"\u003eREADME\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003emd\u003c/span\u003e\n  |__ tsconfig.\u003cspan class=\"hljs-property\"\u003ejson\u003c/span\u003e\n  |__ yarn.\u003cspan class=\"hljs-property\"\u003elock\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eindex.tsxì™€ App.tsxì—ì„œ ë¶ˆí•„ìš”í•œ ì½”ë“œì™€ ì˜ëª»ëœ importë¥¼ ì œê±°í•˜ì—¬ ì•„ë˜ì— í‘œì‹œëœ íŒŒì¼ê³¼ ë™ì¼í•˜ê²Œ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* index.tsx */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'react'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReactDOM\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'react-dom/client'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./index.css'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./App'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e root = \u003cspan class=\"hljs-title class_\"\u003eReactDOM\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateRoot\u003c/span\u003e(\n  \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetElementById\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'root'\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHTMLElement\u003c/span\u003e\n);\nroot.\u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\n  \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eReact.StrictMode\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eApp\u003c/span\u003e /\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eReact.StrictMode\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* App.tsx */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./App.css\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"App\"\u003c/span\u003e\u003e\u003c/span\u003eì•ˆë…•\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì¢‹ì€ ì†Œì‹ì€ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ ëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìœ¼ë©° ì´ì œ ì‹¤ì œ ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ì¤€ë¹„ê°€ ë˜ì—ˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤!\u003c/p\u003e\n\u003ch2\u003e2.2 ì „ì—­ ì¸ì¦ ìƒíƒœ ê´€ë¦¬\u003c/h2\u003e\n\u003cp\u003eì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ë ¤ë©´ ì¸í„°í˜ì´ìŠ¤ê°€ ì‚¬ìš©ìì˜ ì¸ì¦ ìƒíƒœì— ëŒ€í•´ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ React Contextì™€ useReducer í›…ì„ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ìƒíƒœë¡œ ê´€ë¦¬í•  ê²ƒì…ë‹ˆë‹¤. ë¨¼ì € ui/src/ ì•ˆì— ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ ìœ„í•œ ìŠ¤í† ì–´ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd ui/src \u0026#x26;\u0026#x26;\\\nmkdir store \u0026#x26;\u0026#x26;\\\ncd store \u0026#x26;\u0026#x26; mkdir auth \u0026#x26;\u0026#x26;\\\ntouch authAction.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthContextProvier\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etsx\u003c/span\u003e authReducer.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eauthAction.tsëŠ” ì‚¬ìš©ìê°€ ì¸í„°í˜ì´ìŠ¤ ë‚´ì—ì„œ íŠ¸ë¦¬ê±°í•  ìˆ˜ ìˆëŠ” ê°€ëŠ¥í•œ ì•¡ì…˜ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/store/auth/authActions.ts */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e enum \u003cspan class=\"hljs-title class_\"\u003eAuthActionEnum\u003c/span\u003e {\n  \u003cspan class=\"hljs-variable constant_\"\u003eLOG_IN\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e'LOG_IN'\u003c/span\u003e,\n  \u003cspan class=\"hljs-variable constant_\"\u003eLOG_OUT\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e'LOG_OUT'\u003c/span\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e type \u003cspan class=\"hljs-title class_\"\u003eAuthAction\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAuthActionEnum\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eLOG_IN\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003eauthToken\u003c/span\u003e: string;\n    \u003cspan class=\"hljs-attr\"\u003euserId\u003c/span\u003e: string;\n    \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: string;\n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: string;\n  }\n} | {\n  \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAuthActionEnum\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eLOG_OUT\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e,\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eauthReducer.ts ë‚´ë¶€ì—ì„œëŠ” ì¸ì¦ ê´€ë ¨ ì•¡ì…˜ì„ í•´ë‹¹ ìƒíƒœë¡œ ë§¤í•‘í•˜ëŠ” ë¦¬ë“€ì„œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/store/auth/authReducer.ts */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eReducer\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAuthAction\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./authActions\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e interface \u003cspan class=\"hljs-title class_\"\u003eAuthState\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003eisLoggedIn\u003c/span\u003e: boolean;\n  authToken?: string;\n  userId?: string;\n  name?: string;\n  email?: string;\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003edefaultAuthState\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAuthState\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eisLoggedIn\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eauthReducer\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eReducer\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eAuthState\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eAuthAction\u003c/span\u003e\u003e = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003estate, action\u003c/span\u003e) =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì¸ì¦ë˜ë©´\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (action.\u003cspan class=\"hljs-property\"\u003etype\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e\"LOG_IN\"\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003elocalStorage\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esetItem\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e(action.\u003cspan class=\"hljs-property\"\u003epayload\u003c/span\u003e));\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n      ...state,\n      \u003cspan class=\"hljs-attr\"\u003eisLoggedIn\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003eauthToken\u003c/span\u003e: action.\u003cspan class=\"hljs-property\"\u003epayload\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauthToken\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003euserId\u003c/span\u003e: action.\u003cspan class=\"hljs-property\"\u003epayload\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euserId\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: action.\u003cspan class=\"hljs-property\"\u003epayload\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e,\n      \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: action.\u003cspan class=\"hljs-property\"\u003epayload\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e,\n    };\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (action.\u003cspan class=\"hljs-property\"\u003etype\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e\"LOG_OUT\"\u003c/span\u003e) {\n    \u003cspan class=\"hljs-variable language_\"\u003elocalStorage\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eremoveItem\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e defaultAuthState;\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e defaultAuthState;\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e authReducer;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eê¸°ë³¸ ìƒíƒœëŠ” falseë¡œ ì„¤ì •ëœ í•˜ë‚˜ì˜ í•„ë“œì¸ isLoggedInìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì¸ì¦ì„ í•œ ë²ˆí•˜ë©´ ë¦¬ë“€ì„œëŠ” LOG_IN ì•¡ì…˜ì„ ì²˜ë¦¬í•˜ê³  ì‚¬ìš©ì ê´€ë ¨ ì •ë³´ë¥¼ localStorageì— ìœ ì§€í•˜ë©° ìƒˆ ì¸ì¦ ìƒíƒœë¥¼ ë°˜í™˜í•˜ì—¬ ë™ì¼í•œ ì •ë³´ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ì‚¬ìš©ì ì •ë³´ë¥¼ ê³„ì† ìœ ì§€í•´ì•¼ í•˜ëŠ” ì´ìœ ëŠ” ì‚¬ìš©ìê°€ í˜ì´ì§€ë¥¼ ë‚˜ê°€ê³  ë‚˜ì¤‘ì— ë°©ë¬¸í•  ë•Œ ì¸ì¦ ìƒíƒœê°€ ìœ ì§€ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. LOG_OUT ì•¡ì…˜ì€ ë¦¬ë“€ì„œì— ì˜í•´ ì²˜ë¦¬ë˜ì–´ ëª¨ë“  ìƒíƒœ ë° ì €ì¥ëœ ì‚¬ìš©ì ì •ë³´ê°€ ê¸°ë³¸ ê°’ìœ¼ë¡œ ì¬ì„¤ì •ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì´ì œ ì•¡ì…˜ê³¼ ë¦¬ë“€ì„œê°€ ì •ì˜ë˜ì—ˆìœ¼ë¯€ë¡œ AuthContextProvider.tsxì—ì„œ ì „ì²´ ì‘ìš© í”„ë¡œê·¸ë¨ì— ì¸ì¦ ìƒíƒœë¥¼ ì œê³µí•˜ëŠ” ì»¨í…ìŠ¤íŠ¸ ì œê³µì êµ¬ì„± ìš”ì†Œë¥¼ ë§Œë“­ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/store/auth/AuthContextProvider.tsx */\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ì „ì—­ ê°€ì ¸ì˜¤ê¸°\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { createContext, useReducer, useCallback, useEffect } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useNavigate } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// í”„ë¡œì íŠ¸ ì¢…ì†ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAuthActionEnum\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./authActions\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e authReducer, { \u003cspan class=\"hljs-title class_\"\u003eAuthState\u003c/span\u003e, defaultAuthState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./authReducer\"\u003c/span\u003e;\n\ntype \u003cspan class=\"hljs-title class_\"\u003eAuthProviderProps\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003echildren\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eReactElement\u003c/span\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e type \u003cspan class=\"hljs-title class_\"\u003eUserData\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eauthToken\u003c/span\u003e: string,\n  \u003cspan class=\"hljs-attr\"\u003euserId\u003c/span\u003e: string,\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: string,\n  \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: string,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e interface \u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003eauthState\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAuthState\u003c/span\u003e;\n  \u003cspan class=\"hljs-attr\"\u003eglobalLogInDispatch\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eprops: UserData\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e;\n  \u003cspan class=\"hljs-attr\"\u003eglobalLogOutDispatch\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-comment\"\u003e// Auth ì»¨í…ìŠ¤íŠ¸\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e authCtx =\n  createContext \u0026#x3C;\n  \u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e \u003e\n  {\n    \u003cspan class=\"hljs-attr\"\u003eauthState\u003c/span\u003e: defaultAuthState,\n    \u003cspan class=\"hljs-attr\"\u003eglobalLogInDispatch\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {},\n    \u003cspan class=\"hljs-attr\"\u003eglobalLogOutDispatch\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {},\n  };\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eAuthContextProvider\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eprops: AuthProviderProps\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { children } = props;\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [authState, authDispatch] = \u003cspan class=\"hljs-title function_\"\u003euseReducer\u003c/span\u003e(authReducer, defaultAuthState);\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e navigate = \u003cspan class=\"hljs-title function_\"\u003euseNavigate\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-comment\"\u003e// ì‚¬ìš©ì ì„¸ë¶€ ì •ë³´ê°€ ì§€ì†ë˜ëŠ”ì§€ í™•ì¸, ëŒ€ë¶€ë¶„ ë¸Œë¼ìš°ì € ìƒˆë¡œ ê³ ì¹¨ì— ëŒ€ì‘\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e user = \u003cspan class=\"hljs-variable language_\"\u003elocalStorage\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetItem\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (user) {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003euserData\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUserData\u003c/span\u003e = \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eparse\u003c/span\u003e(user);\n      \u003cspan class=\"hljs-title function_\"\u003eauthDispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAuthActionEnum\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eLOG_IN\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: userData });\n    }\n  }, []);\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e globalLogInDispatch = \u003cspan class=\"hljs-title function_\"\u003euseCallback\u003c/span\u003e(\n    \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eprops: UserData\u003c/span\u003e) =\u003e\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { authToken, email, name, userId } = props;\n      \u003cspan class=\"hljs-title function_\"\u003eauthDispatch\u003c/span\u003e({\n        \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAuthActionEnum\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eLOG_IN\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: {\n          authToken,\n          userId,\n          name,\n          email,\n        },\n      });\n      \u003cspan class=\"hljs-title function_\"\u003enavigate\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/resource\"\u003c/span\u003e);\n    },\n    [navigate]\n  );\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e globalLogOutDispatch = \u003cspan class=\"hljs-title function_\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_\"\u003eauthDispatch\u003c/span\u003e({ \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eAuthActionEnum\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eLOG_OUT\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e });\n    \u003cspan class=\"hljs-title function_\"\u003enavigate\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/user/login\"\u003c/span\u003e);\n  }, [navigate]);\n\n  \u003cspan class=\"hljs-comment\"\u003e// í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•  ì»¨í…ìŠ¤íŠ¸ ê°’\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e ctx = {\n    authState,\n    globalLogInDispatch,\n    globalLogOutDispatch,\n  };\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eauthCtx.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{ctx}\u003c/span\u003e\u003e\u003c/span\u003e{children}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eauthCtx.Provider\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e;\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e authCtx;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAuthContextProvider ì»´í¬ë„ŒíŠ¸ëŠ” authState ë° ê´€ë ¨ ë””ìŠ¤íŒ¨ì¹˜ ë©”ì„œë“œë¥¼ authCtx ì»¨í…ìŠ¤íŠ¸ ë‚´ì˜ ëª¨ë“  ìì‹ ì»´í¬ë„ŒíŠ¸ì— ì œê³µí•˜ëŠ” Higher Order Component (HOC)ì…ë‹ˆë‹¤. globalLogInDispatchì™€ globalLogOutDispatch í•¨ìˆ˜ëŠ” ê°ê° LOG_IN ë° LOG_OUT ì•¡ì…˜ì„ ë¦¬ë“€ì„œì— ë””ìŠ¤íŒ¨ì¹˜í•˜ì—¬ ì¸ì¦ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ì¸ì¦ ì•¡ì…˜ì´ ë””ìŠ¤íŒ¨ì¹˜ë  ë•Œ í•´ë‹¹ ê²½ë¡œë¡œ ì´ë™í•˜ê¸° ìœ„í•´ react-router-domë„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, ì‚¬ìš©ìê°€ ì´ì „ì— ë¡œê·¸ì¸í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  í•„ìš”í•  ê²½ìš° localStorageì— ì €ì¥ëœ ì •ë³´ë¥¼ ì°¾ì•„ LOG_IN ì•¡ì…˜ì„ ë””ìŠ¤íŒ¨ì¹˜í•˜ëŠ” useEffect í›…ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eë§ˆì§€ë§‰ ë‹¨ê³„ëŠ” index.tsxì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ AuthContextProviderë¡œ ë˜í•‘í•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* index.tsx */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReactDOM\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'react-dom/client'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'react'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./index.css'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./App'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eBrowserRouter\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'react-router-dom'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAuthContextProvider\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./store/auth/AuthContextProvider'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e root = \u003cspan class=\"hljs-title class_\"\u003eReactDOM\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateRoot\u003c/span\u003e(\n  \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetElementById\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'root'\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eHTMLElement\u003c/span\u003e\n);\nroot.\u003cspan class=\"hljs-title function_\"\u003erender\u003c/span\u003e(\n  \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eReact.StrictMode\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eBrowserRouter\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eAuthContextProvider\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eApp\u003c/span\u003e /\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eAuthContextProvider\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eBrowserRouter\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eReact.StrictMode\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e2.3 ì„œë²„ì™€ í†µì‹ í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eì¸ì¦ ìƒíƒœ ê´€ë¦¬ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ ì´ì œ ë‚´ë¶€ ë©”ëª¨ë¦¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ê²€ìƒ‰í•´ì•¼ í•˜ëŠ” ì„œë²„ì™€ì˜ í†µì‹ ì— ì§‘ì¤‘í•´ ë´…ì‹œë‹¤. ì´ë¥¼ ìœ„í•´ React ì»´í¬ë„ŒíŠ¸ì—ì„œ ì„œë²„ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ëŠ” ë…¼ë¦¬ë¥¼ ëª¨ë‘ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ useApië¼ëŠ” ì»¤ìŠ¤í…€ í›…ì„ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤. ui/src ë‚´ë¶€ì— ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆëŠ” ê´€ë ¨ íŒŒì¼ì´ ìˆëŠ” hooks í´ë”ë¥¼ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd ui/src \u0026#x26;\u0026#x26; mkdir hooks \u0026#x26;\u0026#x26; cd hooks \u0026#x26;\u0026#x26;\\\nmkdir api \u0026#x26;\u0026#x26; cd api \u0026#x26;\u0026#x26;\\\ntouch apiData.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e useApi.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eapiData.ts íŒŒì¼ì—ëŠ” ì‚¬ìš©ì ë¡œê·¸ì¸ ë° ë“±ë¡ ì´ë²¤íŠ¸ì— ëŒ€í•œ ì„œë²„ì—ì„œ ë°˜í™˜ë  ë°ì´í„° êµ¬ì¡°ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/hooks/api/apiData.ts */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e type \u003cspan class=\"hljs-title class_\"\u003eAuthData\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003esuccess\u003c/span\u003e: boolean,\n  \u003cspan class=\"hljs-attr\"\u003euser\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003euser_id\u003c/span\u003e: string,\n    \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: string,\n    \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: string,\n    \u003cspan class=\"hljs-attr\"\u003eauth_token\u003c/span\u003e: string,\n  },\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003euseApi.ts íŒŒì¼ì—ëŠ” ì„œë²„ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ ì»¤ìŠ¤í…€ í›…ì´ ë“¤ì–´ ìˆì–´ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/hooks/api/useApi.ts */\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ì „ì—­ ì˜ì¡´ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useState, useCallback, useContext } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../../store/auth/AuthContextProvider\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-variable constant_\"\u003eBASE_URL\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"http://localhost:8000\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003euseApi\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [loading, setLoading] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [error, setError] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { authState, globalLogOutDispatch } = \u003cspan class=\"hljs-title function_\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e);\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e request = \u003cspan class=\"hljs-title function_\"\u003euseCallback\u003c/span\u003e(\n    \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (\n      \u003cspan class=\"hljs-attr\"\u003eendpoint\u003c/span\u003e: string,\n      \u003cspan class=\"hljs-attr\"\u003eparams\u003c/span\u003e: { [\u003cspan class=\"hljs-attr\"\u003ekey\u003c/span\u003e: string]: any },\n      \u003cspan class=\"hljs-attr\"\u003ehandleSuccessResponse\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003edata: any\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e,\n      handleErrorResponse?: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerror: \u003cspan class=\"hljs-built_in\"\u003eError\u003c/span\u003e\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\n    ) =\u003e {\n      \u003cspan class=\"hljs-title function_\"\u003esetLoading\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e);\n      \u003cspan class=\"hljs-title function_\"\u003esetError\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e);\n\n      \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n        \u003cspan class=\"hljs-comment\"\u003e// \u003cspan class=\"hljs-doctag\"\u003eNOTE:\u003c/span\u003e ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì¤‘ì´ë©´ ìš”ì²­ í—¤ë”ì— auth í† í° ì‚½ì…\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (authState.\u003cspan class=\"hljs-property\"\u003eisLoggedIn\u003c/span\u003e) {\n          params.\u003cspan class=\"hljs-property\"\u003eheaders\u003c/span\u003e[\u003cspan class=\"hljs-string\"\u003e\"x-access-token\"\u003c/span\u003e] = authState.\u003cspan class=\"hljs-property\"\u003eauthToken\u003c/span\u003e;\n        }\n\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e response = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003efetch\u003c/span\u003e(\u003cspan class=\"hljs-variable constant_\"\u003eBASE_URL\u003c/span\u003e + endpoint, { ...params });\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!response.\u003cspan class=\"hljs-property\"\u003eok\u003c/span\u003e) {\n          \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e response.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// í•­ìƒ json ì‘ë‹µì„ ê°€ì •\u003c/span\u003e\n          \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e(data.\u003cspan class=\"hljs-property\"\u003eerror\u003c/span\u003e);\n        }\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e response.\u003cspan class=\"hljs-title function_\"\u003ejson\u003c/span\u003e(); \u003cspan class=\"hljs-comment\"\u003e// í•­ìƒ json ì‘ë‹µì„ ê°€ì •\u003c/span\u003e\n\n        \u003cspan class=\"hljs-comment\"\u003e// ì‘ë‹µì´ ì •ìƒì ì´ê³  ì˜¤ë¥˜ê°€ ì—†ëŠ” ê²½ìš°, ì„±ê³µ ì‘ë‹µ ì²˜ë¦¬\u003c/span\u003e\n        handleSuccessResponse \u0026#x26;\u0026#x26; (\u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ehandleSuccessResponse\u003c/span\u003e(data));\n      } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: any) {\n        \u003cspan class=\"hljs-comment\"\u003e// \u003cspan class=\"hljs-doctag\"\u003eNOTE:\u003c/span\u003e ê¶Œí•œì´ ì—†ëŠ” ì˜¤ë¥˜ì¸ ê²½ìš° ì‚¬ìš©ì ë¡œê·¸ì•„ì›ƒ\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (error \u0026#x26;\u0026#x26; error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e \u0026#x26;\u0026#x26; error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e\"Unauthorized\"\u003c/span\u003e) {\n          \u003cspan class=\"hljs-title function_\"\u003eglobalLogOutDispatch\u003c/span\u003e();\n        }\n\n        \u003cspan class=\"hljs-comment\"\u003e// ì§€ì •ëœ ì˜¤ë¥˜ ì²˜ë¦¬\u003c/span\u003e\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (handleErrorResponse) {\n          \u003cspan class=\"hljs-title function_\"\u003ehandleErrorResponse\u003c/span\u003e(error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e || error.\u003cspan class=\"hljs-property\"\u003eerror\u003c/span\u003e || error);\n        } \u003cspan class=\"hljs-keyword\"\u003eelse\u003c/span\u003e {\n          \u003cspan class=\"hljs-title function_\"\u003esetError\u003c/span\u003e(error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e || error.\u003cspan class=\"hljs-property\"\u003eerror\u003c/span\u003e || error);\n        }\n      }\n\n      \u003cspan class=\"hljs-title function_\"\u003esetLoading\u003c/span\u003e(\u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e);\n    },\n\n    [authState.\u003cspan class=\"hljs-property\"\u003eisLoggedIn\u003c/span\u003e, authState.\u003cspan class=\"hljs-property\"\u003eauthToken\u003c/span\u003e, globalLogOutDispatch]\n  );\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e {\n    \u003cspan class=\"hljs-attr\"\u003eloading\u003c/span\u003e: loading,\n    \u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: error,\n    \u003cspan class=\"hljs-attr\"\u003erequest\u003c/span\u003e: request,\n    \u003cspan class=\"hljs-attr\"\u003esetError\u003c/span\u003e: setError,\n  };\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e useApi;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003euseApi í›…ì€ request í•¨ìˆ˜ ë‚´ì—ì„œ fetch ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì„ ë‹´ë‹¹í•˜ê³  ìˆì–´ìš”. ì „ì—­ ì¸ì¦ ìƒíƒœë¥¼ í†µí•´ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í–ˆëŠ”ì§€ ë¨¼ì € í™•ì¸í•˜ê³ , ì‚¬ìš©ìê°€ ì¸ì¦ë˜ë©´ ìš”ì²­ í—¤ë” x-access-tokenì— authTokenì„ ì²¨ë¶€í•©ë‹ˆë‹¤. ì´ í† í°ì€ ìš”ì²­ê³¼ í•¨ê»˜ ì „ì†¡ë˜ì–´ ì„œë²„ê°€ ì‚¬ìš©ìê°€ íŠ¹ì • ë¦¬ì†ŒìŠ¤ì— ì•¡ì„¸ìŠ¤í•  ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë˜í•œ, ì»¤ìŠ¤í…€ í›…ì€ ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ ë° ì˜¤ë¥˜ ì²˜ë¦¬ì˜ ìƒíƒœ ê´€ë¦¬ë„ ê´€ë¦¬í•©ë‹ˆë‹¤. ì„œë²„ì—ì„œ ì„±ê³µì ì¸ ì‘ë‹µì„ ë°›ì•˜ë‹¤ë©´ handleSuccessResponse ì½œë°±ì„ í†µí•´ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³ , ì‘ë‹µì´ ì‹¤íŒ¨í•œ ê²½ìš° handleErrorResponse ì½œë°±ì„ í†µí•´ ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì‘ë‹µ ì˜¤ë¥˜ì— \"Unauthorized\" ë©”ì‹œì§€ê°€ ìˆìœ¼ë©´ globalLogOutDispatch í•¨ìˆ˜ë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003e2.4 ì¸ì¦ êµ¬ì„± ìš”ì†Œ\u003c/h2\u003e\n\u003cp\u003eìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì™„ë£Œí–ˆê³ , ì´ì œ í™”ë©´ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‘ì—…í•  ì°¨ë¡€ì…ë‹ˆë‹¤. ë¨¼ì € React ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd ui/src \u0026#x26;\u0026#x26; mkdir components \u0026#x26;\u0026#x26;\\\ncd components \u0026#x26;\u0026#x26; mkdir auth \u0026#x26;\u0026#x26;\\\ntouch \u003cspan class=\"hljs-title class_\"\u003eAuth\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etsx\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLogInForm\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etsx\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRegisterForm\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etsx\u003c/span\u003e validations.\u003cspan class=\"hljs-property\"\u003ets\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë¨¼ì €, LogInForm.tsxì™€ RegisterForm.tsxì—ì„œ ê°ê° ë¡œê·¸ì¸ ë° ì‚¬ìš©ì ë“±ë¡ì„ ìœ„í•œ ì–‘ì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë³´ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/components/auth/LoginForm.tsx */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eFormEventHandler\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eLink\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e styles \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./Auth.module.css\"\u003c/span\u003e;\n\ntype \u003cspan class=\"hljs-title class_\"\u003eProps\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eonSubmit\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFormEventHandler\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLFormElement\u003c/span\u003e\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eLoginForm\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eprops: Props\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { onSubmit } = props;\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonSubmit\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{onSubmit}\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Form}\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Input}\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehtmlFor\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e\u003e\u003c/span\u003eì´ë©”ì¼\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"ì´ë©”ì¼ ì£¼ì†Œ\"\u003c/span\u003e /\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Input}\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehtmlFor\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e\u003e\u003c/span\u003eë¹„ë°€ë²ˆí˜¸\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"ë¹„ë°€ë²ˆí˜¸\"\u003c/span\u003e /\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"submit\"\u003c/span\u003e\u003e\u003c/span\u003eì œì¶œ\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Link}\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\"/\u003cspan class=\"hljs-attr\"\u003euser\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003eregister\u003c/span\u003e\"}\u003e\u003c/span\u003e\n        ì•„ì§ ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? ê°€ì…í•˜ê¸°\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLoginForm\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/components/auth/RegisterForm.tsx */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eFormEventHandler\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eLink\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e styles \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./Auth.module.css\"\u003c/span\u003e;\n\ntype \u003cspan class=\"hljs-title class_\"\u003eProps\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003eonSubmit\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFormEventHandler\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLFormElement\u003c/span\u003e\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eRegisterForm\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eprops: Props\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { onSubmit } = props;\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonSubmit\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{onSubmit}\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Form}\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Input}\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehtmlFor\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e\u003e\u003c/span\u003eì´ë¦„\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"text\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"ì „ì²´ ì´ë¦„\"\u003c/span\u003e /\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Input}\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehtmlFor\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e\u003e\u003c/span\u003eì´ë©”ì¼\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"ì´ë©”ì¼ ì£¼ì†Œ\"\u003c/span\u003e /\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Input}\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehtmlFor\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e\u003e\u003c/span\u003eë¹„ë°€ë²ˆí˜¸\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003einput\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003erequired\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eplaceholder\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"ë¹„ë°€ë²ˆí˜¸\"\u003c/span\u003e /\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"submit\"\u003c/span\u003e\u003e\u003c/span\u003eì œì¶œ\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Link}\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\"/\u003cspan class=\"hljs-attr\"\u003euser\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003elogin\u003c/span\u003e\"}\u003e\u003c/span\u003e\n        ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? ë¡œê·¸ì¸í•˜ê¸°\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eLink\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eform\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRegisterForm\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eë‘ ì–‘ì‹ì€ ê°ê° ì´ë¦„, ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ ì†ì„±ì„ í¬í•¨í•œ í¼ ì œì¶œ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ì½œë°± í”„ë¡­ì¸ onSubmitì„ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eê·¸ ë‹¤ìŒìœ¼ë¡œ, Auth.tsxì—ì„œ ì‚¬ìš©ì ë¸Œë¼ìš°ì € ë‚´ì˜ ë„¤ë¹„ê²Œì´ì…˜ ê²½ë¡œì— ë”°ë¼ LogInForm ë˜ëŠ” RegisterForm êµ¬ì„± ìš”ì†Œ ì¤‘ í•˜ë‚˜ë¥¼ í‘œì‹œí•  ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ê² ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/components/auth/Auth.tsx */\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ì „ì—­ imports\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useEffect, useState, useContext, \u003cspan class=\"hljs-title class_\"\u003eFormEventHandler\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// í”„ë¡œì íŠ¸ ì˜ì¡´ì„±\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e useApi \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../../hooks/api/useApi\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../../store/auth/AuthContextProvider\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { validatePasswordLength, validateEmailFormat } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./validations\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eAuthData\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../../hooks/api/apiData\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useLocation } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eLoginForm\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./LoginForm\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eRegisterForm\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./RegisterForm\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eAuth\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [authData, setAuthData] = useState\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eAuthData\u003c/span\u003e\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { request, setError } = \u003cspan class=\"hljs-title function_\"\u003euseApi\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { globalLogInDispatch } = \u003cspan class=\"hljs-title function_\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e location = \u003cspan class=\"hljs-title function_\"\u003euseLocation\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e currentPathArray = location.\u003cspan class=\"hljs-property\"\u003epathname\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esplit\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e isLogin = currentPathArray[currentPathArray.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e] === \u003cspan class=\"hljs-string\"\u003e'login'\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-comment\"\u003e// ë¡œê·¸ì¸ ì‚¬ìš©ìì— ëŒ€í•œ api ì‘ë‹µ ì„±ê³µ ì‹œ, ì „ì—­ auth LOG_IN ì´ë²¤íŠ¸ë¥¼ ë””ìŠ¤íŒ¨ì¹˜í•©ë‹ˆë‹¤\u003c/span\u003e\n  \u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (authData \u0026#x26;\u0026#x26; \u003cspan class=\"hljs-string\"\u003e\"success\"\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e authData) {\n      \u003cspan class=\"hljs-title function_\"\u003eglobalLogInDispatch\u003c/span\u003e({\n        \u003cspan class=\"hljs-attr\"\u003eauthToken\u003c/span\u003e: authData.\u003cspan class=\"hljs-property\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eauth_token\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003euserId\u003c/span\u003e: authData.\u003cspan class=\"hljs-property\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003euser_id\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: authData.\u003cspan class=\"hljs-property\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ename\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: authData.\u003cspan class=\"hljs-property\"\u003euser\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eemail\u003c/span\u003e,\n      });\n    }\n  }, [authData, globalLogInDispatch]);\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eauthHandler\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eFormEventHandler\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eHTMLFormElement\u003c/span\u003e\u003e = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (event) =\u003e {\n    event.\u003cspan class=\"hljs-title function_\"\u003epreventDefault\u003c/span\u003e();\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e data = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFormData\u003c/span\u003e(event.\u003cspan class=\"hljs-property\"\u003ecurrentTarget\u003c/span\u003e);\n    \u003cspan class=\"hljs-comment\"\u003e// ë¨¼ì € ìœ íš¨ì„± ê²€ì‚¬!\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userEmail = data.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"email\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userPassword = data.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"password\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e userName = data.\u003cspan class=\"hljs-title function_\"\u003eget\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"name\"\u003c/span\u003e);\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (\n        !\u003cspan class=\"hljs-title function_\"\u003evalidateEmailFormat\u003c/span\u003e(userEmail?.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e() || \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e) ||\n        !\u003cspan class=\"hljs-title function_\"\u003evalidatePasswordLength\u003c/span\u003e(userPassword?.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e() || \u003cspan class=\"hljs-string\"\u003e\"\"\u003c/span\u003e)\n      ) {\n        \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"ì˜ëª»ëœ ìê²© ì¦ëª… í˜•ì‹ì…ë‹ˆë‹¤!\"\u003c/span\u003e);\n      }\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = {\n        \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"POST\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: {\n          \u003cspan class=\"hljs-string\"\u003e\"Content-Type\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"application/json\"\u003c/span\u003e,\n        },\n        \u003cspan class=\"hljs-attr\"\u003ebody\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eJSON\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003estringify\u003c/span\u003e({\n          \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: userEmail,\n          \u003cspan class=\"hljs-attr\"\u003epassword\u003c/span\u003e: userPassword,\n          \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: userName,\n        }),\n      };\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e endpoint = \u003cspan class=\"hljs-string\"\u003e`/user/\u003cspan class=\"hljs-subst\"\u003e${isLogin ? \u003cspan class=\"hljs-string\"\u003e'login'\u003c/span\u003e : \u003cspan class=\"hljs-string\"\u003e'register'\u003c/span\u003e}\u003c/span\u003e`\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erequest\u003c/span\u003e(endpoint, params, setAuthData);\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: any) {\n      \u003cspan class=\"hljs-title function_\"\u003esetError\u003c/span\u003e(error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e || error);\n    }\n  };\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eh2\u003c/span\u003e\u003e\u003c/span\u003e{isLogin ? 'ë¡œê·¸ì¸' : 'ê°€ì…í•˜ê¸°'}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eh2\u003c/span\u003e\u003e\u003c/span\u003e\n      {\n        isLogin\n          ? \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eLoginForm\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonSubmit\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{authHandler}\u003c/span\u003e /\u003e\u003c/span\u003e\n          : \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRegisterForm\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonSubmit\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{authHandler}\u003c/span\u003e /\u003e\u003c/span\u003e\n      }\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuth\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” react-router-domì—ì„œ ì œê³µí•˜ëŠ” useLocationì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì–´ë–¤ ê²½ë¡œì— ìˆëŠ”ì§€ ì¶”ì¶œí•©ë‹ˆë‹¤. ê²½ë¡œì— ë”°ë¼, LoginForm ë˜ëŠ” RegisterFormì„ í‘œì‹œí•˜ë„ë¡ ì„ íƒí•©ë‹ˆë‹¤. ê° í¼ì— ëŒ€í•œ onSubmit í•¸ë“¤ëŸ¬ëŠ” authHandlerì— ì •ì˜ëœ ëŒ€ë¡œ ì‘ë™í•˜ë©°, ì´ í•¸ë“¤ëŸ¬ëŠ” ì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì—ì„œ ëª¨ë“  ì…ë ¥ í¼ ì†ì„±ì„ ì¶”ì¶œí•˜ê³  ì„œë²„ì—ì„œ ì‚¬ìš©ì/ë¡œê·¸ì¸ ë˜ëŠ” ì‚¬ìš©ì/ë“±ë¡ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ìš”ì²­í•˜ê¸° ì „ì— ì´ë¥¼ ìœ íš¨ì„± ê²€ì‚¬í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì–‘ì‹ ì œì¶œ ì´ë²¤íŠ¸ì— ëŒ€í•œ ìœ íš¨ì„± ê²€ì‚¬ ë¡œì§ì€ ê¸°ë³¸ì ì´ë©° ì•„ë˜ validation.tsì—ì„œ ë³´ì—¬ì§„ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/components/auth/validations.ts */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003evalidatePasswordLength\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003epassword: string\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e !!password \u0026#x26;\u0026#x26; password.\u003cspan class=\"hljs-property\"\u003elength\u003c/span\u003e \u003e \u003cspan class=\"hljs-number\"\u003e7\u003c/span\u003e;\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003evalidateEmailFormat\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003eemail: string\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e re =\n    \u003cspan class=\"hljs-regexp\"\u003e/^(([^\u0026#x3C;\u003e()[\\]\\\\.,;:\\s@\"]+(\\.[^\u0026#x3C;\u003e()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\u003c/span\u003e;\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e !!email \u0026#x26;\u0026#x26; re.\u003cspan class=\"hljs-title function_\"\u003etest\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eString\u003c/span\u003e(email).\u003cspan class=\"hljs-title function_\"\u003etoLowerCase\u003c/span\u003e());\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e2.5 Resource component\u003c/h2\u003e\n\u003cp\u003eë§ˆì§€ë§‰ìœ¼ë¡œ ë§Œë“¤ ì¸í„°í˜ì´ìŠ¤ êµ¬ì„± ìš”ì†ŒëŠ” ë³´í˜¸ëœ ë¦¬ì†ŒìŠ¤ ê²½ë¡œë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” ë”ë¯¸ í˜ì´ì§€ì…ë‹ˆë‹¤. ì½”ë“œë¥¼ í˜¸ìŠ¤íŒ…í•  í´ë”ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ë¨¼ì € ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003ecd ui/src/components \u0026#x26;\u0026#x26;\\\nmkdir resource \u0026#x26;\u0026#x26;\\\ncd resource \u0026#x26;\u0026#x26;\\\ntouch \u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003etsx\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eResource.tsx íŒŒì¼ ë‚´ë¶€ì— ì•„ë˜ì™€ ê°™ì´ êµ¬ì„± ìš”ì†Œë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/components/resource/Resource.tsx */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useCallback, useContext, useEffect, useState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e useApi \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../../hooks/api/useApi\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e authCtx \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"../../store/auth/AuthContextProvider\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e styles \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./Resource.module.css\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eResource\u003c/span\u003e = (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) =\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [data, setData] = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { request, setError } = \u003cspan class=\"hljs-title function_\"\u003euseApi\u003c/span\u003e();\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { globalLogOutDispatch } = \u003cspan class=\"hljs-title function_\"\u003euseContext\u003c/span\u003e(authCtx);\n\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e fetchData = \u003cspan class=\"hljs-title function_\"\u003euseCallback\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e () =\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e params = {\n        \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"GET\"\u003c/span\u003e,\n        \u003cspan class=\"hljs-attr\"\u003eheaders\u003c/span\u003e: {\n          \u003cspan class=\"hljs-string\"\u003e\"Content-Type\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"application/json\"\u003c/span\u003e,\n        },\n      };\n      \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003erequest\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"/resource\"\u003c/span\u003e, params, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresult\u003c/span\u003e) =\u003e\u003c/span\u003e {\n        \u003cspan class=\"hljs-title function_\"\u003esetData\u003c/span\u003e(result.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e);\n      });\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (\u003cspan class=\"hljs-attr\"\u003eerror\u003c/span\u003e: any) {\n      \u003cspan class=\"hljs-title function_\"\u003esetError\u003c/span\u003e(error.\u003cspan class=\"hljs-property\"\u003emessage\u003c/span\u003e || error);\n    }\n  }, [request, setError]);\n\n  \u003cspan class=\"hljs-title function_\"\u003euseEffect\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e() =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-title function_\"\u003efetchData\u003c/span\u003e();\n  }, [fetchData]);\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{styles.Resource}\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u003e\u003c/span\u003e{data}\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eh1\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eonClick\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{globalLogOutDispatch}\u003c/span\u003e\u003e\u003c/span\u003eë¡œê·¸ì•„ì›ƒ\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì´ ì»´í¬ë„ŒíŠ¸ëŠ” ê°„ë‹¨í•˜ë©° useEffect í›…ì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì˜ /resource ì—”ë“œí¬ì¸íŠ¸ë¡œ í˜¸ì¶œí•˜ëŠ” ë¡œì§ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ í˜¸ì¶œì—ëŠ” pre-existing auth í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤. ë°˜í™˜ëœ ë°ì´í„°ëŠ” í˜ì´ì§€ì— í‘œì‹œë˜ë©° ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ auth ì»¨í…ìŠ¤íŠ¸ì—ì„œ globalLogOutDispatchë¥¼ íŠ¸ë¦¬ê±°í•˜ì—¬ ì „ì—­ auth ìƒíƒœë¥¼ ì¬ì„¤ì •í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch2\u003e2.6 ëª¨ë“  ê²ƒì„ ì—°ê²°í•˜ê¸°\u003c/h2\u003e\n\u003cp\u003eì¸í„°í˜ì´ìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ í”„ë ˆì  í…Œì´ì…˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í–ˆìœ¼ë‹ˆ, App.tsxì—ì„œ react-router-domì„ ì‚¬ìš©í•˜ì—¬ í”„ë¡ íŠ¸ì—”ë“œ ë¼ìš°íŒ…ì„ í†µí•´ ëª¨ë“  ê²ƒì„ ì—°ê²°í•´ë³´ê² ìŠµë‹ˆë‹¤ :\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/* ui/src/App.tsx */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./App.css\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eRoute\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRoutes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eNavigate\u003c/span\u003e, useLocation } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react-router-dom\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./store/auth/AuthContextProvider\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { useContext } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"react\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eResource\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./components/resource/Resource\"\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eAuth\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"./components/auth/Auth\"\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eApp\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { authState } = \u003cspan class=\"hljs-title function_\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eAuthContext\u003c/span\u003e);\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e location = \u003cspan class=\"hljs-title function_\"\u003euseLocation\u003c/span\u003e();\n\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e (\n    \u003cspan class=\"xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclassName\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"App\"\u003c/span\u003e\u003e\u003c/span\u003e\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoutes\u003c/span\u003e\u003e\u003c/span\u003e\n        \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eNavigate\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eto\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{authState.isLoggedIn\u003c/span\u003e ? \u003cspan class=\"hljs-attr\"\u003elocation.pathname\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003e:\u003c/span\u003e \"/\u003cspan class=\"hljs-attr\"\u003euser\u003c/span\u003e/\u003cspan class=\"hljs-attr\"\u003elogin\u003c/span\u003e\"} /\u003e\u003c/span\u003e} /\u003e\n        {!authState.isLoggedIn \u0026#x26;\u0026#x26; (\n          \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"user\"\u003c/span\u003e\u003e\u003c/span\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"register\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eAuth\u003c/span\u003e /\u003e\u003c/span\u003e} /\u003e\n            \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"login\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eAuth\u003c/span\u003e /\u003e\u003c/span\u003e} /\u003e\n          \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e\u003e\u003c/span\u003e\n        )}\n        {authState.isLoggedIn \u0026#x26;\u0026#x26; \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003eRoute\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"resource\"\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eelement\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-attr\"\u003eResource\u003c/span\u003e /\u003e\u003c/span\u003e} /\u003e}\n      \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003eRoutes\u003c/span\u003e\u003e\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ediv\u003c/span\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n  );\n}\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApp\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eApp.tsx íŒŒì¼ ë‚´ì—ì„œëŠ” ì§€ê¸ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ë¼ìš°íŒ…ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. /user/register, /user/login ë° /resourceë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê³µëœ ì „ì—­ ì¸ì¦ ìƒíƒœê°€ ì‚¬ìš©ìê°€ ì¸ì¦ëœ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ë©´ ì‚¬ìš©ìì—ê²Œ /resource ê²½ë¡œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•˜ì—¬ í•´ë‹¹ ì„œë²„ì˜ ì—”ë“œí¬ì¸íŠ¸ë¡œ ì´ë™í•˜ì—¬ 'protected' ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eê²°ë¡ \u003c/h1\u003e\n\u003cp\u003eì´ ê¸€ì—ì„œëŠ” í’€ìŠ¤íƒ ì¸ì¦ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ëŠ” ë° í•„ìš”í•œ ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì¸ì¦ ë°©ë²•ì€ í† í° ê¸°ë°˜ ë°©ì‹ìœ¼ë¡œ, ì´ëŠ” ì´ íŠœí† ë¦¬ì–¼ ì‹œë¦¬ì¦ˆì˜ ì²« ë²ˆì§¸ ê¸€ì—ì„œ ë…¼ì˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê° êµ¬ì„± ìš”ì†Œì— ëŒ€í•´ ë§ì€ ì„¸ë¶€ ì •ë³´ë¥¼ ë‹¤ë¤˜ì§€ë§Œ, ì•„ì§ í•  ì¼ì´ ë§ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eí”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìŠ¤íƒ€ì¼ë§ ê°œì„ , ì´ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ë§ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eí”„ë¡ íŠ¸ì—”ë“œ ë° ë°±ì—”ë“œì—ì„œ ì ì ˆí•œ ì‚¬ìš©ì ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬, SQL ì¸ì ì…˜ ë°©ì§€ ë˜ëŠ” ë°ì´í„° ìœ í˜• ìœ íš¨ì„± ê²€ì‚¬ì™€ ê°™ì€ ì‘ì—….\u003c/li\u003e\n\u003cli\u003eì˜ëª»ëœ ìê²© ì¦ëª…ì„ ì œì¶œí–ˆì„ ë•Œ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ì—ëŸ¬ ì²˜ë¦¬.\u003c/li\u003e\n\u003cli\u003eì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ì—¬ ì‚¬ìš©ì ë°ì´í„° ì €ì¥.\u003c/li\u003e\n\u003cli\u003eAWS ë˜ëŠ” GCPì™€ ê°™ì€ í´ë¼ìš°ë“œ ì œê³µ ì—…ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì»¨í…Œì´ë„ˆí™”í•˜ê³  ë°°í¬.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eë‚˜ë¨¸ì§€ëŠ” ë„¤ê°€ ì•Œì•„ì„œ í•´ì£¼ë©´ ë¼! ê·¸ë¦¬ê³  ì–¸ì œë“ ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œì„ í•˜ê±°ë‚˜ ë‹¤ë¥¸ ë°©ë²•ìœ¼ë¡œ ì‘ì—…í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ì œì•ˆì´ ìˆë‹¤ë©´ ëŒ“ê¸€ì„ ë‚¨ê²¨ì¤˜! ì´ íŠœí† ë¦¬ì–¼ì˜ ìµœì¢… ì½”ë“œëŠ” ì—¬ê¸°ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-12-AuthenticationandAuthorizationwithNodejsReactandTypescriptPart2"},"buildId":"QH5Mz7n7Y6w0r4_gCGFQf","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>