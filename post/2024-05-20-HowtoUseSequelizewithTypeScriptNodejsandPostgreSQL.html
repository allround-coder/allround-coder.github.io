<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>TypeScript, Nodejs, 그리고 PostgreSQL과 함께 Sequelize를 사용하는 방법 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="TypeScript, Nodejs, 그리고 PostgreSQL과 함께 Sequelize를 사용하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="TypeScript, Nodejs, 그리고 PostgreSQL과 함께 Sequelize를 사용하는 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL" data-gatsby-head="true"/><meta name="twitter:title" content="TypeScript, Nodejs, 그리고 PostgreSQL과 함께 Sequelize를 사용하는 방법 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-20 22:18" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/OFpTzInQeZKWBaqJEukNX/_buildManifest.js" defer=""></script><script src="/_next/static/OFpTzInQeZKWBaqJEukNX/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">TypeScript, Nodejs, 그리고 PostgreSQL과 함께 Sequelize를 사용하는 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="TypeScript, Nodejs, 그리고 PostgreSQL과 함께 Sequelize를 사용하는 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 20, 2024</span><span class="posts_reading_time__f7YPP">12<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>시작 가이드: TypeScript로 Sequelize 구성하기</p>
<p>모델, 연결 및 데이터베이스 연결을 정의하여 Sequelize를 TypeScript와 함께 설정하는 방법에 대해 알아보겠습니다.</p>
<h1>소개</h1>
<p>이 글에서는 Sequelize를 설정하여 TypeScript Node.js 및 Express를 연동하여 PostgreSQL 데이터베이스에 연결하고, 그 후에 조회용 샘플 모델을 만들어 보겠습니다.</p>
<p>TypeScript, Node.js, Express.js 및 PostgreSQL을 함께 사용하면 견고한 백엔드 개발을 위한 강력한 조합을 제공합니다. Node.js를 위한 인기 있는 ORM인 Sequelize와 TypeScript의 정적 유형 지정 그리고 PostgreSQL의 신뢰성을 활용하여 효율적인 데이터 관리와 확장 가능성을 확보할 수 있습니다. 이 통합은 데이터의 모델링, 쿼리, 그리고 조작을 원활하게 하며 개발 경험을 향상시키면서 코드 무결성과 데이터베이스 무결성을 유지하는 데 도움이 됩니다.</p>
<div class="content-ad"></div>
<p>새로운 실시간 Node.js 앱이나 서비스를 시작할 때 가장 먼저 고려해야 할 것은 어디서 시작해야 하는지, 어떤 프레임워크나 ORM을 사용해야 하는지, 그리고 그것이 성능에 어떻게 영향을 미칠지 입니다. 또한, SQL 또는 NoSQL 데이터베이스를 선택하는 것에 따라 이 질문이 달라질 수 있습니다.</p>
<h1>사전 준비</h1>
<p>이 글에서는 TypeScript와 Express를 사용하여 이미 만들어 놓은 Node.js 보일러플레이트 코드를 사용할 것입니다.</p>
<p>우리는 sequelize, pg, pg-hstore이 npm 모듈을 사용하여 어플리케이션을 설정할 것이고, Jest를 사용하여 유닛 테스트 케이스도 추가했습니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">// 애플리케이션 복제하기</span>
git clone <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/santoshshinde2012/node-boilerplate.git</span>

<span class="hljs-comment">// 새 디렉토리로 변경</span>
cd node-boilerplate

<span class="hljs-comment">// 모든 모듈 설치</span>
npm install

<span class="hljs-comment">// 애플리케이션 시작</span>
npm start
</code></pre>
<h1>단계 1: PostgreSQL 설정 및 데이터베이스 생성</h1>
<p>아래 스크립트로 폴더 docker/postgresql에 Dockerfile.postgis 파일을 생성합니다.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">postgres</span>:latest

# <span class="hljs-title class_">PostGIS</span> 확장 기능 설치
<span class="hljs-variable constant_">RUN</span> apt-get update \
    &#x26;&#x26; apt-get install -y postgis postgresql-<span class="hljs-number">12</span>-postgis-<span class="hljs-number">3</span> \
    &#x26;&#x26; apt-get clean \
    &#x26;&#x26; rm -rf /<span class="hljs-keyword">var</span>/lib/apt/lists<span class="hljs-comment">/*

# 초기 쿼리를 실행하기 위해 init.sql에 쿼리를 작성할 수 있습니다
COPY init.sql /docker-entrypoint-initdb.d/

# PostGIS 확장 기능 활성화
RUN echo "CREATE EXTENSION IF NOT EXISTS postgis;" >> /docker-entrypoint-initdb.d/init.sql
</span></code></pre>
<div class="content-ad"></div>
<p>도커 Compose 파일을 만들어주세요. docker/postgresql 폴더에 아래 스크립트를 작성해주세요.</p>
<pre><code class="hljs language-js"># <span class="hljs-title class_">PostgreSQL</span>을 위한 docker-compose.<span class="hljs-property">yml</span>

<span class="hljs-attr">version</span>: <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services</span>:
  <span class="hljs-attr">db</span>:
    <span class="hljs-attr">build</span>:
      <span class="hljs-attr">context</span>: .
      <span class="hljs-attr">dockerfile</span>: <span class="hljs-title class_">Dockerfile</span>.<span class="hljs-property">postgis</span>  # 커스텀 <span class="hljs-title class_">Dockerfile</span> 사용
    <span class="hljs-attr">restart</span>: always
    <span class="hljs-attr">environment</span>:
      <span class="hljs-attr">POSTGRES_USER</span>: user1
      <span class="hljs-attr">POSTGRES_PASSWORD</span>: user1@<span class="hljs-number">123</span>
      <span class="hljs-attr">POSTGRES_DB</span>: database
    <span class="hljs-attr">healthcheck</span>:
      # 이 명령어는 데이터베이스가 준비되어 있는지 소스 db 서버에서 확인합니다.
      <span class="hljs-attr">test</span>: [ <span class="hljs-string">"CMD-SHELL"</span>, <span class="hljs-string">"pg_isready"</span> ]
      <span class="hljs-attr">interval</span>: 5s
      <span class="hljs-attr">timeout</span>: 5s
      <span class="hljs-attr">retries</span>: <span class="hljs-number">5</span>
    <span class="hljs-attr">ports</span>:
      - <span class="hljs-string">"5432:5432"</span>
    <span class="hljs-attr">volumes</span>:
      - <span class="hljs-attr">postgres_data_v</span>:<span class="hljs-regexp">/var/</span>lib/postgresql/data
<span class="hljs-attr">volumes</span>:
  <span class="hljs-attr">postgres_data_v</span>:
</code></pre>
<p>package.json 안에 Docker Compose 파일을 실행시키는 명령어를 추가해주세요.</p>
<pre><code class="hljs language-js"><span class="hljs-string">"db:up"</span>: <span class="hljs-string">"docker-compose -f docker/postgresql/docker-compose.yml up"</span>,
<span class="hljs-string">"db:down"</span>: <span class="hljs-string">"docker-compose -f docker/postgresql/docker-compose.yml down"</span>
</code></pre>
<div class="content-ad"></div>
<p>Postgresql을 실행하고 다음 명령어를 사용하여 데이터베이스를 생성하세요: npm run db:up.</p>
<p><img src="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png" alt="image"></p>
<h1>단계 2: Sequelize의 설치 및 구성</h1>
<p>Sequelize는 npm (또는 yarn)을 통해 사용할 수 있습니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">npm install --save sequelize
npm install --save pg pg-hstore # <span class="hljs-title class_">Postgres</span>
</code></pre>
<p>작업을 마치면 코드를 배치할 폴더 구조를 확인해야 합니다. 코드가 깨끗하고 가독성 있게 유지되도록 하기 위해 코드베이스를 여러 폴더로 나누었습니다. 데이터베이스 관련 부분은 database 폴더 아래에 위치해야 합니다.</p>
<img src="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_1.png">
<p>src/database/config 폴더의 index.ts 파일에 데이터베이스 연결을 정의하고, .env npm 모듈을 사용하여 환경 변수를 가져옵니다. 환경에 따른 로직은 필요에 따라 수정할 수 있습니다.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">'dotenv'</span>;

dotenv.<span class="hljs-title function_">config</span>({
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'../../.env'</span>),
});

타입 <span class="hljs-title class_">DbConnection</span> = {
    호스트: 문자열;
    포트: 숫자;
    사용자: 문자열;
    비밀번호: 문자열;
    데이터베이스: 문자열;
    <span class="hljs-attr">dbLogging</span>: 부울;
};

<span class="hljs-keyword">const</span> <span class="hljs-attr">connection</span>: <span class="hljs-title class_">DbConnection</span> = {
    호스트: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_HOST</span>,
    포트: <span class="hljs-title class_">Number</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PORT</span>),
    사용자: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_USER</span>,
    비밀번호: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PASSWORD</span>,
    데이터베이스: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_NAME</span>,
    <span class="hljs-attr">dbLogging</span>:
        process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span> || process.<span class="hljs-property">env</span>.<span class="hljs-property">LOG</span> === <span class="hljs-string">'true'</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connection;
</code></pre>
<p>src/database 폴더에 index.ts 파일을 생성하여 sequelize 연결을 만듭니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Dialect</span>, <span class="hljs-title class_">Sequelize</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'sequelize'</span>;
<span class="hljs-keyword">import</span> connection <span class="hljs-keyword">from</span> <span class="hljs-string">'./config'</span>;

<span class="hljs-keyword">const</span> { database, user, password, host, dbLogging } = connection;

<span class="hljs-keyword">const</span> sequelizeConnection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sequelize</span>(database, user, password, {
    host,
    <span class="hljs-attr">logging</span>: dbLogging,
    <span class="hljs-attr">dialect</span>: <span class="hljs-string">'postgres'</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Dialect</span>,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> sequelizeConnection;
</code></pre>
<p>src/App.ts 또는 서버 응용 프로그램의 진입 파일에 assertDatabaseConnection 메서드를 만들어 데이터베이스 확인을하는 메서드를 호출하세요.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">개인 <span class="hljs-keyword">async</span> <span class="hljs-title function_">assertDatabaseConnection</span>(): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>> {
    <span class="hljs-keyword">try</span> {
     <span class="hljs-keyword">await</span> database.<span class="hljs-title function_">authenticate</span>();
     <span class="hljs-keyword">await</span> database.<span class="hljs-title function_">sync</span>();
     logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'연결이 성공적으로 설정되었습니다.'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
 logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">'데이터베이스에 연결할 수 없습니다:'</span>, error);
    }
}
</code></pre>
<h1>단계 3: Sequelize를 사용하여 테이블(모델) 생성</h1>
<p>src/database/models 폴더에 모델을 정의하세요; 여기서는 샘플 모델인 Enquiry.ts를 생성할 것입니다.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DataTypes</span>, <span class="hljs-title class_">Model</span>, <span class="hljs-title class_">Optional</span>, <span class="hljs-title class_">UUIDV4</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'sequelize'</span>;
<span class="hljs-keyword">import</span> sequelize <span class="hljs-keyword">from</span> <span class="hljs-string">'../index'</span>;

interface <span class="hljs-title class_">EnquiryAttributes</span> {
 <span class="hljs-attr">id</span>: string;
 <span class="hljs-attr">name</span>: string;
 <span class="hljs-attr">subject</span>: string;
 <span class="hljs-attr">body</span>: string;
 <span class="hljs-attr">email</span>: string;
 <span class="hljs-attr">country</span>: string;
}

interface <span class="hljs-title class_">EnquiryCreationAttributes</span>
 <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Optional</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-string">'id'</span>> {}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Enquiry</span>
 <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Model</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-title class_">EnquiryCreationAttributes</span>>
 implements <span class="hljs-title class_">EnquiryAttributes</span>
{
 public id!: string;
 public name!: string;
 public country!: string;
 public subject!: string;
 public body!: string;
 public email!: string;

 public readonly createdAt!: <span class="hljs-title class_">Date</span>;
 public readonly updatedAt!: <span class="hljs-title class_">Date</span>;
}

<span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">init</span>(
 {
  <span class="hljs-attr">id</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-property">UUID</span>,
   <span class="hljs-attr">defaultValue</span>: <span class="hljs-title class_">UUIDV4</span>,
   <span class="hljs-attr">primaryKey</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">name</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  },
  <span class="hljs-attr">country</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  },
  <span class="hljs-attr">subject</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">200</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  },
  <span class="hljs-attr">email</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  },
  <span class="hljs-attr">body</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">400</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  }
 },
 {
  sequelize,
  <span class="hljs-attr">modelName</span>: <span class="hljs-string">'Enquiry'</span>,
  <span class="hljs-attr">tableName</span>: <span class="hljs-string">'Enquiry'</span>,
  <span class="hljs-attr">timestamps</span>: <span class="hljs-literal">true</span>,
 },
);

<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Enquiry</span>, <span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-title class_">EnquiryCreationAttributes</span> };
</code></pre>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { 데이터 유형, 모델, 선택적, <span class="hljs-title class_">UUIDV4</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'sequelize'</span>;
<span class="hljs-keyword">import</span> sequelize <span class="hljs-keyword">from</span> <span class="hljs-string">'../index'</span>;

인터페이스 조회 속성 {
 <span class="hljs-attr">id</span>: string;
 이름: string;
 주제: string;
 본문: string;
 이메일: string;
 국가: string;
}

인터페이스 <span class="hljs-title class_">EnquiryCreationAttributes</span> 에 이어, <span class="hljs-title class_">EnquiryAttributes</span>의 선택적 해제 {}

클래스 <span class="hljs-title class_">Enquiry</span>은 <span class="hljs-title class_">Model</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-title class_">EnquiryCreationAttributes</span>>를 확장하며 <span class="hljs-title class_">EnquiryAttributes</span>를 구현합니다 {
 공공 id!: string;
 공공 이름!: string;
 공공 국가!: string;
 공공 주제!: string;
 공공 몸통!: string;
 공공 이메일!: string;

 공공 readonly createdAt!: <span class="hljs-title class_">Date</span>;
 공공 readonly updatedAt!: <span class="hljs-title class_">Date</span>;
}

<span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">init</span>(
 {
  아이디: {
   유형: 데이터 유형.<span class="hljs-property">UUID</span>,
   기본값: <span class="hljs-title class_">UUIDV4</span>,
   기본 키: 참,
  },
  이름: {
   유형: 데이터 유형.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   허용하지 않음: 거짓,
  },
  국가: {
   유형: 데이터 유형.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   허용하지 않음: 거짓,
  },
  주제: {
   유형: 데이터 유형.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">200</span>),
   허용하지 않음: 거짓,
  },
  이메일: {
   유형: 데이터 유형.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   허용하지 않음: 거짓,
  },
  몸통: {
   유형: 데이터 유형.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">400</span>),
   허용하지 않음: 거짓,
  }
 },
 {
  시퀄라이즈,
  모델 이름: <span class="hljs-string">'조회'</span>,
  테이블 이름: <span class="hljs-string">'조회'</span>,
  타임 스탬프: 참,
 },
);

수출 { 조회, <span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-title class_">EnquiryCreationAttributes</span> };
</code></pre>
<img src="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_2.png">
<h1>단계 4: 구성 요소에서 서비스 및 컨트롤러 설정</h1>
<ul>
<li>구성 요소 구성 요소는 두 부분으로 나뉩니다: 컨트롤러 및 서비스 서비스는 해당 데이터베이스 모델과 통신하는 데 책임이 있습니다.</li>
<li>라우트 — 컨트롤러 및 해당 레스트 엔드포인트의 등록 방법을 등록합니다.</li>
<li>공통 서비스 —이 서비스는 여러 데이터베이스 모델 간의 일반 작업 수행에 책임이 있습니다.</li>
<li>이를 구성 요소 서비스에 주입하고 구성 요소 서비스에서 컨트롤러에서 해당 메서드에 액세스할 수 있습니다.</li>
</ul>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">// src/components/enquiry/EnquiryService.ts 파일을 생성하여 sequelize를 사용하여 생성된 모델의 데이터베이스 작업을 처리합니다.</span>

<span class="hljs-keyword">import</span> {
 <span class="hljs-title class_">Enquiry</span>,
 <span class="hljs-title class_">EnquiryAttributes</span>,
 <span class="hljs-title class_">EnquiryCreationAttributes</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../database/models/Enquiry'</span>;
<span class="hljs-keyword">import</span> logger <span class="hljs-keyword">from</span> <span class="hljs-string">'../../lib/logger'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ApiError</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../../abstractions/ApiError'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StatusCodes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'http-status-codes'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnquiryService</span> {

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAll</span>(): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>[]> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> enquiries = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">findAll</span>();
   <span class="hljs-keyword">return</span> enquiries;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">getById</span>(<span class="hljs-attr">id</span>: string | number): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> enquiry = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">findByPk</span>(id);
   <span class="hljs-keyword">if</span> (!enquiry) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiError</span>(<span class="hljs-string">'Enquiry not found'</span>, <span class="hljs-title class_">StatusCodes</span>.<span class="hljs-property">NOT_FOUND</span>);
   }
   <span class="hljs-keyword">return</span> enquiry;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">update</span>(
  <span class="hljs-attr">id</span>: string | number,
  <span class="hljs-attr">payload</span>: <span class="hljs-title class_">Partial</span>&#x3C;<span class="hljs-title class_">EnquiryCreationAttributes</span>>,
 ): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> enquiry = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">findByPk</span>(id);
   <span class="hljs-keyword">if</span> (!enquiry) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiError</span>(
     <span class="hljs-string">'Enquiry not found'</span>,
     <span class="hljs-title class_">StatusCodes</span>.<span class="hljs-property">NOT_FOUND</span>,
    );
   }
   <span class="hljs-keyword">const</span> updatedEnquiry = <span class="hljs-keyword">await</span> enquiry.<span class="hljs-title function_">update</span>(payload);
   <span class="hljs-keyword">return</span> updatedEnquiry;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(
  <span class="hljs-attr">payload</span>: <span class="hljs-title class_">EnquiryCreationAttributes</span>,
 ): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> enquiry = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">create</span>(payload);
   <span class="hljs-keyword">return</span> enquiry;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">delete</span>(<span class="hljs-attr">id</span>: string | number): <span class="hljs-title class_">Promise</span>&#x3C;boolean> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> deletedEnquiryCount = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">destroy</span>({
    <span class="hljs-attr">where</span>: { id },
   });

   <span class="hljs-keyword">return</span> !!deletedEnquiryCount;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">// src/components/enquiry/EnquiryController.ts 파일을 생성하여 REST API의 컨트롤러 부분을 처리합니다.</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextFunction</span>, <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span>, <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ReasonPhrases</span>, <span class="hljs-title class_">StatusCodes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'http-status-codes'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BaseApi</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../BaseApi'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EnquiryService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./EnquiryService'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EnquiryAttributes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../database/models/Enquiry'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ApiError</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../../abstractions/ApiError'</span>;

<span class="hljs-comment">/**
 * Enquiry controller
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnquiryController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseApi</span> {
 private <span class="hljs-attr">enquiry</span>: <span class="hljs-title class_">EnquiryService</span>;
 public <span class="hljs-attr">basePath</span>: string = <span class="hljs-string">'enquiries'</span>;

 <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">super</span>();
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">enquiry</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EnquiryService</span>();
 }

 <span class="hljs-comment">/**
  *
  */</span>
 public <span class="hljs-title function_">routes</span>(): <span class="hljs-title class_">RouteDefinition</span>[] {
  <span class="hljs-keyword">return</span> [
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">getEnquiries</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) },
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/:id'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">getEnquiry</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) },
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'post'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">createEnquiry</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) },
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/:id'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'put'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateEnquiry</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) },
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/:id'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'delete'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">delete</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) }
  ];
 }

 <span class="hljs-comment">/**
  *
  * <span class="hljs-doctag">@param</span> <span class="hljs-variable">req</span>
  * <span class="hljs-doctag">@param</span> <span class="hljs-variable">res</span>
  * <span class="hljs-doctag">@param</span> <span class="hljs-variable">next</span>
  */</span>
 public <span class="hljs-keyword">async</span> <span class="hljs-title function_">getEnquiries</span>(
  <span class="hljs-attr">req</span>: <span class="hljs-title class_">Request</span>,
  <span class="hljs-attr">res</span>: <span class="hljs-title class_">Response</span>,
  <span class="hljs-attr">next</span>: <span class="hljs-title class_">NextFunction</span>,
 ): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> <span class="hljs-attr">enquiries</span>: <span class="hljs-title class_">EnquiryAttributes</span>[] =
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">enquiry</span>.<span class="hljs-title function_">getAll</span>();
   res.<span class="hljs-property">locals</span>.<span class="hljs-property">data</span> = enquiries;
   <span class="hljs-comment">// call base class method</span>
   <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(res);
  } <span class="hljs-keyword">catch</span> (err) {
   <span class="hljs-title function_">next</span>(err);
  }
 }

 <span class="hljs-comment">// 이하 생략</span>
}
</code></pre>
<div class="content-ad"></div>
<h1>단계 5: 구성 요소를 위한 REST API 생성</h1>
<p>문의: 문의는 속성 집합을 가진 주요 엔터티입니다.</p>
<ul>
<li>GET /v1/enquiries 모든 문의 목록을 가져옵니다.</li>
<li>POST /v1/enquiries 새로운 문의를 생성합니다.</li>
<li>GET /v1/enquiries/'id' 특정 문의의 세부 정보를 가져옵니다.</li>
<li>PUT /v1/enquiries/'id' 특정 문의의 세부 정보를 업데이트합니다.</li>
<li>DELETE /v1/enquiries/'id' 특정 문의를 삭제합니다.</li>
</ul>
<p>우리는 이전에 정의한 경로를 등록해야 합니다. 이를 위해 src/routes.ts에 항목을 만들어야 합니다.</p>
<div class="content-ad"></div>
<p>아래 링크에서 전체 코드베이스를 찾을 수 있습니다. 초보자를 염두에 두고 설계된 이 저장소는 백엔드 프로젝트를 시작하는 데 튼튼한 출발점을 제공합니다. 단위 테스트 케이스가 포함된 잘 정리된 코드베이스로 깊게 파고들며 학습하고 문제 해결을 쉽게 할 수 있습니다. 게다가 GitHub Actions 워크플로가 통합되어 있어 테스트와 배포를 자동화할 수 있습니다. 학습을 시작하거나 첫 번째 실제 애플리케이션을 구축하려는 경우에도 유용합니다.</p>
<p>읽어 주셔서 감사합니다. 이 블로그가 학습에 가치가 있다고 생각되면 의견을 공유하고 클랩(clap)을 눌러주세요.</p>
<div class="content-ad"></div>
<h1>친절한 언어로 🚀</h1>
<p>In Plain English 커뮤니티에 참여해 주셔서 감사합니다! 떠나시기 전에:</p>
<ul>
<li>작가를 claps하고 팔로우 해주세요 👏️</li>
<li>팔로우하기: X | LinkedIn | YouTube | Discord | 뉴스레터</li>
<li>다른 플랫폼 방문하기: Stackademic | CoFeed | Venture | Cubed</li>
<li>PlainEnglish.io에서 더 많은 콘텐츠를 만나보세요</li>
</ul>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"TypeScript, Nodejs, 그리고 PostgreSQL과 함께 Sequelize를 사용하는 방법","description":"","date":"2024-05-20 22:18","slug":"2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL","content":"\n\n시작 가이드: TypeScript로 Sequelize 구성하기 \n\n모델, 연결 및 데이터베이스 연결을 정의하여 Sequelize를 TypeScript와 함께 설정하는 방법에 대해 알아보겠습니다.\n\n# 소개\n\n이 글에서는 Sequelize를 설정하여 TypeScript Node.js 및 Express를 연동하여 PostgreSQL 데이터베이스에 연결하고, 그 후에 조회용 샘플 모델을 만들어 보겠습니다.\n\nTypeScript, Node.js, Express.js 및 PostgreSQL을 함께 사용하면 견고한 백엔드 개발을 위한 강력한 조합을 제공합니다. Node.js를 위한 인기 있는 ORM인 Sequelize와 TypeScript의 정적 유형 지정 그리고 PostgreSQL의 신뢰성을 활용하여 효율적인 데이터 관리와 확장 가능성을 확보할 수 있습니다. 이 통합은 데이터의 모델링, 쿼리, 그리고 조작을 원활하게 하며 개발 경험을 향상시키면서 코드 무결성과 데이터베이스 무결성을 유지하는 데 도움이 됩니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n새로운 실시간 Node.js 앱이나 서비스를 시작할 때 가장 먼저 고려해야 할 것은 어디서 시작해야 하는지, 어떤 프레임워크나 ORM을 사용해야 하는지, 그리고 그것이 성능에 어떻게 영향을 미칠지 입니다. 또한, SQL 또는 NoSQL 데이터베이스를 선택하는 것에 따라 이 질문이 달라질 수 있습니다.\n\n# 사전 준비\n\n이 글에서는 TypeScript와 Express를 사용하여 이미 만들어 놓은 Node.js 보일러플레이트 코드를 사용할 것입니다.\n\n우리는 sequelize, pg, pg-hstore이 npm 모듈을 사용하여 어플리케이션을 설정할 것이고, Jest를 사용하여 유닛 테스트 케이스도 추가했습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n// 애플리케이션 복제하기\ngit clone https://github.com/santoshshinde2012/node-boilerplate.git\n\n// 새 디렉토리로 변경\ncd node-boilerplate\n\n// 모든 모듈 설치\nnpm install\n\n// 애플리케이션 시작\nnpm start\n```\n\n# 단계 1: PostgreSQL 설정 및 데이터베이스 생성\n\n아래 스크립트로 폴더 docker/postgresql에 Dockerfile.postgis 파일을 생성합니다.\n\n```js\nFROM postgres:latest\n\n# PostGIS 확장 기능 설치\nRUN apt-get update \\\n    \u0026\u0026 apt-get install -y postgis postgresql-12-postgis-3 \\\n    \u0026\u0026 apt-get clean \\\n    \u0026\u0026 rm -rf /var/lib/apt/lists/*\n\n# 초기 쿼리를 실행하기 위해 init.sql에 쿼리를 작성할 수 있습니다\nCOPY init.sql /docker-entrypoint-initdb.d/\n\n# PostGIS 확장 기능 활성화\nRUN echo \"CREATE EXTENSION IF NOT EXISTS postgis;\" \u003e\u003e /docker-entrypoint-initdb.d/init.sql\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n도커 Compose 파일을 만들어주세요. docker/postgresql 폴더에 아래 스크립트를 작성해주세요.\n\n```js\n# PostgreSQL을 위한 docker-compose.yml\n\nversion: '3.8'\n\nservices:\n  db:\n    build:\n      context: .\n      dockerfile: Dockerfile.postgis  # 커스텀 Dockerfile 사용\n    restart: always\n    environment:\n      POSTGRES_USER: user1\n      POSTGRES_PASSWORD: user1@123\n      POSTGRES_DB: database\n    healthcheck:\n      # 이 명령어는 데이터베이스가 준비되어 있는지 소스 db 서버에서 확인합니다.\n      test: [ \"CMD-SHELL\", \"pg_isready\" ]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - postgres_data_v:/var/lib/postgresql/data\nvolumes:\n  postgres_data_v:\n```\n\npackage.json 안에 Docker Compose 파일을 실행시키는 명령어를 추가해주세요.\n\n```js\n\"db:up\": \"docker-compose -f docker/postgresql/docker-compose.yml up\",\n\"db:down\": \"docker-compose -f docker/postgresql/docker-compose.yml down\"\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nPostgresql을 실행하고 다음 명령어를 사용하여 데이터베이스를 생성하세요: npm run db:up.\n\n![image](/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png)\n\n# 단계 2: Sequelize의 설치 및 구성\n\nSequelize는 npm (또는 yarn)을 통해 사용할 수 있습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnpm install --save sequelize\nnpm install --save pg pg-hstore # Postgres\n```\n\n작업을 마치면 코드를 배치할 폴더 구조를 확인해야 합니다. 코드가 깨끗하고 가독성 있게 유지되도록 하기 위해 코드베이스를 여러 폴더로 나누었습니다. 데이터베이스 관련 부분은 database 폴더 아래에 위치해야 합니다.\n\n\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_1.png\" /\u003e\n\nsrc/database/config 폴더의 index.ts 파일에 데이터베이스 연결을 정의하고, .env npm 모듈을 사용하여 환경 변수를 가져옵니다. 환경에 따른 로직은 필요에 따라 수정할 수 있습니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport path from 'path';\nimport dotenv from 'dotenv';\n\ndotenv.config({\n    path: path.join(__dirname, '../../.env'),\n});\n\n타입 DbConnection = {\n    호스트: 문자열;\n    포트: 숫자;\n    사용자: 문자열;\n    비밀번호: 문자열;\n    데이터베이스: 문자열;\n    dbLogging: 부울;\n};\n\nconst connection: DbConnection = {\n    호스트: process.env.DB_HOST,\n    포트: Number(process.env.DB_PORT),\n    사용자: process.env.DB_USER,\n    비밀번호: process.env.DB_PASSWORD,\n    데이터베이스: process.env.DB_NAME,\n    dbLogging:\n        process.env.NODE_ENV === 'development' || process.env.LOG === 'true',\n};\n\nexport default connection;\n```\n\nsrc/database 폴더에 index.ts 파일을 생성하여 sequelize 연결을 만듭니다.\n\n```js\nimport { Dialect, Sequelize } from 'sequelize';\nimport connection from './config';\n\nconst { database, user, password, host, dbLogging } = connection;\n\nconst sequelizeConnection = new Sequelize(database, user, password, {\n    host,\n    logging: dbLogging,\n    dialect: 'postgres' as Dialect,\n});\n\nexport default sequelizeConnection;\n```\n\nsrc/App.ts 또는 서버 응용 프로그램의 진입 파일에 assertDatabaseConnection 메서드를 만들어 데이터베이스 확인을하는 메서드를 호출하세요.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n개인 async assertDatabaseConnection(): Promise\u003cvoid\u003e {\n    try {\n     await database.authenticate();\n     await database.sync();\n     logger.info('연결이 성공적으로 설정되었습니다.');\n    } catch (error) {\n logger.error('데이터베이스에 연결할 수 없습니다:', error);\n    }\n}\n```\n\n# 단계 3: Sequelize를 사용하여 테이블(모델) 생성\n\nsrc/database/models 폴더에 모델을 정의하세요; 여기서는 샘플 모델인 Enquiry.ts를 생성할 것입니다.\n\n```js\nimport { DataTypes, Model, Optional, UUIDV4 } from 'sequelize';\nimport sequelize from '../index';\n\ninterface EnquiryAttributes {\n id: string;\n name: string;\n subject: string;\n body: string;\n email: string;\n country: string;\n}\n\ninterface EnquiryCreationAttributes\n extends Optional\u003cEnquiryAttributes, 'id'\u003e {}\n\nclass Enquiry\n extends Model\u003cEnquiryAttributes, EnquiryCreationAttributes\u003e\n implements EnquiryAttributes\n{\n public id!: string;\n public name!: string;\n public country!: string;\n public subject!: string;\n public body!: string;\n public email!: string;\n\n public readonly createdAt!: Date;\n public readonly updatedAt!: Date;\n}\n\nEnquiry.init(\n {\n  id: {\n   type: DataTypes.UUID,\n   defaultValue: UUIDV4,\n   primaryKey: true,\n  },\n  name: {\n   type: DataTypes.STRING(100),\n   allowNull: false,\n  },\n  country: {\n   type: DataTypes.STRING(100),\n   allowNull: false,\n  },\n  subject: {\n   type: DataTypes.STRING(200),\n   allowNull: false,\n  },\n  email: {\n   type: DataTypes.STRING(100),\n   allowNull: false,\n  },\n  body: {\n   type: DataTypes.STRING(400),\n   allowNull: false,\n  }\n },\n {\n  sequelize,\n  modelName: 'Enquiry',\n  tableName: 'Enquiry',\n  timestamps: true,\n },\n);\n\nexport { Enquiry, EnquiryAttributes, EnquiryCreationAttributes };\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { 데이터 유형, 모델, 선택적, UUIDV4 } from 'sequelize';\nimport sequelize from '../index';\n\n인터페이스 조회 속성 {\n id: string;\n 이름: string;\n 주제: string;\n 본문: string;\n 이메일: string;\n 국가: string;\n}\n\n인터페이스 EnquiryCreationAttributes 에 이어, EnquiryAttributes의 선택적 해제 {}\n\n클래스 Enquiry은 Model\u003cEnquiryAttributes, EnquiryCreationAttributes\u003e를 확장하며 EnquiryAttributes를 구현합니다 {\n 공공 id!: string;\n 공공 이름!: string;\n 공공 국가!: string;\n 공공 주제!: string;\n 공공 몸통!: string;\n 공공 이메일!: string;\n\n 공공 readonly createdAt!: Date;\n 공공 readonly updatedAt!: Date;\n}\n\nEnquiry.init(\n {\n  아이디: {\n   유형: 데이터 유형.UUID,\n   기본값: UUIDV4,\n   기본 키: 참,\n  },\n  이름: {\n   유형: 데이터 유형.STRING(100),\n   허용하지 않음: 거짓,\n  },\n  국가: {\n   유형: 데이터 유형.STRING(100),\n   허용하지 않음: 거짓,\n  },\n  주제: {\n   유형: 데이터 유형.STRING(200),\n   허용하지 않음: 거짓,\n  },\n  이메일: {\n   유형: 데이터 유형.STRING(100),\n   허용하지 않음: 거짓,\n  },\n  몸통: {\n   유형: 데이터 유형.STRING(400),\n   허용하지 않음: 거짓,\n  }\n },\n {\n  시퀄라이즈,\n  모델 이름: '조회',\n  테이블 이름: '조회',\n  타임 스탬프: 참,\n },\n);\n\n수출 { 조회, EnquiryAttributes, EnquiryCreationAttributes };\n```\n\n\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_2.png\" /\u003e\n\n# 단계 4: 구성 요소에서 서비스 및 컨트롤러 설정\n\n- 구성 요소 구성 요소는 두 부분으로 나뉩니다: 컨트롤러 및 서비스 서비스는 해당 데이터베이스 모델과 통신하는 데 책임이 있습니다.\n- 라우트 — 컨트롤러 및 해당 레스트 엔드포인트의 등록 방법을 등록합니다.\n- 공통 서비스 —이 서비스는 여러 데이터베이스 모델 간의 일반 작업 수행에 책임이 있습니다.\n- 이를 구성 요소 서비스에 주입하고 구성 요소 서비스에서 컨트롤러에서 해당 메서드에 액세스할 수 있습니다.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n// src/components/enquiry/EnquiryService.ts 파일을 생성하여 sequelize를 사용하여 생성된 모델의 데이터베이스 작업을 처리합니다.\n\nimport {\n Enquiry,\n EnquiryAttributes,\n EnquiryCreationAttributes,\n} from '../../database/models/Enquiry';\nimport logger from '../../lib/logger';\nimport ApiError from '../../abstractions/ApiError';\nimport { StatusCodes } from 'http-status-codes';\n\nexport class EnquiryService {\n\n async getAll(): Promise\u003cEnquiryAttributes[]\u003e {\n  try {\n   const enquiries = await Enquiry.findAll();\n   return enquiries;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async getById(id: string | number): Promise\u003cEnquiryAttributes\u003e {\n  try {\n   const enquiry = await Enquiry.findByPk(id);\n   if (!enquiry) {\n    throw new ApiError('Enquiry not found', StatusCodes.NOT_FOUND);\n   }\n   return enquiry;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async update(\n  id: string | number,\n  payload: Partial\u003cEnquiryCreationAttributes\u003e,\n ): Promise\u003cEnquiryAttributes\u003e {\n  try {\n   const enquiry = await Enquiry.findByPk(id);\n   if (!enquiry) {\n    throw new ApiError(\n     'Enquiry not found',\n     StatusCodes.NOT_FOUND,\n    );\n   }\n   const updatedEnquiry = await enquiry.update(payload);\n   return updatedEnquiry;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async create(\n  payload: EnquiryCreationAttributes,\n ): Promise\u003cEnquiryAttributes\u003e {\n  try {\n   const enquiry = await Enquiry.create(payload);\n   return enquiry;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async delete(id: string | number): Promise\u003cboolean\u003e {\n  try {\n   const deletedEnquiryCount = await Enquiry.destroy({\n    where: { id },\n   });\n\n   return !!deletedEnquiryCount;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n}\n```\n\n```js\n// src/components/enquiry/EnquiryController.ts 파일을 생성하여 REST API의 컨트롤러 부분을 처리합니다.\n\nimport { NextFunction, Request, Response, Router } from 'express';\nimport { ReasonPhrases, StatusCodes } from 'http-status-codes';\nimport BaseApi from '../BaseApi';\nimport { EnquiryService } from './EnquiryService';\nimport { EnquiryAttributes } from '../../database/models/Enquiry';\nimport ApiError from '../../abstractions/ApiError';\n\n/**\n * Enquiry controller\n */\nexport default class EnquiryController extends BaseApi {\n private enquiry: EnquiryService;\n public basePath: string = 'enquiries';\n\n constructor() {\n  super();\n  this.enquiry = new EnquiryService();\n }\n\n /**\n  *\n  */\n public routes(): RouteDefinition[] {\n  return [\n   { path: '/', method: 'get', handler: this.getEnquiries.bind(this) },\n   { path: '/:id', method: 'get', handler: this.getEnquiry.bind(this) },\n   { path: '/', method: 'post', handler: this.createEnquiry.bind(this) },\n   { path: '/:id', method: 'put', handler: this.updateEnquiry.bind(this) },\n   { path: '/:id', method: 'delete', handler: this.delete.bind(this) }\n  ];\n }\n\n /**\n  *\n  * @param req\n  * @param res\n  * @param next\n  */\n public async getEnquiries(\n  req: Request,\n  res: Response,\n  next: NextFunction,\n ): Promise\u003cvoid\u003e {\n  try {\n   const enquiries: EnquiryAttributes[] =\n    await this.enquiry.getAll();\n   res.locals.data = enquiries;\n   // call base class method\n   this.send(res);\n  } catch (err) {\n   next(err);\n  }\n }\n\n // 이하 생략\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 단계 5: 구성 요소를 위한 REST API 생성\n\n문의: 문의는 속성 집합을 가진 주요 엔터티입니다.\n\n- GET /v1/enquiries 모든 문의 목록을 가져옵니다.\n- POST /v1/enquiries 새로운 문의를 생성합니다.\n- GET /v1/enquiries/'id' 특정 문의의 세부 정보를 가져옵니다.\n- PUT /v1/enquiries/'id' 특정 문의의 세부 정보를 업데이트합니다.\n- DELETE /v1/enquiries/'id' 특정 문의를 삭제합니다.\n\n우리는 이전에 정의한 경로를 등록해야 합니다. 이를 위해 src/routes.ts에 항목을 만들어야 합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n아래 링크에서 전체 코드베이스를 찾을 수 있습니다. 초보자를 염두에 두고 설계된 이 저장소는 백엔드 프로젝트를 시작하는 데 튼튼한 출발점을 제공합니다. 단위 테스트 케이스가 포함된 잘 정리된 코드베이스로 깊게 파고들며 학습하고 문제 해결을 쉽게 할 수 있습니다. 게다가 GitHub Actions 워크플로가 통합되어 있어 테스트와 배포를 자동화할 수 있습니다. 학습을 시작하거나 첫 번째 실제 애플리케이션을 구축하려는 경우에도 유용합니다.\n\n읽어 주셔서 감사합니다. 이 블로그가 학습에 가치가 있다고 생각되면 의견을 공유하고 클랩(clap)을 눌러주세요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# 친절한 언어로 🚀\n\nIn Plain English 커뮤니티에 참여해 주셔서 감사합니다! 떠나시기 전에:\n\n- 작가를 claps하고 팔로우 해주세요 👏️\n- 팔로우하기: X | LinkedIn | YouTube | Discord | 뉴스레터\n- 다른 플랫폼 방문하기: Stackademic | CoFeed | Venture | Cubed\n- PlainEnglish.io에서 더 많은 콘텐츠를 만나보세요","ogImage":{"url":"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png"},"coverImage":"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png","tag":["Tech"],"readingTime":12},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e시작 가이드: TypeScript로 Sequelize 구성하기\u003c/p\u003e\n\u003cp\u003e모델, 연결 및 데이터베이스 연결을 정의하여 Sequelize를 TypeScript와 함께 설정하는 방법에 대해 알아보겠습니다.\u003c/p\u003e\n\u003ch1\u003e소개\u003c/h1\u003e\n\u003cp\u003e이 글에서는 Sequelize를 설정하여 TypeScript Node.js 및 Express를 연동하여 PostgreSQL 데이터베이스에 연결하고, 그 후에 조회용 샘플 모델을 만들어 보겠습니다.\u003c/p\u003e\n\u003cp\u003eTypeScript, Node.js, Express.js 및 PostgreSQL을 함께 사용하면 견고한 백엔드 개발을 위한 강력한 조합을 제공합니다. Node.js를 위한 인기 있는 ORM인 Sequelize와 TypeScript의 정적 유형 지정 그리고 PostgreSQL의 신뢰성을 활용하여 효율적인 데이터 관리와 확장 가능성을 확보할 수 있습니다. 이 통합은 데이터의 모델링, 쿼리, 그리고 조작을 원활하게 하며 개발 경험을 향상시키면서 코드 무결성과 데이터베이스 무결성을 유지하는 데 도움이 됩니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e새로운 실시간 Node.js 앱이나 서비스를 시작할 때 가장 먼저 고려해야 할 것은 어디서 시작해야 하는지, 어떤 프레임워크나 ORM을 사용해야 하는지, 그리고 그것이 성능에 어떻게 영향을 미칠지 입니다. 또한, SQL 또는 NoSQL 데이터베이스를 선택하는 것에 따라 이 질문이 달라질 수 있습니다.\u003c/p\u003e\n\u003ch1\u003e사전 준비\u003c/h1\u003e\n\u003cp\u003e이 글에서는 TypeScript와 Express를 사용하여 이미 만들어 놓은 Node.js 보일러플레이트 코드를 사용할 것입니다.\u003c/p\u003e\n\u003cp\u003e우리는 sequelize, pg, pg-hstore이 npm 모듈을 사용하여 어플리케이션을 설정할 것이고, Jest를 사용하여 유닛 테스트 케이스도 추가했습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// 애플리케이션 복제하기\u003c/span\u003e\ngit clone \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/santoshshinde2012/node-boilerplate.git\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// 새 디렉토리로 변경\u003c/span\u003e\ncd node-boilerplate\n\n\u003cspan class=\"hljs-comment\"\u003e// 모든 모듈 설치\u003c/span\u003e\nnpm install\n\n\u003cspan class=\"hljs-comment\"\u003e// 애플리케이션 시작\u003c/span\u003e\nnpm start\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 1: PostgreSQL 설정 및 데이터베이스 생성\u003c/h1\u003e\n\u003cp\u003e아래 스크립트로 폴더 docker/postgresql에 Dockerfile.postgis 파일을 생성합니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epostgres\u003c/span\u003e:latest\n\n# \u003cspan class=\"hljs-title class_\"\u003ePostGIS\u003c/span\u003e 확장 기능 설치\n\u003cspan class=\"hljs-variable constant_\"\u003eRUN\u003c/span\u003e apt-get update \\\n    \u0026#x26;\u0026#x26; apt-get install -y postgis postgresql-\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e-postgis-\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \\\n    \u0026#x26;\u0026#x26; apt-get clean \\\n    \u0026#x26;\u0026#x26; rm -rf /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/lib/apt/lists\u003cspan class=\"hljs-comment\"\u003e/*\n\n# 초기 쿼리를 실행하기 위해 init.sql에 쿼리를 작성할 수 있습니다\nCOPY init.sql /docker-entrypoint-initdb.d/\n\n# PostGIS 확장 기능 활성화\nRUN echo \"CREATE EXTENSION IF NOT EXISTS postgis;\" \u003e\u003e /docker-entrypoint-initdb.d/init.sql\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e도커 Compose 파일을 만들어주세요. docker/postgresql 폴더에 아래 스크립트를 작성해주세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# \u003cspan class=\"hljs-title class_\"\u003ePostgreSQL\u003c/span\u003e을 위한 docker-compose.\u003cspan class=\"hljs-property\"\u003eyml\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'3.8'\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eservices\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003edb\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003ebuild\u003c/span\u003e:\n      \u003cspan class=\"hljs-attr\"\u003econtext\u003c/span\u003e: .\n      \u003cspan class=\"hljs-attr\"\u003edockerfile\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003epostgis\u003c/span\u003e  # 커스텀 \u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003e 사용\n    \u003cspan class=\"hljs-attr\"\u003erestart\u003c/span\u003e: always\n    \u003cspan class=\"hljs-attr\"\u003eenvironment\u003c/span\u003e:\n      \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_USER\u003c/span\u003e: user1\n      \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e: user1@\u003cspan class=\"hljs-number\"\u003e123\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_DB\u003c/span\u003e: database\n    \u003cspan class=\"hljs-attr\"\u003ehealthcheck\u003c/span\u003e:\n      # 이 명령어는 데이터베이스가 준비되어 있는지 소스 db 서버에서 확인합니다.\n      \u003cspan class=\"hljs-attr\"\u003etest\u003c/span\u003e: [ \u003cspan class=\"hljs-string\"\u003e\"CMD-SHELL\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"pg_isready\"\u003c/span\u003e ]\n      \u003cspan class=\"hljs-attr\"\u003einterval\u003c/span\u003e: 5s\n      \u003cspan class=\"hljs-attr\"\u003etimeout\u003c/span\u003e: 5s\n      \u003cspan class=\"hljs-attr\"\u003eretries\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports\u003c/span\u003e:\n      - \u003cspan class=\"hljs-string\"\u003e\"5432:5432\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes\u003c/span\u003e:\n      - \u003cspan class=\"hljs-attr\"\u003epostgres_data_v\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/var/\u003c/span\u003elib/postgresql/data\n\u003cspan class=\"hljs-attr\"\u003evolumes\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003epostgres_data_v\u003c/span\u003e:\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003epackage.json 안에 Docker Compose 파일을 실행시키는 명령어를 추가해주세요.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e\"db:up\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"docker-compose -f docker/postgresql/docker-compose.yml up\"\u003c/span\u003e,\n\u003cspan class=\"hljs-string\"\u003e\"db:down\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"docker-compose -f docker/postgresql/docker-compose.yml down\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003ePostgresql을 실행하고 다음 명령어를 사용하여 데이터베이스를 생성하세요: npm run db:up.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003ch1\u003e단계 2: Sequelize의 설치 및 구성\u003c/h1\u003e\n\u003cp\u003eSequelize는 npm (또는 yarn)을 통해 사용할 수 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install --save sequelize\nnpm install --save pg pg-hstore # \u003cspan class=\"hljs-title class_\"\u003ePostgres\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e작업을 마치면 코드를 배치할 폴더 구조를 확인해야 합니다. 코드가 깨끗하고 가독성 있게 유지되도록 하기 위해 코드베이스를 여러 폴더로 나누었습니다. 데이터베이스 관련 부분은 database 폴더 아래에 위치해야 합니다.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_1.png\"\u003e\n\u003cp\u003esrc/database/config 폴더의 index.ts 파일에 데이터베이스 연결을 정의하고, .env npm 모듈을 사용하여 환경 변수를 가져옵니다. 환경에 따른 로직은 필요에 따라 수정할 수 있습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e path \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'path'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'dotenv'\u003c/span\u003e;\n\ndotenv.\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: path.\u003cspan class=\"hljs-title function_\"\u003ejoin\u003c/span\u003e(__dirname, \u003cspan class=\"hljs-string\"\u003e'../../.env'\u003c/span\u003e),\n});\n\n타입 \u003cspan class=\"hljs-title class_\"\u003eDbConnection\u003c/span\u003e = {\n    호스트: 문자열;\n    포트: 숫자;\n    사용자: 문자열;\n    비밀번호: 문자열;\n    데이터베이스: 문자열;\n    \u003cspan class=\"hljs-attr\"\u003edbLogging\u003c/span\u003e: 부울;\n};\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003econnection\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDbConnection\u003c/span\u003e = {\n    호스트: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_HOST\u003c/span\u003e,\n    포트: \u003cspan class=\"hljs-title class_\"\u003eNumber\u003c/span\u003e(process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_PORT\u003c/span\u003e),\n    사용자: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_USER\u003c/span\u003e,\n    비밀번호: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_PASSWORD\u003c/span\u003e,\n    데이터베이스: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_NAME\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003edbLogging\u003c/span\u003e:\n        process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNODE_ENV\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e'development'\u003c/span\u003e || process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eLOG\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e'true'\u003c/span\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e connection;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003esrc/database 폴더에 index.ts 파일을 생성하여 sequelize 연결을 만듭니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eDialect\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eSequelize\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'sequelize'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e connection \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./config'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { database, user, password, host, dbLogging } = connection;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e sequelizeConnection = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSequelize\u003c/span\u003e(database, user, password, {\n    host,\n    \u003cspan class=\"hljs-attr\"\u003elogging\u003c/span\u003e: dbLogging,\n    \u003cspan class=\"hljs-attr\"\u003edialect\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'postgres'\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDialect\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e sequelizeConnection;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003esrc/App.ts 또는 서버 응용 프로그램의 진입 파일에 assertDatabaseConnection 메서드를 만들어 데이터베이스 확인을하는 메서드를 호출하세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e개인 \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eassertDatabaseConnection\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n     \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e database.\u003cspan class=\"hljs-title function_\"\u003eauthenticate\u003c/span\u003e();\n     \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e database.\u003cspan class=\"hljs-title function_\"\u003esync\u003c/span\u003e();\n     logger.\u003cspan class=\"hljs-title function_\"\u003einfo\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'연결이 성공적으로 설정되었습니다.'\u003c/span\u003e);\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'데이터베이스에 연결할 수 없습니다:'\u003c/span\u003e, error);\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003e단계 3: Sequelize를 사용하여 테이블(모델) 생성\u003c/h1\u003e\n\u003cp\u003esrc/database/models 폴더에 모델을 정의하세요; 여기서는 샘플 모델인 Enquiry.ts를 생성할 것입니다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eModel\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eOptional\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eUUIDV4\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'sequelize'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e sequelize \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../index'\u003c/span\u003e;\n\ninterface \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e {\n \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003esubject\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003ebody\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003ecountry\u003c/span\u003e: string;\n}\n\ninterface \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e\n \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOptional\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'id'\u003c/span\u003e\u003e {}\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e\n \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eModel\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e\u003e\n implements \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e\n{\n public id!: string;\n public name!: string;\n public country!: string;\n public subject!: string;\n public body!: string;\n public email!: string;\n\n public readonly createdAt!: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n public readonly updatedAt!: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einit\u003c/span\u003e(\n {\n  \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eUUID\u003c/span\u003e,\n   \u003cspan class=\"hljs-attr\"\u003edefaultValue\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUUIDV4\u003c/span\u003e,\n   \u003cspan class=\"hljs-attr\"\u003eprimaryKey\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ecountry\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003esubject\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ebody\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  }\n },\n {\n  sequelize,\n  \u003cspan class=\"hljs-attr\"\u003emodelName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Enquiry'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003etableName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Enquiry'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003etimestamps\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n },\n);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e };\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { 데이터 유형, 모델, 선택적, \u003cspan class=\"hljs-title class_\"\u003eUUIDV4\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'sequelize'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e sequelize \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../index'\u003c/span\u003e;\n\n인터페이스 조회 속성 {\n \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string;\n 이름: string;\n 주제: string;\n 본문: string;\n 이메일: string;\n 국가: string;\n}\n\n인터페이스 \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e 에 이어, \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e의 선택적 해제 {}\n\n클래스 \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e은 \u003cspan class=\"hljs-title class_\"\u003eModel\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e\u003e를 확장하며 \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e를 구현합니다 {\n 공공 id!: string;\n 공공 이름!: string;\n 공공 국가!: string;\n 공공 주제!: string;\n 공공 몸통!: string;\n 공공 이메일!: string;\n\n 공공 readonly createdAt!: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n 공공 readonly updatedAt!: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einit\u003c/span\u003e(\n {\n  아이디: {\n   유형: 데이터 유형.\u003cspan class=\"hljs-property\"\u003eUUID\u003c/span\u003e,\n   기본값: \u003cspan class=\"hljs-title class_\"\u003eUUIDV4\u003c/span\u003e,\n   기본 키: 참,\n  },\n  이름: {\n   유형: 데이터 유형.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   허용하지 않음: 거짓,\n  },\n  국가: {\n   유형: 데이터 유형.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   허용하지 않음: 거짓,\n  },\n  주제: {\n   유형: 데이터 유형.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e),\n   허용하지 않음: 거짓,\n  },\n  이메일: {\n   유형: 데이터 유형.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   허용하지 않음: 거짓,\n  },\n  몸통: {\n   유형: 데이터 유형.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e),\n   허용하지 않음: 거짓,\n  }\n },\n {\n  시퀄라이즈,\n  모델 이름: \u003cspan class=\"hljs-string\"\u003e'조회'\u003c/span\u003e,\n  테이블 이름: \u003cspan class=\"hljs-string\"\u003e'조회'\u003c/span\u003e,\n  타임 스탬프: 참,\n },\n);\n\n수출 { 조회, \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e };\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_2.png\"\u003e\n\u003ch1\u003e단계 4: 구성 요소에서 서비스 및 컨트롤러 설정\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e구성 요소 구성 요소는 두 부분으로 나뉩니다: 컨트롤러 및 서비스 서비스는 해당 데이터베이스 모델과 통신하는 데 책임이 있습니다.\u003c/li\u003e\n\u003cli\u003e라우트 — 컨트롤러 및 해당 레스트 엔드포인트의 등록 방법을 등록합니다.\u003c/li\u003e\n\u003cli\u003e공통 서비스 —이 서비스는 여러 데이터베이스 모델 간의 일반 작업 수행에 책임이 있습니다.\u003c/li\u003e\n\u003cli\u003e이를 구성 요소 서비스에 주입하고 구성 요소 서비스에서 컨트롤러에서 해당 메서드에 액세스할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// src/components/enquiry/EnquiryService.ts 파일을 생성하여 sequelize를 사용하여 생성된 모델의 데이터베이스 작업을 처리합니다.\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e,\n \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e,\n \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../database/models/Enquiry'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e logger \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../lib/logger'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApiError\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../abstractions/ApiError'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eStatusCodes\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'http-status-codes'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiryService\u003c/span\u003e {\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e[]\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e enquiries = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindAll\u003c/span\u003e();\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e enquiries;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetById\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string | number): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e enquiry = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindByPk\u003c/span\u003e(id);\n   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!enquiry) {\n    \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApiError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Enquiry not found'\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eStatusCodes\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNOT_FOUND\u003c/span\u003e);\n   }\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e enquiry;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdate\u003c/span\u003e(\n  \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string | number,\n  \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003ePartial\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e\u003e,\n ): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e enquiry = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindByPk\u003c/span\u003e(id);\n   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!enquiry) {\n    \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApiError\u003c/span\u003e(\n     \u003cspan class=\"hljs-string\"\u003e'Enquiry not found'\u003c/span\u003e,\n     \u003cspan class=\"hljs-title class_\"\u003eStatusCodes\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNOT_FOUND\u003c/span\u003e,\n    );\n   }\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e updatedEnquiry = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e enquiry.\u003cspan class=\"hljs-title function_\"\u003eupdate\u003c/span\u003e(payload);\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e updatedEnquiry;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n  \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e,\n ): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e enquiry = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(payload);\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e enquiry;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string | number): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;boolean\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e deletedEnquiryCount = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edestroy\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003ewhere\u003c/span\u003e: { id },\n   });\n\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e !!deletedEnquiryCount;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// src/components/enquiry/EnquiryController.ts 파일을 생성하여 REST API의 컨트롤러 부분을 처리합니다.\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNextFunction\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'express'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eReasonPhrases\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eStatusCodes\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'http-status-codes'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBaseApi\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../BaseApi'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eEnquiryService\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./EnquiryService'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../database/models/Enquiry'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApiError\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../abstractions/ApiError'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e/**\n * Enquiry controller\n */\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiryController\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseApi\u003c/span\u003e {\n private \u003cspan class=\"hljs-attr\"\u003eenquiry\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEnquiryService\u003c/span\u003e;\n public \u003cspan class=\"hljs-attr\"\u003ebasePath\u003c/span\u003e: string = \u003cspan class=\"hljs-string\"\u003e'enquiries'\u003c/span\u003e;\n\n \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-variable language_\"\u003esuper\u003c/span\u003e();\n  \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eenquiry\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiryService\u003c/span\u003e();\n }\n\n \u003cspan class=\"hljs-comment\"\u003e/**\n  *\n  */\u003c/span\u003e\n public \u003cspan class=\"hljs-title function_\"\u003eroutes\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eRouteDefinition\u003c/span\u003e[] {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'get'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egetEnquiries\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) },\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/:id'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'get'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egetEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) },\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'post'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecreateEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) },\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/:id'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'put'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eupdateEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) },\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/:id'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'delete'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edelete\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) }\n  ];\n }\n\n \u003cspan class=\"hljs-comment\"\u003e/**\n  *\n  * \u003cspan class=\"hljs-doctag\"\u003e@param\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003ereq\u003c/span\u003e\n  * \u003cspan class=\"hljs-doctag\"\u003e@param\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eres\u003c/span\u003e\n  * \u003cspan class=\"hljs-doctag\"\u003e@param\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003enext\u003c/span\u003e\n  */\u003c/span\u003e\n public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetEnquiries\u003c/span\u003e(\n  \u003cspan class=\"hljs-attr\"\u003ereq\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eres\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003enext\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNextFunction\u003c/span\u003e,\n ): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eenquiries\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e[] =\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eenquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e();\n   res.\u003cspan class=\"hljs-property\"\u003elocals\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e = enquiries;\n   \u003cspan class=\"hljs-comment\"\u003e// call base class method\u003c/span\u003e\n   \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(res);\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (err) {\n   \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(err);\n  }\n }\n\n \u003cspan class=\"hljs-comment\"\u003e// 이하 생략\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e단계 5: 구성 요소를 위한 REST API 생성\u003c/h1\u003e\n\u003cp\u003e문의: 문의는 속성 집합을 가진 주요 엔터티입니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGET /v1/enquiries 모든 문의 목록을 가져옵니다.\u003c/li\u003e\n\u003cli\u003ePOST /v1/enquiries 새로운 문의를 생성합니다.\u003c/li\u003e\n\u003cli\u003eGET /v1/enquiries/'id' 특정 문의의 세부 정보를 가져옵니다.\u003c/li\u003e\n\u003cli\u003ePUT /v1/enquiries/'id' 특정 문의의 세부 정보를 업데이트합니다.\u003c/li\u003e\n\u003cli\u003eDELETE /v1/enquiries/'id' 특정 문의를 삭제합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e우리는 이전에 정의한 경로를 등록해야 합니다. 이를 위해 src/routes.ts에 항목을 만들어야 합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e아래 링크에서 전체 코드베이스를 찾을 수 있습니다. 초보자를 염두에 두고 설계된 이 저장소는 백엔드 프로젝트를 시작하는 데 튼튼한 출발점을 제공합니다. 단위 테스트 케이스가 포함된 잘 정리된 코드베이스로 깊게 파고들며 학습하고 문제 해결을 쉽게 할 수 있습니다. 게다가 GitHub Actions 워크플로가 통합되어 있어 테스트와 배포를 자동화할 수 있습니다. 학습을 시작하거나 첫 번째 실제 애플리케이션을 구축하려는 경우에도 유용합니다.\u003c/p\u003e\n\u003cp\u003e읽어 주셔서 감사합니다. 이 블로그가 학습에 가치가 있다고 생각되면 의견을 공유하고 클랩(clap)을 눌러주세요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003e친절한 언어로 🚀\u003c/h1\u003e\n\u003cp\u003eIn Plain English 커뮤니티에 참여해 주셔서 감사합니다! 떠나시기 전에:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e작가를 claps하고 팔로우 해주세요 👏️\u003c/li\u003e\n\u003cli\u003e팔로우하기: X | LinkedIn | YouTube | Discord | 뉴스레터\u003c/li\u003e\n\u003cli\u003e다른 플랫폼 방문하기: Stackademic | CoFeed | Venture | Cubed\u003c/li\u003e\n\u003cli\u003ePlainEnglish.io에서 더 많은 콘텐츠를 만나보세요\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL"},"buildId":"OFpTzInQeZKWBaqJEukNX","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>