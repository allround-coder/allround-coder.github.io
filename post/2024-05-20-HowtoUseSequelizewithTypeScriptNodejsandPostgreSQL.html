<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>TypeScript, Nodejs, ê·¸ë¦¬ê³  PostgreSQLê³¼ í•¨ê»˜ Sequelizeë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²• | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="TypeScript, Nodejs, ê·¸ë¦¬ê³  PostgreSQLê³¼ í•¨ê»˜ Sequelizeë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²• | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="TypeScript, Nodejs, ê·¸ë¦¬ê³  PostgreSQLê³¼ í•¨ê»˜ Sequelizeë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²• | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL" data-gatsby-head="true"/><meta name="twitter:title" content="TypeScript, Nodejs, ê·¸ë¦¬ê³  PostgreSQLê³¼ í•¨ê»˜ Sequelizeë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²• | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-05-20 22:18" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/OFpTzInQeZKWBaqJEukNX/_buildManifest.js" defer=""></script><script src="/_next/static/OFpTzInQeZKWBaqJEukNX/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">TypeScript, Nodejs, ê·¸ë¦¬ê³  PostgreSQLê³¼ í•¨ê»˜ Sequelizeë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="TypeScript, Nodejs, ê·¸ë¦¬ê³  PostgreSQLê³¼ í•¨ê»˜ Sequelizeë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On May 20, 2024</span><span class="posts_reading_time__f7YPP">12<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p>ì‹œì‘ ê°€ì´ë“œ: TypeScriptë¡œ Sequelize êµ¬ì„±í•˜ê¸°</p>
<p>ëª¨ë¸, ì—°ê²° ë° ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ì—¬ Sequelizeë¥¼ TypeScriptì™€ í•¨ê»˜ ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h1>ì†Œê°œ</h1>
<p>ì´ ê¸€ì—ì„œëŠ” Sequelizeë¥¼ ì„¤ì •í•˜ì—¬ TypeScript Node.js ë° Expressë¥¼ ì—°ë™í•˜ì—¬ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê³ , ê·¸ í›„ì— ì¡°íšŒìš© ìƒ˜í”Œ ëª¨ë¸ì„ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<p>TypeScript, Node.js, Express.js ë° PostgreSQLì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ê²¬ê³ í•œ ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ ê°•ë ¥í•œ ì¡°í•©ì„ ì œê³µí•©ë‹ˆë‹¤. Node.jsë¥¼ ìœ„í•œ ì¸ê¸° ìˆëŠ” ORMì¸ Sequelizeì™€ TypeScriptì˜ ì •ì  ìœ í˜• ì§€ì • ê·¸ë¦¬ê³  PostgreSQLì˜ ì‹ ë¢°ì„±ì„ í™œìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ ë°ì´í„° ê´€ë¦¬ì™€ í™•ì¥ ê°€ëŠ¥ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ í†µí•©ì€ ë°ì´í„°ì˜ ëª¨ë¸ë§, ì¿¼ë¦¬, ê·¸ë¦¬ê³  ì¡°ì‘ì„ ì›í™œí•˜ê²Œ í•˜ë©° ê°œë°œ ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ë©´ì„œ ì½”ë“œ ë¬´ê²°ì„±ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.</p>
<div class="content-ad"></div>
<p>ìƒˆë¡œìš´ ì‹¤ì‹œê°„ Node.js ì•±ì´ë‚˜ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ë•Œ ê°€ì¥ ë¨¼ì € ê³ ë ¤í•´ì•¼ í•  ê²ƒì€ ì–´ë””ì„œ ì‹œì‘í•´ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ í”„ë ˆì„ì›Œí¬ë‚˜ ORMì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ê²ƒì´ ì„±ëŠ¥ì— ì–´ë–»ê²Œ ì˜í–¥ì„ ë¯¸ì¹ ì§€ ì…ë‹ˆë‹¤. ë˜í•œ, SQL ë˜ëŠ” NoSQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì— ë”°ë¼ ì´ ì§ˆë¬¸ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h1>ì‚¬ì „ ì¤€ë¹„</h1>
<p>ì´ ê¸€ì—ì„œëŠ” TypeScriptì™€ Expressë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ ë§Œë“¤ì–´ ë†“ì€ Node.js ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.</p>
<p>ìš°ë¦¬ëŠ” sequelize, pg, pg-hstoreì´ npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì •í•  ê²ƒì´ê³ , Jestë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">// ì• í”Œë¦¬ì¼€ì´ì…˜ ë³µì œí•˜ê¸°</span>
git clone <span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/santoshshinde2012/node-boilerplate.git</span>

<span class="hljs-comment">// ìƒˆ ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½</span>
cd node-boilerplate

<span class="hljs-comment">// ëª¨ë“  ëª¨ë“ˆ ì„¤ì¹˜</span>
npm install

<span class="hljs-comment">// ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘</span>
npm start
</code></pre>
<h1>ë‹¨ê³„ 1: PostgreSQL ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±</h1>
<p>ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ í´ë” docker/postgresqlì— Dockerfile.postgis íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">postgres</span>:latest

# <span class="hljs-title class_">PostGIS</span> í™•ì¥ ê¸°ëŠ¥ ì„¤ì¹˜
<span class="hljs-variable constant_">RUN</span> apt-get update \
    &#x26;&#x26; apt-get install -y postgis postgresql-<span class="hljs-number">12</span>-postgis-<span class="hljs-number">3</span> \
    &#x26;&#x26; apt-get clean \
    &#x26;&#x26; rm -rf /<span class="hljs-keyword">var</span>/lib/apt/lists<span class="hljs-comment">/*

# ì´ˆê¸° ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ init.sqlì— ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
COPY init.sql /docker-entrypoint-initdb.d/

# PostGIS í™•ì¥ ê¸°ëŠ¥ í™œì„±í™”
RUN echo "CREATE EXTENSION IF NOT EXISTS postgis;" >> /docker-entrypoint-initdb.d/init.sql
</span></code></pre>
<div class="content-ad"></div>
<p>ë„ì»¤ Compose íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”. docker/postgresql í´ë”ì— ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js"># <span class="hljs-title class_">PostgreSQL</span>ì„ ìœ„í•œ docker-compose.<span class="hljs-property">yml</span>

<span class="hljs-attr">version</span>: <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services</span>:
  <span class="hljs-attr">db</span>:
    <span class="hljs-attr">build</span>:
      <span class="hljs-attr">context</span>: .
      <span class="hljs-attr">dockerfile</span>: <span class="hljs-title class_">Dockerfile</span>.<span class="hljs-property">postgis</span>  # ì»¤ìŠ¤í…€ <span class="hljs-title class_">Dockerfile</span> ì‚¬ìš©
    <span class="hljs-attr">restart</span>: always
    <span class="hljs-attr">environment</span>:
      <span class="hljs-attr">POSTGRES_USER</span>: user1
      <span class="hljs-attr">POSTGRES_PASSWORD</span>: user1@<span class="hljs-number">123</span>
      <span class="hljs-attr">POSTGRES_DB</span>: database
    <span class="hljs-attr">healthcheck</span>:
      # ì´ ëª…ë ¹ì–´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¤€ë¹„ë˜ì–´ ìˆëŠ”ì§€ ì†ŒìŠ¤ db ì„œë²„ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.
      <span class="hljs-attr">test</span>: [ <span class="hljs-string">"CMD-SHELL"</span>, <span class="hljs-string">"pg_isready"</span> ]
      <span class="hljs-attr">interval</span>: 5s
      <span class="hljs-attr">timeout</span>: 5s
      <span class="hljs-attr">retries</span>: <span class="hljs-number">5</span>
    <span class="hljs-attr">ports</span>:
      - <span class="hljs-string">"5432:5432"</span>
    <span class="hljs-attr">volumes</span>:
      - <span class="hljs-attr">postgres_data_v</span>:<span class="hljs-regexp">/var/</span>lib/postgresql/data
<span class="hljs-attr">volumes</span>:
  <span class="hljs-attr">postgres_data_v</span>:
</code></pre>
<p>package.json ì•ˆì— Docker Compose íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.</p>
<pre><code class="hljs language-js"><span class="hljs-string">"db:up"</span>: <span class="hljs-string">"docker-compose -f docker/postgresql/docker-compose.yml up"</span>,
<span class="hljs-string">"db:down"</span>: <span class="hljs-string">"docker-compose -f docker/postgresql/docker-compose.yml down"</span>
</code></pre>
<div class="content-ad"></div>
<p>Postgresqlì„ ì‹¤í–‰í•˜ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì„¸ìš”: npm run db:up.</p>
<p><img src="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png" alt="image"></p>
<h1>ë‹¨ê³„ 2: Sequelizeì˜ ì„¤ì¹˜ ë° êµ¬ì„±</h1>
<p>SequelizeëŠ” npm (ë˜ëŠ” yarn)ì„ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">npm install --save sequelize
npm install --save pg pg-hstore # <span class="hljs-title class_">Postgres</span>
</code></pre>
<p>ì‘ì—…ì„ ë§ˆì¹˜ë©´ ì½”ë“œë¥¼ ë°°ì¹˜í•  í´ë” êµ¬ì¡°ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì½”ë“œê°€ ê¹¨ë—í•˜ê³  ê°€ë…ì„± ìˆê²Œ ìœ ì§€ë˜ë„ë¡ í•˜ê¸° ìœ„í•´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ í´ë”ë¡œ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ë¶€ë¶„ì€ database í´ë” ì•„ë˜ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<img src="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_1.png">
<p>src/database/config í´ë”ì˜ index.ts íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ê³ , .env npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. í™˜ê²½ì— ë”°ë¥¸ ë¡œì§ì€ í•„ìš”ì— ë”°ë¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;
<span class="hljs-keyword">import</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">'dotenv'</span>;

dotenv.<span class="hljs-title function_">config</span>({
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'../../.env'</span>),
});

íƒ€ì… <span class="hljs-title class_">DbConnection</span> = {
    í˜¸ìŠ¤íŠ¸: ë¬¸ìì—´;
    í¬íŠ¸: ìˆ«ì;
    ì‚¬ìš©ì: ë¬¸ìì—´;
    ë¹„ë°€ë²ˆí˜¸: ë¬¸ìì—´;
    ë°ì´í„°ë² ì´ìŠ¤: ë¬¸ìì—´;
    <span class="hljs-attr">dbLogging</span>: ë¶€ìš¸;
};

<span class="hljs-keyword">const</span> <span class="hljs-attr">connection</span>: <span class="hljs-title class_">DbConnection</span> = {
    í˜¸ìŠ¤íŠ¸: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_HOST</span>,
    í¬íŠ¸: <span class="hljs-title class_">Number</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PORT</span>),
    ì‚¬ìš©ì: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_USER</span>,
    ë¹„ë°€ë²ˆí˜¸: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PASSWORD</span>,
    ë°ì´í„°ë² ì´ìŠ¤: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_NAME</span>,
    <span class="hljs-attr">dbLogging</span>:
        process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span> || process.<span class="hljs-property">env</span>.<span class="hljs-property">LOG</span> === <span class="hljs-string">'true'</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> connection;
</code></pre>
<p>src/database í´ë”ì— index.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelize ì—°ê²°ì„ ë§Œë“­ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Dialect</span>, <span class="hljs-title class_">Sequelize</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'sequelize'</span>;
<span class="hljs-keyword">import</span> connection <span class="hljs-keyword">from</span> <span class="hljs-string">'./config'</span>;

<span class="hljs-keyword">const</span> { database, user, password, host, dbLogging } = connection;

<span class="hljs-keyword">const</span> sequelizeConnection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sequelize</span>(database, user, password, {
    host,
    <span class="hljs-attr">logging</span>: dbLogging,
    <span class="hljs-attr">dialect</span>: <span class="hljs-string">'postgres'</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Dialect</span>,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> sequelizeConnection;
</code></pre>
<p>src/App.ts ë˜ëŠ” ì„œë²„ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ì§„ì… íŒŒì¼ì— assertDatabaseConnection ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸ì„í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.</p>
<div class="content-ad"></div>
<pre><code class="hljs language-js">ê°œì¸ <span class="hljs-keyword">async</span> <span class="hljs-title function_">assertDatabaseConnection</span>(): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>> {
    <span class="hljs-keyword">try</span> {
     <span class="hljs-keyword">await</span> database.<span class="hljs-title function_">authenticate</span>();
     <span class="hljs-keyword">await</span> database.<span class="hljs-title function_">sync</span>();
     logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ì—°ê²°ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
 logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤:'</span>, error);
    }
}
</code></pre>
<h1>ë‹¨ê³„ 3: Sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸”(ëª¨ë¸) ìƒì„±</h1>
<p>src/database/models í´ë”ì— ëª¨ë¸ì„ ì •ì˜í•˜ì„¸ìš”; ì—¬ê¸°ì„œëŠ” ìƒ˜í”Œ ëª¨ë¸ì¸ Enquiry.tsë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤.</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DataTypes</span>, <span class="hljs-title class_">Model</span>, <span class="hljs-title class_">Optional</span>, <span class="hljs-title class_">UUIDV4</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'sequelize'</span>;
<span class="hljs-keyword">import</span> sequelize <span class="hljs-keyword">from</span> <span class="hljs-string">'../index'</span>;

interface <span class="hljs-title class_">EnquiryAttributes</span> {
 <span class="hljs-attr">id</span>: string;
 <span class="hljs-attr">name</span>: string;
 <span class="hljs-attr">subject</span>: string;
 <span class="hljs-attr">body</span>: string;
 <span class="hljs-attr">email</span>: string;
 <span class="hljs-attr">country</span>: string;
}

interface <span class="hljs-title class_">EnquiryCreationAttributes</span>
 <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Optional</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-string">'id'</span>> {}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Enquiry</span>
 <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Model</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-title class_">EnquiryCreationAttributes</span>>
 implements <span class="hljs-title class_">EnquiryAttributes</span>
{
 public id!: string;
 public name!: string;
 public country!: string;
 public subject!: string;
 public body!: string;
 public email!: string;

 public readonly createdAt!: <span class="hljs-title class_">Date</span>;
 public readonly updatedAt!: <span class="hljs-title class_">Date</span>;
}

<span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">init</span>(
 {
  <span class="hljs-attr">id</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-property">UUID</span>,
   <span class="hljs-attr">defaultValue</span>: <span class="hljs-title class_">UUIDV4</span>,
   <span class="hljs-attr">primaryKey</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">name</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  },
  <span class="hljs-attr">country</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  },
  <span class="hljs-attr">subject</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">200</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  },
  <span class="hljs-attr">email</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  },
  <span class="hljs-attr">body</span>: {
   <span class="hljs-attr">type</span>: <span class="hljs-title class_">DataTypes</span>.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">400</span>),
   <span class="hljs-attr">allowNull</span>: <span class="hljs-literal">false</span>,
  }
 },
 {
  sequelize,
  <span class="hljs-attr">modelName</span>: <span class="hljs-string">'Enquiry'</span>,
  <span class="hljs-attr">tableName</span>: <span class="hljs-string">'Enquiry'</span>,
  <span class="hljs-attr">timestamps</span>: <span class="hljs-literal">true</span>,
 },
);

<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Enquiry</span>, <span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-title class_">EnquiryCreationAttributes</span> };
</code></pre>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-keyword">import</span> { ë°ì´í„° ìœ í˜•, ëª¨ë¸, ì„ íƒì , <span class="hljs-title class_">UUIDV4</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'sequelize'</span>;
<span class="hljs-keyword">import</span> sequelize <span class="hljs-keyword">from</span> <span class="hljs-string">'../index'</span>;

ì¸í„°í˜ì´ìŠ¤ ì¡°íšŒ ì†ì„± {
 <span class="hljs-attr">id</span>: string;
 ì´ë¦„: string;
 ì£¼ì œ: string;
 ë³¸ë¬¸: string;
 ì´ë©”ì¼: string;
 êµ­ê°€: string;
}

ì¸í„°í˜ì´ìŠ¤ <span class="hljs-title class_">EnquiryCreationAttributes</span> ì— ì´ì–´, <span class="hljs-title class_">EnquiryAttributes</span>ì˜ ì„ íƒì  í•´ì œ {}

í´ë˜ìŠ¤ <span class="hljs-title class_">Enquiry</span>ì€ <span class="hljs-title class_">Model</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-title class_">EnquiryCreationAttributes</span>>ë¥¼ í™•ì¥í•˜ë©° <span class="hljs-title class_">EnquiryAttributes</span>ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤ {
 ê³µê³µ id!: string;
 ê³µê³µ ì´ë¦„!: string;
 ê³µê³µ êµ­ê°€!: string;
 ê³µê³µ ì£¼ì œ!: string;
 ê³µê³µ ëª¸í†µ!: string;
 ê³µê³µ ì´ë©”ì¼!: string;

 ê³µê³µ readonly createdAt!: <span class="hljs-title class_">Date</span>;
 ê³µê³µ readonly updatedAt!: <span class="hljs-title class_">Date</span>;
}

<span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">init</span>(
 {
  ì•„ì´ë””: {
   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class="hljs-property">UUID</span>,
   ê¸°ë³¸ê°’: <span class="hljs-title class_">UUIDV4</span>,
   ê¸°ë³¸ í‚¤: ì°¸,
  },
  ì´ë¦„: {
   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,
  },
  êµ­ê°€: {
   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,
  },
  ì£¼ì œ: {
   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">200</span>),
   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,
  },
  ì´ë©”ì¼: {
   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">100</span>),
   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,
  },
  ëª¸í†µ: {
   ìœ í˜•: ë°ì´í„° ìœ í˜•.<span class="hljs-title function_">STRING</span>(<span class="hljs-number">400</span>),
   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,
  }
 },
 {
  ì‹œí€„ë¼ì´ì¦ˆ,
  ëª¨ë¸ ì´ë¦„: <span class="hljs-string">'ì¡°íšŒ'</span>,
  í…Œì´ë¸” ì´ë¦„: <span class="hljs-string">'ì¡°íšŒ'</span>,
  íƒ€ì„ ìŠ¤íƒ¬í”„: ì°¸,
 },
);

ìˆ˜ì¶œ { ì¡°íšŒ, <span class="hljs-title class_">EnquiryAttributes</span>, <span class="hljs-title class_">EnquiryCreationAttributes</span> };
</code></pre>
<img src="/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_2.png">
<h1>ë‹¨ê³„ 4: êµ¬ì„± ìš”ì†Œì—ì„œ ì„œë¹„ìŠ¤ ë° ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ì •</h1>
<ul>
<li>êµ¬ì„± ìš”ì†Œ êµ¬ì„± ìš”ì†ŒëŠ” ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤: ì»¨íŠ¸ë¡¤ëŸ¬ ë° ì„œë¹„ìŠ¤ ì„œë¹„ìŠ¤ëŠ” í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ê³¼ í†µì‹ í•˜ëŠ” ë° ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.</li>
<li>ë¼ìš°íŠ¸ â€” ì»¨íŠ¸ë¡¤ëŸ¬ ë° í•´ë‹¹ ë ˆìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸ì˜ ë“±ë¡ ë°©ë²•ì„ ë“±ë¡í•©ë‹ˆë‹¤.</li>
<li>ê³µí†µ ì„œë¹„ìŠ¤ â€”ì´ ì„œë¹„ìŠ¤ëŠ” ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ ê°„ì˜ ì¼ë°˜ ì‘ì—… ìˆ˜í–‰ì— ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.</li>
<li>ì´ë¥¼ êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì— ì£¼ì…í•˜ê³  êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í•´ë‹¹ ë©”ì„œë“œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
</ul>
<div class="content-ad"></div>
<pre><code class="hljs language-js"><span class="hljs-comment">// src/components/enquiry/EnquiryService.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ëœ ëª¨ë¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</span>

<span class="hljs-keyword">import</span> {
 <span class="hljs-title class_">Enquiry</span>,
 <span class="hljs-title class_">EnquiryAttributes</span>,
 <span class="hljs-title class_">EnquiryCreationAttributes</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'../../database/models/Enquiry'</span>;
<span class="hljs-keyword">import</span> logger <span class="hljs-keyword">from</span> <span class="hljs-string">'../../lib/logger'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ApiError</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../../abstractions/ApiError'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StatusCodes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'http-status-codes'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnquiryService</span> {

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAll</span>(): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>[]> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> enquiries = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">findAll</span>();
   <span class="hljs-keyword">return</span> enquiries;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">getById</span>(<span class="hljs-attr">id</span>: string | number): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> enquiry = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">findByPk</span>(id);
   <span class="hljs-keyword">if</span> (!enquiry) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiError</span>(<span class="hljs-string">'Enquiry not found'</span>, <span class="hljs-title class_">StatusCodes</span>.<span class="hljs-property">NOT_FOUND</span>);
   }
   <span class="hljs-keyword">return</span> enquiry;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">update</span>(
  <span class="hljs-attr">id</span>: string | number,
  <span class="hljs-attr">payload</span>: <span class="hljs-title class_">Partial</span>&#x3C;<span class="hljs-title class_">EnquiryCreationAttributes</span>>,
 ): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> enquiry = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">findByPk</span>(id);
   <span class="hljs-keyword">if</span> (!enquiry) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiError</span>(
     <span class="hljs-string">'Enquiry not found'</span>,
     <span class="hljs-title class_">StatusCodes</span>.<span class="hljs-property">NOT_FOUND</span>,
    );
   }
   <span class="hljs-keyword">const</span> updatedEnquiry = <span class="hljs-keyword">await</span> enquiry.<span class="hljs-title function_">update</span>(payload);
   <span class="hljs-keyword">return</span> updatedEnquiry;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">create</span>(
  <span class="hljs-attr">payload</span>: <span class="hljs-title class_">EnquiryCreationAttributes</span>,
 ): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-title class_">EnquiryAttributes</span>> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> enquiry = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">create</span>(payload);
   <span class="hljs-keyword">return</span> enquiry;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }

 <span class="hljs-keyword">async</span> <span class="hljs-title function_">delete</span>(<span class="hljs-attr">id</span>: string | number): <span class="hljs-title class_">Promise</span>&#x3C;boolean> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> deletedEnquiryCount = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Enquiry</span>.<span class="hljs-title function_">destroy</span>({
    <span class="hljs-attr">where</span>: { id },
   });

   <span class="hljs-keyword">return</span> !!deletedEnquiryCount;
  } <span class="hljs-keyword">catch</span> (error) {
   logger.<span class="hljs-title function_">error</span>(error);
   <span class="hljs-keyword">throw</span> error;
  }
 }
}
</code></pre>
<pre><code class="hljs language-js"><span class="hljs-comment">// src/components/enquiry/EnquiryController.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ REST APIì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë¶€ë¶„ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NextFunction</span>, <span class="hljs-title class_">Request</span>, <span class="hljs-title class_">Response</span>, <span class="hljs-title class_">Router</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ReasonPhrases</span>, <span class="hljs-title class_">StatusCodes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'http-status-codes'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">BaseApi</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../BaseApi'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EnquiryService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./EnquiryService'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EnquiryAttributes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../database/models/Enquiry'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ApiError</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../../abstractions/ApiError'</span>;

<span class="hljs-comment">/**
 * Enquiry controller
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnquiryController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BaseApi</span> {
 private <span class="hljs-attr">enquiry</span>: <span class="hljs-title class_">EnquiryService</span>;
 public <span class="hljs-attr">basePath</span>: string = <span class="hljs-string">'enquiries'</span>;

 <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) {
  <span class="hljs-variable language_">super</span>();
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">enquiry</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EnquiryService</span>();
 }

 <span class="hljs-comment">/**
  *
  */</span>
 public <span class="hljs-title function_">routes</span>(): <span class="hljs-title class_">RouteDefinition</span>[] {
  <span class="hljs-keyword">return</span> [
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">getEnquiries</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) },
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/:id'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'get'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">getEnquiry</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) },
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'post'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">createEnquiry</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) },
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/:id'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'put'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">updateEnquiry</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) },
   { <span class="hljs-attr">path</span>: <span class="hljs-string">'/:id'</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">'delete'</span>, <span class="hljs-attr">handler</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">delete</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>) }
  ];
 }

 <span class="hljs-comment">/**
  *
  * <span class="hljs-doctag">@param</span> <span class="hljs-variable">req</span>
  * <span class="hljs-doctag">@param</span> <span class="hljs-variable">res</span>
  * <span class="hljs-doctag">@param</span> <span class="hljs-variable">next</span>
  */</span>
 public <span class="hljs-keyword">async</span> <span class="hljs-title function_">getEnquiries</span>(
  <span class="hljs-attr">req</span>: <span class="hljs-title class_">Request</span>,
  <span class="hljs-attr">res</span>: <span class="hljs-title class_">Response</span>,
  <span class="hljs-attr">next</span>: <span class="hljs-title class_">NextFunction</span>,
 ): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-keyword">void</span>> {
  <span class="hljs-keyword">try</span> {
   <span class="hljs-keyword">const</span> <span class="hljs-attr">enquiries</span>: <span class="hljs-title class_">EnquiryAttributes</span>[] =
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">enquiry</span>.<span class="hljs-title function_">getAll</span>();
   res.<span class="hljs-property">locals</span>.<span class="hljs-property">data</span> = enquiries;
   <span class="hljs-comment">// call base class method</span>
   <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(res);
  } <span class="hljs-keyword">catch</span> (err) {
   <span class="hljs-title function_">next</span>(err);
  }
 }

 <span class="hljs-comment">// ì´í•˜ ìƒëµ</span>
}
</code></pre>
<div class="content-ad"></div>
<h1>ë‹¨ê³„ 5: êµ¬ì„± ìš”ì†Œë¥¼ ìœ„í•œ REST API ìƒì„±</h1>
<p>ë¬¸ì˜: ë¬¸ì˜ëŠ” ì†ì„± ì§‘í•©ì„ ê°€ì§„ ì£¼ìš” ì—”í„°í‹°ì…ë‹ˆë‹¤.</p>
<ul>
<li>GET /v1/enquiries ëª¨ë“  ë¬¸ì˜ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.</li>
<li>POST /v1/enquiries ìƒˆë¡œìš´ ë¬¸ì˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</li>
<li>GET /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.</li>
<li>PUT /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.</li>
<li>DELETE /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.</li>
</ul>
<p>ìš°ë¦¬ëŠ” ì´ì „ì— ì •ì˜í•œ ê²½ë¡œë¥¼ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ src/routes.tsì— í•­ëª©ì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<div class="content-ad"></div>
<p>ì•„ë˜ ë§í¬ì—ì„œ ì „ì²´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆë³´ìë¥¼ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ëœ ì´ ì €ì¥ì†ŒëŠ” ë°±ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ë° íŠ¼íŠ¼í•œ ì¶œë°œì ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ í¬í•¨ëœ ì˜ ì •ë¦¬ëœ ì½”ë“œë² ì´ìŠ¤ë¡œ ê¹Šê²Œ íŒŒê³ ë“¤ë©° í•™ìŠµí•˜ê³  ë¬¸ì œ í•´ê²°ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²Œë‹¤ê°€ GitHub Actions ì›Œí¬í”Œë¡œê°€ í†µí•©ë˜ì–´ ìˆì–´ í…ŒìŠ¤íŠ¸ì™€ ë°°í¬ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•™ìŠµì„ ì‹œì‘í•˜ê±°ë‚˜ ì²« ë²ˆì§¸ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ë ¤ëŠ” ê²½ìš°ì—ë„ ìœ ìš©í•©ë‹ˆë‹¤.</p>
<p>ì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì´ ë¸”ë¡œê·¸ê°€ í•™ìŠµì— ê°€ì¹˜ê°€ ìˆë‹¤ê³  ìƒê°ë˜ë©´ ì˜ê²¬ì„ ê³µìœ í•˜ê³  í´ë©(clap)ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
<div class="content-ad"></div>
<h1>ì¹œì ˆí•œ ì–¸ì–´ë¡œ ğŸš€</h1>
<p>In Plain English ì»¤ë®¤ë‹ˆí‹°ì— ì°¸ì—¬í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:</p>
<ul>
<li>ì‘ê°€ë¥¼ clapsí•˜ê³  íŒ”ë¡œìš° í•´ì£¼ì„¸ìš” ğŸ‘ï¸</li>
<li>íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°</li>
<li>ë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: Stackademic | CoFeed | Venture | Cubed</li>
<li>PlainEnglish.ioì—ì„œ ë” ë§ì€ ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”</li>
</ul>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"TypeScript, Nodejs, ê·¸ë¦¬ê³  PostgreSQLê³¼ í•¨ê»˜ Sequelizeë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•","description":"","date":"2024-05-20 22:18","slug":"2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL","content":"\n\nì‹œì‘ ê°€ì´ë“œ: TypeScriptë¡œ Sequelize êµ¬ì„±í•˜ê¸° \n\nëª¨ë¸, ì—°ê²° ë° ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ì—¬ Sequelizeë¥¼ TypeScriptì™€ í•¨ê»˜ ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n# ì†Œê°œ\n\nì´ ê¸€ì—ì„œëŠ” Sequelizeë¥¼ ì„¤ì •í•˜ì—¬ TypeScript Node.js ë° Expressë¥¼ ì—°ë™í•˜ì—¬ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê³ , ê·¸ í›„ì— ì¡°íšŒìš© ìƒ˜í”Œ ëª¨ë¸ì„ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.\n\nTypeScript, Node.js, Express.js ë° PostgreSQLì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ê²¬ê³ í•œ ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ ê°•ë ¥í•œ ì¡°í•©ì„ ì œê³µí•©ë‹ˆë‹¤. Node.jsë¥¼ ìœ„í•œ ì¸ê¸° ìˆëŠ” ORMì¸ Sequelizeì™€ TypeScriptì˜ ì •ì  ìœ í˜• ì§€ì • ê·¸ë¦¬ê³  PostgreSQLì˜ ì‹ ë¢°ì„±ì„ í™œìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ ë°ì´í„° ê´€ë¦¬ì™€ í™•ì¥ ê°€ëŠ¥ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ í†µí•©ì€ ë°ì´í„°ì˜ ëª¨ë¸ë§, ì¿¼ë¦¬, ê·¸ë¦¬ê³  ì¡°ì‘ì„ ì›í™œí•˜ê²Œ í•˜ë©° ê°œë°œ ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ë©´ì„œ ì½”ë“œ ë¬´ê²°ì„±ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nìƒˆë¡œìš´ ì‹¤ì‹œê°„ Node.js ì•±ì´ë‚˜ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ë•Œ ê°€ì¥ ë¨¼ì € ê³ ë ¤í•´ì•¼ í•  ê²ƒì€ ì–´ë””ì„œ ì‹œì‘í•´ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ í”„ë ˆì„ì›Œí¬ë‚˜ ORMì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ê²ƒì´ ì„±ëŠ¥ì— ì–´ë–»ê²Œ ì˜í–¥ì„ ë¯¸ì¹ ì§€ ì…ë‹ˆë‹¤. ë˜í•œ, SQL ë˜ëŠ” NoSQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì— ë”°ë¼ ì´ ì§ˆë¬¸ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n# ì‚¬ì „ ì¤€ë¹„\n\nì´ ê¸€ì—ì„œëŠ” TypeScriptì™€ Expressë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ ë§Œë“¤ì–´ ë†“ì€ Node.js ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\n\nìš°ë¦¬ëŠ” sequelize, pg, pg-hstoreì´ npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì •í•  ê²ƒì´ê³ , Jestë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n// ì• í”Œë¦¬ì¼€ì´ì…˜ ë³µì œí•˜ê¸°\ngit clone https://github.com/santoshshinde2012/node-boilerplate.git\n\n// ìƒˆ ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½\ncd node-boilerplate\n\n// ëª¨ë“  ëª¨ë“ˆ ì„¤ì¹˜\nnpm install\n\n// ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘\nnpm start\n```\n\n# ë‹¨ê³„ 1: PostgreSQL ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±\n\nì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ í´ë” docker/postgresqlì— Dockerfile.postgis íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.\n\n```js\nFROM postgres:latest\n\n# PostGIS í™•ì¥ ê¸°ëŠ¥ ì„¤ì¹˜\nRUN apt-get update \\\n    \u0026\u0026 apt-get install -y postgis postgresql-12-postgis-3 \\\n    \u0026\u0026 apt-get clean \\\n    \u0026\u0026 rm -rf /var/lib/apt/lists/*\n\n# ì´ˆê¸° ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ init.sqlì— ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤\nCOPY init.sql /docker-entrypoint-initdb.d/\n\n# PostGIS í™•ì¥ ê¸°ëŠ¥ í™œì„±í™”\nRUN echo \"CREATE EXTENSION IF NOT EXISTS postgis;\" \u003e\u003e /docker-entrypoint-initdb.d/init.sql\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\në„ì»¤ Compose íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”. docker/postgresql í´ë”ì— ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\n\n```js\n# PostgreSQLì„ ìœ„í•œ docker-compose.yml\n\nversion: '3.8'\n\nservices:\n  db:\n    build:\n      context: .\n      dockerfile: Dockerfile.postgis  # ì»¤ìŠ¤í…€ Dockerfile ì‚¬ìš©\n    restart: always\n    environment:\n      POSTGRES_USER: user1\n      POSTGRES_PASSWORD: user1@123\n      POSTGRES_DB: database\n    healthcheck:\n      # ì´ ëª…ë ¹ì–´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¤€ë¹„ë˜ì–´ ìˆëŠ”ì§€ ì†ŒìŠ¤ db ì„œë²„ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.\n      test: [ \"CMD-SHELL\", \"pg_isready\" ]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n    ports:\n      - \"5432:5432\"\n    volumes:\n      - postgres_data_v:/var/lib/postgresql/data\nvolumes:\n  postgres_data_v:\n```\n\npackage.json ì•ˆì— Docker Compose íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.\n\n```js\n\"db:up\": \"docker-compose -f docker/postgresql/docker-compose.yml up\",\n\"db:down\": \"docker-compose -f docker/postgresql/docker-compose.yml down\"\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nPostgresqlì„ ì‹¤í–‰í•˜ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì„¸ìš”: npm run db:up.\n\n![image](/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png)\n\n# ë‹¨ê³„ 2: Sequelizeì˜ ì„¤ì¹˜ ë° êµ¬ì„±\n\nSequelizeëŠ” npm (ë˜ëŠ” yarn)ì„ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nnpm install --save sequelize\nnpm install --save pg pg-hstore # Postgres\n```\n\nì‘ì—…ì„ ë§ˆì¹˜ë©´ ì½”ë“œë¥¼ ë°°ì¹˜í•  í´ë” êµ¬ì¡°ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì½”ë“œê°€ ê¹¨ë—í•˜ê³  ê°€ë…ì„± ìˆê²Œ ìœ ì§€ë˜ë„ë¡ í•˜ê¸° ìœ„í•´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ í´ë”ë¡œ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ë¶€ë¶„ì€ database í´ë” ì•„ë˜ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\n\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_1.png\" /\u003e\n\nsrc/database/config í´ë”ì˜ index.ts íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ê³ , .env npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. í™˜ê²½ì— ë”°ë¥¸ ë¡œì§ì€ í•„ìš”ì— ë”°ë¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport path from 'path';\nimport dotenv from 'dotenv';\n\ndotenv.config({\n    path: path.join(__dirname, '../../.env'),\n});\n\níƒ€ì… DbConnection = {\n    í˜¸ìŠ¤íŠ¸: ë¬¸ìì—´;\n    í¬íŠ¸: ìˆ«ì;\n    ì‚¬ìš©ì: ë¬¸ìì—´;\n    ë¹„ë°€ë²ˆí˜¸: ë¬¸ìì—´;\n    ë°ì´í„°ë² ì´ìŠ¤: ë¬¸ìì—´;\n    dbLogging: ë¶€ìš¸;\n};\n\nconst connection: DbConnection = {\n    í˜¸ìŠ¤íŠ¸: process.env.DB_HOST,\n    í¬íŠ¸: Number(process.env.DB_PORT),\n    ì‚¬ìš©ì: process.env.DB_USER,\n    ë¹„ë°€ë²ˆí˜¸: process.env.DB_PASSWORD,\n    ë°ì´í„°ë² ì´ìŠ¤: process.env.DB_NAME,\n    dbLogging:\n        process.env.NODE_ENV === 'development' || process.env.LOG === 'true',\n};\n\nexport default connection;\n```\n\nsrc/database í´ë”ì— index.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelize ì—°ê²°ì„ ë§Œë“­ë‹ˆë‹¤.\n\n```js\nimport { Dialect, Sequelize } from 'sequelize';\nimport connection from './config';\n\nconst { database, user, password, host, dbLogging } = connection;\n\nconst sequelizeConnection = new Sequelize(database, user, password, {\n    host,\n    logging: dbLogging,\n    dialect: 'postgres' as Dialect,\n});\n\nexport default sequelizeConnection;\n```\n\nsrc/App.ts ë˜ëŠ” ì„œë²„ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ì§„ì… íŒŒì¼ì— assertDatabaseConnection ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸ì„í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nê°œì¸ async assertDatabaseConnection(): Promise\u003cvoid\u003e {\n    try {\n     await database.authenticate();\n     await database.sync();\n     logger.info('ì—°ê²°ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');\n    } catch (error) {\n logger.error('ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', error);\n    }\n}\n```\n\n# ë‹¨ê³„ 3: Sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸”(ëª¨ë¸) ìƒì„±\n\nsrc/database/models í´ë”ì— ëª¨ë¸ì„ ì •ì˜í•˜ì„¸ìš”; ì—¬ê¸°ì„œëŠ” ìƒ˜í”Œ ëª¨ë¸ì¸ Enquiry.tsë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤.\n\n```js\nimport { DataTypes, Model, Optional, UUIDV4 } from 'sequelize';\nimport sequelize from '../index';\n\ninterface EnquiryAttributes {\n id: string;\n name: string;\n subject: string;\n body: string;\n email: string;\n country: string;\n}\n\ninterface EnquiryCreationAttributes\n extends Optional\u003cEnquiryAttributes, 'id'\u003e {}\n\nclass Enquiry\n extends Model\u003cEnquiryAttributes, EnquiryCreationAttributes\u003e\n implements EnquiryAttributes\n{\n public id!: string;\n public name!: string;\n public country!: string;\n public subject!: string;\n public body!: string;\n public email!: string;\n\n public readonly createdAt!: Date;\n public readonly updatedAt!: Date;\n}\n\nEnquiry.init(\n {\n  id: {\n   type: DataTypes.UUID,\n   defaultValue: UUIDV4,\n   primaryKey: true,\n  },\n  name: {\n   type: DataTypes.STRING(100),\n   allowNull: false,\n  },\n  country: {\n   type: DataTypes.STRING(100),\n   allowNull: false,\n  },\n  subject: {\n   type: DataTypes.STRING(200),\n   allowNull: false,\n  },\n  email: {\n   type: DataTypes.STRING(100),\n   allowNull: false,\n  },\n  body: {\n   type: DataTypes.STRING(400),\n   allowNull: false,\n  }\n },\n {\n  sequelize,\n  modelName: 'Enquiry',\n  tableName: 'Enquiry',\n  timestamps: true,\n },\n);\n\nexport { Enquiry, EnquiryAttributes, EnquiryCreationAttributes };\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\nimport { ë°ì´í„° ìœ í˜•, ëª¨ë¸, ì„ íƒì , UUIDV4 } from 'sequelize';\nimport sequelize from '../index';\n\nì¸í„°í˜ì´ìŠ¤ ì¡°íšŒ ì†ì„± {\n id: string;\n ì´ë¦„: string;\n ì£¼ì œ: string;\n ë³¸ë¬¸: string;\n ì´ë©”ì¼: string;\n êµ­ê°€: string;\n}\n\nì¸í„°í˜ì´ìŠ¤ EnquiryCreationAttributes ì— ì´ì–´, EnquiryAttributesì˜ ì„ íƒì  í•´ì œ {}\n\ní´ë˜ìŠ¤ Enquiryì€ Model\u003cEnquiryAttributes, EnquiryCreationAttributes\u003eë¥¼ í™•ì¥í•˜ë©° EnquiryAttributesë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤ {\n ê³µê³µ id!: string;\n ê³µê³µ ì´ë¦„!: string;\n ê³µê³µ êµ­ê°€!: string;\n ê³µê³µ ì£¼ì œ!: string;\n ê³µê³µ ëª¸í†µ!: string;\n ê³µê³µ ì´ë©”ì¼!: string;\n\n ê³µê³µ readonly createdAt!: Date;\n ê³µê³µ readonly updatedAt!: Date;\n}\n\nEnquiry.init(\n {\n  ì•„ì´ë””: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.UUID,\n   ê¸°ë³¸ê°’: UUIDV4,\n   ê¸°ë³¸ í‚¤: ì°¸,\n  },\n  ì´ë¦„: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(100),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  êµ­ê°€: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(100),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ì£¼ì œ: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(200),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ì´ë©”ì¼: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(100),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ëª¸í†µ: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.STRING(400),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  }\n },\n {\n  ì‹œí€„ë¼ì´ì¦ˆ,\n  ëª¨ë¸ ì´ë¦„: 'ì¡°íšŒ',\n  í…Œì´ë¸” ì´ë¦„: 'ì¡°íšŒ',\n  íƒ€ì„ ìŠ¤íƒ¬í”„: ì°¸,\n },\n);\n\nìˆ˜ì¶œ { ì¡°íšŒ, EnquiryAttributes, EnquiryCreationAttributes };\n```\n\n\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_2.png\" /\u003e\n\n# ë‹¨ê³„ 4: êµ¬ì„± ìš”ì†Œì—ì„œ ì„œë¹„ìŠ¤ ë° ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ì •\n\n- êµ¬ì„± ìš”ì†Œ êµ¬ì„± ìš”ì†ŒëŠ” ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤: ì»¨íŠ¸ë¡¤ëŸ¬ ë° ì„œë¹„ìŠ¤ ì„œë¹„ìŠ¤ëŠ” í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ê³¼ í†µì‹ í•˜ëŠ” ë° ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.\n- ë¼ìš°íŠ¸ â€” ì»¨íŠ¸ë¡¤ëŸ¬ ë° í•´ë‹¹ ë ˆìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸ì˜ ë“±ë¡ ë°©ë²•ì„ ë“±ë¡í•©ë‹ˆë‹¤.\n- ê³µí†µ ì„œë¹„ìŠ¤ â€”ì´ ì„œë¹„ìŠ¤ëŠ” ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ ê°„ì˜ ì¼ë°˜ ì‘ì—… ìˆ˜í–‰ì— ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.\n- ì´ë¥¼ êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì— ì£¼ì…í•˜ê³  êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í•´ë‹¹ ë©”ì„œë“œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n```js\n// src/components/enquiry/EnquiryService.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ëœ ëª¨ë¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n\nimport {\n Enquiry,\n EnquiryAttributes,\n EnquiryCreationAttributes,\n} from '../../database/models/Enquiry';\nimport logger from '../../lib/logger';\nimport ApiError from '../../abstractions/ApiError';\nimport { StatusCodes } from 'http-status-codes';\n\nexport class EnquiryService {\n\n async getAll(): Promise\u003cEnquiryAttributes[]\u003e {\n  try {\n   const enquiries = await Enquiry.findAll();\n   return enquiries;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async getById(id: string | number): Promise\u003cEnquiryAttributes\u003e {\n  try {\n   const enquiry = await Enquiry.findByPk(id);\n   if (!enquiry) {\n    throw new ApiError('Enquiry not found', StatusCodes.NOT_FOUND);\n   }\n   return enquiry;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async update(\n  id: string | number,\n  payload: Partial\u003cEnquiryCreationAttributes\u003e,\n ): Promise\u003cEnquiryAttributes\u003e {\n  try {\n   const enquiry = await Enquiry.findByPk(id);\n   if (!enquiry) {\n    throw new ApiError(\n     'Enquiry not found',\n     StatusCodes.NOT_FOUND,\n    );\n   }\n   const updatedEnquiry = await enquiry.update(payload);\n   return updatedEnquiry;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async create(\n  payload: EnquiryCreationAttributes,\n ): Promise\u003cEnquiryAttributes\u003e {\n  try {\n   const enquiry = await Enquiry.create(payload);\n   return enquiry;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n\n async delete(id: string | number): Promise\u003cboolean\u003e {\n  try {\n   const deletedEnquiryCount = await Enquiry.destroy({\n    where: { id },\n   });\n\n   return !!deletedEnquiryCount;\n  } catch (error) {\n   logger.error(error);\n   throw error;\n  }\n }\n}\n```\n\n```js\n// src/components/enquiry/EnquiryController.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ REST APIì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë¶€ë¶„ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\n\nimport { NextFunction, Request, Response, Router } from 'express';\nimport { ReasonPhrases, StatusCodes } from 'http-status-codes';\nimport BaseApi from '../BaseApi';\nimport { EnquiryService } from './EnquiryService';\nimport { EnquiryAttributes } from '../../database/models/Enquiry';\nimport ApiError from '../../abstractions/ApiError';\n\n/**\n * Enquiry controller\n */\nexport default class EnquiryController extends BaseApi {\n private enquiry: EnquiryService;\n public basePath: string = 'enquiries';\n\n constructor() {\n  super();\n  this.enquiry = new EnquiryService();\n }\n\n /**\n  *\n  */\n public routes(): RouteDefinition[] {\n  return [\n   { path: '/', method: 'get', handler: this.getEnquiries.bind(this) },\n   { path: '/:id', method: 'get', handler: this.getEnquiry.bind(this) },\n   { path: '/', method: 'post', handler: this.createEnquiry.bind(this) },\n   { path: '/:id', method: 'put', handler: this.updateEnquiry.bind(this) },\n   { path: '/:id', method: 'delete', handler: this.delete.bind(this) }\n  ];\n }\n\n /**\n  *\n  * @param req\n  * @param res\n  * @param next\n  */\n public async getEnquiries(\n  req: Request,\n  res: Response,\n  next: NextFunction,\n ): Promise\u003cvoid\u003e {\n  try {\n   const enquiries: EnquiryAttributes[] =\n    await this.enquiry.getAll();\n   res.locals.data = enquiries;\n   // call base class method\n   this.send(res);\n  } catch (err) {\n   next(err);\n  }\n }\n\n // ì´í•˜ ìƒëµ\n}\n```\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# ë‹¨ê³„ 5: êµ¬ì„± ìš”ì†Œë¥¼ ìœ„í•œ REST API ìƒì„±\n\në¬¸ì˜: ë¬¸ì˜ëŠ” ì†ì„± ì§‘í•©ì„ ê°€ì§„ ì£¼ìš” ì—”í„°í‹°ì…ë‹ˆë‹¤.\n\n- GET /v1/enquiries ëª¨ë“  ë¬¸ì˜ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\n- POST /v1/enquiries ìƒˆë¡œìš´ ë¬¸ì˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n- GET /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\n- PUT /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\n- DELETE /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.\n\nìš°ë¦¬ëŠ” ì´ì „ì— ì •ì˜í•œ ê²½ë¡œë¥¼ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ src/routes.tsì— í•­ëª©ì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\nì•„ë˜ ë§í¬ì—ì„œ ì „ì²´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆë³´ìë¥¼ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ëœ ì´ ì €ì¥ì†ŒëŠ” ë°±ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ë° íŠ¼íŠ¼í•œ ì¶œë°œì ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ í¬í•¨ëœ ì˜ ì •ë¦¬ëœ ì½”ë“œë² ì´ìŠ¤ë¡œ ê¹Šê²Œ íŒŒê³ ë“¤ë©° í•™ìŠµí•˜ê³  ë¬¸ì œ í•´ê²°ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²Œë‹¤ê°€ GitHub Actions ì›Œí¬í”Œë¡œê°€ í†µí•©ë˜ì–´ ìˆì–´ í…ŒìŠ¤íŠ¸ì™€ ë°°í¬ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•™ìŠµì„ ì‹œì‘í•˜ê±°ë‚˜ ì²« ë²ˆì§¸ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ë ¤ëŠ” ê²½ìš°ì—ë„ ìœ ìš©í•©ë‹ˆë‹¤.\n\nì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì´ ë¸”ë¡œê·¸ê°€ í•™ìŠµì— ê°€ì¹˜ê°€ ìˆë‹¤ê³  ìƒê°ë˜ë©´ ì˜ê²¬ì„ ê³µìœ í•˜ê³  í´ë©(clap)ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n# ì¹œì ˆí•œ ì–¸ì–´ë¡œ ğŸš€\n\nIn Plain English ì»¤ë®¤ë‹ˆí‹°ì— ì°¸ì—¬í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:\n\n- ì‘ê°€ë¥¼ clapsí•˜ê³  íŒ”ë¡œìš° í•´ì£¼ì„¸ìš” ğŸ‘ï¸\n- íŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°\n- ë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: Stackademic | CoFeed | Venture | Cubed\n- PlainEnglish.ioì—ì„œ ë” ë§ì€ ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”","ogImage":{"url":"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png"},"coverImage":"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png","tag":["Tech"],"readingTime":12},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003eì‹œì‘ ê°€ì´ë“œ: TypeScriptë¡œ Sequelize êµ¬ì„±í•˜ê¸°\u003c/p\u003e\n\u003cp\u003eëª¨ë¸, ì—°ê²° ë° ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ì—¬ Sequelizeë¥¼ TypeScriptì™€ í•¨ê»˜ ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì†Œê°œ\u003c/h1\u003e\n\u003cp\u003eì´ ê¸€ì—ì„œëŠ” Sequelizeë¥¼ ì„¤ì •í•˜ì—¬ TypeScript Node.js ë° Expressë¥¼ ì—°ë™í•˜ì—¬ PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•˜ê³ , ê·¸ í›„ì— ì¡°íšŒìš© ìƒ˜í”Œ ëª¨ë¸ì„ ë§Œë“¤ì–´ ë³´ê² ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eTypeScript, Node.js, Express.js ë° PostgreSQLì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ê²¬ê³ í•œ ë°±ì—”ë“œ ê°œë°œì„ ìœ„í•œ ê°•ë ¥í•œ ì¡°í•©ì„ ì œê³µí•©ë‹ˆë‹¤. Node.jsë¥¼ ìœ„í•œ ì¸ê¸° ìˆëŠ” ORMì¸ Sequelizeì™€ TypeScriptì˜ ì •ì  ìœ í˜• ì§€ì • ê·¸ë¦¬ê³  PostgreSQLì˜ ì‹ ë¢°ì„±ì„ í™œìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ ë°ì´í„° ê´€ë¦¬ì™€ í™•ì¥ ê°€ëŠ¥ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ í†µí•©ì€ ë°ì´í„°ì˜ ëª¨ë¸ë§, ì¿¼ë¦¬, ê·¸ë¦¬ê³  ì¡°ì‘ì„ ì›í™œí•˜ê²Œ í•˜ë©° ê°œë°œ ê²½í—˜ì„ í–¥ìƒì‹œí‚¤ë©´ì„œ ì½”ë“œ ë¬´ê²°ì„±ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ë¬´ê²°ì„±ì„ ìœ ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eìƒˆë¡œìš´ ì‹¤ì‹œê°„ Node.js ì•±ì´ë‚˜ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•  ë•Œ ê°€ì¥ ë¨¼ì € ê³ ë ¤í•´ì•¼ í•  ê²ƒì€ ì–´ë””ì„œ ì‹œì‘í•´ì•¼ í•˜ëŠ”ì§€, ì–´ë–¤ í”„ë ˆì„ì›Œí¬ë‚˜ ORMì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ê²ƒì´ ì„±ëŠ¥ì— ì–´ë–»ê²Œ ì˜í–¥ì„ ë¯¸ì¹ ì§€ ì…ë‹ˆë‹¤. ë˜í•œ, SQL ë˜ëŠ” NoSQL ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì— ë”°ë¼ ì´ ì§ˆë¬¸ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003ch1\u003eì‚¬ì „ ì¤€ë¹„\u003c/h1\u003e\n\u003cp\u003eì´ ê¸€ì—ì„œëŠ” TypeScriptì™€ Expressë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ ë§Œë“¤ì–´ ë†“ì€ Node.js ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ì‚¬ìš©í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” sequelize, pg, pg-hstoreì´ npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì„¤ì •í•  ê²ƒì´ê³ , Jestë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// ì• í”Œë¦¬ì¼€ì´ì…˜ ë³µì œí•˜ê¸°\u003c/span\u003e\ngit clone \u003cspan class=\"hljs-attr\"\u003ehttps\u003c/span\u003e:\u003cspan class=\"hljs-comment\"\u003e//github.com/santoshshinde2012/node-boilerplate.git\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// ìƒˆ ë””ë ‰í† ë¦¬ë¡œ ë³€ê²½\u003c/span\u003e\ncd node-boilerplate\n\n\u003cspan class=\"hljs-comment\"\u003e// ëª¨ë“  ëª¨ë“ˆ ì„¤ì¹˜\u003c/span\u003e\nnpm install\n\n\u003cspan class=\"hljs-comment\"\u003e// ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘\u003c/span\u003e\nnpm start\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë‹¨ê³„ 1: PostgreSQL ì„¤ì • ë° ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±\u003c/h1\u003e\n\u003cp\u003eì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ í´ë” docker/postgresqlì— Dockerfile.postgis íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-variable constant_\"\u003eFROM\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003epostgres\u003c/span\u003e:latest\n\n# \u003cspan class=\"hljs-title class_\"\u003ePostGIS\u003c/span\u003e í™•ì¥ ê¸°ëŠ¥ ì„¤ì¹˜\n\u003cspan class=\"hljs-variable constant_\"\u003eRUN\u003c/span\u003e apt-get update \\\n    \u0026#x26;\u0026#x26; apt-get install -y postgis postgresql-\u003cspan class=\"hljs-number\"\u003e12\u003c/span\u003e-postgis-\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e \\\n    \u0026#x26;\u0026#x26; apt-get clean \\\n    \u0026#x26;\u0026#x26; rm -rf /\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e/lib/apt/lists\u003cspan class=\"hljs-comment\"\u003e/*\n\n# ì´ˆê¸° ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ init.sqlì— ì¿¼ë¦¬ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤\nCOPY init.sql /docker-entrypoint-initdb.d/\n\n# PostGIS í™•ì¥ ê¸°ëŠ¥ í™œì„±í™”\nRUN echo \"CREATE EXTENSION IF NOT EXISTS postgis;\" \u003e\u003e /docker-entrypoint-initdb.d/init.sql\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eë„ì»¤ Compose íŒŒì¼ì„ ë§Œë“¤ì–´ì£¼ì„¸ìš”. docker/postgresql í´ë”ì— ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e# \u003cspan class=\"hljs-title class_\"\u003ePostgreSQL\u003c/span\u003eì„ ìœ„í•œ docker-compose.\u003cspan class=\"hljs-property\"\u003eyml\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eversion\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'3.8'\u003c/span\u003e\n\n\u003cspan class=\"hljs-attr\"\u003eservices\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003edb\u003c/span\u003e:\n    \u003cspan class=\"hljs-attr\"\u003ebuild\u003c/span\u003e:\n      \u003cspan class=\"hljs-attr\"\u003econtext\u003c/span\u003e: .\n      \u003cspan class=\"hljs-attr\"\u003edockerfile\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003epostgis\u003c/span\u003e  # ì»¤ìŠ¤í…€ \u003cspan class=\"hljs-title class_\"\u003eDockerfile\u003c/span\u003e ì‚¬ìš©\n    \u003cspan class=\"hljs-attr\"\u003erestart\u003c/span\u003e: always\n    \u003cspan class=\"hljs-attr\"\u003eenvironment\u003c/span\u003e:\n      \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_USER\u003c/span\u003e: user1\n      \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_PASSWORD\u003c/span\u003e: user1@\u003cspan class=\"hljs-number\"\u003e123\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003ePOSTGRES_DB\u003c/span\u003e: database\n    \u003cspan class=\"hljs-attr\"\u003ehealthcheck\u003c/span\u003e:\n      # ì´ ëª…ë ¹ì–´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¤€ë¹„ë˜ì–´ ìˆëŠ”ì§€ ì†ŒìŠ¤ db ì„œë²„ì—ì„œ í™•ì¸í•©ë‹ˆë‹¤.\n      \u003cspan class=\"hljs-attr\"\u003etest\u003c/span\u003e: [ \u003cspan class=\"hljs-string\"\u003e\"CMD-SHELL\"\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e\"pg_isready\"\u003c/span\u003e ]\n      \u003cspan class=\"hljs-attr\"\u003einterval\u003c/span\u003e: 5s\n      \u003cspan class=\"hljs-attr\"\u003etimeout\u003c/span\u003e: 5s\n      \u003cspan class=\"hljs-attr\"\u003eretries\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports\u003c/span\u003e:\n      - \u003cspan class=\"hljs-string\"\u003e\"5432:5432\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes\u003c/span\u003e:\n      - \u003cspan class=\"hljs-attr\"\u003epostgres_data_v\u003c/span\u003e:\u003cspan class=\"hljs-regexp\"\u003e/var/\u003c/span\u003elib/postgresql/data\n\u003cspan class=\"hljs-attr\"\u003evolumes\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003epostgres_data_v\u003c/span\u003e:\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003epackage.json ì•ˆì— Docker Compose íŒŒì¼ì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-string\"\u003e\"db:up\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"docker-compose -f docker/postgresql/docker-compose.yml up\"\u003c/span\u003e,\n\u003cspan class=\"hljs-string\"\u003e\"db:down\"\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"docker-compose -f docker/postgresql/docker-compose.yml down\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003ePostgresqlì„ ì‹¤í–‰í•˜ê³  ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìƒì„±í•˜ì„¸ìš”: npm run db:up.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_0.png\" alt=\"image\"\u003e\u003c/p\u003e\n\u003ch1\u003eë‹¨ê³„ 2: Sequelizeì˜ ì„¤ì¹˜ ë° êµ¬ì„±\u003c/h1\u003e\n\u003cp\u003eSequelizeëŠ” npm (ë˜ëŠ” yarn)ì„ í†µí•´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003enpm install --save sequelize\nnpm install --save pg pg-hstore # \u003cspan class=\"hljs-title class_\"\u003ePostgres\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eì‘ì—…ì„ ë§ˆì¹˜ë©´ ì½”ë“œë¥¼ ë°°ì¹˜í•  í´ë” êµ¬ì¡°ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì½”ë“œê°€ ê¹¨ë—í•˜ê³  ê°€ë…ì„± ìˆê²Œ ìœ ì§€ë˜ë„ë¡ í•˜ê¸° ìœ„í•´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì—¬ëŸ¬ í´ë”ë¡œ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ë¶€ë¶„ì€ database í´ë” ì•„ë˜ì— ìœ„ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_1.png\"\u003e\n\u003cp\u003esrc/database/config í´ë”ì˜ index.ts íŒŒì¼ì— ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì •ì˜í•˜ê³ , .env npm ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ í™˜ê²½ ë³€ìˆ˜ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. í™˜ê²½ì— ë”°ë¥¸ ë¡œì§ì€ í•„ìš”ì— ë”°ë¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e path \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'path'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e dotenv \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'dotenv'\u003c/span\u003e;\n\ndotenv.\u003cspan class=\"hljs-title function_\"\u003econfig\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: path.\u003cspan class=\"hljs-title function_\"\u003ejoin\u003c/span\u003e(__dirname, \u003cspan class=\"hljs-string\"\u003e'../../.env'\u003c/span\u003e),\n});\n\níƒ€ì… \u003cspan class=\"hljs-title class_\"\u003eDbConnection\u003c/span\u003e = {\n    í˜¸ìŠ¤íŠ¸: ë¬¸ìì—´;\n    í¬íŠ¸: ìˆ«ì;\n    ì‚¬ìš©ì: ë¬¸ìì—´;\n    ë¹„ë°€ë²ˆí˜¸: ë¬¸ìì—´;\n    ë°ì´í„°ë² ì´ìŠ¤: ë¬¸ìì—´;\n    \u003cspan class=\"hljs-attr\"\u003edbLogging\u003c/span\u003e: ë¶€ìš¸;\n};\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003econnection\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDbConnection\u003c/span\u003e = {\n    í˜¸ìŠ¤íŠ¸: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_HOST\u003c/span\u003e,\n    í¬íŠ¸: \u003cspan class=\"hljs-title class_\"\u003eNumber\u003c/span\u003e(process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_PORT\u003c/span\u003e),\n    ì‚¬ìš©ì: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_USER\u003c/span\u003e,\n    ë¹„ë°€ë²ˆí˜¸: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_PASSWORD\u003c/span\u003e,\n    ë°ì´í„°ë² ì´ìŠ¤: process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eDB_NAME\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003edbLogging\u003c/span\u003e:\n        process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNODE_ENV\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e'development'\u003c/span\u003e || process.\u003cspan class=\"hljs-property\"\u003eenv\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eLOG\u003c/span\u003e === \u003cspan class=\"hljs-string\"\u003e'true'\u003c/span\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e connection;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003esrc/database í´ë”ì— index.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelize ì—°ê²°ì„ ë§Œë“­ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eDialect\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eSequelize\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'sequelize'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e connection \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./config'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e { database, user, password, host, dbLogging } = connection;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e sequelizeConnection = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eSequelize\u003c/span\u003e(database, user, password, {\n    host,\n    \u003cspan class=\"hljs-attr\"\u003elogging\u003c/span\u003e: dbLogging,\n    \u003cspan class=\"hljs-attr\"\u003edialect\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'postgres'\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDialect\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e sequelizeConnection;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003esrc/App.ts ë˜ëŠ” ì„œë²„ ì‘ìš© í”„ë¡œê·¸ë¨ì˜ ì§„ì… íŒŒì¼ì— assertDatabaseConnection ë©”ì„œë“œë¥¼ ë§Œë“¤ì–´ ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸ì„í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003eê°œì¸ \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eassertDatabaseConnection\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n     \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e database.\u003cspan class=\"hljs-title function_\"\u003eauthenticate\u003c/span\u003e();\n     \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e database.\u003cspan class=\"hljs-title function_\"\u003esync\u003c/span\u003e();\n     logger.\u003cspan class=\"hljs-title function_\"\u003einfo\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ì—°ê²°ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.'\u003c/span\u003e);\n    } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤:'\u003c/span\u003e, error);\n    }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003eë‹¨ê³„ 3: Sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ í…Œì´ë¸”(ëª¨ë¸) ìƒì„±\u003c/h1\u003e\n\u003cp\u003esrc/database/models í´ë”ì— ëª¨ë¸ì„ ì •ì˜í•˜ì„¸ìš”; ì—¬ê¸°ì„œëŠ” ìƒ˜í”Œ ëª¨ë¸ì¸ Enquiry.tsë¥¼ ìƒì„±í•  ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eModel\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eOptional\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eUUIDV4\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'sequelize'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e sequelize \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../index'\u003c/span\u003e;\n\ninterface \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e {\n \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003esubject\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003ebody\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: string;\n \u003cspan class=\"hljs-attr\"\u003ecountry\u003c/span\u003e: string;\n}\n\ninterface \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e\n \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eOptional\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-string\"\u003e'id'\u003c/span\u003e\u003e {}\n\n\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e\n \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eModel\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e\u003e\n implements \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e\n{\n public id!: string;\n public name!: string;\n public country!: string;\n public subject!: string;\n public body!: string;\n public email!: string;\n\n public readonly createdAt!: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n public readonly updatedAt!: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einit\u003c/span\u003e(\n {\n  \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eUUID\u003c/span\u003e,\n   \u003cspan class=\"hljs-attr\"\u003edefaultValue\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eUUIDV4\u003c/span\u003e,\n   \u003cspan class=\"hljs-attr\"\u003eprimaryKey\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ecountry\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003esubject\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003eemail\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  },\n  \u003cspan class=\"hljs-attr\"\u003ebody\u003c/span\u003e: {\n   \u003cspan class=\"hljs-attr\"\u003etype\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eDataTypes\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e),\n   \u003cspan class=\"hljs-attr\"\u003eallowNull\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e,\n  }\n },\n {\n  sequelize,\n  \u003cspan class=\"hljs-attr\"\u003emodelName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Enquiry'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003etableName\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'Enquiry'\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003etimestamps\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e,\n },\n);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e };\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { ë°ì´í„° ìœ í˜•, ëª¨ë¸, ì„ íƒì , \u003cspan class=\"hljs-title class_\"\u003eUUIDV4\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'sequelize'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e sequelize \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../index'\u003c/span\u003e;\n\nì¸í„°í˜ì´ìŠ¤ ì¡°íšŒ ì†ì„± {\n \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string;\n ì´ë¦„: string;\n ì£¼ì œ: string;\n ë³¸ë¬¸: string;\n ì´ë©”ì¼: string;\n êµ­ê°€: string;\n}\n\nì¸í„°í˜ì´ìŠ¤ \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e ì— ì´ì–´, \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003eì˜ ì„ íƒì  í•´ì œ {}\n\ní´ë˜ìŠ¤ \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003eì€ \u003cspan class=\"hljs-title class_\"\u003eModel\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e\u003eë¥¼ í™•ì¥í•˜ë©° \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003eë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤ {\n ê³µê³µ id!: string;\n ê³µê³µ ì´ë¦„!: string;\n ê³µê³µ êµ­ê°€!: string;\n ê³µê³µ ì£¼ì œ!: string;\n ê³µê³µ ëª¸í†µ!: string;\n ê³µê³µ ì´ë©”ì¼!: string;\n\n ê³µê³µ readonly createdAt!: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n ê³µê³µ readonly updatedAt!: \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e;\n}\n\n\u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003einit\u003c/span\u003e(\n {\n  ì•„ì´ë””: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.\u003cspan class=\"hljs-property\"\u003eUUID\u003c/span\u003e,\n   ê¸°ë³¸ê°’: \u003cspan class=\"hljs-title class_\"\u003eUUIDV4\u003c/span\u003e,\n   ê¸°ë³¸ í‚¤: ì°¸,\n  },\n  ì´ë¦„: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  êµ­ê°€: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ì£¼ì œ: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e200\u003c/span\u003e),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ì´ë©”ì¼: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  },\n  ëª¸í†µ: {\n   ìœ í˜•: ë°ì´í„° ìœ í˜•.\u003cspan class=\"hljs-title function_\"\u003eSTRING\u003c/span\u003e(\u003cspan class=\"hljs-number\"\u003e400\u003c/span\u003e),\n   í—ˆìš©í•˜ì§€ ì•ŠìŒ: ê±°ì§“,\n  }\n },\n {\n  ì‹œí€„ë¼ì´ì¦ˆ,\n  ëª¨ë¸ ì´ë¦„: \u003cspan class=\"hljs-string\"\u003e'ì¡°íšŒ'\u003c/span\u003e,\n  í…Œì´ë¸” ì´ë¦„: \u003cspan class=\"hljs-string\"\u003e'ì¡°íšŒ'\u003c/span\u003e,\n  íƒ€ì„ ìŠ¤íƒ¬í”„: ì°¸,\n },\n);\n\nìˆ˜ì¶œ { ì¡°íšŒ, \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e };\n\u003c/code\u003e\u003c/pre\u003e\n\u003cimg src=\"/assets/img/2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL_2.png\"\u003e\n\u003ch1\u003eë‹¨ê³„ 4: êµ¬ì„± ìš”ì†Œì—ì„œ ì„œë¹„ìŠ¤ ë° ì»¨íŠ¸ë¡¤ëŸ¬ ì„¤ì •\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eêµ¬ì„± ìš”ì†Œ êµ¬ì„± ìš”ì†ŒëŠ” ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰©ë‹ˆë‹¤: ì»¨íŠ¸ë¡¤ëŸ¬ ë° ì„œë¹„ìŠ¤ ì„œë¹„ìŠ¤ëŠ” í•´ë‹¹ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ê³¼ í†µì‹ í•˜ëŠ” ë° ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eë¼ìš°íŠ¸ â€” ì»¨íŠ¸ë¡¤ëŸ¬ ë° í•´ë‹¹ ë ˆìŠ¤íŠ¸ ì—”ë“œí¬ì¸íŠ¸ì˜ ë“±ë¡ ë°©ë²•ì„ ë“±ë¡í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eê³µí†µ ì„œë¹„ìŠ¤ â€”ì´ ì„œë¹„ìŠ¤ëŠ” ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸ ê°„ì˜ ì¼ë°˜ ì‘ì—… ìˆ˜í–‰ì— ì±…ì„ì´ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eì´ë¥¼ êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì— ì£¼ì…í•˜ê³  êµ¬ì„± ìš”ì†Œ ì„œë¹„ìŠ¤ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ í•´ë‹¹ ë©”ì„œë“œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// src/components/enquiry/EnquiryService.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ sequelizeë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±ëœ ëª¨ë¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e {\n \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e,\n \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e,\n \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e,\n} \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../database/models/Enquiry'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e logger \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../lib/logger'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApiError\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../abstractions/ApiError'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eStatusCodes\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'http-status-codes'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiryService\u003c/span\u003e {\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e[]\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e enquiries = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindAll\u003c/span\u003e();\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e enquiries;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetById\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string | number): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e enquiry = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindByPk\u003c/span\u003e(id);\n   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!enquiry) {\n    \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApiError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Enquiry not found'\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eStatusCodes\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNOT_FOUND\u003c/span\u003e);\n   }\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e enquiry;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eupdate\u003c/span\u003e(\n  \u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string | number,\n  \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003ePartial\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e\u003e,\n ): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e enquiry = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efindByPk\u003c/span\u003e(id);\n   \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!enquiry) {\n    \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApiError\u003c/span\u003e(\n     \u003cspan class=\"hljs-string\"\u003e'Enquiry not found'\u003c/span\u003e,\n     \u003cspan class=\"hljs-title class_\"\u003eStatusCodes\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eNOT_FOUND\u003c/span\u003e,\n    );\n   }\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e updatedEnquiry = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e enquiry.\u003cspan class=\"hljs-title function_\"\u003eupdate\u003c/span\u003e(payload);\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e updatedEnquiry;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(\n  \u003cspan class=\"hljs-attr\"\u003epayload\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEnquiryCreationAttributes\u003c/span\u003e,\n ): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e enquiry = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreate\u003c/span\u003e(payload);\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e enquiry;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n\n \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003edelete\u003c/span\u003e(\u003cspan class=\"hljs-attr\"\u003eid\u003c/span\u003e: string | number): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;boolean\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e deletedEnquiryCount = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003edestroy\u003c/span\u003e({\n    \u003cspan class=\"hljs-attr\"\u003ewhere\u003c/span\u003e: { id },\n   });\n\n   \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e !!deletedEnquiryCount;\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n   logger.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error);\n   \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e error;\n  }\n }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e// src/components/enquiry/EnquiryController.ts íŒŒì¼ì„ ìƒì„±í•˜ì—¬ REST APIì˜ ì»¨íŠ¸ë¡¤ëŸ¬ ë¶€ë¶„ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eNextFunction\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eRouter\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'express'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eReasonPhrases\u003c/span\u003e, \u003cspan class=\"hljs-title class_\"\u003eStatusCodes\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'http-status-codes'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eBaseApi\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../BaseApi'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eEnquiryService\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'./EnquiryService'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../database/models/Enquiry'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eApiError\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'../../abstractions/ApiError'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e/**\n * Enquiry controller\n */\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiryController\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_ inherited__\"\u003eBaseApi\u003c/span\u003e {\n private \u003cspan class=\"hljs-attr\"\u003eenquiry\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEnquiryService\u003c/span\u003e;\n public \u003cspan class=\"hljs-attr\"\u003ebasePath\u003c/span\u003e: string = \u003cspan class=\"hljs-string\"\u003e'enquiries'\u003c/span\u003e;\n\n \u003cspan class=\"hljs-title function_\"\u003econstructor\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-variable language_\"\u003esuper\u003c/span\u003e();\n  \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eenquiry\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eEnquiryService\u003c/span\u003e();\n }\n\n \u003cspan class=\"hljs-comment\"\u003e/**\n  *\n  */\u003c/span\u003e\n public \u003cspan class=\"hljs-title function_\"\u003eroutes\u003c/span\u003e(): \u003cspan class=\"hljs-title class_\"\u003eRouteDefinition\u003c/span\u003e[] {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e [\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'get'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egetEnquiries\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) },\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/:id'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'get'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003egetEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) },\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'post'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ecreateEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) },\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/:id'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'put'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eupdateEnquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) },\n   { \u003cspan class=\"hljs-attr\"\u003epath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/:id'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003emethod\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'delete'\u003c/span\u003e, \u003cspan class=\"hljs-attr\"\u003ehandler\u003c/span\u003e: \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edelete\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ebind\u003c/span\u003e(\u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e) }\n  ];\n }\n\n \u003cspan class=\"hljs-comment\"\u003e/**\n  *\n  * \u003cspan class=\"hljs-doctag\"\u003e@param\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003ereq\u003c/span\u003e\n  * \u003cspan class=\"hljs-doctag\"\u003e@param\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003eres\u003c/span\u003e\n  * \u003cspan class=\"hljs-doctag\"\u003e@param\u003c/span\u003e \u003cspan class=\"hljs-variable\"\u003enext\u003c/span\u003e\n  */\u003c/span\u003e\n public \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003egetEnquiries\u003c/span\u003e(\n  \u003cspan class=\"hljs-attr\"\u003ereq\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eRequest\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eres\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eResponse\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003enext\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNextFunction\u003c/span\u003e,\n ): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-keyword\"\u003evoid\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n   \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eenquiries\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eEnquiryAttributes\u003c/span\u003e[] =\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eenquiry\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003egetAll\u003c/span\u003e();\n   res.\u003cspan class=\"hljs-property\"\u003elocals\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e = enquiries;\n   \u003cspan class=\"hljs-comment\"\u003e// call base class method\u003c/span\u003e\n   \u003cspan class=\"hljs-variable language_\"\u003ethis\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003esend\u003c/span\u003e(res);\n  } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (err) {\n   \u003cspan class=\"hljs-title function_\"\u003enext\u003c/span\u003e(err);\n  }\n }\n\n \u003cspan class=\"hljs-comment\"\u003e// ì´í•˜ ìƒëµ\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003eë‹¨ê³„ 5: êµ¬ì„± ìš”ì†Œë¥¼ ìœ„í•œ REST API ìƒì„±\u003c/h1\u003e\n\u003cp\u003eë¬¸ì˜: ë¬¸ì˜ëŠ” ì†ì„± ì§‘í•©ì„ ê°€ì§„ ì£¼ìš” ì—”í„°í‹°ì…ë‹ˆë‹¤.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGET /v1/enquiries ëª¨ë“  ë¬¸ì˜ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003ePOST /v1/enquiries ìƒˆë¡œìš´ ë¬¸ì˜ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eGET /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003ePUT /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ì˜ ì„¸ë¶€ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003cli\u003eDELETE /v1/enquiries/'id' íŠ¹ì • ë¬¸ì˜ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eìš°ë¦¬ëŠ” ì´ì „ì— ì •ì˜í•œ ê²½ë¡œë¥¼ ë“±ë¡í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ src/routes.tsì— í•­ëª©ì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003eì•„ë˜ ë§í¬ì—ì„œ ì „ì²´ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ˆë³´ìë¥¼ ì—¼ë‘ì— ë‘ê³  ì„¤ê³„ëœ ì´ ì €ì¥ì†ŒëŠ” ë°±ì—”ë“œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ë° íŠ¼íŠ¼í•œ ì¶œë°œì ì„ ì œê³µí•©ë‹ˆë‹¤. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ê°€ í¬í•¨ëœ ì˜ ì •ë¦¬ëœ ì½”ë“œë² ì´ìŠ¤ë¡œ ê¹Šê²Œ íŒŒê³ ë“¤ë©° í•™ìŠµí•˜ê³  ë¬¸ì œ í•´ê²°ì„ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²Œë‹¤ê°€ GitHub Actions ì›Œí¬í”Œë¡œê°€ í†µí•©ë˜ì–´ ìˆì–´ í…ŒìŠ¤íŠ¸ì™€ ë°°í¬ë¥¼ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•™ìŠµì„ ì‹œì‘í•˜ê±°ë‚˜ ì²« ë²ˆì§¸ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ë ¤ëŠ” ê²½ìš°ì—ë„ ìœ ìš©í•©ë‹ˆë‹¤.\u003c/p\u003e\n\u003cp\u003eì½ì–´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ì´ ë¸”ë¡œê·¸ê°€ í•™ìŠµì— ê°€ì¹˜ê°€ ìˆë‹¤ê³  ìƒê°ë˜ë©´ ì˜ê²¬ì„ ê³µìœ í•˜ê³  í´ë©(clap)ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003ch1\u003eì¹œì ˆí•œ ì–¸ì–´ë¡œ ğŸš€\u003c/h1\u003e\n\u003cp\u003eIn Plain English ì»¤ë®¤ë‹ˆí‹°ì— ì°¸ì—¬í•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤! ë– ë‚˜ì‹œê¸° ì „ì—:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eì‘ê°€ë¥¼ clapsí•˜ê³  íŒ”ë¡œìš° í•´ì£¼ì„¸ìš” ğŸ‘ï¸\u003c/li\u003e\n\u003cli\u003eíŒ”ë¡œìš°í•˜ê¸°: X | LinkedIn | YouTube | Discord | ë‰´ìŠ¤ë ˆí„°\u003c/li\u003e\n\u003cli\u003eë‹¤ë¥¸ í”Œë«í¼ ë°©ë¬¸í•˜ê¸°: Stackademic | CoFeed | Venture | Cubed\u003c/li\u003e\n\u003cli\u003ePlainEnglish.ioì—ì„œ ë” ë§ì€ ì½˜í…ì¸ ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-05-20-HowtoUseSequelizewithTypeScriptNodejsandPostgreSQL"},"buildId":"OFpTzInQeZKWBaqJEukNX","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>