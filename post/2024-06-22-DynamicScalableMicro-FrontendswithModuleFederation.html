<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><title>동적이고 확장 가능한 마이크로 프런트엔드 모듈 페더레이션 사용 방법 | allround-coder</title><meta name="description" content=""/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta property="og:url" content="https://allround-coder.github.io///post/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:site_name" content="동적이고 확장 가능한 마이크로 프런트엔드 모듈 페더레이션 사용 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:title" content="동적이고 확장 가능한 마이크로 프런트엔드 모듈 페더레이션 사용 방법 | allround-coder" data-gatsby-head="true"/><meta property="og:description" content="" data-gatsby-head="true"/><meta property="og:image" content="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_0.png" data-gatsby-head="true"/><meta property="og:locale" content="en_US" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta property="twitter:domain" content="https://allround-coder.github.io/" data-gatsby-head="true"/><meta property="twitter:url" content="https://allround-coder.github.io///post/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation" data-gatsby-head="true"/><meta name="twitter:title" content="동적이고 확장 가능한 마이크로 프런트엔드 모듈 페더레이션 사용 방법 | allround-coder" data-gatsby-head="true"/><meta name="twitter:description" content="" data-gatsby-head="true"/><meta name="twitter:image" content="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_0.png" data-gatsby-head="true"/><meta name="twitter:data1" content="Dev | allround-coder" data-gatsby-head="true"/><meta name="article:published_time" content="2024-06-22 03:06" data-gatsby-head="true"/><meta name="next-head-count" content="19"/><meta name="google-site-verification" content="a-yehRo3k3xv7fg6LqRaE8jlE42e5wP2bDE_2F849O4"/><link rel="stylesheet" href="/favicons/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png"/><link rel="icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-icon" href="/favicons/apple-icon-180x180.png"/><link rel="apple-touch-startup-image" href="/startup.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="black"/><meta name="msapplication-config" content="/favicons/browserconfig.xml"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZFDEQ947R4"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
  
            gtag('config', 'G-ZFDEQ947R4');</script><link rel="preload" href="/_next/static/css/6e57edcf9f2ce551.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6e57edcf9f2ce551.css" data-n-g=""/><link rel="preload" href="/_next/static/css/b8ef307c9aee1e34.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b8ef307c9aee1e34.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee6df16fdc6dae4d.js" defer=""></script><script src="/_next/static/chunks/framework-46611630e39cfdeb.js" defer=""></script><script src="/_next/static/chunks/main-cf4a52eec9a970a0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6fae11262ee5c69b.js" defer=""></script><script src="/_next/static/chunks/75fc9c18-ac4aa08aae62f90e.js" defer=""></script><script src="/_next/static/chunks/463-0429087d4c0b0335.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-b088bc509ff5c497.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_buildManifest.js" defer=""></script><script src="/_next/static/Rv-NbbtWUaja2joH5WkO_/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header class="Header_header__Z8PUO"><div class="Header_inner__tfr0u"><strong class="Header_title__Otn70"><a href="/">Allround Coder</a></strong><nav class="Header_nav_area__6KVpk"><a class="nav_item" href="/posts/1">Posts</a></nav></div></header><main class="posts_container__NyRU3"><div class="posts_inner__i3n_i"><h1 class="posts_post_title__EbxNx">동적이고 확장 가능한 마이크로 프런트엔드 모듈 페더레이션 사용 방법</h1><div class="posts_meta__cR7lu"><div class="posts_profile_wrap__mslMl"><div class="posts_profile_image_wrap__kPikV"><img alt="동적이고 확장 가능한 마이크로 프런트엔드 모듈 페더레이션 사용 방법" loading="lazy" width="44" height="44" decoding="async" data-nimg="1" class="profile" style="color:transparent" src="/favicons/apple-icon-114x114.png"/></div><div class="posts_textarea__w_iKT"><span class="writer">Allround Coder</span><span class="posts_info__5KJdN"><span class="posts_date__ctqHI">Posted On Jun 22, 2024</span><span class="posts_reading_time__f7YPP">6<!-- --> min read</span></span></div></div><img alt="" loading="lazy" width="50" height="50" decoding="async" data-nimg="1" class="posts_view_badge__tcbfm" style="color:transparent" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fallround-coder.github.io/post/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation&amp;count_bg=%2379C83D&amp;title_bg=%23555555&amp;icon=&amp;icon_color=%23E7E7E7&amp;title=views&amp;edge_flat=false"/></div><article class="posts_post_content__n_L6j"><div><!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1" name="viewport">
</head>
<body>
<p><img src="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_0.png" alt="DynamicScalableMicro-FrontendswithModuleFederation_0"></p>
<p>안녕하세요!</p>
<p>KredX는 내국 (인보이스 할인) 및 국제 (글로벌 무역 금융 거래소)에서 접근성을 보장하는 공급망 금융(SCF) 플랫폼입니다.</p>
<p>인도의 중소기업 및 중소기업(MSME) 부문의 급속한 성장을 고려해, KredX는 이 섹터의 모든 금융 요구에 대한 일괄 해결책으로 나타났습니다. 우리는 SCF 및 현금 관리 솔루션(CMS) SaaS 생태계의 다양한 측면에서 빠르게 발전하고 있습니다.</p>
<p>성장에는 주의가 필요합니다!
비즈니스의 보다 광범위한 요구를 충족하기 위해, 저희의 SCF 제품 중 하나인 인보이스 할인(ID)의 코드베이스는 거대한 단일체(monolith)가 되었으며, 이로 인해 개발자의 생산성을 저해하고 독자적인 변경이 적게 유연해졌습니다.</p>
<div class="content-ad"></div>
<p>마크다운 포맷으로 위의 텍스트를 번역하겠습니다.</p>
<p><img src="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_1.png" alt="이미지"></p>
<p>매일 개발하는 것이 얼마나 어려워졌는지 이해하는 데 도움이 되었으면 좋겠습니다. 우리의 ID 프론트엔드 코드 빌드 시간이 거의 50-55분이 걸리고, 프로젝트를 로컬에서 실행하는 데 약 8-12분이 소요됩니다.</p>
<p>오늘날, 프로젝트는 너무 끌려다붙었다고 할 정도로 심각해졌는데, 우리의 단일 내부 모듈 중 하나에 문제가 발생하면 전체 앱에 영향을 줄 수도 있습니다(무하랏 모듈의 단일 문제가 금융가 및 관리자 대시보드 전체를 다운시키는 문제가 발생) 그리고 때로는 여러 제품에도 영향을 미칠 수 있습니다(재사용할 수 없는 인증 과정으로 인해 여러 제품에 영향을 미침).</p>
<p>기존 단일체 아키텍처의 고통
코드베이스가 커짐에 따라 여러 문제가 시작되었습니다:</p>
<div class="content-ad"></div>
<ul>
<li>빌드 시간이 길어짐: 코드베이스의 크기가 커지면 개발 서버를 시작하는 데와 HMR이 개발자 변경 사항을 반영하는 데 더 오래 걸립니다.</li>
<li>높은 인지 부담: 여러 앱의 코드가 동일한 저장소에 있기 때문에, 개발자가 이해해야 하는 코드 영역이 증가하여 개발자의 인지 부담이 커집니다.</li>
<li>단일 장애점: 모놀리스의 어떤 부분에서 버그가 발생하면 전체 애플리케이션을 다운시키는 결과를 가져옵니다. 즉, 모든 다양한 사용자 설정이 영향을 받아 신뢰성이 떨어지고 수동 및 자동화된 테스트에 더 많은 부담이 생깁니다.</li>
<li>독립적인 CI/CD 부재: 금융 자금 할인용으로 사용되는 동일한 ID 코드베이스가 운영자용 대시보드, IPA용 대시보드, GTX용 인증 흐름, KredX Financier 앱에 대한 일반 코드, 그리고 그 이외 많은 곳에도 사용됩니다. 한 모듈의 작은 변경이 전체 코드베이스의 배포를 필요로 합니다.</li>
</ul>
<p>우리에게는 코드베이스를 더 작고 독립적인 모듈로 분리할 수 있는 해결책이 필요하다는 점이 매우 명확했습니다. 각 모듈은 유연하여 매끄럽게 플러그인하고 플러그아웃할 수 있어야 하며, 개발, 테스트 및 배포를 독립적으로 수행할 수 있어야 합니다.</p>
<p>기술적인 탐색은 이곳에서 시작됩니다.
동적이고 확장 가능한 솔루션을 찾기 위한 연구</p>
<p>해당 솔루션에 대한 고민에 들어가기 전에 솔루션이 어떻게 보일지에 대한 몇 가지 기준을 결정했습니다:</p>
<div class="content-ad"></div>
<ul>
<li>좋은 개발자 경험: 이 솔루션은 전반적인 개발자 경험을 향상시켜야 합니다.</li>
<li>최소한의 아키텍처 변경: 기존 웹 아키텍처에 급격한 수정이 필요하지 않아야 합니다.</li>
<li>구성의 용이성: 솔루션을 비교적 쉽게 구성할 수 있어야 합니다.</li>
<li>점진적인 학습 곡선: 개발자들에게 순차적인 학습 곡선을 가지며 빠른 도입을 용이하게 해야 합니다.</li>
<li>미래 기술 이전: 미래 기술 이전을 위해 솔루션을 쉽게 분리할 수 있어야 합니다.</li>
<li>커뮤니티 지원 및 미래 비전: 강력한 커뮤니티 지원과 미래 비전을 가져야 합니다.</li>
</ul>
<p>다양한 접근법
문제를 자세히 고려하여, 우리는 몇 가지 실행 가능한 접근법을 식별했습니다:</p>
<p><img src="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_2.png" alt="Dynamic Scalable Micro-Frontends with Module Federation"></p>
<p>우리가 시도한 솔루션 중에, Module Federation과 Monorepo가 모든 영역을 충족하고 그 이상을 제공하는 솔루션이라는 것을 발견했습니다.</p>
<div class="content-ad"></div>
<p>결국, 모듈 페더레이션이 무엇인가요?
믿어봐요, 기다릴 가치가 있어요!</p>
<p>모듈 페더레이션은 Webpack 및 Rspack의 고급 기능으로, JavaScript 애플리케이션을 분산화하는 아키텍처 패턴을 제공하여 (서버 측의 마이크로서비스와 유사하게) 다른 애플리케이션(또는 마이크로 프론트엔드)로부터 코드를 동적으로 로드할 수 있는 방법을 제공합니다. 이는 다음과 같은 이점을 제공할 수 있어요:</p>
<ul>
<li>코드 중복 감소</li>
<li>코드 유지 관리성 향상</li>
<li>애플리케이션 전체 크기 감소</li>
<li>애플리케이션 성능 향상</li>
</ul>
<p>모듈 페더레이션의 주요 요소
모듈 페더레이션 애플리케이션에서는 이해해야 할 여러 요소가 있지만, 아키텍처를 설명할 수 있는 3가지 요소가 있어요:</p>
<div class="content-ad"></div>
<ul>
<li>호스트 또는 셸: 이름 그대로, 이것은 여러 연합된 원격 모듈과 결합될 수 있는 컨테이너입니다. (그 자체가 연합된 모듈임)</li>
<li>원격: 자바스크립트, 기본 값, 복잡한 값 또는 전체 모듈 모두 일 수 있습니다. 원격에서 노출하고자 하는 내용은 무엇이든 될 수 있습니다. 기본적으로 이러한 원격 모듈은 최종 조각을 만들기 위해 셸 안에 결합됩니다.</li>
<li>공유 의존성: 다른 원격들 간에 공유되는 패키지/라이브러리와 같은 종속성입니다. 이로 인해 중복이 줄어들고 코드 크기도 작아집니다.</li>
</ul>
<p>모든 이러한 설정은 웹팩 구성 내에서 이루어집니다.</p>
<p><img src="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_3.png" alt="이미지1"></p>
<p><img src="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_4.png" alt="이미지2"></p>
<div class="content-ad"></div>
<p>여러 가지 방법으로 모듈 연합을 활용할 수 있습니다.
연합 모듈을 사용하는 방법에는 다음과 같은 다양한 유연성이 있습니다.</p>
<ul>
<li>도메인 수준: 여기에 각 연합 모듈은 별도의 도메인에 호스팅되어 독립적으로 사용됩니다.</li>
<li>위젯/컴포넌트 수준: 이 방법을 통해 어떤 앱에서든 다른 앱으로부터 어떤 위젯(예: 작은 코드 조각)을 추가할 수 있습니다.</li>
<li>하이브리드 수준: 첫 번째와 두 번째 방법을 함께 사용할 수 있습니다.</li>
</ul>
<p><img src="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_5.png" alt="이미지"></p>
<p>저희는 우리의 요구에 하이브리드 방법을 선택했습니다. 이곳에서 호스트는 여러 마이크로 프론트엔드(원격)간의 탐색 로직 뿐만 아니라 루트의 지연 로딩도 처리합니다.</p>
<div class="content-ad"></div>
<p>우리는 다양한 리모트들 사이에서 모든 공통 유틸, 컴포넌트, 훅 등을 처리하는 일반 위젯/컴포넌트 페더레이티드 모듈도 만들었습니다.</p>
<p>그저 하나의 웹팩 플러그인을 추가하면 끝이라고요? 그 답은: 네와 아니요 둘 다!</p>
<p>네, 의심의 여지가 없이 이것은 극적인 변화를 일으키지 않으며, 모듈을 레고처럼 간단하게 만들어 코드베이스에 쉽게 꽂아 넣고 뺄 수 있게 만들어 줍니다. 게다가, 다른 웹팩 플러그인 옆에 앉아서 단순히 연결하기만 하면 됩니다.</p>
<p>하지만, 아니요, 저희 팀이 이를 해결하느라 겪은 일부 고통스러운 문제가 있었습니다. 주요 문제로는 오류 처리, 버전 리소스 및 버전 관리, HMR, 타입 안전성 등이 있었어요.</p>
<div class="content-ad"></div>
<p>각각의 내부 요구사항과 접근법에 따라 이 문제에 대한 여러 가지 다른 방법을 얻을 수 있습니다. 간단히 말씀드리면, 오늘은 가장 일반적이고 귀찮은 문제인 Type-Safety에 대해 이야기해 볼 거예요. 우리는 개발자가 로컬에서 코드를 작성할 때 타입 안전성과 자동 완성을 원하며, 추가로 타입 확인을 실행하여 TS 오류가 없는지 확인하고 싶어해요.</p>
<p>타입 안전성을 되찾아보자!</p>
<p>우리는 모노 저장소 구조를 사용하기 때문에 생성된 .d.ts 파일들을 참조하려고 노력했어요. 작동은 했지만 모노 저장소 구조와 결합되었고 외부 모듈에 독립적으로 사용할 수 없었어요.</p>
<p>그 다음으로 시도한 것은 타입을 NPM 패키지로 내보내는 것이었지만 이 문제가 우리에게 큰 장애물이었어요.</p>
<div class="content-ad"></div>
<p>마침내 확장 가능한 솔루션이다. 이 솔루션에는 웹팩 구성 내부에 다음 도구가 포함되어 있습니다.</p>
<ul>
<li>dts-loader: 모든 d.ts 파일을 별도의 폴더에 생성하는 데 사용됨</li>
<li>ExternalTemplateRemotesPlugin: 원격지에서 생성된 타입 tar 파일을 다운로드함</li>
</ul>
<p><img src="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_6.png" alt="이미지"></p>
<p>기본적으로 자바스크립트와 함께 생성된 유형의 tar 파일을 번들링하며, 해당 원격지가 사용된 곳에서 ExternalTemplateRemotesPlugin을 통해 해당 파일을 다운로드합니다.</p>
<div class="content-ad"></div>
<p>저희가 새로운 애플리케이션을 만들었는데 ID의 모든 경우/기능이 다 다뤄지지 않았기 때문에 이 결과는 사전 보드 결과와 비슷할 것입니다. 지금은 대략적인 방향을 얻을 수 있습니다;</p>
<p><img src="/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_7.png" alt="이미지"></p>
<p>축하합니다! 성공하셨네요!
의문이나 제안이 있으면 댓글에 남겨주세요. 또는 제 소셜 미디어 ID 중 하나로 메시지를 남겨주세요. 이처럼 도전을 해결하는 것을 즐기신다면, 저희 채용 페이지 <a href="https://www.kredx.com/join-our-team%EC%9D%84" rel="nofollow" target="_blank">https://www.kredx.com/join-our-team을</a> 꼭 확인해보세요.</p>
</body>
</html>
</div></article></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"동적이고 확장 가능한 마이크로 프런트엔드 모듈 페더레이션 사용 방법","description":"","date":"2024-06-22 03:06","slug":"2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation","content":"\n\n![DynamicScalableMicro-FrontendswithModuleFederation_0](/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_0.png)\n\n안녕하세요! \n\nKredX는 내국 (인보이스 할인) 및 국제 (글로벌 무역 금융 거래소)에서 접근성을 보장하는 공급망 금융(SCF) 플랫폼입니다.\n\n인도의 중소기업 및 중소기업(MSME) 부문의 급속한 성장을 고려해, KredX는 이 섹터의 모든 금융 요구에 대한 일괄 해결책으로 나타났습니다. 우리는 SCF 및 현금 관리 솔루션(CMS) SaaS 생태계의 다양한 측면에서 빠르게 발전하고 있습니다.\n\n성장에는 주의가 필요합니다!\n비즈니스의 보다 광범위한 요구를 충족하기 위해, 저희의 SCF 제품 중 하나인 인보이스 할인(ID)의 코드베이스는 거대한 단일체(monolith)가 되었으며, 이로 인해 개발자의 생산성을 저해하고 독자적인 변경이 적게 유연해졌습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n마크다운 포맷으로 위의 텍스트를 번역하겠습니다.\n\n![이미지](/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_1.png)\n\n매일 개발하는 것이 얼마나 어려워졌는지 이해하는 데 도움이 되었으면 좋겠습니다. 우리의 ID 프론트엔드 코드 빌드 시간이 거의 50-55분이 걸리고, 프로젝트를 로컬에서 실행하는 데 약 8-12분이 소요됩니다.\n\n오늘날, 프로젝트는 너무 끌려다붙었다고 할 정도로 심각해졌는데, 우리의 단일 내부 모듈 중 하나에 문제가 발생하면 전체 앱에 영향을 줄 수도 있습니다(무하랏 모듈의 단일 문제가 금융가 및 관리자 대시보드 전체를 다운시키는 문제가 발생) 그리고 때로는 여러 제품에도 영향을 미칠 수 있습니다(재사용할 수 없는 인증 과정으로 인해 여러 제품에 영향을 미침).\n\n기존 단일체 아키텍처의 고통\n코드베이스가 커짐에 따라 여러 문제가 시작되었습니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 빌드 시간이 길어짐: 코드베이스의 크기가 커지면 개발 서버를 시작하는 데와 HMR이 개발자 변경 사항을 반영하는 데 더 오래 걸립니다.\n- 높은 인지 부담: 여러 앱의 코드가 동일한 저장소에 있기 때문에, 개발자가 이해해야 하는 코드 영역이 증가하여 개발자의 인지 부담이 커집니다.\n- 단일 장애점: 모놀리스의 어떤 부분에서 버그가 발생하면 전체 애플리케이션을 다운시키는 결과를 가져옵니다. 즉, 모든 다양한 사용자 설정이 영향을 받아 신뢰성이 떨어지고 수동 및 자동화된 테스트에 더 많은 부담이 생깁니다.\n- 독립적인 CI/CD 부재: 금융 자금 할인용으로 사용되는 동일한 ID 코드베이스가 운영자용 대시보드, IPA용 대시보드, GTX용 인증 흐름, KredX Financier 앱에 대한 일반 코드, 그리고 그 이외 많은 곳에도 사용됩니다. 한 모듈의 작은 변경이 전체 코드베이스의 배포를 필요로 합니다.\n\n우리에게는 코드베이스를 더 작고 독립적인 모듈로 분리할 수 있는 해결책이 필요하다는 점이 매우 명확했습니다. 각 모듈은 유연하여 매끄럽게 플러그인하고 플러그아웃할 수 있어야 하며, 개발, 테스트 및 배포를 독립적으로 수행할 수 있어야 합니다.\n\n기술적인 탐색은 이곳에서 시작됩니다.\n동적이고 확장 가능한 솔루션을 찾기 위한 연구\n\n해당 솔루션에 대한 고민에 들어가기 전에 솔루션이 어떻게 보일지에 대한 몇 가지 기준을 결정했습니다:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 좋은 개발자 경험: 이 솔루션은 전반적인 개발자 경험을 향상시켜야 합니다.\n- 최소한의 아키텍처 변경: 기존 웹 아키텍처에 급격한 수정이 필요하지 않아야 합니다.\n- 구성의 용이성: 솔루션을 비교적 쉽게 구성할 수 있어야 합니다.\n- 점진적인 학습 곡선: 개발자들에게 순차적인 학습 곡선을 가지며 빠른 도입을 용이하게 해야 합니다.\n- 미래 기술 이전: 미래 기술 이전을 위해 솔루션을 쉽게 분리할 수 있어야 합니다.\n- 커뮤니티 지원 및 미래 비전: 강력한 커뮤니티 지원과 미래 비전을 가져야 합니다.\n\n다양한 접근법\n문제를 자세히 고려하여, 우리는 몇 가지 실행 가능한 접근법을 식별했습니다:\n\n![Dynamic Scalable Micro-Frontends with Module Federation](/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_2.png)\n\n우리가 시도한 솔루션 중에, Module Federation과 Monorepo가 모든 영역을 충족하고 그 이상을 제공하는 솔루션이라는 것을 발견했습니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n결국, 모듈 페더레이션이 무엇인가요?\n믿어봐요, 기다릴 가치가 있어요!\n\n모듈 페더레이션은 Webpack 및 Rspack의 고급 기능으로, JavaScript 애플리케이션을 분산화하는 아키텍처 패턴을 제공하여 (서버 측의 마이크로서비스와 유사하게) 다른 애플리케이션(또는 마이크로 프론트엔드)로부터 코드를 동적으로 로드할 수 있는 방법을 제공합니다. 이는 다음과 같은 이점을 제공할 수 있어요:\n\n- 코드 중복 감소\n- 코드 유지 관리성 향상\n- 애플리케이션 전체 크기 감소\n- 애플리케이션 성능 향상\n\n모듈 페더레이션의 주요 요소\n모듈 페더레이션 애플리케이션에서는 이해해야 할 여러 요소가 있지만, 아키텍처를 설명할 수 있는 3가지 요소가 있어요:\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n- 호스트 또는 셸: 이름 그대로, 이것은 여러 연합된 원격 모듈과 결합될 수 있는 컨테이너입니다. (그 자체가 연합된 모듈임)\r\n- 원격: 자바스크립트, 기본 값, 복잡한 값 또는 전체 모듈 모두 일 수 있습니다. 원격에서 노출하고자 하는 내용은 무엇이든 될 수 있습니다. 기본적으로 이러한 원격 모듈은 최종 조각을 만들기 위해 셸 안에 결합됩니다.\r\n- 공유 의존성: 다른 원격들 간에 공유되는 패키지/라이브러리와 같은 종속성입니다. 이로 인해 중복이 줄어들고 코드 크기도 작아집니다.\n\n모든 이러한 설정은 웹팩 구성 내에서 이루어집니다.\n\n![이미지1](/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_3.png)\n\n![이미지2](/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_4.png)\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n여러 가지 방법으로 모듈 연합을 활용할 수 있습니다.\n연합 모듈을 사용하는 방법에는 다음과 같은 다양한 유연성이 있습니다.\n\n- 도메인 수준: 여기에 각 연합 모듈은 별도의 도메인에 호스팅되어 독립적으로 사용됩니다.\n- 위젯/컴포넌트 수준: 이 방법을 통해 어떤 앱에서든 다른 앱으로부터 어떤 위젯(예: 작은 코드 조각)을 추가할 수 있습니다.\n- 하이브리드 수준: 첫 번째와 두 번째 방법을 함께 사용할 수 있습니다.\n\n![이미지](/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_5.png)\n\n저희는 우리의 요구에 하이브리드 방법을 선택했습니다. 이곳에서 호스트는 여러 마이크로 프론트엔드(원격)간의 탐색 로직 뿐만 아니라 루트의 지연 로딩도 처리합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n우리는 다양한 리모트들 사이에서 모든 공통 유틸, 컴포넌트, 훅 등을 처리하는 일반 위젯/컴포넌트 페더레이티드 모듈도 만들었습니다.\n\n그저 하나의 웹팩 플러그인을 추가하면 끝이라고요? 그 답은: 네와 아니요 둘 다!\n\n네, 의심의 여지가 없이 이것은 극적인 변화를 일으키지 않으며, 모듈을 레고처럼 간단하게 만들어 코드베이스에 쉽게 꽂아 넣고 뺄 수 있게 만들어 줍니다. 게다가, 다른 웹팩 플러그인 옆에 앉아서 단순히 연결하기만 하면 됩니다.\n\n하지만, 아니요, 저희 팀이 이를 해결하느라 겪은 일부 고통스러운 문제가 있었습니다. 주요 문제로는 오류 처리, 버전 리소스 및 버전 관리, HMR, 타입 안전성 등이 있었어요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n각각의 내부 요구사항과 접근법에 따라 이 문제에 대한 여러 가지 다른 방법을 얻을 수 있습니다. 간단히 말씀드리면, 오늘은 가장 일반적이고 귀찮은 문제인 Type-Safety에 대해 이야기해 볼 거예요. 우리는 개발자가 로컬에서 코드를 작성할 때 타입 안전성과 자동 완성을 원하며, 추가로 타입 확인을 실행하여 TS 오류가 없는지 확인하고 싶어해요.\n\n타입 안전성을 되찾아보자!\n\n우리는 모노 저장소 구조를 사용하기 때문에 생성된 .d.ts 파일들을 참조하려고 노력했어요. 작동은 했지만 모노 저장소 구조와 결합되었고 외부 모듈에 독립적으로 사용할 수 없었어요.\n\n그 다음으로 시도한 것은 타입을 NPM 패키지로 내보내는 것이었지만 이 문제가 우리에게 큰 장애물이었어요.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n마침내 확장 가능한 솔루션이다. 이 솔루션에는 웹팩 구성 내부에 다음 도구가 포함되어 있습니다.\n\n- dts-loader: 모든 d.ts 파일을 별도의 폴더에 생성하는 데 사용됨\n- ExternalTemplateRemotesPlugin: 원격지에서 생성된 타입 tar 파일을 다운로드함\n\n![이미지](/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_6.png)\n\n기본적으로 자바스크립트와 함께 생성된 유형의 tar 파일을 번들링하며, 해당 원격지가 사용된 곳에서 ExternalTemplateRemotesPlugin을 통해 해당 파일을 다운로드합니다.\n\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\n저희가 새로운 애플리케이션을 만들었는데 ID의 모든 경우/기능이 다 다뤄지지 않았기 때문에 이 결과는 사전 보드 결과와 비슷할 것입니다. 지금은 대략적인 방향을 얻을 수 있습니다;\n\n![이미지](/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_7.png)\n\n축하합니다! 성공하셨네요!\n의문이나 제안이 있으면 댓글에 남겨주세요. 또는 제 소셜 미디어 ID 중 하나로 메시지를 남겨주세요. 이처럼 도전을 해결하는 것을 즐기신다면, 저희 채용 페이지 https://www.kredx.com/join-our-team을 꼭 확인해보세요.","ogImage":{"url":"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_0.png"},"coverImage":"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_0.png","tag":["Tech"],"readingTime":6},"content":"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n\u003chead\u003e\n\u003cmeta charset=\"utf-8\"\u003e\n\u003cmeta content=\"width=device-width, initial-scale=1\" name=\"viewport\"\u003e\n\u003c/head\u003e\n\u003cbody\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_0.png\" alt=\"DynamicScalableMicro-FrontendswithModuleFederation_0\"\u003e\u003c/p\u003e\n\u003cp\u003e안녕하세요!\u003c/p\u003e\n\u003cp\u003eKredX는 내국 (인보이스 할인) 및 국제 (글로벌 무역 금융 거래소)에서 접근성을 보장하는 공급망 금융(SCF) 플랫폼입니다.\u003c/p\u003e\n\u003cp\u003e인도의 중소기업 및 중소기업(MSME) 부문의 급속한 성장을 고려해, KredX는 이 섹터의 모든 금융 요구에 대한 일괄 해결책으로 나타났습니다. 우리는 SCF 및 현금 관리 솔루션(CMS) SaaS 생태계의 다양한 측면에서 빠르게 발전하고 있습니다.\u003c/p\u003e\n\u003cp\u003e성장에는 주의가 필요합니다!\n비즈니스의 보다 광범위한 요구를 충족하기 위해, 저희의 SCF 제품 중 하나인 인보이스 할인(ID)의 코드베이스는 거대한 단일체(monolith)가 되었으며, 이로 인해 개발자의 생산성을 저해하고 독자적인 변경이 적게 유연해졌습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e마크다운 포맷으로 위의 텍스트를 번역하겠습니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_1.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e매일 개발하는 것이 얼마나 어려워졌는지 이해하는 데 도움이 되었으면 좋겠습니다. 우리의 ID 프론트엔드 코드 빌드 시간이 거의 50-55분이 걸리고, 프로젝트를 로컬에서 실행하는 데 약 8-12분이 소요됩니다.\u003c/p\u003e\n\u003cp\u003e오늘날, 프로젝트는 너무 끌려다붙었다고 할 정도로 심각해졌는데, 우리의 단일 내부 모듈 중 하나에 문제가 발생하면 전체 앱에 영향을 줄 수도 있습니다(무하랏 모듈의 단일 문제가 금융가 및 관리자 대시보드 전체를 다운시키는 문제가 발생) 그리고 때로는 여러 제품에도 영향을 미칠 수 있습니다(재사용할 수 없는 인증 과정으로 인해 여러 제품에 영향을 미침).\u003c/p\u003e\n\u003cp\u003e기존 단일체 아키텍처의 고통\n코드베이스가 커짐에 따라 여러 문제가 시작되었습니다:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e빌드 시간이 길어짐: 코드베이스의 크기가 커지면 개발 서버를 시작하는 데와 HMR이 개발자 변경 사항을 반영하는 데 더 오래 걸립니다.\u003c/li\u003e\n\u003cli\u003e높은 인지 부담: 여러 앱의 코드가 동일한 저장소에 있기 때문에, 개발자가 이해해야 하는 코드 영역이 증가하여 개발자의 인지 부담이 커집니다.\u003c/li\u003e\n\u003cli\u003e단일 장애점: 모놀리스의 어떤 부분에서 버그가 발생하면 전체 애플리케이션을 다운시키는 결과를 가져옵니다. 즉, 모든 다양한 사용자 설정이 영향을 받아 신뢰성이 떨어지고 수동 및 자동화된 테스트에 더 많은 부담이 생깁니다.\u003c/li\u003e\n\u003cli\u003e독립적인 CI/CD 부재: 금융 자금 할인용으로 사용되는 동일한 ID 코드베이스가 운영자용 대시보드, IPA용 대시보드, GTX용 인증 흐름, KredX Financier 앱에 대한 일반 코드, 그리고 그 이외 많은 곳에도 사용됩니다. 한 모듈의 작은 변경이 전체 코드베이스의 배포를 필요로 합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e우리에게는 코드베이스를 더 작고 독립적인 모듈로 분리할 수 있는 해결책이 필요하다는 점이 매우 명확했습니다. 각 모듈은 유연하여 매끄럽게 플러그인하고 플러그아웃할 수 있어야 하며, 개발, 테스트 및 배포를 독립적으로 수행할 수 있어야 합니다.\u003c/p\u003e\n\u003cp\u003e기술적인 탐색은 이곳에서 시작됩니다.\n동적이고 확장 가능한 솔루션을 찾기 위한 연구\u003c/p\u003e\n\u003cp\u003e해당 솔루션에 대한 고민에 들어가기 전에 솔루션이 어떻게 보일지에 대한 몇 가지 기준을 결정했습니다:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e좋은 개발자 경험: 이 솔루션은 전반적인 개발자 경험을 향상시켜야 합니다.\u003c/li\u003e\n\u003cli\u003e최소한의 아키텍처 변경: 기존 웹 아키텍처에 급격한 수정이 필요하지 않아야 합니다.\u003c/li\u003e\n\u003cli\u003e구성의 용이성: 솔루션을 비교적 쉽게 구성할 수 있어야 합니다.\u003c/li\u003e\n\u003cli\u003e점진적인 학습 곡선: 개발자들에게 순차적인 학습 곡선을 가지며 빠른 도입을 용이하게 해야 합니다.\u003c/li\u003e\n\u003cli\u003e미래 기술 이전: 미래 기술 이전을 위해 솔루션을 쉽게 분리할 수 있어야 합니다.\u003c/li\u003e\n\u003cli\u003e커뮤니티 지원 및 미래 비전: 강력한 커뮤니티 지원과 미래 비전을 가져야 합니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e다양한 접근법\n문제를 자세히 고려하여, 우리는 몇 가지 실행 가능한 접근법을 식별했습니다:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_2.png\" alt=\"Dynamic Scalable Micro-Frontends with Module Federation\"\u003e\u003c/p\u003e\n\u003cp\u003e우리가 시도한 솔루션 중에, Module Federation과 Monorepo가 모든 영역을 충족하고 그 이상을 제공하는 솔루션이라는 것을 발견했습니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e결국, 모듈 페더레이션이 무엇인가요?\n믿어봐요, 기다릴 가치가 있어요!\u003c/p\u003e\n\u003cp\u003e모듈 페더레이션은 Webpack 및 Rspack의 고급 기능으로, JavaScript 애플리케이션을 분산화하는 아키텍처 패턴을 제공하여 (서버 측의 마이크로서비스와 유사하게) 다른 애플리케이션(또는 마이크로 프론트엔드)로부터 코드를 동적으로 로드할 수 있는 방법을 제공합니다. 이는 다음과 같은 이점을 제공할 수 있어요:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e코드 중복 감소\u003c/li\u003e\n\u003cli\u003e코드 유지 관리성 향상\u003c/li\u003e\n\u003cli\u003e애플리케이션 전체 크기 감소\u003c/li\u003e\n\u003cli\u003e애플리케이션 성능 향상\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e모듈 페더레이션의 주요 요소\n모듈 페더레이션 애플리케이션에서는 이해해야 할 여러 요소가 있지만, 아키텍처를 설명할 수 있는 3가지 요소가 있어요:\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cul\u003e\n\u003cli\u003e호스트 또는 셸: 이름 그대로, 이것은 여러 연합된 원격 모듈과 결합될 수 있는 컨테이너입니다. (그 자체가 연합된 모듈임)\u003c/li\u003e\n\u003cli\u003e원격: 자바스크립트, 기본 값, 복잡한 값 또는 전체 모듈 모두 일 수 있습니다. 원격에서 노출하고자 하는 내용은 무엇이든 될 수 있습니다. 기본적으로 이러한 원격 모듈은 최종 조각을 만들기 위해 셸 안에 결합됩니다.\u003c/li\u003e\n\u003cli\u003e공유 의존성: 다른 원격들 간에 공유되는 패키지/라이브러리와 같은 종속성입니다. 이로 인해 중복이 줄어들고 코드 크기도 작아집니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e모든 이러한 설정은 웹팩 구성 내에서 이루어집니다.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_3.png\" alt=\"이미지1\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_4.png\" alt=\"이미지2\"\u003e\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e여러 가지 방법으로 모듈 연합을 활용할 수 있습니다.\n연합 모듈을 사용하는 방법에는 다음과 같은 다양한 유연성이 있습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e도메인 수준: 여기에 각 연합 모듈은 별도의 도메인에 호스팅되어 독립적으로 사용됩니다.\u003c/li\u003e\n\u003cli\u003e위젯/컴포넌트 수준: 이 방법을 통해 어떤 앱에서든 다른 앱으로부터 어떤 위젯(예: 작은 코드 조각)을 추가할 수 있습니다.\u003c/li\u003e\n\u003cli\u003e하이브리드 수준: 첫 번째와 두 번째 방법을 함께 사용할 수 있습니다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_5.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e저희는 우리의 요구에 하이브리드 방법을 선택했습니다. 이곳에서 호스트는 여러 마이크로 프론트엔드(원격)간의 탐색 로직 뿐만 아니라 루트의 지연 로딩도 처리합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e우리는 다양한 리모트들 사이에서 모든 공통 유틸, 컴포넌트, 훅 등을 처리하는 일반 위젯/컴포넌트 페더레이티드 모듈도 만들었습니다.\u003c/p\u003e\n\u003cp\u003e그저 하나의 웹팩 플러그인을 추가하면 끝이라고요? 그 답은: 네와 아니요 둘 다!\u003c/p\u003e\n\u003cp\u003e네, 의심의 여지가 없이 이것은 극적인 변화를 일으키지 않으며, 모듈을 레고처럼 간단하게 만들어 코드베이스에 쉽게 꽂아 넣고 뺄 수 있게 만들어 줍니다. 게다가, 다른 웹팩 플러그인 옆에 앉아서 단순히 연결하기만 하면 됩니다.\u003c/p\u003e\n\u003cp\u003e하지만, 아니요, 저희 팀이 이를 해결하느라 겪은 일부 고통스러운 문제가 있었습니다. 주요 문제로는 오류 처리, 버전 리소스 및 버전 관리, HMR, 타입 안전성 등이 있었어요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e각각의 내부 요구사항과 접근법에 따라 이 문제에 대한 여러 가지 다른 방법을 얻을 수 있습니다. 간단히 말씀드리면, 오늘은 가장 일반적이고 귀찮은 문제인 Type-Safety에 대해 이야기해 볼 거예요. 우리는 개발자가 로컬에서 코드를 작성할 때 타입 안전성과 자동 완성을 원하며, 추가로 타입 확인을 실행하여 TS 오류가 없는지 확인하고 싶어해요.\u003c/p\u003e\n\u003cp\u003e타입 안전성을 되찾아보자!\u003c/p\u003e\n\u003cp\u003e우리는 모노 저장소 구조를 사용하기 때문에 생성된 .d.ts 파일들을 참조하려고 노력했어요. 작동은 했지만 모노 저장소 구조와 결합되었고 외부 모듈에 독립적으로 사용할 수 없었어요.\u003c/p\u003e\n\u003cp\u003e그 다음으로 시도한 것은 타입을 NPM 패키지로 내보내는 것이었지만 이 문제가 우리에게 큰 장애물이었어요.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e마침내 확장 가능한 솔루션이다. 이 솔루션에는 웹팩 구성 내부에 다음 도구가 포함되어 있습니다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003edts-loader: 모든 d.ts 파일을 별도의 폴더에 생성하는 데 사용됨\u003c/li\u003e\n\u003cli\u003eExternalTemplateRemotesPlugin: 원격지에서 생성된 타입 tar 파일을 다운로드함\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_6.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e기본적으로 자바스크립트와 함께 생성된 유형의 tar 파일을 번들링하며, 해당 원격지가 사용된 곳에서 ExternalTemplateRemotesPlugin을 통해 해당 파일을 다운로드합니다.\u003c/p\u003e\n\u003cdiv class=\"content-ad\"\u003e\u003c/div\u003e\n\u003cp\u003e저희가 새로운 애플리케이션을 만들었는데 ID의 모든 경우/기능이 다 다뤄지지 않았기 때문에 이 결과는 사전 보드 결과와 비슷할 것입니다. 지금은 대략적인 방향을 얻을 수 있습니다;\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/assets/img/2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation_7.png\" alt=\"이미지\"\u003e\u003c/p\u003e\n\u003cp\u003e축하합니다! 성공하셨네요!\n의문이나 제안이 있으면 댓글에 남겨주세요. 또는 제 소셜 미디어 ID 중 하나로 메시지를 남겨주세요. 이처럼 도전을 해결하는 것을 즐기신다면, 저희 채용 페이지 \u003ca href=\"https://www.kredx.com/join-our-team%EC%9D%84\" rel=\"nofollow\" target=\"_blank\"\u003ehttps://www.kredx.com/join-our-team을\u003c/a\u003e 꼭 확인해보세요.\u003c/p\u003e\n\u003c/body\u003e\n\u003c/html\u003e\n"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"2024-06-22-DynamicScalableMicro-FrontendswithModuleFederation"},"buildId":"Rv-NbbtWUaja2joH5WkO_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>